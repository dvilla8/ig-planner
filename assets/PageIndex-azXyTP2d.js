import{_ as M,V as j,a as T,b as O,c as L,d as B,m as Y,u as Q,e as E,f as Z,g as ee,h as N,i as te,j as ne,k as re}from"./VContainer-8-ecbDTb.js";import{o as _,c as F,a as oe,d as A,b as w,w as f,e as U,f as p,u as W,p as ae,g as se,h as ie,i as le,j as ce,k,r as I,m as $,l as ue,n as G,q as de,F as H,S as z,s as V,t as q,v as P,x as b,y as fe,z as pe,A as me,B as ye,C as ve,M as D,D as _e,E as J,G as ge,H as he,I as we,J as be,K as ke}from"./index-fvlm3aHf.js";const xe={},Pe={class:"ig-intro text-center"},Se=oe('<h2 class="hidden-md-and-up" data-v-e5af98a7> Plan your Instagram grid<br data-v-e5af98a7>like a pro with IG Planner </h2><h2 class="hidden-sm-and-down" data-v-e5af98a7>Plan your Instagram grid like a pro</h2><p class="mt-5 text-grey-darken-1" data-v-e5af98a7><a href="https://github.com/dxlliv/ig-planner" data-v-e5af98a7>dxlliv/ig-planner</a> let you preview what your profile grid will look like.<br class="hidden-xs" data-v-e5af98a7> Clone the repository and build your Instagram grid with a text editor. </p>',3),Ue=[Se];function Ie(e,n){return _(),F("div",Pe,Ue)}const Ae=M(xe,[["render",Ie],["__scopeId","data-v-e5af98a7"]]),Ve=A({__name:"UserSelectorMenu",props:{user:{}},setup(e){const{user:n}=e;function r(){W().unloadUser(n.profile.username)}return(t,s)=>(_(),w(B,{"content-class":"ig-profile-selector__context-menu",activator:"parent",transition:"slide-y-transition","close-on-back":"","open-delay":5e3,offset:[7,0]},{default:f(()=>[p(j,null,{default:f(()=>[p(T,{href:t.user.profile.public_profile,target:"_blank"},{default:f(()=>[p(O,null,{default:f(()=>[U("Open on Instagram")]),_:1})]),_:1},8,["href"]),p(L),p(T,{onClick:s[0]||(s[0]=i=>r()),class:"text-red"},{default:f(()=>[p(O,null,{default:f(()=>[U("Remove")]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ce=ae({id:String,text:String,...se(Y({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),Te=ie()({name:"VTooltip",props:Ce(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const t=le(e,"modelValue"),{scopeId:s}=Q(),i=ce(),o=k(()=>e.id||`v-tooltip-${i}`),u=I(),l=k(()=>e.location.split(" ").length>1?e.location:e.location+" center"),c=k(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),m=k(()=>e.transition?e.transition:t.value?"scale-transition":"fade-transition"),a=k(()=>$({"aria-describedby":o.value},e.activatorProps));return ue(()=>{const y=E.filterProps(e);return p(E,$({ref:u,class:["v-tooltip",e.class],style:e.style,id:o.value},y,{modelValue:t.value,"onUpdate:modelValue":v=>t.value=v,transition:m.value,absolute:!0,location:l.value,origin:c.value,persistent:!0,role:"tooltip",activatorProps:a.value,_disableGlobalStack:!0},s),{activator:r.activator,default:function(){var S;for(var v=arguments.length,g=new Array(v),h=0;h<v;h++)g[h]=arguments[h];return((S=r.default)==null?void 0:S.call(r,...g))??e.text}})}),Z({},u)}}),Oe={};function Fe(e,n){return _(),w(ee,{color:"grey-darken-3"},{default:f(()=>[p(Te,{"content-class":"text-overline",activator:"parent",offset:[16,3]},{default:f(()=>[U(" Local ")]),_:1})]),_:1})}const Me=M(Oe,[["render",Fe]]),Le=["textContent"],Re=["href"],K=A({__name:"UserSelector",props:{user:{},add:{type:Boolean}},setup(e){const n=G({enabled:!1,x:0,y:0});function r(t){t.preventDefault(),n.enabled=!1,n.x=t.clientX,n.y=t.clientY,me(()=>{n.enabled=!0})}return(t,s)=>{const i=Me,o=N,u=Ve,l=de("router-link");return _(),F("div",{class:pe(["ig-profile-selector",{"ig-profile-selector--add":t.add}])},[t.user?(_(),F(H,{key:0},[p(l,{to:{name:"user",params:{username:t.user.profile.username}},onContextmenu:r},{default:f(()=>[(_(),w(z,null,{default:f(()=>[p(o,{avatar:t.user.profile.avatar},{inner:f(()=>[t.user.hasChanges?(_(),w(i,{key:0})):V("",!0)]),_:1},8,["avatar"])]),_:1})),P("h3",{class:"mt-4",textContent:q(t.user.profile.username)},null,8,Le),b(n).enabled?(_(),w(u,{key:0,modelValue:b(n).enabled,"onUpdate:modelValue":s[0]||(s[0]=c=>b(n).enabled=c),user:t.user},null,8,["modelValue","user"])):V("",!0)]),_:1},8,["to"]),P("a",{class:"text-blue-grey-lighten-4",href:t.user.profile.public_profile,target:"_blank"},"ðŸ¡¥",8,Re)],64)):V("",!0),fe(t.$slots,"default")],2)}}}),R=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})();R?Promise.resolve().then(function(){return Be}):Promise.resolve().then(function(){return qe});const Ee=R?Promise.resolve().then(function(){return We}):Promise.resolve().then(function(){return Ke});async function $e(...e){return(await Ee).default(...e)}R?Promise.resolve().then(function(){return He}):Promise.resolve().then(function(){return Ye});const De=async e=>{const n=await e.getFile();return n.handle=e,n};var je=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const n=[];e.forEach((s,i)=>{n[i]={description:s.description||"Files",accept:{}},s.mimeTypes?s.mimeTypes.map(o=>{n[i].accept[o]=s.extensions||[]}):n[i].accept["*/*"]=s.extensions||[]});const r=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:n,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),t=await Promise.all(r.map(De));return e[0].multiple?t:t[0]},Be={__proto__:null,default:je};function C(e){function n(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var t=r.done;return Promise.resolve(r.value).then(function(s){return{value:s,done:t}})}return C=function(r){this.s=r,this.n=r.next},C.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(r){var t=this.s.return;return t===void 0?Promise.resolve({value:r,done:!0}):n(t.apply(this.s,arguments))},throw:function(r){var t=this.s.return;return t===void 0?Promise.reject(r):n(t.apply(this.s,arguments))}},new C(e)}const X=async(e,n,r=e.name,t)=>{const s=[],i=[];var o,u=!1,l=!1;try{for(var c,m=function(a){var y,v,g,h=2;for(typeof Symbol<"u"&&(v=Symbol.asyncIterator,g=Symbol.iterator);h--;){if(v&&(y=a[v])!=null)return y.call(a);if(g&&(y=a[g])!=null)return new C(y.call(a));v="@@asyncIterator",g="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());u=!(c=await m.next()).done;u=!1){const a=c.value,y=`${r}/${a.name}`;a.kind==="file"?i.push(a.getFile().then(v=>(v.directoryHandle=e,v.handle=a,Object.defineProperty(v,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>y})))):a.kind!=="directory"||!n||t&&t(a)||s.push(X(a,n,y,t))}}catch(a){l=!0,o=a}finally{try{u&&m.return!=null&&await m.return()}finally{if(l)throw o}}return[...(await Promise.all(s)).flat(),...await Promise.all(i)]};var Ne=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const n=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await n.values()).next()).done?[n]:X(n,e.recursive,void 0,e.skipDirectory)},We={__proto__:null,default:Ne},Ge=async(e,n=[{}],r=null,t=!1,s=null)=>{Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";const i=[];let o=null;if(e instanceof Blob&&e.type?o=e.type:e.headers&&e.headers.get("content-type")&&(o=e.headers.get("content-type")),n.forEach((c,m)=>{i[m]={description:c.description||"Files",accept:{}},c.mimeTypes?(m===0&&o&&c.mimeTypes.push(o),c.mimeTypes.map(a=>{i[m].accept[a]=c.extensions||[]})):o?i[m].accept[o]=c.extensions||[]:i[m].accept["*/*"]=c.extensions||[]}),r)try{await r.getFile()}catch(c){if(r=null,t)throw c}const u=r||await window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:i,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});!r&&s&&s(u);const l=await u.createWritable();return"stream"in e?(await e.stream().pipeTo(l),u):"body"in e?(await e.body.pipeTo(l),u):(await l.write(await e),await l.close(),u)},He={__proto__:null,default:Ge},ze=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((n,r)=>{const t=document.createElement("input");t.type="file";const s=[...e.map(l=>l.mimeTypes||[]),...e.map(l=>l.extensions||[])].join();t.multiple=e[0].multiple||!1,t.accept=s||"",t.style.display="none",document.body.append(t);const i=l=>{typeof o=="function"&&o(),n(l)},o=e[0].legacySetup&&e[0].legacySetup(i,()=>o(r),t),u=()=>{window.removeEventListener("focus",u),t.remove()};t.addEventListener("click",()=>{window.addEventListener("focus",u)}),t.addEventListener("change",()=>{window.removeEventListener("focus",u),t.remove(),i(t.multiple?Array.from(t.files):t.files[0])}),"showPicker"in HTMLInputElement.prototype?t.showPicker():t.click()})),qe={__proto__:null,default:ze},Je=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((n,r)=>{const t=document.createElement("input");t.type="file",t.webkitdirectory=!0;const s=o=>{typeof i=="function"&&i(),n(o)},i=e[0].legacySetup&&e[0].legacySetup(s,()=>i(r),t);t.addEventListener("change",()=>{let o=Array.from(t.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(o=o.filter(u=>u.webkitRelativePath.split("/").every(l=>!e[0].skipDirectory({name:l,kind:"directory"})))):o=o.filter(u=>u.webkitRelativePath.split("/").length===2),s(o)}),"showPicker"in HTMLInputElement.prototype?t.showPicker():t.click()})),Ke={__proto__:null,default:Je},Xe=async(e,n={})=>{Array.isArray(n)&&(n=n[0]);const r=document.createElement("a");let t=e;"body"in e&&(t=await async function(o,u){const l=o.getReader(),c=new ReadableStream({start:y=>async function v(){return l.read().then(({done:g,value:h})=>{if(!g)return y.enqueue(h),v();y.close()})}()}),m=new Response(c),a=await m.blob();return l.releaseLock(),new Blob([a],{type:u})}(e.body,e.headers.get("content-type"))),r.download=n.fileName||"Untitled",r.href=URL.createObjectURL(await t);const s=()=>{typeof i=="function"&&i()},i=n.legacySetup&&n.legacySetup(s,()=>i(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),s()}),r.click(),null},Ye={__proto__:null,default:Xe};async function Qe(){return $e({recursive:!0,mode:"readwrite",startIn:"documents",id:"import-profile",skipDirectory:n=>n.name[0]==="."})}async function Ze(e){return new Promise((n,r)=>{let t=new FileReader;t.readAsText(e),t.onload=function(){typeof t.result!="string"&&r("Directory does not contain a valid config.json"),n(JSON.parse(t.result))},t.onerror=r})}const et=ye("user/import",()=>{const e=W(),n=ve(),r=I(null),t=I({});async function s(){r.value=await Qe(),t.value=await Ze(i.value),t.value.profile.avatar=u(),t.value.media.posts&&o("posts"),t.value.media.reels&&o("reels"),e.loadUser(t.value,!0),n.addUserToStorageIndex(t.value.profile.username)}const i=k(()=>r.value.find(c=>c.name==="config.json"));function o(c){var v,g,h,S;let m=0,a={},y={};for(const d of t.value.media[c]){if(a={},typeof d=="string")a.type=D.detectMediaType(d),d.startsWith("http")||(a.file=l(d));else if(d.type)switch(d.type){case"image":a.type=d.type,d.name&&!((v=d.name)!=null&&v.startsWith("http"))&&(a.file=l(d.name));break;case"video":a.type=d.type,d.name&&!((g=d.name)!=null&&g.startsWith("http"))&&(a.file=l(d.name)),d.cover&&typeof d.cover=="string"&&!((h=d.cover)!=null&&h.startsWith("http"))&&(a.file=l(d.cover));break;case"album":if(a.type=d.type,a.list=[],Array.isArray(d.list)){for(const x of d.list)y={},typeof x=="string"?(y.type=D.detectMediaType(x),y.file=l(x)):x.name&&(y.type=x.type,y.file=l(x.name));a.list.push(y)}break;case"iframe":d.cover&&typeof d.cover=="string"&&!((S=d.cover)!=null&&S.startsWith("http"))&&(a.cover=l(d.cover));break}t.value.media.posts[m]=a,m++}}function u(){return r.value.find(c=>c.name===t.value.profile.avatar)}function l(c){return r.value.find(m=>m.name===c)}return{importFromDirectory:s}}),tt=A({__name:"UserSelectorAddMenu",emits:["toggle"],setup(e,{emit:n}){const r=et(),t=n,s=I(!1);_e(()=>s.value,u=>{t("toggle",u)});function i(){window.alert(`Not implemented yet,
edit the configuration.

Read the docs for further info
dxlliv.github.io/ig-planner/docs/`)}function o(){r.importFromDirectory()}return(u,l)=>(_(),w(B,{modelValue:b(s),"onUpdate:modelValue":l[0]||(l[0]=c=>J(s)?s.value=c:null),"content-class":"ig-profile-selector__context-menu",activator:"parent",transition:"slide-y-transition","close-on-back":"","open-delay":5e3,offset:[7,0]},{default:f(()=>[p(j,null,{default:f(()=>[p(T,{onClick:i},{default:f(()=>[p(O,null,{default:f(()=>[U("Create profile")]),_:1})]),_:1}),p(L),p(T,{onClick:o},{default:f(()=>[p(O,null,{default:f(()=>[U("Import from folder")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),nt=["textContent"],rt=A({__name:"UserSelectorAdd",setup(e){const n=G({value:"",generatorInterval:0});function r(o){o?t():s()}function t(){n.generatorInterval=setInterval(()=>{n.value=ge().substring(0,6)},75)}function s(){clearInterval(n.generatorInterval),n.value=""}async function i(){}return(o,u)=>{const l=tt,c=N,m=K;return _(),w(m,{add:"",onClick:i},{default:f(()=>[(_(),w(z,null,{default:f(()=>[p(c,null,{inner:f(()=>[p(te,{size:"48px",icon:"mdi-plus",color:"grey-lighten-1"})]),default:f(()=>[p(l,{onToggle:r}),P("h3",{class:"mt-4",textContent:q(b(n).value)},null,8,nt)]),_:1})]),_:1}))]),_:1})}}}),ot=M(rt,[["__scopeId","data-v-bf628473"]]),at={class:"d-inline-flex text-center"},st={class:"v-col flex-grow-0"},it=A({__name:"PageIndex",setup(e){const n=he(),r=I(n.listOfUsernames),t=k(()=>n.listOfUsers);function s(i){n.setUsersOrder(i)}return(i,o)=>{const u=K,l=ot,c=Ae,m=re;return _(),w(ne,{class:"ig-index text-center py-16 align-content-center"},{default:f(()=>[P("div",null,[P("div",at,[p(b(be),{class:"v-row",list:b(r),"onUpdate:list":[o[0]||(o[0]=a=>J(r)?r.value=a:null),s],axis:"x","press-delay":100},{default:f(()=>[(_(!0),F(H,null,we(b(t),(a,y)=>(_(),w(b(ke),{class:"v-col flex-grow-0",key:a.profile.username,index:y},{default:f(()=>[a&&a.ready?(_(),w(u,{key:0,user:a},null,8,["user"])):V("",!0)]),_:2},1032,["index"]))),128)),P("div",st,[p(l)])]),_:1},8,["list"])]),p(L,{class:"mt-15 mb-10"}),p(c),p(m)])]),_:1})}}}),ut=M(it,[["__scopeId","data-v-4181c7e9"]]);export{ut as default};
