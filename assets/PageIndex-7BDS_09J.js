import{_ as T,V as B,a as O,b as R,c as F,d as N,m as X,u as Y,e as E,f as Q,g as Z,h as ee,i as te,j as ne,k as re,l as ae,n as oe}from"./VContainer-IWbuXg_A.js";import{o as y,c as V,a as se,d as U,r as P,b as h,w as p,e as C,f,p as ie,g as le,h as ce,u as ue,i as de,j as k,m as D,k as pe,l as z,n as fe,F as W,S as G,q as A,t as H,s as S,v as b,x as $,y as me,z as ve,A as _e,B as ye,C as ge,D as he,U as j,E as we,G as q,H as be,I as ke,J as xe,K as Se,L as Pe}from"./index-WKuD1Zhq.js";const Ue={},Ie={class:"ig-intro text-center"},Ae=se('<h2 class="hidden-md-and-up" data-v-e5af98a7> Plan your Instagram grid<br data-v-e5af98a7>like a pro with IG Planner </h2><h2 class="hidden-sm-and-down" data-v-e5af98a7>Plan your Instagram grid like a pro</h2><p class="mt-5 text-grey-darken-1" data-v-e5af98a7><a href="https://github.com/dxlliv/ig-planner" data-v-e5af98a7>dxlliv/ig-planner</a> let you preview what your profile grid will look like.<br class="hidden-xs" data-v-e5af98a7> Clone the repository and build your Instagram grid with a text editor. </p>',3),Ve=[Ae];function Ce(e,n){return y(),V("div",Ie,Ve)}const Te=T(Ue,[["render",Ce],["__scopeId","data-v-e5af98a7"]]),Le=U({__name:"UserSelectorMenu",props:{user:{}},setup(e){const{user:n}=e,r=P(!1);function t(){n.isRemovable||(r.value=!0),n.remove()}return(a,o)=>(y(),h(N,{"content-class":"ig-profile-selector__context-menu",activator:"parent",transition:"slide-y-transition","close-on-back":"","open-delay":5e3,offset:[7,0]},{default:p(()=>[f(B,null,{default:p(()=>[f(O,{href:a.user.profile.public_profile,target:"_blank"},{default:p(()=>[f(R,null,{default:p(()=>[C("Open on Instagram")]),_:1})]),_:1},8,["href"]),f(F),f(O,{onClick:o[0]||(o[0]=s=>t()),class:"text-red"},{default:p(()=>[f(R,null,{default:p(()=>[C("Remove")]),_:1})]),_:1})]),_:1})]),_:1}))}}),Oe=ie({id:String,text:String,...le(X({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),Re=ce()({name:"VTooltip",props:Oe(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:r}=n;const t=ue(e,"modelValue"),{scopeId:a}=Y(),o=de(),s=k(()=>e.id||`v-tooltip-${o}`),u=P(),l=k(()=>e.location.split(" ").length>1?e.location:e.location+" center"),c=k(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),m=k(()=>e.transition?e.transition:t.value?"scale-transition":"fade-transition"),i=k(()=>D({"aria-describedby":s.value},e.activatorProps));return pe(()=>{const v=E.filterProps(e);return f(E,D({ref:u,class:["v-tooltip",e.class],style:e.style,id:s.value},v,{modelValue:t.value,"onUpdate:modelValue":_=>t.value=_,transition:m.value,absolute:!0,location:l.value,origin:c.value,persistent:!0,role:"tooltip",activatorProps:i.value,_disableGlobalStack:!0},a),{activator:r.activator,default:function(){var I;for(var _=arguments.length,g=new Array(_),w=0;w<_;w++)g[w]=arguments[w];return((I=r.default)==null?void 0:I.call(r,...g))??e.text}})}),Q({},u)}}),$e={};function Fe(e,n){return y(),h(Z,{color:"grey-darken-3"},{default:p(()=>[f(Re,{"content-class":"text-overline",activator:"parent",offset:[16,3]},{default:p(()=>[C(" Local ")]),_:1})]),_:1})}const Me=T($e,[["render",Fe]]),Ee=["textContent"],De=["href"],J=U({__name:"UserSelector",props:{user:{},add:{type:Boolean}},setup(e){const n=z({enabled:!1,x:0,y:0});function r(t){t.preventDefault(),n.enabled=!1,n.x=t.clientX,n.y=t.clientY,ve(()=>{n.enabled=!0})}return(t,a)=>{const o=Me,s=ee,u=Le,l=fe("router-link");return y(),V("div",{class:me(["ig-profile-selector",{"ig-profile-selector--add":t.add}])},[t.user?(y(),V(W,{key:0},[f(l,{to:{name:"user",params:{username:t.user.username}},onContextmenu:r},{default:p(()=>[(y(),h(G,null,{default:p(()=>[f(s,{avatar:t.user.profile.avatar},{inner:p(()=>[t.user.hasLocalChanges?(y(),h(o,{key:0})):A("",!0)]),_:1},8,["avatar"])]),_:1})),S("h3",{class:"mt-4",textContent:H(t.user.username)},null,8,Ee),b(n).enabled?(y(),h(u,{key:0,modelValue:b(n).enabled,"onUpdate:modelValue":a[0]||(a[0]=c=>b(n).enabled=c),user:t.user},null,8,["modelValue","user"])):A("",!0)]),_:1},8,["to"]),S("a",{class:"text-blue-grey-lighten-4",href:t.user.profile.public_profile,target:"_blank"},"ðŸ¡¥",8,De)],64)):A("",!0),$(t.$slots,"default")],2)}}}),je={class:"ig-profile-avatar__container"},Be=U({__name:"UserSelectorAvatar",props:{avatar:{},size:{default:"120px"}},async setup(e){let n,r;const t=e;let a;return t.avatar&&(a=URL.createObjectURL(([n,r]=_e(()=>t.avatar.file),n=await n,r(),n))),(o,s)=>(y(),V("div",je,[f(ne,{size:o.size,class:"ig-profile-avatar"},{default:p(()=>[b(a)?(y(),h(te,{key:0,src:b(a)},null,8,["src"])):A("",!0),$(o.$slots,"inner",{},void 0,!0)]),_:3},8,["size"]),$(o.$slots,"default",{},void 0,!0)]))}}),Ne=T(Be,[["__scopeId","data-v-b1d784b9"]]),M=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})();M?Promise.resolve().then(function(){return qe}):Promise.resolve().then(function(){return Ze});const ze=M?Promise.resolve().then(function(){return Ke}):Promise.resolve().then(function(){return tt});async function We(...e){return(await ze).default(...e)}M?Promise.resolve().then(function(){return Ye}):Promise.resolve().then(function(){return rt});const Ge=async e=>{const n=await e.getFile();return n.handle=e,n};var He=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const n=[];e.forEach((a,o)=>{n[o]={description:a.description||"Files",accept:{}},a.mimeTypes?a.mimeTypes.map(s=>{n[o].accept[s]=a.extensions||[]}):n[o].accept["*/*"]=a.extensions||[]});const r=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:n,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),t=await Promise.all(r.map(Ge));return e[0].multiple?t:t[0]},qe={__proto__:null,default:He};function L(e){function n(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var t=r.done;return Promise.resolve(r.value).then(function(a){return{value:a,done:t}})}return L=function(r){this.s=r,this.n=r.next},L.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(r){var t=this.s.return;return t===void 0?Promise.resolve({value:r,done:!0}):n(t.apply(this.s,arguments))},throw:function(r){var t=this.s.return;return t===void 0?Promise.reject(r):n(t.apply(this.s,arguments))}},new L(e)}const K=async(e,n,r=e.name,t)=>{const a=[],o=[];var s,u=!1,l=!1;try{for(var c,m=function(i){var v,_,g,w=2;for(typeof Symbol<"u"&&(_=Symbol.asyncIterator,g=Symbol.iterator);w--;){if(_&&(v=i[_])!=null)return v.call(i);if(g&&(v=i[g])!=null)return new L(v.call(i));_="@@asyncIterator",g="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());u=!(c=await m.next()).done;u=!1){const i=c.value,v=`${r}/${i.name}`;i.kind==="file"?o.push(i.getFile().then(_=>(_.directoryHandle=e,_.handle=i,Object.defineProperty(_,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>v})))):i.kind!=="directory"||!n||t&&t(i)||a.push(K(i,n,v,t))}}catch(i){l=!0,s=i}finally{try{u&&m.return!=null&&await m.return()}finally{if(l)throw s}}return[...(await Promise.all(a)).flat(),...await Promise.all(o)]};var Je=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const n=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await n.values()).next()).done?[n]:K(n,e.recursive,void 0,e.skipDirectory)},Ke={__proto__:null,default:Je},Xe=async(e,n=[{}],r=null,t=!1,a=null)=>{Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";const o=[];let s=null;if(e instanceof Blob&&e.type?s=e.type:e.headers&&e.headers.get("content-type")&&(s=e.headers.get("content-type")),n.forEach((c,m)=>{o[m]={description:c.description||"Files",accept:{}},c.mimeTypes?(m===0&&s&&c.mimeTypes.push(s),c.mimeTypes.map(i=>{o[m].accept[i]=c.extensions||[]})):s?o[m].accept[s]=c.extensions||[]:o[m].accept["*/*"]=c.extensions||[]}),r)try{await r.getFile()}catch(c){if(r=null,t)throw c}const u=r||await window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:o,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});!r&&a&&a(u);const l=await u.createWritable();return"stream"in e?(await e.stream().pipeTo(l),u):"body"in e?(await e.body.pipeTo(l),u):(await l.write(await e),await l.close(),u)},Ye={__proto__:null,default:Xe},Qe=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((n,r)=>{const t=document.createElement("input");t.type="file";const a=[...e.map(l=>l.mimeTypes||[]),...e.map(l=>l.extensions||[])].join();t.multiple=e[0].multiple||!1,t.accept=a||"",t.style.display="none",document.body.append(t);const o=l=>{typeof s=="function"&&s(),n(l)},s=e[0].legacySetup&&e[0].legacySetup(o,()=>s(r),t),u=()=>{window.removeEventListener("focus",u),t.remove()};t.addEventListener("click",()=>{window.addEventListener("focus",u)}),t.addEventListener("change",()=>{window.removeEventListener("focus",u),t.remove(),o(t.multiple?Array.from(t.files):t.files[0])}),"showPicker"in HTMLInputElement.prototype?t.showPicker():t.click()})),Ze={__proto__:null,default:Qe},et=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((n,r)=>{const t=document.createElement("input");t.type="file",t.webkitdirectory=!0;const a=s=>{typeof o=="function"&&o(),n(s)},o=e[0].legacySetup&&e[0].legacySetup(a,()=>o(r),t);t.addEventListener("change",()=>{let s=Array.from(t.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(s=s.filter(u=>u.webkitRelativePath.split("/").every(l=>!e[0].skipDirectory({name:l,kind:"directory"})))):s=s.filter(u=>u.webkitRelativePath.split("/").length===2),a(s)}),"showPicker"in HTMLInputElement.prototype?t.showPicker():t.click()})),tt={__proto__:null,default:et},nt=async(e,n={})=>{Array.isArray(n)&&(n=n[0]);const r=document.createElement("a");let t=e;"body"in e&&(t=await async function(s,u){const l=s.getReader(),c=new ReadableStream({start:v=>async function _(){return l.read().then(({done:g,value:w})=>{if(!g)return v.enqueue(w),_();v.close()})}()}),m=new Response(c),i=await m.blob();return l.releaseLock(),new Blob([i],{type:u})}(e.body,e.headers.get("content-type"))),r.download=n.fileName||"Untitled",r.href=URL.createObjectURL(await t);const a=()=>{typeof o=="function"&&o()},o=n.legacySetup&&n.legacySetup(a,()=>o(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),a()}),r.click(),null},rt={__proto__:null,default:nt};async function at(){return We({recursive:!0,mode:"readwrite",startIn:"documents",id:"import-profile",skipDirectory:n=>n.name[0]==="."})}async function ot(e){return new Promise((n,r)=>{let t=new FileReader;t.readAsText(e),t.onload=function(){typeof t.result!="string"&&r("Directory does not contain a valid config.json"),n(JSON.parse(t.result))},t.onerror=r})}const st=ye("user/import",()=>{const e=ge(),n=he(),r=P(null),t=P({});async function a(){r.value=await at(),t.value=await ot(o.value),t.value.profile.avatar=u(),t.value.media.posts&&s("posts"),t.value.media.reels&&s("reels"),e.loadUser(t.value,"storage",!0),n.addUserToStorageIndex(t.value.username)}const o=k(()=>r.value.find(c=>c.name==="config.json"));function s(c){var _,g,w,I;let m=0,i={},v={};for(const d of t.value.media[c]){if(i={},typeof d=="string")i.type=j.detectMediaType(d),d.startsWith("http")||(i.file=l(d));else if(d.type)switch(d.type){case"image":i.type=d.type,d.name&&!((_=d.name)!=null&&_.startsWith("http"))&&(i.file=l(d.name));break;case"video":i.type=d.type,d.name&&!((g=d.name)!=null&&g.startsWith("http"))&&(i.file=l(d.name)),d.cover&&typeof d.cover=="string"&&!((w=d.cover)!=null&&w.startsWith("http"))&&(i.file=l(d.cover));break;case"album":if(i.type=d.type,i.list=[],Array.isArray(d.list)){for(const x of d.list)v={},typeof x=="string"?(v.type=j.detectMediaType(x),v.file=l(x)):x.name&&(v.type=x.type,v.file=l(x.name));i.list.push(v)}break;case"iframe":d.cover&&typeof d.cover=="string"&&!((I=d.cover)!=null&&I.startsWith("http"))&&(i.cover=l(d.cover));break}t.value.media.posts[m]=i,m++}}function u(){return r.value.find(c=>c.name===t.value.profile.avatar)}function l(c){return r.value.find(m=>m.name===c)}return{importFromDirectory:a}}),it=U({__name:"UserSelectorAddMenu",emits:["toggle"],setup(e,{emit:n}){const r=st(),t=n,a=P(!1);we(()=>a.value,u=>{t("toggle",u)});function o(){window.alert(`Not implemented yet,
edit the configuration.

Read the docs for further info
dxlliv.github.io/ig-planner/docs/`)}function s(){r.importFromDirectory()}return(u,l)=>(y(),h(N,{modelValue:b(a),"onUpdate:modelValue":l[0]||(l[0]=c=>q(a)?a.value=c:null),"content-class":"ig-profile-selector__context-menu",activator:"parent",transition:"slide-y-transition","close-on-back":"","open-delay":5e3,offset:[7,0]},{default:p(()=>[f(B,null,{default:p(()=>[f(O,{onClick:o},{default:p(()=>[f(R,null,{default:p(()=>[C("Create profile")]),_:1})]),_:1}),f(F),f(O,{onClick:s},{default:p(()=>[f(R,null,{default:p(()=>[C("Import from folder")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),lt=["textContent"],ct=U({__name:"UserSelectorAdd",setup(e){const n=z({value:"",generatorInterval:0});function r(s){s?t():a()}function t(){n.generatorInterval=setInterval(()=>{n.value=be().substring(0,6)},75)}function a(){clearInterval(n.generatorInterval),n.value=""}async function o(){}return(s,u)=>{const l=it,c=Ne,m=J;return y(),h(m,{add:"",onClick:o},{default:p(()=>[(y(),h(G,null,{default:p(()=>[f(c,null,{inner:p(()=>[f(re,{size:"48px",icon:"mdi-plus",color:"grey-lighten-1"})]),default:p(()=>[f(l,{onToggle:r}),S("h3",{class:"text-truncate mt-4 mx-auto text-center",textContent:H(b(n).value)},null,8,lt)]),_:1})]),_:1}))]),_:1})}}}),ut=T(ct,[["__scopeId","data-v-9d5db0a8"]]),dt={class:"d-inline-flex text-center"},pt={class:"v-col flex-grow-0 hidden-sm-and-down"},ft=U({__name:"PageIndex",setup(e){const n=ke(),r=P(n.listOfUsernames),t=k(()=>n.listOfUsers);function a(o){n.setUsersOrder(o)}return(o,s)=>{const u=J,l=ut,c=Te,m=oe;return y(),h(ae,{class:"ig-index text-center py-16 align-content-center"},{default:p(()=>[S("div",null,[S("div",dt,[f(b(Se),{class:"v-row",list:b(r),"onUpdate:list":[s[0]||(s[0]=i=>q(r)?r.value=i:null),a],axis:"x","press-delay":100},{default:p(()=>[(y(!0),V(W,null,xe(b(t),(i,v)=>(y(),h(b(Pe),{class:"v-col flex-grow-0",key:i.username,index:v},{default:p(()=>[i&&i.ready?(y(),h(u,{key:0,user:i},null,8,["user"])):A("",!0)]),_:2},1032,["index"]))),128)),S("div",pt,[f(l)])]),_:1},8,["list"])]),f(F,{class:"mt-15 mb-10"}),f(c),f(m,{class:"pb-0"})])]),_:1})}}}),_t=T(ft,[["__scopeId","data-v-14c222b2"]]);export{_t as default};
