import{_ as ce,V as Ct,a as Pt,b as kt,c as St,m as Rt,d as It,M as Ut,e as Et,f as Ot,g as Ft,h as At,u as Lt,i as Re,j as Tt,k as jt,l as Dt,n as Bt,o as Mt,p as zt,s as Nt,L as Gt,q as Ht,r as Je,I as Xe,t as _e,v as Ie,w as qt,x as Ye,y as Wt,z as Ze,A as K,B as te,C as Kt,D as Qe,E as he,F as $e,G as Ue,H as et,J as Jt,K as Xt,N as De,O as Yt,P as Zt,Q as Qt}from"./VBadge-AtB1V3mh.js";import{o as S,c as ae,a as en,d as H,b as A,w as x,t as Ee,e as u,r as xe,p as re,m as Oe,g as le,f as $,u as oe,h as se,v as tt,I as Ce,E as Pe,i as tn,j as nn,k as an,l as nt,n as b,q as rn,s as G,x as at,F as J,y as X,z as ln,A as on,B as Fe,C as sn,D as un,G as rt,H as lt,J as ot,K as it,L as cn,M as Z,N as st,O as dn,P as fn,Q as vn,R as p,S as ie,T as mn,U as pn,V as Q,W as de,X as gn,Y as yn,Z as Be,_ as Me,$ as ut,a0 as _n,a1 as ct,a2 as dt,a3 as hn,a4 as ue,a5 as $n,a6 as xn,a7 as bn,a8 as ne,a9 as wn,aa as Vn,ab as ze,ac as Cn,ad as Pn,ae as kn,af as Sn,ag as Rn}from"./index--cX7wqhc.js";const In={},Un={class:"ig-intro text-center"},En=en('<h2 class="hidden-md-and-up" data-v-68dc5385> Plan your Instagram grid<br data-v-68dc5385>like a pro with IG Planner </h2><h2 class="hidden-sm-and-down" data-v-68dc5385>Plan your Instagram grid like a pro</h2><p class="mt-5 text-grey-darken-1" data-v-68dc5385><a href="https://github.com/dxlliv/planner" data-v-68dc5385>dxlliv/planner</a> let you preview what your profile grid will look like.<br class="hidden-xs" data-v-68dc5385> Bring your grid to the next level with a text editor or interactively. </p>',3),On=[En];function Fn(e,a){return S(),ae("div",Un,On)}const An=ce(In,[["render",Fn],["__scopeId","data-v-68dc5385"]]),ft=H({__name:"UserEditorDialog",props:{title:{}},emits:["close"],setup(e,{emit:a}){const n=a;return(t,r)=>(S(),A(St,{"content-class":"ig-user-export","max-width":700,onClose:r[0]||(r[0]=l=>n("close"))},{default:x(()=>[u(Ct,null,{default:x(()=>[u(Pt,{textContent:Ee(t.title)},null,8,["textContent"]),u(kt,null,{default:x(()=>[xe(t.$slots,"default")]),_:3})]),_:3})]),_:3}))}}),Ln=re({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Oe(),...Rt({transition:{component:It}})},"VCounter"),vt=le()({name:"VCounter",functional:!0,props:Ln(),setup(e,a){let{slots:n}=a;const t=$(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return oe(()=>u(Ut,{transition:e.transition},{default:()=>[se(u("div",{class:["v-counter",e.class],style:e.style},[n.default?n.default({counter:t.value,max:e.max,value:e.value}):t.value]),[[tt,e.active]])]})),{}}}),Tn=re({floating:Boolean,...Oe()},"VFieldLabel"),pe=le()({name:"VFieldLabel",props:Tn(),setup(e,a){let{slots:n}=a;return oe(()=>u(Et,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},n)),{}}}),jn=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Ae=re({appendInnerIcon:Ce,bgColor:String,clearable:Boolean,clearIcon:{type:Ce,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:Ce,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>jn.includes(e)},"onClick:clear":Pe(),"onClick:appendInner":Pe(),"onClick:prependInner":Pe(),...Oe(),...Ot(),...Ft(),...tn()},"VField"),Le=le()({name:"VField",inheritAttrs:!1,props:{id:String,...At(),...Ae()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{attrs:n,emit:t,slots:r}=a;const{themeClasses:l}=nn(e),{loaderClasses:d}=Lt(e),{focusClasses:f,isFocused:c,focus:i,blur:v}=Re(e),{InputIcon:s}=Tt(e),{roundedClasses:g}=jt(e),{rtlClasses:m}=an(),o=$(()=>e.dirty||e.active),y=$(()=>!e.singleLine&&!!(e.label||r.label)),h=nt(),_=$(()=>e.id||`input-${h}`),B=$(()=>`${_.value}-messages`),q=b(),j=b(),W=b(),C=$(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:E,backgroundColorStyles:R}=Dt(rn(e,"bgColor")),{textColorClasses:I,textColorStyles:z}=Bt($(()=>e.error||e.disabled?void 0:o.value&&c.value?e.color:e.baseColor));G(o,P=>{if(y.value){const k=q.value.$el,O=j.value.$el;requestAnimationFrame(()=>{const D=Mt(k),F=O.getBoundingClientRect(),L=F.x-D.x,N=F.y-D.y-(D.height/2-F.height/2),V=F.width/.75,T=Math.abs(V-D.width)>1?{maxWidth:at(V)}:void 0,M=getComputedStyle(k),fe=getComputedStyle(O),Ve=parseFloat(M.transitionDuration)*1e3||150,ve=parseFloat(fe.getPropertyValue("--v-field-label-scale")),me=fe.getPropertyValue("color");k.style.visibility="visible",O.style.visibility="hidden",zt(k,{transform:`translate(${L}px, ${N}px) scale(${ve})`,color:me,...T},{duration:Ve,easing:Nt,direction:P?"normal":"reverse"}).finished.then(()=>{k.style.removeProperty("visibility"),O.style.removeProperty("visibility")})})}},{flush:"post"});const w=$(()=>({isActive:o,isFocused:c,controlRef:W,blur:v,focus:i}));function U(P){P.target!==document.activeElement&&P.preventDefault()}return oe(()=>{var L,N,V;const P=e.variant==="outlined",k=r["prepend-inner"]||e.prependInnerIcon,O=!!(e.clearable||r.clear),D=!!(r["append-inner"]||e.appendInnerIcon||O),F=()=>r.label?r.label({...w.value,label:e.label,props:{for:_.value}}):e.label;return u("div",X({class:["v-field",{"v-field--active":o.value,"v-field--appended":D,"v-field--center-affix":e.centerAffix??!C.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":k,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!F(),[`v-field--variant-${e.variant}`]:!0},l.value,E.value,f.value,d.value,g.value,m.value,e.class],style:[R.value,e.style],onClick:U},n),[u("div",{class:"v-field__overlay"},null),u(Gt,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:r.loader}),k&&u("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&u(s,{key:"prepend-icon",name:"prependInner"},null),(L=r["prepend-inner"])==null?void 0:L.call(r,w.value)]),u("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&y.value&&u(pe,{key:"floating-label",ref:j,class:[I.value],floating:!0,for:_.value,style:z.value},{default:()=>[F()]}),u(pe,{ref:q,for:_.value},{default:()=>[F()]}),(N=r.default)==null?void 0:N.call(r,{...w.value,props:{id:_.value,class:"v-field__input","aria-describedby":B.value},focus:i,blur:v})]),O&&u(Ht,{key:"clear"},{default:()=>[se(u("div",{class:"v-field__clearable",onMousedown:T=>{T.preventDefault(),T.stopPropagation()}},[r.clear?r.clear():u(s,{name:"clear"},null)]),[[tt,e.dirty]])]}),D&&u("div",{key:"append",class:"v-field__append-inner"},[(V=r["append-inner"])==null?void 0:V.call(r,w.value),e.appendInnerIcon&&u(s,{key:"append-icon",name:"appendInner"},null)]),u("div",{class:["v-field__outline",I.value],style:z.value},[P&&u(J,null,[u("div",{class:"v-field__outline__start"},null),y.value&&u("div",{class:"v-field__outline__notch"},[u(pe,{ref:j,floating:!0,for:_.value},{default:()=>[F()]})]),u("div",{class:"v-field__outline__end"},null)]),C.value&&y.value&&u(pe,{ref:j,floating:!0,for:_.value},{default:()=>[F()]})])])}),{controlRef:W}}});function mt(e){const a=Object.keys(Le.props).filter(n=>!ln(n)&&n!=="class"&&n!=="style");return on(e,a)}const Dn=re({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Je(),...Ae()},"VTextarea"),Bn=le()({name:"VTextarea",directives:{Intersect:Xe},inheritAttrs:!1,props:Dn(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{attrs:n,emit:t,slots:r}=a;const l=Fe(e,"modelValue"),{isFocused:d,focus:f,blur:c}=Re(e),i=$(()=>typeof e.counterValue=="function"?e.counterValue(l.value):(l.value||"").toString().length),v=$(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function s(w,U){var P,k;!e.autofocus||!w||(k=(P=U[0].target)==null?void 0:P.focus)==null||k.call(P)}const g=b(),m=b(),o=sn(""),y=b(),h=$(()=>e.persistentPlaceholder||d.value||e.active);function _(){var w;y.value!==document.activeElement&&((w=y.value)==null||w.focus()),d.value||f()}function B(w){_(),t("click:control",w)}function q(w){t("mousedown:control",w)}function j(w){w.stopPropagation(),_(),Z(()=>{l.value="",st(e["onClick:clear"],w)})}function W(w){var P;const U=w.target;if(l.value=U.value,(P=e.modelModifiers)!=null&&P.trim){const k=[U.selectionStart,U.selectionEnd];Z(()=>{U.selectionStart=k[0],U.selectionEnd=k[1]})}}const C=b(),E=b(+e.rows),R=$(()=>["plain","underlined"].includes(e.variant));un(()=>{e.autoGrow||(E.value=+e.rows)});function I(){e.autoGrow&&Z(()=>{if(!C.value||!m.value)return;const w=getComputedStyle(C.value),U=getComputedStyle(m.value.$el),P=parseFloat(w.getPropertyValue("--v-field-padding-top"))+parseFloat(w.getPropertyValue("--v-input-padding-top"))+parseFloat(w.getPropertyValue("--v-field-padding-bottom")),k=C.value.scrollHeight,O=parseFloat(w.lineHeight),D=Math.max(parseFloat(e.rows)*O+P,parseFloat(U.getPropertyValue("--v-input-control-height"))),F=parseFloat(e.maxRows)*O+P||1/0,L=dn(k??0,D,F);E.value=Math.floor((L-P)/O),o.value=at(L)})}rt(I),G(l,I),G(()=>e.rows,I),G(()=>e.maxRows,I),G(()=>e.density,I);let z;return G(C,w=>{w?(z=new ResizeObserver(I),z.observe(C.value)):z==null||z.disconnect()}),lt(()=>{z==null||z.disconnect()}),oe(()=>{const w=!!(r.counter||e.counter||e.counterValue),U=!!(w||r.details),[P,k]=ot(n),{modelValue:O,...D}=_e.filterProps(e),F=mt(e);return u(_e,X({ref:g,modelValue:l.value,"onUpdate:modelValue":L=>l.value=L,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":R.value},e.class],style:e.style},P,D,{centerAffix:E.value===1&&!R.value,focused:d.value}),{...r,default:L=>{let{id:N,isDisabled:V,isDirty:T,isReadonly:M,isValid:fe}=L;return u(Le,X({ref:m,style:{"--v-textarea-control-height":o.value},onClick:B,onMousedown:q,"onClick:clear":j,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},F,{id:N.value,active:h.value||T.value,centerAffix:E.value===1&&!R.value,dirty:T.value||e.dirty,disabled:V.value,focused:d.value,error:fe.value===!1}),{...r,default:Ve=>{let{props:{class:ve,...me}}=Ve;return u(J,null,[e.prefix&&u("span",{class:"v-text-field__prefix"},[e.prefix]),se(u("textarea",X({ref:y,class:ve,value:l.value,onInput:W,autofocus:e.autofocus,readonly:M.value,disabled:V.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:_,onBlur:c},me,k),null),[[it("intersect"),{handler:s},null,{once:!0}]]),e.autoGrow&&se(u("textarea",{class:[ve,"v-textarea__sizer"],id:`${me.id}-sizer`,"onUpdate:modelValue":Vt=>l.value=Vt,ref:C,readonly:!0,"aria-hidden":"true"},null),[[cn,l.value]]),e.suffix&&u("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:U?L=>{var N;return u(J,null,[(N=r.details)==null?void 0:N.call(r,L),w&&u(J,null,[u("span",null,null),u(vt,{active:e.persistentCounter||d.value,value:i.value,max:v.value},r.counter)])])}:void 0})}),Ie({},g,m,y)}}),Mn=H({__name:"UserEditorFieldTextarea",props:{data:{}},setup(e){return(a,n)=>(S(),A(Bn,{placeholder:a.data.placeholder,"hide-details":"",spellcheck:"false"},null,8,["placeholder"]))}}),zn=["color","file","time","date","datetime-local","week","month"],Nn=re({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Je(),...Ae()},"VTextField"),pt=le()({name:"VTextField",directives:{Intersect:Xe},inheritAttrs:!1,props:Nn(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,a){let{attrs:n,emit:t,slots:r}=a;const l=Fe(e,"modelValue"),{isFocused:d,focus:f,blur:c}=Re(e),i=$(()=>typeof e.counterValue=="function"?e.counterValue(l.value):typeof e.counterValue=="number"?e.counterValue:(l.value??"").toString().length),v=$(()=>{if(n.maxlength)return n.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),s=$(()=>["plain","underlined"].includes(e.variant));function g(C,E){var R,I;!e.autofocus||!C||(I=(R=E[0].target)==null?void 0:R.focus)==null||I.call(R)}const m=b(),o=b(),y=b(),h=$(()=>zn.includes(e.type)||e.persistentPlaceholder||d.value||e.active);function _(){var C;y.value!==document.activeElement&&((C=y.value)==null||C.focus()),d.value||f()}function B(C){t("mousedown:control",C),C.target!==y.value&&(_(),C.preventDefault())}function q(C){_(),t("click:control",C)}function j(C){C.stopPropagation(),_(),Z(()=>{l.value=null,st(e["onClick:clear"],C)})}function W(C){var R;const E=C.target;if(l.value=E.value,(R=e.modelModifiers)!=null&&R.trim&&["text","search","password","tel","url"].includes(e.type)){const I=[E.selectionStart,E.selectionEnd];Z(()=>{E.selectionStart=I[0],E.selectionEnd=I[1]})}}return oe(()=>{const C=!!(r.counter||e.counter!==!1&&e.counter!=null),E=!!(C||r.details),[R,I]=ot(n),{modelValue:z,...w}=_e.filterProps(e),U=mt(e);return u(_e,X({ref:m,modelValue:l.value,"onUpdate:modelValue":P=>l.value=P,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":s.value},e.class],style:e.style},R,w,{centerAffix:!s.value,focused:d.value}),{...r,default:P=>{let{id:k,isDisabled:O,isDirty:D,isReadonly:F,isValid:L}=P;return u(Le,X({ref:o,onMousedown:B,onClick:q,"onClick:clear":j,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},U,{id:k.value,active:h.value||D.value,dirty:D.value||e.dirty,disabled:O.value,focused:d.value,error:L.value===!1}),{...r,default:N=>{let{props:{class:V,...T}}=N;const M=se(u("input",X({ref:y,value:l.value,onInput:W,autofocus:e.autofocus,readonly:F.value,disabled:O.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:_,onBlur:c},T,I),null),[[it("intersect"),{handler:g},null,{once:!0}]]);return u(J,null,[e.prefix&&u("span",{class:"v-text-field__prefix"},[u("span",{class:"v-text-field__prefix__text"},[e.prefix])]),r.default?u("div",{class:V,"data-no-activator":""},[r.default(),M]):fn(M,{class:V}),e.suffix&&u("span",{class:"v-text-field__suffix"},[u("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:E?P=>{var k;return u(J,null,[(k=r.details)==null?void 0:k.call(r,P),C&&u(J,null,[u("span",null,null),u(vt,{active:e.persistentCounter||d.value,value:i.value,max:v.value},r.counter)])])}:void 0})}),Ie({},m,o,y)}}),Gn=H({__name:"UserEditorFieldUrl",props:{data:{}},setup(e){return(a,n)=>(S(),A(pt,{placeholder:a.data.placeholder,type:"url","hide-details":"",spellcheck:"false"},null,8,["placeholder"]))}}),Hn=H({__name:"UserEditorFieldString",props:{data:{}},setup(e){return(a,n)=>(S(),A(pt,{placeholder:a.data.placeholder,"hide-details":"",spellcheck:"false"},null,8,["placeholder"]))}}),qn={class:"ig-profile-avatar__container"},Wn=H({__name:"UserSelectorAvatar",props:{avatar:{},size:{default:120}},async setup(e){let a,n;const t=e;let r,l=b(0);return t.avatar&&(r=URL.createObjectURL(([a,n]=vn(()=>t.avatar.file),a=await a,n(),a))),G(()=>t.avatar,async d=>{r=URL.createObjectURL(await t.avatar.file),l.value=+new Date},{deep:!0}),(d,f)=>(S(),ae("div",qn,[u(Ye,{size:d.size,class:"ig-profile-avatar"},{default:x(()=>[p(r)?(S(),A(qt,{src:p(r),key:p(l),cover:""},null,8,["src"])):ie("",!0),xe(d.$slots,"inner",{},void 0,!0)]),_:3},8,["size"]),xe(d.$slots,"default",{},void 0,!0)]))}}),Te=ce(Wn,[["__scopeId","data-v-3c967b97"]]),Kn=H({__name:"UserEditorFieldAvatar",props:{user:{}},emits:["update"],setup(e,{emit:a}){const n=e,t=a,r=b(n.user?n.user.profile.avatar:void 0),{files:l,open:d,reset:f,onChange:c}=Wt({accept:"image/jpg, image/jpeg, image/png",multiple:!1});return c(async i=>{if(!i)return;const v=i[0];r.value={file:Promise.resolve(v)},t("update",v)}),(i,v)=>{const s=Te;return S(),A(Ye,{class:"cursor-pointer",variant:"outlined",size:64,onClick:p(d)},{default:x(()=>[p(r)?(S(),A(s,{key:1,avatar:p(r),size:64},null,8,["avatar"])):(S(),A(Ze,{key:0,icon:"mdi-account"}))]),_:1},8,["onClick"])}}}),we=e=>{if(e=p(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let a in e)return!0;return!1}return!!String(e).length},gt=e=>(e=p(e),Array.isArray(e)?e.length:typeof e=="object"?Object.keys(e).length:String(e).length);function ee(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return t=>(t=p(t),!we(t)||a.every(r=>(r.lastIndex=0,r.test(t))))}ee(/^[a-zA-Z]*$/);ee(/^[a-zA-Z0-9]*$/);ee(/^\d*(\.\d+)?$/);const Jn=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;ee(Jn);function Xn(e){return a=>!we(a)||gt(a)<=p(e)}function Yn(e){return{$validator:Xn(e),$message:a=>{let{$params:n}=a;return`The maximum length allowed is ${n.max}`},$params:{max:e,type:"maxLength"}}}function Zn(e){return a=>!we(a)||gt(a)>=p(e)}function Qn(e){return{$validator:Zn(e),$message:a=>{let{$params:n}=a;return`This field should be at least ${n.min} characters long`},$params:{min:e,type:"minLength"}}}function ea(e){return typeof e=="string"&&(e=e.trim()),we(e)}var ta={$validator:ea,$message:"Value is required",$params:{type:"required"}};const na=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;ee(na);ee(/(^[0-9]*$)|(^-[0-9]+$)/);ee(/^[-]?\d*(\.\d+)?$/);function Ne(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function Y(e){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?Ne(Object(n),!0).forEach(function(t){aa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function aa(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function Ge(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((n,t)=>(a.includes(t)||(n[t]=p(e[t])),n),{})}function be(e){return typeof e=="function"}function ra(e){return gn(e)||yn(e)}function yt(e,a,n){let t=e;const r=a.split(".");for(let l=0;l<r.length;l++){if(!t[r[l]])return n;t=t[r[l]]}return t}function ke(e,a,n){return $(()=>e.some(t=>yt(a,t,{[n]:!1})[n]))}function He(e,a,n){return $(()=>e.reduce((t,r)=>{const l=yt(a,r,{[n]:!1})[n]||[];return t.concat(l)},[]))}function _t(e,a,n,t){return e.call(t,p(a),p(n),t)}function ht(e){return e.$valid!==void 0?!e.$valid:!e}function la(e,a,n,t,r,l,d){let{$lazy:f,$rewardEarly:c}=r,i=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],v=arguments.length>8?arguments[8]:void 0,s=arguments.length>9?arguments[9]:void 0,g=arguments.length>10?arguments[10]:void 0;const m=b(!!t.value),o=b(0);n.value=!1;const y=G([a,t].concat(i,g),()=>{if(f&&!t.value||c&&!s.value&&!n.value)return;let h;try{h=_t(e,a,v,d)}catch(_){h=Promise.reject(_)}o.value++,n.value=!!o.value,m.value=!1,Promise.resolve(h).then(_=>{o.value--,n.value=!!o.value,l.value=_,m.value=ht(_)}).catch(_=>{o.value--,n.value=!!o.value,l.value=_,m.value=!0})},{immediate:!0,deep:typeof a=="object"});return{$invalid:m,$unwatch:y}}function oa(e,a,n,t,r,l,d,f){let{$lazy:c,$rewardEarly:i}=t;const v=()=>({}),s=$(()=>{if(c&&!n.value||i&&!f.value)return!1;let g=!0;try{const m=_t(e,a,d,l);r.value=m,g=ht(m)}catch(m){r.value=m}return g});return{$unwatch:v,$invalid:s}}function ia(e,a,n,t,r,l,d,f,c,i,v){const s=b(!1),g=e.$params||{},m=b(null);let o,y;e.$async?{$invalid:o,$unwatch:y}=la(e.$validator,a,s,n,t,m,r,e.$watchTargets,c,i,v):{$invalid:o,$unwatch:y}=oa(e.$validator,a,n,t,m,r,c,i);const h=e.$message;return{$message:be(h)?$(()=>h(Ge({$pending:s,$invalid:o,$params:Ge(g),$model:a,$response:m,$validator:l,$propertyPath:f,$property:d}))):h||"",$params:g,$pending:s,$invalid:o,$response:m,$unwatch:y}}function sa(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a=p(e),n=Object.keys(a),t={},r={},l={};let d=null;return n.forEach(f=>{const c=a[f];switch(!0){case be(c.$validator):t[f]=c;break;case be(c):t[f]={$validator:c};break;case f==="$validationGroups":d=c;break;case f.startsWith("$"):l[f]=c;break;default:r[f]=c}}),{rules:t,nestedValidators:r,config:l,validationGroups:d}}const ua="__root";function ca(e,a,n,t,r,l,d,f,c){const i=Object.keys(e),v=t.get(r,e),s=b(!1),g=b(!1),m=b(0);if(v){if(!v.$partial)return v;v.$unwatch(),s.value=v.$dirty.value}const o={$dirty:s,$path:r,$touch:()=>{s.value||(s.value=!0)},$reset:()=>{s.value&&(s.value=!1)},$commit:()=>{}};return i.length?(i.forEach(y=>{o[y]=ia(e[y],a,o.$dirty,l,d,y,n,r,c,g,m)}),o.$externalResults=$(()=>f.value?[].concat(f.value).map((y,h)=>({$propertyPath:r,$property:n,$validator:"$externalResults",$uid:`${r}-externalResult-${h}`,$message:y,$params:{},$response:null,$pending:!1})):[]),o.$invalid=$(()=>{const y=i.some(h=>p(o[h].$invalid));return g.value=y,!!o.$externalResults.value.length||y}),o.$pending=$(()=>i.some(y=>p(o[y].$pending))),o.$error=$(()=>o.$dirty.value?o.$pending.value||o.$invalid.value:!1),o.$silentErrors=$(()=>i.filter(y=>p(o[y].$invalid)).map(y=>{const h=o[y];return de({$propertyPath:r,$property:n,$validator:y,$uid:`${r}-${y}`,$message:h.$message,$params:h.$params,$response:h.$response,$pending:h.$pending})}).concat(o.$externalResults.value)),o.$errors=$(()=>o.$dirty.value?o.$silentErrors.value:[]),o.$unwatch=()=>i.forEach(y=>{o[y].$unwatch()}),o.$commit=()=>{g.value=!0,m.value=Date.now()},t.set(r,e,o),o):(v&&t.set(r,e,o),o)}function da(e,a,n,t,r,l,d){const f=Object.keys(e);return f.length?f.reduce((c,i)=>(c[i]=Se({validations:e[i],state:a,key:i,parentKey:n,resultsCache:t,globalConfig:r,instance:l,externalResults:d}),c),{}):{}}function fa(e,a,n){const t=$(()=>[a,n].filter(o=>o).reduce((o,y)=>o.concat(Object.values(p(y))),[])),r=$({get(){return e.$dirty.value||(t.value.length?t.value.every(o=>o.$dirty):!1)},set(o){e.$dirty.value=o}}),l=$(()=>{const o=p(e.$silentErrors)||[],y=t.value.filter(h=>(p(h).$silentErrors||[]).length).reduce((h,_)=>h.concat(..._.$silentErrors),[]);return o.concat(y)}),d=$(()=>{const o=p(e.$errors)||[],y=t.value.filter(h=>(p(h).$errors||[]).length).reduce((h,_)=>h.concat(..._.$errors),[]);return o.concat(y)}),f=$(()=>t.value.some(o=>o.$invalid)||p(e.$invalid)||!1),c=$(()=>t.value.some(o=>p(o.$pending))||p(e.$pending)||!1),i=$(()=>t.value.some(o=>o.$dirty)||t.value.some(o=>o.$anyDirty)||r.value),v=$(()=>r.value?c.value||f.value:!1),s=()=>{e.$touch(),t.value.forEach(o=>{o.$touch()})},g=()=>{e.$commit(),t.value.forEach(o=>{o.$commit()})},m=()=>{e.$reset(),t.value.forEach(o=>{o.$reset()})};return t.value.length&&t.value.every(o=>o.$dirty)&&s(),{$dirty:r,$errors:d,$invalid:f,$anyDirty:i,$error:v,$pending:c,$touch:s,$reset:m,$silentErrors:l,$commit:g}}function Se(e){let{validations:a,state:n,key:t,parentKey:r,childResults:l,resultsCache:d,globalConfig:f={},instance:c,externalResults:i}=e;const v=r?`${r}.${t}`:t,{rules:s,nestedValidators:g,config:m,validationGroups:o}=sa(a),y=Y(Y({},f),m),h=t?$(()=>{const V=p(n);return V?p(V[t]):void 0}):n,_=Y({},p(i)||{}),B=$(()=>{const V=p(i);return t?V?p(V[t]):void 0:V}),q=ca(s,h,t,d,v,y,c,B,n),j=da(g,h,v,d,y,c,B),W={};o&&Object.entries(o).forEach(V=>{let[T,M]=V;W[T]={$invalid:ke(M,j,"$invalid"),$error:ke(M,j,"$error"),$pending:ke(M,j,"$pending"),$errors:He(M,j,"$errors"),$silentErrors:He(M,j,"$silentErrors")}});const{$dirty:C,$errors:E,$invalid:R,$anyDirty:I,$error:z,$pending:w,$touch:U,$reset:P,$silentErrors:k,$commit:O}=fa(q,j,l),D=t?$({get:()=>p(h),set:V=>{C.value=!0;const T=p(n),M=p(i);M&&(M[t]=_[t]),Q(T[t])?T[t].value=V:T[t]=V}}):null;t&&y.$autoDirty&&G(h,()=>{C.value||U();const V=p(i);V&&(V[t]=_[t])},{flush:"sync"});async function F(){return U(),y.$rewardEarly&&(O(),await Z()),await Z(),new Promise(V=>{if(!w.value)return V(!R.value);const T=G(w,()=>{V(!R.value),T()})})}function L(V){return(l.value||{})[V]}function N(){Q(i)?i.value=_:Object.keys(_).length===0?Object.keys(i).forEach(V=>{delete i[V]}):Object.assign(i,_)}return de(Y(Y(Y({},q),{},{$model:D,$dirty:C,$error:z,$errors:E,$invalid:R,$anyDirty:I,$pending:w,$touch:U,$reset:P,$path:v||ua,$silentErrors:k,$validate:F,$commit:O},l&&{$getResultsForChild:L,$clearExternalResults:N,$validationGroups:W}),j))}class va{constructor(){this.storage=new Map}set(a,n,t){this.storage.set(a,{rules:n,result:t})}checkRulesValidity(a,n,t){const r=Object.keys(t),l=Object.keys(n);return l.length!==r.length||!l.every(f=>r.includes(f))?!1:l.every(f=>n[f].$params?Object.keys(n[f].$params).every(c=>p(t[f].$params[c])===p(n[f].$params[c])):!0)}get(a,n){const t=this.storage.get(a);if(!t)return;const{rules:r,result:l}=t,d=this.checkRulesValidity(a,n,r),f=l.$unwatch?l.$unwatch:()=>({});return d?l:{$dirty:l.$dirty,$partial:!0,$unwatch:f}}}const ge={COLLECT_ALL:!0,COLLECT_NONE:!1},qe=Symbol("vuelidate#injectChildResults"),We=Symbol("vuelidate#removeChildResults");function ma(e){let{$scope:a,instance:n}=e;const t={},r=b([]),l=$(()=>r.value.reduce((v,s)=>(v[s]=p(t[s]),v),{}));function d(v,s){let{$registerAs:g,$scope:m,$stopPropagation:o}=s;o||a===ge.COLLECT_NONE||m===ge.COLLECT_NONE||a!==ge.COLLECT_ALL&&a!==m||(t[g]=v,r.value.push(g))}n.__vuelidateInjectInstances=[].concat(n.__vuelidateInjectInstances||[],d);function f(v){r.value=r.value.filter(s=>s!==v),delete t[v]}n.__vuelidateRemoveInstances=[].concat(n.__vuelidateRemoveInstances||[],f);const c=Be(qe,[]);Me(qe,n.__vuelidateInjectInstances);const i=Be(We,[]);return Me(We,n.__vuelidateRemoveInstances),{childResults:l,sendValidationResultsToParent:c,removeValidationResultsFromParent:i}}function $t(e){return new Proxy(e,{get(a,n){return typeof a[n]=="object"?$t(a[n]):$(()=>a[n])}})}let Ke=0;function pa(e,a){var n;let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(t=e,e=void 0,a=void 0);let{$registerAs:r,$scope:l=ge.COLLECT_ALL,$stopPropagation:d,$externalResults:f,currentVueInstance:c}=t;const i=c||((n=mn())===null||n===void 0?void 0:n.proxy),v=i?i.$options:{};r||(Ke+=1,r=`_vuelidate_${Ke}`);const s=b({}),g=new va,{childResults:m,sendValidationResultsToParent:o,removeValidationResultsFromParent:y}=i?ma({$scope:l,instance:i}):{childResults:b({})};if(!e&&v.validations){const h=v.validations;a=b({}),pn(()=>{a.value=i,G(()=>be(h)?h.call(a.value,new $t(a.value)):h,_=>{s.value=Se({validations:_,state:a,childResults:m,resultsCache:g,globalConfig:t,instance:i,externalResults:f||i.vuelidateExternalResults})},{immediate:!0})}),t=v.validationsConfig||t}else{const h=Q(e)||ra(e)?e:de(e||{});G(h,_=>{s.value=Se({validations:_,state:a,childResults:m,resultsCache:g,globalConfig:t,instance:i??{},externalResults:f})},{immediate:!0})}return i&&(o.forEach(h=>h(s,{$registerAs:r,$scope:l,$stopPropagation:d})),lt(()=>y.forEach(h=>h(r)))),$(()=>Y(Y({},p(s.value)),m.value))}const ga=ut("user/editor",()=>{const e=b(""),a={},n={},t={};let r=b();const l=$(()=>_n(e.value));function d(v,s){e.value=v;for(const[g,m]of Object.entries(l.value.profile.fields)){let o=s&&s.profile.hasOwnProperty(g)?s.profile[g]:"";m.type==="file"&&(o=void 0),a[g]=b(o),n[g]=m,t[g]={},m.validation&&(m.validation.required&&(t[g].required=ta),m.validation.minLength&&(t[g].minLength=Qn(m.validation.minLength)),m.validation.maxLength&&(t[g].maxLength=Yn(m.validation.maxLength)))}r.value=pa(t,a,{$lazy:!0})}function f(){for(const[v,s]of Object.entries(l.value.profile.fields))a[v].value=""}function c(){const v={profile:{},media:{}};for(const[g,m]of Object.entries(l.value.profile.fields))v.profile[g]=a[g].value;for(const[g,m]of Object.entries(l.value.collections))v.media[g]=[];const s=ct().loadUser(v,e.value,"storage");return dt().addUserToStorageIndex(s),setTimeout(()=>f(),1e3),!0}async function i(v){const s={};for(const[g,m]of Object.entries(l.value.profile.fields))s[g]=a[g].value;await v.profile.update(hn(s)),await v.save()}return{$v:r,fields:a,fieldsData:n,rules:t,create:c,update:i,generateFields:d}}),xt=H({__name:"InstagramUserEditorForm",props:{user:{}},emits:["close"],setup(e,{emit:a}){const n=e,t=a,r=ga();r.generateFields("instagram",n.user);const l=r.$v;function d(c){r.fields.avatar=c}async function f(c){c.preventDefault(),await l.value.$validate()&&(n.user?await r.update(n.user):r.create(),t("close"))}return rt(()=>{var c;(c=document.querySelector('.ig-user-editor-form [name="username"]'))==null||c.focus()}),(c,i)=>{const v=Kn,s=Hn,g=Gn,m=Mn;return S(),ae("form",{class:"ig-user-editor-form pa-12",onSubmit:f},[u(te,null,{default:x(()=>[u(K,{cols:12,md:4,class:"text-center pb-14"},{default:x(()=>[u(v,{user:c.user,onUpdate:d},null,8,["user"])]),_:1}),u(K,{cols:12,md:8},{default:x(()=>[u(te,null,{default:x(()=>[u(K,null,{default:x(()=>[u(s,{name:"username",modelValue:p(r).fields.username,"onUpdate:modelValue":i[0]||(i[0]=o=>p(r).fields.username=o),data:p(r).fieldsData.username,error:p(l).username.$invalid,variant:"outlined"},null,8,["modelValue","data","error"])]),_:1})]),_:1}),u(te,null,{default:x(()=>[u(K,{cols:6},{default:x(()=>[u(s,{modelValue:p(r).fields.name,"onUpdate:modelValue":i[1]||(i[1]=o=>p(r).fields.name=o),data:p(r).fieldsData.name,error:p(l).name.$invalid,variant:"outlined"},null,8,["modelValue","data","error"])]),_:1}),u(K,{cols:3},{default:x(()=>[u(s,{modelValue:p(r).fields.followers_count,"onUpdate:modelValue":i[2]||(i[2]=o=>p(r).fields.followers_count=o),data:p(r).fieldsData.followers_count,error:p(l).followers_count.$invalid,variant:"outlined"},null,8,["modelValue","data","error"])]),_:1}),u(K,{cols:3},{default:x(()=>[u(s,{modelValue:p(r).fields.follows_count,"onUpdate:modelValue":i[3]||(i[3]=o=>p(r).fields.follows_count=o),data:p(r).fieldsData.follows_count,error:p(l).follows_count.$invalid,variant:"outlined"},null,8,["modelValue","data","error"])]),_:1})]),_:1}),u(te,null,{default:x(()=>[u(K,null,{default:x(()=>[u(g,{modelValue:p(r).fields.website,"onUpdate:modelValue":i[4]||(i[4]=o=>p(r).fields.website=o),data:p(r).fieldsData.website,error:p(l).website.$invalid,variant:"outlined"},null,8,["modelValue","data","error"])]),_:1})]),_:1}),u(te,null,{default:x(()=>[u(K,null,{default:x(()=>[u(m,{modelValue:p(r).fields.biography,"onUpdate:modelValue":i[5]||(i[5]=o=>p(r).fields.biography=o),data:p(r).fieldsData.biography,error:p(l).biography.$invalid,variant:"outlined"},null,8,["modelValue","data","error"])]),_:1})]),_:1}),u(te,null,{default:x(()=>[u(K,null,{default:x(()=>[u(Kt,{type:"submit",text:n.user?"Edit":"Create",variant:"outlined"},null,8,["text"])]),_:1})]),_:1})]),_:1})]),_:1})],32)}}}),ya=H({__name:"UserSelectorMenu",props:{user:{}},emits:["edit"],setup(e,{emit:a}){const{user:n}=e,t=a,r=b(!1);function l(){n.isRemovable||(r.value=!0),n.remove()}return(d,f)=>(S(),A(et,{"content-class":"ig-profile-selector__context-menu",activator:"parent",transition:"slide-y-transition","close-on-back":"","open-delay":5e3,offset:[7,0]},{default:x(()=>[u(Qe,null,{default:x(()=>[u(he,{onClick:f[0]||(f[0]=c=>t("edit"))},{default:x(()=>[u($e,null,{default:x(()=>[ue("Edit profile")]),_:1})]),_:1}),u(Ue),u(he,{onClick:f[1]||(f[1]=c=>l()),class:"text-red"},{default:x(()=>[u($e,null,{default:x(()=>[ue("Remove")]),_:1})]),_:1})]),_:1})]),_:1}))}}),_a=re({id:String,text:String,...$n(Jt({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),ha=le()({name:"VTooltip",props:_a(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:n}=a;const t=Fe(e,"modelValue"),{scopeId:r}=Xt(),l=nt(),d=$(()=>e.id||`v-tooltip-${l}`),f=b(),c=$(()=>e.location.split(" ").length>1?e.location:e.location+" center"),i=$(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),v=$(()=>e.transition?e.transition:t.value?"scale-transition":"fade-transition"),s=$(()=>X({"aria-describedby":d.value},e.activatorProps));return oe(()=>{const g=De.filterProps(e);return u(De,X({ref:f,class:["v-tooltip",e.class],style:e.style,id:d.value},g,{modelValue:t.value,"onUpdate:modelValue":m=>t.value=m,transition:v.value,absolute:!0,location:c.value,origin:i.value,persistent:!0,role:"tooltip",activatorProps:s.value,_disableGlobalStack:!0},r),{activator:n.activator,default:function(){var h;for(var m=arguments.length,o=new Array(m),y=0;y<m;y++)o[y]=arguments[y];return((h=n.default)==null?void 0:h.call(n,...o))??e.text}})}),Ie({},f)}}),$a={};function xa(e,a){return S(),A(Yt,{color:"grey-darken-3"},{default:x(()=>[u(ha,{"content-class":"text-overline",activator:"parent",offset:[16,3]},{default:x(()=>[ue(" Local ")]),_:1})]),_:1})}const ba=ce($a,[["render",xa]]),wa=["textContent"],Va=["href"],bt=H({__name:"UserSelector",props:{user:{},add:{type:Boolean}},setup(e){const a=de({enabled:!1,x:0,y:0}),n=b(!1);function t(){n.value=!0}function r(l){l.preventDefault(),a.enabled=!1,a.x=l.clientX,a.y=l.clientY,Z(()=>{a.enabled=!0})}return(l,d)=>{const f=ba,c=Te,i=ya,v=xn("router-link"),s=xt,g=ft;return S(),ae("div",{class:Vn(["ig-profile-selector",{"ig-profile-selector--add":l.add}])},[l.user?(S(),ae(J,{key:0},[u(v,{to:{name:"user",params:{platform:l.user.platform,username:p(wn)(l.user.id)}},onContextmenu:r},{default:x(()=>[(S(),A(bn,null,{default:x(()=>[u(c,{avatar:l.user.profile.avatar},{inner:x(()=>[l.user.hasLocalChanges?(S(),A(f,{key:0})):ie("",!0)]),_:1},8,["avatar"])]),_:1})),ne("h3",{class:"mt-4 text-truncate",textContent:Ee(l.user.profile.username)},null,8,wa),p(a).enabled?(S(),A(i,{key:0,modelValue:p(a).enabled,"onUpdate:modelValue":d[0]||(d[0]=m=>p(a).enabled=m),onEdit:t,user:l.user},null,8,["modelValue","user"])):ie("",!0)]),_:1},8,["to"]),ne("a",{class:"text-blue-grey-lighten-4",href:l.user.profile.public_profile,target:"_blank"},"🡥",8,Va)],64)):ie("",!0),xe(l.$slots,"default"),u(g,{title:"Edit profile",modelValue:p(n),"onUpdate:modelValue":d[2]||(d[2]=m=>Q(n)?n.value=m:null)},{default:x(()=>[u(s,{user:l.user,onClose:d[1]||(d[1]=m=>n.value=!1)},null,8,["user"])]),_:1},8,["modelValue"])],2)}}}),je=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})();je?Promise.resolve().then(function(){return Ra}):Promise.resolve().then(function(){return Aa});const Ca=je?Promise.resolve().then(function(){return Ua}):Promise.resolve().then(function(){return Ta});async function Pa(...e){return(await Ca).default(...e)}je?Promise.resolve().then(function(){return Oa}):Promise.resolve().then(function(){return Da});const ka=async e=>{const a=await e.getFile();return a.handle=e,a};var Sa=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const a=[];e.forEach((r,l)=>{a[l]={description:r.description||"Files",accept:{}},r.mimeTypes?r.mimeTypes.map(d=>{a[l].accept[d]=r.extensions||[]}):a[l].accept["*/*"]=r.extensions||[]});const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:a,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),t=await Promise.all(n.map(ka));return e[0].multiple?t:t[0]},Ra={__proto__:null,default:Sa};function ye(e){function a(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var t=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:t}})}return ye=function(n){this.s=n,this.n=n.next},ye.prototype={s:null,n:null,next:function(){return a(this.n.apply(this.s,arguments))},return:function(n){var t=this.s.return;return t===void 0?Promise.resolve({value:n,done:!0}):a(t.apply(this.s,arguments))},throw:function(n){var t=this.s.return;return t===void 0?Promise.reject(n):a(t.apply(this.s,arguments))}},new ye(e)}const wt=async(e,a,n=e.name,t)=>{const r=[],l=[];var d,f=!1,c=!1;try{for(var i,v=function(s){var g,m,o,y=2;for(typeof Symbol<"u"&&(m=Symbol.asyncIterator,o=Symbol.iterator);y--;){if(m&&(g=s[m])!=null)return g.call(s);if(o&&(g=s[o])!=null)return new ye(g.call(s));m="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());f=!(i=await v.next()).done;f=!1){const s=i.value,g=`${n}/${s.name}`;s.kind==="file"?l.push(s.getFile().then(m=>(m.directoryHandle=e,m.handle=s,Object.defineProperty(m,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>g})))):s.kind!=="directory"||!a||t&&t(s)||r.push(wt(s,a,g,t))}}catch(s){c=!0,d=s}finally{try{f&&v.return!=null&&await v.return()}finally{if(c)throw d}}return[...(await Promise.all(r)).flat(),...await Promise.all(l)]};var Ia=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const a=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await a.values()).next()).done?[a]:wt(a,e.recursive,void 0,e.skipDirectory)},Ua={__proto__:null,default:Ia},Ea=async(e,a=[{}],n=null,t=!1,r=null)=>{Array.isArray(a)||(a=[a]),a[0].fileName=a[0].fileName||"Untitled";const l=[];let d=null;if(e instanceof Blob&&e.type?d=e.type:e.headers&&e.headers.get("content-type")&&(d=e.headers.get("content-type")),a.forEach((i,v)=>{l[v]={description:i.description||"Files",accept:{}},i.mimeTypes?(v===0&&d&&i.mimeTypes.push(d),i.mimeTypes.map(s=>{l[v].accept[s]=i.extensions||[]})):d?l[v].accept[d]=i.extensions||[]:l[v].accept["*/*"]=i.extensions||[]}),n)try{await n.getFile()}catch(i){if(n=null,t)throw i}const f=n||await window.showSaveFilePicker({suggestedName:a[0].fileName,id:a[0].id,startIn:a[0].startIn,types:l,excludeAcceptAllOption:a[0].excludeAcceptAllOption||!1});!n&&r&&r(f);const c=await f.createWritable();return"stream"in e?(await e.stream().pipeTo(c),f):"body"in e?(await e.body.pipeTo(c),f):(await c.write(await e),await c.close(),f)},Oa={__proto__:null,default:Ea},Fa=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((a,n)=>{const t=document.createElement("input");t.type="file";const r=[...e.map(c=>c.mimeTypes||[]),...e.map(c=>c.extensions||[])].join();t.multiple=e[0].multiple||!1,t.accept=r||"",t.style.display="none",document.body.append(t);const l=c=>{typeof d=="function"&&d(),a(c)},d=e[0].legacySetup&&e[0].legacySetup(l,()=>d(n),t),f=()=>{window.removeEventListener("focus",f),t.remove()};t.addEventListener("click",()=>{window.addEventListener("focus",f)}),t.addEventListener("change",()=>{window.removeEventListener("focus",f),t.remove(),l(t.multiple?Array.from(t.files):t.files[0])}),"showPicker"in HTMLInputElement.prototype?t.showPicker():t.click()})),Aa={__proto__:null,default:Fa},La=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((a,n)=>{const t=document.createElement("input");t.type="file",t.webkitdirectory=!0;const r=d=>{typeof l=="function"&&l(),a(d)},l=e[0].legacySetup&&e[0].legacySetup(r,()=>l(n),t);t.addEventListener("change",()=>{let d=Array.from(t.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(d=d.filter(f=>f.webkitRelativePath.split("/").every(c=>!e[0].skipDirectory({name:c,kind:"directory"})))):d=d.filter(f=>f.webkitRelativePath.split("/").length===2),r(d)}),"showPicker"in HTMLInputElement.prototype?t.showPicker():t.click()})),Ta={__proto__:null,default:La},ja=async(e,a={})=>{Array.isArray(a)&&(a=a[0]);const n=document.createElement("a");let t=e;"body"in e&&(t=await async function(d,f){const c=d.getReader(),i=new ReadableStream({start:g=>async function m(){return c.read().then(({done:o,value:y})=>{if(!o)return g.enqueue(y),m();g.close()})}()}),v=new Response(i),s=await v.blob();return c.releaseLock(),new Blob([s],{type:f})}(e.body,e.headers.get("content-type"))),n.download=a.fileName||"Untitled",n.href=URL.createObjectURL(await t);const r=()=>{typeof l=="function"&&l()},l=a.legacySetup&&a.legacySetup(r,()=>l(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),r()}),n.click(),null},Da={__proto__:null,default:ja};async function Ba(){return Pa({recursive:!0,mode:"readwrite",startIn:"documents",id:"import-profile",skipDirectory:a=>a.name[0]==="."})}async function Ma(e){return new Promise((a,n)=>{let t=new FileReader;t.readAsText(e),t.onload=function(){typeof t.result!="string"?n("Directory does not contain a valid config.json"):a(JSON.parse(t.result))},t.onerror=n})}const za=ut("user/import",()=>{const e=ct(),a=dt(),n=b(null),t=b({});async function r(i){n.value=await Ba(),t.value=await Ma(l.value),t.value.profile.avatar=f(),t.value.media.posts&&d("posts"),t.value.media.reels&&d("reels"),e.loadUser(t.value,i,"storage"),a.addUserToStorageIndex(t.value.profile.username)}const l=$(()=>n.value.find(i=>i.name==="config.json"));function d(i){var m,o,y,h;let v=0,s={},g={};for(const _ of t.value.media[i]){if(s={},typeof _=="string")s.type=ze.detectMediaType(_),_.startsWith("http")||(s.file=c(_));else if(_.type)switch(_.type){case"image":s.type=_.type,_.name&&!((m=_.name)!=null&&m.startsWith("http"))&&(s.file=c(_.name));break;case"video":s.type=_.type,_.name&&!((o=_.name)!=null&&o.startsWith("http"))&&(s.file=c(_.name)),_.cover&&typeof _.cover=="string"&&!((y=_.cover)!=null&&y.startsWith("http"))&&(s.file=c(_.cover));break;case"album":if(s.type=_.type,s.list=[],Array.isArray(_.list)){for(const B of _.list)g={},typeof B=="string"?(g.type=ze.detectMediaType(B),g.file=c(B)):B.name&&(g.type=B.type,g.file=c(B.name));s.list.push(g)}break;case"iframe":_.cover&&typeof _.cover=="string"&&!((h=_.cover)!=null&&h.startsWith("http"))&&(s.cover=c(_.cover));break}t.value.media.posts[v]=s,v++}}function f(){return n.value.find(i=>i.name===t.value.profile.avatar)}function c(i){return n.value.find(v=>v.name===i)}return{importFromDirectory:r}}),Na=H({__name:"UserSelectorAddMenu",emits:["openCreateProfileDialog"],setup(e,{emit:a}){const n=za(),t=a;function r(){n.importFromDirectory("instagram")}return(l,d)=>(S(),A(et,{"content-class":"ig-profile-selector__context-menu",activator:"parent",transition:"slide-y-transition","open-on-click":!1,"open-delay":5e3,offset:[7,0]},{default:x(()=>[u(Qe,null,{default:x(()=>[u(he,{onClick:d[0]||(d[0]=f=>t("openCreateProfileDialog"))},{default:x(()=>[u($e,null,{default:x(()=>[ue("Create profile")]),_:1})]),_:1}),u(Ue),u(he,{onClick:r},{default:x(()=>[u($e,null,{default:x(()=>[ue("Import from folder")]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ga=["textContent"],Ha=H({__name:"UserSelectorAdd",setup(e){const a=de({value:"",generatorInterval:0}),n=b(!1),t=b(!1);G(()=>t.value,f=>{f?r():l()});function r(){a.generatorInterval=setInterval(()=>{a.value=Cn().substring(0,6)},75)}function l(){clearInterval(a.generatorInterval),a.value=""}async function d(){}return(f,c)=>{const i=Na,v=Te,s=xt,g=ft,m=bt;return S(),A(m,{add:"",onClick:d},{default:x(()=>[u(v,{onClick:c[2]||(c[2]=o=>t.value=!p(t)),onContextmenu:c[3]||(c[3]=o=>{o.preventDefault(),t.value=!p(t)})},{inner:x(()=>[u(Ze,{size:"48px",icon:"mdi-plus",color:"grey-lighten-1"})]),default:x(()=>[u(i,{modelValue:p(t),"onUpdate:modelValue":c[0]||(c[0]=o=>Q(t)?t.value=o:null),onOpenCreateProfileDialog:c[1]||(c[1]=o=>n.value=!0)},null,8,["modelValue"]),ne("h3",{class:"text-truncate mt-4 mx-auto text-center",textContent:Ee(p(a).value)},null,8,Ga)]),_:1}),u(g,{title:"Create profile",modelValue:p(n),"onUpdate:modelValue":c[5]||(c[5]=o=>Q(n)?n.value=o:null)},{default:x(()=>[u(s,{onClose:c[4]||(c[4]=o=>n.value=!1)})]),_:1},8,["modelValue"])]),_:1})}}}),qa=ce(Ha,[["__scopeId","data-v-bcde7ff4"]]),Wa={class:"d-inline-flex text-center"},Ka={class:"v-col flex-grow-0 hidden-sm-and-down"},Ja=H({__name:"PageIndex",setup(e){const a=Pn(),n=b(a.listOfUsernames),t=$(()=>a.listOfUsers);function r(l){a.setUsersSelectorOrder(l)}return(l,d)=>{const f=bt,c=qa,i=An,v=Qt;return S(),A(Zt,{class:"ig-index text-center py-16 align-content-center"},{default:x(()=>[ne("div",null,[ne("div",Wa,[u(p(Sn),{class:"v-row",list:p(n),"onUpdate:list":[d[0]||(d[0]=s=>Q(n)?n.value=s:null),r],axis:"x","press-delay":200},{default:x(()=>[(S(!0),ae(J,null,kn(p(t),(s,g)=>(S(),A(p(Rn),{class:"v-col flex-grow-0",key:s.id,index:g},{default:x(()=>[s&&s.ready?(S(),A(f,{key:0,user:s},null,8,["user"])):ie("",!0)]),_:2},1032,["index"]))),128)),ne("div",Ka,[u(c)])]),_:1},8,["list"])]),u(Ue,{class:"mt-15 mb-10"}),u(i),u(v,{class:"pb-0"})])]),_:1})}}}),Za=ce(Ja,[["__scopeId","data-v-9d4af391"]]);export{Za as default};
