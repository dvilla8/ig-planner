import{a5 as zs,e as cn,W as Fv,r as nr,f as Vt,h as xe,w as Pt,d as ut,j as _n,a8 as z4,L as Rr,n as pn,q as Da,t as xs,_ as rr,p as Ys,a9 as pc,aa as z0,g as El,ab as Bv,ac as co,b as Il,k as N0,l as V0,i as Tr,M as gr,ad as U0,$ as Qd,P as hc,a0 as mc,s as hl,c as Mn,H as bs,x as du,y as Uo,z as zv,ae as N4,af as V4,ag as Nv,ah as lh,ai as Vv,u as Uv,aj as sm,O as U4,ak as Gv,al as Wv,m as Up,am as G4,F as Ts,E as Hv,J as ch,K as dh,an as W4,Q as Hd,U as $s,ao as H4,ap as c$,T as Ns,a7 as uh,aq as d$,ar as j4,I as jv,B as u$,C as q4,as as Y4,at as X4,au as Z4,av as qv,aw as Yv,ax as K4,ay as Q4,az as J4,Z as tT,aA as eT,aB as nT,aC as rT,aD as iT,aE as oT,aF as aT}from"./index-JKznvG2g.js";import{a as vs,E as G0,F as sT,G as ph,H as lT,J as cT,K as hh,L as mh,M as Xc,N as W0,O as dT,Q as fh,R as uT,S as pT,T as gh,v as Es,t as mo,y as ss,x as uo,s as uu,w as jd,z as Jd,A as hT,q as os,U as mT,W as H0,u as fT,X as gT,p as Xv,B as $T,Y as yT,Z as bT,$ as vT,a0 as xT,g as ST,i as wT,j as p$,a1 as TT,r as ET,b as $h,o as IT,a2 as _T,e as Gp,C as Zv,c as CT,d as RT,a3 as MT,a4 as kT,a5 as PT,a6 as AT,a7 as LT,_ as OT,D as DT}from"./VBadge-75Z0jvsJ.js";/*!
 * FilePond 4.30.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const FT=t=>t instanceof HTMLElement,BT=(t,e=[],n=[])=>{const r={...t},i=[],o=[],a=()=>({...r}),s=()=>{const f=[...i];return i.length=0,f},l=()=>{const f=[...o];o.length=0,f.forEach(({type:m,data:$})=>{c(m,$)})},c=(f,m,$)=>{if($&&!document.hidden){o.push({type:f,data:m});return}h[f]&&h[f](m),i.push({type:f,data:m})},d=(f,...m)=>p[f]?p[f](...m):null,u={getState:a,processActionQueue:s,processDispatchQueue:l,dispatch:c,query:d};let p={};e.forEach(f=>{p={...f(r),...p}});let h={};return n.forEach(f=>{h={...f(c,d,r),...h}}),u},zT=(t,e,n)=>{if(typeof n=="function"){t[e]=n;return}Object.defineProperty(t,e,{...n})},xi=(t,e)=>{for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])},ml=t=>{const e={};return xi(t,n=>{zT(e,n,t[n])}),e},Ni=(t,e,n=null)=>{if(n===null)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,n)},NT="http://www.w3.org/2000/svg",VT=["svg","path"],h$=t=>VT.includes(t),Wp=(t,e,n={})=>{typeof e=="object"&&(n=e,e=null);const r=h$(t)?document.createElementNS(NT,t):document.createElement(t);return e&&(h$(t)?Ni(r,"class",e):r.className=e),xi(n,(i,o)=>{Ni(r,i,o)}),r},UT=t=>(e,n)=>{typeof n<"u"&&t.children[n]?t.insertBefore(e,t.children[n]):t.appendChild(e)},GT=(t,e)=>(n,r)=>(typeof r<"u"?e.splice(r,0,n):e.push(n),n),WT=(t,e)=>n=>(e.splice(e.indexOf(n),1),n.element.parentNode&&t.removeChild(n.element),n),HT=typeof window<"u"&&typeof window.document<"u",Kv=()=>HT,jT=Kv()?Wp("svg"):{},qT="children"in jT?t=>t.children.length:t=>t.childNodes.length,Qv=(t,e,n,r)=>{const i=n[0]||t.left,o=n[1]||t.top,a=i+t.width,s=o+t.height*(r[1]||1),l={element:{...t},inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:i,top:o,right:a,bottom:s}};return e.filter(c=>!c.isRectIgnored()).map(c=>c.rect).forEach(c=>{m$(l.inner,{...c.inner}),m$(l.outer,{...c.outer})}),f$(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,f$(l.outer),l},m$=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},f$=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},rc=t=>typeof t=="number",YT=(t,e,n,r=.001)=>Math.abs(t-e)<r&&Math.abs(n)<r,XT=({stiffness:t=.5,damping:e=.75,mass:n=10}={})=>{let r=null,i=null,o=0,a=!1;const c=ml({interpolate:(d,u)=>{if(a)return;if(!(rc(r)&&rc(i))){a=!0,o=0;return}const p=-(i-r)*t;o+=p/n,i+=o,o*=e,YT(i,r,o)||u?(i=r,o=0,a=!0,c.onupdate(i),c.oncomplete(i)):c.onupdate(i)},target:{set:d=>{if(rc(d)&&!rc(i)&&(i=d),r===null&&(r=d,i=d),r=d,i===r||typeof r>"u"){a=!0,o=0,c.onupdate(i),c.oncomplete(i);return}a=!1},get:()=>r},resting:{get:()=>a},onupdate:d=>{},oncomplete:d=>{}});return c},ZT=t=>t<.5?2*t*t:-1+(4-2*t)*t,KT=({duration:t=500,easing:e=ZT,delay:n=0}={})=>{let r=null,i,o,a=!0,s=!1,l=null;const d=ml({interpolate:(u,p)=>{a||l===null||(r===null&&(r=u),!(u-r<n)&&(i=u-r-n,i>=t||p?(i=1,o=s?0:1,d.onupdate(o*l),d.oncomplete(o*l),a=!0):(o=i/t,d.onupdate((i>=0?e(s?1-o:o):0)*l))))},target:{get:()=>s?0:l,set:u=>{if(l===null){l=u,d.onupdate(u),d.oncomplete(u);return}u<l?(l=1,s=!0):(s=!1,l=u),a=!1,r=null}},resting:{get:()=>a},onupdate:u=>{},oncomplete:u=>{}});return d},g$={spring:XT,tween:KT},QT=(t,e,n)=>{const r=t[e]&&typeof t[e][n]=="object"?t[e][n]:t[e]||t,i=typeof r=="string"?r:r.type,o=typeof r=="object"?{...r}:{};return g$[i]?g$[i](o):null},j0=(t,e,n,r=!1)=>{e=Array.isArray(e)?e:[e],e.forEach(i=>{t.forEach(o=>{let a=o,s=()=>n[o],l=c=>n[o]=c;typeof o=="object"&&(a=o.key,s=o.getter||s,l=o.setter||l),!(i[a]&&!r)&&(i[a]={get:s,set:l})})})},JT=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:r})=>{const i={...e},o=[];return xi(t,(a,s)=>{const l=QT(s);if(!l)return;l.onupdate=d=>{e[a]=d},l.target=i[a],j0([{key:a,setter:d=>{l.target!==d&&(l.target=d)},getter:()=>e[a]}],[n,r],e,!0),o.push(l)}),{write:a=>{let s=document.hidden,l=!0;return o.forEach(c=>{c.resting||(l=!1),c.interpolate(a,s)}),l},destroy:()=>{}}},tE=t=>(e,n)=>{t.addEventListener(e,n)},eE=t=>(e,n)=>{t.removeEventListener(e,n)},nE=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:r,viewState:i,view:o})=>{const a=[],s=tE(o.element),l=eE(o.element);return r.on=(c,d)=>{a.push({type:c,fn:d}),s(c,d)},r.off=(c,d)=>{a.splice(a.findIndex(u=>u.type===c&&u.fn===d),1),l(c,d)},{write:()=>!0,destroy:()=>{a.forEach(c=>{l(c.type,c.fn)})}}},rE=({mixinConfig:t,viewProps:e,viewExternalAPI:n})=>{j0(t,n,e)},No=t=>t!=null,iE={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},oE=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:r,view:i})=>{const o={...e},a={};j0(t,[n,r],e);const s=()=>[e.translateX||0,e.translateY||0],l=()=>[e.scaleX||0,e.scaleY||0],c=()=>i.rect?Qv(i.rect,i.childViews,s(),l()):null;return n.rect={get:c},r.rect={get:c},t.forEach(d=>{e[d]=typeof o[d]>"u"?iE[d]:o[d]}),{write:()=>{if(aE(a,e))return sE(i.element,e),Object.assign(a,{...e}),!0},destroy:()=>{}}},aE=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in e)if(e[n]!==t[n])return!0;return!1},sE=(t,{opacity:e,perspective:n,translateX:r,translateY:i,scaleX:o,scaleY:a,rotateX:s,rotateY:l,rotateZ:c,originX:d,originY:u,width:p,height:h})=>{let f="",m="";(No(d)||No(u))&&(m+=`transform-origin: ${d||0}px ${u||0}px;`),No(n)&&(f+=`perspective(${n}px) `),(No(r)||No(i))&&(f+=`translate3d(${r||0}px, ${i||0}px, 0) `),(No(o)||No(a))&&(f+=`scale3d(${No(o)?o:1}, ${No(a)?a:1}, 1) `),No(c)&&(f+=`rotateZ(${c}rad) `),No(s)&&(f+=`rotateX(${s}rad) `),No(l)&&(f+=`rotateY(${l}rad) `),f.length&&(m+=`transform:${f};`),No(e)&&(m+=`opacity:${e};`,e===0&&(m+="visibility:hidden;"),e<1&&(m+="pointer-events:none;")),No(h)&&(m+=`height:${h}px;`),No(p)&&(m+=`width:${p}px;`);const $=t.elementCurrentStyle||"";(m.length!==$.length||m!==$)&&(t.style.cssText=m,t.elementCurrentStyle=m)},lE={styles:oE,listeners:nE,animations:JT,apis:rE},$$=(t={},e={},n={})=>(e.layoutCalculated||(t.paddingTop=parseInt(n.paddingTop,10)||0,t.marginTop=parseInt(n.marginTop,10)||0,t.marginRight=parseInt(n.marginRight,10)||0,t.marginBottom=parseInt(n.marginBottom,10)||0,t.marginLeft=parseInt(n.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=e.offsetParent===null,t),Gi=({tag:t="div",name:e=null,attributes:n={},read:r=()=>{},write:i=()=>{},create:o=()=>{},destroy:a=()=>{},filterFrameActionsForChild:s=(h,f)=>f,didCreateView:l=()=>{},didWriteView:c=()=>{},ignoreRect:d=!1,ignoreRectUpdate:u=!1,mixins:p=[]}={})=>(h,f={})=>{const m=Wp(t,`filepond--${e}`,n),$=window.getComputedStyle(m,null),b=$$();let S=null,v=!1;const T=[],C=[],R={},A={},E=[i],M=[r],P=[a],_=()=>m,y=()=>T.concat(),z=()=>R,O=j=>(ct,U)=>ct(j,U),I=()=>S||(S=Qv(b,T,[0,0],[1,1]),S),k=()=>$,G=()=>{S=null,T.forEach(U=>U._read()),!(u&&b.width&&b.height)&&$$(b,m,$);const ct={root:et,props:f,rect:b};M.forEach(U=>U(ct))},X=(j,ct,U)=>{let ft=ct.length===0;return E.forEach(yt=>{yt({props:f,root:et,actions:ct,timestamp:j,shouldOptimize:U})===!1&&(ft=!1)}),C.forEach(yt=>{yt.write(j)===!1&&(ft=!1)}),T.filter(yt=>!!yt.element.parentNode).forEach(yt=>{yt._write(j,s(yt,ct),U)||(ft=!1)}),T.forEach((yt,It)=>{yt.element.parentNode||(et.appendChild(yt.element,It),yt._read(),yt._write(j,s(yt,ct),U),ft=!1)}),v=ft,c({props:f,root:et,actions:ct,timestamp:j}),ft},q=()=>{C.forEach(j=>j.destroy()),P.forEach(j=>{j({root:et,props:f})}),T.forEach(j=>j._destroy())},D={element:{get:_},style:{get:k},childViews:{get:y}},lt={...D,rect:{get:I},ref:{get:z},is:j=>e===j,appendChild:UT(m),createChildView:O(h),linkView:j=>(T.push(j),j),unlinkView:j=>{T.splice(T.indexOf(j),1)},appendChildView:GT(m,T),removeChildView:WT(m,T),registerWriter:j=>E.push(j),registerReader:j=>M.push(j),registerDestroyer:j=>P.push(j),invalidateLayout:()=>m.layoutCalculated=!1,dispatch:h.dispatch,query:h.query},pt={element:{get:_},childViews:{get:y},rect:{get:I},resting:{get:()=>v},isRectIgnored:()=>d,_read:G,_write:X,_destroy:q},Lt={...D,rect:{get:()=>b}};Object.keys(p).sort((j,ct)=>j==="styles"?1:ct==="styles"?-1:0).forEach(j=>{const ct=lE[j]({mixinConfig:p[j],viewProps:f,viewState:A,viewInternalAPI:lt,viewExternalAPI:pt,view:ml(Lt)});ct&&C.push(ct)});const et=ml(lt);o({root:et,props:f});const Y=qT(m);return T.forEach((j,ct)=>{et.appendChild(j.element,Y+ct)}),l(et),ml(pt)},cE=(t,e,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(t),window[r].writers.push(e);return}window[r]={readers:[t],writers:[e]};const i=window[r],o=1e3/n;let a=null,s=null,l=null,c=null;const d=()=>{document.hidden?(l=()=>window.setTimeout(()=>u(performance.now()),o),c=()=>window.clearTimeout(s)):(l=()=>window.requestAnimationFrame(u),c=()=>window.cancelAnimationFrame(s))};document.addEventListener("visibilitychange",()=>{c&&c(),d(),u(performance.now())});const u=p=>{s=l(u),a||(a=p);const h=p-a;h<=o||(a=p-h%o,i.readers.forEach(f=>f()),i.writers.forEach(f=>f(p)))};return d(),u(performance.now()),{pause:()=>{c(s)}}},Ho=(t,e)=>({root:n,props:r,actions:i=[],timestamp:o,shouldOptimize:a})=>{i.filter(s=>t[s.type]).forEach(s=>t[s.type]({root:n,props:r,action:s.data,timestamp:o,shouldOptimize:a})),e&&e({root:n,props:r,actions:i,timestamp:o,shouldOptimize:a})},y$=(t,e)=>e.parentNode.insertBefore(t,e),b$=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),yh=t=>Array.isArray(t),Ws=t=>t==null,dE=t=>t.trim(),bh=t=>""+t,uE=(t,e=",")=>Ws(t)?[]:yh(t)?t:bh(t).split(e).map(dE).filter(n=>n.length),Jv=t=>typeof t=="boolean",tx=t=>Jv(t)?t:t==="true",Wo=t=>typeof t=="string",ex=t=>rc(t)?t:Wo(t)?bh(t).replace(/[a-z]+/gi,""):0,kp=t=>parseInt(ex(t),10),v$=t=>parseFloat(ex(t)),od=t=>rc(t)&&isFinite(t)&&Math.floor(t)===t,x$=(t,e=1e3)=>{if(od(t))return t;let n=bh(t).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),kp(n)*e*e):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),kp(n)*e):kp(n)},ic=t=>typeof t=="function",pE=t=>{let e=self,n=t.split("."),r=null;for(;r=n.shift();)if(e=e[r],!e)return null;return e},S$={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},hE=t=>{const e={};return e.url=Wo(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},xi(S$,n=>{e[n]=mE(n,t[n],S$[n],e.timeout,e.headers)}),e.process=t.process||Wo(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e},mE=(t,e,n,r,i)=>{if(e===null)return null;if(typeof e=="function")return e;const o={url:n==="GET"||n==="PATCH"?`?${t}=`:"",method:n,headers:i,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(Wo(e))return o.url=e,o;if(Object.assign(o,e),Wo(o.headers)){const a=o.headers.split(/:(.+)/);o.headers={header:a[0],value:a[1]}}return o.withCredentials=tx(o.withCredentials),o},fE=t=>hE(t),gE=t=>t===null,po=t=>typeof t=="object"&&t!==null,$E=t=>po(t)&&Wo(t.url)&&po(t.process)&&po(t.revert)&&po(t.restore)&&po(t.fetch),e0=t=>yh(t)?"array":gE(t)?"null":od(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":$E(t)?"api":typeof t,yE=t=>t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),bE={array:uE,boolean:tx,int:t=>e0(t)==="bytes"?x$(t):kp(t),number:v$,float:v$,bytes:x$,string:t=>ic(t)?t:bh(t),function:t=>pE(t),serverapi:fE,object:t=>{try{return JSON.parse(yE(t))}catch{return null}}},vE=(t,e)=>bE[e](t),nx=(t,e,n)=>{if(t===e)return t;let r=e0(t);if(r!==n){const i=vE(t,n);if(r=e0(i),i===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;t=i}return t},xE=(t,e)=>{let n=t;return{enumerable:!0,get:()=>n,set:r=>{n=nx(r,t,e)}}},SE=t=>{const e={};return xi(t,n=>{const r=t[n];e[n]=xE(r[0],r[1])}),ml(e)},wE=t=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:SE(t)}),vh=(t,e="-")=>t.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(e),TE=(t,e)=>{const n={};return xi(e,r=>{n[r]={get:()=>t.getState().options[r],set:i=>{t.dispatch(`SET_${vh(r,"_").toUpperCase()}`,{value:i})}}}),n},EE=t=>(e,n,r)=>{const i={};return xi(t,o=>{const a=vh(o,"_").toUpperCase();i[`SET_${a}`]=s=>{try{r.options[o]=s.value}catch{}e(`DID_SET_${a}`,{value:r.options[o]})}}),i},IE=t=>e=>{const n={};return xi(t,r=>{n[`GET_${vh(r,"_").toUpperCase()}`]=i=>e.options[r]}),n},Pa={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},q0=()=>Math.random().toString(36).substring(2,11),Y0=(t,e)=>t.splice(e,1),_E=(t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)},xh=()=>{const t=[],e=(r,i)=>{Y0(t,t.findIndex(o=>o.event===r&&(o.cb===i||!i)))},n=(r,i,o)=>{t.filter(a=>a.event===r).map(a=>a.cb).forEach(a=>_E(()=>a(...i),o))};return{fireSync:(r,...i)=>{n(r,i,!0)},fire:(r,...i)=>{n(r,i,!1)},on:(r,i)=>{t.push({event:r,cb:i})},onOnce:(r,i)=>{t.push({event:r,cb:(...o)=>{e(r,i),i(...o)}})},off:e}},rx=(t,e,n)=>{Object.getOwnPropertyNames(t).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r)))},CE=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Ko=t=>{const e={};return rx(t,e,CE),e},RE=t=>{t.forEach((e,n)=>{e.released&&Y0(t,n)})},qn={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},lo={INPUT:1,LIMBO:2,LOCAL:3},ix=t=>/[^0-9]+/.exec(t),ox=()=>ix(1.1.toLocaleString())[0],ME=()=>{const t=ox(),e=1e3.toLocaleString();return e!=="1000"?ix(e)[0]:t==="."?",":"."},Kt={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},X0=[],Qa=(t,e,n)=>new Promise((r,i)=>{const o=X0.filter(s=>s.key===t).map(s=>s.cb);if(o.length===0){r(e);return}const a=o.shift();o.reduce((s,l)=>s.then(c=>l(c,n)),a(e,n)).then(s=>r(s)).catch(s=>i(s))}),fc=(t,e,n)=>X0.filter(r=>r.key===t).map(r=>r.cb(e,n)),kE=(t,e)=>X0.push({key:t,cb:e}),PE=t=>Object.assign(Bc,t),Hp=()=>({...Bc}),AE=t=>{xi(t,(e,n)=>{Bc[e]&&(Bc[e][0]=nx(n,Bc[e][0],Bc[e][1]))})},Bc={id:[null,Kt.STRING],name:["filepond",Kt.STRING],disabled:[!1,Kt.BOOLEAN],className:[null,Kt.STRING],required:[!1,Kt.BOOLEAN],captureMethod:[null,Kt.STRING],allowSyncAcceptAttribute:[!0,Kt.BOOLEAN],allowDrop:[!0,Kt.BOOLEAN],allowBrowse:[!0,Kt.BOOLEAN],allowPaste:[!0,Kt.BOOLEAN],allowMultiple:[!1,Kt.BOOLEAN],allowReplace:[!0,Kt.BOOLEAN],allowRevert:[!0,Kt.BOOLEAN],allowRemove:[!0,Kt.BOOLEAN],allowProcess:[!0,Kt.BOOLEAN],allowReorder:[!1,Kt.BOOLEAN],allowDirectoriesOnly:[!1,Kt.BOOLEAN],storeAsFile:[!1,Kt.BOOLEAN],forceRevert:[!1,Kt.BOOLEAN],maxFiles:[null,Kt.INT],checkValidity:[!1,Kt.BOOLEAN],itemInsertLocationFreedom:[!0,Kt.BOOLEAN],itemInsertLocation:["before",Kt.STRING],itemInsertInterval:[75,Kt.INT],dropOnPage:[!1,Kt.BOOLEAN],dropOnElement:[!0,Kt.BOOLEAN],dropValidation:[!1,Kt.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],Kt.ARRAY],instantUpload:[!0,Kt.BOOLEAN],maxParallelUploads:[2,Kt.INT],allowMinimumUploadDuration:[!0,Kt.BOOLEAN],chunkUploads:[!1,Kt.BOOLEAN],chunkForce:[!1,Kt.BOOLEAN],chunkSize:[5e6,Kt.INT],chunkRetryDelays:[[500,1e3,3e3],Kt.ARRAY],server:[null,Kt.SERVER_API],fileSizeBase:[1e3,Kt.INT],labelFileSizeBytes:["bytes",Kt.STRING],labelFileSizeKilobytes:["KB",Kt.STRING],labelFileSizeMegabytes:["MB",Kt.STRING],labelFileSizeGigabytes:["GB",Kt.STRING],labelDecimalSeparator:[ox(),Kt.STRING],labelThousandsSeparator:[ME(),Kt.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',Kt.STRING],labelInvalidField:["Field contains invalid files",Kt.STRING],labelFileWaitingForSize:["Waiting for size",Kt.STRING],labelFileSizeNotAvailable:["Size not available",Kt.STRING],labelFileCountSingular:["file in list",Kt.STRING],labelFileCountPlural:["files in list",Kt.STRING],labelFileLoading:["Loading",Kt.STRING],labelFileAdded:["Added",Kt.STRING],labelFileLoadError:["Error during load",Kt.STRING],labelFileRemoved:["Removed",Kt.STRING],labelFileRemoveError:["Error during remove",Kt.STRING],labelFileProcessing:["Uploading",Kt.STRING],labelFileProcessingComplete:["Upload complete",Kt.STRING],labelFileProcessingAborted:["Upload cancelled",Kt.STRING],labelFileProcessingError:["Error during upload",Kt.STRING],labelFileProcessingRevertError:["Error during revert",Kt.STRING],labelTapToCancel:["tap to cancel",Kt.STRING],labelTapToRetry:["tap to retry",Kt.STRING],labelTapToUndo:["tap to undo",Kt.STRING],labelButtonRemoveItem:["Remove",Kt.STRING],labelButtonAbortItemLoad:["Abort",Kt.STRING],labelButtonRetryItemLoad:["Retry",Kt.STRING],labelButtonAbortItemProcessing:["Cancel",Kt.STRING],labelButtonUndoItemProcessing:["Undo",Kt.STRING],labelButtonRetryItemProcessing:["Retry",Kt.STRING],labelButtonProcessItem:["Upload",Kt.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',Kt.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',Kt.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',Kt.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',Kt.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',Kt.STRING],oninit:[null,Kt.FUNCTION],onwarning:[null,Kt.FUNCTION],onerror:[null,Kt.FUNCTION],onactivatefile:[null,Kt.FUNCTION],oninitfile:[null,Kt.FUNCTION],onaddfilestart:[null,Kt.FUNCTION],onaddfileprogress:[null,Kt.FUNCTION],onaddfile:[null,Kt.FUNCTION],onprocessfilestart:[null,Kt.FUNCTION],onprocessfileprogress:[null,Kt.FUNCTION],onprocessfileabort:[null,Kt.FUNCTION],onprocessfilerevert:[null,Kt.FUNCTION],onprocessfile:[null,Kt.FUNCTION],onprocessfiles:[null,Kt.FUNCTION],onremovefile:[null,Kt.FUNCTION],onpreparefile:[null,Kt.FUNCTION],onupdatefiles:[null,Kt.FUNCTION],onreorderfiles:[null,Kt.FUNCTION],beforeDropFile:[null,Kt.FUNCTION],beforeAddFile:[null,Kt.FUNCTION],beforeRemoveFile:[null,Kt.FUNCTION],beforePrepareFile:[null,Kt.FUNCTION],stylePanelLayout:[null,Kt.STRING],stylePanelAspectRatio:[null,Kt.STRING],styleItemPanelAspectRatio:[null,Kt.STRING],styleButtonRemoveItemPosition:["left",Kt.STRING],styleButtonProcessItemPosition:["right",Kt.STRING],styleLoadIndicatorPosition:["right",Kt.STRING],styleProgressIndicatorPosition:["right",Kt.STRING],styleButtonRemoveItemAlign:[!1,Kt.BOOLEAN],files:[[],Kt.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],Kt.ARRAY]},oc=(t,e)=>Ws(e)?t[0]||null:od(e)?t[e]||null:(typeof e=="object"&&(e=e.id),t.find(n=>n.id===e)||null),ax=t=>{if(Ws(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},es=t=>t.filter(e=>!e.archived),LE={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let ap=null;const OE=()=>{if(ap===null)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,ap=e.files.length===1}catch{ap=!1}return ap},DE=[qn.LOAD_ERROR,qn.PROCESSING_ERROR,qn.PROCESSING_REVERT_ERROR],FE=[qn.LOADING,qn.PROCESSING,qn.PROCESSING_QUEUED,qn.INIT],BE=[qn.PROCESSING_COMPLETE],zE=t=>DE.includes(t.status),NE=t=>FE.includes(t.status),VE=t=>BE.includes(t.status),w$=t=>po(t.options.server)&&(po(t.options.server.process)||ic(t.options.server.process)),UE=t=>({GET_STATUS:()=>{const e=es(t.items),{EMPTY:n,ERROR:r,BUSY:i,IDLE:o,READY:a}=LE;return e.length===0?n:e.some(zE)?r:e.some(NE)?i:e.some(VE)?a:o},GET_ITEM:e=>oc(t.items,e),GET_ACTIVE_ITEM:e=>oc(es(t.items),e),GET_ACTIVE_ITEMS:()=>es(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const n=oc(t.items,e);return n?n.filename:null},GET_ITEM_SIZE:e=>{const n=oc(t.items,e);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter(e=>/^style/.test(e)).map(e=>({name:e,value:t.options[e]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:ax(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>es(t.items).filter(n=>n.status===e),GET_TOTAL_ITEMS:()=>es(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&OE()&&!w$(t),IS_ASYNC:()=>w$(t),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),GE=t=>{const e=es(t.items).length;if(!t.options.allowMultiple)return e===0;const n=t.options.maxFiles;return n===null||e<n},sx=(t,e,n)=>Math.max(Math.min(n,t),e),WE=(t,e,n)=>t.splice(e,0,n),HE=(t,e,n)=>Ws(e)?null:typeof n>"u"?(t.push(e),e):(n=sx(n,0,t.length),WE(t,n,e),e),n0=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),pu=t=>`${t}`.split("/").pop().split("?").shift(),Sh=t=>t.split(".").pop(),jE=t=>{if(typeof t!="string")return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?e==="jpeg"?"jpg":e:""},Cd=(t,e="")=>(e+t).slice(-e.length),lx=(t=new Date)=>`${t.getFullYear()}-${Cd(t.getMonth()+1,"00")}-${Cd(t.getDate(),"00")}_${Cd(t.getHours(),"00")}-${Cd(t.getMinutes(),"00")}-${Cd(t.getSeconds(),"00")}`,Zc=(t,e,n=null,r=null)=>{const i=typeof n=="string"?t.slice(0,t.size,n):t.slice(0,t.size,t.type);return i.lastModifiedDate=new Date,t._relativePath&&(i._relativePath=t._relativePath),Wo(e)||(e=lx()),e&&r===null&&Sh(e)?i.name=e:(r=r||jE(i.type),i.name=e+(r?"."+r:"")),i},qE=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,cx=(t,e)=>{const n=qE();if(n){const r=new n;return r.append(t),r.getBlob(e)}return new Blob([t],{type:e})},YE=(t,e)=>{const n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return cx(n,e)},dx=t=>(/^data:(.+);/.exec(t)||[])[1]||null,XE=t=>t.split(",")[1].replace(/\s/g,""),ZE=t=>atob(XE(t)),KE=t=>{const e=dx(t),n=ZE(t);return YE(n,e)},QE=(t,e,n)=>Zc(KE(t),e,null,n),JE=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return e.length?decodeURI(e[e.length-1]):null},t5=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},e5=t=>/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null,Z0=t=>{const e={source:null,name:null,size:null},n=t.split(`
`);for(let r of n){const i=JE(r);if(i){e.name=i;continue}const o=t5(r);if(o){e.size=o;continue}const a=e5(r);if(a){e.source=a;continue}}return e},n5=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>e.progress,r=()=>{e.request&&e.request.abort&&e.request.abort()},i=()=>{const s=e.source;a.fire("init",s),s instanceof File?a.fire("load",s):s instanceof Blob?a.fire("load",Zc(s,s.name)):n0(s)?a.fire("load",QE(s)):o(s)},o=s=>{if(!t){a.fire("error",{type:"error",body:"Can't load URL",code:400});return}e.timestamp=Date.now(),e.request=t(s,l=>{e.duration=Date.now()-e.timestamp,e.complete=!0,l instanceof Blob&&(l=Zc(l,l.name||pu(s))),a.fire("load",l instanceof Blob?l:l?l.body:null)},l=>{a.fire("error",typeof l=="string"?{type:"error",code:0,body:l}:l)},(l,c,d)=>{if(d&&(e.size=d),e.duration=Date.now()-e.timestamp,!l){e.progress=null;return}e.progress=c/d,a.fire("progress",e.progress)},()=>{a.fire("abort")},l=>{const c=Z0(typeof l=="string"?l:l.headers);a.fire("meta",{size:e.size||c.size,filename:c.name,source:c.source})})},a={...xh(),setSource:s=>e.source=s,getProgress:n,abort:r,load:i};return a},T$=t=>/GET|HEAD/.test(t),ac=(t,e,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{i=!0,a.abort()}};let i=!1,o=!1;n={method:"POST",headers:{},withCredentials:!1,...n},e=encodeURI(e),T$(n.method)&&t&&(e=`${e}${encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))}`);const a=new XMLHttpRequest,s=T$(n.method)?a:a.upload;return s.onprogress=l=>{i||r.onprogress(l.lengthComputable,l.loaded,l.total)},a.onreadystatechange=()=>{a.readyState<2||a.readyState===4&&a.status===0||o||(o=!0,r.onheaders(a))},a.onload=()=>{a.status>=200&&a.status<300?r.onload(a):r.onerror(a)},a.onerror=()=>r.onerror(a),a.onabort=()=>{i=!0,r.onabort()},a.ontimeout=()=>r.ontimeout(a),a.open(n.method,e,!0),od(n.timeout)&&(a.timeout=n.timeout),Object.keys(n.headers).forEach(l=>{const c=unescape(encodeURIComponent(n.headers[l]));a.setRequestHeader(l,c)}),n.responseType&&(a.responseType=n.responseType),n.withCredentials&&(a.withCredentials=!0),a.send(t),r},Ci=(t,e,n,r)=>({type:t,code:e,body:n,headers:r}),sc=t=>e=>{t(Ci("error",0,"Timeout",e.getAllResponseHeaders()))},E$=t=>/\?/.test(t),qd=(...t)=>{let e="";return t.forEach(n=>{e+=E$(e)&&E$(n)?n.replace(/\?/,"&"):n}),e},lm=(t="",e)=>{if(typeof e=="function")return e;if(!e||!Wo(e.url))return null;const n=e.onload||(i=>i),r=e.onerror||(i=>null);return(i,o,a,s,l,c)=>{const d=ac(i,qd(t,e.url),{...e,responseType:"blob"});return d.onload=u=>{const p=u.getAllResponseHeaders(),h=Z0(p).name||pu(i);o(Ci("load",u.status,e.method==="HEAD"?null:Zc(n(u.response),h),p))},d.onerror=u=>{a(Ci("error",u.status,r(u.response)||u.statusText,u.getAllResponseHeaders()))},d.onheaders=u=>{c(Ci("headers",u.status,null,u.getAllResponseHeaders()))},d.ontimeout=sc(a),d.onprogress=s,d.onabort=l,d}},Ia={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},r5=(t,e,n,r,i,o,a,s,l,c,d)=>{const u=[],{chunkTransferId:p,chunkServer:h,chunkSize:f,chunkRetryDelays:m}=d,$={serverId:p,aborted:!1},b=e.ondata||(O=>O),S=e.onload||((O,I)=>I==="HEAD"?O.getResponseHeader("Upload-Offset"):O.response),v=e.onerror||(O=>null),T=O=>{const I=new FormData;po(i)&&I.append(n,JSON.stringify(i));const k=typeof e.headers=="function"?e.headers(r,i):{...e.headers,"Upload-Length":r.size},G={...e,headers:k},X=ac(b(I),qd(t,e.url),G);X.onload=q=>O(S(q,G.method)),X.onerror=q=>a(Ci("error",q.status,v(q.response)||q.statusText,q.getAllResponseHeaders())),X.ontimeout=sc(a)},C=O=>{const I=qd(t,h.url,$.serverId),G={headers:typeof e.headers=="function"?e.headers($.serverId):{...e.headers},method:"HEAD"},X=ac(null,I,G);X.onload=q=>O(S(q,G.method)),X.onerror=q=>a(Ci("error",q.status,v(q.response)||q.statusText,q.getAllResponseHeaders())),X.ontimeout=sc(a)},R=Math.floor(r.size/f);for(let O=0;O<=R;O++){const I=O*f,k=r.slice(I,I+f,"application/offset+octet-stream");u[O]={index:O,size:k.size,offset:I,data:k,file:r,progress:0,retries:[...m],status:Ia.QUEUED,error:null,request:null,timeout:null}}const A=()=>o($.serverId),E=O=>O.status===Ia.QUEUED||O.status===Ia.ERROR,M=O=>{if($.aborted)return;if(O=O||u.find(E),!O){u.every(D=>D.status===Ia.COMPLETE)&&A();return}O.status=Ia.PROCESSING,O.progress=null;const I=h.ondata||(D=>D),k=h.onerror||(D=>null),G=qd(t,h.url,$.serverId),X=typeof h.headers=="function"?h.headers(O):{...h.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":O.offset,"Upload-Length":r.size,"Upload-Name":r.name},q=O.request=ac(I(O.data),G,{...h,headers:X});q.onload=()=>{O.status=Ia.COMPLETE,O.request=null,y()},q.onprogress=(D,lt,pt)=>{O.progress=D?lt:null,_()},q.onerror=D=>{O.status=Ia.ERROR,O.request=null,O.error=k(D.response)||D.statusText,P(O)||a(Ci("error",D.status,k(D.response)||D.statusText,D.getAllResponseHeaders()))},q.ontimeout=D=>{O.status=Ia.ERROR,O.request=null,P(O)||sc(a)(D)},q.onabort=()=>{O.status=Ia.QUEUED,O.request=null,l()}},P=O=>O.retries.length===0?!1:(O.status=Ia.WAITING,clearTimeout(O.timeout),O.timeout=setTimeout(()=>{M(O)},O.retries.shift()),!0),_=()=>{const O=u.reduce((k,G)=>k===null||G.progress===null?null:k+G.progress,0);if(O===null)return s(!1,0,0);const I=u.reduce((k,G)=>k+G.size,0);s(!0,O,I)},y=()=>{u.filter(I=>I.status===Ia.PROCESSING).length>=1||M()},z=()=>{u.forEach(O=>{clearTimeout(O.timeout),O.request&&O.request.abort()})};return $.serverId?C(O=>{$.aborted||(u.filter(I=>I.offset<O).forEach(I=>{I.status=Ia.COMPLETE,I.progress=I.size}),y())}):T(O=>{$.aborted||(c(O),$.serverId=O,y())}),{abort:()=>{$.aborted=!0,z()}}},i5=(t,e,n,r)=>(i,o,a,s,l,c,d)=>{if(!i)return;const u=r.chunkUploads,p=u&&i.size>r.chunkSize,h=u&&(p||r.chunkForce);if(i instanceof Blob&&h)return r5(t,e,n,i,o,a,s,l,c,d,r);const f=e.ondata||(C=>C),m=e.onload||(C=>C),$=e.onerror||(C=>null),b=typeof e.headers=="function"?e.headers(i,o)||{}:{...e.headers},S={...e,headers:b};var v=new FormData;po(o)&&v.append(n,JSON.stringify(o)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(C=>{v.append(n,C.file,C.name===null?C.file.name:`${C.name}${C.file.name}`)});const T=ac(f(v),qd(t,e.url),S);return T.onload=C=>{a(Ci("load",C.status,m(C.response),C.getAllResponseHeaders()))},T.onerror=C=>{s(Ci("error",C.status,$(C.response)||C.statusText,C.getAllResponseHeaders()))},T.ontimeout=sc(s),T.onprogress=l,T.onabort=c,T},o5=(t="",e,n,r)=>typeof e=="function"?(...i)=>e(n,...i,r):!e||!Wo(e.url)?null:i5(t,e,n,r),Rd=(t="",e)=>{if(typeof e=="function")return e;if(!e||!Wo(e.url))return(i,o)=>o();const n=e.onload||(i=>i),r=e.onerror||(i=>null);return(i,o,a)=>{const s=ac(i,t+e.url,e);return s.onload=l=>{o(Ci("load",l.status,n(l.response),l.getAllResponseHeaders()))},s.onerror=l=>{a(Ci("error",l.status,r(l.response)||l.statusText,l.getAllResponseHeaders()))},s.ontimeout=sc(a),s}},ux=(t=0,e=1)=>t+Math.random()*(e-t),a5=(t,e=1e3,n=0,r=25,i=250)=>{let o=null;const a=Date.now(),s=()=>{let l=Date.now()-a,c=ux(r,i);l+c>e&&(c=l+c-e);let d=l/e;if(d>=1||document.hidden){t(1);return}t(d),o=setTimeout(s,c)};return e>0&&s(),{clear:()=>{clearTimeout(o)}}},s5=(t,e)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=e,i=(d,u)=>{const p=()=>{n.duration===0||n.progress===null||c.fire("progress",c.getProgress())},h=()=>{n.complete=!0,c.fire("load-perceived",n.response.body)};c.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=a5(f=>{n.perceivedProgress=f,n.perceivedDuration=Date.now()-n.timestamp,p(),n.response&&n.perceivedProgress===1&&!n.complete&&h()},r?ux(750,1500):0),n.request=t(d,u,f=>{n.response=po(f)?f:{type:"load",code:200,body:`${f}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,c.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&h()},f=>{n.perceivedPerformanceUpdater.clear(),c.fire("error",po(f)?f:{type:"error",code:0,body:`${f}`})},(f,m,$)=>{n.duration=Date.now()-n.timestamp,n.progress=f?m/$:null,p()},()=>{n.perceivedPerformanceUpdater.clear(),c.fire("abort",n.response?n.response.body:null)},f=>{c.fire("transfer",f)})},o=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},a=()=>{o(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},s=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,l=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,c={...xh(),process:i,abort:o,getProgress:s,getDuration:l,reset:a};return c},px=t=>t.substring(0,t.lastIndexOf("."))||t,l5=t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||n0(t)?e[0]=t.name||lx():n0(t)?(e[1]=t.length,e[2]=dx(t)):Wo(t)&&(e[0]=pu(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},Kc=t=>!!(t instanceof File||t instanceof Blob&&t.name),hx=t=>{if(!po(t))return t;const e=yh(t)?[]:{};for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];e[n]=r&&po(r)?hx(r):r}return e},c5=(t=null,e=null,n=null)=>{const r=q0(),i={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:e,transferId:null,processingAborted:!1,status:e?qn.PROCESSING_COMPLETE:qn.INIT,activeLoader:null,activeProcessor:null};let o=null;const a={},s=E=>i.status=E,l=(E,...M)=>{i.released||i.frozen||R.fire(E,...M)},c=()=>Sh(i.file.name),d=()=>i.file.type,u=()=>i.file.size,p=()=>i.file,h=(E,M,P)=>{if(i.source=E,R.fireSync("init"),i.file){R.fireSync("load-skip");return}i.file=l5(E),M.on("init",()=>{l("load-init")}),M.on("meta",_=>{i.file.size=_.size,i.file.filename=_.filename,_.source&&(t=lo.LIMBO,i.serverFileReference=_.source,i.status=qn.PROCESSING_COMPLETE),l("load-meta")}),M.on("progress",_=>{s(qn.LOADING),l("load-progress",_)}),M.on("error",_=>{s(qn.LOAD_ERROR),l("load-request-error",_)}),M.on("abort",()=>{s(qn.INIT),l("load-abort")}),M.on("load",_=>{i.activeLoader=null;const y=O=>{i.file=Kc(O)?O:i.file,t===lo.LIMBO&&i.serverFileReference?s(qn.PROCESSING_COMPLETE):s(qn.IDLE),l("load")},z=O=>{i.file=_,l("load-meta"),s(qn.LOAD_ERROR),l("load-file-error",O)};if(i.serverFileReference){y(_);return}P(_,y,z)}),M.setSource(E),i.activeLoader=M,M.load()},f=()=>{i.activeLoader&&i.activeLoader.load()},m=()=>{if(i.activeLoader){i.activeLoader.abort();return}s(qn.INIT),l("load-abort")},$=(E,M)=>{if(i.processingAborted){i.processingAborted=!1;return}if(s(qn.PROCESSING),o=null,!(i.file instanceof Blob)){R.on("load",()=>{$(E,M)});return}E.on("load",y=>{i.transferId=null,i.serverFileReference=y}),E.on("transfer",y=>{i.transferId=y}),E.on("load-perceived",y=>{i.activeProcessor=null,i.transferId=null,i.serverFileReference=y,s(qn.PROCESSING_COMPLETE),l("process-complete",y)}),E.on("start",()=>{l("process-start")}),E.on("error",y=>{i.activeProcessor=null,s(qn.PROCESSING_ERROR),l("process-error",y)}),E.on("abort",y=>{i.activeProcessor=null,i.serverFileReference=y,s(qn.IDLE),l("process-abort"),o&&o()}),E.on("progress",y=>{l("process-progress",y)});const P=y=>{i.archived||E.process(y,{...a})},_=console.error;M(i.file,P,_),i.activeProcessor=E},b=()=>{i.processingAborted=!1,s(qn.PROCESSING_QUEUED)},S=()=>new Promise(E=>{if(!i.activeProcessor){i.processingAborted=!0,s(qn.IDLE),l("process-abort"),E();return}o=()=>{E()},i.activeProcessor.abort()}),v=(E,M)=>new Promise((P,_)=>{const y=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(y===null){P();return}E(y,()=>{i.serverFileReference=null,i.transferId=null,P()},z=>{if(!M){P();return}s(qn.PROCESSING_REVERT_ERROR),l("process-revert-error"),_(z)}),s(qn.IDLE),l("process-revert")}),T=(E,M,P)=>{const _=E.split("."),y=_[0],z=_.pop();let O=a;_.forEach(I=>O=O[I]),JSON.stringify(O[z])!==JSON.stringify(M)&&(O[z]=M,l("metadata-update",{key:y,value:a[y],silent:P}))},R={id:{get:()=>r},origin:{get:()=>t,set:E=>t=E},serverId:{get:()=>i.serverFileReference},transferId:{get:()=>i.transferId},status:{get:()=>i.status},filename:{get:()=>i.file.name},filenameWithoutExtension:{get:()=>px(i.file.name)},fileExtension:{get:c},fileType:{get:d},fileSize:{get:u},file:{get:p},relativePath:{get:()=>i.file._relativePath},source:{get:()=>i.source},getMetadata:E=>hx(E?a[E]:a),setMetadata:(E,M,P)=>{if(po(E)){const _=E;return Object.keys(_).forEach(y=>{T(y,_[y],M)}),E}return T(E,M,P),M},extend:(E,M)=>A[E]=M,abortLoad:m,retryLoad:f,requestProcessing:b,abortProcessing:S,load:h,process:$,revert:v,...xh(),freeze:()=>i.frozen=!0,release:()=>i.released=!0,released:{get:()=>i.released},archive:()=>i.archived=!0,archived:{get:()=>i.archived}},A=ml(R);return A},d5=(t,e)=>Ws(e)?0:Wo(e)?t.findIndex(n=>n.id===e):-1,I$=(t,e)=>{const n=d5(t,e);if(!(n<0))return t[n]||null},_$=(t,e,n,r,i,o)=>{const a=ac(null,t,{method:"GET",responseType:"blob"});return a.onload=s=>{const l=s.getAllResponseHeaders(),c=Z0(l).name||pu(t);e(Ci("load",s.status,Zc(s.response,c),l))},a.onerror=s=>{n(Ci("error",s.status,s.statusText,s.getAllResponseHeaders()))},a.onheaders=s=>{o(Ci("headers",s.status,null,s.getAllResponseHeaders()))},a.ontimeout=sc(n),a.onprogress=r,a.onabort=i,a},C$=t=>(t.indexOf("//")===0&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),u5=t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&C$(location.href)!==C$(t),sp=t=>(...e)=>ic(t)?t(...e):t,p5=t=>!Kc(t.file),cm=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout(()=>{t("DID_UPDATE_ITEMS",{items:es(e.items)})},0)},R$=(t,...e)=>new Promise(n=>{if(!t)return n(!0);const r=t(...e);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),dm=(t,e)=>{t.items.sort((n,r)=>e(Ko(n),Ko(r)))},_a=(t,e)=>({query:n,success:r=()=>{},failure:i=()=>{},...o}={})=>{const a=oc(t.items,n);if(!a){i({error:Ci("error",0,"Item not found"),file:null});return}e(a,r,i,o||{})},h5=(t,e,n)=>({ABORT_ALL:()=>{es(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const i=r.map(a=>({source:a.source?a.source:a,options:a.options}));let o=es(n.items);o.forEach(a=>{i.find(s=>s.source===a.source||s.source===a.file)||t("REMOVE_ITEM",{query:a,remove:!1})}),o=es(n.items),i.forEach((a,s)=>{o.find(l=>l.source===a.source||l.file===a.source)||t("ADD_ITEM",{...a,interactionMethod:Pa.NONE,index:s})})},DID_UPDATE_ITEM_METADATA:({id:r,action:i,change:o})=>{o.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const a=I$(n.items,r);if(!e("IS_ASYNC")){Qa("SHOULD_PREPARE_OUTPUT",!1,{item:a,query:e,action:i,change:o}).then(d=>{const u=e("GET_BEFORE_PREPARE_FILE");u&&(d=u(a,d)),d&&t("REQUEST_PREPARE_OUTPUT",{query:r,item:a,success:p=>{t("DID_PREPARE_OUTPUT",{id:r,file:p})}},!0)});return}a.origin===lo.LOCAL&&t("DID_LOAD_ITEM",{id:a.id,error:null,serverFileReference:a.source});const s=()=>{setTimeout(()=>{t("REQUEST_ITEM_PROCESSING",{query:r})},32)},l=d=>{a.revert(Rd(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(d?s:()=>{}).catch(()=>{})},c=d=>{a.abortProcessing().then(d?s:()=>{})};if(a.status===qn.PROCESSING_COMPLETE)return l(n.options.instantUpload);if(a.status===qn.PROCESSING)return c(n.options.instantUpload);n.options.instantUpload&&s()},0))},MOVE_ITEM:({query:r,index:i})=>{const o=oc(n.items,r);if(!o)return;const a=n.items.indexOf(o);i=sx(i,0,n.items.length-1),a!==i&&n.items.splice(i,0,n.items.splice(a,1)[0])},SORT:({compare:r})=>{dm(n,r),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:i,interactionMethod:o,success:a=()=>{},failure:s=()=>{}})=>{let l=i;if(i===-1||typeof i>"u"){const h=e("GET_ITEM_INSERT_LOCATION"),f=e("GET_TOTAL_ITEMS");l=h==="before"?0:f}const c=e("GET_IGNORED_FILES"),d=h=>Kc(h)?!c.includes(h.name.toLowerCase()):!Ws(h),p=r.filter(d).map(h=>new Promise((f,m)=>{t("ADD_ITEM",{interactionMethod:o,source:h.source||h,success:f,failure:m,index:l++,options:h.options||{}})}));Promise.all(p).then(a).catch(s)},ADD_ITEM:({source:r,index:i=-1,interactionMethod:o,success:a=()=>{},failure:s=()=>{},options:l={}})=>{if(Ws(r)){s({error:Ci("error",0,"No source"),file:null});return}if(Kc(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!GE(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const S=Ci("warning",0,"Max files");t("DID_THROW_MAX_FILES",{source:r,error:S}),s({error:S,file:null});return}const b=es(n.items)[0];if(b.status===qn.PROCESSING_COMPLETE||b.status===qn.PROCESSING_REVERT_ERROR){const S=e("GET_FORCE_REVERT");if(b.revert(Rd(n.options.server.url,n.options.server.revert),S).then(()=>{S&&t("ADD_ITEM",{source:r,index:i,interactionMethod:o,success:a,failure:s,options:l})}).catch(()=>{}),S)return}t("REMOVE_ITEM",{query:b.id})}const c=l.type==="local"?lo.LOCAL:l.type==="limbo"?lo.LIMBO:lo.INPUT,d=c5(c,c===lo.INPUT?null:r,l.file);Object.keys(l.metadata||{}).forEach(b=>{d.setMetadata(b,l.metadata[b])}),fc("DID_CREATE_ITEM",d,{query:e,dispatch:t});const u=e("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(i=u==="before"?-1:n.items.length),HE(n.items,d,i),ic(u)&&r&&dm(n,u);const p=d.id;d.on("init",()=>{t("DID_INIT_ITEM",{id:p})}),d.on("load-init",()=>{t("DID_START_ITEM_LOAD",{id:p})}),d.on("load-meta",()=>{t("DID_UPDATE_ITEM_META",{id:p})}),d.on("load-progress",b=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:b})}),d.on("load-request-error",b=>{const S=sp(n.options.labelFileLoadError)(b);if(b.code>=400&&b.code<500){t("DID_THROW_ITEM_INVALID",{id:p,error:b,status:{main:S,sub:`${b.code} (${b.body})`}}),s({error:b,file:Ko(d)});return}t("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:b,status:{main:S,sub:n.options.labelTapToRetry}})}),d.on("load-file-error",b=>{t("DID_THROW_ITEM_INVALID",{id:p,error:b.status,status:b.status}),s({error:b.status,file:Ko(d)})}),d.on("load-abort",()=>{t("REMOVE_ITEM",{query:p})}),d.on("load-skip",()=>{t("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:r,success:a}})}),d.on("load",()=>{const b=S=>{if(!S){t("REMOVE_ITEM",{query:p});return}d.on("metadata-update",v=>{t("DID_UPDATE_ITEM_METADATA",{id:p,change:v})}),Qa("SHOULD_PREPARE_OUTPUT",!1,{item:d,query:e}).then(v=>{const T=e("GET_BEFORE_PREPARE_FILE");T&&(v=T(d,v));const C=()=>{t("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:r,success:a}}),cm(t,n)};if(v){t("REQUEST_PREPARE_OUTPUT",{query:p,item:d,success:R=>{t("DID_PREPARE_OUTPUT",{id:p,file:R}),C()}},!0);return}C()})};Qa("DID_LOAD_ITEM",d,{query:e,dispatch:t}).then(()=>{R$(e("GET_BEFORE_ADD_FILE"),Ko(d)).then(b)}).catch(S=>{if(!S||!S.error||!S.status)return b(!1);t("DID_THROW_ITEM_INVALID",{id:p,error:S.error,status:S.status})})}),d.on("process-start",()=>{t("DID_START_ITEM_PROCESSING",{id:p})}),d.on("process-progress",b=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:b})}),d.on("process-error",b=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:b,status:{main:sp(n.options.labelFileProcessingError)(b),sub:n.options.labelTapToRetry}})}),d.on("process-revert-error",b=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:b,status:{main:sp(n.options.labelFileProcessingRevertError)(b),sub:n.options.labelTapToRetry}})}),d.on("process-complete",b=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:b}),t("DID_DEFINE_VALUE",{id:p,value:b})}),d.on("process-abort",()=>{t("DID_ABORT_ITEM_PROCESSING",{id:p})}),d.on("process-revert",()=>{t("DID_REVERT_ITEM_PROCESSING",{id:p}),t("DID_DEFINE_VALUE",{id:p,value:null})}),t("DID_ADD_ITEM",{id:p,index:i,interactionMethod:o}),cm(t,n);const{url:h,load:f,restore:m,fetch:$}=n.options.server||{};d.load(r,n5(c===lo.INPUT?Wo(r)&&u5(r)&&$?lm(h,$):_$:c===lo.LIMBO?lm(h,m):lm(h,f)),(b,S,v)=>{Qa("LOAD_FILE",b,{query:e}).then(S).catch(v)})},REQUEST_PREPARE_OUTPUT:({item:r,success:i,failure:o=()=>{}})=>{const a={error:Ci("error",0,"Item not found"),file:null};if(r.archived)return o(a);Qa("PREPARE_OUTPUT",r.file,{query:e,item:r}).then(s=>{Qa("COMPLETE_PREPARE_OUTPUT",s,{query:e,item:r}).then(l=>{if(r.archived)return o(a);i(l)})})},COMPLETE_LOAD_ITEM:({item:r,data:i})=>{const{success:o,source:a}=i,s=e("GET_ITEM_INSERT_LOCATION");if(ic(s)&&a&&dm(n,s),t("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===lo.INPUT?null:a}),o(Ko(r)),r.origin===lo.LOCAL){t("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===lo.LIMBO){t("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:a}),t("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||a});return}e("IS_ASYNC")&&n.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:_a(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:_a(n,(r,i,o)=>{t("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:a=>{t("DID_PREPARE_OUTPUT",{id:r.id,file:a}),i({file:r,output:a})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:_a(n,(r,i,o)=>{if(!(r.status===qn.IDLE||r.status===qn.PROCESSING_ERROR)){const s=()=>t("REQUEST_ITEM_PROCESSING",{query:r,success:i,failure:o}),l=()=>document.hidden?s():setTimeout(s,32);r.status===qn.PROCESSING_COMPLETE||r.status===qn.PROCESSING_REVERT_ERROR?r.revert(Rd(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(l).catch(()=>{}):r.status===qn.PROCESSING&&r.abortProcessing().then(l);return}r.status!==qn.PROCESSING_QUEUED&&(r.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),t("PROCESS_ITEM",{query:r,success:i,failure:o},!0))}),PROCESS_ITEM:_a(n,(r,i,o)=>{const a=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",qn.PROCESSING).length===a){n.processingQueue.push({id:r.id,success:i,failure:o});return}if(r.status===qn.PROCESSING)return;const l=()=>{const d=n.processingQueue.shift();if(!d)return;const{id:u,success:p,failure:h}=d,f=oc(n.items,u);if(!f||f.archived){l();return}t("PROCESS_ITEM",{query:u,success:p,failure:h},!0)};r.onOnce("process-complete",()=>{i(Ko(r)),l();const d=n.options.server;if(n.options.instantUpload&&r.origin===lo.LOCAL&&ic(d.remove)){const h=()=>{};r.origin=lo.LIMBO,n.options.server.remove(r.source,h,h)}e("GET_ITEMS_BY_STATUS",qn.PROCESSING_COMPLETE).length===n.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",d=>{o({error:d,file:Ko(r)}),l()});const c=n.options;r.process(s5(o5(c.server.url,c.server.process,c.name,{chunkTransferId:r.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(d,u,p)=>{Qa("PREPARE_OUTPUT",d,{query:e,item:r}).then(h=>{t("DID_PREPARE_OUTPUT",{id:r.id,file:h}),u(h)}).catch(p)})}),RETRY_ITEM_PROCESSING:_a(n,r=>{t("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:_a(n,r=>{R$(e("GET_BEFORE_REMOVE_FILE"),Ko(r)).then(i=>{i&&t("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:_a(n,r=>{r.release()}),REMOVE_ITEM:_a(n,(r,i,o,a)=>{const s=()=>{const c=r.id;I$(n.items,c).archive(),t("DID_REMOVE_ITEM",{error:null,id:c,item:r}),cm(t,n),i(Ko(r))},l=n.options.server;r.origin===lo.LOCAL&&l&&ic(l.remove)&&a.remove!==!1?(t("DID_START_ITEM_REMOVE",{id:r.id}),l.remove(r.source,()=>s(),c=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:Ci("error",0,c,null),status:{main:sp(n.options.labelFileRemoveError)(c),sub:n.options.labelTapToRetry}})})):((a.revert&&r.origin!==lo.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(Rd(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")),s())}),ABORT_ITEM_LOAD:_a(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:_a(n,r=>{if(r.serverId){t("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&t("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:_a(n,r=>{if(!n.options.instantUpload){t("REVERT_ITEM_PROCESSING",{query:r});return}const i=s=>{s&&t("REVERT_ITEM_PROCESSING",{query:r})},o=e("GET_BEFORE_REMOVE_FILE");if(!o)return i(!0);const a=o(Ko(r));if(a==null)return i(!0);if(typeof a=="boolean")return i(a);typeof a.then=="function"&&a.then(i)}),REVERT_ITEM_PROCESSING:_a(n,r=>{r.revert(Rd(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||p5(r))&&t("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const i=Object.keys(r),o=m5.filter(s=>i.includes(s));[...o,...Object.keys(r).filter(s=>!o.includes(s))].forEach(s=>{t(`SET_${vh(s,"_").toUpperCase()}`,{value:r[s]})})}}),m5=["server"],K0=t=>t,Hs=t=>document.createElement(t),Ri=(t,e)=>{let n=t.childNodes[0];n?e!==n.nodeValue&&(n.nodeValue=e):(n=document.createTextNode(e),t.appendChild(n))},M$=(t,e,n,r)=>{const i=(r%360-90)*Math.PI/180;return{x:t+n*Math.cos(i),y:e+n*Math.sin(i)}},f5=(t,e,n,r,i,o)=>{const a=M$(t,e,n,i),s=M$(t,e,n,r);return["M",a.x,a.y,"A",n,n,0,o,0,s.x,s.y].join(" ")},g5=(t,e,n,r,i)=>{let o=1;return i>r&&i-r<=.5&&(o=0),r>i&&r-i>=.5&&(o=0),f5(t,e,n,Math.min(.9999,r)*360,Math.min(.9999,i)*360,o)},$5=({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const n=Wp("svg");t.ref.path=Wp("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(t.ref.path),t.ref.svg=n,t.appendChild(n)},y5=({root:t,props:e})=>{if(e.opacity===0)return;e.align&&(t.element.dataset.align=e.align);const n=parseInt(Ni(t.ref.path,"stroke-width"),10),r=t.rect.element.width*.5;let i=0,o=0;e.spin?(i=0,o=.5):(i=0,o=e.progress);const a=g5(r,r,r-n,i,o);Ni(t.ref.path,"d",a),Ni(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},k$=Gi({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:$5,write:y5,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),b5=({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},v5=({root:t,props:e})=>{const{isDisabled:n}=e,r=t.query("GET_DISABLED")||e.opacity===0;r&&!n?(e.isDisabled=!0,Ni(t.element,"disabled","disabled")):!r&&n&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))},mx=Gi({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:b5,write:v5}),fx=(t,e=".",n=1e3,r={})=>{const{labelBytes:i="bytes",labelKilobytes:o="KB",labelMegabytes:a="MB",labelGigabytes:s="GB"}=r;t=Math.round(Math.abs(t));const l=n,c=n*n,d=n*n*n;return t<l?`${t} ${i}`:t<c?`${Math.floor(t/l)} ${o}`:t<d?`${P$(t/c,1,e)} ${a}`:`${P$(t/d,2,e)} ${s}`},P$=(t,e,n)=>t.toFixed(e).split(".").filter(r=>r!=="0").join(n),x5=({root:t,props:e})=>{const n=Hs("span");n.className="filepond--file-info-main",Ni(n,"aria-hidden","true"),t.appendChild(n),t.ref.fileName=n;const r=Hs("span");r.className="filepond--file-info-sub",t.appendChild(r),t.ref.fileSize=r,Ri(r,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Ri(n,K0(t.query("GET_ITEM_NAME",e.id)))},r0=({root:t,props:e})=>{Ri(t.ref.fileSize,fx(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),Ri(t.ref.fileName,K0(t.query("GET_ITEM_NAME",e.id)))},A$=({root:t,props:e})=>{if(od(t.query("GET_ITEM_SIZE",e.id))){r0({root:t,props:e});return}Ri(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},S5=Gi({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Ho({DID_LOAD_ITEM:r0,DID_UPDATE_ITEM_META:r0,DID_THROW_ITEM_LOAD_ERROR:A$,DID_THROW_ITEM_INVALID:A$}),didCreateView:t=>{fc("CREATE_VIEW",{...t,view:t})},create:x5,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),gx=t=>Math.round(t*100),w5=({root:t})=>{const e=Hs("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const n=Hs("span");n.className="filepond--file-status-sub",t.appendChild(n),t.ref.sub=n,$x({root:t,action:{progress:null}})},$x=({root:t,action:e})=>{const n=e.progress===null?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${gx(e.progress)}%`;Ri(t.ref.main,n),Ri(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},T5=({root:t,action:e})=>{const n=e.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${gx(e.progress)}%`;Ri(t.ref.main,n),Ri(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},E5=({root:t})=>{Ri(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),Ri(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},I5=({root:t})=>{Ri(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Ri(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},_5=({root:t})=>{Ri(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Ri(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},L$=({root:t})=>{Ri(t.ref.main,""),Ri(t.ref.sub,"")},Md=({root:t,action:e})=>{Ri(t.ref.main,e.status.main),Ri(t.ref.sub,e.status.sub)},C5=Gi({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Ho({DID_LOAD_ITEM:L$,DID_REVERT_ITEM_PROCESSING:L$,DID_REQUEST_ITEM_PROCESSING:E5,DID_ABORT_ITEM_PROCESSING:I5,DID_COMPLETE_ITEM_PROCESSING:_5,DID_UPDATE_ITEM_PROCESS_PROGRESS:T5,DID_UPDATE_ITEM_LOAD_PROGRESS:$x,DID_THROW_ITEM_LOAD_ERROR:Md,DID_THROW_ITEM_INVALID:Md,DID_THROW_ITEM_PROCESSING_ERROR:Md,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Md,DID_THROW_ITEM_REMOVE_ERROR:Md}),didCreateView:t=>{fc("CREATE_VIEW",{...t,view:t})},create:w5,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),i0={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},o0=[];xi(i0,t=>{o0.push(t)});const ua=t=>{if(a0(t)==="right")return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},R5=t=>t.ref.buttonAbortItemLoad.rect.element.width,lp=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),M5=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),k5=t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION"),P5=t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),a0=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),A5={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:k5},processProgressIndicator:{opacity:0,align:P5},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},O$={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ua},status:{translateX:ua}},um={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},zc={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:ua},status:{translateX:ua,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:ua},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:a0},info:{translateX:ua},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:a0},buttonRemoveItem:{opacity:1},info:{translateX:ua},status:{opacity:1,translateX:ua}},DID_LOAD_ITEM:O$,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:ua},status:{translateX:ua}},DID_START_ITEM_PROCESSING:um,DID_REQUEST_ITEM_PROCESSING:um,DID_UPDATE_ITEM_PROCESS_PROGRESS:um,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:ua}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ua},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:O$},L5=Gi({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),O5=({root:t,props:e})=>{const n=Object.keys(i0).reduce((f,m)=>(f[m]={...i0[m]},f),{}),{id:r}=e,i=t.query("GET_ALLOW_REVERT"),o=t.query("GET_ALLOW_REMOVE"),a=t.query("GET_ALLOW_PROCESS"),s=t.query("GET_INSTANT_UPLOAD"),l=t.query("IS_ASYNC"),c=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let d;l?a&&!i?d=f=>!/RevertItemProcessing/.test(f):!a&&i?d=f=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(f):!a&&!i&&(d=f=>!/Process/.test(f)):d=f=>!/Process/.test(f);const u=d?o0.filter(d):o0.concat();if(s&&i&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),l&&!i){const f=zc.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=M5,f.info.translateY=lp,f.status.translateY=lp,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(l&&!a&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(f=>{zc[f].status.translateY=lp}),zc.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=R5),c&&i){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const f=zc.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=ua,f.status.translateY=lp,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(n.RemoveItem.disabled=!0),xi(n,(f,m)=>{const $=t.createChildView(mx,{label:t.query(m.label),icon:t.query(m.icon),opacity:0});u.includes(f)&&t.appendChildView($),m.disabled&&($.element.setAttribute("disabled","disabled"),$.element.setAttribute("hidden","hidden")),$.element.dataset.align=t.query(`GET_STYLE_${m.align}`),$.element.classList.add(m.className),$.on("click",b=>{b.stopPropagation(),!m.disabled&&t.dispatch(m.action,{query:r})}),t.ref[`button${f}`]=$}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(L5)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(S5,{id:r})),t.ref.status=t.appendChildView(t.createChildView(C5,{id:r}));const p=t.appendChildView(t.createChildView(k$,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));p.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=p;const h=t.appendChildView(t.createChildView(k$,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));h.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=h,t.ref.activeStyles=[]},D5=({root:t,actions:e,props:n})=>{F5({root:t,actions:e,props:n});let r=e.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>zc[i.type]);if(r){t.ref.activeStyles=[];const i=zc[r.type];xi(A5,(o,a)=>{const s=t.ref[o];xi(a,(l,c)=>{const d=i[o]&&typeof i[o][l]<"u"?i[o][l]:c;t.ref.activeStyles.push({control:s,key:l,value:d})})})}t.ref.activeStyles.forEach(({control:i,key:o,value:a})=>{i[o]=typeof a=="function"?a(t):a})},F5=Ho({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),B5=Gi({create:O5,write:D5,didCreateView:t=>{fc("CREATE_VIEW",{...t,view:t})},name:"file"}),z5=({root:t,props:e})=>{t.ref.fileName=Hs("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(B5,{id:e.id})),t.ref.data=!1},N5=({root:t,props:e})=>{Ri(t.ref.fileName,K0(t.query("GET_ITEM_NAME",e.id)))},V5=Gi({create:z5,ignoreRect:!0,write:Ho({DID_LOAD_ITEM:N5}),didCreateView:t=>{fc("CREATE_VIEW",{...t,view:t})},tag:"fieldset",name:"file-wrapper"}),D$={type:"spring",damping:.6,mass:7},U5=({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:D$},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:D$},styles:["translateY"]}}].forEach(n=>{G5(t,n,e.name)}),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},G5=(t,e,n)=>{const r=Gi({name:`panel-${e.name} filepond--${n}`,mixins:e.mixins,ignoreRectUpdate:!0}),i=t.createChildView(r,e.props);t.ref[e.name]=t.appendChildView(i)},W5=({root:t,props:e})=>{if((t.ref.scalable===null||e.scalable!==t.ref.scalable)&&(t.ref.scalable=Jv(e.scalable)?e.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const n=t.ref.top.rect.element,r=t.ref.bottom.rect.element,i=Math.max(n.height+r.height,e.height);t.ref.center.translateY=n.height,t.ref.center.scaleY=(i-n.height-r.height)/100,t.ref.bottom.translateY=i-r.height},yx=Gi({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:W5,create:U5,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),H5=t=>{const e=t.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>e.indexOf(r.id)}},F$={type:"spring",stiffness:.75,damping:.45,mass:10},B$="spring",z$={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},j5=({root:t,props:e})=>{if(t.ref.handleClick=r=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(V5,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(yx,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let i=!1;const o={x:r.pageX,y:r.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:r.offsetX,y:r.offsetY};const a=H5(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:a});const s=c=>{if(!c.isPrimary)return;c.stopPropagation(),c.preventDefault(),e.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!i&&(i=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:a})},l=c=>{c.isPrimary&&(document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",l),e.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:a}),i&&setTimeout(()=>t.element.addEventListener("click",t.ref.handleClick),0))};document.addEventListener("pointermove",s),document.addEventListener("pointerup",l)};t.element.addEventListener("pointerdown",n)},q5=Ho({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),Y5=Ho({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},({root:t,actions:e,props:n,shouldOptimize:r})=>{t.element.dataset.dragState==="drop"&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let i=e.concat().filter(a=>/^DID_/.test(a.type)).reverse().find(a=>z$[a.type]);i&&i.type!==n.currentState&&(n.currentState=i.type,t.element.dataset.filepondItemState=z$[n.currentState]||"");const o=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");o?r||(t.height=t.rect.element.width*o):(q5({root:t,actions:e,props:n}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),r&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),X5=Gi({create:j5,write:Y5,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:B$,scaleY:B$,translateX:F$,translateY:F$,opacity:{type:"tween",duration:150}}}});var Q0=(t,e)=>Math.max(1,Math.floor((t+1)/e));const J0=(t,e,n)=>{if(!n)return;const r=t.rect.element.width,i=e.length;let o=null;if(i===0||n.top<e[0].rect.element.top)return-1;const s=e[0].rect.element,l=s.marginLeft+s.marginRight,c=s.width+l,d=Q0(r,c);if(d===1){for(let h=0;h<i;h++){const f=e[h],m=f.rect.outer.top+f.rect.element.height*.5;if(n.top<m)return h}return i}const u=s.marginTop+s.marginBottom,p=s.height+u;for(let h=0;h<i;h++){const f=h%d,m=Math.floor(h/d),$=f*c,b=m*p,S=b-s.marginTop,v=$+c,T=b+p+s.marginBottom;if(n.top<T&&n.top>S){if(n.left<v)return h;h!==i-1?o=h:o=null}}return o!==null?o:i},cp={height:0,width:0,get getHeight(){return this.height},set setHeight(t){(this.height===0||t===0)&&(this.height=t)},get getWidth(){return this.width},set setWidth(t){(this.width===0||t===0)&&(this.width=t)},setDimensions:function(t,e){(this.height===0||t===0)&&(this.height=t),(this.width===0||e===0)&&(this.width=e)}},Z5=({root:t})=>{Ni(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},K5=({root:t,action:e})=>{const{id:n,index:r,interactionMethod:i}=e;t.ref.addIndex=r;const o=Date.now();let a=o,s=1;if(i!==Pa.NONE){s=0;const l=t.query("GET_ITEM_INSERT_INTERVAL"),c=o-t.ref.lastItemSpanwDate;a=c<l?o+(l-c):o}t.ref.lastItemSpanwDate=a,t.appendChildView(t.createChildView(X5,{spawnDate:a,id:n,opacity:s,interactionMethod:i}),r)},N$=(t,e,n,r=0,i=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=n,Date.now()>t.spawnDate&&(t.opacity===0&&Q5(t,e,n,r,i),t.scaleX=1,t.scaleY=1,t.opacity=1))},Q5=(t,e,n,r,i)=>{t.interactionMethod===Pa.NONE?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=n):t.interactionMethod===Pa.DROP?(t.translateX=null,t.translateX=e-r*20,t.translateY=null,t.translateY=n-i*10,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===Pa.BROWSE?(t.translateY=null,t.translateY=n-30):t.interactionMethod===Pa.API&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},J5=({root:t,action:e})=>{const{id:n}=e,r=t.childViews.find(i=>i.id===n);r&&(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},pm=t=>t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5,t3=t=>t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5,e3=({root:t,action:e})=>{const{id:n,dragState:r}=e,i=t.query("GET_ITEM",{id:n}),o=t.childViews.find($=>$.id===n),a=t.childViews.length,s=r.getItemIndex(i);if(!o)return;const l={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},c=pm(o),d=t3(o);let u=Math.floor(t.rect.outer.width/d);u>a&&(u=a);const p=Math.floor(a/u+1);cp.setHeight=c*p,cp.setWidth=d*u;var h={y:Math.floor(l.y/c),x:Math.floor(l.x/d),getGridIndex:function(){return l.y>cp.getHeight||l.y<0||l.x>cp.getWidth||l.x<0?s:this.y*u+this.x},getColIndex:function(){const b=t.query("GET_ACTIVE_ITEMS"),S=t.childViews.filter(_=>_.rect.element.height),v=b.map(_=>S.find(y=>y.id===_.id)),T=v.findIndex(_=>_===o),C=pm(o),R=v.length;let A=R,E=0,M=0,P=0;for(let _=0;_<R;_++)if(E=pm(v[_]),P=M,M=P+E,l.y<M){if(T>_){if(l.y<P+C){A=_;break}continue}A=_;break}return A}};const f=u>1?h.getGridIndex():h.getColIndex();t.dispatch("MOVE_ITEM",{query:o,index:f});const m=r.getIndex();if(m===void 0||m!==f){if(r.setIndex(f),m===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:s,target:f})}},n3=Ho({DID_ADD_ITEM:K5,DID_REMOVE_ITEM:J5,DID_DRAG_ITEM:e3}),r3=({root:t,props:e,actions:n,shouldOptimize:r})=>{n3({root:t,props:e,actions:n});const{dragCoordinates:i}=e,o=t.rect.element.width,a=t.childViews.filter(v=>v.rect.element.height),s=t.query("GET_ACTIVE_ITEMS").map(v=>a.find(T=>T.id===v.id)).filter(v=>v),l=i?J0(t,s,i):null,c=t.ref.addIndex||null;t.ref.addIndex=null;let d=0,u=0,p=0;if(s.length===0)return;const h=s[0].rect.element,f=h.marginTop+h.marginBottom,m=h.marginLeft+h.marginRight,$=h.width+m,b=h.height+f,S=Q0(o,$);if(S===1){let v=0,T=0;s.forEach((C,R)=>{if(l){let M=R-l;M===-2?T=-f*.25:M===-1?T=-f*.75:M===0?T=f*.75:M===1?T=f*.25:T=0}r&&(C.translateX=null,C.translateY=null),C.markedForRemoval||N$(C,0,v+T);let E=(C.rect.element.height+f)*(C.markedForRemoval?C.opacity:1);v+=E})}else{let v=0,T=0;s.forEach((C,R)=>{R===l&&(d=1),R===c&&(p+=1),C.markedForRemoval&&C.opacity<.5&&(u-=1);const A=R+p+d+u,E=A%S,M=Math.floor(A/S),P=E*$,_=M*b,y=Math.sign(P-v),z=Math.sign(_-T);v=P,T=_,!C.markedForRemoval&&(r&&(C.translateX=null,C.translateY=null),N$(C,P,_,y,z))})}},i3=(t,e)=>e.filter(n=>n.data&&n.data.id?t.id===n.data.id:!0),o3=Gi({create:Z5,write:r3,tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter(e=>e.markedForRemoval&&e.opacity===0&&e.resting).forEach(e=>{e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:i3,mixins:{apis:["dragCoordinates"]}}),a3=({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(o3)),e.dragCoordinates=null,e.overflowing=!1},s3=({root:t,props:e,action:n})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:n.position.scopeLeft-t.ref.list.rect.element.left,top:n.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},l3=({props:t})=>{t.dragCoordinates=null},c3=Ho({DID_DRAG:s3,DID_END_DRAG:l3}),d3=({root:t,props:e,actions:n})=>{if(c3({root:t,props:e,actions:n}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const r=Math.round(e.overflow);r!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=r)}},u3=Gi({create:a3,write:d3,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),ns=(t,e,n,r="")=>{n?Ni(t,e,r):t.removeAttribute(e)},p3=t=>{if(!(!t||t.value==="")){try{t.value=""}catch{}if(t.value){const e=Hs("form"),n=t.parentNode,r=t.nextSibling;e.appendChild(t),e.reset(),r?n.insertBefore(t,r):n.appendChild(t)}}},h3=({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,Ni(t.element,"name",t.query("GET_NAME")),Ni(t.element,"aria-controls",`filepond--assistant-${e.id}`),Ni(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),bx({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),vx({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),xx({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),s0({root:t}),Sx({root:t,action:{value:t.query("GET_REQUIRED")}}),wx({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=n=>{if(!t.element.value)return;const r=Array.from(t.element.files).map(i=>(i._relativePath=i.webkitRelativePath,i));setTimeout(()=>{e.onload(r),p3(t.element)},250)},t.element.addEventListener("change",t.ref.handleChange)},bx=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&ns(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},vx=({root:t,action:e})=>{ns(t.element,"multiple",e.value)},xx=({root:t,action:e})=>{ns(t.element,"webkitdirectory",e.value)},s0=({root:t})=>{const e=t.query("GET_DISABLED"),n=t.query("GET_ALLOW_BROWSE"),r=e||!n;ns(t.element,"disabled",r)},Sx=({root:t,action:e})=>{e.value?t.query("GET_TOTAL_ITEMS")===0&&ns(t.element,"required",!0):ns(t.element,"required",!1)},wx=({root:t,action:e})=>{ns(t.element,"capture",!!e.value,e.value===!0?"":e.value)},V$=({root:t})=>{const{element:e}=t;t.query("GET_TOTAL_ITEMS")>0?(ns(e,"required",!1),ns(e,"name",!1)):(ns(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&ns(e,"required",!0))},m3=({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},f3=Gi({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:h3,destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:Ho({DID_LOAD_ITEM:V$,DID_REMOVE_ITEM:V$,DID_THROW_ITEM_INVALID:m3,DID_SET_DISABLED:s0,DID_SET_ALLOW_BROWSE:s0,DID_SET_ALLOW_DIRECTORIES_ONLY:xx,DID_SET_ALLOW_MULTIPLE:vx,DID_SET_ACCEPTED_FILE_TYPES:bx,DID_SET_CAPTURE_METHOD:wx,DID_SET_REQUIRED:Sx})}),U$={ENTER:13,SPACE:32},g3=({root:t,props:e})=>{const n=Hs("label");Ni(n,"for",`filepond--browser-${e.id}`),Ni(n,"id",`filepond--drop-label-${e.id}`),Ni(n,"aria-hidden","true"),t.ref.handleKeyDown=r=>{(r.keyCode===U$.ENTER||r.keyCode===U$.SPACE)&&(r.preventDefault(),t.ref.label.click())},t.ref.handleClick=r=>{r.target===n||n.contains(r.target)||t.ref.label.click()},n.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),Tx(n,e.caption),t.appendChild(n),t.ref.label=n},Tx=(t,e)=>{t.innerHTML=e;const n=t.querySelector(".filepond--label-action");return n&&Ni(n,"tabindex","0"),e},$3=Gi({name:"drop-label",ignoreRect:!0,create:g3,destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:Ho({DID_SET_LABEL_IDLE:({root:t,action:e})=>{Tx(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),y3=Gi({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),b3=({root:t})=>{const e=t.rect.element.width*.5,n=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(y3,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:n}))},v3=({root:t,action:e})=>{if(!t.ref.blob){b3({root:t});return}t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},x3=({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)},S3=({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},w3=({root:t,props:e,actions:n})=>{T3({root:t,props:e,actions:n});const{blob:r}=t.ref;n.length===0&&r&&r.opacity===0&&(t.removeChildView(r),t.ref.blob=null)},T3=Ho({DID_DRAG:v3,DID_DROP:S3,DID_END_DRAG:x3}),E3=Gi({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:w3}),Ex=(t,e)=>{try{const n=new DataTransfer;e.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),t.files=n.files}catch{return!1}return!0},I3=({root:t})=>t.ref.fields={},wh=(t,e)=>t.ref.fields[e],tf=t=>{t.query("GET_ACTIVE_ITEMS").forEach(e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])})},G$=({root:t})=>tf(t),_3=({root:t,action:e})=>{const i=!(t.query("GET_ITEM",e.id).origin===lo.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),o=Hs("input");o.type=i?"file":"hidden",o.name=t.query("GET_NAME"),o.disabled=t.query("GET_DISABLED"),t.ref.fields[e.id]=o,tf(t)},C3=({root:t,action:e})=>{const n=wh(t,e.id);if(!n||(e.serverFileReference!==null&&(n.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=t.query("GET_ITEM",e.id);Ex(n,[r.file])},R3=({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=wh(t,e.id);n&&Ex(n,[e.file])},0)},M3=({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},k3=({root:t,action:e})=>{const n=wh(t,e.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete t.ref.fields[e.id])},P3=({root:t,action:e})=>{const n=wh(t,e.id);n&&(e.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=e.value),tf(t))},A3=Ho({DID_SET_DISABLED:M3,DID_ADD_ITEM:_3,DID_LOAD_ITEM:C3,DID_REMOVE_ITEM:k3,DID_DEFINE_VALUE:P3,DID_PREPARE_OUTPUT:R3,DID_REORDER_ITEMS:G$,DID_SORT_ITEMS:G$}),L3=Gi({tag:"fieldset",name:"data",create:I3,write:A3,ignoreRect:!0}),O3=t=>"getRootNode"in t?t.getRootNode():document,D3=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],F3=["css","csv","html","txt"],B3={zip:"zip|compressed",epub:"application/epub+zip"},Ix=(t="")=>(t=t.toLowerCase(),D3.includes(t)?"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t):F3.includes(t)?"text/"+t:B3[t]||""),ef=t=>new Promise((e,n)=>{const r=j3(t);if(r.length&&!z3(t))return e(r);N3(t).then(e)}),z3=t=>t.files?t.files.length>0:!1,N3=t=>new Promise((e,n)=>{const r=(t.items?Array.from(t.items):[]).filter(i=>V3(i)).map(i=>U3(i));if(!r.length){e(t.files?Array.from(t.files):[]);return}Promise.all(r).then(i=>{const o=[];i.forEach(a=>{o.push.apply(o,a)}),e(o.filter(a=>a).map(a=>(a._relativePath||(a._relativePath=a.webkitRelativePath),a)))}).catch(console.error)}),V3=t=>{if(_x(t)){const e=nf(t);if(e)return e.isFile||e.isDirectory}return t.kind==="file"},U3=t=>new Promise((e,n)=>{if(H3(t)){G3(nf(t)).then(e).catch(n);return}e([t.getAsFile()])}),G3=t=>new Promise((e,n)=>{const r=[];let i=0,o=0;const a=()=>{o===0&&i===0&&e(r)},s=l=>{i++;const c=l.createReader(),d=()=>{c.readEntries(u=>{if(u.length===0){i--,a();return}u.forEach(p=>{p.isDirectory?s(p):(o++,p.file(h=>{const f=W3(h);p.fullPath&&(f._relativePath=p.fullPath),r.push(f),o--,a()}))}),d()},n)};d()};s(t)}),W3=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,n=t.name,r=Ix(Sh(t.name));return r.length&&(t=t.slice(0,t.size,r),t.name=n,t.lastModifiedDate=e),t},H3=t=>_x(t)&&(nf(t)||{}).isDirectory,_x=t=>"webkitGetAsEntry"in t,nf=t=>t.webkitGetAsEntry(),j3=t=>{let e=[];try{if(e=Y3(t),e.length)return e;e=q3(t)}catch{}return e},q3=t=>{let e=t.getData("url");return typeof e=="string"&&e.length?[e]:[]},Y3=t=>{let e=t.getData("text/html");if(typeof e=="string"&&e.length){const n=e.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},jp=[],lc=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),X3=(t,e,n)=>{const r=Z3(e),i={element:t,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return i.destroy=r.addListener(i),i},Z3=t=>{const e=jp.find(r=>r.element===t);if(e)return e;const n=K3(t);return jp.push(n),n},K3=t=>{const e=[],n={dragenter:J3,dragover:tI,dragleave:nI,drop:eI},r={};xi(n,(o,a)=>{r[o]=a(t,e),t.addEventListener(o,r[o],!1)});const i={element:t,addListener:o=>(e.push(o),()=>{e.splice(e.indexOf(o),1),e.length===0&&(jp.splice(jp.indexOf(i),1),xi(n,a=>{t.removeEventListener(a,r[a],!1)}))})};return i},Q3=(t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)),rf=(t,e)=>{const n=O3(e),r=Q3(n,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return r===e||e.contains(r)};let Cx=null;const dp=(t,e)=>{try{t.dropEffect=e}catch{}},J3=(t,e)=>n=>{n.preventDefault(),Cx=n.target,e.forEach(r=>{const{element:i,onenter:o}=r;rf(n,i)&&(r.state="enter",o(lc(n)))})},tI=(t,e)=>n=>{n.preventDefault();const r=n.dataTransfer;ef(r).then(i=>{let o=!1;e.some(a=>{const{filterElement:s,element:l,onenter:c,onexit:d,ondrag:u,allowdrop:p}=a;dp(r,"copy");const h=p(i);if(!h){dp(r,"none");return}if(rf(n,l)){if(o=!0,a.state===null){a.state="enter",c(lc(n));return}if(a.state="over",s&&!h){dp(r,"none");return}u(lc(n))}else s&&!o&&dp(r,"none"),a.state&&(a.state=null,d(lc(n)))})})},eI=(t,e)=>n=>{n.preventDefault();const r=n.dataTransfer;ef(r).then(i=>{e.forEach(o=>{const{filterElement:a,element:s,ondrop:l,onexit:c,allowdrop:d}=o;if(o.state=null,!(a&&!rf(n,s))){if(!d(i))return c(lc(n));l(lc(n),i)}})})},nI=(t,e)=>n=>{Cx===n.target&&e.forEach(r=>{const{onexit:i}=r;r.state=null,i(lc(n))})},rI=(t,e,n)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:i,filterItems:o=d=>d}=n,a=X3(t,r?document.documentElement:t,i);let s="",l="";a.allowdrop=d=>e(o(d)),a.ondrop=(d,u)=>{const p=o(u);if(!e(p)){c.ondragend(d);return}l="drag-drop",c.onload(p,d)},a.ondrag=d=>{c.ondrag(d)},a.onenter=d=>{l="drag-over",c.ondragstart(d)},a.onexit=d=>{l="drag-exit",c.ondragend(d)};const c={updateHopperState:()=>{s!==l&&(t.dataset.hopperState=l,s=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{a.destroy()}};return c};let l0=!1;const Gc=[],Rx=t=>{const e=document.activeElement;if(e&&/textarea|input/i.test(e.nodeName)){let n=!1,r=e;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}ef(t.clipboardData).then(n=>{n.length&&Gc.forEach(r=>r(n))})},iI=t=>{Gc.includes(t)||(Gc.push(t),!l0&&(l0=!0,document.addEventListener("paste",Rx)))},oI=t=>{Y0(Gc,Gc.indexOf(t)),Gc.length===0&&(document.removeEventListener("paste",Rx),l0=!1)},aI=()=>{const t=n=>{e.onload(n)},e={destroy:()=>{oI(t)},onload:()=>{}};return iI(t),e},sI=({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,Ni(t.element,"role","status"),Ni(t.element,"aria-live","polite"),Ni(t.element,"aria-relevant","additions")};let W$=null,H$=null;const hm=[],Th=(t,e)=>{t.element.textContent=e},lI=t=>{t.element.textContent=""},Mx=(t,e,n)=>{const r=t.query("GET_TOTAL_ITEMS");Th(t,`${n} ${e}, ${r} ${r===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(H$),H$=setTimeout(()=>{lI(t)},1500)},kx=t=>t.element.parentNode.contains(document.activeElement),cI=({root:t,action:e})=>{if(!kx(t))return;t.element.textContent="";const n=t.query("GET_ITEM",e.id);hm.push(n.filename),clearTimeout(W$),W$=setTimeout(()=>{Mx(t,hm.join(", "),t.query("GET_LABEL_FILE_ADDED")),hm.length=0},750)},dI=({root:t,action:e})=>{if(!kx(t))return;const n=e.item;Mx(t,n.filename,t.query("GET_LABEL_FILE_REMOVED"))},uI=({root:t,action:e})=>{const r=t.query("GET_ITEM",e.id).filename,i=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Th(t,`${r} ${i}`)},j$=({root:t,action:e})=>{const r=t.query("GET_ITEM",e.id).filename,i=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");Th(t,`${r} ${i}`)},up=({root:t,action:e})=>{const r=t.query("GET_ITEM",e.id).filename;Th(t,`${e.status.main} ${r} ${e.status.sub}`)},pI=Gi({create:sI,ignoreRect:!0,ignoreRectUpdate:!0,write:Ho({DID_LOAD_ITEM:cI,DID_REMOVE_ITEM:dI,DID_COMPLETE_ITEM_PROCESSING:uI,DID_ABORT_ITEM_PROCESSING:j$,DID_REVERT_ITEM_PROCESSING:j$,DID_THROW_ITEM_REMOVE_ERROR:up,DID_THROW_ITEM_LOAD_ERROR:up,DID_THROW_ITEM_INVALID:up,DID_THROW_ITEM_PROCESSING_ERROR:up}),tag:"span",name:"assistant"}),Px=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),n=>n.charAt(1).toUpperCase()),Ax=(t,e=16,n=!0)=>{let r=Date.now(),i=null;return(...o)=>{clearTimeout(i);const a=Date.now()-r,s=()=>{r=Date.now(),t(...o)};a<e?n||(i=setTimeout(s,e-a)):s()}},hI=1e6,qp=t=>t.preventDefault(),mI=({root:t,props:e})=>{const n=t.query("GET_ID");n&&(t.element.id=n);const r=t.query("GET_CLASS_NAME");r&&r.split(" ").filter(l=>l.length).forEach(l=>{t.element.classList.add(l)}),t.ref.label=t.appendChildView(t.createChildView($3,{...e,translateY:null,caption:t.query("GET_LABEL_IDLE")})),t.ref.list=t.appendChildView(t.createChildView(u3,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(yx,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(pI,{...e})),t.ref.data=t.appendChildView(t.createChildView(L3,{...e})),t.ref.measure=Hs("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(l=>!Ws(l.value)).map(({name:l,value:c})=>{t.element.dataset[l]=c}),t.ref.widthPrevious=null,t.ref.widthUpdated=Ax(()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&o&&!i&&(t.element.addEventListener("touchmove",qp,{passive:!1}),t.element.addEventListener("gesturestart",qp));const a=t.query("GET_CREDITS");if(a.length===2){const l=document.createElement("a");l.className="filepond--credits",l.setAttribute("aria-hidden","true"),l.href=a[0],l.tabindex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=a[1],t.element.appendChild(l),t.ref.credits=l}},fI=({root:t,props:e,actions:n})=>{if(vI({root:t,props:e,actions:n}),n.filter(R=>/^DID_SET_STYLE_/.test(R.type)).filter(R=>!Ws(R.data.value)).map(({type:R,data:A})=>{const E=Px(R.substring(8).toLowerCase(),"_");t.element.dataset[E]=A.value,t.invalidateLayout()}),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let r=t.ref.bounds;r||(r=t.ref.bounds=yI(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:i,label:o,list:a,panel:s}=t.ref;i&&i.updateHopperState();const l=t.query("GET_PANEL_ASPECT_RATIO"),c=t.query("GET_ALLOW_MULTIPLE"),d=t.query("GET_TOTAL_ITEMS"),u=c?t.query("GET_MAX_FILES")||hI:1,p=d===u,h=n.find(R=>R.type==="DID_ADD_ITEM");if(p&&h){const R=h.data.interactionMethod;o.opacity=0,c?o.translateY=-40:R===Pa.API?o.translateX=40:R===Pa.BROWSE?o.translateY=40:o.translateY=30}else p||(o.opacity=1,o.translateX=0,o.translateY=0);const f=gI(t),m=$I(t),$=o.rect.element.height,b=!c||p?0:$,S=p?a.rect.element.marginTop:0,v=d===0?0:a.rect.element.marginBottom,T=b+S+m.visual+v,C=b+S+m.bounds+v;if(a.translateY=Math.max(0,b-a.rect.element.marginTop)-f.top,l){const R=t.rect.element.width,A=R*l;l!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=l,t.ref.updateHistory=[]);const E=t.ref.updateHistory;E.push(R);const M=2;if(E.length>M*2){const _=E.length,y=_-10;let z=0;for(let O=_;O>=y;O--)if(E[O]===E[O-2]&&z++,z>=M)return}s.scalable=!1,s.height=A;const P=A-b-(v-f.bottom)-(p?S:0);m.visual>P?a.overflow=P:a.overflow=null,t.height=A}else if(r.fixedHeight){s.scalable=!1;const R=r.fixedHeight-b-(v-f.bottom)-(p?S:0);m.visual>R?a.overflow=R:a.overflow=null}else if(r.cappedHeight){const R=T>=r.cappedHeight,A=Math.min(r.cappedHeight,T);s.scalable=!0,s.height=R?A:A-f.top-f.bottom;const E=A-b-(v-f.bottom)-(p?S:0);T>r.cappedHeight&&m.visual>E?a.overflow=E:a.overflow=null,t.height=Math.min(r.cappedHeight,C-f.top-f.bottom)}else{const R=d>0?f.top+f.bottom:0;s.scalable=!0,s.height=Math.max($,T-R),t.height=Math.max($,C-R)}t.ref.credits&&s.heightCurrent&&(t.ref.credits.style.transform=`translateY(${s.heightCurrent}px)`)},gI=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},$I=t=>{let e=0,n=0;const r=t.ref.list,i=r.childViews[0],o=i.childViews.filter(S=>S.rect.element.height),a=t.query("GET_ACTIVE_ITEMS").map(S=>o.find(v=>v.id===S.id)).filter(S=>S);if(a.length===0)return{visual:e,bounds:n};const s=i.rect.element.width,l=J0(i,a,r.dragCoordinates),c=a[0].rect.element,d=c.marginTop+c.marginBottom,u=c.marginLeft+c.marginRight,p=c.width+u,h=c.height+d,f=typeof l<"u"&&l>=0?1:0,m=a.find(S=>S.markedForRemoval&&S.opacity<.45)?-1:0,$=a.length+f+m,b=Q0(s,p);return b===1?a.forEach(S=>{const v=S.rect.element.height+d;n+=v,e+=v*S.opacity}):(n=Math.ceil($/b)*h,e=n),{visual:e,bounds:n}},yI=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:e===0?null:e}},of=(t,e)=>{const n=t.query("GET_ALLOW_REPLACE"),r=t.query("GET_ALLOW_MULTIPLE"),i=t.query("GET_TOTAL_ITEMS");let o=t.query("GET_MAX_FILES");const a=e.length;return!r&&a>1?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Ci("warning",0,"Max files")}),!0):(o=r?o:1,!r&&n?!1:od(o)&&i+a>o?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Ci("warning",0,"Max files")}),!0):!1)},bI=(t,e,n)=>{const r=t.childViews[0];return J0(r,e,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},q$=t=>{const e=t.query("GET_ALLOW_DROP"),n=t.query("GET_DISABLED"),r=e&&!n;if(r&&!t.ref.hopper){const i=rI(t.element,o=>{const a=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return t.query("GET_DROP_VALIDATION")?o.every(l=>fc("ALLOW_HOPPER_ITEM",l,{query:t.query}).every(c=>c===!0)&&a(l)):!0},{filterItems:o=>{const a=t.query("GET_IGNORED_FILES");return o.filter(s=>Kc(s)?!a.includes(s.name.toLowerCase()):!0)},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});i.onload=(o,a)=>{const l=t.ref.list.childViews[0].childViews.filter(d=>d.rect.element.height),c=t.query("GET_ACTIVE_ITEMS").map(d=>l.find(u=>u.id===d.id)).filter(d=>d);Qa("ADD_ITEMS",o,{dispatch:t.dispatch}).then(d=>{if(of(t,d))return!1;t.dispatch("ADD_ITEMS",{items:d,index:bI(t.ref.list,c,a),interactionMethod:Pa.DROP})}),t.dispatch("DID_DROP",{position:a}),t.dispatch("DID_END_DRAG",{position:a})},i.ondragstart=o=>{t.dispatch("DID_START_DRAG",{position:o})},i.ondrag=Ax(o=>{t.dispatch("DID_DRAG",{position:o})}),i.ondragend=o=>{t.dispatch("DID_END_DRAG",{position:o})},t.ref.hopper=i,t.ref.drip=t.appendChildView(t.createChildView(E3))}else!r&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},Y$=(t,e)=>{const n=t.query("GET_ALLOW_BROWSE"),r=t.query("GET_DISABLED"),i=n&&!r;i&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(f3,{...e,onload:o=>{Qa("ADD_ITEMS",o,{dispatch:t.dispatch}).then(a=>{if(of(t,a))return!1;t.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:Pa.BROWSE})})}}),0):!i&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},X$=t=>{const e=t.query("GET_ALLOW_PASTE"),n=t.query("GET_DISABLED"),r=e&&!n;r&&!t.ref.paster?(t.ref.paster=aI(),t.ref.paster.onload=i=>{Qa("ADD_ITEMS",i,{dispatch:t.dispatch}).then(o=>{if(of(t,o))return!1;t.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:Pa.PASTE})})}):!r&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},vI=Ho({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{Y$(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{q$(t)},DID_SET_ALLOW_PASTE:({root:t})=>{X$(t)},DID_SET_DISABLED:({root:t,props:e})=>{q$(t),X$(t),Y$(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),xI=Gi({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:mI,write:fI,destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",qp),t.element.removeEventListener("gesturestart",qp)},mixins:{styles:["height"]}}),SI=(t={})=>{let e=null;const n=Hp(),r=BT(wE(n),[UE,IE(n)],[h5,EE(n)]);r.dispatch("SET_OPTIONS",{options:t});const i=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",i);let o=null,a=!1,s=!1,l=null,c=null;const d=()=>{a||(a=!0),clearTimeout(o),o=setTimeout(()=>{a=!1,l=null,c=null,s&&(s=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",d);const u=xI(r,{id:q0()});let p=!1,h=!1;const f={_read:()=>{a&&(c=window.innerWidth,l||(l=c),!s&&c!==l&&(r.dispatch("DID_START_RESIZE"),s=!0)),h&&p&&(p=u.element.offsetParent===null),!p&&(u._read(),h=u.rect.element.hidden)},_write:k=>{const G=r.processActionQueue().filter(X=>!/^SET_/.test(X.type));p&&!G.length||(S(G),p=u._write(k,G,s),RE(r.query("GET_ITEMS")),p&&r.processDispatchQueue())}},m=k=>G=>{const X={type:k};if(!G)return X;if(G.hasOwnProperty("error")&&(X.error=G.error?{...G.error}:null),G.status&&(X.status={...G.status}),G.file&&(X.output=G.file),G.source)X.file=G.source;else if(G.item||G.id){const q=G.item?G.item:r.query("GET_ITEM",G.id);X.file=q?Ko(q):null}return G.items&&(X.items=G.items.map(Ko)),/progress/.test(k)&&(X.progress=G.progress),G.hasOwnProperty("origin")&&G.hasOwnProperty("target")&&(X.origin=G.origin,X.target=G.target),X},$={DID_DESTROY:m("destroy"),DID_INIT:m("init"),DID_THROW_MAX_FILES:m("warning"),DID_INIT_ITEM:m("initfile"),DID_START_ITEM_LOAD:m("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:m("addfileprogress"),DID_LOAD_ITEM:m("addfile"),DID_THROW_ITEM_INVALID:[m("error"),m("addfile")],DID_THROW_ITEM_LOAD_ERROR:[m("error"),m("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[m("error"),m("removefile")],DID_PREPARE_OUTPUT:m("preparefile"),DID_START_ITEM_PROCESSING:m("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:m("processfileprogress"),DID_ABORT_ITEM_PROCESSING:m("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:m("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:m("processfiles"),DID_REVERT_ITEM_PROCESSING:m("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[m("error"),m("processfile")],DID_REMOVE_ITEM:m("removefile"),DID_UPDATE_ITEMS:m("updatefiles"),DID_ACTIVATE_ITEM:m("activatefile"),DID_REORDER_ITEMS:m("reorderfiles")},b=k=>{const G={pond:I,...k};delete G.type,u.element.dispatchEvent(new CustomEvent(`FilePond:${k.type}`,{detail:G,bubbles:!0,cancelable:!0,composed:!0}));const X=[];k.hasOwnProperty("error")&&X.push(k.error),k.hasOwnProperty("file")&&X.push(k.file);const q=["type","error","file"];Object.keys(k).filter(lt=>!q.includes(lt)).forEach(lt=>X.push(k[lt])),I.fire(k.type,...X);const D=r.query(`GET_ON${k.type.toUpperCase()}`);D&&D(...X)},S=k=>{k.length&&k.filter(G=>$[G.type]).forEach(G=>{const X=$[G.type];(Array.isArray(X)?X:[X]).forEach(q=>{G.type==="DID_INIT_ITEM"?b(q(G.data)):setTimeout(()=>{b(q(G.data))},0)})})},v=k=>r.dispatch("SET_OPTIONS",{options:k}),T=k=>r.query("GET_ACTIVE_ITEM",k),C=k=>new Promise((G,X)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:k,success:q=>{G(q)},failure:q=>{X(q)}})}),R=(k,G={})=>new Promise((X,q)=>{M([{source:k,options:G}],{index:G.index}).then(D=>X(D&&D[0])).catch(q)}),A=k=>k.file&&k.id,E=(k,G)=>(typeof k=="object"&&!A(k)&&!G&&(G=k,k=void 0),r.dispatch("REMOVE_ITEM",{...G,query:k}),r.query("GET_ACTIVE_ITEM",k)===null),M=(...k)=>new Promise((G,X)=>{const q=[],D={};if(yh(k[0]))q.push.apply(q,k[0]),Object.assign(D,k[1]||{});else{const lt=k[k.length-1];typeof lt=="object"&&!(lt instanceof Blob)&&Object.assign(D,k.pop()),q.push(...k)}r.dispatch("ADD_ITEMS",{items:q,index:D.index,interactionMethod:Pa.API,success:G,failure:X})}),P=()=>r.query("GET_ACTIVE_ITEMS"),_=k=>new Promise((G,X)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:k,success:q=>{G(q)},failure:q=>{X(q)}})}),y=(...k)=>{const G=Array.isArray(k[0])?k[0]:k,X=G.length?G:P();return Promise.all(X.map(C))},z=(...k)=>{const G=Array.isArray(k[0])?k[0]:k;if(!G.length){const X=P().filter(q=>!(q.status===qn.IDLE&&q.origin===lo.LOCAL)&&q.status!==qn.PROCESSING&&q.status!==qn.PROCESSING_COMPLETE&&q.status!==qn.PROCESSING_REVERT_ERROR);return Promise.all(X.map(_))}return Promise.all(G.map(_))},O=(...k)=>{const G=Array.isArray(k[0])?k[0]:k;let X;typeof G[G.length-1]=="object"?X=G.pop():Array.isArray(k[0])&&(X=k[1]);const q=P();return G.length?G.map(lt=>rc(lt)?q[lt]?q[lt].id:null:lt).filter(lt=>lt).map(lt=>E(lt,X)):Promise.all(q.map(lt=>E(lt,X)))},I={...xh(),...f,...TE(r,n),setOptions:v,addFile:R,addFiles:M,getFile:T,processFile:_,prepareFile:C,removeFile:E,moveFile:(k,G)=>r.dispatch("MOVE_ITEM",{query:k,index:G}),getFiles:P,processFiles:z,removeFiles:O,prepareFiles:y,sort:k=>r.dispatch("SORT",{compare:k}),browse:()=>{var k=u.element.querySelector("input[type=file]");k&&k.click()},destroy:()=>{I.fire("destroy",u.element),r.dispatch("ABORT_ALL"),u._destroy(),window.removeEventListener("resize",d),document.removeEventListener("visibilitychange",i),r.dispatch("DID_DESTROY")},insertBefore:k=>y$(u.element,k),insertAfter:k=>b$(u.element,k),appendTo:k=>k.appendChild(u.element),replaceElement:k=>{y$(u.element,k),k.parentNode.removeChild(k),e=k},restoreElement:()=>{e&&(b$(e,u.element),u.element.parentNode.removeChild(u.element),e=null)},isAttachedTo:k=>u.element===k||e===k,element:{get:()=>u.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),ml(I)},Lx=(t={})=>{const e={};return xi(Hp(),(r,i)=>{e[r]=i[0]}),SI({...e,...t})},wI=t=>t.charAt(0).toLowerCase()+t.slice(1),TI=t=>Px(t.replace(/^data-/,"")),Ox=(t,e)=>{xi(e,(n,r)=>{xi(t,(i,o)=>{const a=new RegExp(n);if(!a.test(i)||(delete t[i],r===!1))return;if(Wo(r)){t[r]=o;return}const l=r.group;po(r)&&!t[l]&&(t[l]={}),t[l][wI(i.replace(a,""))]=o}),r.mapping&&Ox(t[r.group],r.mapping)})},EI=(t,e={})=>{const n=[];xi(t.attributes,i=>{n.push(t.attributes[i])});const r=n.filter(i=>i.name).reduce((i,o)=>{const a=Ni(t,o.name);return i[TI(o.name)]=a===o.name?!0:a,i},{});return Ox(r,e),r},II=(t,e={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};fc("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...e},i=EI(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,n);Object.keys(i).forEach(a=>{po(i[a])?(po(r[a])||(r[a]={}),Object.assign(r[a],i[a])):r[a]=i[a]}),r.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(a=>({source:a.value,options:{type:a.dataset.type}})));const o=Lx(r);return t.files&&Array.from(t.files).forEach(a=>{o.addFile(a)}),o.replaceElement(t),o},_I=(...t)=>FT(t[0])?II(...t):Lx(...t),CI=["fire","_read","_write"],Z$=t=>{const e={};return rx(t,e,CI),e},RI=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>e[r]),MI=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);return{transfer:(i,o)=>{},post:(i,o,a)=>{const s=q0();r.onmessage=l=>{l.data.id===s&&o(l.data.message)},r.postMessage({id:s,message:i},a)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},kI=t=>new Promise((e,n)=>{const r=new Image;r.onload=()=>{e(r)},r.onerror=i=>{n(i)},r.src=t}),Dx=(t,e)=>{const n=t.slice(0,t.size,t.type);return n.lastModifiedDate=t.lastModifiedDate,n.name=e,n},PI=t=>Dx(t,t.name),K$=[],AI=t=>{if(K$.includes(t))return;K$.push(t);const e=t({addFilter:kE,utils:{Type:Kt,forin:xi,isString:Wo,isFile:Kc,toNaturalFileSize:fx,replaceInString:RI,getExtensionFromFilename:Sh,getFilenameWithoutExtension:px,guesstimateMimeType:Ix,getFileFromBlob:Zc,getFilenameFromURL:pu,createRoute:Ho,createWorker:MI,createView:Gi,createItemAPI:Ko,loadImage:kI,copyFile:PI,renameFile:Dx,createBlob:cx,applyFilterChain:Qa,text:Ri,getNumericAspectRatioFromString:ax},views:{fileActionButton:mx}});PE(e.options)},LI=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",OI=()=>"Promise"in window,DI=()=>"slice"in Blob.prototype,FI=()=>"URL"in window&&"createObjectURL"in window.URL,BI=()=>"visibilityState"in document,zI=()=>"performance"in window,NI=()=>"supports"in(window.CSS||{}),VI=()=>/MSIE|Trident/.test(window.navigator.userAgent),c0=(()=>{const t=Kv()&&!LI()&&BI()&&OI()&&DI()&&FI()&&zI()&&(NI()||VI());return()=>t})(),ol={apps:[]},UI="filepond",gc=()=>{};let Yp={},Pp=gc,mm=gc,Q$=gc,J$=gc,d0=gc,ty=gc,ey=gc;if(c0()){cE(()=>{ol.apps.forEach(n=>n._read())},n=>{ol.apps.forEach(r=>r._write(n))});const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:c0,create:Pp,destroy:mm,parse:Q$,find:J$,registerPlugin:d0,setOptions:ey}})),document.removeEventListener("DOMContentLoaded",t)};document.readyState!=="loading"?setTimeout(()=>t(),0):document.addEventListener("DOMContentLoaded",t);const e=()=>xi(Hp(),(n,r)=>{Yp[n]=r[1]});Yp={},e(),Pp=(...n)=>{const r=_I(...n);return r.on("destroy",mm),ol.apps.push(r),Z$(r)},mm=n=>{const r=ol.apps.findIndex(i=>i.isAttachedTo(n));return r>=0?(ol.apps.splice(r,1)[0].restoreElement(),!0):!1},Q$=n=>Array.from(n.querySelectorAll(`.${UI}`)).filter(o=>!ol.apps.find(a=>a.isAttachedTo(o))).map(o=>Pp(o)),J$=n=>{const r=ol.apps.find(i=>i.isAttachedTo(n));return r?Z$(r):null},d0=(...n)=>{n.forEach(AI),e()},ty=()=>{const n={};return xi(Hp(),(r,i)=>{n[r]=i[0]}),n},ey=n=>(po(n)&&(ol.apps.forEach(r=>{r.setOptions(n)}),AE(n)),ty())}/*!
 * vue-filepond v7.0.4
 * A handy FilePond adapter component for Vue
 * 
 * Copyright (c) 2023 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const GI=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],WI=c0(),HI=t=>({string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object})[t],pp={},fm=[],gm=[];let jI={};const qI=(...t)=>{d0(...t),fm.length=0;for(const e in Yp){if(/^on/.test(e)){fm.push(e);continue}let n=[String,HI(Yp[e])];e=="labelFileProcessingError"&&n.push(Function),pp[e]={type:n,default:void 0}}return{name:"FilePond",props:pp,render(){const e=Object.entries({id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}).reduce((n,[r,i])=>(i!==void 0&&(n[r]=i),n),{});return zs("div",{class:{"filepond--wrapper":!0}},[zs("input",e)])},created(){this.watchers=Object.keys(pp).map(e=>this.$watch(e,n=>{this._pond&&(this._pond[e]=n)}))},mounted(){if(!WI)return;this._element=this.$el.querySelector("input");const e=fm.reduce((r,i)=>(r[i]=(...o)=>{this.$emit("input",this._pond?this._pond.getFiles():[]),this.$emit(i.substr(2),...o)},r),{}),n={};Object.keys(pp).forEach(r=>{this[r]!==void 0&&(n[r]=this[r])}),this._pond=Pp(this._element,Object.assign({},jI,e,n)),Object.keys(this._pond).filter(r=>!GI.includes(r)).forEach(r=>{this[r]=this._pond[r]}),gm.push(this._pond)},beforeUnmount(){const{detached:e}=this.$options;if(!this.$el.offsetParent){e.call(this);return}const n=(i,o)=>{const s=((i[0]||{}).removedNodes||[])[0];!s||!s.contains(this.$el)||(o.disconnect(),e.call(this))};new MutationObserver(n).observe(document.documentElement,{childList:!0,subtree:!0})},detached(){if(this.watchers.forEach(n=>n()),!this._pond)return;this._pond.destroy();const e=gm.indexOf(this._pond);e>=0&&gm.splice(e,1),this._pond=null}}},YI='<svg class="mb-3" height="77" role="img" viewBox="0 0 97.6 77.3" width="96"><path d="M16.3 24h.3c2.8-.2 4.9-2.6 4.8-5.4-.2-2.8-2.6-4.9-5.4-4.8s-4.9 2.6-4.8 5.4c.1 2.7 2.4 4.8 5.1 4.8zm-2.4-7.2c.5-.6 1.3-1 2.1-1h.2c1.7 0 3.1 1.4 3.1 3.1 0 1.7-1.4 3.1-3.1 3.1-1.7 0-3.1-1.4-3.1-3.1 0-.8.3-1.5.8-2.1z" fill="currentColor"></path><path d="M84.7 18.4 58 16.9l-.2-3c-.3-5.7-5.2-10.1-11-9.8L12.9 6c-5.7.3-10.1 5.3-9.8 11L5 51v.8c.7 5.2 5.1 9.1 10.3 9.1h.6l21.7-1.2v.6c-.3 5.7 4 10.7 9.8 11l34 2h.6c5.5 0 10.1-4.3 10.4-9.8l2-34c.4-5.8-4-10.7-9.7-11.1zM7.2 10.8C8.7 9.1 10.8 8.1 13 8l34-1.9c4.6-.3 8.6 3.3 8.9 7.9l.2 2.8-5.3-.3c-5.7-.3-10.7 4-11 9.8l-.6 9.5-9.5 10.7c-.2.3-.6.4-1 .5-.4 0-.7-.1-1-.4l-7.8-7c-1.4-1.3-3.5-1.1-4.8.3L7 49 5.2 17c-.2-2.3.6-4.5 2-6.2zm8.7 48c-4.3.2-8.1-2.8-8.8-7.1l9.4-10.5c.2-.3.6-.4 1-.5.4 0 .7.1 1 .4l7.8 7c.7.6 1.6.9 2.5.9.9 0 1.7-.5 2.3-1.1l7.8-8.8-1.1 18.6-21.9 1.1zm76.5-29.5-2 34c-.3 4.6-4.3 8.2-8.9 7.9l-34-2c-4.6-.3-8.2-4.3-7.9-8.9l2-34c.3-4.4 3.9-7.9 8.4-7.9h.5l34 2c4.7.3 8.2 4.3 7.9 8.9z" fill="currentColor"></path><path d="M78.2 41.6 61.3 30.5c-2.1-1.4-4.9-.8-6.2 1.3-.4.7-.7 1.4-.7 2.2l-1.2 20.1c-.1 2.5 1.7 4.6 4.2 4.8h.3c.7 0 1.4-.2 2-.5l18-9c2.2-1.1 3.1-3.8 2-6-.4-.7-.9-1.3-1.5-1.8zm-1.4 6-18 9c-.4.2-.8.3-1.3.3-.4 0-.9-.2-1.2-.4-.7-.5-1.2-1.3-1.1-2.2l1.2-20.1c.1-.9.6-1.7 1.4-2.1.8-.4 1.7-.3 2.5.1L77 43.3c1.2.8 1.5 2.3.7 3.4-.2.4-.5.7-.9.9z" fill="currentColor"></path></svg>Drag photos and videos here<br /><div class="v-btn bg-primary mt-5 px-3 py-2 filepond--label-action">Select from computer</div>',Fx=cn({__name:"InstagramMediaDropzone",props:{user:{}},emits:["add"],setup(t,{emit:e}){const n=t;Fv();const r=qI(),i=e,o=nr([]);function a(s){i("add",s.source),n.user.media.addMedia({file:s.source},"posts","unshift"),n.user.save()}return(s,l)=>(Vt(),xe(_n(r),{name:"test",class:"ig-dropzone","drop-on-element":!1,"drop-on-page":!0,"allow-multiple":"","label-idle":YI,credits:"","accepted-file-types":"image/jpeg, image/jpg, image/png, image/mp4",files:_n(o),onInitfile:a},{default:Pt(()=>[ut(vs,{class:"d-none"})]),_:1},8,["files"]))}}),XI={class:"ig-user-post__date"},ZI={class:"px-4 py-3"},KI={class:"text-grey"},Bx=cn({__name:"InstagramPostDate",props:{date:{}},setup(t){const e=t,r=z4().format(e.date,"fullDateWithWeekday").split(",").splice(1).join(",");return(i,o)=>(Vt(),Rr("div",XI,[pn("div",ZI,[Da(i.$slots,"prepend"),pn("div",null,[pn("small",KI,xs(_n(r)),1)])]),Da(i.$slots,"append")]))}}),QI={},JI={height:"24",viewBox:"0 0 24 24",width:"24"},t_=pn("polygon",{fill:"none",points:"20 21 12 13.44 4 21 4 3 20 3 20 21",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1),e_=[t_];function n_(t,e){return Vt(),Rr("svg",JI,e_)}const r_=rr(QI,[["render",n_]]),i_={},o_={height:"24",viewBox:"0 0 24 24",width:"24"},a_=pn("line",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"2",x1:"22",x2:"9.218",y1:"3",y2:"10.083"},null,-1),s_=pn("polygon",{fill:"none",points:"11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"2"},null,-1),l_=[a_,s_];function c_(t,e){return Vt(),Rr("svg",o_,l_)}const d_=rr(i_,[["render",c_]]),u_={},p_={height:"24",viewBox:"0 0 24 24",width:"24"},h_=pn("path",{d:"M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"2"},null,-1),m_=[h_];function f_(t,e){return Vt(),Rr("svg",p_,m_)}const g_=rr(u_,[["render",f_]]),$_={},y_={height:"24",viewBox:"0 0 24 24",width:"24"},b_=pn("path",{d:"M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"},null,-1),v_=[b_];function x_(t,e){return Vt(),Rr("svg",y_,v_)}const af=rr($_,[["render",x_]]),S_=Ys({color:String,...G0(),...pc(),...sT(),...ph(),...lT(),...cT(),...hh(),...mh(),...z0()},"VSheet"),Eh=El()({name:"VSheet",props:S_(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=Bv(t),{backgroundColorClasses:i,backgroundColorStyles:o}=Xc(co(t,"color")),{borderClasses:a}=W0(t),{dimensionStyles:s}=dT(t),{elevationClasses:l}=fh(t),{locationStyles:c}=uT(t),{positionClasses:d}=pT(t),{roundedClasses:u}=gh(t);return Il(()=>ut(t.tag,{class:["v-sheet",r.value,i.value,a.value,l.value,d.value,u.value,t.class],style:[o.value,s.value,c.value,t.style]},n)),{}}}),w_={},T_=t=>(N0("data-v-0af19d85"),t=t(),V0(),t),E_=T_(()=>pn("div",{class:"font-weight-bold text-subtitle-2 mt-2 mb-n2"},"0 likes",-1));function I_(t,e){const n=af,r=g_,i=d_,o=r_;return Vt(),xe(Eh,null,{default:Pt(()=>[ut(Es,{"no-gutters":"",class:"mt-1"},{default:Pt(()=>[ut(mo,null,{default:Pt(()=>[ut(n,{class:"mr-2"}),ut(r,{class:"mr-2"}),ut(i)]),_:1}),ut(mo,{class:"text-right"},{default:Pt(()=>[ut(o)]),_:1})]),_:1}),E_]),_:1})}const zx=rr(w_,[["render",I_],["__scopeId","data-v-0af19d85"]]),__=cn({__name:"InstagramMediaContextMenuRemove",props:{media:{}},emits:["close"],setup(t,{emit:e}){const n=t,r=e;async function i(){await n.media.remove(),r("close")}return(o,a)=>(Vt(),xe(uo,{onClick:i,class:"text-red"},{default:Pt(()=>[ut(ss,null,{default:Pt(()=>[Tr("Remove")]),_:1})]),_:1}))}}),C_=cn({__name:"InstagramMediaContextMenuConvertToIframe",props:{media:{}},emits:["close"],setup(t,{emit:e}){const n=t;function r(){const i=window.prompt("URL of the iframe","https://");i&&(n.media.convertToIframe(i),n.media.user.save())}return(i,o)=>(Vt(),xe(uo,{onClick:r},{default:Pt(()=>[ut(ss,null,{default:Pt(()=>[Tr("Convert to iframe")]),_:1})]),_:1}))}}),R_=cn({__name:"InstagramMediaContextMenuConvertToAlbum",props:{media:{}},emits:["close"],setup(t,{emit:e}){const n=t;function r(){n.media.convertToAlbum(),n.media.user.save()}return(i,o)=>(Vt(),xe(uo,{onClick:r},{default:Pt(()=>[ut(ss,null,{default:Pt(()=>[Tr("Convert to album")]),_:1})]),_:1}))}}),M_=cn({__name:"InstagramMediaContextMenuReplaceMedia",props:{media:{}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,{open:i,onChange:o}=uu({accept:"image/*",multiple:!1});return o(a=>{if(!a)return;const s=a[0];n.media.setMediaImage(s),n.media.refresh(),n.media.save(),r("close")}),(a,s)=>(Vt(),xe(uo,{onClick:_n(i)},{default:Pt(()=>[ut(ss,null,{default:Pt(()=>[Tr("Replace media")]),_:1})]),_:1},8,["onClick"]))}}),k_=cn({__name:"InstagramMediaContextMenuRemoveCover",props:{media:{}},emits:["close"],setup(t,{emit:e}){const n=t,r=e;function i(){n.media.removeCover(),n.media.refresh(),n.media.save(),r("close")}return(o,a)=>(Vt(),xe(uo,{onClick:i},{default:Pt(()=>[ut(ss,null,{default:Pt(()=>[Tr("Remove cover")]),_:1})]),_:1}))}}),P_=cn({__name:"InstagramMediaContextMenuReplaceCover",props:{media:{}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,{files:i,open:o,reset:a,onChange:s}=uu({accept:"image/*",multiple:!1});return s(l=>{if(!l)return;const c=l[0];n.media.setCover(c),n.media.refresh(),n.media.save(),r("close")}),(l,c)=>(Vt(),xe(uo,{onClick:_n(o)},{default:Pt(()=>[ut(ss,null,{default:Pt(()=>[Tr("Replace cover")]),_:1})]),_:1},8,["onClick"]))}}),A_=cn({__name:"InstagramMediaContextMenuAddCover",props:{media:{}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,{open:i,onChange:o}=uu({accept:"image/jpg, image/jpeg, image/png",multiple:!1});return o(a=>{if(!a)return;const s=a[0];n.media.setCover(s),n.media.save(),r("close")}),(a,s)=>(Vt(),xe(uo,{onClick:_n(i)},{default:Pt(()=>[ut(ss,null,{default:Pt(()=>[Tr("Add cover")]),_:1})]),_:1},8,["onClick"]))}}),L_=cn({__name:"InstagramMediaContextMenuRemoveFromAlbum",props:{media:{}},emits:["close"],setup(t,{emit:e}){const n=t,r=e;function i(){n.media.removeFromAlbum(),r("close")}return(o,a)=>(Vt(),xe(uo,{onClick:i},{default:Pt(()=>[ut(ss,null,{default:Pt(()=>[Tr("Remove from album")]),_:1})]),_:1}))}}),O_=cn({__name:"InstagramMediaContextMenuAddToAlbum",props:{media:{}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,{files:i,open:o,reset:a,onChange:s}=uu({accept:"image/jpg, image/jpeg, image/png",multiple:!1});return s(l=>{if(!l)return;const c=l[0];n.media.addToAlbum(c),r("close")}),(l,c)=>(Vt(),xe(uo,{onClick:_n(o)},{default:Pt(()=>[ut(ss,null,{default:Pt(()=>[Tr("Add to album")]),_:1})]),_:1},8,["onClick"]))}}),D_=cn({__name:"InstagramMediaContextMenuGroup",props:{title:{}},setup(t){return(e,n)=>(Vt(),xe(uo,{class:"px-0 mt-1"},{default:Pt(()=>[ut(ss,{class:"text-overline px-4",textContent:xs(e.title)},null,8,["textContent"]),ut(jd,{density:"compact",class:"ma-0 pa-0"},{default:Pt(()=>[Da(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3}))}}),F_=rr(D_,[["__scopeId","data-v-a4bc1574"]]),B_=cn({__name:"InstagramMediaContextMenuCloneToReel",props:{media:{}},emits:["close"],setup(t,{emit:e}){const n=t;function r(){n.media.cloneToReel(),n.media.user.save()}return(i,o)=>(Vt(),xe(uo,{onClick:r},{default:Pt(()=>[ut(ss,null,{default:Pt(()=>[Tr("Clone to reel")]),_:1})]),_:1}))}}),Nx=cn({__name:"InstagramMediaContextMenu",props:{media:{}},emits:["update:modelValue"],setup(t,{emit:e}){const n=e;function r(){n("update:modelValue",!1)}return(i,o)=>{const a=B_,s=F_,l=O_,c=L_,d=A_,u=P_,p=k_,h=M_,f=R_,m=C_,$=__;return Vt(),xe(hT,{"content-class":"ig-media__context-menu text-left",transition:"slide-y-transition",attach:"","close-on-content-click":!1,onClick:o[0]||(o[0]=U0(()=>{},["stop"]))},{default:Pt(()=>[ut(jd,{density:"compact",class:"ma-3 py-2"},{default:Pt(()=>[["video","iframe"].includes(i.media.type)&&!i.media.isReel?(Vt(),xe(s,{key:0,title:"Reel"},{default:Pt(()=>[["video","iframe"].includes(i.media.type)&&!i.media.isReel?(Vt(),xe(a,{key:0,media:i.media,onClose:r},null,8,["media"])):gr("",!0)]),_:1})):gr("",!0),["album"].includes(i.media.type)?(Vt(),xe(s,{key:1,title:"Album"},{default:Pt(()=>[ut(l,{media:i.media,onClose:r},null,8,["media"]),i.media.list.length>1?(Vt(),xe(c,{key:0,media:i.media,onClose:r},null,8,["media"])):gr("",!0)]),_:1})):gr("",!0),["video","iframe"].includes(i.media.type)?(Vt(),xe(s,{key:2,title:"Cover"},{default:Pt(()=>[i.media.cover?gr("",!0):(Vt(),xe(d,{key:0,media:i.media,onClose:r},null,8,["media"])),i.media.cover?(Vt(),xe(u,{key:1,media:i.media,onClose:r},null,8,["media"])):gr("",!0),i.media.cover?(Vt(),xe(p,{key:2,media:i.media,onClose:r},null,8,["media"])):gr("",!0)]),_:1})):gr("",!0),["image","video"].includes(i.media.type)?(Vt(),xe(s,{key:3,title:"Media"},{default:Pt(()=>[ut(h,{media:i.media,onClose:r},null,8,["media"]),i.media.isReel?gr("",!0):(Vt(),xe(f,{key:0,media:i.media,onClose:r},null,8,["media"])),i.media.type==="image"?(Vt(),xe(m,{key:1,media:i.media,onClose:r},null,8,["media"])):gr("",!0)]),_:1})):gr("",!0),ut(Jd,{class:"my-1"}),ut($,{media:i.media,onClose:r},null,8,["media"])]),_:1})]),_:1})}}}),z_={class:"ig-media__icon"},N_=cn({__name:"InstagramMediaContainer",props:{media:{},type:{},contextMenu:{type:Boolean}},setup(t){const e=nr(!1);function n(r){r.preventDefault(),e.value=!e.value}return(r,i)=>{const o=Nx;return Vt(),Rr("div",{class:mc(["ig-media",`ig-media--${r.type}`]),onContextmenu:n},[(Vt(),xe(Qd,null,{default:Pt(()=>[Da(r.$slots,"default",{},void 0,!0)]),_:3})),pn("div",z_,[r.type==="album"?(Vt(),xe(os,{key:0},{default:Pt(()=>[Tr("mdi-folder-multiple-image")]),_:1})):gr("",!0),r.type==="video"?(Vt(),xe(os,{key:1},{default:Pt(()=>[Tr("mdi-play")]),_:1})):gr("",!0)]),r.contextMenu?(Vt(),xe(o,{key:0,modelValue:_n(e),"onUpdate:modelValue":i[0]||(i[0]=a=>hc(e)?e.value=a:null),media:r.media},null,8,["modelValue","media"])):gr("",!0)],34)}}}),Ih=rr(N_,[["__scopeId","data-v-6a6c1059"]]);/*!
 * Pintura v8.71.2 - Test version
 * (c) 2018-2024 PQINA Inc. - All Rights Reserved
 * License: https://pqina.nl/pintura/license/
 * 
 * This version of Pintura is for testing purposes only.
 * Visit https://pqina.nl/pintura/ to obtain a commercial license.
 */const V_=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"}];var Vx=t=>{if(t.getUint16(0)!==65496)return;const e=t.byteLength;let n,r=2,i;for(;r<e&&t.getUint8(r)===255;){n=t.getUint16(r);const o=V_.find(a=>a.value===n&&(!a.subvalue||a.subvalue===t.getUint16(r+2+2)));if(o){const{name:a}=o;i||(i={}),i[a]||(i[a]={offset:r,size:t.getUint16(r+2)})}if(n===65498)break;r+=2+t.getUint16(r+2)}return i},sf=(t,e,n)=>{if(!t)return;const r=new DataView(t),i=Vx(r);if(!i||!i.exif)return;const o=((a,s)=>{if(a.getUint16(s)!==65505)return;const l=a.getUint16(s+2);if(s+=4,a.getUint32(s)!==1165519206)return;s+=6;const c=a.getUint16(s);if(c!==18761&&c!==19789)return;const d=c===18761;if(s+=2,a.getUint16(s,d)!==42)return;s+=a.getUint32(s+2,d);const u=p=>{const h=[];let f=s;const m=Math.min(a.byteLength,s+l-16);for(;f<m;f+=12){const $=f;a.getUint16($,d)===p&&h.push($)}return h};return{read:p=>{const h=u(p);if(h.length)return a.getUint16(h[0]+8,d)},write:(p,h)=>{const f=u(p);return!!f.length&&(f.forEach(m=>a.setUint16(m+8,h,d)),!0)}}})(r,i.exif.offset);return o?n===void 0?o.read(e):o.write(e,n):void 0},lf=t=>window.__pqina_webapi__?window.__pqina_webapi__[t]:window[t],ve=(...t)=>{};const U_={ArrayBuffer:"readAsArrayBuffer"};var Ux=async(t,e=[0,t.size],n)=>await((r,i=ve,o={})=>new Promise((a,s)=>{const{dataFormat:l=U_.ArrayBuffer}=o,c=new(lf("FileReader"));c.onload=()=>a(c.result),c.onerror=()=>s(c.error),c.onprogress=i,c[l](r)}))(t.slice(...e),n),G_=async(t,e)=>{const n=await Ux(t,[0,262144],e);return sf(n,274)||1};let $m=null;var Ji=()=>($m===null&&($m=typeof window<"u"&&window.document!==void 0),$m);let hp=null;var _h=()=>new Promise(t=>{if(hp===null){const e="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let n=Ji()?new Image:{};return n.onload=()=>{hp=n.naturalWidth===1,n=void 0,t(hp)},void(n.src=e)}return t(hp)}),hu=t=>t.getContext("2d").getImageData(0,0,t.width,t.height),br=(t,e,n=[])=>{const r=document.createElement(t),i=Object.getOwnPropertyDescriptors(r.__proto__);for(const o in e)o==="style"?r.style.cssText=e[o]:i[o]&&i[o].set||/textContent|innerHTML/.test(o)||typeof e[o]=="function"?r[o]=e[o]:r.setAttribute(o,e[o]);return n.forEach(o=>r.appendChild(o)),r};const W_={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var pi=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},Qc=t=>"data"in t,cf=t=>Ji()?RegExp(t).test(window.navigator.userAgent):void 0;let ym=null;var Ch=()=>(ym===null&&(ym=cf(/Android/)),ym),Gx=(t,e)=>{const n=br("canvas",{width:t.width,height:t.height});return n.getContext("2d",e).drawImage(t,0,0),n},ad=async(t,e=1)=>{const n=await _h(),[r,i]=n||e<5?[t.width,t.height]:[t.height,t.width],o=br("canvas",{width:r,height:i}),a=o.getContext("2d",{willReadFrequently:!0});if(Qc(t)&&!n&&e>1){const s=br("canvas",{width:t.width,height:t.height});s.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),t=s}if(!n&&e>1&&a.transform.apply(a,((s,l,c=-1)=>(c===-1&&(c=1),W_[c](s,l)))(t.width,t.height,e)),Qc(t)){if(a.putImageData(t,0,0),Ch())return Gx(o)}else a.drawImage(t,0,0);return t instanceof HTMLCanvasElement&&pi(t),o},Wx=async(t,e=1)=>e===1||await _h()?t:hu(await ad(t,e)),$c=t=>typeof t=="object";const ny=t=>t instanceof HTMLElement?t:$c(t)?Hx(t):t,Hx=t=>{let e;return Array.isArray(t)?(e=[],t.forEach((n,r)=>{e[r]=ny(n)})):(e={},Object.keys(t).forEach(n=>{const r=t[n];e[n]=ny(r)})),e};var Ve=t=>typeof t=="string",hr=t=>typeof t=="function",H_=(t,e)=>new Promise((n,r)=>{const i=()=>n(((o,{width:a,height:s,canvasMemoryLimit:l,contextOptions:c})=>{let d=a||o.naturalWidth,u=s||o.naturalHeight;d||u||(d=300,u=150);const p=d*u;if(l&&p>l){const f=Math.sqrt(l)/Math.sqrt(p);d=Math.floor(d*f),u=Math.floor(u*f)}const h=br("canvas");return h.width=d,h.height=u,h.getContext("2d",c).drawImage(o,0,0,d,u),h})(t,e));t.complete&&t.width?i():(t.onload=i,t.onerror=()=>r(new Error("Failed to load image")))}),jx=()=>"createImageBitmap"in window,qx=t=>/svg/.test(t.type),Oa=()=>Math.random().toString(36).substring(2,9);const bm=new Map;var mu=(t,e,n)=>new Promise((r,i)=>{const o=t.toString();let a=bm.get(o);if(!a){const l=(p=>`function () {self.onmessage = function (message) {(${p.toString()}).apply(null, message.data.content.concat([function (err, response) {
    response = response || {};
    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];
    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);
}]))}}`)(t),c=URL.createObjectURL((p=>new Blob(["(",typeof p=="function"?p.toString():p,")()"],{type:"application/javascript"}))(l)),d=new Map,u=new Worker(c);a={url:c,worker:u,messages:d,terminationTimeout:void 0,terminate:()=>{clearTimeout(a.terminationTimeout),a.worker.terminate(),URL.revokeObjectURL(c),bm.delete(o)}},u.onmessage=function(p){const{id:h,content:f,error:m}=p.data;if(clearTimeout(a.terminationTimeout),a.terminationTimeout=setTimeout(()=>{d.size>0||a.terminate()},500),!d.has(h))return;const $=d.get(h);d.delete(h),m!=null?$.reject(m):$.resolve(f)},bm.set(o,a)}const s=Oa();a.messages.set(s,{resolve:r,reject:i}),a.worker.postMessage({id:s,content:e},n)}),Yx=async(t,e)=>{const n=async()=>{const i=await(async(a,s)=>{const l=br("img",{src:URL.createObjectURL(a)}),c=await H_(l,s);return URL.revokeObjectURL(l.src),c})(t,{canvasMemoryLimit:e,contextOptions:{willReadFrequently:!0}}),o=hu(i);return pi(i),o};if(Ch())return await n();let r;if(jx()&&!qx(t)&&"OffscreenCanvas"in window)try{r=await mu((i,o,a)=>{createImageBitmap(i).then(s=>{let l=s.width,c=s.height;const d=l*c;if(o&&d>o){const f=Math.sqrt(o)/Math.sqrt(d);l=Math.floor(l*f),c=Math.floor(c*f)}const u=new OffscreenCanvas(l,c),p=u.getContext("2d",{willReadFrequently:!0});p.drawImage(s,0,0,l,c);const h=p.getImageData(0,0,u.width,u.height);a(null,h)}).catch(s=>{a(s)})},[t,e])}catch{}return r&&r.width?r:await n()},df=(t,e,n)=>new Promise((r,i)=>{try{t.toBlob(o=>{if(!o)return i(new Error("Failed to create blob"));r(o)},e,n)}catch(o){i(o)}}),j_=async(t,e,n)=>{const r=await ad(t),i=await df(r,e,n);return pi(r),i};const q_={matroska:"mkv"};var Xx=t=>{const e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){const[,n=""]=t.split("/x-");return q_[n]}return e},Zx=t=>t.substr(0,t.lastIndexOf("."))||t;const Y_=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var uf=t=>{return t&&(e=(n=t,n.split(".").pop()).toLowerCase(),Y_.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":e==="svg"?"svg+xml":e):"");var e,n},tu=(t,e,n)=>{const r=new Date().getTime(),i=t.type.length&&!/null|text/.test(t.type),o=i?t.type:n,a=((s,l)=>{const c=uf(s);if(c===l)return s;const d=Xx(l)||c;return`${Zx(s)}.${d}`})(e,o);try{return new(lf("File"))([t],a,{lastModified:r,type:i?t.type:o})}catch{const l=i?t.slice():t.slice(0,t.size,o);return l.lastModified=r,l.name=a,l}},Ra=(t,e)=>t/e,ur=t=>t;const vm=Math.PI,ga=Math.PI/2,Ma=ga/2;var ys=t=>{const e=Math.abs(t)%Math.PI;return e>Ma&&e<Math.PI-Ma};const u0={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:vl,Right:xl,Bottom:Sl,Left:wl,TopLeft:Fa,TopRight:Ba,BottomRight:za,BottomLeft:Na}=u0;var eu={[vl]:[.5,0],[xl]:[1,.5],[Sl]:[.5,1],[wl]:[0,.5],[Fa]:[0,0],[Ba]:[1,0],[za]:[1,1],[Na]:[0,1]},ln=(t,e=12)=>parseFloat(t.toFixed(e));const Xp=(t,e,n)=>n+(t-n)*e,ry=t=>({x:t.x+.5*t.width,y:t.y+.5*t.height,rx:.5*t.width,ry:.5*t.height}),pr=()=>dt(0,0),dt=(t,e)=>({x:t,y:e}),iy=t=>dt(t.pageX,t.pageY),Ue=t=>dt(t.x,t.y),Wc=t=>(t.x=-t.x,t.y=-t.y,t),yo=(t,e,n=pr())=>{const r=Math.cos(e),i=Math.sin(e),o=t.x-n.x,a=t.y-n.y;return t.x=n.x+r*o-i*a,t.y=n.y+i*o+r*a,t},fl=t=>Math.sqrt(t.x*t.x+t.y*t.y),Po=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?pr():(t.x/=e,t.y/=e,t)},mp=(t,e)=>Math.atan2(e.y-t.y,e.x-t.x),ul=(t,e)=>t.x===e.x&&t.y===e.y,Jo=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),Xr=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Zr=(t,e)=>(t.x-=e.x,t.y-=e.y,t),oy=(t,e)=>(t.x/=e,t.y/=e,t),Qi=(t,e)=>(t.x*=e,t.y*=e,t),Ap=(t,e)=>t.x*e.x+t.y*e.y,Lp=(t,e)=>t.x*e.y-t.y*e.x,pa=(t,e=pr())=>{const n=t.x-e.x,r=t.y-e.y;return n*n+r*r},Vo=(t,e=pr())=>Math.sqrt(pa(t,e)),X_=(t,e,n)=>(t.x=Xp(t.x,e,n.x),t.y=Xp(t.y,e,n.y),t),ha=t=>{let e=0,n=0;return t.forEach(r=>{e+=r.x,n+=r.y}),dt(e/t.length,n/t.length)},Hc=(t,e,n,r,i)=>(t.forEach(o=>{o.x=e?r-(o.x-r):o.x,o.y=n?i-(o.y-i):o.y}),t),cc=(t,e,n,r)=>{const i=Math.sin(e),o=Math.cos(e);return t.forEach(a=>{a.x-=n,a.y-=r;const s=a.x*o-a.y*i,l=a.x*i+a.y*o;a.x=n+s,a.y=r+l}),t},sd=(t,e)=>({width:t,height:e}),ko=t=>sd(t.width,t.height),Is=t=>sd(t.width,t.height),dc=t=>sd(t.width,t.height),Kx=t=>sd(t[0],t[1]),Yd=t=>{return/img/i.test(t.nodeName)?sd((e=t).naturalWidth,e.naturalHeight):Is(t);var e},ii=(t,e)=>sd(t,e),nu=(t,e,n=ur)=>n(t.width)===n(e.width)&&n(t.height)===n(e.height),fp=(t,e)=>(t.width*=e,t.height*=e,t),Jc=t=>dt(.5*t.width,.5*t.height),Qx=(t,e)=>{const n=Math.abs(e),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),o=r*t.width+i*t.height,a=i*t.width+r*t.height;return t.width=o,t.height=a,t},Zp=(t,e)=>t.width>=e.width&&t.height>=e.height,Us=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),Tl=(t,e)=>({start:t,end:e}),Jx=t=>Tl(Ue(t.start),Ue(t.end)),pf=(t,e)=>{if(e===0)return t;const n=dt(t.start.x-t.end.x,t.start.y-t.end.y),r=Po(n),i=Qi(r,e);return t.start.x+=i.x,t.start.y+=i.y,t.end.x-=i.x,t.end.y-=i.y,t},Z_=[dt(-1,-1),dt(-1,1),dt(1,1),dt(1,-1)],Va=(t,e,n,r)=>({x:t,y:e,width:n,height:r}),Pn=t=>Va(t.x,t.y,t.width,t.height),gl=()=>Va(0,0,0,0),fo=t=>Va(0,0,t.width,t.height),K_=t=>Va(t[3],t[0],t[1]-t[3],t[2]-t[0]),cl=t=>Va(t.x||0,t.y||0,t.width||0,t.height||0),yi=t=>{let e=t[0].x,n=t[0].x,r=t[0].y,i=t[0].y;return t.forEach(o=>{e=Math.min(e,o.x),n=Math.max(n,o.x),r=Math.min(r,o.y),i=Math.max(i,o.y)}),Va(e,r,n-e,i-r)},xm=t=>Br(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),ay=(t,e)=>Va(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),Br=(t,e,n,r)=>Va(t,e,n,r),An=t=>dt(t.x+.5*t.width,t.y+.5*t.height),ka=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Ki=(t,e,n)=>(n=n||An(t),t.x=e*(t.x-n.x)+n.x,t.y=e*(t.y-n.y)+n.y,t.width=e*t.width,t.height=e*t.height,t),sy=(t,e,n,r)=>{const i=(r.x-t.x)/t.width,o=(r.y-t.y)/t.height;let a=Math.max(e.width,t.width),s=Math.max(e.height,t.height);return a=Math.min(n.width,a),s=Math.min(n.height,s),t.x=r.x-i*a,t.y=r.y-o*s,t.width=a,t.height=s,t},ly=(t,e)=>{const[n,r]=eu[e],i=n*t.width,o=r*t.height;return dt(t.x+i,t.y+o)},$l=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),Aa=(t,e,n=ur)=>n(t.x)===n(e.x)&&n(t.y)===n(e.y)&&n(t.width)===n(e.width)&&n(t.height)===n(e.height),bi=t=>Ra(t.width,t.height),tS=(t,e,n,r,i)=>(t.x=e,t.y=n,t.width=r,t.height=i,t),Rh=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),Fi=(t,e,n)=>(n||(n=An(t)),fa(t).map(r=>yo(r,e,n))),Op=(t,e)=>Va(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),Kp=(t,e)=>!(e.x<t.x)&&!(e.y<t.y)&&!(e.x>t.x+t.width)&&!(e.y>t.y+t.height),js=(t,e,n=pr())=>{if(t.width===0||t.height===0)return gl();const r=bi(t);e||(e=r);let i=t.width,o=t.height;return e>r?i=o*e:o=i/e,Va(n.x+.5*(t.width-i),n.y+.5*(t.height-o),i,o)},vo=(t,e=bi(t),n=pr())=>{if(t.width===0||t.height===0)return gl();let r=t.width,i=r/e;return i>t.height&&(i=t.height,r=i*e),Va(n.x+.5*(t.width-r),n.y+.5*(t.height-i),r,i)},uc=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],fa=t=>[dt(t.x,t.y),dt(t.x+t.width,t.y),dt(t.x+t.width,t.y+t.height),dt(t.x,t.y+t.height)],ma=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},eS=(t,e,n=An(t))=>fa(t).map((r,i)=>{const o=Z_[i];return dt(Xp(r.x,1+o.x*e.x,n.x),Xp(r.y,1+o.y*e.y,n.y))}),ru=t=>(t.x=0,t.y=0,t),cy=t=>{const e=t[0],n=t[t.length-1];t=ul(e,n)?t:[...t,e];const r=e.x,i=e.y;let o,a,s,l=0,c=0,d=0,u=0;const p=t.length;for(;c<p;c++)o=t[c],a=t[c+1>p-1?0:c+1],s=(o.y-i)*(a.x-r)-(a.y-i)*(o.x-r),l+=s,d+=(o.x+a.x-2*r)*s,u+=(o.y+a.y-2*i)*s;return s=3*l,dt(r+d/s,i+u/s)},hf=(t,e)=>nS(t.start,t.end,e.start,e.end),nS=(t,e,n,r)=>{const i=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y);if(i===0)return;const o=((r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x))/i,a=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/i;return o<0||o>1||a<0||a>1?void 0:dt(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y))},rS=(t,e,{ignoreIdenticalLines:n=!1,breakOnIntersection:r=!1}={})=>{const i=e.length,o=[];for(let a=0;a<i-1;a++){if(n&&(ul(t.start,e[a])||ul(t.start,e[a+1])||ul(t.end,e[a])||ul(t.end,e[a+1])))continue;const s=nS(t.start,t.end,e[a],e[a+1]);if(s){if(r)return[s];o.push(s)}}return o.length?o:void 0},p0=(t,e)=>{let n=0,r=0,i=!1;const o=e.length;for(n=0,r=o-1;n<o;r=n++)e[n].y>t.y!=e[r].y>t.y&&t.x<(e[r].x-e[n].x)*(t.y-e[n].y)/(e[r].y-e[n].y)+e[n].x&&(i=!i);return i},iS=t=>{const e=[];for(let n=0;n<t.length;n++){let r=n+1;r===t.length&&(r=0),e.push(Tl(Ue(t[n]),Ue(t[r])))}return e},oS=(t,e=0)=>iS(t).map(n=>pf(n,e)),Qp=(t,e,n,r=0,i=!1,o=!1,a=12)=>{const s=[];for(let l=0;l<a;l++)s.push(dt(t.x+e*Math.cos(l*(2*Math.PI)/a),t.y+n*Math.sin(l*(2*Math.PI)/a)));return(i||o)&&Hc(s,i,o,t.x,t.y),r&&cc(s,r,t.x,t.y),s},mf=(t,e,n,r)=>{const i=dt(t.x-n.x,t.y-n.y),o=dt(r.x-n.x,r.y-n.y),a=Ap(o,o);let s=Ap(i,o)/a;s=s<0?0:s,s=s>1?1:s;const l=dt(o.x*s+n.x-t.x,o.y*s+n.y-t.y);return Ap(l,l)<=e*e},aS=(t,e,n)=>{const r=n.length;for(let i=0;i<r-1;i++)if(mf(t,e,n[i],n[i+1]))return!0;return!1},h0=(t,e,n)=>!!p0(t,n)||!!aS(t,e,n)||mf(t,e,n[0],n[n.length-1]),Sm=(t,e,n,r,i)=>h0(t,e,Fi(n,r,i||An(n)));var Q_=(t,e)=>{const n=fo(t),r=An(n),i=Fi(n,e,r);return ru(yi(i))},td=(t,e)=>t instanceof HTMLElement&&(!e||new RegExp(`^${e}$`,"i").test(t.nodeName)),fu=t=>t instanceof File,dy=async(t,e,n)=>{const r=await df(t,e,n);return tu(r,"canvas")},ff=t=>t.split("/").pop().split(/\?|\#/).shift();const J_=Ji()&&Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);e!==void 0&&t.append(e)},gp=Ji()&&br("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let uy;var gf=t=>(J_(gp,t),gp.parentNode||document.body.append(gp),clearTimeout(uy),uy=setTimeout(()=>{gp.remove()},500),t);let wm=null;var Ss=()=>(wm===null&&(wm=Ji()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),wm),sS=t=>new Promise((e,n)=>{let r=!1;!t.parentNode&&Ss()&&(r=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",gf(t));const i=()=>{const a=t.naturalWidth,s=t.naturalHeight;a&&s&&(r&&t.remove(),clearInterval(o),e({width:a,height:s}))};t.onerror=a=>{clearInterval(o),n(a)};const o=setInterval(i,1);i()}),lS=t=>new Promise((e,n)=>{const r=()=>{e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return r();t.onloadedmetadata=r,t.onerror=()=>n(t.error)}),Mh=t=>/^image/.test(t.type),$f=t=>new Promise(e=>{const n=Ve(t)?t:URL.createObjectURL(t),r=()=>{const o=new Image;o.src=n,e(o)};if(t instanceof Blob&&Mh(t))return r();const i=document.createElement("video");i.preload="metadata",i.onloadedmetadata=()=>e(i),i.onerror=r,i.src=n}),Jp=t=>t.nodeName==="VIDEO",cS=async t=>{let e,n;e=t.src?t:await $f(t);try{n=Jp(e)?await lS(e):await sS(e)}finally{fu(t)&&URL.revokeObjectURL(e.src)}return n},tC=async t=>{const e=await cS(t),n=await(o=>new Promise((a,s)=>{if(o.complete)return a(o);o.onload=()=>a(o),o.onerror=()=>s(new Error("Failed to load image"))}))(t),r=br("canvas",e);r.getContext("2d",{willReadFrequently:!0}).drawImage(n,0,0);const i=await df(r);return tu(i,ff(n.src))},Nc=(t=0,e=!0)=>new(lf("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e}),py=(t,e,n=r=>r)=>t.getAllResponseHeaders().indexOf(e)>=0?n(t.getResponseHeader(e)):void 0,eC=t=>{if(!t)return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return e.length?decodeURI(e[e.length-1]):null};const nC="URL_REQUEST";class Xd extends Error{constructor(e,n,r){super(e),this.name="EditorError",this.code=n,this.metadata=r}}var dS=(t,e)=>{const{headers:n={},credentials:r}=e||{};Object.entries(n).forEach(([i,o])=>t.setRequestHeader(i,o)),r&&(t.withCredentials=r!=="omit")},rC=(t,e,n)=>/^data:/.test(t)?(async(r,i="data-uri",o=ve)=>{o(Nc(0));const a=await fetch(r);o(Nc(.33));const s=await a.blob();let l;Mh(s)||(l="image/"+(r.includes(",/9j/")?"jpeg":"png")),o(Nc(.66));const c=tu(s,i,l);return o(Nc(1)),c})(t,void 0,e):((r,i,o)=>new Promise((a,s)=>{const l=()=>s(new Xd("Error fetching image",nC,c)),c=new XMLHttpRequest;c.onprogress=i,c.onerror=l,c.onload=()=>{if(!c.response||c.status>=300||c.status<200)return l();const u=py(c,"Content-Type"),p=py(c,"Content-Disposition",eC)||ff(r);a(tu(c.response,p,u||uf(p)))};const{willRequest:d}=o;Promise.resolve(d&&d(r,{resourceType:"image"})).then(u=>{if(u===!1)return s("Image load rejected");c.open("GET",r),dS(c,u),c.responseType="blob",c.send()}).catch(console.error)}))(t,e,n),yf=t=>t instanceof Blob&&!(t instanceof File),uS=t=>"close"in t,iC=async(t,e,n)=>{if(fu(t)||yf(t))return t;if(Ve(t))return await rC(t,e,n);if(td(t,"canvas"))return await dy(t);if(td(t,"img"))return await tC(t);if(Qc(t)||uS(t))return await dy(await ad(t));throw new Xd("Invalid image source","invalid-image-source")};let Tm=null;var bf=()=>(Tm===null&&(Tm=Ji()&&/^mac/i.test(navigator.platform)),Tm);let Em=null;var is=()=>(Em===null&&(Em=Ji()&&(cf(/iPhone|iPad|iPod/)||bf()&&navigator.maxTouchPoints>=1)),Em),oC=async(t,e=1)=>await _h()||is()||e<5?t:ii(t.height,t.width),pS=t=>/jpeg/.test(t.type),aC=t=>{return typeof(e=t)!="object"||e.constructor!=Object?t:JSON.stringify(t);var e},vf=(t,e=0,n)=>(e===0||(t.translate(n.x,n.y),t.rotate(e),t.translate(-n.x,-n.y)),t),hS=(t,e,n)=>(t.scale(e,n),t),sC=async(t,e={})=>{const{flipX:n,flipY:r,rotation:i,crop:o}=e,a=Is(t),s=n||r,l=!!i,c=o&&(o.x||o.y||o.width||o.height),d=c&&Aa(o,fo(a)),u=c&&!d;if(!s&&!l&&!u)return t;let p,h=br("canvas",{width:t.width,height:t.height});if(h.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),s){const f=br("canvas",{width:h.width,height:h.height}).getContext("2d",{willReadFrequently:!0});hS(f,n?-1:1,r?-1:1),f.drawImage(h,n?-h.width:0,r?-h.height:0),f.restore(),pi(h),h=f.canvas}if(l){const f=Us(dc(yi(Fi(cl(h),i))),Math.floor),m=br("canvas",{width:o.width,height:o.height}).getContext("2d",{willReadFrequently:!0});(($,b,S)=>{$.translate(b,S)})(m,-o.x,-o.y),vf(m,i,Jc(f)),m.drawImage(h,.5*(f.width-h.width),.5*(f.height-h.height)),m.restore(),pi(h),h=m.canvas}else if(u)return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(o.x,o.y,o.width,o.height),pi(h),p;return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,h.width,h.height),pi(h),p},lC=(t,e)=>{const{imageData:n,width:r,height:i}=t,o=n.width,a=n.height,s=Math.round(r),l=Math.round(i),c=n.data,d=new Uint8ClampedArray(s*l*4),u=o/s,p=a/l,h=Math.ceil(.5*u),f=Math.ceil(.5*p);for(let m=0;m<l;m++)for(let $=0;$<s;$++){const b=4*($+m*s);let S=0,v=0,T=0,C=0,R=0,A=0,E=0;const M=(m+.5)*p;for(let P=Math.floor(m*p);P<(m+1)*p;P++){const _=Math.abs(M-(P+.5))/f,y=($+.5)*u,z=_*_;for(let O=Math.floor($*u);O<($+1)*u;O++){let I=Math.abs(y-(O+.5))/h;const k=Math.sqrt(z+I*I);if(k<-1||k>1||(S=2*k*k*k-3*k*k+1,S<=0))continue;I=4*(O+P*o);const G=c[I+3];E+=S*G,T+=S,G<255&&(S=S*G/250),C+=S*c[I],R+=S*c[I+1],A+=S*c[I+2],v+=S}}d[b]=C/v,d[b+1]=R/v,d[b+2]=A/v,d[b+3]=E/T}e(null,{data:d,width:s,height:l})},xf=t=>{if(t instanceof ImageData)return t;let e;try{e=new ImageData(t.width,t.height)}catch{e=br("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},cC=async(t,e={},n)=>{const{width:r,height:i,fit:o,upscale:a}=e;if(!r&&!i)return t;let s=r,l=i;if(r?i||(l=r):s=i,o!=="force"){const c=s/t.width,d=l/t.height;let u=1;if(o==="cover"?u=Math.max(c,d):o==="contain"&&(u=Math.min(c,d)),u>1&&a===!1)return t;s=Math.round(t.width*u),l=Math.round(t.height*u)}return s=Math.max(s,1),l=Math.max(l,1),t.width===s&&t.height===l?t:n?n(t,s,l):(t=await mu(lC,[{imageData:t,width:s,height:l}],[t.data.buffer]),xf(t))},dC=(t,e)=>{const{imageData:n,matrix:r}=t;if(!r)return e(null,n);const i=new Uint8ClampedArray(n.width*n.height*4),o=n.data,a=o.length,s=r[0],l=r[1],c=r[2],d=r[3],u=r[4],p=r[5],h=r[6],f=r[7],m=r[8],$=r[9],b=r[10],S=r[11],v=r[12],T=r[13],C=r[14],R=r[15],A=r[16],E=r[17],M=r[18],P=r[19];let _=0,y=0,z=0,O=0,I=0,k=0,G=0,X=0,q=0,D=0,lt=0,pt=0;for(;_<a;_+=4)y=o[_]/255,z=o[_+1]/255,O=o[_+2]/255,I=o[_+3]/255,k=y*s+z*l+O*c+I*d+u,G=y*p+z*h+O*f+I*m+$,X=y*b+z*S+O*v+I*T+C,q=y*R+z*A+O*E+I*M+P,D=Math.max(0,k*q)+(1-q),lt=Math.max(0,G*q)+(1-q),pt=Math.max(0,X*q)+(1-q),i[_]=255*Math.max(0,Math.min(1,D)),i[_+1]=255*Math.max(0,Math.min(1,lt)),i[_+2]=255*Math.max(0,Math.min(1,pt)),i[_+3]=255*I;e(null,{data:i,width:n.width,height:n.height})},mS=(t,e)=>{const{imageData:n,matrix:r}=t;if(!r)return e(null,n);let i=r.reduce((E,M)=>E+M);i=i<=0?1:i;const o=n.width,a=n.height,s=n.data;let l=0,c=0,d=0;const u=Math.round(Math.sqrt(r.length)),p=Math.floor(u/2);let h=0,f=0,m=0,$=0,b=0,S=0,v=0,T=0,C=0,R=0;const A=new Uint8ClampedArray(o*a*4);for(d=0;d<a;d++)for(c=0;c<o;c++){for(h=0,f=0,m=0,$=0,S=0;S<u;S++)for(b=0;b<u;b++)v=d+S-p,T=c+b-p,v<0&&(v=a-1),v>=a&&(v=0),T<0&&(T=o-1),T>=o&&(T=0),C=4*(v*o+T),R=r[S*u+b],h+=s[C]*R,f+=s[C+1]*R,m+=s[C+2]*R,$+=s[C+3]*R;A[l]=h/i,A[l+1]=f/i,A[l+2]=m/i,A[l+3]=$/i,l+=4}e(null,{data:A,width:o,height:a})},uC=(t,e)=>{let{imageData:n,strength:r}=t;if(!r)return e(null,n);const i=new Uint8ClampedArray(n.width*n.height*4),o=n.width,a=n.height,s=n.data,l=(z,O)=>(c=z-R,d=O-A,Math.sqrt(c*c+d*d));let c,d,u,p,h,f,m,$,b,S,v,T=0,C=0,R=.5*o,A=.5*a,E=l(0,0);for(r>0?(u=0,p=0,h=0):(r=Math.abs(r),u=1,p=1,h=1),C=0;C<a;C++)for(T=0;T<o;T++)M=4*(T+C*o),P=s,_=i,y=l(T,C)*r/E,f=P[M]/255,m=P[M+1]/255,$=P[M+2]/255,b=P[M+3]/255,S=1-y,v=S*b+y,_[M]=(S*b*f+y*u)/v*255,_[M+1]=(S*b*m+y*p)/v*255,_[M+2]=(S*b*$+y*h)/v*255,_[M+3]=255*v;var M,P,_,y;e(null,{data:i,width:n.width,height:n.height})},pC=(t,e)=>{const{imageData:n,level:r,monochrome:i=!1}=t;if(!r)return e(null,n);const o=new Uint8ClampedArray(n.width*n.height*4),a=n.data,s=a.length;let l,c,d,u=0;const p=()=>255*(2*Math.random()-1)*r,h=i?()=>{const f=p();return[f,f,f]}:()=>[p(),p(),p()];for(;u<s;u+=4)[l,c,d]=h(),o[u]=a[u]+l,o[u+1]=a[u+1]+c,o[u+2]=a[u+2]+d,o[u+3]=a[u+3];e(null,{data:o,width:n.width,height:n.height})},hC=(t,e)=>{const{imageData:n,level:r}=t;if(!r)return e(null,n);const i=new Uint8ClampedArray(n.width*n.height*4),o=n.data,a=o.length;let s,l,c,d=0;for(;d<a;d+=4)s=o[d]/255,l=o[d+1]/255,c=o[d+2]/255,i[d]=255*Math.pow(s,r),i[d+1]=255*Math.pow(l,r),i[d+2]=255*Math.pow(c,r),i[d+3]=o[d+3];e(null,{data:i,width:n.width,height:n.height})},mC=async(t,e={})=>{const{colorMatrix:n,convolutionMatrix:r,gamma:i,noise:o,vignette:a}=e,s=[];if(r&&s.push([mS,{matrix:r.clarity}]),i>0&&s.push([hC,{level:1/i}]),n&&!(d=>{const u=d.length;let p;const h=u>=20?6:u>=16?5:3;for(let f=0;f<u;f++)if(p=d[f],p===1&&f%h!=0||p!==0&&p!==1)return!1;return!0})(n)&&s.push([dC,{matrix:n}]),(o>0||o<0)&&s.push([pC,{level:o}]),(a>0||a<0)&&s.push([uC,{strength:a}]),!s.length)return t;const l=(d,u)=>`(err, imageData) => {
            (${d[u][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${u}]), 
                ${d[u+1]?l(d,u+1):"done"})
        }`,c=`function (options, done) {
        const filterInstructions = options.filterInstructions;
        const imageData = options.imageData;
        (${l(s,0)})(null, imageData)
    }`;return t=await mu(c,[{imageData:t,filterInstructions:s.map(d=>d[1])}],[t.data.buffer]),xf(t)},Sn=t=>typeof t=="number",th=t=>Ve(t)&&t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g)!==null,Fe=(t,e)=>t.hasOwnProperty(e),zr=t=>Array.isArray(t);let hy=64,Im=102,my=112,fy=!1;var fS=(t,e)=>(!fy&&Ji()&&(/^win/i.test(navigator.platform)&&(Im=103),(is()||bf())&&(hy=63.5,Im=110,my=123),fy=!0),`<svg${e?` aria-label="${e}"`:""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${hy}" y="${Im}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${my}px">${t}</text></svg>`),ed=t=>t instanceof Blob,so=(t,e)=>t/e*100+"%",Bi=t=>`rgba(${Math.round(255*t[0])}, ${Math.round(255*t[1])}, ${Math.round(255*t[2])}, ${Sn(t[3])?t[3]:1})`,Dp=t=>Object.values(t).join("_");const gS=async(t,e=0)=>{const n=br("canvas",{width:80,height:80}).getContext("2d");return await((r=0)=>new Promise(i=>{setTimeout(i,r)}))(e),n.drawImage(t,0,0,80,80),!((r=>!new Uint32Array(r.getImageData(0,0,r.canvas.width,r.canvas.height).data.buffer).some(i=>i!==0))(n)&&e<=256)||await gS(t,e+16)},gy=new Map;var fC=t=>new Promise((e,n)=>{const r=new FileReader;r.onerror=()=>n(r.error),r.onload=()=>e(r.result),r.readAsDataURL(t)}),Gs=()=>{let t=[];return{sub:(e,n)=>(t.push({event:e,callback:n}),()=>t=t.filter(r=>r.event!==e||r.callback!==n)),pub:(e,n)=>{t.filter(r=>r.event===e).forEach(r=>r.callback(n))}}};let _m=null;var ws=()=>(_m===null&&(_m=cf(/Firefox/)),_m);const bo=32,Sf=({color:t=[0,0,0],fontSize:e=16,fontFamily:n="sans-serif",fontVariant:r="normal",fontWeight:i="normal",fontStyle:o="normal",textAlign:a="left",letterSpacing:s="normal",lineHeight:l=20},c=1)=>`font-size:${e*c}px;font-style:${o};font-weight:${i};font-family:${n};font-variant:${r};line-height:${l*c}px;text-align:${a};letter-spacing:${Sn(s)?s+"px":"normal"};color:${Bi(t)};`,wf=(t,e,n=1)=>{const{width:r,height:i,disableNewline:o}=e,a=!r,s=o===!1?((d="")=>d.split(`
`).length)(t):void 0,l=a?"normal":"break-word",c=a&&!s?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${a?"auto":r*n+"px"};height:${i?i*n+"px":"auto"};margin-top:0;margin-bottom:0;padding-top:${(({fontSize:d=16,lineHeight:u=20}={})=>.5*Math.max(0,d-u))(e)*n}px;word-break:${l};word-wrap:normal;white-space:${c};`},$y=new Map,$S=t=>{const e=[];for(const n of Array.from(t.childNodes))n.nodeType===Node.TEXT_NODE?e.push(gC(n)):e.push(...$S(n));return e},yS="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",gC=t=>{const e=t.nodeValue;if(!e)return[];const n=e.length,r=document.createRange();r.selectNodeContents(t);const i=[];for(let a=0;a<n;a++){r.setStart(t,0),r.setEnd(t,a+1);const s=r.getClientRects().length-1,l=e.charAt(a);i[s]?i[s]+=l:i.push(l)}const o=r.getClientRects();return i.map((a,s)=>({rect:o[s],text:a}))},yy=new Map,Ca=(t="",e)=>{const{width:n=0,height:r=0}=e;if(n&&r)return ii(n,r);let{fontSize:i=16,fontFamily:o,lineHeight:a=20,fontWeight:s,fontStyle:l,fontVariant:c,letterSpacing:d}=e;const u=Dp({text:t,fontFamily:o,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:i,letterSpacing:d,lineHeight:a,width:n});let p=yy.get(u);if(p)return p;let h=1;i>1e3&&ws()&&(h=i/1e3,i=1e3,a/=h);const f=gf(br("pre",{contenteditable:"true",spellcheck:"false",style:`${yS}${Sf({...e,fontSize:i,lineHeight:a})};${wf(t,e)}"`,innerHTML:t})).getBoundingClientRect();return p=Is(f),p.height+=Math.max(0,i-a),p=Us(p,m=>m*h),n&&(p.width=n),yy.set(u,p),p},by=new Map,$C=(t,e)=>new Promise((n,r)=>{let i=by.get(t);i===void 0&&(i=((o,a)=>{const{sub:s,pub:l}=Gs();let c,d;return Promise.resolve(a&&a(o,{resourceType:"stylesheet"})).then(u=>{if(u===!1)return d="requestPrevented",l("error",d);const{headers:p,credentials:h}=u||{};fetch(o,{headers:p,credentials:h}).then(f=>f.text()).then(f=>{c=f,l("load",c)}).catch(f=>{d=f,l("error",d)})}),{sub:(u,p)=>u==="load"&&c?p(c):u==="error"&&d?p(d):void s(u,p)}})(t,e),by.set(t,i)),i.sub("load",n),i.sub("error",r)}),vy=async(t,e)=>{let n;try{n=await $C(t,e)}catch{return[]}const r=br("style",{innerHTML:n,id:Oa()});document.head.append(r);const i=Array.from(document.styleSheets).find(o=>o.ownerNode.id===r.id);return r.remove(),Array.from(i.cssRules)},Ac=new Map,yC=async(t,e)=>{if(Ac.has(t.href))return Ac.get(t.href);let n;try{n=Array.from(t.cssRules);for(const r of(i=>i.filter(o=>o instanceof CSSImportRule))(n)){const i=r.href;if(Ac.has(i)){const a=Ac.get(i);n=[...n,...a];continue}const o=await vy(i,e);Ac.set(i,o),n=[...n,...o]}}catch{const i=t.href;n=await vy(i,e),Ac.set(i,n)}return(r=>r.filter(i=>i instanceof CSSFontFaceRule))(n)},bS=(t,e)=>t.style.getPropertyValue(e),bC=(t,e)=>t.style?bS(t,"font-family").replace(/^"|"$/g,"")==e:!1,vC=async(t,e)=>{const n=((r,i)=>{const o=[];for(const a of r)bC(a,i)&&o.push(a);return o})(await(async r=>{const i=Array.from(document.styleSheets).map(s=>yC(s,r)),o=await Promise.all(i),a=[];return o.forEach(s=>a.push(...s)),a})(e),t);return n.length?n.map(r=>{const i=r.parentStyleSheet.href&&new URL(r.parentStyleSheet.href),o=i?i.origin+(l=>l.pathname.split("/").slice(0,-1).join("/"))(i)+"/":"",a=r.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],s=Array.from(r.style).filter(l=>l!="src").reduce((l,c)=>l+=c+":"+bS(r,c)+";","");return[/^http/.test(a)?a:o+a,s]}):[]},xy=new Map,Sy=new Map;var vS=async(t="",e)=>{if(!t.length)return;let{color:n,imageWidth:r=300,imageHeight:i=150,paddingTop:o=0,paddingRight:a=bo,paddingBottom:s=0,paddingLeft:l=bo,fontFamily:c,fontSize:d,pixelRatio:u=1,willRequest:p,outline:h,blur:f}=e,m=1,$="";d>1e3&&ws()&&(m=d/1e3,$=`transform-origin:0 0;transform:scale(${m})`);const b=u/m,S=(r+l+a)*u,v=(i+s+o)*u,T=await(async(P,_)=>{if(xy.get(P))return;let y=Sy.get(P);if(!y){const O=await vC(P,_);if(!O.length)return void xy.set(P,!0);const I=[];for(const[k,G]of O){const X=await fetch(k).then(lt=>lt.blob()),q=!(z=X.type)||/woff2/.test(z)?"woff2":/woff/.test(z)?"woff":/ttf|truetype/.test(z)?"truetype":/otf|opentype/.test(z)?"opentype":/svg/.test(z)?"svg":"woff2",D=await fC(X);I.push(`@font-face { src:url(${D}) format('${q}');${G};font-display:block; }`)}y=I.join(""),Sy.set(P,y)}var z;return y})(c,p),C=t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g," ").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),R=`top:${o*b}px;right:${a*b}px;bottom:${s*b}px;left:${l*b}px`;let A=n,E="",M="";if(h||f){const P=Bi(n);h&&(A=[0,0,0,0],E=`-webkit-text-stroke: ${2*h*b}px ${P}`),f&&(Ss()?M=`filter:blur(${f*b*.4}px)`:(A=[0,0,0,0],M=`text-shadow: 0 0 ${f*b}px ${P}`))}return((P,{safariCacheKey:_="*"}={})=>new Promise((y,z)=>{const O=new Image;O.onerror=()=>z(new Error("Failed to load SVG")),O.onload=()=>{if(!Ss()||!P.includes("@font-face")||gy.has(_))return y(O);gS(O).then(()=>{gy.set(_,!0),y(O)})},O.src="data:image/svg+xml,"+P}))(`<svg xmlns="http://www.w3.org/2000/svg" width="${S}" height="${v}" viewBox="0 0 ${S} ${v}"><foreignObject x="0" y="0" width="${S}" height="${v}"><div xmlns="http://www.w3.org/1999/xhtml">${T?`<style>${T}</style>`:""}<pre contenteditable="true" spellcheck="false" style="position:absolute;${R};${Sf({...e,color:A,fontSize:d},b)};${wf(t,e,b)};${$};${E};${M}">${C}</pre></div></foreignObject></svg>`,{safariCacheKey:c})};const ri=t=>{const e={...t};return Hx(e)},wy=(t,e={})=>{const n=bi(t);let r,i;const o=e.width||e.rx,a=e.height||e.ry;if(o&&a)return ko(e);if(o||a){r=parseFloat(o||Number.MAX_SAFE_INTEGER),i=parseFloat(a||Number.MAX_SAFE_INTEGER);const s=Math.min(r,i);Ve(o)||Ve(a)?(r=s+"%",i=s*n+"%"):(r=s,i=s)}else r="10%",i=10*n+"%";return{[(e.width?"width":e.rx?"rx":void 0)||"width"]:r,[(e.width?"height":e.rx?"ry":void 0)||"height"]:i}},Ty=(t,e={})=>{return{width:void 0,height:void 0,...e,aspectRatio:1,backgroundImage:(n=fS(t),"data:image/svg+xml,"+n.replace("<","%3C").replace(">","%3E"))};var n},Ey=(t,e={})=>({backgroundColor:[0,0,0,0],...ui(e)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...e,backgroundImage:Ve(t)?t:ed(t)?URL.createObjectURL(t):t}),Iy=(t,e)=>{let n;if(Ve(t)||ed(t)){const r={...wy(e),backgroundSize:"contain"};n=th(t)?Ty(t,r):Ey(t,r)}else if(t.src){const r=wy(e,t.shape||t),i={...t.shape,...r};if(t.width&&t.height&&!Fe(i,"aspectRatio")){const o=b0(r,"width",e),a=b0(r,"height",e);i.aspectRatio=Ra(o,a)}i.backgroundSize||t.shape||t.width&&t.height||(i.backgroundSize="contain"),n=th(t.src)?Ty(t.src,i):Ey(t.src,i)}else t.shape&&(n=ri(t.shape));return Fe(n,"backgroundImage")&&(Fe(n,"backgroundColor")||(n.backgroundColor=[0,0,0,0]),Fe(n,"disableStyle")||(n.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),e?si(n,e):n},Fs=t=>dt(t.x1,t.y1),Bs=t=>dt(t.x2,t.y2),di=t=>Fe(t,"text"),eh=t=>di(t)&&!(kh(t)||Fe(t,"width")),Fp=t=>di(t)&&(kh(t)||Fe(t,"width")),Qo=t=>!di(t)&&xC(t),ui=t=>Fe(t,"rx"),$i=t=>Fe(t,"x1"),ci=t=>Fe(t,"points"),Ds=t=>di(t)&&t.isEditing,$p=t=>!Fe(t,"opacity")||t.opacity>0,dl=t=>t.isSelected,Cm=t=>t.isEditing,Zo=t=>t._isDraft,tc=t=>Fe(t,"width")&&Fe(t,"height"),xS=t=>{const e=Fe(t,"right"),n=Fe(t,"bottom");return e||n},kh=t=>(Fe(t,"x")||Fe(t,"left"))&&Fe(t,"right")||(Fe(t,"y")||Fe(t,"top"))&&Fe(t,"bottom"),xC=t=>tc(t)||kh(t),m0=t=>(t._isDraft=!0,t),_y=t=>(t._isDraft=!1,t),f0=(t,e)=>t.disableStyle!==!0&&(!zr(t.disableStyle)||!e||!t.disableStyle.includes(e)),Za=t=>t.disableSelect!==!0,Cy=t=>t.disableRemove!==!0,SC=t=>!t.disableFlip&&!Zo(t)&&!xS(t)&&(e=>Fe(e,"backgroundImage")||Fe(e,"text"))(t),Lc=(t,e)=>!!di(t)&&t.disableInput!==!0&&(hr(t.disableInput)?t.disableInput(e??t.text):e||!0),Xl=(t,e)=>t.disableTextLayout!==!0&&(!zr(t.disableTextLayout)||!e||!t.disableTextLayout.includes(e)),g0=t=>t.disableManipulate!==!0&&!Zo(t)&&!xS(t),zd=t=>g0(t)&&t.disableMove!==!0,$0=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),Ry=t=>(delete t.rotation,t),My=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),ky=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),Py=t=>{let e=t.text;e=e.replace(/&(#[0-9]+|[a-z]+);/gi,(n,r)=>`___${r}___`),e=e.replace(/&/,"&amp;"),t.text=e.replace(/___(#[0-9]+|[a-z]+)___/gi,(n,r)=>`&${r};`)},wC=t=>{if(t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],t.format=t.format==="html"?"html":"text",t.textShadow){const[e,n,r,i]=t.textShadow;t.textShadowX=e,t.textShadowY=n,t.textShadowBlur=r,t.textShadowColor=i,delete t.textShadow}if(t.textOutline){const[e,n]=t.textOutline;t.textOutlineWidth=e,t.textOutlineColor=n,delete t.textOutline}return t.format==="html"?Py(t):(e=>{Py(e);let n=e.text;n=n.replace(/</g,"&gt;"),n=n.replace(/>/g,"&lt;"),e.text=n})(t),eh(t)?TC(t):EC(t)},TC=t=>(t.disableNewline!==!1&&(delete t.textAlign,t.text=t.text.replace(/\n/g," ")),$0(t)),EC=t=>(t.textAlign=t.textAlign||"left",t),SS=t=>((e=>{Ve(e.id)||(e.id=Oa()),Fe(e,"rotation")||(e.rotation=0),Fe(e,"opacity")||(e.opacity=1),Fe(e,"disableErase")||(e.disableErase=!0)})(t),di(t)?wC(t):Qo(t)?(e=>{e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],ky(e)})(t):ci(t)?(e=>{My(e),Ry(e),Fe(e,"pathClose")||(e.disableResize=!0,Fe(e,"disableMove")||(e.disableMove=!0)),$0(e)})(t):$i(t)?(e=>{My(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,Ry(e),$0(e)})(t):ui(t)&&(e=>{e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],ky(e)})(t),t),IC=t=>di(t)?"text":Qo(t)?"rectangle":ci(t)?"path":$i(t)?"line":ui(t)?"ellipse":void 0,nh=(t,e)=>parseFloat(t)/100*e,_C=new RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),CC=new RegExp(/^y|top|bottom|^height|ry/,"i"),Tf=(t,e,{width:n,height:r})=>{if(Array.isArray(e))return e.map(o=>($c(o)&&wS(o,{width:n,height:r}),Ve(o)&&(o=Tf(t,o,{width:n,height:r})),o));if(typeof e!="string"||!e.endsWith("%"))return e;const i=parseFloat(e)/100;return _C.test(t)?ln(n*i,6):CC.test(t)?ln(r*i,6):e},RC=Tf,MC=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],wS=(t,e)=>{Object.entries(t).map(([n,r])=>{t[n]=Tf(n,r,e)}),t.text&&MC.filter(n=>Ve(t[n])).forEach(n=>{var r,i;t[n]=(r=t[n],i=t.fontSize,Math.round(i*(parseFloat(r)/100)))})},si=(t,e)=>(wS(t,e),IS(t,e),t),y0=(t,e)=>{let n;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?n=e.width:/^y|height|ry/.test(t)&&(n=e.height),n},b0=(t,e,n)=>Array.isArray(t[e])?t[e].map(r=>Object.entries(r).reduce((i,[o,a])=>(i[o]=Ve(a)?nh(a,y0(o,n)):a,i),{})):Ve(t[e])?nh(t[e],y0(e,n)):t[e],jc=(t,e,n)=>e.reduce((r,i)=>{const o=b0(t,i,n);return r[i]=o,r},{}),ts=(t,e,n)=>(Object.keys(e).forEach(r=>((i,o,a,s)=>{if(!Ve(i[o]))return i[o]=a,i;const l=y0(o,s);return i[o]=l===void 0?a:so(a,l),i})(t,r,e[r],n)),t),TS=(t,e)=>{const n=t.filter(r=>r.x<0||r.y<0||r.x1<0||r.y1<0).reduce((r,i)=>{const[o,a,s,l]=(c=>{const d=gl(),u=c.strokeWidth||0;if(Qo(c))d.x=c.x-.5*u,d.y=c.y-.5*u,d.width=c.width+u,d.height=c.height+u;else if($i(c)){const{x1:p,y1:h,x2:f,y2:m}=c,$=Math.abs(Math.min(p,f)),b=Math.abs(Math.max(p,f)),S=Math.abs(Math.min(h,m)),v=Math.abs(Math.min(h,m));d.x=$+.5*u,d.y=b+.5*u,d.width=b-$+u,d.height=v-S+u}else ui(c)&&(d.x=c.x-c.rx+.5*u,d.y=c.y-c.ry+.5*u,d.width=2*c.rx+u,d.height=2*c.ry+u);return d&&Fe(c,"rotation")&&Fi(d,c.rotation),uc(d)})(i);return r.top=Math.min(o,r.top),r.left=Math.min(l,r.left),r.bottom=Math.max(s,r.bottom),r.right=Math.max(a,r.right),r},{top:0,right:0,bottom:0,left:0});return n.right>0&&(n.right-=e.width),n.bottom>0&&(n.bottom-=e.height),n},ES=(t,e,n)=>{const r=ri(t);si(r,e);const i=n(r);return Array.isArray(i)?i:[i]},IS=(t,e)=>{if(Fe(t,"left")&&(t.x=t.left),Fe(t,"right")&&!Ve(t.right)){const n=e.width-t.right;Fe(t,"left")?(t.x=t.left,t.width=Math.max(0,n-t.left)):Fe(t,"width")&&(t.x=n-t.width)}if(Fe(t,"top")&&(t.y=t.top),Fe(t,"bottom")&&!Ve(t.bottom)){const n=e.height-t.bottom;Fe(t,"top")?(t.y=t.top,t.height=Math.max(0,n-t.top)):Fe(t,"height")&&(t.y=n-t.height)}return t},_S=(t,e)=>(ci(t)&&t.points.filter(n=>Sn(n.x)).forEach(n=>{n.x*=e,n.y*=e}),$i(t)&&Sn(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),Sn(t.x)&&Sn(t.y)&&(t.x*=e,t.y*=e),Sn(t.width)&&Sn(t.height)&&(t.width*=e,t.height*=e),Sn(t.rx)&&Sn(t.ry)&&(t.rx*=e,t.ry*=e),(n=>Sn(n.strokeWidth)&&n.strokeWidth>0)(t)&&(t.strokeWidth*=e),di(t)&&(t._scale=e,Sn(t.fontSize)&&(t.fontSize*=e),Sn(t.lineHeight)&&(t.lineHeight*=e),Sn(t.width)&&!Sn(t.height)&&(t.width*=e)),Fe(t,"cornerRadius")&&Sn(t.cornerRadius)&&(t.cornerRadius*=e),t),CS=t=>{if(Qo(t))return dt(t.x+.5*t.width,t.y+.5*t.height);if(ui(t))return dt(t.x,t.y);if(t.text){if(Fp(t)){const n=t.height||Ca(t.text,t).height;return dt(t.x+.5*t.width,t.y+.5*n)}const e=Ca(t.text,t);return dt(t.x+.5*e.width,t.y+.5*e.height)}return ci(t)?ha(t.points):$i(t)?ha([Fs(t),Bs(t)]):void 0};var gu=t=>/canvas/i.test(t.nodeName),kC=(t,e)=>new Promise((n,r)=>{let i=t,o=!1;const a=()=>{o||(o=!0,hr(e)&&Promise.resolve().then(()=>e(ii(i.naturalWidth,i.naturalHeight))))};if(i.src||(i=new Image,Ve(t)&&new URL(t,location.href).origin!==location.origin&&(i.crossOrigin="anonymous"),i.src=Ve(t)?t:URL.createObjectURL(t)),i.complete)return a(),n(i);hr(e)&&sS(i).then(a).catch(r),i.onload=()=>{a(),n(i)},i.onerror=()=>r(new Error("Failed to load image"))});const Ay=new Map([]),Ef=(t,e={})=>new Promise((n,r)=>{const{onMetadata:i=ve,onLoad:o=n,onError:a=r,onComplete:s=ve}=e;let l=Ay.get(t);if(l||(l={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:Gs()},Ay.set(t,l)),l.bus.sub("meta",i),l.bus.sub("load",o),l.bus.sub("error",a),l.bus.sub("complete",s),gu(t)){const c=t,d=c.cloneNode();l.complete=!0,l.image=d,l.size=Yd(c)}if(l.complete)return l.bus.pub("meta",{size:l.size}),l.error?l.bus.pub("error",l.error):l.bus.pub("load",l.image),l.bus.pub("complete"),void(l.bus=Gs());l.loading||(l.loading=!0,kC(t,c=>{l.size=c,l.bus.pub("meta",{size:c})}).then(c=>{l.image=c,l.bus.pub("load",c)}).catch(c=>{l.error=c,l.bus.pub("error",c)}).finally(()=>{l.complete=!0,l.loading=!1,l.bus.pub("complete"),l.bus=Gs()}))}),PC=(t,e,n,r)=>t.drawImage(e,n.x,n.x,n.width,n.height,r.x,r.y,r.width,r.height);var RS=async(t,e,n,r,i=PC,o)=>{t.save(),t.clip(),await i(t,e,n,r,o),t.restore()};const rh=(t,e,n,r,i)=>{const o=Pn(t);if(r){const s=ma(yi(r),ln);return s.x*=n.width,s.width*=n.width,s.y*=n.height,s.height*=n.height,{srcRect:s,destRect:o}}const a=Br(0,0,n.width,n.height);if(e==="contain"){const s=vo(t,bi(a));o.width=s.width,o.height=s.height,i?(o.x+=i.x,o.y+=i.y):(o.x+=s.x,o.y+=s.y)}else if(e==="cover"){const s=js(o,a.width/a.height);o.width=s.width,o.height=s.height,i?(o.x+=i.x,o.y+=i.y):(o.x+=s.x,o.y+=s.y)}else e?(o.width=e.width,o.height=e.height,i&&(o.x+=i.x,o.y+=i.y)):i&&(o.width=n.width,o.height=n.height,o.x+=i.x,o.y+=i.y);return{srcRect:a,destRect:o}},Rm=(t,e)=>(e.cornerRadius>0?((n,r,i,o,a,s)=>{o<2*s&&(s=o/2),a<2*s&&(s=a/2),n.beginPath(),n.moveTo(r+s,i),n.arcTo(r+o,i,r+o,i+a,s),n.arcTo(r+o,i+a,r,i+a,s),n.arcTo(r,i+a,r,i,s),n.arcTo(r,i,r+o,i,s),n.closePath()})(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),Ly=(t,e)=>(e.backgroundColor&&t.fill(),t),Oy=(t,e)=>(e.strokeWidth&&t.stroke(),t);var If=async(t,e,n={})=>{const{drawImage:r}=n;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?Bi(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Bi(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let i;if(i=gu(e.backgroundImage)?e.backgroundImage:await Ef(e.backgroundImage),Rm(t,e),Ly(t,e),e.backgroundRepeat==="repeat"){const o=e.backgroundPosition||{x:0,y:0},{srcRect:a,destRect:s}=rh(e,e.backgroundSize||Yd(i),Yd(i),e.backgroundCorners,{x:0,y:0}),l=document.createElement("canvas");l.width=s.width,l.height=s.height;const c=l.getContext("2d",{willReadFrequently:!1,desynchronized:!0});await r(c,i,a,{...s,x:0,y:0});const d=t.createPattern(l,"repeat");t.fillStyle=d,t.save(),t.beginPath(),t.rect(e.x+o.x,e.y+o.y,e.width-o.x,e.height-o.y),t.clip(),t.translate(s.x+o.x,s.y+o.y),t.fill(),pi(l),t.restore()}else{const{srcRect:o,destRect:a}=rh(e,e.backgroundSize,Yd(i),e.backgroundCorners,e.backgroundPosition);await RS(t,i,o,a,r,{feather:e.feather})}return t.beginPath(),Rm(t,e),Oy(t,e),[]}return Rm(t,e),Ly(t,e),Oy(t,e),[]},_f=async(t,e,n={})=>new Promise(async(r,i)=>{const{drawImage:o}=n;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Bi(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Bi(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let a;try{a=await Ef(e.backgroundImage)}catch(d){i(d)}const s=Br(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),{srcRect:l,destRect:c}=rh(s,e.backgroundSize,Yd(a),e.backgroundCorners,e.backgroundPosition);await RS(t,a,l,c,o),e.strokeWidth&&t.stroke(),r([])}else e.strokeWidth&&t.stroke(),r([])}),AC=async(t,e,n)=>{const r=e.width&&e.height?Is(e):Ca(e.text,e),i={x:e.x,y:e.y,width:r.width,height:r.height};if(If(t,{...e,...i,options:n}),!e.text.length)return[];const{textOutlineWidth:o=0,textShadowX:a=0,textShadowY:s=0,textShadowBlur:l=0,textShadowColor:c,outline:d,blur:u,...p}=e;return e.height&&(t.rect(i.x-o+Math.min(a,0),i.y-o+Math.min(s,0),i.width+o+o+Math.abs(a)+l,i.height+o+Math.abs(s)+l),t.save(),t.clip()),(a||s||l)&&(t.save(),t.translate(a,s),await Mm(t,i,e,{...n,paddingLeft:bo+l,paddingRight:bo+l,paddingTop:l,paddingBottom:l,shapeExtendedProps:{color:c,blur:l}}),t.restore()),o&&await Mm(t,i,e,{...n,paddingLeft:bo+o,paddingRight:bo+o,paddingTop:o,paddingBottom:o,shapeExtendedProps:{color:e.textOutlineColor,outline:o}}),e.height&&t.restore(),await Mm(t,i,p,{...n,paddingLeft:bo,paddingRight:bo,paddingTop:0,paddingBottom:0}),[]};const Mm=async(t,e,n,r)=>{const{willRequest:i,shapeExtendedProps:o,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c}=r,d=await vS(n.text,{...n,...o,...e,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,imageWidth:e.width,imageHeight:e.height,willRequest:i});t.drawImage(d,n.x-a,n.y-l,d.width,d.height)};var LC=async(t,e)=>new Promise(async n=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Bi(e.strokeColor):"none",t.globalAlpha=e.opacity;let r=Fs(e),i=Bs(e);t.moveTo(r.x,r.y),t.lineTo(i.x,i.y),e.strokeWidth&&t.stroke(),n([])}),v0=async(t,e)=>new Promise((n,r)=>{if(e.bitmap&&e.points.length===1)return void _f(t,{x:e.points[0].x,y:e.points[0].y,rx:.5*e.strokeWidth,ry:.5*e.strokeWidth,backgroundColor:e.strokeColor}).then(()=>n([]));t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Bi(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Bi(e.backgroundColor):"none",t.globalAlpha=e.opacity;const{points:i}=e;t.lineCap=e.strokeCap,t.lineJoin=e.strokeJoin,t.setLineDash(e.strokeDash||[]),e.pathClose&&t.beginPath(),t.moveTo(i[0].x,i[0].y);const o=i.length;for(let a=1;a<o;a++)t.lineTo(i[a].x,i[a].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),n([])}),MS=(t,e,n,r)=>((e||n)&&(t.translate(r.x,r.y),t.scale(e?-1:1,n?-1:1),t.translate(-r.x,-r.y)),t);const OC=async(t,e,n)=>{t.globalCompositeOperation=e.drawMode==="subtract"?"destination-out":"source-over";const r=CS(e);let i;if(vf(t,e.rotation,r),MS(t,e.flipX,e.flipY,r),Qo(e)?i=If:ui(e)?i=_f:$i(e)?i=LC:ci(e)?i=v0:di(e)&&(i=AC),i){const o=await i(t,e,n);return o.length?[e,...await kS(t,o,n)]:[]}return[]};var kS=async(t,e,n)=>{let r=[];for(const i of e)t.save(),t.beginPath(),r=[...r,...await OC(t,i,n)],t.restore();return r},Cf=async(t,e={})=>{const{shapes:n=[],contextBounds:r=t,transform:i=ve,drawImage:o,willRequest:a,canvasMemoryLimit:s,computeShape:l=ur,preprocessShape:c=ur}=e;if(!n.length)return t;const d=br("canvas");d.width=r.width,d.height=r.height;const u=d.getContext("2d",{willReadFrequently:!0});u.putImageData(t,r.x||0,r.y||0);const p=n.map(ri).map(l).map(c).flat();i(u),await kS(u,p,{drawImage:o,canvasMemoryLimit:s,willRequest:a});const h=u.getImageData(0,0,d.width,d.height);return pi(d),h},DC=async(t,e={})=>{const{backgroundColor:n,backgroundImage:r}=e,i=!(!n||n&&n[3]===0);if(!r&&!i)return t;const o=br("canvas");o.width=t.width,o.height=t.height;const a=o.getContext("2d",{willReadFrequently:!0});if(a.putImageData(t,0,0),a.globalCompositeOperation="destination-over",i&&(a.fillStyle=Bi(n),a.fillRect(0,0,o.width,o.height)),r){let l;l=gu(r)?r:await Ef(r);const{srcRect:c,destRect:d}=rh({x:0,y:0,width:t.width,height:t.height},"cover",{width:l.width,height:l.height});a.drawImage(l,c.x,c.y,c.width,c.height,d.x,d.y,d.width,d.height)}const s=a.getImageData(0,0,o.width,o.height);return pi(o),s},Rf=t=>t.length?t.reduce((e,n)=>((r,i)=>{const o=new Array(20);return o[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15],o[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16],o[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17],o[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18],o[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4],o[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15],o[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16],o[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17],o[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18],o[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9],o[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15],o[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16],o[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17],o[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18],o[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14],o[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15],o[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16],o[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17],o[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18],o[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19],o})([...e],n),t.shift()):[],PS=(t,e)=>{const n=t.width*t.height,r=e.reduce((o,a)=>(a.width>o.width&&a.height>o.height&&(o.width=a.width,o.height=a.height),o),{width:0,height:0}),i=r.width*r.height;return((o,a=2)=>Math.round(o*a)/a)(Math.max(.5,.5+(1-i/n)/2),5)};function Je(){}const Mf=t=>t;function Or(t,e){for(const n in e)t[n]=e[n];return t}function AS(t){return t()}function Dy(){return Object.create(null)}function tr(t){t.forEach(AS)}function Qn(t){return typeof t=="function"}function rn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ho(t,...e){if(t==null)return Je;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function rs(t){let e;return ho(t,n=>e=n)(),e}function N(t,e,n){t.$$.on_destroy.push(ho(e,n))}function Si(t,e,n,r){if(t){const i=LS(t,e,n,r);return t[0](i)}}function LS(t,e,n,r){return t[1]&&r?Or(n.ctx.slice(),t[1](r(e))):n.ctx}function wi(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],a=Math.max(e.dirty.length,i.length);for(let s=0;s<a;s+=1)o[s]=e.dirty[s]|i[s];return o}return e.dirty|i}return e.dirty}function Ti(t,e,n,r,i,o){if(i){const a=LS(e,n,r,o);t.p(a,i)}}function Ei(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function iu(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Fy(t,e){const n={};e=new Set(e);for(const r in t)e.has(r)||r[0]==="$"||(n[r]=t[r]);return n}function Ct(t,e,n){return t.set(n),e}function Jn(t){return t&&Qn(t.destroy)?t.destroy:Je}const OS=typeof window<"u";let DS=OS?()=>window.performance.now():()=>Date.now(),kf=OS?t=>requestAnimationFrame(t):Je;const qc=new Set;function FS(t){qc.forEach(e=>{e.c(t)||(qc.delete(e),e.f())}),qc.size!==0&&kf(FS)}function Pf(t){let e;return qc.size===0&&kf(FS),{promise:new Promise(n=>{qc.add(e={c:t,f:n})}),abort(){qc.delete(e)}}}function Rt(t,e){t.appendChild(e)}function BS(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function FC(t){const e=bt("style");return function(n,r){Rt(n.head||n,r),r.sheet}(BS(t),e),e.sheet}function it(t,e,n){t.insertBefore(e,n||null)}function nt(t){t.parentNode.removeChild(t)}function bt(t){return document.createElement(t)}function zi(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function vr(t){return document.createTextNode(t)}function be(){return vr(" ")}function Nr(){return vr("")}function kt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function BC(t){return function(e){return e.preventDefault(),t.call(this,e)}}function zC(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function w(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function By(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:w(t,r,e[r])}function zy(t,e){Object.keys(e).forEach(n=>{(function(r,i,o){i in r?r[i]=typeof r[i]=="boolean"&&o===""||o:w(r,i,o)})(t,n,e[n])})}function Vr(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ny(t,e){t.value=e??""}function zS(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}class Ph{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,r=null){this.e||(this.is_svg?this.e=zi(n.nodeName):this.e=bt(n.nodeName),this.t=n,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)it(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(nt)}}function ih(t,e){return new t(e)}const oh=new Map;let ou,Bp=0;function Vy(t,e,n,r,i,o,a,s=0){const l=16.666/r;let c=`{
`;for(let $=0;$<=1;$+=l){const b=e+(n-e)*o($);c+=100*$+`%{${a(b,1-b)}}
`}const d=c+`100% {${a(n,1-n)}}
}`,u=`__svelte_${function($){let b=5381,S=$.length;for(;S--;)b=(b<<5)-b^$.charCodeAt(S);return b>>>0}(d)}_${s}`,p=BS(t),{stylesheet:h,rules:f}=oh.get(p)||function($,b){const S={stylesheet:FC(b),rules:{}};return oh.set($,S),S}(p,t);f[u]||(f[u]=!0,h.insertRule(`@keyframes ${u} ${d}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${u} ${r}ms linear ${i}ms 1 both`,Bp+=1,u}function NC(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(t.style.animation=r.join(", "),Bp-=i,Bp||kf(()=>{Bp||(oh.forEach(o=>{const{ownerNode:a}=o.stylesheet;a&&nt(a)}),oh.clear())}))}function Zd(t){ou=t}function yc(){if(!ou)throw new Error("Function called outside component initialization");return ou}function _l(t){yc().$$.on_mount.push(t)}function VC(t){yc().$$.after_update.push(t)}function $a(t){yc().$$.on_destroy.push(t)}function ls(){const t=yc();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=zS(e,n,{cancelable:r});return i.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}function ca(t,e){return yc().$$.context.set(t,e),e}function kr(t){return yc().$$.context.get(t)}function go(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Nd=[],zn=[],zp=[],x0=[],NS=Promise.resolve();let S0=!1;function VS(){S0||(S0=!0,NS.then(F))}function US(){return VS(),NS}function nd(t){zp.push(t)}function ta(t){x0.push(t)}const km=new Set;let kd,yp=0;function F(){const t=ou;do{for(;yp<Nd.length;){const e=Nd[yp];yp++,Zd(e),UC(e.$$)}for(Zd(null),Nd.length=0,yp=0;zn.length;)zn.pop()();for(let e=0;e<zp.length;e+=1){const n=zp[e];km.has(n)||(km.add(n),n())}zp.length=0}while(Nd.length);for(;x0.length;)x0.pop()();S0=!1,km.clear(),Zd(t)}function UC(t){if(t.fragment!==null){t.update(),tr(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(nd)}}function Pm(t,e,n){t.dispatchEvent(zS(`${e?"intro":"outro"}${n}`))}const Np=new Set;let Vs;function Be(){Vs={r:0,c:[],p:Vs}}function ze(){Vs.r||tr(Vs.c),Vs=Vs.p}function L(t,e){t&&t.i&&(Np.delete(t),t.i(e))}function W(t,e,n,r){if(t&&t.o){if(Np.has(t))return;Np.add(t),Vs.c.push(()=>{Np.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const GC={duration:0};function Uy(t,e,n,r){let i=e(t,n),o=r?0:1,a=null,s=null,l=null;function c(){l&&NC(t,l)}function d(p,h){const f=p.b-o;return h*=Math.abs(f),{a:o,b:p.b,d:f,duration:h,start:p.start,end:p.start+h,group:p.group}}function u(p){const{delay:h=0,duration:f=300,easing:m=Mf,tick:$=Je,css:b}=i||GC,S={start:DS()+h,b:p};p||(S.group=Vs,Vs.r+=1),a||s?s=S:(b&&(c(),l=Vy(t,o,p,f,h,m,b)),p&&$(0,1),a=d(S,f),nd(()=>Pm(t,p,"start")),Pf(v=>{if(s&&v>s.start&&(a=d(s,f),s=null,Pm(t,a.b,"start"),b&&(c(),l=Vy(t,o,a.b,a.duration,0,m,i.css))),a){if(v>=a.end)$(o=a.b,1-o),Pm(t,a.b,"end"),s||(a.b?c():--a.group.r||tr(a.group.c)),a=null;else if(v>=a.start){const T=v-a.start;o=a.a+a.d*m(T/a.duration),$(o,1-o)}}return!(!a&&!s)}))}return{run(p){Qn(i)?(kd||(kd=Promise.resolve(),kd.then(()=>{kd=null})),kd).then(()=>{i=i(),u(p)}):u(p)},end(){c(),a=s=null}}}const GS=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function WS(t,e){t.d(1),e.delete(t.key)}function Cl(t,e){W(t,1,1,()=>{e.delete(t.key)})}function _s(t,e,n,r,i,o,a,s,l,c,d,u){let p=t.length,h=o.length,f=p;const m={};for(;f--;)m[t[f].key]=f;const $=[],b=new Map,S=new Map;for(f=h;f--;){const R=u(i,o,f),A=n(R);let E=a.get(A);E?r&&E.p(R,e):(E=c(A,R),E.c()),b.set(A,$[f]=E),A in m&&S.set(A,Math.abs(f-m[A]))}const v=new Set,T=new Set;function C(R){L(R,1),R.m(s,d),a.set(R.key,R),d=R.first,h--}for(;p&&h;){const R=$[h-1],A=t[p-1],E=R.key,M=A.key;R===A?(d=R.first,p--,h--):b.has(M)?!a.has(E)||v.has(E)?C(R):T.has(M)?p--:S.get(E)>S.get(M)?(T.add(E),C(R)):(v.add(M),p--):(l(A,a),p--)}for(;p--;){const R=t[p];b.has(R.key)||l(R,a)}for(;h;)C($[h-1]);return $}function Vi(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const l in a)l in s||(r[l]=1);for(const l in s)i[l]||(n[l]=s[l],i[l]=1);t[o]=s}else for(const l in a)i[l]=1}for(const a in r)a in n||(n[a]=void 0);return n}function to(t){return typeof t=="object"&&t!==null?t:{}}function Go(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function zt(t){t&&t.c()}function Ft(t,e,n,r){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),r||nd(()=>{const a=t.$$.on_mount.map(AS).filter(Qn);t.$$.on_destroy?t.$$.on_destroy.push(...a):tr(a),t.$$.on_mount=[]}),o.forEach(nd)}function Bt(t,e){const n=t.$$;n.fragment!==null&&(tr(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function hn(t,e,n,r,i,o,a,s=[-1]){const l=ou;Zd(t);const c=t.$$={fragment:null,ctx:[],props:o,update:Je,not_equal:i,bound:Dy(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Dy(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let d=!1;if(c.ctx=n?n(t,e.props||{},(u,p,...h)=>{const f=h.length?h[0]:p;return c.ctx&&i(c.ctx[u],c.ctx[u]=f)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](f),d&&function(m,$){m.$$.dirty[0]===-1&&(Nd.push(m),VS(),m.$$.dirty.fill(0)),m.$$.dirty[$/31|0]|=1<<$%31}(t,u)),p}):[],c.update(),d=!0,tr(c.before_update),c.fragment=!!r&&r(c.ctx),e.target){if(e.hydrate){const u=function(p){return Array.from(p.childNodes)}(e.target);c.fragment&&c.fragment.l(u),u.forEach(nt)}else c.fragment&&c.fragment.c();e.intro&&L(t.$$.fragment),Ft(t,e.target,e.anchor,e.customElement),F()}Zd(l)}class mn{$destroy(){Bt(this,1),this.$destroy=Je}$on(e,n){if(!Qn(n))return Je;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){var n;this.$$set&&(n=e,Object.keys(n).length!==0)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Oc=[];function Vc(t,e){return{subscribe:ye(t,e).subscribe}}function ye(t,e=Je){let n;const r=new Set;function i(o){if(rn(t,o)&&(t=o,n)){const a=!Oc.length;for(const s of r)s[1](),Oc.push(s,t);if(a){for(let s=0;s<Oc.length;s+=2)Oc[s][0](Oc[s+1]);Oc.length=0}}}return{set:i,update:function(o){i(o(t))},subscribe:function(o,a=Je){const s=[o,a];return r.add(s),r.size===1&&(n=e(i)||Je),o(t),()=>{r.delete(s),r.size===0&&(n(),n=null)}}}}function Fn(t,e,n){const r=!Array.isArray(t),i=r?[t]:t,o=e.length<2;return Vc(n,a=>{let s=!1;const l=[];let c=0,d=Je;const u=()=>{if(c)return;d();const h=e(r?l[0]:l,a);o?a(h):d=Qn(h)?h:Je},p=i.map((h,f)=>ho(h,m=>{l[f]=m,c&=~(1<<f),s&&u()},()=>{c|=1<<f}));return s=!0,u(),function(){tr(p),d()}})}var HS=t=>t.reduce((e,n)=>Object.assign(e,n),{});const Dc=t=>({updateValue:t}),da=t=>({defaultValue:t}),jS=t=>({store:t}),bp=t=>({store:(e,n)=>Fn(...t(n))}),vp=t=>({store:(e,n)=>{const[r,i,o=()=>!1]=t(n);let a,s=!0;return Fn(r,(l,c)=>{i(l,d=>{!s&&o(a,d)||(a=d,s=!1,c(d))})})}}),Pd=t=>({store:(e,n)=>{const[r,i={},o]=t(n);let a=[];const s={},l=h=>r(h,s),c=h=>{(a.length||h.length)&&(a=h,d())},d=()=>{const h=a.map(l);o&&h.sort(o),a=[...h],p(h)};Object.entries(i).map(([h,f])=>f.subscribe(m=>{s[h]=m,m&&d()}));const{subscribe:u,set:p}=ye(e||[]);return{set:c,update:h=>c(h(a)),subscribe:u}}});var Gy=t=>{const e={},n={};return t.forEach(([r,...i])=>{const o=HS(i),a=e[r]=((l,c,d)=>{const{store:u=T=>ye(T),defaultValue:p=ve,updateValue:h}=d,f=u(p(),c,l),{subscribe:m,update:$=ve}=f;let b;const S=T=>{let C=!0;b&&b(),b=m(R=>{if(C)return C=!1;T(R),b(),b=void 0})},v=h?h(l):ur;return f.set=T=>$(C=>v(T,C,S)),f.defaultValue=p,f})(n,e,o),s={get:()=>rs(a),set:a.set};Object.defineProperty(n,r,s)}),{stores:e,accessors:n}},WC=[["src",jS(()=>{let t;const{subscribe:e,set:n}=ye(),r=i=>{t!==i&&(t=i,n(t))};return{set:r,subscribe:e,update:i=>r(i(t))}})],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",da(()=>"pixelated")],["images",da(()=>[])],["shapePreprocessor"],["willRequestResource"],["willRequest"]],qS=t=>t.charAt(0).toUpperCase()+t.slice(1),ah=(t,e)=>{Object.keys(e).forEach(n=>{const r=hr(e[n])?{value:e[n],writable:!1}:e[n];Object.defineProperty(t,n,r)})};const Wy=(t,e)=>{let n,r,i,o,a,s,l,c,d,u;const p=e.length;for(n=0;n<p;n++)if(r=e[n],i=e[n+1>p-1?0:n+1],o=r.x-t.x,a=r.y-t.y,s=i.x-t.x,l=i.y-t.y,c=o-s,d=a-l,u=c*a-d*o,u<-1e-5)return!1;return!0};var Hy=(t,e)=>{const n=iS(e),r=pr();fa(t).forEach(o=>{Xr(o,r),Wy(o,e)||n.forEach(a=>{const s=Math.atan2(a.start.y-a.end.y,a.start.x-a.end.x),l=1e4*Math.sin(Math.PI-s),c=1e4*Math.cos(Math.PI-s),d=dt(o.x+l,o.y+c),u=pf(Jx(a),1e4),p=hf(Tl(o,d),u);p&&Xr(r,Zr(Ue(p),o))})});const i=Pn(t);return Xr(i,r),!!fa(i).every(o=>Wy(o,e))&&(Rh(t,i),!0)},YS=(t,e)=>{const n=fa(t),r=oS(e,5),i=An(t),o=[];n.forEach(l=>{const c=((u,p)=>{if(p===0)return u;const h=dt(u.start.x-u.end.x,u.start.y-u.end.y),f=Po(h),m=Qi(f,p);return u.end.x+=m.x,u.end.y+=m.y,u})(Tl(Ue(i),Ue(l)),1e6);let d=!1;r.map(Jx).forEach(u=>{const p=hf(c,u);p&&!d&&(o.push(p),d=!0)})});const a=Vo(o[0],o[2])<Vo(o[1],o[3])?[o[0],o[2]]:[o[1],o[3]],s=yi(a);return s.width<t.width&&(Rh(t,s),!0)},XS=(t,e,n={x:0,y:0})=>{const r=fo(t),i=An(r),o=eS(r,n,i).map(s=>yo(s,e,i)),a=yi(o);return o.map(s=>Zr(s,a))},Uc=(t,e=0,n=bi(t))=>{let r,i;if(e!==0){const o=Math.atan2(1,n),a=Math.sign(e)*e,s=a%Math.PI,l=a%ga;let c;c=s>Ma&&s<ga+Ma?l>Ma?a:ga-l:l>Ma?ga-l:a;const d=Math.min(Math.abs(t.height/Math.sin(o+c)),Math.abs(t.width/Math.cos(o-c)));r=Math.cos(o)*d,i=r/n}else r=t.width,i=r/n,i>t.height&&(i=t.height,r=i*n);return ii(r,i)},HC=(t,e,n,r,i,o,a,s)=>{const l=ko(a),c=ko(s),d=ln(Math.max(e.width/c.width,e.height/c.height)),u=ln(Math.min(e.width/l.width,e.height/l.height)),p=Pn(e);if(u<1||d>1){const h=An(t),f=An(e),m=u<1?u:d,$=(f.x+h.x)/2,b=(f.y+h.y)/2,S=p.width/m,v=p.height/m;tS(p,$-.5*S,b-.5*v,S,v)}return o?(((h,f,m=0,$=pr(),b)=>{if(Sn(m)&&m!==0||$.x||$.y){const S=bi(h),v=XS(f,m,$),T=Uc(f,m,S);if(!(h.width<T.width&&h.height<T.height)){const C=.5*h.width-.5*T.width,R=.5*h.height-.5*T.height;h.width>T.width&&(h.width=T.width,h.x+=C),h.height>T.height&&(h.height=T.height,h.y+=R)}Hy(h,v),YS(h,v)&&Hy(h,v)}else{const S=bi(h);h.width=Math.min(h.width,f.width),h.height=Math.min(h.height,f.height),h.x=Math.max(h.x,0),h.x+h.width>f.width&&(h.x-=h.x+h.width-f.width),h.y=Math.max(h.y,0),h.y+h.height>f.height&&(h.y-=h.y+h.height-f.height);const v=An(h),T=vo(h,S);T.width=Math.max(b.width,T.width),T.height=Math.max(b.height,T.height),T.x=v.x-.5*T.width,T.y=v.y-.5*T.height,Rh(h,T)}})(p,n,r,i,l),{crop:p}):{crop:p}},Af=(t,e,n)=>{const r=fo(t),i=An(r),o=Fi(r,n,i),a=An(ru(yi(o))),s=An(e),l=yo(s,-n,a),c=Zr(l,a),d=Jo(Xr(i,c),ln);return Br(d.x-.5*e.width,d.y-.5*e.height,e.width,e.height)},sr=(t,e,n)=>Math.max(e,Math.min(t,n));const Am=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume","minDuration","maxDuration"],w0=t=>zr(t)?t.map(w0):yf(t)||fu(t)?t:$c(t)?{...t}:t,Ad=t=>t.map(e=>Object.entries(e).reduce((n,[r,i])=>(r.startsWith("_")||(n[r]=i),n),{})),jC=(t,e)=>t===e;var qs=(t,e,n=jC)=>{if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0};const jy=(t,e,n)=>{const r=Jo(An(t),d=>ln(d,8)),i=fo(e),o=An(i),a=Fi(i,n,o),s=Jo(Jc(yi(a)),d=>ln(d,8)),l=Math.abs(s.x-r.x),c=Math.abs(s.y-r.y);return l<1&&c<1},qC=(t,e,n,r,i)=>{if(!i)return[-1/0,1/0];const o=Math.max(n.width/r.width,n.height/r.height),a=ii(r.width*o,r.height*o),s=(l=a,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(s<Math.min(t.width,t.height))return[-1/0,1/0];const c=e?t.height:t.width,d=e?t.width:t.height,u=Math.acos(a.height/s),p=u-Math.acos(d/s),h=Math.asin(c/s)-u;if(Number.isNaN(p)&&Number.isNaN(h))return[-1/0,1/0];const f=Number.isNaN(p)?h:Number.isNaN(h)?p:Math.min(p,h);return[-f,f]},Vd=(t,e)=>{const{context:n,props:r}=e;return t._isFormatted||((t=SS(t))._isFormatted=!0,Object.assign(t,r)),t._isDraft||!kh(t)||t._context&&Aa(n,t._context)||(IS(t,n),t._context={...n}),t},YC=(t,e)=>(t._isFormatted||(t.disableMove=!0,t.disableSelect=!0,t.disableResize=!0,t.disableRotate=!0),Vd(t,e));var Lf=[["file"],["size"],["loadState"],["processState"],["aspectRatio",bp(({size:t})=>[t,e=>e?bi(e):void 0])],["perspectiveX",da(()=>0)],["perspectiveY",da(()=>0)],["perspective",bp(({perspectiveX:t,perspectiveY:e})=>[[t,e],([n,r])=>({x:n,y:r})])],["rotation",da(()=>0),Dc(t=>(e,n,r)=>{if(e===n)return e;const{loadState:i,size:o,rotationRange:a,cropMinSize:s,cropMaxSize:l,crop:c,perspective:d,cropLimitToImage:u,cropOrigin:p}=t;if(!c||!i||!i.beforeComplete)return e;const h=u&&(($,b,S)=>{const v=Uc(b,S,bi($));return nu(Us(v,Math.round),Us(ko($),Math.round))})(c,o,n),f=u&&jy(c,o,n),m=(($,b,S,v,T,C,R,A,E,M)=>{const P=ko(E),_=ko(M);R&&(_.width=Math.min(M.width,T.width),_.height=Math.min(M.height,T.height));let y=!1;const z=(k,G)=>{const X=Af(T,v,k),q=fo(T),D=An(q),lt=eS(q,C,D),pt=Zr(Ue(D),cy(lt)),Lt=yo(An(X),G,D),et=Zr(Ue(D),Lt);lt.forEach(It=>yo(It,G,D));const Y=yi(lt),j=cy(lt),ct=Xr(Zr(Zr(j,et),Y),pt),U=Br(ct.x-.5*X.width,ct.y-.5*X.height,X.width,X.height);if(A&&Ki(U,A.width/U.width),R){const It=XS(T,G,C);YS(U,It)}const ft=ln(Math.min(U.width/P.width,U.height/P.height),8),yt=ln(Math.max(U.width/_.width,U.height/_.height),8);return(ft<1||yt>1)&&ln(Math.abs(G-k))===ln(Math.PI/2)&&!y?(y=!0,z($,$+Math.sign(G-k)*Math.PI)):{rotation:G,crop:ma(U,It=>ln(It,8))}},O=Math.sign(b)*Math.round(Math.abs(b)/ga)*ga,I=sr(b,O+S[0],O+S[1]);return z($,I)})(n,e,a,c,o,d,u,p,s,l);if(h&&f){const $=Uc(o,e,bi(m.crop));m.crop.x+=.5*m.crop.width,m.crop.y+=.5*m.crop.height,m.crop.x-=.5*$.width,m.crop.y-=.5*$.height,m.crop.width=$.width,m.crop.height=$.height}return r(()=>{t.crop=ma(m.crop,$=>ln($,8))}),m.rotation})],["flipX",da(()=>!1)],["flipY",da(()=>!1)],["flip",bp(({flipX:t,flipY:e})=>[[t,e],([n,r])=>({x:n,y:r})])],["isRotatedSideways",vp(({rotation:t})=>[[t],([e],n)=>n(ys(e)),(e,n)=>e!==n])],["crop",Dc(t=>(e,n=e)=>{const{loadState:r,size:i,cropMinSize:o,cropMaxSize:a,cropLimitToImage:s,cropAspectRatio:l,rotation:c,perspective:d}=t;if(!e&&!n||!r||!r.beforeComplete)return e;e||(e=fo(Uc(i,c,l||bi(i))));const u=HC(n,e,i,c,d,s,o,a),p=ma(u.crop,h=>ln(h,8));return Aa(n,p)?n:p})],["cropAspectRatio",Dc(t=>(e,n)=>{const{loadState:r,crop:i,size:o,rotation:a,cropLimitToImage:s}=t,l=(d=>{if(d){if(/:/.test(d)){const[u,p]=d.split(":");return u/p}return parseFloat(d)}})(e);if(!l)return;if(!i||!r||!r.beforeComplete)return l;const c=n?Math.abs(e-n):1;if(jy(i,o,a)&&s&&c>=.1){const d=((u,p)=>{const h=u.width,f=u.height;return ys(p)&&(u.width=f,u.height=h),u})(ko(o),a);t.crop=ma(vo(fo(d),e),ln)}else{const d={width:i.height*l,height:i.height},u=.5*(i.width-d.width),p=.5*(i.height-d.height);t.crop=ma(Br(i.x+u,i.y+p,d.width,d.height),ln)}return l})],["cropOrigin"],["cropMinSize",da(()=>({width:1,height:1}))],["cropMaxSize",da(()=>({width:32768,height:32768}))],["cropLimitToImage",da(()=>!0),Dc(t=>(e,n,r)=>{const{crop:i}=t;return i&&!n&&e&&r(()=>t.crop=Pn(t.crop)),e})],["cropSize",vp(({crop:t})=>[[t],([e],n)=>{e&&n(ii(e.width,e.height))},(e,n)=>nu(e,n)])],["cropRectAspectRatio",bp(({cropSize:t})=>[[t],([e],n)=>{e&&n(ln(bi(e),5))}])],["cropRange",vp(({size:t,rotation:e,cropRectAspectRatio:n,cropMinSize:r,cropMaxSize:i,cropLimitToImage:o})=>[[t,e,n,r,i,o],([a,s,l,c,d,u],p)=>{a&&p(((h,f,m,$,b,S)=>{const v=ko($),T=ko(b);return S?[v,Us(Uc(h,f,m),Math.round)]:[v,T]})(a,s,l,c,d,u))},(a,s)=>qs(a,s)])],["rotationRange",vp(({size:t,isRotatedSideways:e,cropMinSize:n,cropSize:r,cropLimitToImage:i})=>[[t,e,n,r,i],([o,a,s,l,c],d)=>{!o||!l||d(qC(o,a,s,l,c))},(o,a)=>qs(o,a)])],["backgroundColor",Dc(()=>t=>((e=[0,0,0,0],n=1)=>e.length===4?e:[...e,n])(t))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["minDuration",da(()=>1/24)],["maxDuration",da(()=>1/0)],["trim"],["volume",da(()=>1)],["redaction",Pd(({size:t})=>[Vd,{context:t}])],["manipulation",Pd(({size:t})=>[Vd,{context:t}])],["annotation",Pd(({size:t})=>[Vd,{context:t}])],["decoration",Pd(({crop:t})=>[Vd,{context:t}])],["selection",Pd(({size:t})=>[YC,{context:t}])],["frame",Dc(()=>t=>{if(!t)return;const e={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return Ve(t)?e.frameStyle=t:Object.assign(e,t),e})],["metadata"],["state",jS((t,e,n)=>{const r=Am.map(l=>e[l]);let i=!1;const o=ye({}),{subscribe:a}=Fn([...r,o],(l,c)=>{if(i)return;const d=Am.reduce((u,p,h)=>(u[p]=w0(l[h]),u),{});d.crop&&ma(d.crop,Math.round),d.manipulation=d.manipulation&&Ad(d.manipulation),d.redaction=d.redaction&&Ad(d.redaction),d.annotation=d.annotation&&Ad(d.annotation),d.decoration=d.decoration&&Ad(d.decoration),d.selection=d.selection&&Ad(d.selection),c(d)}),s=l=>{l&&(i=!0,n.cropOrigin=void 0,Am.filter(c=>Fe(l,c)).forEach(c=>{const d=l[c];n[c]=d===null?void 0:w0(d)}),i=!1,o.set({}))};return{set:s,update:l=>s(l(null)),subscribe:a}})]],qy=async(t,e,n={},r)=>{const{ontaskstart:i,ontaskprogress:o,ontaskend:a,token:s}=r;let l=!1;const c={cancel:ve};s.cancel=()=>{l=!0,c.cancel()};for(const[d,u]of e.entries()){if(l)return;const[p,h]=u;i(d,h);try{t=await p(t,{...n,taskCancelToken:c},f=>o(d,h,f))}catch(f){throw l=!0,f}a(d,h)}return t};const ZS=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],XC=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],ZC=Lf.map(([t])=>t).filter(t=>!XC.includes(t)),Lm=t=>"image"+qS(t),Yy=t=>Fe(t,"crop");var KS=()=>{const{stores:t,accessors:e}=Gy(WC),{sub:n,pub:r}=Gs(),i=()=>e.images?e.images[0]:{};let o={};const a={};ZC.forEach(m=>{Object.defineProperty(e,Lm(m),{get:()=>{const $=i();if($)return $.accessors[m]},set:$=>{o[Lm(m)]=$,a[Lm(m)]=$;const b=i();b&&(b.accessors[m]=$)}})});const s=()=>e.images&&e.images[0],l=t.src.subscribe(m=>{if(!m)return e.images=[];e.imageReader&&(e.images.length&&(o={}),d(m))}),c=t.imageReader.subscribe(m=>{m&&(e.images.length||e.src&&d(e.src))}),d=m=>{Promise.resolve().then(()=>p(m,o)).catch(()=>{})};let u;const p=(m,$={})=>new Promise((b,S)=>{let v=s();const T=!($.cropLimitToImage===!1||$.imageCropLimitToImage===!1||a.imageCropLmitedToImage===!1),C=$.cropMinSize||$.imageCropMinSize||a.imageCropMinSize,R=T?C:v&&v.accessors.cropMinSize,A=$.minDuration||$.imageMinDuration;v&&f(),v=(({minSize:P={width:1,height:1},minDuration:_=0}={})=>{const{stores:y,accessors:z}=Gy(Lf),{pub:O,sub:I}=Gs(),k=(G,X)=>{const q=()=>z[G]||{},D=Lt=>{z[G]={...q(),...Lt,timeStamp:Date.now()}},lt=()=>q().error,pt=Lt=>{lt()||(D({error:Lt}),O(X+"error",{...q()}))};return{start(){O(X+"start")},onabort(){D({abort:!0}),O(X+"abort",{...q()})},ontaskstart(Lt,et){lt()||(D({index:Lt,task:et,taskProgress:void 0,taskLengthComputable:void 0}),O(X+"taskstart",{...q()}))},ontaskprogress(Lt,et,Y){lt()||(D({index:Lt,task:et,taskProgress:Y.loaded/Y.total,taskLengthComputable:Y.lengthComputable}),O(X+"taskprogress",{...q()}),O(X+"progress",{...q()}))},ontaskend(Lt,et){lt()||(D({index:Lt,task:et}),O(X+"taskend",{...q()}))},ontaskerror(Lt){pt(Lt)},error(Lt){pt(Lt)},beforeComplete(Lt){lt()||(D({beforeComplete:!0}),O("before"+X,Lt))},complete(Lt){lt()||(D({complete:!0}),O(X,Lt))}}};return ah(z,{read:(G,{reader:X},q={})=>{if(!X)return;Object.assign(z,{file:void 0,size:void 0,loadState:void 0});let D={cancel:ve},lt=!1;const pt=k("loadState","load"),Lt={token:D,...pt},et={src:G,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(async()=>{try{if(pt.start(),lt)return pt.onabort();const Y=await qy(et,X,q,Lt);if(lt)return pt.onabort();const{size:j,duration:ct,dest:U}=Y||{};if(!j||!j.width||!j.height)throw new Xd("Image size missing","IMAGE_SIZE_MISSING",Y);if(ct>0&&ct<_)throw new Xd("Video too short","VIDEO_TOO_SHORT",{...Y,minDuration:_});if(j.width<P.width||j.height<P.height)throw new Xd("Image too small","IMAGE_TOO_SMALL",{...Y,minWidth:P.width,minHeight:P.height});Object.assign(z,{file:U,size:j,duration:ct}),pt.beforeComplete(Y),pt.complete(Y)}catch(Y){pt.error(Y)}finally{D=void 0}}),()=>{lt=!0,D&&D.cancel(),pt.onabort()}},write:(G,X)=>{if(!z.loadState.complete)return;z.processState=void 0;const q=k("processState","process"),D={src:z.file,imageState:z.state,dest:void 0};if(hr(G)&&(G=G(z.file,z.state)),!G)return q.start(),void q.complete(D);let lt={cancel:ve},pt=!1;const Lt=X,et={token:lt,...q};return Promise.resolve().then(async()=>{try{if(q.start(),pt)return q.onabort();const Y=await qy(D,G,Lt,et);if(pt)return q.onabort();q.complete(Y)}catch(Y){q.error(Y)}finally{lt=void 0}}),()=>{pt=!0,lt&&lt.cancel()}},on:I}),{accessors:z,stores:y}})({minSize:R,minDuration:A}),ZS.map(P=>{return v.accessors.on(P,(_=P,y=>r(_,y)));var _});const E=()=>{o={},M.forEach(P=>P())},M=[];M.push(v.accessors.on("loaderror",P=>{E(),S(P)})),M.push(v.accessors.on("loadabort",()=>{E(),S({name:"AbortError"})})),M.push(v.accessors.on("load",P=>{u=void 0,E(),b(P)})),M.push(v.accessors.on("beforeload",()=>((P,_)=>{if(Yy(_))return void(e.imageState=_);if(!_.imageCrop){const O=P.accessors.size,I=_.imageRotation||0,k=Qx(ko(O),I),G=fo(k);G.width=ln(Math.abs(G.width),6),G.height=ln(Math.abs(G.height),6);const X=_.imageCropAspectRatio||(_.imageCropLimitToImage?bi(O):bi(G));let q;_.imageCropLimitToImage?q=vo(G,X):(q=js(G,X),q.x=(O.width-q.width)/2,q.y=(O.height-q.height)/2),_.imageCrop=q}if(P.accessors.duration&&!_.imageTrim&&_.imageMaxDuration){const{duration:O}=P.accessors;_.imageTrim=[[0,Math.min(_.imageMaxDuration/O,1)]]}const y=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];y.filter(O=>Fe(_,O)).forEach(O=>{e[O]=_[O],delete _[O]});const z=Object.keys(_).filter(O=>!y.includes(O)).reduce((O,I)=>(O[I]=_[I],O),{});Object.assign(e,z)})(v,$))),e.images=[v],$.imageReader&&(e.imageReader=$.imageReader),$.imageWriter&&(e.imageWriter=$.imageWriter),u=v.accessors.read(m,{reader:e.imageReader},{willRequest:e.willRequest})});let h;const f=()=>{const m=s();m&&(u&&u(),m.accessors.loadState=void 0,e.images=[])};return Object.defineProperty(e,"stores",{get:()=>t}),ah(e,{on:n,loadImage:p,abortLoadImage:()=>{u&&u(),e.images=[]},editImage:(m,$)=>new Promise((b,S)=>{p(m,$).then(()=>{const{images:v}=e,T=v[0],C=()=>{R(),A()},R=T.accessors.on("processerror",E=>{C(),S(E)}),A=T.accessors.on("process",E=>{C(),b(E)})}).catch(S)}),removeImage:f,processImage:(m,$)=>new Promise((b,S)=>{try{const v=[],T=()=>{h=void 0,v.forEach(C=>C())};(async()=>{if((R=>Ve(R)||ed(R)||td(R))(m))try{await p(m,$)}catch(R){S(R)}else m&&(Yy(m)?e.imageState=m:Object.assign(e,m));const C=s();if(!C)return S("no image");v.push(C.accessors.on("processerror",R=>{T(),S(R)})),v.push(C.accessors.on("processabort",()=>{T(),S({name:"AbortError"})})),v.push(C.accessors.on("process",R=>{T(),b(R)})),h=C.accessors.write(e.imageWriter,{redactionRenderStyle:e.imageRedactionRendering,shapePreprocessor:e.shapePreprocessor||ur,imageScrambler:e.imageScrambler,willRequest:e.willRequest,willRequestResource:e.willRequestResource})})()}catch(v){S(v)}}),abortProcessImage:()=>{const m=s();m&&(h&&h(),m.accessors.processState=void 0)},destroy:()=>{l&&l(),c&&c()}}),e};const KC=(t,e)=>{const{processImage:n}=KS();return n(t,e)};var QS=()=>Ss()?is()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,JS=(t,e)=>Object.keys(t).filter(n=>!e.includes(n)).reduce((n,r)=>(n[r]=t[r],n),{}),tw=t=>new Promise(e=>{if(t.duration===1/0)return t.ontimeupdate=()=>{t.ontimeupdate=void 0,e(t)},void(t.currentTime=Number.MAX_SAFE_INTEGER);e(t)});const Of=({imageDataResizer:t,canvasMemoryLimit:e}={})=>async(n,r,i,o,a)=>{i.width=Math.max(i.width,1),i.height=Math.max(i.height,1),o.width=Math.max(o.width,1),o.height=Math.max(o.height,1);const{dest:s}=await KC(r,{imageReader:aw(),imageWriter:sw({format:"canvas",targetSize:{...o,upscale:!0},imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:i}),{feather:l=0}=a||{};if(l>0){const c=br("canvas");c.width=s.width,c.height=s.height;const d=c.getContext("2d",{willReadFrequently:!0}),u=1/l;let p=0;for(p=0;p<l;p++){const f=p*u;d.strokeStyle=`rgba(0,0,0,${f*f})`,d.strokeRect(p+.5,p+.5,s.width-2*p-1,s.height-2*p-1)}d.fillStyle="#000",d.fillRect(p,p,s.width+.5-2*p,s.height+.5-2*p);const h=s.getContext("2d");h.globalCompositeOperation="destination-in",h.drawImage(c,0,0),pi(c)}n.drawImage(s,o.x,o.y,o.width,o.height),pi(s)},Pr=(t,e=(...r)=>r,n)=>async(r,i,o)=>{o(Nc(0,!1));let a=!1;const s=await t(...e(r,i,l=>{a=!0,o(l)}));return n&&n(r,s),a||o(Nc(1,!1)),r},QC=({willRequest:t,srcProp:e="src",destProp:n="dest"}={})=>[Pr(iC,(r,i,o)=>[r[e],o,{...i,willRequest:t}],(r,i)=>r[n]=i),"any-to-file"],JC=({srcProp:t="dest",destProp:e="dest"}={})=>[Pr(async n=>{if(/octet-stream/.test(n.type)){console.warn(`Pintura: File has unknown mime type "${n.type}", make sure your server sets the correct Content-Type header.`);let r="image";const i=await $f(n);/video/i.test(i.nodeName)&&(r="video");const o={type:r+"/unknown"};return fu(n)?new File([n],n.name,{...o,lastModified:n.lastModified}):new Blob([n],o)}return n},n=>[n[t]],(n,r)=>n[e]=r),"any-to-file"],ew=({srcProp:t="src",destProp:e="size"}={})=>[Pr(cS,n=>[n[t]],(n,r)=>n[e]=r),"read-image-size"],tR=async t=>{const e=await $f(t);if(Jp(e))return await(n=>new Promise((r,i)=>{const o=()=>{tw(n).then(()=>{r(n.duration)})};if(n.readyState>=1)return o();n.onloadedmetadata=o,n.onerror=()=>i(n.error)}))(e)},eR=({srcProp:t="src",destProp:e="duration"}={})=>[Pr(tR,n=>[n[t]],(n,r)=>n[e]=r),"read-media-duration"],nw=({srcSize:t="size",srcOrientation:e="orientation",destSize:n="size"}={})=>[Pr(oC,r=>[r[t],r[e]],(r,i)=>r[n]=i),"image-size-match-orientation"],rw=({srcProp:t="src",destProp:e="head"}={})=>[Pr((n,r)=>pS(n)?Ux(n,r):void 0,n=>[n[t],[0,262144],onprogress],(n,r)=>n[e]=r),"read-image-head"],iw=({srcProp:t="head",destProp:e="orientation"}={})=>[Pr(sf,n=>[n[t],274],(n,r=1)=>n[e]=r),"read-exif-orientation-tag"],nR=({srcProp:t="head"}={})=>[Pr(sf,e=>[e[t],274,1]),"clear-exif-orientation-tag"],rR=({srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:n="imageState",destImageSize:r="size",destScalar:i="scalar"}={})=>[Pr((o,a)=>[Math.min(a.width/o.width,a.height/o.height),Is(a)],o=>[o[t],o[e],o[n]],(o,[a,s])=>{o[i]=a,o[r]=s}),"calculate-canvas-scalar"],iR=({srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:n}={})=>[Pr(Yx,r=>[r[t],n],(r,i)=>r[e]=i),"blob-to-image-data"],oR=({srcImageData:t="imageData",srcOrientation:e="orientation"}={})=>[Pr(Wx,n=>[n[t],n[e]],(n,r)=>n.imageData=r),"image-data-match-orientation"],aR=({srcImageData:t="imageData",srcImageState:e="imageState"}={})=>[Pr(DC,n=>[n[t],{backgroundColor:n[e].backgroundColor,backgroundImage:n[e].backgroundImage}],(n,r)=>n.imageData=r),"image-data-fill"],sR=({srcImageData:t="imageData",srcImageState:e="imageState",destScalar:n="scalar"}={})=>[Pr(sC,r=>{const i=r[n];let{crop:o}=r[e];return o&&i!==1&&(o=Ki(Pn(o),i,pr())),[r[t],{crop:o,rotation:r[e].rotation,flipX:r[e].flipX,flipY:r[e].flipY}]},(r,i)=>r.imageData=i),"image-data-crop"],lR=({targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:e,srcProp:n="imageData",srcImageState:r="imageState",destImageScaledSize:i="imageScaledSize"})=>[Pr(cC,o=>{const a=Math.min(t.width||Number.MAX_SAFE_INTEGER,o[r].targetSize&&o[r].targetSize.width||Number.MAX_SAFE_INTEGER),s=Math.min(t.height||Number.MAX_SAFE_INTEGER,o[r].targetSize&&o[r].targetSize.height||Number.MAX_SAFE_INTEGER);return[o[n],{width:a,height:s,fit:t.fit||"contain",upscale:(l=o[r],!!(l.targetSize&&l.targetSize.width||l.targetSize&&l.targetSize.height)||t.upscale||!1)},e];var l},(o,a)=>{nu(o.imageData,a)||(o[i]=Is(a)),o.imageData=a}),"image-data-resize"],cR=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData"}={})=>[Pr(mC,r=>{const{colorMatrix:i}=r[e],o=i&&Object.keys(i).map(a=>i[a]).filter(Boolean);return[r[t],{colorMatrix:o&&Rf(o),convolutionMatrix:r[e].convolutionMatrix,gamma:r[e].gamma,noise:r[e].noise,vignette:r[e].vignette}]},(r,i)=>r[n]=i),"image-data-filter"],dR=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destScalar:r="scalar"}={})=>[Pr(async(i,o,a,s,l,c)=>{if(!o||!s.length)return i;let d;try{const m={dataSizeScalar:PS(i,s)};a&&a[3]>0&&(m.backgroundColor=[...a]),d=await o(i,m)}catch{}const u=br("canvas");u.width=i.width,u.height=i.height;const p=u.getContext("2d",{willReadFrequently:!0});if(p.putImageData(i,0,0),c==="auto"){const m=Math.sqrt(i.width*i.height);p.filter=`blur(${Math.round(m/100)}px)`}const h=new Path2D;s.forEach(m=>{const $=Br(m.x,m.y,m.width,m.height);$l($,l);const b=Fi(Pn($),m.rotation),S=new Path2D;b.forEach((v,T)=>{if(T===0)return S.moveTo(v.x,v.y);S.lineTo(v.x,v.y)}),h.addPath(S)}),p.clip(h,"nonzero"),p.imageSmoothingEnabled=!1,p.drawImage(d,0,0,u.width,u.height),pi(d);const f=p.getImageData(0,0,u.width,u.height);return pi(u),f},(i,{imageScrambler:o,redactionRenderStyle:a})=>[i[t],o,i[e].backgroundColor,i[e].redaction,i[r],a],(i,o)=>i[n]=o),"image-data-redact"],Xy=({srcImageData:t="imageData",srcSize:e="size",srcImageState:n="imageState",srcShapes:r="annotation",destImageData:i="imageData",destImageScaledSize:o="imageScaledSize",destScalar:a="scalar",imageDataResizer:s,canvasMemoryLimit:l}={})=>[Pr(Cf,(c,{shapePreprocessor:d,willRequestResource:u,willRequest:p})=>{const h=c[n][r];if(!h.length)return[c[t]];const f=c[a],{crop:m}=c[n],$=c[e];let b=f;const S=c[o];S&&(b=Math.min(S.width/m.width,S.height/m.height));const v={width:$.width/f,height:$.height/f};return[c[t],{shapes:h,computeShape:T=>(T=si(T,v),T=JS(T,["left","right","top","bottom"]),T=_S(T,b)),transform:T=>{const C=c[e],{rotation:R=0,flipX:A,flipY:E,cropLimitToImage:M}=c[n],P=c[a],{crop:_=fo(C)}=c[n],y=c[o],z=y?Math.min(y.width/_.width,y.height/_.height):1,O={width:C.width/P*z,height:C.height/P*z},I=Q_(O,R),k=I.width,G=I.height,X=.5*O.width-.5*k,q=.5*O.height-.5*G,D=Jc(O);T.translate(-X,-q),T.translate(-_.x*z,-_.y*z),T.translate(D.x,D.y),T.rotate(R),T.translate(-D.x,-D.y),T.scale(A?-1:1,E?-1:1),T.translate(A?-O.width:0,E?-O.height:0),M&&(T.rect(0,0,O.width,O.height),T.clip())},drawImage:Of({imageDataResizer:s,canvasMemoryLimit:l}),preprocessShape:T=>d(T,{isPreview:!1,...c[n]}),canvasMemoryLimit:l,willRequest:p||u}]},(c,d)=>c[i]=d),"image-data-annotate"],uR=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destImageScaledSize:r="imageScaledSize",imageDataResizer:i,canvasMemoryLimit:o,destScalar:a="scalar"}={})=>[Pr(Cf,(s,{shapePreprocessor:l,willRequestResource:c,willRequest:d})=>{let{decoration:u}=s[e];if(typeof window<"u"&&(m=>{if(m&&m._clpdx4s)return;const[$]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101,32]].map(T=>T.map(C=>String.fromCharCode(C)).join("")),{width:b,height:S}=s[e].crop,v=S/15;u=[...u,{x:.5*-v,y:.5*-v,width:1.5*b,height:1.25*S,text:Array(50).fill($).join(""),fontWeight:900,lineHeight:v,fontSize:v,color:[1,1,1,.05]}]})(window),!u.length)return[s[t]];let p=s[a];const{crop:h}=s[e],f=s[r];return f&&(p=Math.min(f.width/h.width,f.height/h.height)),[s[t],{shapes:u,drawImage:Of({imageDataResizer:i,canvasMemoryLimit:o}),computeShape:m=>(m=si(m,h),m=JS(m,["left","right","top","bottom"]),m=_S(m,p)),preprocessShape:m=>l(m,{isPreview:!1,...s[e]}),canvasMemoryLimit:o,willRequest:d||c}]},(s,l)=>s[n]=l),"image-data-decorate"],pR=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destImageScaledSize:r="imageScaledSize",imageDataResizer:i,canvasMemoryLimit:o,destScalar:a="scalar"}={})=>[Pr(Cf,(s,{shapePreprocessor:l,willRequestResource:c,willRequest:d})=>{const u=s[e].frame;if(!u)return[s[t]];const p=s[a];let{crop:h}=s[e];h&&p!==1&&(h=Ki(Pn(h),p,pr()));const f={...h},m=TS(ES(u,f,l),f);f.x=Math.abs(m.left),f.y=Math.abs(m.top),f.width+=Math.abs(m.left)+Math.abs(m.right),f.height+=Math.abs(m.top)+Math.abs(m.bottom);const $=s[r],b=$?Math.min($.width/h.width,$.height/h.height):1;return $l(f,b),f.x=Math.floor(f.x),f.y=Math.floor(f.y),f.width=Math.floor(f.width),f.height=Math.floor(f.height),[s[t],{shapes:[u],contextBounds:f,computeShape:S=>si(S,s[t]),transform:S=>{S.translate(f.x,f.y)},drawImage:Of({imageDataResizer:i,canvasMemoryLimit:o}),preprocessShape:S=>l(S,{isPreview:!1,...s[e]}),canvasMemoryLimit:o,willRequest:d||c}]},(s,l)=>s[n]=l),"image-data-frame"],hR=({mimeType:t,quality:e,srcImageData:n="imageData",srcFile:r="src",destBlob:i="blob"}={})=>[Pr(j_,o=>[o[n],t||uf(o[r].name)||o[r].type,e],(o,a)=>o[i]=a),"image-data-to-blob"],mR=({srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:n="dest"}={})=>[Pr(ad,r=>[r[t],r[e]],(r,i)=>r[n]=i),"image-data-to-canvas"],fR=async(t,e)=>{if(!pS(t)||!e)return t;const n=new DataView(e),r=Vx(n);if(!r||!r.exif)return t;const i=["exif","mpf","xmp"].reduce((o,a)=>r[a]?Math.max(o,r[a].offset+r[a].size):o,0);return((o,a,s=[0,o.size])=>a?new Blob([a,o.slice(...s)],{type:o.type}):o)(t,e.slice(0,i+2),[20])},gR=(t="blob",e="head",n="blob")=>[Pr(fR,r=>[r[t],r[e]],(r,i)=>r[n]=i),"blob-write-image-head"],$R=({renameFile:t,srcBlob:e="blob",srcFile:n="src",destFile:r="dest",defaultFilename:i}={})=>[Pr(tu,o=>[o[e],t?t(o[n]):o[n].name||`${i}.${Xx(o[e].type)}`],(o,a)=>o[r]=a),"blob-to-file"],Zy=({url:t="./",dataset:e=o=>[["dest",o.dest,o.dest.name],["imageState",o.imageState]],destStore:n="store",credentials:r,headers:i={}})=>[Pr(async(o,a)=>await((s,l,c)=>new Promise((d,u)=>{const{token:p={},beforeSend:h=ve,onprogress:f=ve}=c;p.cancel=()=>m.abort();const m=new XMLHttpRequest;m.upload.onprogress=f,m.onload=()=>m.status>=200&&m.status<300?d(m):u(m),m.onerror=()=>u(m),m.ontimeout=()=>u(m),m.open("POST",encodeURI(s)),h(m),m.send(l instanceof FormData?l:l.reduce(($,b)=>($.append(...b.map(aC)),$),new FormData))}))(t,o,{onprogress:a,beforeSend:s=>dS(s,{headers:i,credentials:r})}),(o,a,s)=>[e(o),s],(o,a)=>o[n]=a),"store"],ow=t=>[Pr(e=>(t&&t.length&&Object.keys(e).forEach(n=>{t.includes(n)||delete e[n]}),e)),"prop-filter"],aw=(t={})=>{const{orientImage:e=!0,outputProps:n=["src","dest","size","duration"],preprocessImageFile:r,request:i={}}=t;return[QC({willRequest:()=>i}),JC(),r&&[Pr(r,(o,a,s)=>[o.dest,a,s],(o,a)=>o.dest=a),"preprocess-image-file"],ew({srcProp:"dest"}),eR({srcProp:"dest"}),e&&rw({srcProp:"dest"}),e&&iw(),e&&nw(),ow(n)].filter(Boolean)},yR=t=>t&&(Ve(t)?Zy({url:t}):hr(t)?[t,"store"]:Zy(t)),sw=(t={})=>(e,n,r={})=>{if(!Mh(e))return;let{canvasMemoryLimit:i=QS(),orientImage:o=!0,copyImageHead:a=!0,mimeType:s,quality:l,renameFile:c,targetSize:d,imageDataResizer:u,store:p,format:h="file",outputProps:f=["src","dest","imageState","store"],preprocessImageSource:m,preprocessImageState:$,postprocessImageData:b,postprocessImageBlob:S}={...t,...r};return h==="blob"&&(h="file"),[m&&[Pr(m,(v,T,C)=>[v.src,T,C,v.imageState],(v,T)=>v.src=T),"preprocess-image-source"],(o||a)&&rw(),o&&iw(),ew(),$&&[Pr($,(v,T,C,R)=>[v.imageState,T,C,{size:v.size,orientation:v.orientation}],(v,T)=>v.imageState=T),"preprocess-image-state"],iR({canvasMemoryLimit:i}),o&&nw(),o&&oR(),rR(),dR(),sR(),lR({imageDataResizer:u,targetSize:d}),Xy({imageDataResizer:u,canvasMemoryLimit:i,srcShapes:"manipulation"}),cR(),aR(),Xy({imageDataResizer:u,canvasMemoryLimit:i,srcShapes:"annotation"}),uR({imageDataResizer:u,canvasMemoryLimit:i}),pR({imageDataResizer:u,canvasMemoryLimit:i}),b&&[Pr(b,(v,T,C)=>[v.imageData,T,C],(v,T)=>v.imageData=T),"postprocess-image-data"],h==="file"?hR({mimeType:s,quality:l}):h==="canvas"?mR():[v=>(v.dest=v.imageData,v)],h==="file"&&o&&nR(),h==="file"&&a&&gR(),S&&[Pr(S,({blob:v,imageData:T,src:C},R,A)=>[{blob:v,imageData:T,src:C},R,A],(v,T)=>v.blob=T),"postprocess-image-file"],h==="file"&&$R({defaultFilename:"image",renameFile:c}),h==="file"?yR(p):hr(p)&&[p,"store"],ow(f)].filter(Boolean)};var bR=(t,e,n,r,i,o,a,s,l,c,d)=>{if(!(t&&e&&n&&r&&s))return;s*=o;const u=ru(Pn(e)),p=An(u),h=An(t),f=fo(n),m=An(f),$=Af(n,r,l),b=An($),S=Zr(Ue(m),b),v=Zr(Ue(h),p);S.x+=v.x,S.y+=v.y;const T=Wc(Ue(S));T.x+=v.x,T.y+=v.y;const C=An(ka(ka(Pn(i),a),t)),R=Zr(C,h);return Xr(S,R),{origin:T,translation:S,rotation:{x:d?Math.PI:0,y:c?Math.PI:0,z:l},scale:s}};let Ld=null;var Df=()=>{if(Ld===null)if("WebGL2RenderingContext"in window){let t;try{t=br("canvas"),Ld=!!t.getContext("webgl2")}catch{Ld=!1}t&&pi(t),t=void 0}else Ld=!1;return Ld},Ky=t=>(t&t-1)==0,Ff=(t,e={},n="",r="")=>Object.keys(e).filter(i=>!$c(e[i])).reduce((i,o)=>i.replace(new RegExp(n+o+r),e[o]),t);const vR={head:`#version 300 es

in vec4 aPosition;uniform mat4 uMatrix;`,text:`
in vec2 aTexCoord;out vec2 vTexCoord;`,matrix:`
gl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);`},xR={head:`#version 300 es
precision highp float;

out vec4 fragColor;`,mask:`
uniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}`,init:`
float a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);`,colorize:`
if(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}`,maskapply:`
float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);`,maskfeatherapply:`
float leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;`,rectaa:`
vec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);`,cornerradius:`
vec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);`,fragcolor:`
if(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));`},Qy=(t,e,n)=>{const r=t.createShader(n),i=((o,a,s)=>(a=Ff(a,s===o.VERTEX_SHADER?vR:xR,"##").trim(),Df()?a:(a=(a=a.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),s===o.VERTEX_SHADER&&(a=a.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),s===o.FRAGMENT_SHADER&&(a=a.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+a)))(t,e,n);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(r)),r},Od=(t,e,n,r,i)=>{const o=Qy(t,e,t.VERTEX_SHADER),a=Qy(t,n,t.FRAGMENT_SHADER),s=t.createProgram();t.attachShader(s,o),t.attachShader(s,a),t.linkProgram(s);const l={};return r.forEach(c=>{l[c]=t.getAttribLocation(s,c)}),i.forEach(c=>{l[c]=t.getUniformLocation(s,c)}),{program:s,locations:l,destroy(){t.detachShader(s,o),t.detachShader(s,a),t.deleteShader(o),t.deleteShader(a),t.deleteProgram(s)}}},Jy=t=>t.nodeName!=="VIDEO"&&(!!Df()||Ky(t.width)&&Ky(t.height)),SR=(t,e,n,r)=>(t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),((i,o,a)=>{i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,Jy(o)?i.LINEAR_MIPMAP_LINEAR:i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,a.filterParam),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,a.wrapParam),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,a.wrapParam),Jy(o)&&i.generateMipmap(i.TEXTURE_2D)})(t,n,r),t.bindTexture(t.TEXTURE_2D,null),e),Zl=(t,e=1)=>t?[t[0],t[1],t[2],Sn(t[3])?e*t[3]:e]:[0,0,0,0],Om=()=>{const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Dm=(t,e,n,r,i,o,a)=>{const s=1/(e-n),l=1/(r-i),c=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*c,t[15]=1},Kl=(t,e,n,r)=>{t[12]=t[0]*e+t[4]*n+t[8]*r+t[12],t[13]=t[1]*e+t[5]*n+t[9]*r+t[13],t[14]=t[2]*e+t[6]*n+t[10]*r+t[14],t[15]=t[3]*e+t[7]*n+t[11]*r+t[15]},t2=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},e2=(t,e)=>{const n=Math.sin(e),r=Math.cos(e),i=t[4],o=t[5],a=t[6],s=t[7],l=t[8],c=t[9],d=t[10],u=t[11];t[4]=i*r+l*n,t[5]=o*r+c*n,t[6]=a*r+d*n,t[7]=s*r+u*n,t[8]=l*r-i*n,t[9]=c*r-o*n,t[10]=d*r-a*n,t[11]=u*r-s*n},n2=(t,e)=>{const n=Math.sin(e),r=Math.cos(e),i=t[0],o=t[1],a=t[2],s=t[3],l=t[8],c=t[9],d=t[10],u=t[11];t[0]=i*r-l*n,t[1]=o*r-c*n,t[2]=a*r-d*n,t[3]=s*r-u*n,t[8]=i*n+l*r,t[9]=o*n+c*r,t[10]=a*n+d*r,t[11]=s*n+u*r},r2=(t,e)=>{const n=Math.sin(e),r=Math.cos(e),i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],d=t[6],u=t[7];t[0]=i*r+l*n,t[1]=o*r+c*n,t[2]=a*r+d*n,t[3]=s*r+u*n,t[4]=l*r-i*n,t[5]=c*r-o*n,t[6]=d*r-a*n,t[7]=u*r-s*n};var wR=t=>t*Math.PI/180,Ah=(t,e)=>Df()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const Fm=(t,e)=>{const n=t.length;return e>=n?t[e%n]:e<0?t[e%n+n]:t[e]},TR=(t,e,n,r)=>{const i=dt(n.x-e.x,n.y-e.y),o=dt(r.x-n.x,r.y-n.y),a=dt(e.x-r.x,e.y-r.y),s=dt(t.x-e.x,t.y-e.y),l=dt(t.x-n.x,t.y-n.y),c=dt(t.x-r.x,t.y-r.y),d=Lp(i,s),u=Lp(o,l),p=Lp(a,c);return d<=0&&u<=0&&p<=0},ER=t=>{if(t.length<3)return[];if((b=>{const S=b.length;for(let v=0;v<S;v++){const T=Tl(b[v],Fm(b,v+1));if(rS(T,b,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1})(t))return[];(b=>{let S,v,T,C,R,A=0;const E=b.length;for(S=0;S<E;S++)v=b[S],T=b[(S+1)%E],C=T.x-v.x,R=(T.y+v.y)/2,A+=C*R;return A})(t)<0&&t.reverse();const e=t.length,n=[...Array(e).keys()],r=[];let i,o,a,s,l,c,d,u,p,h,f,m,$=128;for(;n.length>3;){if($<=0)return[];for($--,i=0;i<n.length;i++)if(a=n[i],s=Fm(n,i-1),l=Fm(n,i+1),c=t[a],d=t[s],u=t[l],p=dt(d.x-c.x,d.y-c.y),h=dt(u.x-c.x,u.y-c.y),!(Lp(p,h)<0)){for(f=!0,o=0;o<e;o++)if(o!==a&&o!==s&&o!==l&&(m=t[o],TR(m,d,c,u))){f=!1;break}if(f){r.push([d,c,u]),n.splice(i,1);break}}}return r.push([t[n[0]],t[n[1]],t[n[2]]]),r},i2=(t,e,n,r,i)=>{const o=Po(dt(r.x-n.x,r.y-n.y)),a=Po(dt(i.x-r.x,i.y-r.y)),s=Po(dt(o.x+a.x,o.y+a.y)),l=dt(-s.y,s.x),c=dt(-o.y,o.x),d=Math.min(1/Ap(l,c),5);t[e]=r.x,t[e+1]=r.y,t[e+2]=l.x*d,t[e+3]=l.y*d,t[e+4]=-1,t[e+5]=r.x,t[e+6]=r.y,t[e+7]=l.x*d,t[e+8]=l.y*d,t[e+9]=1},o2=t=>{const e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},a2=(t,e=0,n,r)=>{const i=fa(t),o=t.x+.5*t.width,a=t.y+.5*t.height;return(n||r)&&Hc(i,n,r,o,a),e!==0&&cc(i,e,o,a),i},xp=(t,e,n,r,i)=>{const o=Math.min(20,Math.max(4,Math.round(r/2)));let a=0,s=0,l=0,c=0,d=0;for(;d<o;d++)a=d/o,s=i*ga+a*ga,l=r*Math.cos(s),c=r*Math.sin(s),t.push(dt(e+l,n+c))};let Sp=null;var Bf=()=>{if(Sp!==null)return Sp;let t=br("canvas");const e=Ah(t);return Sp=e?e.getParameter(e.MAX_TEXTURE_SIZE):void 0,pi(t),t=void 0,Sp},zf=()=>Ji()&&!!window.chrome;const Ud=new Float32Array([0,1,0,0,1,1,1,0]),IR=new Float32Array([1,0,0,0,1,1,0,1]),_R=Ji()&&ws(),s2=[0,0,0,0,1,0,0,0,0],CR=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Bm=[0,0,0,0],RR=[0,0,0,0],l2=(t,e,n,r,i)=>{if(!n||!r)return Ud;let o=r.x/n.width,a=r.y/n.height,s=t/n.width/i,l=e/n.height/i;return s-=o,l-=a,new Float32Array([-o,l,-o,-a,s,l,s,-a])};var MR=(t,e={})=>{const{alpha:n=!1}=e,r={width:0,height:0},i={width:0,height:0},o=Bf()||1024;let a,s,l;const c=Om(),d=Om();let u,p,h,f,m,$,b,S,v,T=0,C=0,R=0,A=1;const E=new Map([]),M=()=>{y.stencilOp(y.KEEP,y.KEEP,y.KEEP),y.stencilFunc(y.ALWAYS,1,255),y.stencilMask(255)},P=wR(30),_=Math.tan(P/2),y=Ah(t,{alpha:n,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!y)return;y.getExtension("OES_standard_derivatives"),y.disable(y.DEPTH_TEST),y.enable(y.STENCIL_TEST),y.enable(y.BLEND),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!n&&ws())),M();const z=y.createTexture();y.bindTexture(y.TEXTURE_2D,z),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,new Uint8Array(Bm)),E.set(0,z);const O=y.createTexture();E.set(2,O);const I=y.createFramebuffer(),k=y.createTexture();E.set(1,k);const G=y.createFramebuffer(),X=Od(y,`
##head
##text
void main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}`,`
##head
in vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){return(c*m)+(o*c.a);}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}`,["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),q=y.createBuffer(),D=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,D),y.bufferData(y.ARRAY_BUFFER,Ud,y.STATIC_DRAW);const lt=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,lt),y.bufferData(y.ARRAY_BUFFER,IR,y.STATIC_DRAW);const pt=Od(y,`#version 300 es

in vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}`,`
##head
##mask
in vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),Lt=y.createBuffer();zf()&&(y.bindBuffer(y.ARRAY_BUFFER,Lt),y.bufferData(y.ARRAY_BUFFER,1,y.DYNAMIC_DRAW));const et=(xt,Wt,Ht,Ae=!1)=>{const{program:ke,locations:st}=pt;y.useProgram(ke),y.enableVertexAttribArray(st.aPosition),y.enableVertexAttribArray(st.aNormal),y.enableVertexAttribArray(st.aMiter);const St=((Ut,Ee)=>{let Ne,qe,En,Et=0;const Tt=Ut.length,je=new Float32Array(10*(Ee?Tt+1:Tt)),Le=Ut[0],yn=Ut[Tt-1];for(Et=0;Et<Tt;Et++)Ne=Ut[Et-1],qe=Ut[Et],En=Ut[Et+1],Ne||(Ne=Ee?yn:dt(qe.x+(qe.x-En.x),qe.y+(qe.y-En.y))),En||(En=Ee?Le:dt(qe.x+(qe.x-Ne.x),qe.y+(qe.y-Ne.y))),i2(je,10*Et,Ne,qe,En);return Ee&&i2(je,10*Tt,yn,Le,Ut[1]),je})(xt,Ae),Ce=5*Float32Array.BYTES_PER_ELEMENT,dn=2*Float32Array.BYTES_PER_ELEMENT,Te=4*Float32Array.BYTES_PER_ELEMENT;y.uniform1f(st.uWidth,Wt),y.uniform1f(st.uSharpness,l),y.uniform4fv(st.uColor,Ht),y.uniformMatrix4fv(st.uMatrix,!1,u),y.uniform4f(st.uCanvasColor,T,C,R,A),y.uniform1fv(st.uMaskBounds,b),y.uniform1f(st.uMaskOpacity,$),y.bindBuffer(y.ARRAY_BUFFER,Lt),y.bufferData(y.ARRAY_BUFFER,St,y.STATIC_DRAW),y.vertexAttribPointer(st.aPosition,2,y.FLOAT,!1,Ce,0),y.vertexAttribPointer(st.aNormal,2,y.FLOAT,!1,Ce,dn),y.vertexAttribPointer(st.aMiter,1,y.FLOAT,!1,Ce,Te),y.drawArrays(y.TRIANGLE_STRIP,0,St.length/5),y.disableVertexAttribArray(st.aPosition),y.disableVertexAttribArray(st.aNormal),y.disableVertexAttribArray(st.aMiter)},Y=Od(y,`
##head
void main(){
##matrix
}`,`
##head
##mask
uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;
##maskapply
fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),j=y.createBuffer(),ct=Od(y,`
##head
##text
in vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){
##init
##colorize
##rectaa
##cornerradius
##maskfeatherapply
if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),U=y.createBuffer(),ft=y.createBuffer(),yt=y.createBuffer(),It=Od(y,`
##head
##text
out vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){
##init
float ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),Jt=y.createBuffer(),pe=y.createBuffer(),mt=new Map,ot={2:{width:0,height:0},1:{width:0,height:0}},Q=(xt,Wt,Ht,Ae=1)=>{const ke=Math.min(Math.min(4096,o)/Ht.width,Math.min(4096,o)/Ht.height,Ae),st=Math.floor(ke*Ht.width),St=Math.floor(ke*Ht.height);nu(Ht,ot[xt])?y.bindFramebuffer(y.FRAMEBUFFER,Wt):(y.bindTexture(y.TEXTURE_2D,E.get(xt)),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,st,St,0,y.RGBA,y.UNSIGNED_BYTE,null),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.bindFramebuffer(y.FRAMEBUFFER,Wt),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,E.get(xt),0),ot[xt]=Ht);const Ce=Ht.width*s,dn=Ht.height*s;var Te,Ut;Dm(d,0,Ce,dn,0,-1,1),Kl(d,0,dn,0),Ut=1,(Te=d)[0]*=Ut,Te[1]*=Ut,Te[2]*=Ut,Te[3]*=Ut,((Ee,Ne)=>{Ee[4]*=Ne,Ee[5]*=Ne,Ee[6]*=Ne,Ee[7]*=Ne})(d,-1),u=d,y.viewport(0,0,st,St),y.colorMask(!0,!0,!0,!0),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),v=[1,0,1,0,1,Math.max(r.width,Ht.width),1,Math.max(r.width,Ht.width)]},Se=(xt,Wt)=>{const{forceRelease:Ht=!1}=Wt||{},{src:Ae}=mt.get(xt);Ae instanceof HTMLCanvasElement&&(Ht||Ae.dataset.retain||pi(Ae)),mt.delete(xt),y.deleteTexture(xt)},Mt=xt=>mt.get(xt).isRotatedVideo;return{drawPath:(xt,Wt=0,Ht=!1,Ae=!1,ke,st,St,Ce,dn)=>{if(xt.length<2)return;const Te=xt.map(qe=>({x:qe.x*s,y:qe.y*s})),Ut=ke*s;if(Ut>0&&et(Te,Ut,Zl(st,dn),St),Te.length<3||!Ce||Ce[3]===0||!St)return;const Ee=ER(Te),Ne=new Float32Array(6*Ee.length);Ee.forEach(([qe,En,Et],Tt)=>{const je=6*Tt;Ne[je+0]=qe.x,Ne[je+1]=qe.y,Ne[je+2]=En.x,Ne[je+3]=En.y,Ne[je+4]=Et.x,Ne[je+5]=Et.y}),((qe,En)=>{const{program:Et,locations:Tt}=Y;y.useProgram(Et),y.enableVertexAttribArray(Tt.aPosition),y.uniform4fv(Tt.uColor,En),y.uniformMatrix4fv(Tt.uMatrix,!1,u),y.uniform1fv(Tt.uMaskBounds,b),y.uniform1f(Tt.uMaskOpacity,$),y.uniform4f(Tt.uCanvasColor,T,C,R,A),y.bindBuffer(y.ARRAY_BUFFER,j),y.bufferData(y.ARRAY_BUFFER,qe,y.STATIC_DRAW),y.vertexAttribPointer(Tt.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLES,0,qe.length/2),y.disableVertexAttribArray(Tt.aPosition)})(Ne,Zl(Ce,dn))},drawRect:(xt,Wt=0,Ht=!1,Ae=!1,ke,st,St,Ce,dn,Te=!1,Ut,Ee,Ne,qe,En,Et=1/s,Tt,je)=>{const Le=$l(Pn(xt),s),yn=ke.map(en=>((Ke,Cn)=>Math.floor(sr(Ke,0,Math.min(.5*(Cn.width-1),.5*(Cn.height-1)))))(en||0,xt)).map(en=>en*s);if(st||St){const en=Pn(Le);en.x-=.5,en.y-=.5,en.width+=1,en.height+=1;const Ke=a2(en,Wt,Ht,Ae),Cn=o2(Ke);let J;Tt&&(J=Zl(Tt),J[3]===0&&(J[3]=.001));const he=Ce&&Te?[en.width/Ce.width,en.height/Ce.height]:[1,1];((K,Gt,ce,we,ge,Nt=z,Pe,Qt=1,Ge=Bm,Ye=Ud,Qe=v,fn=1,at)=>{const{program:At,locations:jt}=ct;y.useProgram(At),y.enableVertexAttribArray(jt.aPosition),y.enableVertexAttribArray(jt.aTexCoord),y.enableVertexAttribArray(jt.aRectCoord),y.uniform4fv(jt.uColor,ge),y.uniform2fv(jt.uSize,[Gt,ce]),y.uniform2fv(jt.uPosition,[K[2],K[3]]),y.uniform2fv(jt.uRepeat,Pe),y.uniform1i(jt.uInverted,at?1:0),y.uniform1fv(jt.uCornerRadius,we),y.uniform4f(jt.uCanvasColor,T,C,R,A),y.uniform1fv(jt.uMaskFeather,Qe.map((rt,Dt)=>Dt%2==0?rt:rt*s)),y.uniform1fv(jt.uMaskBounds,b),y.uniform1f(jt.uMaskOpacity,$),y.uniform1f(jt.uEdgeFeather,Math.max(0,fn)),y.uniformMatrix4fv(jt.uMatrix,!1,u),y.uniform1i(jt.uTexture,4),y.uniform4fv(jt.uTextureColor,Ge),y.uniform1f(jt.uTextureOpacity,Qt),y.activeTexture(y.TEXTURE0+4),y.bindTexture(y.TEXTURE_2D,Nt),y.bindBuffer(y.ARRAY_BUFFER,ft),y.bufferData(y.ARRAY_BUFFER,Ye,y.STATIC_DRAW),y.vertexAttribPointer(jt.aTexCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,yt),y.bufferData(y.ARRAY_BUFFER,Ud,y.STATIC_DRAW),y.vertexAttribPointer(jt.aRectCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,U),y.bufferData(y.ARRAY_BUFFER,K,y.STATIC_DRAW),y.vertexAttribPointer(jt.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLE_STRIP,0,K.length/2),y.disableVertexAttribArray(jt.aPosition),y.disableVertexAttribArray(jt.aTexCoord),y.disableVertexAttribArray(jt.aRectCoord)})(Cn,en.width,en.height,yn,Zl(st,qe),St,he,qe,J,Ut?new Float32Array(Ut):l2(en.width,en.height,Ce,dn,s),En,Et*s,je)}Ee&&(Ee=Math.min(Ee,Le.width,Le.height),et(((en,Ke,Cn,J,he,K,Gt,ce)=>{const we=[];if(K.every(ge=>ge===0))we.push(dt(en,Ke),dt(en+Cn,Ke),dt(en+Cn,Ke+J),dt(en,Ke+J));else{const[ge,Nt,Pe,Qt]=K,Ge=en,Ye=en+Cn,Qe=Ke,fn=Ke+J;we.push(dt(Ge+ge,Qe)),xp(we,Ye-Nt,Qe+Nt,Nt,-1),we.push(dt(Ye,Qe+Nt)),xp(we,Ye-Qt,fn-Qt,Qt,0),we.push(dt(Ye-Qt,fn)),xp(we,Ge+Pe,fn-Pe,Pe,1),we.push(dt(Ge,fn-Pe)),xp(we,Ge+ge,Qe+ge,ge,2)}return(Gt||ce)&&Hc(we,Gt,ce,en+.5*Cn,Ke+.5*J),he&&cc(we,he,en+.5*Cn,Ke+.5*J),we})(Le.x,Le.y,Le.width,Le.height,Wt,yn,Ht,Ae),Ee*s,Zl(Ne,qe),!0))},drawEllipse:(xt,Wt,Ht,Ae,ke,st,St,Ce,dn,Te,Ut,Ee,Ne,qe,En)=>{const Et=$l(Br(xt.x-Wt,xt.y-Ht,2*Wt,2*Ht),s);if(St||Ce){const Tt=Pn(Et);Tt.x-=.5,Tt.y-=.5,Tt.width+=1,Tt.height+=1;const je=a2(Tt,Ae,ke,st);((Le,yn,en,Ke,Cn=z,J=Ud,he=1,K=!1)=>{const{program:Gt,locations:ce}=It;y.useProgram(Gt),y.enableVertexAttribArray(ce.aPosition),y.enableVertexAttribArray(ce.aTexCoord),y.uniformMatrix4fv(ce.uMatrix,!1,u),y.uniform2fv(ce.uRadius,[.5*yn,.5*en]),y.uniform1i(ce.uInverted,K?1:0),y.uniform4fv(ce.uColor,Ke),y.uniform4f(ce.uCanvasColor,T,C,R,A),y.uniform2fv(ce.uRepeat,[1,1]),y.uniform1fv(ce.uMaskBounds,b),y.uniform1f(ce.uMaskOpacity,$),y.uniform1i(ce.uTexture,4),y.uniform1f(ce.uTextureOpacity,he),y.activeTexture(y.TEXTURE0+4),y.bindTexture(y.TEXTURE_2D,Cn),y.bindBuffer(y.ARRAY_BUFFER,pe),y.bufferData(y.ARRAY_BUFFER,J,y.STATIC_DRAW),y.vertexAttribPointer(ce.aTexCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,Jt),y.bufferData(y.ARRAY_BUFFER,Le,y.STATIC_DRAW),y.vertexAttribPointer(ce.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLE_STRIP,0,Le.length/2),y.disableVertexAttribArray(ce.aPosition),y.disableVertexAttribArray(ce.aTexCoord)})(o2(je),Tt.width,Tt.height,Zl(St,qe),Ce,Ut?new Float32Array(Ut):l2(Tt.width,Tt.height,dn,Te,s),qe,En)}Ee&&et(((Tt,je,Le,yn,en,Ke,Cn)=>{const J=.5*Math.abs(Le),he=.5*Math.abs(yn),K=Math.abs(Le)+Math.abs(yn),Gt=Math.max(20,Math.round(K/6));return Qp(dt(Tt+J,je+he),J,he,en,Ke,Cn,Gt)})(Et.x,Et.y,Et.width,Et.height,Ae,ke,st),Ee*s,Zl(Ne,qe),!0)},drawImage:(xt,Wt,Ht,Ae,ke,st,St,Ce,dn,Te,Ut=CR,Ee=1,Ne,qe=1,En=0,Et=S,Tt=RR,je=Bm,Le=!1,yn=!1,en=!0)=>{const Ke=Wt.width*s,Cn=Wt.height*s,J=-.5*Ke,he=.5*Cn,K=.5*Ke,Gt=-.5*Cn,ce=new Float32Array([J,Gt,0,J,he,0,K,Gt,0,K,he,0]);y.bindBuffer(y.ARRAY_BUFFER,q),y.bufferData(y.ARRAY_BUFFER,ce,y.STATIC_DRAW);const we=Wt.height/2/_*(r.height/Wt.height)*-1;ke*=s,st*=s,Ht*=s,Ae*=s;const{program:ge,locations:Nt}=X,Pe=Om();((At,jt,rt,Dt,ee)=>{const de=1/Math.tan(jt/2),te=1/(Dt-ee);At[0]=de/rt,At[1]=0,At[2]=0,At[3]=0,At[4]=0,At[5]=de,At[6]=0,At[7]=0,At[8]=0,At[9]=0,At[10]=(ee+Dt)*te,At[11]=-1,At[12]=0,At[13]=0,At[14]=2*ee*Dt*te,At[15]=0})(Pe,P,a,1,2*-we),Kl(Pe,ke,-st,we),Kl(Pe,Ht,-Ae,0),r2(Pe,-dn),t2(Pe,Te),Kl(Pe,-Ht,Ae,0),n2(Pe,Ce),e2(Pe,St),y.useProgram(ge),y.enableVertexAttribArray(Nt.aPosition),y.enableVertexAttribArray(Nt.aTexCoord),y.uniform1i(Nt.uTexture,3),y.uniform2f(Nt.uTextureSize,Wt.width,Wt.height),y.activeTexture(y.TEXTURE0+3),y.bindTexture(y.TEXTURE_2D,xt);const Qt=yn?1:0,Ge=E.get(Qt);y.uniform1i(Nt.uTextureBlend,Qt),y.activeTexture(y.TEXTURE0+Qt),y.bindTexture(y.TEXTURE_2D,Ge);const Ye=Le?2:0,Qe=E.get(Ye);y.uniform1i(Nt.uTextureOverlay,Ye),y.activeTexture(y.TEXTURE0+Ye),y.bindTexture(y.TEXTURE_2D,Qe),y.bindBuffer(y.ARRAY_BUFFER,q),y.vertexAttribPointer(Nt.aPosition,3,y.FLOAT,!1,0,0);const fn=_R&&Mt(xt);let at;y.bindBuffer(y.ARRAY_BUFFER,fn?lt:D),y.vertexAttribPointer(Nt.aTexCoord,2,y.FLOAT,!1,0,0),y.uniformMatrix4fv(Nt.uMatrix,!1,Pe),y.uniform4fv(Nt.uOverlayColor,je),!Ne||qs(Ne,s2)?(Ne=s2,at=-1):(at=Ne.reduce((At,jt)=>At+jt,0),at=at<=0?1:at),y.uniform1fv(Nt.uClarityKernel,Ne),y.uniform1f(Nt.uClarityKernelWeight,at),y.uniform1f(Nt.uColorGamma,1/qe),y.uniform1f(Nt.uColorVignette,En),y.uniform1i(Nt.uAntialias,en?1:0),y.uniform4f(Nt.uColorOffset,Ut[4],Ut[9],Ut[14],Ut[19]),y.uniformMatrix4fv(Nt.uColorMatrix,!1,[Ut[0],Ut[1],Ut[2],Ut[3],Ut[5],Ut[6],Ut[7],Ut[8],Ut[10],Ut[11],Ut[12],Ut[13],Ut[15],Ut[16],Ut[17],Ut[18]]),y.uniform1f(Nt.uOpacity,Ee),y.uniform1f(Nt.uMaskOpacity,$),y.uniform1fv(Nt.uMaskBounds,b),y.uniform1fv(Nt.uMaskCornerRadius,Tt.map(At=>At*s)),y.uniform1fv(Nt.uMaskFeather,Et.map((At,jt)=>jt%2==0?At:At*s)),y.drawArrays(y.TRIANGLE_STRIP,0,4),y.disableVertexAttribArray(Nt.aPosition),y.disableVertexAttribArray(Nt.aTexCoord)},textureFilterNearest:y.NEAREST,textureFilterLinear:y.LINEAR,textureClamp:y.CLAMP_TO_EDGE,textureRepeat:y.REPEAT,textureCreate:()=>y.createTexture(),textureUpdate:(xt,Wt,Ht)=>(mt.set(xt,{src:Wt,options:Ht,isRotatedVideo:Wt.nodeName==="VIDEO"&&(Wt.dataset&&Wt.dataset.rotation==90||Wt.dataset.rotation==270)}),SR(y,xt,Wt,Ht)),textureGetSize:xt=>{const{src:Wt,options:Ht}=mt.get(xt),Ae=Is(Wt);return Ht.scalar?Us(Ae,ke=>ke/Ht.scalar):Ae},textureDelete:Se,enablePreviewStencil:()=>{y.stencilOp(y.KEEP,y.KEEP,y.REPLACE),y.stencilFunc(y.ALWAYS,1,255),y.stencilMask(255)},applyPreviewStencil:()=>{y.stencilFunc(y.EQUAL,1,255),y.stencilMask(0)},disablePreviewStencil:M,setCanvasColor(xt){T=xt[0],C=xt[1],R=xt[2],A=n?xt[3]:1,y.clear(y.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{Dm(c,0,r.width,r.height,0,-1,1)},updateCanvasMatrix(xt,Wt,Ht,Ae,ke){const st=xt.width,St=xt.height,Ce=r.width*(.5/s),dn=r.height*(.5/s),Te={x:Ce+(Ht.x+Wt.x),y:dn+(Ht.y+Wt.y)},Ut={x:Te.x-Wt.x,y:Te.y-Wt.y},Ee=.5*st,Ne=.5*St;yo(Ut,ke.z,Te),X_(Ut,Ae,Te),Kl(c,(Ut.x-Ee)*s,(Ut.y-Ne)*s,0),Kl(c,Ee*s,Ne*s,0),r2(c,ke.z);const qe=ke.x>Math.PI/2;e2(c,qe?Math.PI:0);const En=ke.y>Math.PI/2;n2(c,En?Math.PI:0),t2(c,Ae),Kl(c,-Ee*s,-Ne*s,0)},drawToCanvas(){y.bindFramebuffer(y.FRAMEBUFFER,null),u=c,y.viewport(0,0,y.drawingBufferWidth,y.drawingBufferHeight),y.colorMask(!0,!0,!0,!0),y.clearColor(T,C,R,A),y.clear(y.COLOR_BUFFER_BIT),v=[1,0,1,0,1,r.width,1,r.width]},drawToImageBlendBuffer(xt,Wt){Q(1,G,xt,Wt)},drawToImageOverlayBuffer(xt,Wt){Q(2,I,xt,Wt)},enableMask(xt,Wt){const Ht=xt.x*s,Ae=xt.y*s,ke=xt.width*s,st=xt.height*s;m=Ht,h=m+ke,p=r.height-Ae,f=r.height-(Ae+st),$=1-Wt,b=[p,h,f,m]},disableMask(){m=0,h=r.width,p=r.height,f=0,$=1,b=[p,h,f,m]},resize:(xt,Wt,Ht)=>{s=Ht,l=s===1?.75:1,i.width=xt,i.height=Wt,r.width=xt*s,r.height=Wt*s,a=Ra(r.width,r.height),t.width=r.width,t.height=r.height,Dm(c,0,r.width,r.height,0,-1,1),S=[1,0,1,0,1,i.width,1,i.width]},release(){Array.from(mt.keys()).forEach(xt=>Se(xt,{forceRelease:!0})),mt.clear(),E.forEach(xt=>{y.deleteTexture(xt)}),E.clear(),X.destroy(),pt.destroy(),Y.destroy(),ct.destroy(),It.destroy(),t.width=1,t.height=1,t=void 0}}},kR=(t,e)=>{const{imageData:n,amount:r=1}=t,i=Math.round(2*Math.max(1,r)),o=Math.round(.5*i),a=n.width,s=n.height,l=new Uint8ClampedArray(a*s*4),c=n.data;let d,u,p,h,f,m=0,$=0,b=0;const S=a*s*4-4;for(p=0;p<s;p++)for(d=crypto.getRandomValues(new Uint8ClampedArray(s)),u=0;u<a;u++)h=d[p]/255,$=0,b=0,h<.5&&($=4*(-o+Math.round(Math.random()*i))),h>.5&&(b=(-o+Math.round(Math.random()*i))*(4*a)),f=Math.min(Math.max(0,m+$+b),S),l[m]=c[f],l[m+1]=c[f+1],l[m+2]=c[f+2],l[m+3]=c[f+3],m+=4;e(null,{data:l,width:n.width,height:n.height})};const PR=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];function AR(t){return Math.sqrt(1- --t*t)}function c2(t){return Object.prototype.toString.call(t)==="[object Date]"}function T0(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,o)=>T0(t[o],i));return i=>r.map(o=>o(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(c2(t)&&c2(e)){t=t.getTime();const o=(e=e.getTime())-t;return a=>new Date(t+a*o)}const r=Object.keys(e),i={};return r.forEach(o=>{i[o]=T0(t[o],e[o])}),o=>{const a={};return r.forEach(s=>{a[s]=i[s](o)}),a}}if(n==="number"){const r=e-t;return i=>t+i*r}throw new Error(`Cannot interpolate ${n} values`)}function Nf(t,e={}){const n=ye(t);let r,i=t;function o(a,s){if(t==null)return n.set(t=a),Promise.resolve();i=a;let l=r,c=!1,{delay:d=0,duration:u=400,easing:p=Mf,interpolate:h=T0}=Or(Or({},e),s);if(u===0)return l&&(l.abort(),l=null),n.set(t=i),Promise.resolve();const f=DS()+d;let m;return r=Pf($=>{if($<f)return!0;c||(m=h(t,a),typeof u=="function"&&(u=u(t,a)),c=!0),l&&(l.abort(),l=null);const b=$-f;return b>u?(n.set(t=a),!1):(n.set(t=m(p(b/u))),!0)}),r.promise}return{set:o,update:(a,s)=>o(a(i,t),s),subscribe:n.subscribe}}function E0(t,e,n,r){if(typeof n=="number"){const i=r-n,o=(n-e)/(t.dt||1/60),a=(o+(t.opts.stiffness*i-t.opts.damping*o)*t.inv_mass)*t.dt;return Math.abs(a)<t.opts.precision&&Math.abs(i)<t.opts.precision?r:(t.settled=!1,n+a)}if(zr(n))return n.map((i,o)=>E0(t,e[o],n[o],r[o]));if(typeof n=="object"){const i={};for(const o in n)i[o]=E0(t,e[o],n[o],r[o]);return i}throw new Error(`Cannot spring ${typeof n} values`)}function un(t,e={}){const n=ye(t),{stiffness:r=.15,damping:i=.8,precision:o=.01}=e;let a,s,l,c=t,d=t,u=1,p=0,h=!1;function f($,b={}){d=$;const S=l={};if(t==null||b.hard||m.stiffness>=1&&m.damping>=1)return h=!0,a=null,c=$,n.set(t=d),Promise.resolve();if(b.soft&&(p=1/(60*(b.soft===!0?.5:+b.soft)),u=0),!s){a=null,h=!1;const v={inv_mass:void 0,opts:m,settled:!0,dt:void 0};s=Pf(T=>{if(a===null&&(a=T),h)return h=!1,s=null,!1;u=Math.min(u+p,1),v.inv_mass=u,v.opts=m,v.settled=!0,v.dt=60*(T-a)/1e3;const C=E0(v,c,t,d);return a=T,c=t,n.set(t=C),v.settled&&(s=null),!v.settled})}return new Promise(v=>{s.promise.then(()=>{S===l&&v()})})}const m={set:f,update:($,b)=>f($(d,t),b),subscribe:n.subscribe,stiffness:r,damping:i,precision:o};return m}var LR=Vc(!1,t=>{const e=window.matchMedia("(prefers-reduced-motion:reduce)"),n=()=>t(e.matches);return n(),e.addListener(n),()=>e.removeListener(n)}),d2=()=>"ResizeObserver"in window;const zm=gl(),lw=(t,e,n,r,i)=>{t.rect||(t.rect=gl());const o=t.rect;tS(zm,e,n,r,i),Aa(o,zm)||(Rh(o,zm),t.dispatchEvent(new CustomEvent("measure",{detail:o})))},wp=Math.round,OR=t=>{const e=t.getBoundingClientRect();Ja&&lw(t,wp(e.x),wp(e.y),wp(e.width),wp(e.height))},Nm=t=>{Ja&&lw(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)},Kd=[];let Ql,Ka,Ja;function I0(){Kd.length?(Kd.forEach(t=>t.measure(t)),Ja=requestAnimationFrame(I0)):Ja=void 0}let Tp=new Map([]),Dd=0,Vm=0;var Ui=(t,e={})=>{const{observePosition:n=!1,observeViewRect:r=!1,once:i=!1,disabled:o=!1,isMeasureRoot:a=!1}=e;if(d2()&&a&&(Ka||(Ka=new ResizeObserver(s=>{s.forEach(c=>{Tp.set(c.target,c.contentRect)});const l=Array.from(Tp.values()).some(({width:c,height:d})=>c>0&&d>0);l?l&&Ja===!1&&I0():(Ja&&cancelAnimationFrame(Ja),Ja=!1)})),Ka.observe(t),Dd++),!o)return!d2()||n||r?(t.measure=r?OR:Nm,Kd.push(t),Ja===void 0&&(Ja=requestAnimationFrame(I0)),t.measure(t),{destroy(){a&&Ka&&(Tp.delete(t),Ka.unobserve(t),Dd--,Dd===0&&(Ka.disconnect(),Ka=void 0));const s=Kd.indexOf(t);Kd.splice(s,1),delete t.measure}}):(Ql||(Ql=new ResizeObserver(s=>{s.forEach(l=>{Ja&&Nm(l.target)})})),Ql.observe(t),Nm(t),i?Ql.unobserve(t):Vm++,{destroy(){a&&Ka&&(Tp.delete(t),Ka.unobserve(t),Dd--,Dd===0&&(Ka.disconnect(),Ka=void 0)),i||(Ql.unobserve(t),Vm--,Vm===0&&(Ql.disconnect(),Ql=void 0))}})},DR=t=>{let e=!1;const n={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:r=>{e&&(r.target.dataset.focusVisible="")},blur:r=>{delete r.target.dataset.focusVisible}};return Object.keys(n).forEach(r=>t.addEventListener(r,n[r],!0)),{destroy(){Object.keys(n).forEach(r=>t.removeEventListener(r,n[r],!0))}}};const FR=async t=>new Promise(e=>{if(t.kind==="file")return e(t.getAsFile());t.getAsString(e)});var cw=(t,e={})=>{const n=i=>{i.preventDefault()},r=async i=>{i.preventDefault(),i.stopPropagation();try{const o=await(a=>new Promise((s,l)=>{const{items:c}=a.dataTransfer;if(!c)return s([]);Promise.all(Array.from(c).map(FR)).then(d=>{s(d.filter(u=>ed(u)&&Mh(u)||/^http/.test(u)))}).catch(l)}))(i);t.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:i,resources:o},...e}))}catch{}};return t.addEventListener("drop",r),t.addEventListener("dragover",n),{destroy(){t.removeEventListener("drop",r),t.removeEventListener("dragover",n)}}};let Ep=null;var Vf=()=>{if(Ep===null)if(Ji()){const t=br("canvas");Ep=!Ah(t,{failIfMajorPerformanceCaveat:!0}),pi(t)}else Ep=!1;return Ep},Um=t=>t instanceof WebGLTexture,u2=([t,e,n,r])=>[r.x,r.y,t.x,t.y,n.x,n.y,e.x,e.y];function BR(t){let e,n,r,i;return{c(){e=bt("div"),n=bt("canvas"),w(e,"class","PinturaCanvas")},m(o,a){it(o,e,a),Rt(e,n),t[36](n),r||(i=[kt(n,"measure",t[37]),Jn(Ui.call(null,n))],r=!0)},p:Je,i:Je,o:Je,d(o){o&&nt(e),t[36](null),r=!1,tr(i)}}}function zR(t,e,n){let r,i,o,a,s,l,c;const d=[0,0,0,0],u=pr(),p=Ji()&&(J=>{const he=.5*J,K=br("canvas",{"data-retain":!0,width:J,height:J}),Gt=K.getContext("2d");return Gt.fillStyle="#f0f",Gt.fillRect(0,0,he,he),Gt.fillRect(he,he,he,he),K})(128),h=ls();let f,{isAnimated:m}=e,{isTransparent:$}=e,{maskRect:b}=e,{maskOpacity:S=1}=e,{maskFrameOpacity:v=.95}=e,{maskMarkupOpacity:T=1}=e,{clipAnnotationsToImage:C=!0}=e,{pixelRatio:R=1}=e,{textPixelRatio:A=R}=e,{backgroundColor:E}=e,{willRender:M=ur}=e,{didRender:P=ur}=e,{willRequest:_}=e,{loadImageData:y=ur}=e,{enableGrid:z=!1}=e,{gridColors:O}=e,{gridSize:I}=e,{gridOpacity:k=0}=e,{images:G=[]}=e,{interfaceImages:X=[]}=e,{selectionColor:q}=e,D=null,lt=null,pt=null;const Lt=(J,he)=>J.set(he,{hard:!m}),et={precision:1e-4*.01};let Y=0;const j=Nf(void 0,{duration:0});N(t,j,J=>n(35,c=J));const ct=un(1,et);N(t,ct,J=>n(34,s=J));const U=un(1,et);N(t,U,J=>n(50,o=J));const ft=ye();N(t,ft,J=>n(52,l=J));const yt=ye();N(t,yt,J=>n(51,a=J));const It={},Jt=(J,he)=>{let K=It[J.id];const Gt=Math.min(1,2048/he.width);let ce=K?K.element:br("canvas",{width:he.width*Gt,height:he.height*Gt,"data-retain":!0});if(!K||((we,ge)=>{if(we.total!==ge.length)return!0;const Nt=we.last,Pe=ge[ge.length-1];return Nt.drawMode!==Pe.drawMode||!(!Qo(Nt)||Qo(Pe)&&Aa(Nt,Pe))||!(!ui(Nt)||ui(Pe)&&Nt.x===Pe.x&&Nt.y===Pe.y&&Nt.rx===Pe.rx&&Nt.ry===Pe.ry)||!(!ci(Nt)||ci(Pe)&&Pe.points.length===Nt.points.length)})(K,J.actions)){ce=ce.cloneNode(),((ge,Nt,Pe)=>{const{selectionColor:Qt=[1,1,1],scalar:Ge=1}=Pe||{};let Ye=!1;for(const Qe of Nt){const fn=Qe.drawMode==="subtract";if(fn&&!Ye)continue;ge.globalCompositeOperation=fn?"destination-out":"source-over",ge.save(),ge.beginPath();const at=CS(Qe);hS(ge,Ge,Ge),vf(ge,Qe.rotation,at),MS(ge,Qe.flipX,Qe.flipY,at),Qe.width?If(ge,{...Qe,backgroundColor:Qt}):Qe.points?v0(ge,Object.assign({},Qe,Qe.pathClose?{backgroundColor:Qt,strokeColor:[0,0,0,0]}:{strokeColor:Qt,strokeJoin:"round",strokeCap:"round"})):Qe.rx&&_f(ge,{...Qe,backgroundColor:Qt,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"}),ge.restore(),Ye=!0}})(ce.getContext("2d"),J.actions,{selectionColor:[1,0,1],scalar:Gt});const we=J.actions.length;It[J.id]={total:we,last:{...J.actions[we-1]},element:ce}}return{x:0,y:0,...he,fillColor:J.color||[1,1,1],backgroundImage:ce}};let pe;const mt=()=>{cancelAnimationFrame(pe),pe=requestAnimationFrame(()=>{qe=!0,Ke=0,i()})},ot=new Map([]),Q=new Map([]),Se=(J,he)=>({filterParam:J==="pixelated"?D.textureFilterNearest:D.textureFilterLinear,wrapParam:he==="repeat"?D.textureRepeat:D.textureClamp}),Mt=(J,he,K)=>{if(!ot.has(J)){ot.set(J,J);const we=Se(he,K);if(!Ve(Gt=J)&&(uS(Gt)||Qc(Gt)||gu(Gt)||Jp(Gt))){const ge=D.textureCreate();D.textureUpdate(ge,J,we),ot.set(J,ge)}else y(J).then(ge=>{if(!D||!ge)return;const Nt=D.textureCreate();D.textureUpdate(Nt,ge,we),ot.set(J,Nt),mt()}).catch(ge=>{ot.set(J,ge)})}var Gt,ce;if(Jp(J)&&((ce=J).currentTime>0&&!ce.paused&&!ce.ended&&ce.readyState>2||J.dataset.redraw==="true")){const we=ot.get(J),ge=Se(he,K);return D.textureUpdate(we,J,ge),J.dataset.redraw=!1,we}return ot.get(J)},xt=(J,he={})=>{const K=he.id||J.id;if(!J.text.length)return void Q.delete(K);let{text:Gt,textAlign:ce,fontFamily:we,fontSize:ge=16,fontWeight:Nt,fontVariant:Pe,fontStyle:Qt,letterSpacing:Ge,lineHeight:Ye=ge,width:Qe,height:fn}=J,{outline:at=0,blur:At=0,paddingTop:jt=0,paddingRight:rt=bo,paddingBottom:Dt=0,paddingLeft:ee=bo}=he;Qe=Sn(Qe)?Math.floor(Qe):Qe,fn=Sn(fn)?Math.floor(fn):fn;const{textSize:de,signature:te}=((ue="",wn)=>{let{width:Zn=0,height:_r="auto",fontSize:Nn,fontFamily:ne,lineHeight:Ie,fontWeight:mr,fontStyle:fr,fontVariant:Ur,letterSpacing:$r}=wn;const Er=Dp({text:ue,fontFamily:ne,fontWeight:mr,fontStyle:fr,fontVariant:Ur,fontSize:Nn,lineHeight:Ie,letterSpacing:$r,width:Zn,height:_r});let ir=$y.get(Er);if(ir)return ir;let Jr=1;Nn>1e3&&ws()&&(Jr=Nn/1e3,Nn=1e3,Ie*=Jr);const hi=gf(br("pre",{contenteditable:"true",spellcheck:"false",style:`${yS}${Sf({fontFamily:ne,fontWeight:mr,fontStyle:fr,fontVariant:Ur,fontSize:Nn,letterSpacing:$r,lineHeight:Ie})};${wf(ue,wn)}"`,innerHTML:ue})),Cr=hi.getBoundingClientRect();return ir={signature:$S(hi).flat().map(Gr=>Gr.text).join("_;_"),textSize:Us(Is(Cr),Gr=>Math.ceil(Gr*Jr))},$y.set(Er,ir),hi.remove(),ir})(Gt,{...J,width:Qe,height:fn}),on=Dp({text:Gt,textAlign:ce,fontFamily:we,fontSize:ge,fontWeight:Nt,fontVariant:Pe,fontStyle:Qt,lineHeight:Ye,letterSpacing:Ge,outline:at,blur:At,signature:te});if(!ot.has(on)){ot.set(on,Gt);const ue=Math.ceil(de.width),wn=Math.ceil(de.height/Ye)*Ye;if(ue===0||wn===0)return;const Zn=Bf(),_r=Math.min(1,(Zn-(ee+rt)*A)/(ue*A),(Zn-(jt+Dt)*A)/(wn*A));vS(Gt,{fontSize:ge,fontFamily:we,fontWeight:Nt,fontVariant:Pe,fontStyle:Qt,letterSpacing:Ge,textAlign:ce,lineHeight:Ye,width:Qe,height:fn,imageWidth:ue,imageHeight:wn,paddingLeft:ee,paddingTop:jt,paddingRight:rt,paddingBottom:Dt,pixelRatio:A*_r,willRequest:_,outline:at,blur:At,color:[1,0,1]}).then(Nn=>{if(!D)return;const ne=D.textureCreate();D.textureUpdate(ne,Nn,{filterParam:D.textureFilterLinear,wrapParam:D.textureClamp,scalar:_r}),ot.set(on,ne),Q.set(K,ne),mt()}).catch(console.error)}const Xt=ot.get(on);return Um(Xt)?Xt:Q.get(K)},Wt=new Map,Ht=(J,he)=>{let K;if(J.backgroundImage)K=Mt(J.backgroundImage,J.backgroundImageRendering,J.backgroundRepeat==="repeat"?"repeat":void 0);else if(Ve(J.text)){if(J.width&&J.width<1||J.height&&J.height<1)return;K=xt(J,he)}else J.bitmap&&J.points&&(K=(Gt=>{const{id:ce,points:we,strokeWidth:ge,strokeCap:Nt,strokeJoin:Pe,strokeColor:Qt}=Gt;let Ge=ot.get(ce),Ye=Wt.get(ce);const Qe=Dp({points:we.map(te=>`${te.x},${te.y}`).join(","),strokeWidth:ge,strokeCap:Nt,strokeJoin:Pe,strokeColor:Qt});if(Ye){const{hash:te}=Ye;if(ot.has(ce)){if(Qe===te)return ot.get(ce)}else Ye=void 0}if(!Ye){const te=br("canvas",{width:1,height:1});Ye={canvas:te,hash:void 0},Wt.set(Gt.id,Ye),Ge=D.textureCreate(),D.textureUpdate(Ge,te,{filterParam:D.textureFilterLinear,wrapParam:D.textureClamp}),ot.set(ce,Ge)}const{canvas:fn}=Ye,at=Math.ceil(Gt.strokeWidth),At=yi(we),jt=Math.floor(At.x)-.5*at,rt=Math.floor(At.y)-.5*at,Dt=Math.ceil(At.width+at),ee=Math.ceil(At.height+at);fn.width=Math.max(Dt,1),fn.height=Math.max(ee,1);const de=fn.getContext("2d");return de.clearRect(0,0,fn.width,fn.height),Dt>=1&&ee>=1&&(de.translate(-jt,-rt),v0(de,Gt),de.resetTransform()),D.textureUpdate(Ge,fn,{filterParam:D.textureFilterLinear,wrapParam:D.textureClamp}),Wt.set(ce,{canvas:fn,hash:Qe}),ot.get(ce)})(J));return K},Ae=({texture:J,size:he,origin:K,translation:Gt,rotation:ce,scale:we,colorMatrix:ge,opacity:Nt,convolutionMatrix:Pe,gamma:Qt,vignette:Ge,maskFeather:Ye,maskCornerRadius:Qe,overlayColor:fn,enableOverlay:at,enableManipulation:At,enableAntialiasing:jt})=>{let rt=0,Dt=0;if(R===1){const ee=Math.abs(1-we)<Number.EPSILON;rt=ee&&lt%2!=0?.5:0,Dt=ee&&pt%2!=0?.5:0}return D.drawImage(J,he,K.x,K.y,Gt.x+rt,Gt.y+Dt,ce.x,ce.y,ce.z,we,ge,sr(Nt,0,1),Pe,Qt,Ge,Ye,Qe,fn,at,At,jt),J},ke=(J,he,K,Gt,ce,we,ge,Nt,Pe)=>{const Qt={...he},Ge={width:ce.width/A*K,height:ce.height/A*K},Ye=dt(0,0),Qe={width:Ge.width,height:Ge.height};return Qt.x-=Pe*K,Qt.y-=we*K,J.width?(Qt.height=Qt.height?Qt.height+we*K/Gt:Ge.height,Qt.width+=(Pe+ge)*K/Gt,J.textAlign==="center"?Ye.x=.5*(Qt.width-Qe.width/Gt):J.textAlign==="right"&&(Ye.x=Qt.width-Qe.width/Gt)):(Qt.width=Ge.width,Qt.height=Ge.height),{rect:Qt,backgroundPosition:Ye,backgroundSize:Qe}},st=(J=[],he)=>{J.forEach(K=>{let Gt=Ht(K);const ce=K.status==="loading"||K.backgroundImage&&Gt===K.backgroundImage;ce&&mt();const we=K.status==="error"||K.backgroundImage&&Gt instanceof Error;let ge=Um(Gt)?Gt:void 0;const Nt=K._scale||1,Pe=K._translate||u,Qt=K.strokeWidth&&K.strokeWidth*Nt,Ge=!!K.width,Ye=!Ge&&Ve(K.text)&&ge,Qe=zr(K.points),fn=ui(K);if(Qe){const at=K.points.map(At=>dt(At.x*Nt+Pe.x,At.y*Nt+Pe.y));if(K.bitmap){Gt&&he.push(Gt);const At=yi(at),jt=Math.ceil(K.strokeWidth*Nt);D.drawRect({x:Math.floor(At.x)-.5*jt,y:Math.floor(At.y)-.5*jt,width:Math.ceil(At.width+jt),height:Math.ceil(At.height+jt)},K.rotation,K.flipX,K.flipY,[0,0,0,0],void 0,ge,void 0,void 0,void 0,void 0,void 0,void 0,K.opacity,void 0,void 0,!1,!1)}else D.drawPath(at,K.rotation,K.flipX,K.flipY,Qt,K.strokeColor,K.pathClose,K.backgroundColor,K.opacity)}else if(fn){let at=K.x,At=K.y;at*=Nt,At*=Nt,at+=Pe.x,At+=Pe.y;const jt=dt(at,At);D.drawEllipse(jt,K.rx*Nt,K.ry*Nt,K.rotation,K.flipX,K.flipY,K.backgroundColor,ge,void 0,void 0,K.backgroundCorners&&u2(K.backgroundCorners),Qt,K.strokeColor,K.opacity,K.inverted),Gt&&he.push(Gt),(ce||we)&&(K.backgroundColor||K.strokeColor&&K.strokeWidth||D.drawEllipse(jt,K.rx*Nt,K.ry*Nt,K.rotation,K.flipX,K.flipY,we?[1,0,0,.25*K.opacity]:[0,0,0,.25*K.opacity]),we&&Ee(jt),ce&&Ut(jt))}else if(Ye||Ge){const at=ge&&D.textureGetSize(ge);let At,jt,rt,Dt=K.fillColor,ee=K.backgroundColor,de=K.strokeColor,te=[K.cornerRadius,K.cornerRadius,K.cornerRadius,K.cornerRadius].map(Xt=>Xt*Nt);At=K.width?cl(K):{x:K.x,y:K.y,...at},Nt&&Pe&&(At.x*=Nt,At.y*=Nt,At.x+=Pe.x,At.y+=Pe.y,At.width*=Nt,At.height*=Nt),Gt&&he.push(Gt);const{backgroundRepeat:on="no-repeat"}=K;if(at){if(K.backgroundImage&&(K.backgroundSize||K.backgroundPosition||K.backgroundRepeat)){const Xt=Ra(at.width,at.height);if(K.backgroundRepeat==="repeat"&&(jt={...at},rt={x:0,y:0}),K.backgroundSize==="contain"){const ue=vo(At,Xt,At);jt=dc(ue),rt=K.backgroundPosition?K.backgroundPosition:dt(.5*(At.width-jt.width),.5*(At.height-jt.height))}else if(K.backgroundSize==="cover"){const ue=js(At,Xt,At);jt=dc(ue),K.backgroundPosition?rt=K.backgroundPosition:(rt=dt(ue.x,ue.y),rt=dt(.5*(At.width-jt.width),.5*(At.height-jt.height)))}else K.backgroundSize?(jt=K.backgroundSize,rt=K.backgroundPosition||{x:0,y:0}):K.backgroundPosition&&(jt={...at},rt=K.backgroundPosition)}else if(K.text){const Xt={...At};if(K.backgroundColor||K.strokeColor){ee=void 0,de=void 0;const ne={width:at.width/A*Nt,height:at.height/A*Nt},Ie=(K.width||ne.width-2*bo)*Nt,mr=(K.height||ne.height)*Nt;D.drawRect({...At,width:Ie,height:mr},K.rotation,K.flipX,K.flipY,te,K.backgroundColor,void 0,void 0,void 0,!1,void 0,Qt,K.strokeColor,K.opacity,void 0,void 0,void 0,K.inverted)}let ue=1;K.fontSize>1e3&&ws()&&(ue=K.fontSize/1e3),Dt=K.color||[0,0,0],K._prerender&&(Dt[3]=0);const wn=ke(K,Xt,Nt,ue,at,0,bo,0,bo);At=wn.rect,rt=wn.backgroundPosition,jt=wn.backgroundSize;const{textShadowX:Zn,textShadowY:_r,textShadowBlur:Nn}=K;if(Zn||_r||Nn){const ne=Math.ceil(.5*Nn),Ie=ne,mr=Math.max(bo,ne),fr=ne,Ur=Math.max(bo,ne),$r=Ht(K,{id:K.id+"shadow",blur:Nn,paddingTop:Ie,paddingRight:mr,paddingBottom:fr,paddingLeft:Ur});if($r&&!K._prerender){he.push($r);const Er=D.textureGetSize($r),{rect:ir,backgroundPosition:Jr,backgroundSize:hi}=ke(K,Xt,Nt,ue,Er,Ie,mr,0,Ur),Cr=An(At),Gr=An(ir);Gr.x+=Zn,Gr.y+=_r;const mi=yo(Gr,K.rotation,Cr),Wr={x:mi.x-.5*ir.width,y:mi.y-.5*ir.height,width:ir.width,height:ir.height};K.height&&(Wr.height-=_r),D.drawRect(Wr,K.rotation,K.flipX,K.flipY,[0,0,0,0],void 0,$r,hi,Jr,!1,void 0,void 0,void 0,K.opacity,void 0,0,K.textShadowColor)}}if(K.textOutlineWidth){const ne=Math.ceil(.5*K.textOutlineWidth),Ie=ne,mr=bo+ne,fr=ne,Ur=bo+ne,$r=Ht(K,{id:K.id+"outline",outline:K.textOutlineWidth,paddingTop:Ie,paddingRight:mr,paddingBottom:fr,paddingLeft:Ur});if($r&&!K._prerender){const Er=D.textureGetSize($r);he.push($r);const{rect:ir,backgroundPosition:Jr,backgroundSize:hi}=ke(K,Xt,Nt,ue,Er,Ie,mr,0,Ur);D.drawRect(ir,K.rotation,K.flipX,K.flipY,[0,0,0,0],void 0,$r,hi,Jr,!1,void 0,void 0,void 0,K.opacity,void 0,0,K.textOutlineColor)}}}}if(D.drawRect(At,K.rotation,K.flipX,K.flipY,te,ee,ge,jt,rt,on==="repeat",K.backgroundCorners&&u2(K.backgroundCorners),Qt,de,K.opacity,void 0,K.feather,Dt,K.inverted),ce||we){K.backgroundColor&&K.backgroundColor[3]!==0||K.strokeColor&&K.strokeWidth||D.drawRect(At,K.rotation,K.flipX,K.flipY,te,we?[1,.2549,.2118,.25*K.opacity]:[0,0,0,.25*K.opacity]);const Xt=An(At);we&&Ee(Xt),ce&&Ut(Xt)}}else Gt&&he.push(Gt)})};let St=0;const Ce=[{x:-5,y:-5},{x:5,y:5}],dn=[{x:5,y:-5},{x:-5,y:5}],Te=Qp({x:0,y:0},10,10,0,!1,!1,16);Te.length=9;const Ut=J=>{St=Date.now()/50,D.drawEllipse(J,15,15,0,!1,!1,[0,0,0,.5]);const he=cc(Te.map(K=>({x:K.x+J.x,y:K.y+J.y})),St,J.x,J.y);D.drawPath(he,0,!1,!1,2,[1,1,1])},Ee=J=>{D.drawEllipse(J,13,13,0,!1,!1,[1,.2549,.2118,.75]);const he=Ce.map(Gt=>({x:Gt.x+J.x,y:Gt.y+J.y})),K=dn.map(Gt=>({x:Gt.x+J.x,y:Gt.y+J.y}));D.drawPath(he,0,!1,!1,3,[1,1,1]),D.drawPath(K,0,!1,!1,3,[1,1,1])},Ne=(J,he,K,Gt,ce,we)=>D.drawRect(he,0,!1,!1,d,d,J,Gt,K,!0,void 0,0,void 0,we,void 0,void 0,ce);let qe=!1,En=!0,Et=!1;const Tt=[],je=[],Le=[],yn=()=>{Le.length=0;const J=G[0],{manipulationShapes:he,manipulationShapesDirty:K,annotationShapes:Gt,annotationShapesDirty:ce,interfaceShapes:we,decorationShapes:ge,frameShapes:Nt,selectionShapes:Pe}=M({opacity:J.opacity,rotation:J.rotation,scale:J.scale,images:G,size:ii(lt,pt),backgroundColor:[...c],selectionRect:l}),Qt=[...c],Ge=l,Ye=sr(s,0,1),Qe=a,fn=Math.abs(J.rotation.x/Math.PI*2-1),at=Math.abs(J.rotation.y/Math.PI*2-1),At=fn<.99||at<.99,jt={...J.size},rt=J.backgroundColor,Dt=J.backgroundImage,ee=he.length>0,de=Gt.length>0,te=rt[3]>0,on=!!C&&T>=1;if(Ye<1&&te){const Xt=Qt[0],ue=Qt[1],wn=Qt[2],Zn=1-Ye,_r=rt[0]*Zn,Nn=rt[1]*Zn,ne=rt[2]*Zn,Ie=1-Zn;Qt[0]=_r+Xt*Ie,Qt[1]=Nn+ue*Ie,Qt[2]=ne+wn*Ie,Qt[3]=1}if(D.setCanvasColor($?d:Qt),ee&&(K||qe)?(D.disableMask(),D.drawToImageBlendBuffer(jt),Tt.length=0,st(he,Tt)):ee||(Tt.length=0),Le.push(...Tt),En&&(D.drawToImageOverlayBuffer(jt,A),En=!1),At?(de&&(ce||qe)||!Et?(D.disableMask(),D.drawToImageOverlayBuffer(jt,A),je.length=0,st(Gt,je)):de||(je.length=0),Et=!0):Et=!1,D.drawToCanvas(),D.enableMask(Ge,Ye),z&&I>=1&&O.length===2&&k&&((Xt,ue,wn,Zn,_r)=>{const Nn=ii(ue,ue),ne=Mt(p,"pixelated","repeat"),Ie=dt(-Xt.x%ue,-Xt.y%ue),mr=dt(Ie.x+.5*Nn.width,Ie.y);Ne(ne,Xt,Ie,Nn,wn,_r),Ne(ne,Xt,mr,Nn,Zn,_r)})(Ge,I,O[0],O[1],k),te&&D.drawRect(Ge,0,!1,!1,d,rt),Dt){D.enableMask(Ge,1);const Xt=Math.max(b.width/Dt.width,b.height/Dt.height),ue=Dt.width*Xt,wn=Dt.height*Xt,Zn={x:b.x+.5*b.width-.5*ue,y:b.y+.5*b.height-.5*wn,width:ue,height:wn};D.drawRect(Zn,0,!1,!1,d,d,Mt(Dt,"linear")),D.enableMask(Ge,Ye)}if(on&&D.enablePreviewStencil(),Le.push(...[...G].reverse().map(Xt=>Ae({...Xt,texture:Mt(Xt.data),enableOverlay:At&&de,enableManipulation:ee,enableAntialiasing:!0,mask:Ge,maskOpacity:Ye,overlayColor:Qe}))),D.enableMask(Ge,T),At||(on&&D.applyPreviewStencil(),D.resetCanvasMatrix(),D.updateCanvasMatrix(jt,J.origin,J.translation,J.scale,J.rotation),je.length=0,st(Gt,je),on&&D.disablePreviewStencil()),Le.push(...je),D.resetCanvasMatrix(),D.enableMask(Ge,T),st(ge,Le),Nt.length){D.enableMask(Ge,1);const Xt=Nt.filter(wn=>!wn.expandsCanvas),ue=Nt.filter(wn=>wn.expandsCanvas);Xt.length&&st(Xt,Le),ue.length&&(D.enableMask({x:Ge.x+.5,y:Ge.y+.5,width:Ge.width-1,height:Ge.height-1},o),st(ue,Le))}if(q&&Pe.length&&!At){D.resetCanvasMatrix(),D.updateCanvasMatrix(jt,J.origin,J.translation,J.scale,J.rotation);const Xt=[...q];Xt[3]=.5;const ue=[{id:"selection",color:Xt,actions:[...Pe]}].map(wn=>Jt(wn,jt));st(ue,Le),D.resetCanvasMatrix()}D.disableMask(),st(we,Le),X.forEach(Xt=>{if(D.enableMask(Xt.mask,Xt.maskOpacity),Xt.backgroundColor){const wn=Dt&&js({...Xt.mask},Dt.width/Dt.height),Zn=Dt&&Mt(Dt,"linear");D.drawRect(Xt.mask,0,!1,!1,Xt.maskCornerRadius,Xt.backgroundColor,Zn,wn,wn,void 0,void 0,void 0,void 0,Xt.opacity,Xt.maskFeather),Zn&&Le.push(Zn)}const ue=Ae({...Xt,texture:Mt(Xt.data),enableAntialiasing:!1,translation:{x:Xt.translation.x+Xt.offset.x-.5*lt,y:Xt.translation.y+Xt.offset.y-.5*pt}});Le.push(ue)}),D.disableMask(),(Xt=>{ot.forEach((ue,wn)=>{!Xt.find(Zn=>Zn===ue)&&Um(ue)&&(Array.from(Q.values()).includes(ue)||(ot.delete(wn),D.textureDelete(ue)))})})(Le),P(),qe=!1};let en,Ke=0;const Cn=()=>{clearTimeout(en);const J=Date.now();J-Ke<48?en=setTimeout(Cn,48):(Ke=J,yn())};return VC(()=>i()),_l(()=>n(30,D=MR(f,{alpha:$}))),$a(()=>{D&&(Wt.forEach(({canvas:J})=>pi(J)),Wt.clear(),D.release(),n(30,D=void 0),n(0,f=void 0))}),t.$$set=J=>{"isAnimated"in J&&n(9,m=J.isAnimated),"isTransparent"in J&&n(10,$=J.isTransparent),"maskRect"in J&&n(11,b=J.maskRect),"maskOpacity"in J&&n(12,S=J.maskOpacity),"maskFrameOpacity"in J&&n(13,v=J.maskFrameOpacity),"maskMarkupOpacity"in J&&n(14,T=J.maskMarkupOpacity),"clipAnnotationsToImage"in J&&n(15,C=J.clipAnnotationsToImage),"pixelRatio"in J&&n(16,R=J.pixelRatio),"textPixelRatio"in J&&n(17,A=J.textPixelRatio),"backgroundColor"in J&&n(18,E=J.backgroundColor),"willRender"in J&&n(19,M=J.willRender),"didRender"in J&&n(20,P=J.didRender),"willRequest"in J&&n(21,_=J.willRequest),"loadImageData"in J&&n(22,y=J.loadImageData),"enableGrid"in J&&n(23,z=J.enableGrid),"gridColors"in J&&n(24,O=J.gridColors),"gridSize"in J&&n(25,I=J.gridSize),"gridOpacity"in J&&n(26,k=J.gridOpacity),"images"in J&&n(27,G=J.images),"interfaceImages"in J&&n(28,X=J.interfaceImages),"selectionColor"in J&&n(29,q=J.selectionColor)},t.$$.update=()=>{if(1&t.$$.dirty[0]&&f){const J=getComputedStyle(f).getPropertyValue("--color-transition-duration");n(31,Y=(he=>{let K=parseFloat(he);return/^[0-9]+s$/.test(he)?1e3*K:K})(J))}262656&t.$$.dirty[0]|1&t.$$.dirty[1]&&E&&j.set(E,{duration:m?Y:0}),4096&t.$$.dirty[0]&&Lt(ct,Sn(S)?S:1),8192&t.$$.dirty[0]&&Lt(U,Sn(v)?v:1),2048&t.$$.dirty[0]&&b&&ft.set(b),24&t.$$.dirty[1]&&c&&yt.set([c[0],c[1],c[2],sr(s,0,1)]),1207959558&t.$$.dirty[0]&&n(33,r=!!(D&&lt&&pt&&G.length)),1073807366&t.$$.dirty[0]&&lt&&pt&&D&&(Ke=0,D.resize(lt,pt,R)),4&t.$$.dirty[1]&&n(32,i=r?Vf()?Cn:yn:ve),6&t.$$.dirty[1]&&r&&i&&i()},[f,lt,pt,h,j,ct,U,ft,yt,m,$,b,S,v,T,C,R,A,E,M,P,_,y,z,O,I,k,G,X,q,D,Y,i,r,s,c,function(J){zn[J?"unshift":"push"](()=>{f=J,n(0,f)})},J=>{n(1,lt=J.detail.width),n(2,pt=J.detail.height),h("measure",{width:lt,height:pt})}]}class NR extends mn{constructor(e){super(),hn(this,e,zR,BR,rn,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,loadImageData:22,enableGrid:23,gridColors:24,gridSize:25,gridOpacity:26,images:27,interfaceImages:28,selectionColor:29},null,[-1,-1,-1])}}var $n=(t,e=Boolean,n=" ")=>t.filter(e).join(n);function p2(t,e,n){const r=t.slice();return r[17]=e[n],r}const VR=t=>({tab:4&t}),h2=t=>({tab:t[17]});function m2(t){let e,n,r,i=[],o=new Map,a=t[2];const s=l=>l[17].id;for(let l=0;l<a.length;l+=1){let c=p2(t,a,l),d=s(c);o.set(d,i[l]=f2(d,c))}return{c(){e=bt("ul");for(let l=0;l<i.length;l+=1)i[l].c();w(e,"class",n=$n(["PinturaTabList",t[0]])),w(e,"role","tablist"),w(e,"data-layout",t[1])},m(l,c){it(l,e,c);for(let d=0;d<i.length;d+=1)i[d].m(e,null);t[14](e),r=!0},p(l,c){1124&c&&(a=l[2],Be(),i=_s(i,c,s,1,l,a,o,e,Cl,f2,null,p2),ze()),(!r||1&c&&n!==(n=$n(["PinturaTabList",l[0]])))&&w(e,"class",n),(!r||2&c)&&w(e,"data-layout",l[1])},i(l){if(!r){for(let c=0;c<a.length;c+=1)L(i[c]);r=!0}},o(l){for(let c=0;c<i.length;c+=1)W(i[c]);r=!1},d(l){l&&nt(e);for(let c=0;c<i.length;c+=1)i[c].d();t[14](null)}}}function f2(t,e){let n,r,i,o,a,s,l,c,d,u;const p=e[11].default,h=Si(p,e,e[10],h2);function f(...$){return e[12](e[17],...$)}function m(...$){return e[13](e[17],...$)}return{key:t,first:null,c(){n=bt("li"),r=bt("button"),h&&h.c(),o=be(),w(r,"type","button"),r.disabled=i=e[17].disabled,w(n,"role","tab"),w(n,"aria-controls",a=e[17].href.substr(1)),w(n,"id",s=e[17].tabId),w(n,"aria-selected",l=e[17].selected),this.first=n},m($,b){it($,n,b),Rt(n,r),h&&h.m(r,null),Rt(n,o),c=!0,d||(u=[kt(r,"keydown",f),kt(r,"click",m)],d=!0)},p($,b){e=$,h&&h.p&&(!c||1028&b)&&Ti(h,p,e,e[10],c?wi(p,e[10],b,VR):Ei(e[10]),h2),(!c||4&b&&i!==(i=e[17].disabled))&&(r.disabled=i),(!c||4&b&&a!==(a=e[17].href.substr(1)))&&w(n,"aria-controls",a),(!c||4&b&&s!==(s=e[17].tabId))&&w(n,"id",s),(!c||4&b&&l!==(l=e[17].selected))&&w(n,"aria-selected",l)},i($){c||(L(h,$),c=!0)},o($){W(h,$),c=!1},d($){$&&nt(n),h&&h.d($),d=!1,tr(u)}}}function UR(t){let e,n,r=t[4]&&m2(t);return{c(){r&&r.c(),e=Nr()},m(i,o){r&&r.m(i,o),it(i,e,o),n=!0},p(i,[o]){i[4]?r?(r.p(i,o),16&o&&L(r,1)):(r=m2(i),r.c(),L(r,1),r.m(e.parentNode,e)):r&&(Be(),W(r,1,1,()=>{r=null}),ze())},i(i){n||(L(r),n=!0)},o(i){W(r),n=!1},d(i){r&&r.d(i),i&&nt(e)}}}function GR(t,e,n){let r,i,o,{$$slots:a={},$$scope:s}=e,{class:l}=e,{name:c}=e,{selected:d}=e,{tabs:u=[]}=e,{layout:p}=e;const h=ls(),f=b=>{const S=o.querySelectorAll('[role="tab"] button')[b];S&&S.focus()},m=(b,S)=>{b.preventDefault(),b.stopPropagation(),h("select",S)},$=({key:b},S)=>{if(!/arrow/i.test(b))return;const v=u.findIndex(T=>T.id===S);return/right|down/i.test(b)?f(v<u.length-1?v+1:0):/left|up/i.test(b)?f(v>0?v-1:u.length-1):void 0};return t.$$set=b=>{"class"in b&&n(0,l=b.class),"name"in b&&n(7,c=b.name),"selected"in b&&n(8,d=b.selected),"tabs"in b&&n(9,u=b.tabs),"layout"in b&&n(1,p=b.layout),"$$scope"in b&&n(10,s=b.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&n(2,r=u.map(b=>{const S=b.id===d;return{...b,tabId:`tab-${c}-${b.id}`,href:`#panel-${c}-${b.id}`,selected:S}})),4&t.$$.dirty&&n(4,i=r.length>1)},[l,p,r,o,i,m,$,c,d,u,s,a,(b,S)=>$(S,b.id),(b,S)=>m(S,b.id),function(b){zn[b?"unshift":"push"](()=>{o=b,n(3,o)})}]}class Lh extends mn{constructor(e){super(),hn(this,e,GR,UR,rn,{class:0,name:7,selected:8,tabs:9,layout:1})}}const WR=t=>({panel:16&t}),g2=t=>({panel:t[4][0].id,panelIsActive:!0});function $2(t,e,n){const r=t.slice();return r[14]=e[n].id,r[15]=e[n].shouldDraw,r[16]=e[n].panelId,r[17]=e[n].tabindex,r[18]=e[n].labelledBy,r[19]=e[n].isActive,r[20]=e[n].hidden,r[3]=e[n].visible,r}const HR=t=>({panel:16&t,panelIsActive:16&t}),y2=t=>({panel:t[14],panelIsActive:t[19]});function jR(t){let e,n,r,i,o,a;const s=t[11].default,l=Si(s,t,t[10],g2);return{c(){e=bt("div"),n=bt("div"),l&&l.c(),w(n,"class",r=$n([t[1]])),w(e,"class",t[0]),w(e,"style",t[2])},m(c,d){it(c,e,d),Rt(e,n),l&&l.m(n,null),i=!0,o||(a=[kt(e,"measure",t[13]),Jn(Ui.call(null,e))],o=!0)},p(c,d){l&&l.p&&(!i||1040&d)&&Ti(l,s,c,c[10],i?wi(s,c[10],d,WR):Ei(c[10]),g2),(!i||2&d&&r!==(r=$n([c[1]])))&&w(n,"class",r),(!i||1&d)&&w(e,"class",c[0]),(!i||4&d)&&w(e,"style",c[2])},i(c){i||(L(l,c),i=!0)},o(c){W(l,c),i=!1},d(c){c&&nt(e),l&&l.d(c),o=!1,tr(a)}}}function qR(t){let e,n,r,i,o,a=[],s=new Map,l=t[4];const c=d=>d[14];for(let d=0;d<l.length;d+=1){let u=$2(t,l,d),p=c(u);s.set(p,a[d]=v2(p,u))}return{c(){e=bt("div");for(let d=0;d<a.length;d+=1)a[d].c();w(e,"class",n=$n(["PinturaTabPanels",t[0]])),w(e,"style",t[2])},m(d,u){it(d,e,u);for(let p=0;p<a.length;p+=1)a[p].m(e,null);r=!0,i||(o=[kt(e,"measure",t[12]),Jn(Ui.call(null,e,{observePosition:!0}))],i=!0)},p(d,u){1042&u&&(l=d[4],Be(),a=_s(a,u,c,1,d,l,s,e,Cl,v2,null,$2),ze()),(!r||1&u&&n!==(n=$n(["PinturaTabPanels",d[0]])))&&w(e,"class",n),(!r||4&u)&&w(e,"style",d[2])},i(d){if(!r){for(let u=0;u<l.length;u+=1)L(a[u]);r=!0}},o(d){for(let u=0;u<a.length;u+=1)W(a[u]);r=!1},d(d){d&&nt(e);for(let u=0;u<a.length;u+=1)a[u].d();i=!1,tr(o)}}}function b2(t){let e;const n=t[11].default,r=Si(n,t,t[10],y2);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||1040&o)&&Ti(r,n,i,i[10],e?wi(n,i[10],o,HR):Ei(i[10]),y2)},i(i){e||(L(r,i),e=!0)},o(i){W(r,i),e=!1},d(i){r&&r.d(i)}}}function v2(t,e){let n,r,i,o,a,s,l,c,d,u=e[15]&&b2(e);return{key:t,first:null,c(){n=bt("div"),u&&u.c(),r=be(),w(n,"class",i=$n(["PinturaTabPanel",e[1]])),n.hidden=o=e[20],w(n,"id",a=e[16]),w(n,"tabindex",s=e[17]),w(n,"aria-labelledby",l=e[18]),w(n,"data-inert",c=!e[3]),this.first=n},m(p,h){it(p,n,h),u&&u.m(n,null),Rt(n,r),d=!0},p(p,h){(e=p)[15]?u?(u.p(e,h),16&h&&L(u,1)):(u=b2(e),u.c(),L(u,1),u.m(n,r)):u&&(Be(),W(u,1,1,()=>{u=null}),ze()),(!d||2&h&&i!==(i=$n(["PinturaTabPanel",e[1]])))&&w(n,"class",i),(!d||16&h&&o!==(o=e[20]))&&(n.hidden=o),(!d||16&h&&a!==(a=e[16]))&&w(n,"id",a),(!d||16&h&&s!==(s=e[17]))&&w(n,"tabindex",s),(!d||16&h&&l!==(l=e[18]))&&w(n,"aria-labelledby",l),(!d||16&h&&c!==(c=!e[3]))&&w(n,"data-inert",c)},i(p){d||(L(u),d=!0)},o(p){W(u),d=!1},d(p){p&&nt(n),u&&u.d()}}}function YR(t){let e,n,r,i;const o=[qR,jR],a=[];function s(l,c){return l[5]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=Nr()},m(l,c){a[e].m(l,c),it(l,r,c),i=!0},p(l,[c]){let d=e;e=s(l),e===d?a[e].p(l,c):(Be(),W(a[d],1,1,()=>{a[d]=null}),ze(),n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),L(n,1),n.m(r.parentNode,r))},i(l){i||(L(n),i=!0)},o(l){W(n),i=!1},d(l){a[e].d(l),l&&nt(r)}}}function XR(t,e,n){let r,i,{$$slots:o={},$$scope:a}=e,{class:s}=e,{name:l}=e,{selected:c}=e,{panelClass:d}=e,{panels:u=[]}=e,{visible:p}=e,{style:h}=e;const f={};return t.$$set=m=>{"class"in m&&n(0,s=m.class),"name"in m&&n(6,l=m.name),"selected"in m&&n(7,c=m.selected),"panelClass"in m&&n(1,d=m.panelClass),"panels"in m&&n(8,u=m.panels),"visible"in m&&n(3,p=m.visible),"style"in m&&n(2,h=m.style),"$$scope"in m&&n(10,a=m.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&n(4,r=u.map(m=>{const $=m===c;$&&n(9,f[m]=!0,f);const b=p?p.indexOf(m)!==-1:$;return{id:m,panelId:`panel-${l}-${m}`,labelledBy:`tab-${l}-${m}`,isActive:$,hidden:!$,visible:b,tabindex:$?0:-1,shouldDraw:$||f[m]}})),16&t.$$.dirty&&n(5,i=r.length>1)},[s,d,h,p,r,i,l,c,u,f,a,o,function(m){go.call(this,t,m)},function(m){go.call(this,t,m)}]}class Oh extends mn{constructor(e){super(),hn(this,e,XR,YR,rn,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var Uf=t=>{const e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter(n=>!!e[n].get)};function x2(t){let e,n,r,i;const o=[t[4]];function a(c){t[22](c)}var s=t[10];function l(c){let d={};for(let u=0;u<o.length;u+=1)d=Or(d,o[u]);return c[2]!==void 0&&(d.name=c[2]),{props:d}}return s&&(e=ih(s,l(t)),zn.push(()=>Go(e,"name",a)),t[23](e),e.$on("measure",t[11])),{c(){e&&zt(e.$$.fragment),r=Nr()},m(c,d){e&&Ft(e,c,d),it(c,r,d),i=!0},p(c,d){const u=16&d[0]?Vi(o,[to(c[4])]):{};if(!n&&4&d[0]&&(n=!0,u.name=c[2],ta(()=>n=!1)),s!==(s=c[10])){if(e){Be();const p=e;W(p.$$.fragment,1,0,()=>{Bt(p,1)}),ze()}s?(e=ih(s,l(c)),zn.push(()=>Go(e,"name",a)),c[23](e),e.$on("measure",c[11]),zt(e.$$.fragment),L(e.$$.fragment,1),Ft(e,r.parentNode,r)):e=null}else s&&e.$set(u)},i(c){i||(e&&L(e.$$.fragment,c),i=!0)},o(c){e&&W(e.$$.fragment,c),i=!1},d(c){t[23](null),c&&nt(r),e&&Bt(e,c)}}}function ZR(t){let e,n,r,i=t[5]&&x2(t);return{c(){e=bt("div"),i&&i.c(),w(e,"data-util",t[2]),w(e,"class",n=$n(["PinturaUtilPanel",t[1]])),w(e,"style",t[6])},m(o,a){it(o,e,a),i&&i.m(e,null),t[24](e),r=!0},p(o,a){o[5]?i?(i.p(o,a),32&a[0]&&L(i,1)):(i=x2(o),i.c(),L(i,1),i.m(e,null)):i&&(Be(),W(i,1,1,()=>{i=null}),ze()),(!r||4&a[0])&&w(e,"data-util",o[2]),(!r||2&a[0]&&n!==(n=$n(["PinturaUtilPanel",o[1]])))&&w(e,"class",n),(!r||64&a[0])&&w(e,"style",o[6])},i(o){r||(L(i),r=!0)},o(o){W(i),r=!1},d(o){o&&nt(e),i&&i.d(),t[24](null)}}}function KR(t,e,n){let r,i,o,a,s,l;const c=ls();let{isActive:d=!0}=e,{stores:u}=e,{content:p}=e,{component:h}=e,{locale:f}=e,{class:m}=e;const $=kr("isAnimated");let b;N(t,$,k=>n(21,l=k));const S=un(0),v=Fn(S,k=>sr(k,0,1));N(t,v,k=>n(20,s=k));let T=!d;const C=ye(d);N(t,C,k=>n(25,a=k));const R={isActive:Fn(C,async(k,G)=>{if(!k)return G(k);await US(),G(k)}),isActiveFraction:Fn(v,k=>k),isVisible:Fn(v,k=>k>0)},A=p.view,E=Uf(A),M=Object.keys(p.props||{}).reduce((k,G)=>(E.includes(G)&&(k[G]=p.props[G]),k),{}),P=Object.keys(R).reduce((k,G)=>(E.includes(G)&&(k[G]=R[G]),k),{});let _,y;const z=k=>{n(17,b={...k.detail}),I&&d&&c("measure",{...b})};ca("measurable",Ui);const O=yc().$$.context;let I=!1;return _l(()=>{if(n(19,I=!0),o)return;n(0,h=new A({target:y,props:{...i},context:O})),n(2,_=h.name);const k=h.$on("measure",z);return()=>{k(),h.$destroy()}}),t.$$set=k=>{"isActive"in k&&n(12,d=k.isActive),"stores"in k&&n(13,u=k.stores),"content"in k&&n(14,p=k.content),"component"in k&&n(0,h=k.component),"locale"in k&&n(15,f=k.locale),"class"in k&&n(1,m=k.class)},t.$$.update=()=>{135169&t.$$.dirty[0]&&b&&d&&h&&c("measure",b),2101248&t.$$.dirty[0]&&S.set(d?1:0,{hard:l===!1}),1310720&t.$$.dirty[0]&&(s<=0&&!T?n(18,T=!0):s>0&&T&&n(18,T=!1)),786432&t.$$.dirty[0]&&I&&c(T?"hide":"show"),1048576&t.$$.dirty[0]&&c("fade",s),1048576&t.$$.dirty[0]&&n(6,r=s<1?"opacity: "+s:void 0),4096&t.$$.dirty[0]&&Ct(C,a=d,a),40960&t.$$.dirty[0]&&n(4,i={...M,...P,stores:u,locale:f})},n(5,o=!E.includes("external")),[h,m,_,y,i,o,r,$,v,C,A,z,d,u,p,f,S,b,T,I,s,l,function(k){_=k,n(2,_)},function(k){zn[k?"unshift":"push"](()=>{h=k,n(0,h)})},function(k){zn[k?"unshift":"push"](()=>{y=k,n(3,y)})}]}class dw extends mn{constructor(e){super(),hn(this,e,KR,ZR,rn,{isActive:12,stores:13,content:14,component:0,locale:15,class:1,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function QR(t){let e,n,r;const i=t[5].default,o=Si(i,t,t[4],null);return{c(){e=zi("svg"),o&&o.c(),w(e,"class",t[3]),w(e,"style",t[2]),w(e,"width",t[0]),w(e,"height",t[1]),w(e,"viewBox",n="0 0 "+t[0]+`
    `+t[1]),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"aria-hidden","true"),w(e,"focusable","false"),w(e,"stroke-linecap","round"),w(e,"stroke-linejoin","round")},m(a,s){it(a,e,s),o&&o.m(e,null),r=!0},p(a,[s]){o&&o.p&&(!r||16&s)&&Ti(o,i,a,a[4],r?wi(i,a[4],s,null):Ei(a[4]),null),(!r||8&s)&&w(e,"class",a[3]),(!r||4&s)&&w(e,"style",a[2]),(!r||1&s)&&w(e,"width",a[0]),(!r||2&s)&&w(e,"height",a[1]),(!r||3&s&&n!==(n="0 0 "+a[0]+`
    `+a[1]))&&w(e,"viewBox",n)},i(a){r||(L(o,a),r=!0)},o(a){W(o,a),r=!1},d(a){a&&nt(e),o&&o.d(a)}}}function JR(t,e,n){let{$$slots:r={},$$scope:i}=e,{width:o=24}=e,{height:a=24}=e,{style:s}=e,{class:l}=e;return t.$$set=c=>{"width"in c&&n(0,o=c.width),"height"in c&&n(1,a=c.height),"style"in c&&n(2,s=c.style),"class"in c&&n(3,l=c.class),"$$scope"in c&&n(4,i=c.$$scope)},[o,a,s,l,i,r]}class ea extends mn{constructor(e){super(),hn(this,e,JR,QR,rn,{width:0,height:1,style:2,class:3})}}var uw=(t,e)=>e===t.target||e.contains(t.target),S2=(t,e,n)=>{return(Ve(e)?e:t)+(n?` (${r=n,r.map(i=>i==="CMD"?bf()?"⌘":"Ctrl":i).join("+")})`:"");var r};function w2(t){let e,n;return e=new ea({props:{class:"PinturaButtonIcon",$$slots:{default:[tM]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};536870920&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function tM(t){let e;return{c(){e=zi("g")},m(n,r){it(n,e,r),e.innerHTML=t[3]},p(n,r){8&r&&(e.innerHTML=n[3])},d(n){n&&nt(e)}}}function T2(t){let e;return{c(){e=bt("span"),w(e,"class",t[11])},m(n,r){it(n,e,r),e.innerHTML=t[0]},p(n,r){1&r&&(e.innerHTML=n[0]),2048&r&&w(e,"class",n[11])},d(n){n&&nt(e)}}}function eM(t){let e,n,r,i,o;const a=t[27].default,s=Si(a,t,t[29],null),l=s||function(c){let d,u,p,h=c[3]&&w2(c),f=c[0]&&T2(c);return{c(){d=bt("span"),h&&h.c(),u=be(),f&&f.c(),w(d,"class",c[13])},m(m,$){it(m,d,$),h&&h.m(d,null),Rt(d,u),f&&f.m(d,null),p=!0},p(m,$){m[3]?h?(h.p(m,$),8&$&&L(h,1)):(h=w2(m),h.c(),L(h,1),h.m(d,u)):h&&(Be(),W(h,1,1,()=>{h=null}),ze()),m[0]?f?f.p(m,$):(f=T2(m),f.c(),f.m(d,null)):f&&(f.d(1),f=null),(!p||8192&$)&&w(d,"class",m[13])},i(m){p||(L(h),p=!0)},o(m){W(h),p=!1},d(m){m&&nt(d),h&&h.d(),f&&f.d()}}}(t);return{c(){e=bt("button"),l&&l.c(),w(e,"type",t[6]),w(e,"style",t[4]),e.disabled=t[5],w(e,"class",t[12]),w(e,"title",n=S2(t[0],t[1],t[2]))},m(c,d){it(c,e,d),l&&l.m(e,null),t[28](e),r=!0,i||(o=[kt(e,"keydown",function(){Qn(t[8])&&t[8].apply(this,arguments)}),kt(e,"click",function(){Qn(t[7])&&t[7].apply(this,arguments)}),kt(e,"pointerdown",function(){Qn(t[14])&&t[14].apply(this,arguments)}),Jn(t[9].call(null,e))],i=!0)},p(c,[d]){t=c,s?s.p&&(!r||536870912&d)&&Ti(s,a,t,t[29],r?wi(a,t[29],d,null):Ei(t[29]),null):l&&l.p&&(!r||10249&d)&&l.p(t,r?d:-1),(!r||64&d)&&w(e,"type",t[6]),(!r||16&d)&&w(e,"style",t[4]),(!r||32&d)&&(e.disabled=t[5]),(!r||4096&d)&&w(e,"class",t[12]),(!r||7&d&&n!==(n=S2(t[0],t[1],t[2])))&&w(e,"title",n)},i(c){r||(L(l,c),r=!0)},o(c){W(l,c),r=!1},d(c){c&&nt(e),l&&l.d(c),t[28](null),i=!1,tr(o)}}}function nM(t,e,n){let r,i,o,a,s,l,{$$slots:c={},$$scope:d}=e,{class:u}=e,{label:p}=e,{title:h}=e,{shortcut:f}=e,{labelClass:m}=e,{innerClass:$}=e,{hideLabel:b=!1}=e,{icon:S}=e,{style:v}=e,{disabled:T}=e,{type:C="button"}=e,{onclick:R}=e,{onkeydown:A}=e,{onhold:E}=e,{action:M=()=>{}}=e,{holdThreshold:P=500}=e,{holdSpeedUpFactor:_=.5}=e,{holdSpeedMin:y=20}=e;const z=I=>{n(25,l=setTimeout(()=>{E(),z(Math.max(I*_,y))},I))};let O;return t.$$set=I=>{"class"in I&&n(15,u=I.class),"label"in I&&n(0,p=I.label),"title"in I&&n(1,h=I.title),"shortcut"in I&&n(2,f=I.shortcut),"labelClass"in I&&n(16,m=I.labelClass),"innerClass"in I&&n(17,$=I.innerClass),"hideLabel"in I&&n(18,b=I.hideLabel),"icon"in I&&n(3,S=I.icon),"style"in I&&n(4,v=I.style),"disabled"in I&&n(5,T=I.disabled),"type"in I&&n(6,C=I.type),"onclick"in I&&n(7,R=I.onclick),"onkeydown"in I&&n(8,A=I.onkeydown),"onhold"in I&&n(19,E=I.onhold),"action"in I&&n(9,M=I.action),"holdThreshold"in I&&n(20,P=I.holdThreshold),"holdSpeedUpFactor"in I&&n(21,_=I.holdSpeedUpFactor),"holdSpeedMin"in I&&n(22,y=I.holdSpeedMin),"$$scope"in I&&n(29,d=I.$$scope)},t.$$.update=()=>{101187584&t.$$.dirty&&n(26,i=E?()=>{l&&(clearTimeout(l),n(25,l=void 0),document.documentElement.removeEventListener("pointerup",i))}:ve),68681728&t.$$.dirty&&n(14,r=E?()=>{document.documentElement.addEventListener("pointerup",i),z(P)}:ve),131072&t.$$.dirty&&n(13,o=$n(["PinturaButtonInner",$])),294912&t.$$.dirty&&n(12,a=$n(["PinturaButton",b&&"PinturaButtonIconOnly",u])),327680&t.$$.dirty&&n(11,s=$n([b?"implicit":"PinturaButtonLabel",m]))},[p,h,f,S,v,T,C,R,A,M,O,s,a,o,r,u,m,$,b,E,P,_,y,I=>uw(I,O),()=>O,l,i,c,function(I){zn[I?"unshift":"push"](()=>{O=I,n(10,O)})},d]}class Rl extends mn{constructor(e){super(),hn(this,e,nM,eM,rn,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var pw=(t,e)=>{const n=t.findIndex(e);if(n>=0)return t.splice(n,1)};const rM=80;var Ml=(t,e={})=>{const{inertia:n=!1,inertiaDurationMultiplier:r=rM,shouldStartInteraction:i=()=>!0,pinch:o=!1,multiTouch:a,getEventPosition:s=et=>dt(et.clientX,et.clientY),observeKeys:l=!1}=e;function c(et,Y){t.dispatchEvent(new CustomEvent(et,{detail:Y}))}function d(){R&&R(),R=void 0}const u=[],p=et=>et.timeStamp===0?Date.now():et.timeStamp,h=()=>{const et=Ue(u[0].position);if(u[1]){const Y=.5*(u[1].position.x-et.x),j=.5*(u[1].position.y-et.y);et.x+=Y,et.y+=j}return et},f=et=>{et.origin.x=et.position.x,et.origin.y=et.position.y,et.translation.x=0,et.translation.y=0},m=et=>{const Y=(j=>u.findIndex(ct=>ct.event.pointerId===j.pointerId))(et);if(!(Y<0))return u[Y]},$=()=>u.length===1,b=()=>u.length===2,S=et=>{const Y=ha(et.map(j=>j.position));return{center:Y,distance:((j,ct)=>j.reduce((U,ft)=>U+Vo(ct,ft.position),0)/j.length)(et,Y),velocity:ha(et.map(j=>j.velocity)),translation:ha(et.map(j=>j.translation))}};let v,T,C,R,A,E,M,P,_=0,y;t.addEventListener("pointerdown",G);const z=["Meta","Control","Alt","Shift"];function O(et){if(!z.includes(et.key))return;const{metaKey:Y,ctrlKey:j,altKey:ct,shiftKey:U}=et;k({metaKey:Y,ctrlKey:j,altKey:ct,shiftKey:U})}let I=Date.now();const k=et=>{const Y=Ue(u[0].translation);let j=M;o&&b()&&(j*=Vo(u[0].position,u[1].position)/A,Xr(Y,u[1].translation)),Xr(Y,E);const ct=Date.now();ct-I<16||(I=ct,c("interactionupdate",{position:h(),translation:Y,scalar:o?j:void 0,isMultiTouching:b(),...et}))};function G(et){if(!b()&&!(Y=>Sn(Y.button)&&Y.button!==0)(et)&&i(et,t)){if(d(),(Y=>{const j=p(Y),ct={timeStamp:j,timeStampInitial:j,position:s(Y),origin:s(Y),velocity:pr(),velocityHistory:[],velocityAverage:pr(),translation:pr(),interactionState:void 0,event:Y};u.push(ct),ct.interactionState=S(u)})(et),l&&(window.addEventListener("keydown",O),window.addEventListener("keyup",O)),$())document.documentElement.addEventListener("pointermove",X),document.documentElement.addEventListener("pointerup",q),document.documentElement.addEventListener("pointercancel",q),document.addEventListener("visibilitychange",lt),P=!1,M=1,E=pr(),A=void 0,c("interactionstart",{origin:Ue(m(et).origin)});else if(o)P=!0,A=Vo(u[0].position,u[1].position),E.x+=u[0].translation.x,E.y+=u[0].translation.y,f(u[0]);else if(a===!1)return u.length=0,Lt(),c("interactioncancel")}}function X(et){et.preventDefault(),(ft=>{const yt=m(ft);if(!yt)return;const It=p(ft),Jt=s(ft),pe=Math.max(1,It-yt.timeStamp);yt.velocity.x=(Jt.x-yt.position.x)/pe,yt.velocity.y=(Jt.y-yt.position.y)/pe,yt.velocityHistory.push(Ue(yt.velocity)),yt.velocityHistory=yt.velocityHistory.slice(-3),yt.velocityAverage=yt.velocityHistory.reduce((mt,ot,Q,Se)=>(mt.x+=ot.x/Se.length,mt.y+=ot.y/Se.length,mt),pr()),yt.translation.x=Jt.x-yt.origin.x,yt.translation.y=Jt.y-yt.origin.y,yt.timeStamp=It,yt.position.x=Jt.x,yt.position.y=Jt.y,yt.event=ft})(et);const{metaKey:Y=!1,ctrlKey:j=!1,altKey:ct=!1,shiftKey:U=!1}=l?et:{};k({metaKey:Y,ctrlKey:j,altKey:ct,shiftKey:U})}function q(et){if(!m(et))return;const Y=h(),j=(pe=>{const mt=pw(u,ot=>ot.event.pointerId===pe.pointerId);if(mt)return mt[0]})(et);if(o&&$()){const pe=Vo(u[0].position,j.position);M*=pe/A,E.x+=u[0].translation.x+j.translation.x,E.y+=u[0].translation.y+j.translation.y,f(u[0])}let ct=!1,U=!1;if(!P&&j){const pe=performance.now(),mt=pe-j.timeStampInitial;ct=pa(j.translation)<64&&mt<300,U=!!(y&&ct&&pe-_<700&&pa(y,j.position)<128),ct&&(y=Ue(j.position),_=pe)}if(u.length>0)return;Lt();const ft=Ue(j.translation),yt=Ue(j.velocityAverage);let It=!1;c("interactionrelease",{isTap:ct,isDoubleTap:U,position:Y,translation:ft,scalar:M,preventInertia:()=>It=!0});const Jt=Vo(yt);if(It||!n||Jt<.25)return pt(ft,{isTap:ct,isDoubleTap:U});T=Ue(Y),C=Ue(ft),v=Nf(Ue(ft),{easing:AR,duration:Jt*r}),v.set({x:ft.x+50*yt.x,y:ft.y+50*yt.y}).then(()=>{R&&pt(rs(v),{isTap:ct,isDoubleTap:U})}),R=v.subscribe(D)}function D(et){et&&c("interactionupdate",{position:dt(T.x+(et.x-C.x),T.y+(et.y-C.y)),translation:et,scalar:o?M:void 0})}function lt(et){if(document.visibilityState==="visible"||!u.length)return;const Y=S(u);d(),c("interactionend",{...Y}),u.length=0,Lt()}function pt(et,Y){d(),c("interactionend",{...Y,translation:et,scalar:o?M:void 0})}function Lt(){l&&window.removeEventListener("keydown",O),l&&window.removeEventListener("keyup",O),document.documentElement.removeEventListener("pointermove",X),document.documentElement.removeEventListener("pointerup",q),document.documentElement.removeEventListener("pointercancel",q),document.addEventListener("visibilitychange",lt)}return{destroy(){d(),t.removeEventListener("pointerdown",G)}}},kl=(t,e={})=>{const{direction:n,shiftMultiplier:r=10,bubbles:i=!1,preventDefault:o=!1,stopKeydownPropagation:a=!0}=e,s=n==="horizontal",l=n==="vertical",c=d=>{const{key:u}=d,p=d.shiftKey,h=/up|down/i.test(u),f=/left|right/i.test(u);if(!f&&!h||s&&h||l&&f)return;const m=p?r:1;a&&d.stopPropagation(),o&&d.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:i,detail:dt((/left/i.test(u)?-1:/right/i.test(u)?1:0)*m,(/up/i.test(u)?-1:/down/i.test(u)?1:0)*m)}))};return t.addEventListener("keydown",c),{destroy(){t.removeEventListener("keydown",c)}}};function pl(t,e){return e?e*Math.sign(t)*Math.log10(1+Math.abs(t)/e):t}const E2=(t,e,n)=>{if(!e||!n)return{...t};const r=t.x+pl(e.x-t.x,n),i=t.x+t.width+pl(e.x+e.width-(t.x+t.width),n),o=t.y+pl(e.y-t.y,n);return{x:r,y:o,width:i-r,height:t.y+t.height+pl(e.y+e.height-(t.y+t.height),n)-o}},iM=(t,e,n)=>e&&n?dt(t.x+pl(e.x-t.x,n),t.y+pl(e.y-t.y,n)):{...t};var hw=(t,e)=>{if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},Dh=t=>{let e=t.detail||0;const{deltaX:n,deltaY:r,wheelDelta:i,wheelDeltaX:o,wheelDeltaY:a}=t;return Sn(o)&&Math.abs(o)>Math.abs(a)?e=o/-120:Sn(n)&&Math.abs(n)>Math.abs(r)?e=n/20:(i||a)&&(e=(i||a)/-120),e||(e=r/20),(ws()||Ss())&&(e*=2),e};function oM(t){let e,n,r,i,o,a,s;const l=t[36].default,c=Si(l,t,t[35],null);return{c(){e=bt("div"),n=bt("div"),c&&c.c(),w(n,"style",t[5]),w(e,"class",r=$n(["PinturaScrollable",t[0]])),w(e,"style",t[4]),w(e,"data-direction",t[1]),w(e,"data-state",t[6])},m(d,u){it(d,e,u),Rt(e,n),c&&c.m(n,null),t[38](e),o=!0,a||(s=[kt(n,"interactionstart",t[8]),kt(n,"interactionupdate",t[10]),kt(n,"interactionend",t[11]),kt(n,"interactionrelease",t[9]),Jn(Ml.call(null,n,{inertia:!0})),kt(n,"measure",t[37]),Jn(Ui.call(null,n)),kt(e,"wheel",t[13],{passive:!1}),kt(e,"scroll",t[15]),kt(e,"focusin",t[14]),kt(e,"nudge",t[16]),kt(e,"measure",t[12]),Jn(Ui.call(null,e,{observePosition:!0})),Jn(i=kl.call(null,e,{direction:t[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1}))],a=!0)},p(d,u){c&&c.p&&(!o||16&u[1])&&Ti(c,l,d,d[35],o?wi(l,d[35],u,null):Ei(d[35]),null),(!o||32&u[0])&&w(n,"style",d[5]),(!o||1&u[0]&&r!==(r=$n(["PinturaScrollable",d[0]])))&&w(e,"class",r),(!o||16&u[0])&&w(e,"style",d[4]),(!o||2&u[0])&&w(e,"data-direction",d[1]),(!o||64&u[0])&&w(e,"data-state",d[6]),i&&Qn(i.update)&&2&u[0]&&i.update.call(null,{direction:d[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1})},i(d){o||(L(c,d),o=!0)},o(d){W(c,d),o=!1},d(d){d&&nt(e),c&&c.d(d),t[38](null),a=!1,tr(s)}}}function aM(t,e,n){let r,i,o,a,s,l,c,d,{$$slots:u={},$$scope:p}=e;const h=ls();let f,m,$,b,S="idle",v=un(0);N(t,v,Y=>n(34,d=Y));let T,{class:C}=e,{scrollBlockInteractionDist:R=5}=e,{scrollStep:A=10}=e,{scrollFocusMargin:E=64}=e,{scrollDirection:M="x"}=e,{scrollAutoCancel:P=!1}=e,{elasticity:_=0}=e,{onscroll:y=ve}=e,{maskFeatherSize:z}=e,{maskFeatherStartOpacity:O}=e,{maskFeatherEndOpacity:I}=e,{scroll:k}=e,G="",X=!0;const q=v.subscribe(Y=>{const j=pr();j[M]=Y,y(j)}),D=Y=>Math.max(Math.min(0,Y),$[r]-m[r]);let lt,pt,Lt;const et=(Y,j={})=>{const{elastic:ct=!1,animate:U=!1,preventScrollState:ft=!1}=j;Math.abs(Y-f)>R&&S==="idle"&&!b&&!ft&&n(27,S="scrolling");const yt=D(Y),It=ct&&_&&!b?yt+pl(Y-yt,_):yt;let Jt=!0;U?Jt=!1:X||(Jt=!b),X=!1,v.set(It,{hard:Jt}).then(pe=>{b&&(X=!0)})};return $a(()=>{q()}),t.$$set=Y=>{"class"in Y&&n(0,C=Y.class),"scrollBlockInteractionDist"in Y&&n(20,R=Y.scrollBlockInteractionDist),"scrollStep"in Y&&n(21,A=Y.scrollStep),"scrollFocusMargin"in Y&&n(22,E=Y.scrollFocusMargin),"scrollDirection"in Y&&n(1,M=Y.scrollDirection),"scrollAutoCancel"in Y&&n(23,P=Y.scrollAutoCancel),"elasticity"in Y&&n(24,_=Y.elasticity),"onscroll"in Y&&n(25,y=Y.onscroll),"maskFeatherSize"in Y&&n(19,z=Y.maskFeatherSize),"maskFeatherStartOpacity"in Y&&n(17,O=Y.maskFeatherStartOpacity),"maskFeatherEndOpacity"in Y&&n(18,I=Y.maskFeatherEndOpacity),"scroll"in Y&&n(26,k=Y.scroll),"$$scope"in Y&&n(35,p=Y.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&n(31,r=M==="x"?"width":"height"),2&t.$$.dirty[0]&&n(29,i=M.toUpperCase()),8&t.$$.dirty[0]&&n(33,o=T&&getComputedStyle(T)),8&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(32,a=o&&hw(o.getPropertyValue("--scrollable-feather-size"))),268828676&t.$$.dirty[0]|11&t.$$.dirty[1]&&d!=null&&$&&a!=null&&m){const Y=-1*d/a,j=-($[r]-m[r]-d)/a;n(17,O=sr(1-Y,0,1)),n(18,I=sr(1-j,0,1)),n(19,z=a),n(4,G=`--scrollable-feather-start-opacity: ${O};--scrollable-feather-end-opacity: ${I}`)}67108872&t.$$.dirty[0]&&T&&k!==void 0&&(Sn(k)?et(k):et(k.scrollOffset,k)),268435460&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(30,s=$&&m?m[r]>$[r]:void 0),1207959552&t.$$.dirty[0]&&n(6,l=$n([S,s?"overflows":void 0])),1610612736&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(5,c=s?`transform: translate${i}(${d}px)`:void 0)},[C,M,m,T,G,c,l,v,()=>{s&&(pt=!1,lt=!0,Lt=dt(0,0),b=!1,n(27,S="idle"),f=rs(v))},({detail:Y})=>{s&&(b=!0,n(27,S="idle"))},({detail:Y})=>{s&&(pt||lt&&(lt=!1,pa(Y.translation)<.1)||(!P||M!=="x"||(j=>{const ct=Jo(dt(j.x-Lt.x,j.y-Lt.y),Math.abs);Lt=Ue(j);const U=pa(ct),ft=ct.x-ct.y;return!(U>1&&ft<-.5)})(Y.translation)?et(f+Y.translation[M],{elastic:!0}):pt=!0))},({detail:Y})=>{if(!s||pt)return;const j=f+Y.translation[M],ct=D(j);X=!1,v.set(ct).then(U=>{b&&(X=!0)})},({detail:Y})=>{n(28,$=Y),h("measure",{x:Y.x,y:Y.y,width:Y.width,height:Y.height})},Y=>{if(!s)return;Y.preventDefault(),Y.stopPropagation();const j=Y.shiftKey,ct=Dh(Y)*(j?-1:1),U=rs(v);et(U+ct*A,{animate:!0})},Y=>{if(!s||!b)return;let j=Y.target;Y.target.classList.contains("implicit")&&(j=j.parentNode);const ct=j[M==="x"?"offsetLeft":"offsetTop"],U=ct+j[M==="x"?"offsetWidth":"offsetHeight"],ft=rs(v),yt=E+z;ft+ct<yt?et(-ct+yt):ft+U>$[r]-yt&&et($[r]-U-yt,{animate:!0})},()=>{n(3,T[M==="x"?"scrollLeft":"scrollTop"]=0,T)},({detail:Y})=>{if(T.querySelector("[data-focus-visible]"))return;const j=-2*Y[M],ct=rs(v);et(ct+j*A,{animate:!0,preventScrollState:!0})},O,I,z,R,A,E,P,_,y,k,S,$,i,s,r,a,o,d,p,u,Y=>n(2,m=Y.detail),function(Y){zn[Y?"unshift":"push"](()=>{T=Y,n(3,T)})}]}class cs extends mn{constructor(e){super(),hn(this,e,aM,oM,rn,{class:0,scrollBlockInteractionDist:20,scrollStep:21,scrollFocusMargin:22,scrollDirection:1,scrollAutoCancel:23,elasticity:24,onscroll:25,maskFeatherSize:19,maskFeatherStartOpacity:17,maskFeatherEndOpacity:18,scroll:26},null,[-1,-1])}}function I2(t,{delay:e=0,duration:n=400,easing:r=Mf}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:o=>"opacity: "+o*i}}function sM(t){let e,n,r,i,o;return{c(){e=bt("span"),w(e,"class","PinturaStatusMessage")},m(a,s){it(a,e,s),e.innerHTML=t[0],r=!0,i||(o=[kt(e,"measure",function(){Qn(t[1])&&t[1].apply(this,arguments)}),Jn(Ui.call(null,e))],i=!0)},p(a,[s]){t=a,(!r||1&s)&&(e.innerHTML=t[0])},i(a){r||(nd(()=>{n||(n=Uy(e,I2,{duration:500},!0)),n.run(1)}),r=!0)},o(a){n||(n=Uy(e,I2,{duration:500},!1)),n.run(0),r=!1},d(a){a&&nt(e),a&&n&&n.end(),i=!1,tr(o)}}}function lM(t,e,n){let{text:r}=e,{onmeasure:i=ve}=e;return t.$$set=o=>{"text"in o&&n(0,r=o.text),"onmeasure"in o&&n(1,i=o.onmeasure)},[r,i]}class mw extends mn{constructor(e){super(),hn(this,e,lM,sM,rn,{text:0,onmeasure:1})}}function cM(t){let e,n,r,i,o,a,s,l,c;return{c(){e=bt("span"),n=zi("svg"),r=zi("g"),i=zi("circle"),o=zi("circle"),a=be(),s=bt("span"),l=vr(t[3]),w(i,"class","PinturaProgressIndicatorBar"),w(i,"r","8.5"),w(i,"cx","10"),w(i,"cy","10"),w(i,"stroke-linecap","round"),w(i,"opacity",".25"),w(o,"class","PinturaProgressIndicatorFill"),w(o,"r","8.5"),w(o,"stroke-dasharray",t[2]),w(o,"cx","10"),w(o,"cy","10"),w(o,"transform","rotate(-90) translate(-20)"),w(r,"fill","none"),w(r,"stroke","currentColor"),w(r,"stroke-width","2.5"),w(r,"stroke-linecap","round"),w(r,"opacity",t[1]),w(n,"width","20"),w(n,"height","20"),w(n,"viewBox","0 0 20 20"),w(n,"xmlns","http://www.w3.org/2000/svg"),w(n,"aria-hidden","true"),w(n,"focusable","false"),w(s,"class","implicit"),w(e,"class","PinturaProgressIndicator"),w(e,"data-status",t[0]),w(e,"style",c="opacity:"+t[4])},m(d,u){it(d,e,u),Rt(e,n),Rt(n,r),Rt(r,i),Rt(r,o),Rt(e,a),Rt(e,s),Rt(s,l)},p(d,[u]){4&u&&w(o,"stroke-dasharray",d[2]),2&u&&w(r,"opacity",d[1]),8&u&&Vr(l,d[3]),1&u&&w(e,"data-status",d[0]),16&u&&c!==(c="opacity:"+d[4])&&w(e,"style",c)},i:Je,o:Je,d(d){d&&nt(e)}}}function dM(t,e,n){let r,i,o,a,s,l,c;const d=ls();let{progress:u}=e,{min:p=0}=e,{max:h=100}=e,{labelBusy:f="Busy"}=e,{opacity:m}=e;const $=un(m,{precision:.01});N(t,$,C=>n(4,c=C));const b=un(0,{precision:.01}),S=un(0,{precision:.01});N(t,S,C=>n(13,s=C));const v=Fn([b],C=>sr(C,p,h));N(t,v,C=>n(14,l=C));const T=v.subscribe(C=>{u===1&&Math.round(C)>=100&&d("complete")});return _l(()=>{S.set(1)}),$a(()=>{T()}),t.$$set=C=>{"progress"in C&&n(8,u=C.progress),"min"in C&&n(9,p=C.min),"max"in C&&n(10,h=C.max),"labelBusy"in C&&n(11,f=C.labelBusy),"opacity"in C&&n(12,m=C.opacity)},t.$$.update=()=>{4096&t.$$.dirty&&Sn(m)&&$.set(m),256&t.$$.dirty&&u&&u!==1/0&&b.set(100*u),18688&t.$$.dirty&&n(3,r=u===1/0?f:Math.round(l)+"%"),16640&t.$$.dirty&&n(2,i=u===1/0?"26.5 53":l/100*53+" 53"),8192&t.$$.dirty&&n(1,o=s),256&t.$$.dirty&&n(0,a=u===1/0?"busy":"loading")},[a,o,i,r,c,$,S,v,u,p,h,f,m,s,l]}class fw extends mn{constructor(e){super(),hn(this,e,dM,cM,rn,{progress:8,min:9,max:10,labelBusy:11,opacity:12})}}function uM(t){let e,n,r;const i=t[5].default,o=Si(i,t,t[4],null);return{c(){e=bt("span"),o&&o.c(),w(e,"class",n="PinturaStatusAside "+t[0]),w(e,"style",t[1])},m(a,s){it(a,e,s),o&&o.m(e,null),r=!0},p(a,[s]){o&&o.p&&(!r||16&s)&&Ti(o,i,a,a[4],r?wi(i,a[4],s,null):Ei(a[4]),null),(!r||1&s&&n!==(n="PinturaStatusAside "+a[0]))&&w(e,"class",n),(!r||2&s)&&w(e,"style",a[1])},i(a){r||(L(o,a),r=!0)},o(a){W(o,a),r=!1},d(a){a&&nt(e),o&&o.d(a)}}}function pM(t,e,n){let r,{$$slots:i={},$$scope:o}=e,{offset:a=0}=e,{opacity:s=0}=e,{class:l}=e;return t.$$set=c=>{"offset"in c&&n(2,a=c.offset),"opacity"in c&&n(3,s=c.opacity),"class"in c&&n(0,l=c.class),"$$scope"in c&&n(4,o=c.$$scope)},t.$$.update=()=>{12&t.$$.dirty&&n(1,r=`transform:translateX(${a}px);opacity:${s}`)},[l,r,a,s,o,i]}class gw extends mn{constructor(e){super(),hn(this,e,pM,uM,rn,{offset:2,opacity:3,class:0})}}const{document:_2}=GS;function hM(t){let e,n,r,i;return{c(){e=be(),n=bt("button"),w(n,"class","PinturaImageButton"),w(n,"type","button"),w(n,"title",t[1]),n.disabled=t[2]},m(o,a){it(o,e,a),it(o,n,a),n.innerHTML=t[0],t[11](n),r||(i=[kt(_2.body,"load",t[5],!0),kt(_2.body,"error",t[6],!0),kt(n,"pointerdown",t[4])],r=!0)},p(o,[a]){1&a&&(n.innerHTML=o[0]),2&a&&w(n,"title",o[1]),4&a&&(n.disabled=o[2])},i:Je,o:Je,d(o){o&&nt(e),o&&nt(n),t[11](null),r=!1,tr(i)}}}function mM(t,e,n){let r,{html:i}=e,{title:o}=e,{onclick:a}=e,{disabled:s=!1}=e,{ongrab:l=ve}=e,{ondrag:c=ve}=e,{ondrop:d=ve}=e;const u=$=>pa(p,dt($.pageX,$.pageY))<256;let p;const h=$=>{document.documentElement.removeEventListener("pointermove",f),document.documentElement.removeEventListener("pointerup",h);const b=dt($.pageX,$.pageY);if(pa(p,b)<32)return a($);u($)||d($)},f=$=>{u($)||c($)},m=$=>r&&r.contains($)&&$.nodeName==="IMG";return t.$$set=$=>{"html"in $&&n(0,i=$.html),"title"in $&&n(1,o=$.title),"onclick"in $&&n(7,a=$.onclick),"disabled"in $&&n(2,s=$.disabled),"ongrab"in $&&n(8,l=$.ongrab),"ondrag"in $&&n(9,c=$.ondrag),"ondrop"in $&&n(10,d=$.ondrop)},t.$$.update=()=>{8&t.$$.dirty&&r&&r.querySelector("img")&&n(3,r.dataset.loader=!0,r)},[i,o,s,r,$=>{p=dt($.pageX,$.pageY),l($),document.documentElement.addEventListener("pointermove",f),document.documentElement.addEventListener("pointerup",h)},({target:$})=>{m($)&&n(3,r.dataset.load=!0,r)},({target:$})=>{m($)&&n(3,r.dataset.error=!0,r)},a,l,c,d,function($){zn[$?"unshift":"push"](()=>{r=$,n(3,r)})}]}class $w extends mn{constructor(e){super(),hn(this,e,mM,hM,rn,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function C2(t,e,n){const r=t.slice();return r[14]=e[n],r}function R2(t,e){let n,r,i,o,a,s,l;function c(){return e[10](e[14])}function d(...h){return e[11](e[14],...h)}function u(...h){return e[12](e[14],...h)}function p(...h){return e[13](e[14],...h)}return r=new $w({props:{onclick:c,ongrab:d,ondrag:u,ondrop:p,disabled:e[1]||e[14].disabled,title:e[14].title,html:e[14].thumb}}),{key:t,first:null,c(){n=bt("li"),zt(r.$$.fragment),i=be(),w(n,"style",e[6]),this.first=n},m(h,f){it(h,n,f),Ft(r,n,null),Rt(n,i),a=!0,s||(l=Jn(o=e[8].call(null,n,e[14])),s=!0)},p(h,f){e=h;const m={};5&f&&(m.onclick=c),9&f&&(m.ongrab=d),17&f&&(m.ondrag=u),33&f&&(m.ondrop=p),3&f&&(m.disabled=e[1]||e[14].disabled),1&f&&(m.title=e[14].title),1&f&&(m.html=e[14].thumb),r.$set(m),(!a||64&f)&&w(n,"style",e[6]),o&&Qn(o.update)&&1&f&&o.update.call(null,e[14])},i(h){a||(L(r.$$.fragment,h),a=!0)},o(h){W(r.$$.fragment,h),a=!1},d(h){h&&nt(n),Bt(r),s=!1,l()}}}function fM(t){let e,n,r=[],i=new Map,o=t[0];const a=s=>s[14].id;for(let s=0;s<o.length;s+=1){let l=C2(t,o,s),c=a(l);i.set(c,r[s]=R2(c,l))}return{c(){e=bt("ul");for(let s=0;s<r.length;s+=1)r[s].c();w(e,"class","PinturaImageButtonList")},m(s,l){it(s,e,l);for(let c=0;c<r.length;c+=1)r[c].m(e,null);n=!0},p(s,[l]){127&l&&(o=s[0],Be(),r=_s(r,l,a,1,s,o,i,e,Cl,R2,null,C2),ze())},i(s){if(!n){for(let l=0;l<o.length;l+=1)L(r[l]);n=!0}},o(s){for(let l=0;l<r.length;l+=1)W(r[l]);n=!1},d(s){s&&nt(e);for(let l=0;l<r.length;l+=1)r[l].d()}}}function gM(t,e,n){let r,i,{items:o}=e,{disabled:a}=e,{onclickitem:s}=e,{ongrabitem:l}=e,{ondragitem:c}=e,{ondropitem:d}=e;const u=un(0,{stiffness:.25,damping:.9});return N(t,u,p=>n(9,i=p)),_l(()=>u.set(1)),t.$$set=p=>{"items"in p&&n(0,o=p.items),"disabled"in p&&n(1,a=p.disabled),"onclickitem"in p&&n(2,s=p.onclickitem),"ongrabitem"in p&&n(3,l=p.ongrabitem),"ondragitem"in p&&n(4,c=p.ondragitem),"ondropitem"in p&&n(5,d=p.ondropitem)},t.$$.update=()=>{512&t.$$.dirty&&n(6,r="opacity:"+i)},[o,a,s,l,c,d,r,u,(p,h)=>h.mount&&h.mount(p.firstChild,h),i,p=>s(p.id),(p,h)=>l&&l(p.id,h),(p,h)=>c&&c(p.id,h),(p,h)=>d&&d(p.id,h)]}class Gf extends mn{constructor(e){super(),hn(this,e,gM,fM,rn,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var Gd=()=>Ji()&&window.devicePixelRatio||1;let Gm=null;var au=t=>(Gm===null&&(Gm=Gd()===1?Math.round:e=>e),Gm(t)),_0=(t,e={})=>{if(t){if(e.preventScroll&&Ss()){const n=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=n)}t.focus(e)}},yw=t=>/date|email|number|search|text|url/.test(t.type),su=t=>(e=>/textarea/i.test(e.nodeName))(t)||yw(t)||t.isContentEditable;const $M=t=>({}),M2=t=>({}),yM=t=>({}),k2=t=>({});function bM(t){let e,n;const r=[t[7]];let i={$$slots:{default:[xM]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new Rl({props:i}),t[44](e),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=128&a[0]?Vi(r,[to(o[7])]):{};131072&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){t[44](null),Bt(e,o)}}}function vM(t){let e,n;const r=[t[7]];let i={};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new Rl({props:i}),t[43](e),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=128&a[0]?Vi(r,[to(o[7])]):{};e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){t[43](null),Bt(e,o)}}}function xM(t){let e;const n=t[42].label,r=Si(n,t,t[48],k2);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||131072&o[1])&&Ti(r,n,i,i[48],e?wi(n,i[48],o,yM):Ei(i[48]),k2)},i(i){e||(L(r,i),e=!0)},o(i){W(r,i),e=!1},d(i){r&&r.d(i)}}}function P2(t){let e,n,r,i,o,a,s;const l=t[42].details,c=Si(l,t,t[48],M2);return{c(){e=bt("div"),c&&c.c(),n=be(),r=bt("span"),w(r,"class","PinturaPanelTip"),w(r,"style",t[10]),w(e,"class",i=$n(["PinturaPanel","pintura-editor-panel",t[2]])),w(e,"tabindex","-1"),w(e,"style",t[11])},m(d,u){it(d,e,u),c&&c.m(e,null),Rt(e,n),Rt(e,r),t[45](e),o=!0,a||(s=[kt(e,"close",t[46]),kt(e,"keydown",t[18]),kt(e,"measure",t[47]),Jn(Ui.call(null,e))],a=!0)},p(d,u){c&&c.p&&(!o||131072&u[1])&&Ti(c,l,d,d[48],o?wi(l,d[48],u,$M):Ei(d[48]),M2),(!o||1024&u[0])&&w(r,"style",d[10]),(!o||4&u[0]&&i!==(i=$n(["PinturaPanel","pintura-editor-panel",d[2]])))&&w(e,"class",i),(!o||2048&u[0])&&w(e,"style",d[11])},i(d){o||(L(c,d),o=!0)},o(d){W(c,d),o=!1},d(d){d&&nt(e),c&&c.d(d),t[45](null),a=!1,tr(s)}}}function SM(t){let e,n,r,i,o,a,s,l,c;const d=[vM,bM],u=[];function p(f,m){return f[1]?0:1}n=p(t),r=u[n]=d[n](t);let h=t[6]&&P2(t);return{c(){e=be(),r.c(),i=be(),h&&h.c(),o=be(),a=Nr()},m(f,m){it(f,e,m),u[n].m(f,m),it(f,i,m),h&&h.m(f,m),it(f,o,m),it(f,a,m),s=!0,l||(c=[kt(document.body,"pointerdown",function(){Qn(t[9])&&t[9].apply(this,arguments)}),kt(document.body,"pointerup",function(){Qn(t[8])&&t[8].apply(this,arguments)})],l=!0)},p(f,m){let $=n;n=p(t=f),n===$?u[n].p(t,m):(Be(),W(u[$],1,1,()=>{u[$]=null}),ze(),r=u[n],r?r.p(t,m):(r=u[n]=d[n](t),r.c()),L(r,1),r.m(i.parentNode,i)),t[6]?h?(h.p(t,m),64&m[0]&&L(h,1)):(h=P2(t),h.c(),L(h,1),h.m(o.parentNode,o)):h&&(Be(),W(h,1,1,()=>{h=null}),ze())},i(f){s||(L(r),L(h),L(!1),s=!0)},o(f){W(r),W(h),W(!1),s=!1},d(f){f&&nt(e),u[n].d(f),f&&nt(i),h&&h.d(f),f&&nt(o),f&&nt(a),l=!1,tr(c)}}}function wM(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,b,S,v,T,{$$slots:C={},$$scope:R}=e,{buttonClass:A}=e,{buttonLabel:E}=e,{buttonLabelClass:M}=e,{buttonHideLabel:P}=e,{buttonIcon:_}=e,{buttonTitle:y}=e,{panelClass:z}=e,{isActive:O=!1}=e,{onshow:I=({panel:ot})=>_0(ot,{preventScroll:!0})}=e,{onhide:k=ve}=e;const G=kr("isAnimated");N(t,G,ot=>n(41,T=ot));const X=kr("rootPortal");N(t,X,ot=>n(36,m=ot));const q=kr("rootRect");let D,lt,pt;N(t,q,ot=>n(40,v=ot));const Lt=()=>n(26,pt=r&&r.getBoundingClientRect());let et=pr(),Y=un(0);N(t,Y,ot=>n(38,b=ot));let j=pr();const ct=ye({x:0,y:0});N(t,ct,ot=>n(37,$=ot));const U=un(-5,{stiffness:.1,damping:.35,precision:.001});N(t,U,ot=>n(39,S=ot));const ft=ot=>uw(ot,m)||lt.isEventTarget(ot);let yt,It,Jt=!1;const pe=ot=>{su(ot.target)||(O||Lt(),n(30,It=ot),n(0,O=!O))},mt=ot=>{/down/i.test(ot.key)&&(n(0,O=!0),n(30,It=ot))};return $a(()=>{if(!m||!yt)return;const ot=yt;US().then(()=>{ot.parentNode&&ot.remove()})}),t.$$set=ot=>{"buttonClass"in ot&&n(19,A=ot.buttonClass),"buttonLabel"in ot&&n(1,E=ot.buttonLabel),"buttonLabelClass"in ot&&n(20,M=ot.buttonLabelClass),"buttonHideLabel"in ot&&n(21,P=ot.buttonHideLabel),"buttonIcon"in ot&&n(22,_=ot.buttonIcon),"buttonTitle"in ot&&n(23,y=ot.buttonTitle),"panelClass"in ot&&n(2,z=ot.panelClass),"isActive"in ot&&n(0,O=ot.isActive),"onshow"in ot&&n(24,I=ot.onshow),"onhide"in ot&&n(25,k=ot.onhide),"$$scope"in ot&&n(48,R=ot.$$scope)},t.$$.update=()=>{if(16&t.$$.dirty[0]&&(r=lt&&lt.getElement()),536870913&t.$$.dirty[0]&&n(8,h=O?ot=>{Jt&&(n(29,Jt=!1),ft(ot)||n(0,O=!1))}:void 0),1&t.$$.dirty[0]|1024&t.$$.dirty[1]&&Y.set(O?1:0,{hard:T===!1}),1&t.$$.dirty[0]|1024&t.$$.dirty[1]&&U.set(O?0:-5,{hard:T===!1}),256&t.$$.dirty[1]&&n(33,i=1-S/-5),1&t.$$.dirty[0]|512&t.$$.dirty[1]&&v&&O&&Lt(),67108873&t.$$.dirty[0]|512&t.$$.dirty[1]&&v&&D&&pt&&O){let ot=pt.x-v.x+.5*pt.width-.5*D.width,Q=pt.y-v.y+pt.height;const Se=12,Mt=12,xt=v.width-12,Wt=v.height-12,Ht=ot,Ae=Q,ke=Ht+D.width,st=Ae+D.height;Ht<Se&&(n(28,j.x=Ht-Se,j),ot=Se),ke>xt&&(n(28,j.x=ke-xt,j),ot=xt-D.width),st>Wt?(n(27,et.y=-1,et),Mt<Q-D.height-pt.height?(n(28,j.y=0,j),Q-=D.height+pt.height):(n(28,j.y=Q-(st-Wt),j),Q-=st-Wt)):n(27,et.y=1,et),Ct(ct,$=Jo(dt(ot,Q),au),$)}128&t.$$.dirty[1]&&n(6,o=b>0),128&t.$$.dirty[1]&&n(35,a=b<1),134217728&t.$$.dirty[0]|320&t.$$.dirty[1]&&n(34,s=`translateX(${Math.round($.x)+12*et.x}px) translateY(${Math.round($.y)+12*et.y+et.y*S}px)`),152&t.$$.dirty[1]&&n(11,l=a?`opacity: ${b}; pointer-events: ${b<1?"none":"all"}; transform: ${s};`:"transform: "+s),4&t.$$.dirty[1]&&n(31,c=.5+.5*i),4&t.$$.dirty[1]&&n(32,d=i),402653192&t.$$.dirty[0]|67&t.$$.dirty[1]&&n(10,u=$&&D&&`opacity:${d};transform:scaleX(${c})rotate(45deg);top:${et.y<0?j.y+D.height:0}px;left:${j.x+.5*D.width}px`),1&t.$$.dirty[0]&&n(9,p=O?ot=>{ft(ot)||n(29,Jt=!0)}:void 0),96&t.$$.dirty[0]|32&t.$$.dirty[1]&&o&&m&&yt&&yt.parentNode!==m&&m.append(yt),1&t.$$.dirty[0]&&(O||n(30,It=void 0)),1090519137&t.$$.dirty[0]&&O&&o&&yt&&I({e:It,panel:yt}),33554497&t.$$.dirty[0]&&o&&!O&&k(),16252930&t.$$.dirty[0]&&n(7,f={label:E,icon:_,class:$n(["PinturaPanelButton",A]),onkeydown:mt,onclick:pe,hideLabel:P,labelClass:M,title:y})},[O,E,z,D,lt,yt,o,f,h,p,u,l,G,X,q,Y,ct,U,ot=>{/esc/i.test(ot.key)&&(n(0,O=!1),r.focus())},A,M,P,_,y,I,k,pt,et,j,Jt,It,c,d,i,s,a,m,$,b,S,v,T,C,function(ot){zn[ot?"unshift":"push"](()=>{lt=ot,n(4,lt)})},function(ot){zn[ot?"unshift":"push"](()=>{lt=ot,n(4,lt)})},function(ot){zn[ot?"unshift":"push"](()=>{yt=ot,n(5,yt)})},ot=>{ot.stopPropagation(),n(0,O=!1)},ot=>n(3,D=Is(ot.detail)),R]}class Fh extends mn{constructor(e){super(),hn(this,e,wM,SM,rn,{buttonClass:19,buttonLabel:1,buttonLabelClass:20,buttonHideLabel:21,buttonIcon:22,buttonTitle:23,panelClass:2,isActive:0,onshow:24,onhide:25},null,[-1,-1])}}var TM={Up:38,Down:40,Left:37,Right:39};function EM(t){let e,n,r,i,o,a,s,l;const c=t[15].default,d=Si(c,t,t[14],null);return{c(){e=bt("li"),n=bt("input"),r=be(),i=bt("label"),d&&d.c(),w(n,"type","radio"),w(n,"class","implicit"),w(n,"id",t[7]),w(n,"name",t[0]),n.value=t[3],n.disabled=t[6],n.hidden=t[5],n.checked=t[4],w(i,"for",t[7]),w(i,"title",t[2]),w(e,"class",o=$n(["PinturaRadioGroupOption",t[1]])),w(e,"data-hidden",t[5]),w(e,"data-disabled",t[6]),w(e,"data-selected",t[4])},m(u,p){it(u,e,p),Rt(e,n),Rt(e,r),Rt(e,i),d&&d.m(i,null),a=!0,s||(l=[kt(n,"change",zC(t[16])),kt(n,"keydown",t[9]),kt(n,"click",t[10])],s=!0)},p(u,[p]){(!a||128&p)&&w(n,"id",u[7]),(!a||1&p)&&w(n,"name",u[0]),(!a||8&p)&&(n.value=u[3]),(!a||64&p)&&(n.disabled=u[6]),(!a||32&p)&&(n.hidden=u[5]),(!a||16&p)&&(n.checked=u[4]),d&&d.p&&(!a||16384&p)&&Ti(d,c,u,u[14],a?wi(c,u[14],p,null):Ei(u[14]),null),(!a||128&p)&&w(i,"for",u[7]),(!a||4&p)&&w(i,"title",u[2]),(!a||2&p&&o!==(o=$n(["PinturaRadioGroupOption",u[1]])))&&w(e,"class",o),(!a||32&p)&&w(e,"data-hidden",u[5]),(!a||64&p)&&w(e,"data-disabled",u[6]),(!a||16&p)&&w(e,"data-selected",u[4])},i(u){a||(L(d,u),a=!0)},o(u){W(d,u),a=!1},d(u){u&&nt(e),d&&d.d(u),s=!1,tr(l)}}}function IM(t,e,n){let r,i,{$$slots:o={},$$scope:a}=e,{name:s}=e,{class:l}=e,{label:c}=e,{id:d}=e,{value:u}=e,{checked:p}=e,{onkeydown:h}=e,{onclick:f}=e,{hidden:m=!1}=e,{disabled:$=!1}=e;const b=Object.values(TM),S=kr("keysPressed");return N(t,S,v=>n(17,i=v)),t.$$set=v=>{"name"in v&&n(0,s=v.name),"class"in v&&n(1,l=v.class),"label"in v&&n(2,c=v.label),"id"in v&&n(11,d=v.id),"value"in v&&n(3,u=v.value),"checked"in v&&n(4,p=v.checked),"onkeydown"in v&&n(12,h=v.onkeydown),"onclick"in v&&n(13,f=v.onclick),"hidden"in v&&n(5,m=v.hidden),"disabled"in v&&n(6,$=v.disabled),"$$scope"in v&&n(14,a=v.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&n(7,r=`${s}-${d}`)},[s,l,c,u,p,m,$,r,S,v=>{h(v)},v=>{i.some(T=>b.includes(T))||f(v)},d,h,f,a,o,function(v){go.call(this,t,v)}]}class bw extends mn{constructor(e){super(),hn(this,e,IM,EM,rn,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var yl=(t=[])=>t.reduce((e,n)=>(zr(n)?zr(n[1]):n.options)?e.concat(zr(n)?n[1]:n.options):(e.push(n),e),[]);const Ip=(t,e,n)=>{let r;return zr(t)?r={id:e,value:t[0],label:t[1],...t[2]||{}}:(r=t,r.id=r.id!=null?r.id:e),n?n(r):r};var vi=(t,e,n)=>hr(t)?t(e,n):t;const vw=(t,e)=>t.map(([n,r,i])=>{if(zr(r))return[vi(n,e),vw(r,e)];{const o=[n,vi(r,e)];if(i){let a={...i};i.icon&&(a.icon=vi(i.icon,e)),o.push(a)}return o}});var xw=(t,e)=>vw(t,e),Sw=(t,e)=>Array.isArray(t)&&Array.isArray(e)?qs(t,e):t===e;function A2(t,e,n){const r=t.slice();return r[27]=e[n],r}const _M=t=>({option:1024&t[0]}),L2=t=>({option:t[27]});function O2(t,e,n){const r=t.slice();return r[27]=e[n],r}const CM=t=>({option:1024&t[0]}),D2=t=>({option:t[27]}),RM=t=>({option:1024&t[0]}),F2=t=>({option:t[27]});function B2(t){let e,n,r,i,o,a=[],s=new Map,l=t[1]&&z2(t),c=t[10];const d=u=>u[27].id;for(let u=0;u<c.length;u+=1){let p=A2(t,c,u),h=d(p);s.set(h,a[u]=H2(h,p))}return{c(){e=bt("fieldset"),l&&l.c(),n=be(),r=bt("ul");for(let u=0;u<a.length;u+=1)a[u].c();w(r,"class","PinturaRadioGroupOptions"),w(e,"class",i=$n(["PinturaRadioGroup",t[3]])),w(e,"data-layout",t[5]),w(e,"title",t[7])},m(u,p){it(u,e,p),l&&l.m(e,null),Rt(e,n),Rt(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,p){u[1]?l?l.p(u,p):(l=z2(u),l.c(),l.m(e,n)):l&&(l.d(1),l=null),8419153&p[0]&&(c=u[10],Be(),a=_s(a,p,d,1,u,c,s,r,Cl,H2,null,A2),ze()),(!o||8&p[0]&&i!==(i=$n(["PinturaRadioGroup",u[3]])))&&w(e,"class",i),(!o||32&p[0])&&w(e,"data-layout",u[5]),(!o||128&p[0])&&w(e,"title",u[7])},i(u){if(!o){for(let p=0;p<c.length;p+=1)L(a[p]);o=!0}},o(u){for(let p=0;p<a.length;p+=1)W(a[p]);o=!1},d(u){u&&nt(e),l&&l.d();for(let p=0;p<a.length;p+=1)a[p].d()}}}function z2(t){let e,n,r;return{c(){e=bt("legend"),n=vr(t[1]),w(e,"class",r=t[2]&&"implicit")},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){2&o[0]&&Vr(n,i[1]),4&o[0]&&r!==(r=i[2]&&"implicit")&&w(e,"class",r)},d(i){i&&nt(e)}}}function MM(t){let e,n;return e=new bw({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[AM]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16&i[0]&&(o.name=r[4]),1024&i[0]&&(o.label=r[27].label),1024&i[0]&&(o.id=r[27].id),1024&i[0]&&(o.value=r[27].value),1024&i[0]&&(o.disabled=r[27].disabled),1024&i[0]&&(o.hidden=r[27].hidden),256&i[0]&&(o.class=r[8]),1025&i[0]&&(o.checked=r[12](r[27])===r[0]),1024&i[0]&&(o.onkeydown=r[13](r[27])),1024&i[0]&&(o.onclick=r[14](r[27])),8389696&i[0]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function kM(t){let e,n,r,i,o,a,s=[],l=new Map;const c=t[22].group,d=Si(c,t,t[23],F2),u=d||function(f){let m,$,b=f[27].label+"";return{c(){m=bt("span"),$=vr(b),w(m,"class","PinturaRadioGroupOptionGroupLabel")},m(S,v){it(S,m,v),Rt(m,$)},p(S,v){1024&v[0]&&b!==(b=S[27].label+"")&&Vr($,b)},d(S){S&&nt(m)}}}(t);let p=t[27].options;const h=f=>f[27].id;for(let f=0;f<p.length;f+=1){let m=O2(t,p,f),$=h(m);l.set($,s[f]=W2($,m))}return{c(){e=bt("li"),u&&u.c(),n=be(),r=bt("ul");for(let f=0;f<s.length;f+=1)s[f].c();i=be(),w(r,"class","PinturaRadioGroupOptions"),w(e,"class",o=$n(["PinturaRadioGroupOptionGroup",t[9]]))},m(f,m){it(f,e,m),u&&u.m(e,null),Rt(e,n),Rt(e,r);for(let $=0;$<s.length;$+=1)s[$].m(r,null);Rt(e,i),a=!0},p(f,m){d?d.p&&(!a||8389632&m[0])&&Ti(d,c,f,f[23],a?wi(c,f[23],m,RM):Ei(f[23]),F2):u&&u.p&&(!a||1024&m[0])&&u.p(f,a?m:[-1,-1]),8418641&m[0]&&(p=f[27].options,Be(),s=_s(s,m,h,1,f,p,l,r,Cl,W2,null,O2),ze()),(!a||512&m[0]&&o!==(o=$n(["PinturaRadioGroupOptionGroup",f[9]])))&&w(e,"class",o)},i(f){if(!a){L(u,f);for(let m=0;m<p.length;m+=1)L(s[m]);a=!0}},o(f){W(u,f);for(let m=0;m<s.length;m+=1)W(s[m]);a=!1},d(f){f&&nt(e),u&&u.d(f);for(let m=0;m<s.length;m+=1)s[m].d()}}}function N2(t){let e,n;return e=new ea({props:{$$slots:{default:[PM]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};8389632&i[0]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function PM(t){let e,n=t[27].icon+"";return{c(){e=zi("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){1024&i[0]&&n!==(n=r[27].icon+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function V2(t){let e,n,r=t[27].label+"";return{c(){e=bt("span"),n=vr(r),w(e,"class",t[6])},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){1024&o[0]&&r!==(r=i[27].label+"")&&Vr(n,r),64&o[0]&&w(e,"class",i[6])},d(i){i&&nt(e)}}}function AM(t){let e;const n=t[22].option,r=Si(n,t,t[23],L2),i=r||function(o){let a,s,l,c=o[27].icon&&N2(o),d=!o[27].hideLabel&&V2(o);return{c(){c&&c.c(),a=be(),d&&d.c(),s=be()},m(u,p){c&&c.m(u,p),it(u,a,p),d&&d.m(u,p),it(u,s,p),l=!0},p(u,p){u[27].icon?c?(c.p(u,p),1024&p[0]&&L(c,1)):(c=N2(u),c.c(),L(c,1),c.m(a.parentNode,a)):c&&(Be(),W(c,1,1,()=>{c=null}),ze()),u[27].hideLabel?d&&(d.d(1),d=null):d?d.p(u,p):(d=V2(u),d.c(),d.m(s.parentNode,s))},i(u){l||(L(c),l=!0)},o(u){W(c),l=!1},d(u){c&&c.d(u),u&&nt(a),d&&d.d(u),u&&nt(s)}}}(t);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),e=!0},p(o,a){r?r.p&&(!e||8389632&a[0])&&Ti(r,n,o,o[23],e?wi(n,o[23],a,_M):Ei(o[23]),L2):i&&i.p&&(!e||1088&a[0])&&i.p(o,e?a:[-1,-1])},i(o){e||(L(i,o),e=!0)},o(o){W(i,o),e=!1},d(o){i&&i.d(o)}}}function U2(t){let e,n;return e=new ea({props:{$$slots:{default:[LM]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};8389632&i[0]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function LM(t){let e,n=t[27].icon+"";return{c(){e=zi("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){1024&i[0]&&n!==(n=r[27].icon+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function G2(t){let e,n,r=t[27].label+"";return{c(){e=bt("span"),n=vr(r),w(e,"class",t[6])},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){1024&o[0]&&r!==(r=i[27].label+"")&&Vr(n,r),64&o[0]&&w(e,"class",i[6])},d(i){i&&nt(e)}}}function OM(t){let e;const n=t[22].option,r=Si(n,t,t[23],D2),i=r||function(o){let a,s,l,c=o[27].icon&&U2(o),d=!o[27].hideLabel&&G2(o);return{c(){c&&c.c(),a=be(),d&&d.c(),s=be()},m(u,p){c&&c.m(u,p),it(u,a,p),d&&d.m(u,p),it(u,s,p),l=!0},p(u,p){u[27].icon?c?(c.p(u,p),1024&p[0]&&L(c,1)):(c=U2(u),c.c(),L(c,1),c.m(a.parentNode,a)):c&&(Be(),W(c,1,1,()=>{c=null}),ze()),u[27].hideLabel?d&&(d.d(1),d=null):d?d.p(u,p):(d=G2(u),d.c(),d.m(s.parentNode,s))},i(u){l||(L(c),l=!0)},o(u){W(c),l=!1},d(u){c&&c.d(u),u&&nt(a),d&&d.d(u),u&&nt(s)}}}(t);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),e=!0},p(o,a){r?r.p&&(!e||8389632&a[0])&&Ti(r,n,o,o[23],e?wi(n,o[23],a,CM):Ei(o[23]),D2):i&&i.p&&(!e||1088&a[0])&&i.p(o,e?a:[-1,-1])},i(o){e||(L(i,o),e=!0)},o(o){W(i,o),e=!1},d(o){i&&i.d(o)}}}function W2(t,e){let n,r,i;return r=new bw({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[OM]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=Nr(),zt(r.$$.fragment),this.first=n},m(o,a){it(o,n,a),Ft(r,o,a),i=!0},p(o,a){e=o;const s={};16&a[0]&&(s.name=e[4]),1024&a[0]&&(s.label=e[27].label),1024&a[0]&&(s.id=e[27].id),1024&a[0]&&(s.value=e[27].value),1024&a[0]&&(s.disabled=e[27].disabled),1024&a[0]&&(s.hidden=e[27].hidden),256&a[0]&&(s.class=e[8]),1025&a[0]&&(s.checked=e[12](e[27])===e[0]),1024&a[0]&&(s.onkeydown=e[13](e[27])),1024&a[0]&&(s.onclick=e[14](e[27])),8389696&a[0]&&(s.$$scope={dirty:a,ctx:e}),r.$set(s)},i(o){i||(L(r.$$.fragment,o),i=!0)},o(o){W(r.$$.fragment,o),i=!1},d(o){o&&nt(n),Bt(r,o)}}}function H2(t,e){let n,r,i,o,a;const s=[kM,MM],l=[];function c(d,u){return d[27].options?0:1}return r=c(e),i=l[r]=s[r](e),{key:t,first:null,c(){n=Nr(),i.c(),o=Nr(),this.first=n},m(d,u){it(d,n,u),l[r].m(d,u),it(d,o,u),a=!0},p(d,u){let p=r;r=c(e=d),r===p?l[r].p(e,u):(Be(),W(l[p],1,1,()=>{l[p]=null}),ze(),i=l[r],i?i.p(e,u):(i=l[r]=s[r](e),i.c()),L(i,1),i.m(o.parentNode,o))},i(d){a||(L(i),a=!0)},o(d){W(i),a=!1},d(d){d&&nt(n),l[r].d(d),d&&nt(o)}}}function DM(t){let e,n,r,i=t[11].length&&B2(t);return{c(){i&&i.c(),e=be(),n=Nr()},m(o,a){i&&i.m(o,a),it(o,e,a),it(o,n,a),r=!0},p(o,a){o[11].length?i?(i.p(o,a),2048&a[0]&&L(i,1)):(i=B2(o),i.c(),L(i,1),i.m(e.parentNode,e)):i&&(Be(),W(i,1,1,()=>{i=null}),ze())},i(o){r||(L(i),L(!1),r=!0)},o(o){W(i),W(!1),r=!1},d(o){i&&i.d(o),o&&nt(e),o&&nt(n)}}}function FM(t,e,n){let r,i,o,{$$slots:a={},$$scope:s}=e;const l=ls();let{label:c}=e,{hideLabel:d=!0}=e,{class:u}=e,{name:p="radio-group-"+Oa()}=e,{selectedIndex:h=-1}=e,{options:f=[]}=e,{onchange:m}=e,{layout:$}=e,{optionMapper:b}=e,{optionFilter:S}=e,{value:v}=e,{optionLabelClass:T}=e,{title:C}=e,{locale:R}=e,{optionClass:A}=e,{optionGroupClass:E}=e;const M=_=>o.findIndex(y=>y.id===_.id),P=(_,y)=>{n(0,h=M(_));const z={index:h,..._};((O,...I)=>{O&&O(...I)})(m,z,y),l("change",z)};return t.$$set=_=>{"label"in _&&n(1,c=_.label),"hideLabel"in _&&n(2,d=_.hideLabel),"class"in _&&n(3,u=_.class),"name"in _&&n(4,p=_.name),"selectedIndex"in _&&n(0,h=_.selectedIndex),"options"in _&&n(15,f=_.options),"onchange"in _&&n(16,m=_.onchange),"layout"in _&&n(5,$=_.layout),"optionMapper"in _&&n(17,b=_.optionMapper),"optionFilter"in _&&n(18,S=_.optionFilter),"value"in _&&n(19,v=_.value),"optionLabelClass"in _&&n(6,T=_.optionLabelClass),"title"in _&&n(7,C=_.title),"locale"in _&&n(20,R=_.locale),"optionClass"in _&&n(8,A=_.optionClass),"optionGroupClass"in _&&n(9,E=_.optionGroupClass),"$$scope"in _&&n(23,s=_.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&n(11,r=xw(S?f.filter(S):f,R)),133120&t.$$.dirty[0]&&n(10,i=((_=[],y)=>{let z=0;return _.map(O=>(z++,zr(O)?zr(O[1])?{id:z,label:O[0],options:O[1].map(I=>Ip(I,++z,y))}:Ip(O,z,y):O.options?{id:O.id||z,label:O.label,options:O.options.map(I=>Ip(I,++z,y))}:Ip(O,z,y)))})(r,b)),1024&t.$$.dirty[0]&&n(21,o=yl(i)),2654209&t.$$.dirty[0]&&h<0&&(n(0,h=o.findIndex(_=>Sw(_.value,v))),h<0&&n(0,h=(_=>_.findIndex(y=>y[0]===void 0))(f)))},[h,c,d,u,p,$,T,C,A,E,i,r,M,_=>y=>{var z;z=y.key,/enter| /i.test(z)&&P(_,y)},_=>y=>{P(_,y)},f,m,b,S,v,R,o,a,s]}class Xs extends mn{constructor(e){super(),hn(this,e,FM,DM,rn,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function j2(t){let e,n,r,i,o,a,s,l,c,d;return{c(){e=bt("div"),n=bt("button"),r=vr("▲"),o=be(),a=bt("button"),s=vr("▼"),w(n,"type","button"),w(n,"tabindex","-1"),w(n,"aria-label",i="increase "+t[7]),w(a,"type","button"),w(a,"tabindex","-1"),w(a,"aria-label",l="decrease "+t[7]),w(e,"class","PinturaInputSpinners")},m(u,p){it(u,e,p),Rt(e,n),Rt(n,r),Rt(e,o),Rt(e,a),Rt(a,s),c||(d=[kt(n,"click",t[17]),kt(a,"click",t[18])],c=!0)},p(u,p){128&p&&i!==(i="increase "+u[7])&&w(n,"aria-label",i),128&p&&l!==(l="decrease "+u[7])&&w(a,"aria-label",l)},d(u){u&&nt(e),c=!1,tr(d)}}}function BM(t){let e,n,r,i,o,a,s=t[1]==="number"&&t[9]&&j2(t);return{c(){e=bt("div"),n=bt("input"),i=be(),s&&s.c(),w(n,"class","PinturaInputField"),w(n,"title",t[7]),w(n,"type",t[1]),w(n,"min",t[4]),w(n,"max",t[5]),w(n,"step",t[6]),w(n,"inputmode",t[3]),n.value=r=t[14]?t[13]:t[0],w(n,"style",t[11]),w(n,"placeholder",t[8]),w(n,"maxlength",t[12]),n.disabled=t[2],w(n,"spellcheck","false"),w(n,"autocorrect","off"),w(n,"autocapitalize","off"),w(e,"class","PinturaInput")},m(l,c){it(l,e,c),Rt(e,n),t[26](n),Rt(e,i),s&&s.m(e,null),o||(a=[kt(n,"input",t[16]),kt(n,"blur",function(){Qn(t[14]&&t[15])&&(t[14]&&t[15]).apply(this,arguments)}),kt(n,"keydown",t[19]),kt(n,"keyup",t[20])],o=!0)},p(l,[c]){t=l,128&c&&w(n,"title",t[7]),2&c&&w(n,"type",t[1]),16&c&&w(n,"min",t[4]),32&c&&w(n,"max",t[5]),64&c&&w(n,"step",t[6]),8&c&&w(n,"inputmode",t[3]),24577&c&&r!==(r=t[14]?t[13]:t[0])&&n.value!==r&&(n.value=r),2048&c&&w(n,"style",t[11]),256&c&&w(n,"placeholder",t[8]),4096&c&&w(n,"maxlength",t[12]),4&c&&(n.disabled=t[2]),t[1]==="number"&&t[9]?s?s.p(t,c):(s=j2(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Je,o:Je,d(l){l&&nt(e),t[26](null),s&&s.d(),o=!1,tr(a)}}}function zM(t,e,n){let r,i,o,a,s,l,c,{value:d}=e,{type:u="text"}=e,{disabled:p=!1}=e,{inputmode:h}=e,{min:f}=e,{max:m}=e,{step:$}=e,{onchange:b=ve}=e,{onkeydown:S=ve}=e,{title:v}=e,{stepMultiplier:T=10}=e,{placeholder:C}=e,{enableSpinButtons:R=!0}=e;const A=()=>{let _=l.value;return u==="number"&&(_=h==="numeric"?parseInt(_,10):parseFloat(_),!Sn(_)||Number.isNaN(_)?_=f||0:r&&(_=sr(_,f,m))),_};let E=d;const M=()=>{const _=sr(A()+(c?$*T:$),f,m);_!==d&&(n(24,E=_),n(0,d=_),b(d))},P=()=>{const _=sr(A()-(c?$*T:$),f,m);_!==d&&(n(24,E=_),n(0,d=_),b(d))};return t.$$set=_=>{"value"in _&&n(0,d=_.value),"type"in _&&n(1,u=_.type),"disabled"in _&&n(2,p=_.disabled),"inputmode"in _&&n(3,h=_.inputmode),"min"in _&&n(4,f=_.min),"max"in _&&n(5,m=_.max),"step"in _&&n(6,$=_.step),"onchange"in _&&n(21,b=_.onchange),"onkeydown"in _&&n(22,S=_.onkeydown),"title"in _&&n(7,v=_.title),"stepMultiplier"in _&&n(23,T=_.stepMultiplier),"placeholder"in _&&n(8,C=_.placeholder),"enableSpinButtons"in _&&n(9,R=_.enableSpinButtons)},t.$$.update=()=>{48&t.$$.dirty&&n(14,r=Sn(f)&&Sn(m)),16778241&t.$$.dirty&&n(13,i=l===document.activeElement?E:d),32&t.$$.dirty&&n(25,o=m?(m+"").length:void 0),33554440&t.$$.dirty&&n(12,a=h==="numeric"&&o?o:void 0),33554432&t.$$.dirty&&n(11,s=o?`min-width:${o}em`:void 0)},[d,u,p,h,f,m,$,v,C,R,l,s,a,i,r,()=>{n(24,E=A()),b(d)},()=>{n(24,E=l.value),b(A())},M,P,_=>{c=_.shiftKey,S(_);const{key:y}=_;/up|down/i.test(y)&&(/up/i.test(y)&&M(),/down/i.test(y)&&P(),_.preventDefault(),_.stopPropagation())},_=>{const{key:y}=_;/up|down/i.test(y)&&(_.preventDefault(),_.stopPropagation())},b,S,T,E,o,function(_){zn[_?"unshift":"push"](()=>{l=_,n(10,l)})}]}class ww extends mn{constructor(e){super(),hn(this,e,zM,BM,rn,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:21,onkeydown:22,title:7,stepMultiplier:23,placeholder:8,enableSpinButtons:9})}}const NM=t=>({}),q2=t=>({});function VM(t){let e,n,r,i,o=(t[2]||t[21])+"",a=t[6]&&Y2(t);return{c(){a&&a.c(),e=be(),n=bt("span"),w(n,"class",r=$n(["PinturaButtonLabel",t[3],t[5]&&"implicit"]))},m(s,l){a&&a.m(s,l),it(s,e,l),it(s,n,l),n.innerHTML=o,i=!0},p(s,l){s[6]?a?(a.p(s,l),64&l[0]&&L(a,1)):(a=Y2(s),a.c(),L(a,1),a.m(e.parentNode,e)):a&&(Be(),W(a,1,1,()=>{a=null}),ze()),(!i||2097156&l[0])&&o!==(o=(s[2]||s[21])+"")&&(n.innerHTML=o),(!i||40&l[0]&&r!==(r=$n(["PinturaButtonLabel",s[3],s[5]&&"implicit"])))&&w(n,"class",r)},i(s){i||(L(a),i=!0)},o(s){W(a),i=!1},d(s){a&&a.d(s),s&&nt(e),s&&nt(n)}}}function UM(t){let e,n;return e=new ww({props:{value:t[10],onchange:t[17],type:"number",inputmode:"numeric",min:t[8].reduce(Q2,1/0),max:t[8].reduce(J2,-1/0),enableSpinButtons:!1}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};1024&i[0]&&(o.value=r[10]),131072&i[0]&&(o.onchange=r[17]),256&i[0]&&(o.min=r[8].reduce(Q2,1/0)),256&i[0]&&(o.max=r[8].reduce(J2,-1/0)),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Y2(t){let e,n;return e=new ea({props:{class:"PinturaButtonIcon",$$slots:{default:[GM]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};536870976&i[0]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function GM(t){let e;return{c(){e=zi("g")},m(n,r){it(n,e,r),e.innerHTML=t[6]},p(n,r){64&r[0]&&(e.innerHTML=n[6])},d(n){n&&nt(e)}}}function WM(t){let e,n,r,i,o,a;const s=[UM,VM],l=[];function c(d,u){return d[18]?0:1}return n=c(t),r=l[n]=s[n](t),{c(){e=bt("span"),r.c(),w(e,"slot","label"),w(e,"title",i=vi(t[1],t[16])),w(e,"class",o=$n(["PinturaButtonInner",t[18]&&"PinturaComboBox",t[4]]))},m(d,u){it(d,e,u),l[n].m(e,null),a=!0},p(d,u){let p=n;n=c(d),n===p?l[n].p(d,u):(Be(),W(l[p],1,1,()=>{l[p]=null}),ze(),r=l[n],r?r.p(d,u):(r=l[n]=s[n](d),r.c()),L(r,1),r.m(e,null)),(!a||65538&u[0]&&i!==(i=vi(d[1],d[16])))&&w(e,"title",i),(!a||262160&u[0]&&o!==(o=$n(["PinturaButtonInner",d[18]&&"PinturaComboBox",d[4]])))&&w(e,"class",o)},i(d){a||(L(r),a=!0)},o(d){W(r),a=!1},d(d){d&&nt(e),l[n].d()}}}function HM(t){let e,n,r=t[31].label+"";return{c(){e=bt("span"),n=vr(r),w(e,"slot","group")},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){1&o[1]&&r!==(r=i[31].label+"")&&Vr(n,r)},d(i){i&&nt(e)}}}function X2(t){let e,n;return e=new ea({props:{style:hr(t[14])?t[14](t[31].value):t[14],$$slots:{default:[jM]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16384&i[0]|1&i[1]&&(o.style=hr(r[14])?r[14](r[31].value):r[14]),536870912&i[0]|1&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function jM(t){let e,n=t[31].icon+"";return{c(){e=zi("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){1&i[1]&&n!==(n=r[31].icon+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function Z2(t){let e,n,r,i,o,a=t[31].label+"",s=t[31].sublabel&&K2(t);return{c(){e=bt("span"),n=new Ph(!1),r=be(),s&&s.c(),n.a=r,w(e,"style",i=hr(t[15])?t[15](t[31].value):t[15]),w(e,"class",o=$n(["PinturaDropdownOptionLabel",t[11]]))},m(l,c){it(l,e,c),n.m(a,e),Rt(e,r),s&&s.m(e,null)},p(l,c){1&c[1]&&a!==(a=l[31].label+"")&&n.p(a),l[31].sublabel?s?s.p(l,c):(s=K2(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null),32768&c[0]|1&c[1]&&i!==(i=hr(l[15])?l[15](l[31].value):l[15])&&w(e,"style",i),2048&c[0]&&o!==(o=$n(["PinturaDropdownOptionLabel",l[11]]))&&w(e,"class",o)},d(l){l&&nt(e),s&&s.d()}}}function K2(t){let e,n=t[31].sublabel+"";return{c(){e=bt("span"),w(e,"class","PinturaDropdownOptionSublabel")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){1&i[1]&&n!==(n=r[31].sublabel+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function qM(t){let e,n,r,i=t[31].icon&&X2(t),o=!t[31].hideLabel&&Z2(t);return{c(){e=bt("span"),i&&i.c(),n=be(),o&&o.c(),w(e,"slot","option")},m(a,s){it(a,e,s),i&&i.m(e,null),Rt(e,n),o&&o.m(e,null),r=!0},p(a,s){a[31].icon?i?(i.p(a,s),1&s[1]&&L(i,1)):(i=X2(a),i.c(),L(i,1),i.m(e,n)):i&&(Be(),W(i,1,1,()=>{i=null}),ze()),a[31].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=Z2(a),o.c(),o.m(e,null))},i(a){r||(L(i),r=!0)},o(a){W(i),r=!1},d(a){a&&nt(e),i&&i.d(),o&&o.d()}}}function YM(t){let e,n,r,i,o,a;const s=t[27].controls,l=Si(s,t,t[29],q2);return r=new Xs({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[10],selectedIndex:t[9],optionFilter:t[12],optionMapper:t[13],optionLabelClass:$n(["PinturaDropdownOptionLabel",t[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[19],onchange:t[22],$$slots:{option:[qM,({option:c})=>({31:c}),({option:c})=>[0,c?1:0]],group:[HM,({option:c})=>({31:c}),({option:c})=>[0,c?1:0]]},$$scope:{ctx:t}}}),{c(){e=bt("div"),l&&l.c(),n=be(),zt(r.$$.fragment),w(e,"slot","details"),w(e,"class","PinturaOptionsListWrapper")},m(c,d){it(c,e,d),l&&l.m(e,null),Rt(e,n),Ft(r,e,null),i=!0,o||(a=kt(e,"keydown",t[24]),o=!0)},p(c,d){l&&l.p&&(!i||536870912&d[0])&&Ti(l,s,c,c[29],i?wi(s,c[29],d,NM):Ei(c[29]),q2);const u={};128&d[0]&&(u.name=c[7]),1024&d[0]&&(u.value=c[10]),512&d[0]&&(u.selectedIndex=c[9]),4096&d[0]&&(u.optionFilter=c[12]),8192&d[0]&&(u.optionMapper=c[13]),2048&d[0]&&(u.optionLabelClass=$n(["PinturaDropdownOptionLabel",c[11]])),524288&d[0]&&(u.options=c[19]),536922112&d[0]|1&d[1]&&(u.$$scope={dirty:d,ctx:c}),r.$set(u)},i(c){i||(L(l,c),L(r.$$.fragment,c),i=!0)},o(c){W(l,c),W(r.$$.fragment,c),i=!1},d(c){c&&nt(e),l&&l.d(c),Bt(r),o=!1,a()}}}function XM(t){let e,n,r;function i(a){t[28](a)}let o={onshow:t[23],buttonClass:$n(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[YM],label:[WM]},$$scope:{ctx:t}};return t[20]!==void 0&&(o.isActive=t[20]),e=new Fh({props:o}),zn.push(()=>Go(e,"isActive",i)),{c(){zt(e.$$.fragment)},m(a,s){Ft(e,a,s),r=!0},p(a,s){const l={};33&s[0]&&(l.buttonClass=$n(["PinturaDropdownButton",a[0],a[5]&&"PinturaDropdownIconOnly"])),540016638&s[0]&&(l.$$scope={dirty:s,ctx:a}),!n&&1048576&s[0]&&(n=!0,l.isActive=a[20],ta(()=>n=!1)),e.$set(l)},i(a){r||(L(e.$$.fragment,a),r=!0)},o(a){W(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}const Q2=(t,[e])=>e<t?e:t,J2=(t,[e])=>e>t?e:t;function ZM(t,e,n){let r,i,{$$slots:o={},$$scope:a}=e,{class:s}=e,{title:l}=e,{label:c}=e,{labelClass:d}=e,{innerClass:u}=e,{hideLabel:p=!1}=e,{icon:h}=e,{name:f}=e,{options:m=[]}=e,{selectedIndex:$=-1}=e,{value:b}=e,{optionLabelClass:S}=e,{optionFilter:v}=e,{optionMapper:T}=e,{optionIconStyle:C}=e,{optionLabelStyle:R}=e,{locale:A}=e,{onchange:E=ve}=e,{onload:M=ve}=e,{ondestroy:P=ve}=e,{enableInput:_=!1}=e,y;return _l(()=>M({options:m})),$a(()=>P({options:m})),t.$$set=z=>{"class"in z&&n(0,s=z.class),"title"in z&&n(1,l=z.title),"label"in z&&n(2,c=z.label),"labelClass"in z&&n(3,d=z.labelClass),"innerClass"in z&&n(4,u=z.innerClass),"hideLabel"in z&&n(5,p=z.hideLabel),"icon"in z&&n(6,h=z.icon),"name"in z&&n(7,f=z.name),"options"in z&&n(8,m=z.options),"selectedIndex"in z&&n(9,$=z.selectedIndex),"value"in z&&n(10,b=z.value),"optionLabelClass"in z&&n(11,S=z.optionLabelClass),"optionFilter"in z&&n(12,v=z.optionFilter),"optionMapper"in z&&n(13,T=z.optionMapper),"optionIconStyle"in z&&n(14,C=z.optionIconStyle),"optionLabelStyle"in z&&n(15,R=z.optionLabelStyle),"locale"in z&&n(16,A=z.locale),"onchange"in z&&n(17,E=z.onchange),"onload"in z&&n(25,M=z.onload),"ondestroy"in z&&n(26,P=z.ondestroy),"enableInput"in z&&n(18,_=z.enableInput),"$$scope"in z&&n(29,a=z.$$scope)},t.$$.update=()=>{65792&t.$$.dirty[0]&&n(19,r=A?xw(m,A):m),525312&t.$$.dirty[0]&&n(21,i=r.reduce((z,O)=>{if(z)return z;const I=Array.isArray(O)?O:[O,O],[k,G]=I;return Sw(k,b)?G:void 0},void 0)||(z=>{const O=z.find(I=>I[0]===void 0);if(O)return O[1]})(r)||b)},[s,l,c,d,u,p,h,f,m,$,b,S,v,T,C,R,A,E,_,r,y,i,z=>{n(21,i=z.value),E(z),n(20,y=!1)},({e:z,panel:O})=>{if(z&&z.key&&/up|down/i.test(z.key))return _0(O.querySelector("input:not([disabled])"));_0(O.querySelector("fieldset"))},z=>{/tab/i.test(z.key)&&z.preventDefault()},M,P,o,function(z){y=z,n(20,y)},a]}class Tw extends mn{constructor(e){super(),hn(this,e,ZM,XM,rn,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:16,onchange:17,onload:25,ondestroy:26,enableInput:18},null,[-1,-1])}}function KM(t){let e;return{c(){e=bt("div"),w(e,"slot","details")},m(n,r){it(n,e,r),t[14](e)},p:Je,d(n){n&&nt(e),t[14](null)}}}function QM(t){let e,n,r;function i(a){t[15](a)}let o={buttonLabel:t[0],buttonClass:t[1],buttonIcon:t[2],buttonHideLabel:t[3],buttonTitle:t[4],buttonLabelClass:t[5],onshow:t[6],onhide:t[7],$$slots:{details:[KM]},$$scope:{ctx:t}};return t[9]!==void 0&&(o.isActive=t[9]),e=new Fh({props:o}),zn.push(()=>Go(e,"isActive",i)),{c(){zt(e.$$.fragment)},m(a,s){Ft(e,a,s),r=!0},p(a,[s]){const l={};1&s&&(l.buttonLabel=a[0]),2&s&&(l.buttonClass=a[1]),4&s&&(l.buttonIcon=a[2]),8&s&&(l.buttonHideLabel=a[3]),16&s&&(l.buttonTitle=a[4]),32&s&&(l.buttonLabelClass=a[5]),64&s&&(l.onshow=a[6]),128&s&&(l.onhide=a[7]),65792&s&&(l.$$scope={dirty:s,ctx:a}),!n&&512&s&&(n=!0,l.isActive=a[9],ta(()=>n=!1)),e.$set(l)},i(a){r||(L(e.$$.fragment,a),r=!0)},o(a){W(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function JM(t,e,n){let{buttonLabel:r}=e,{buttonClass:i}=e,{buttonIcon:o}=e,{buttonHideLabel:a}=e,{buttonTitle:s}=e,{buttonLabelClass:l}=e,{root:c}=e,{ondestroy:d=ve}=e,{onshow:u=ve}=e,{onhide:p=ve}=e,h,f=!1;return $a(d),t.$$set=m=>{"buttonLabel"in m&&n(0,r=m.buttonLabel),"buttonClass"in m&&n(1,i=m.buttonClass),"buttonIcon"in m&&n(2,o=m.buttonIcon),"buttonHideLabel"in m&&n(3,a=m.buttonHideLabel),"buttonTitle"in m&&n(4,s=m.buttonTitle),"buttonLabelClass"in m&&n(5,l=m.buttonLabelClass),"root"in m&&n(10,c=m.root),"ondestroy"in m&&n(11,d=m.ondestroy),"onshow"in m&&n(6,u=m.onshow),"onhide"in m&&n(7,p=m.onhide)},t.$$.update=()=>{1280&t.$$.dirty&&h&&c&&h.firstChild!==c&&(h.hasChildNodes()?h.replaceChild(c,h.firstChild):h.append(c))},[r,i,o,a,s,l,u,p,h,f,c,d,()=>n(9,f=!1),()=>n(9,f=!0),function(m){zn[m?"unshift":"push"](()=>{h=m,n(8,h)})},function(m){f=m,n(9,f)}]}class tk extends mn{constructor(e){super(),hn(this,e,JM,QM,rn,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}}var Wd=(t,e,n)=>(t-e)/(n-e);const ek=t=>({}),tb=t=>({});function eb(t){let e,n,r,i,o,a,s,l;return n=new ea({props:{$$slots:{default:[nk]},$$scope:{ctx:t}}}),o=new ea({props:{$$slots:{default:[rk]},$$scope:{ctx:t}}}),{c(){e=bt("button"),zt(n.$$.fragment),r=be(),i=bt("button"),zt(o.$$.fragment),w(e,"type","button"),w(e,"aria-label","Increase"),w(i,"type","button"),w(i,"aria-label","Decrease")},m(c,d){it(c,e,d),Ft(n,e,null),it(c,r,d),it(c,i,d),Ft(o,i,null),a=!0,s||(l=[kt(e,"pointerdown",t[20](1)),kt(i,"pointerdown",t[20](-1))],s=!0)},p(c,d){const u={};128&d[1]&&(u.$$scope={dirty:d,ctx:c}),n.$set(u);const p={};128&d[1]&&(p.$$scope={dirty:d,ctx:c}),o.$set(p)},i(c){a||(L(n.$$.fragment,c),L(o.$$.fragment,c),a=!0)},o(c){W(n.$$.fragment,c),W(o.$$.fragment,c),a=!1},d(c){c&&nt(e),Bt(n),c&&nt(r),c&&nt(i),Bt(o),s=!1,tr(l)}}}function nk(t){let e;return{c(){e=zi("path"),w(e,"d","M8 12 h8 M12 8 v8")},m(n,r){it(n,e,r)},p:Je,d(n){n&&nt(e)}}}function rk(t){let e;return{c(){e=zi("path"),w(e,"d","M9 12 h6")},m(n,r){it(n,e,r)},p:Je,d(n){n&&nt(e)}}}function ik(t){let e,n,r,i,o,a,s,l,c,d,u,p,h,f,m,$,b;const S=t[36].default,v=Si(S,t,t[38],null),T=t[36].knob,C=Si(T,t,t[38],tb);let R=t[9]&&eb(t);return{c(){e=bt("div"),n=bt("div"),r=bt("input"),o=be(),a=bt("div"),v&&v.c(),l=be(),c=bt("div"),d=bt("div"),C&&C.c(),h=be(),R&&R.c(),w(r,"type","range"),w(r,"id",t[3]),w(r,"min",t[0]),w(r,"max",t[1]),w(r,"step",t[2]),r.value=t[14],w(r,"style",i=t[10]?"pointer-events:none":""),w(a,"class",s=$n(["PinturaSliderTrack",t[5]])),w(a,"style",t[4]),w(d,"class",u=$n(["PinturaSliderKnob",t[7]])),w(d,"style",t[6]),w(c,"class","PinturaSliderKnobController"),w(c,"style",t[17]),w(n,"class","PinturaSliderControl"),w(n,"style",p="--slider-position:"+Math.round(t[15])),w(e,"class",f=$n(["PinturaSlider",t[12]])),w(e,"data-direction",t[8])},m(A,E){it(A,e,E),Rt(e,n),Rt(n,r),t[37](r),Rt(n,o),Rt(n,a),v&&v.m(a,null),Rt(n,l),Rt(n,c),Rt(c,d),C&&C.m(d,null),Rt(e,h),R&&R.m(e,null),m=!0,$||(b=[kt(r,"input",t[18]),kt(r,"nudge",t[19]),Jn(kl.call(null,r)),kt(n,"pointerdown",function(){Qn(t[11]&&t[13])&&(t[11]&&t[13]).apply(this,arguments)})],$=!0)},p(A,E){t=A,(!m||8&E[0])&&w(r,"id",t[3]),(!m||1&E[0])&&w(r,"min",t[0]),(!m||2&E[0])&&w(r,"max",t[1]),(!m||4&E[0])&&w(r,"step",t[2]),(!m||16384&E[0])&&(r.value=t[14]),(!m||1024&E[0]&&i!==(i=t[10]?"pointer-events:none":""))&&w(r,"style",i),v&&v.p&&(!m||128&E[1])&&Ti(v,S,t,t[38],m?wi(S,t[38],E,null):Ei(t[38]),null),(!m||32&E[0]&&s!==(s=$n(["PinturaSliderTrack",t[5]])))&&w(a,"class",s),(!m||16&E[0])&&w(a,"style",t[4]),C&&C.p&&(!m||128&E[1])&&Ti(C,T,t,t[38],m?wi(T,t[38],E,ek):Ei(t[38]),tb),(!m||128&E[0]&&u!==(u=$n(["PinturaSliderKnob",t[7]])))&&w(d,"class",u),(!m||64&E[0])&&w(d,"style",t[6]),(!m||131072&E[0])&&w(c,"style",t[17]),(!m||32768&E[0]&&p!==(p="--slider-position:"+Math.round(t[15])))&&w(n,"style",p),t[9]?R?(R.p(t,E),512&E[0]&&L(R,1)):(R=eb(t),R.c(),L(R,1),R.m(e,null)):R&&(Be(),W(R,1,1,()=>{R=null}),ze()),(!m||4096&E[0]&&f!==(f=$n(["PinturaSlider",t[12]])))&&w(e,"class",f),(!m||256&E[0])&&w(e,"data-direction",t[8])},i(A){m||(L(v,A),L(C,A),L(R),m=!0)},o(A){W(v,A),W(C,A),W(R),m=!1},d(A){A&&nt(e),t[37](null),v&&v.d(A),C&&C.d(A),R&&R.d(),$=!1,tr(b)}}}function ok(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,b,{$$slots:S={},$$scope:v}=e,{min:T=0}=e,{max:C=100}=e,{step:R=1}=e,{id:A}=e,{value:E=0}=e,{valueMin:M}=e,{valueMax:P}=e,{trackStyle:_}=e,{trackClass:y}=e,{knobStyle:z}=e,{knobClass:O}=e,{ongrab:I=ve}=e,{onchange:k=ve}=e,{onrelease:G=ve}=e,{onexceed:X=ve}=e,{direction:q="x"}=e,{getValue:D=ur}=e,{setValue:lt=ur}=e,{enableSpinButtons:pt=!0}=e,{enableForceUseKnob:Lt=!1}=e,{enableStopPropagation:et=!0}=e,{enablePointerdownListener:Y=!0}=e,{maxInteractionDistance:j=6}=e,{class:ct}=e;const U=Mt=>lt(((xt,Wt)=>(Wt=1/Wt,Math.round(xt*Wt)/Wt))(sr(Mt,T,C),R),E),ft=(Mt,xt,Wt={})=>{const{grabbed:Ht=!1,released:Ae=!1}=Wt,ke=U(T+Mt/xt*i),st=M||T,St=P||C;n(21,E=Ve(ke)?ke:sr(ke,st,St)),b!==ke&&(b=ke,!Ve(ke)&&(ke<st||ke>St)&&X(E,ke),E!==$&&($=E,Ht&&I(E),k(E),Ae&&G(E)))};let yt;const It=Mt=>{const xt=Mt[d]-m;ft(f+xt,h)},Jt=Mt=>{h=void 0,document.documentElement.removeEventListener("pointermove",It),document.documentElement.removeEventListener("pointerup",Jt),k(E),G(E)},pe=()=>{n(21,E=U(r+ot*R)),k(E)};let mt,ot=1,Q=!1;const Se=Mt=>{clearTimeout(mt),Q||pe(),G(E),document.removeEventListener("pointerup",Se)};return t.$$set=Mt=>{"min"in Mt&&n(0,T=Mt.min),"max"in Mt&&n(1,C=Mt.max),"step"in Mt&&n(2,R=Mt.step),"id"in Mt&&n(3,A=Mt.id),"value"in Mt&&n(21,E=Mt.value),"valueMin"in Mt&&n(22,M=Mt.valueMin),"valueMax"in Mt&&n(23,P=Mt.valueMax),"trackStyle"in Mt&&n(4,_=Mt.trackStyle),"trackClass"in Mt&&n(5,y=Mt.trackClass),"knobStyle"in Mt&&n(6,z=Mt.knobStyle),"knobClass"in Mt&&n(7,O=Mt.knobClass),"ongrab"in Mt&&n(24,I=Mt.ongrab),"onchange"in Mt&&n(25,k=Mt.onchange),"onrelease"in Mt&&n(26,G=Mt.onrelease),"onexceed"in Mt&&n(27,X=Mt.onexceed),"direction"in Mt&&n(8,q=Mt.direction),"getValue"in Mt&&n(28,D=Mt.getValue),"setValue"in Mt&&n(29,lt=Mt.setValue),"enableSpinButtons"in Mt&&n(9,pt=Mt.enableSpinButtons),"enableForceUseKnob"in Mt&&n(10,Lt=Mt.enableForceUseKnob),"enableStopPropagation"in Mt&&n(30,et=Mt.enableStopPropagation),"enablePointerdownListener"in Mt&&n(11,Y=Mt.enablePointerdownListener),"maxInteractionDistance"in Mt&&n(31,j=Mt.maxInteractionDistance),"class"in Mt&&n(12,ct=Mt.class),"$$scope"in Mt&&n(38,v=Mt.$$scope)},t.$$.update=()=>{270532608&t.$$.dirty[0]&&n(14,r=E!==void 0?D(E):0),3&t.$$.dirty[0]&&(i=C-T),16387&t.$$.dirty[0]&&n(33,o=Wd(r,T,C)),4&t.$$.dirty[1]&&n(15,a=100*o),256&t.$$.dirty[0]&&n(34,s=q.toUpperCase()),256&t.$$.dirty[0]&&n(35,l=q==="x"?"Width":"Height"),16&t.$$.dirty[1]&&(c="offset"+l),t.$$.dirty[1],8&t.$$.dirty[1]&&(d="page"+s),32768&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(17,u=`transform: translate${s}(${a}%)`)},[T,C,R,A,_,y,z,O,q,pt,Lt,Y,ct,Mt=>{let xt=!1;et&&Mt.stopPropagation(),clearTimeout(yt);const Wt=p.getBoundingClientRect();if(h=p[c],m=Mt[d],f=m-Wt[q],Lt){if(Math.abs(f-o*h)>j)return;xt=!0,Mt.stopPropagation()}return document.activeElement!==p&&p.focus(),ft(f,h,{grabbed:!0}),document.documentElement.addEventListener("pointermove",It),document.documentElement.addEventListener("pointerup",Jt),xt},r,a,p,u,Mt=>{h||(n(21,E=lt(parseFloat(Mt.target.value))),E!==$&&($=E,k(E)))},Mt=>{const xt=p[c];ft(r/i*xt+Mt.detail[q],xt),clearTimeout(yt),yt=setTimeout(()=>{G(E)},250)},Mt=>xt=>{clearTimeout(yt),ot=Mt,Q=!1,mt=setInterval(()=>{Q=!0,pe()},100),document.addEventListener("pointercancel",Se),document.addEventListener("pointerup",Se)},E,M,P,I,k,G,X,D,lt,et,j,Mt=>{const xt=p.getBoundingClientRect(),Wt=Mt[d]-xt[q],Ht=p[c];return Math.abs(Wt-o*Ht)},o,s,l,S,function(Mt){zn[Mt?"unshift":"push"](()=>{p=Mt,n(16,p)})},v]}class Wf extends mn{constructor(e){super(),hn(this,e,ok,ik,rn,{min:0,max:1,step:2,id:3,value:21,valueMin:22,valueMax:23,trackStyle:4,trackClass:5,knobStyle:6,knobClass:7,ongrab:24,onchange:25,onrelease:26,onexceed:27,direction:8,getValue:28,setValue:29,enableSpinButtons:9,enableForceUseKnob:10,enableStopPropagation:30,enablePointerdownListener:11,maxInteractionDistance:31,class:12,eventDistanceToKnob:32,handlePointerDown:13},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[32]}get handlePointerDown(){return this.$$.ctx[13]}}function nb(t){let e,n;return e=new ea({props:{class:"PinturaButtonIcon",$$slots:{default:[ak]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};1048580&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function ak(t){let e;return{c(){e=zi("g")},m(n,r){it(n,e,r),e.innerHTML=t[2]},p(n,r){4&r&&(e.innerHTML=n[2])},d(n){n&&nt(e)}}}function rb(t){let e,n,r=vi(t[8],t[6])+"";return{c(){e=bt("span"),n=vr(r),w(e,"class","PinturaButtonLabelPrefix")},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){320&o&&r!==(r=vi(i[8],i[6])+"")&&Vr(n,r)},d(i){i&&nt(e)}}}function sk(t){let e,n,r,i,o,a,s,l,c,d=t[2]&&nb(t),u=t[8]&&rb(t);return{c(){e=bt("span"),d&&d.c(),n=be(),u&&u.c(),r=be(),i=bt("span"),o=vr(t[9]),w(i,"class",a=$n(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),w(e,"slot","label"),w(e,"title",s=vi(t[1],t[6])),w(e,"class",l=$n(["PinturaButtonInner",t[4]]))},m(p,h){it(p,e,h),d&&d.m(e,null),Rt(e,n),u&&u.m(e,null),Rt(e,r),Rt(e,i),Rt(i,o),c=!0},p(p,h){p[2]?d?(d.p(p,h),4&h&&L(d,1)):(d=nb(p),d.c(),L(d,1),d.m(e,n)):d&&(Be(),W(d,1,1,()=>{d=null}),ze()),p[8]?u?u.p(p,h):(u=rb(p),u.c(),u.m(e,r)):u&&(u.d(1),u=null),(!c||512&h)&&Vr(o,p[9]),(!c||40&h&&a!==(a=$n(["PinturaButtonLabel",p[3],p[5]&&"implicit"])))&&w(i,"class",a),(!c||66&h&&s!==(s=vi(p[1],p[6])))&&w(e,"title",s),(!c||16&h&&l!==(l=$n(["PinturaButtonInner",p[4]])))&&w(e,"class",l)},i(p){c||(L(d),c=!0)},o(p){W(d),c=!1},d(p){p&&nt(e),d&&d.d(),u&&u.d()}}}function lk(t){let e,n,r,i,o;const a=[t[12],{value:t[7]},{onchange:t[11]}];let s={};for(let l=0;l<a.length;l+=1)s=Or(s,a[l]);return n=new Wf({props:s}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"slot","details")},m(l,c){it(l,e,c),Ft(n,e,null),r=!0,i||(o=kt(e,"keydown",t[10]),i=!0)},p(l,c){const d=6272&c?Vi(a,[4096&c&&to(l[12]),128&c&&{value:l[7]},2048&c&&{onchange:l[11]}]):{};n.$set(d)},i(l){r||(L(n.$$.fragment,l),r=!0)},o(l){W(n.$$.fragment,l),r=!1},d(l){l&&nt(e),Bt(n),i=!1,o()}}}function ck(t){let e,n;return e=new Fh({props:{panelClass:"PinturaSliderPanel",buttonClass:$n(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[lk],label:[sk]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,[i]){const o={};33&i&&(o.buttonClass=$n(["PinturaSliderButton",r[0],r[5]&&"PinturaSliderIconOnly"])),1053694&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function dk(t,e,n){const r=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"];let i=Fy(e,r),{class:o}=e,{title:a}=e,{label:s=Math.round}=e,{icon:l}=e,{labelClass:c}=e,{innerClass:d}=e,{hideLabel:u=!1}=e,{locale:p}=e,{value:h}=e,{onchange:f=ve}=e,{labelPrefix:m}=e;const{min:$,max:b,getValue:S=ur}=i;let v;const T=C=>n(9,v=(R=>hr(s)?s(S(R),$,b,R):s)(C));return t.$$set=C=>{e=Or(Or({},e),iu(C)),n(12,i=Fy(e,r)),"class"in C&&n(0,o=C.class),"title"in C&&n(1,a=C.title),"label"in C&&n(13,s=C.label),"icon"in C&&n(2,l=C.icon),"labelClass"in C&&n(3,c=C.labelClass),"innerClass"in C&&n(4,d=C.innerClass),"hideLabel"in C&&n(5,u=C.hideLabel),"locale"in C&&n(6,p=C.locale),"value"in C&&n(7,h=C.value),"onchange"in C&&n(14,f=C.onchange),"labelPrefix"in C&&n(8,m=C.labelPrefix)},t.$$.update=()=>{8320&t.$$.dirty&&T(h)},[o,a,l,c,d,u,p,h,m,v,C=>{/tab/i.test(C.key)&&C.preventDefault()},C=>{T(C),f(C)},i,s,f]}class uk extends mn{constructor(e){super(),hn(this,e,dk,ck,rn,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function ib(t){let e,n,r=vi(t[0],t[1])+"";return{c(){e=bt("span"),n=vr(r),w(e,"class",t[3])},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){3&o&&r!==(r=vi(i[0],i[1])+"")&&Vr(n,r),8&o&&w(e,"class",i[3])},d(i){i&&nt(e)}}}function pk(t){let e,n,r,i,o=t[0]&&ib(t);return r=new na({props:{items:t[2]}}),{c(){e=bt("li"),o&&o.c(),n=be(),zt(r.$$.fragment),w(e,"class","PinturaShapeStyle")},m(a,s){it(a,e,s),o&&o.m(e,null),Rt(e,n),Ft(r,e,null),i=!0},p(a,[s]){a[0]?o?o.p(a,s):(o=ib(a),o.c(),o.m(e,n)):o&&(o.d(1),o=null);const l={};4&s&&(l.items=a[2]),r.$set(l)},i(a){i||(L(r.$$.fragment,a),i=!0)},o(a){W(r.$$.fragment,a),i=!1},d(a){a&&nt(e),o&&o.d(),Bt(r)}}}function hk(t,e,n){let r,{title:i}=e,{locale:o}=e,{items:a}=e,{hideTitle:s=!1}=e;return t.$$set=l=>{"title"in l&&n(0,i=l.title),"locale"in l&&n(1,o=l.locale),"items"in l&&n(2,a=l.items),"hideTitle"in l&&n(4,s=l.hideTitle)},t.$$.update=()=>{16&t.$$.dirty&&n(3,r="PinturaShapeStyleLabel"+(s?" implicit":""))},[i,o,a,r,s]}class mk extends mn{constructor(e){super(),hn(this,e,hk,pk,rn,{title:0,locale:1,items:2,hideTitle:4})}}var ob=(t,e,n)=>{let r,i,o;const a=Math.floor(6*t),s=6*t-a,l=n*(1-e),c=n*(1-s*e),d=n*(1-(1-s)*e);switch(a%6){case 0:r=n,i=d,o=l;break;case 1:r=c,i=n,o=l;break;case 2:r=l,i=n,o=d;break;case 3:r=l,i=c,o=n;break;case 4:r=d,i=l,o=n;break;case 5:r=n,i=l,o=c}return[r,i,o]};function fk(t){let e,n,r;return{c(){e=bt("div"),n=bt("span"),w(e,"class","PinturaColorPreview"),w(e,"title",t[0]),w(e,"style",r="--color:"+t[1])},m(i,o){it(i,e,o),Rt(e,n)},p(i,[o]){1&o&&w(e,"title",i[0]),2&o&&r!==(r="--color:"+i[1])&&w(e,"style",r)},i:Je,o:Je,d(i){i&&nt(e)}}}function gk(t,e,n){let r,{color:i}=e,{title:o}=e;return t.$$set=a=>{"color"in a&&n(2,i=a.color),"title"in a&&n(0,o=a.title)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=i?Bi(i):"transparent")},[o,r,i]}class Hf extends mn{constructor(e){super(),hn(this,e,gk,fk,rn,{color:2,title:0})}}var Ew=t=>(t=t.trim(),/^rgba/.test(t)?t.substr(5).split(",").map(parseFloat).map((e,n)=>e/(n===3?1:255)):/^rgb/.test(t)?t.substr(4).split(",").map(parseFloat).map(e=>e/255):/^#/.test(t)?(e=>{const[,n,r,i,o]=e.split("");e=e.length>=4&&e.length<=5?`#${n}${n}${r}${r}${i}${i}${o?`${o}${o}`:""}`:e;const[a,s,l,c,d]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(a)return[s,l,c,d].filter(u=>u!==void 0).map(u=>parseInt(u,16)/255)})(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map(e=>parseInt(e,10)).map(e=>e/255):void 0);function ab(t){let e,n;return{c(){e=bt("span"),n=vr(t[0])},m(r,i){it(r,e,i),Rt(e,n)},p(r,i){1&i[0]&&Vr(n,r[0])},d(r){r&&nt(e)}}}function $k(t){let e,n,r,i;n=new Hf({props:{color:t[4],title:vi(t[8],t[10])}});let o=!t[9]&&ab(t);return{c(){e=bt("span"),zt(n.$$.fragment),r=be(),o&&o.c(),w(e,"slot","label"),w(e,"class","PinturaButtonLabel")},m(a,s){it(a,e,s),Ft(n,e,null),Rt(e,r),o&&o.m(e,null),i=!0},p(a,s){const l={};16&s[0]&&(l.color=a[4]),1280&s[0]&&(l.title=vi(a[8],a[10])),n.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=ab(a),o.c(),o.m(e,null))},i(a){i||(L(n.$$.fragment,a),i=!0)},o(a){W(n.$$.fragment,a),i=!1},d(a){a&&nt(e),Bt(n),o&&o.d()}}}function sb(t){let e,n,r,i,o,a,s,l,c,d,u,p,h,f;c=new Wf({props:{class:"PinturaHuePicker",knobStyle:"background-color:"+t[20],onchange:t[26],value:t[15],min:0,max:1,step:.01}});let m=t[11]&&lb(t),$=t[14]&&cb(t);return{c(){e=bt("div"),n=bt("div"),r=bt("div"),i=bt("div"),l=be(),zt(c.$$.fragment),d=be(),m&&m.c(),u=be(),$&&$.c(),w(i,"role","button"),w(i,"aria-label","Saturation slider"),w(i,"class","PinturaPickerKnob"),w(i,"tabindex","0"),w(i,"style",o=`background-color:${t[19]};`),w(r,"class","PinturaPickerKnobController"),w(r,"style",a=`transform:translate(${t[24]}%,${t[23]}%)`),w(n,"class","PinturaSaturationPicker"),w(n,"style",s="background-color: "+t[20]),w(e,"class","PinturaPicker")},m(b,S){it(b,e,S),Rt(e,n),Rt(n,r),Rt(r,i),t[37](n),Rt(e,l),Ft(c,e,null),Rt(e,d),m&&m.m(e,null),Rt(e,u),$&&$.m(e,null),p=!0,h||(f=[kt(i,"nudge",t[29]),Jn(kl.call(null,i,{preventDefault:!0})),kt(n,"pointerdown",t[28])],h=!0)},p(b,S){(!p||524288&S[0]&&o!==(o=`background-color:${b[19]};`))&&w(i,"style",o),(!p||25165824&S[0]&&a!==(a=`transform:translate(${b[24]}%,${b[23]}%)`))&&w(r,"style",a),(!p||1048576&S[0]&&s!==(s="background-color: "+b[20]))&&w(n,"style",s);const v={};1048576&S[0]&&(v.knobStyle="background-color:"+b[20]),32768&S[0]&&(v.value=b[15]),c.$set(v),b[11]?m?(m.p(b,S),2048&S[0]&&L(m,1)):(m=lb(b),m.c(),L(m,1),m.m(e,u)):m&&(Be(),W(m,1,1,()=>{m=null}),ze()),b[14]?$?$.p(b,S):($=cb(b),$.c(),$.m(e,null)):$&&($.d(1),$=null)},i(b){p||(L(c.$$.fragment,b),L(m),p=!0)},o(b){W(c.$$.fragment,b),W(m),p=!1},d(b){b&&nt(e),t[37](null),Bt(c),m&&m.d(),$&&$.d(),h=!1,tr(f)}}}function lb(t){let e,n;return e=new Wf({props:{class:"PinturaOpacityPicker",knobStyle:"background-color:"+t[17],trackStyle:`background-image:linear-gradient(to right,${t[18]},${t[19]})`,onchange:t[27],value:t[16],min:0,max:1,step:.01}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};131072&i[0]&&(o.knobStyle="background-color:"+r[17]),786432&i[0]&&(o.trackStyle=`background-image:linear-gradient(to right,${r[18]},${r[19]})`),65536&i[0]&&(o.value=r[16]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function cb(t){let e,n,r;return{c(){e=bt("input"),w(e,"class","PinturaColorPickerInput"),w(e,"type","text"),e.value=t[22]},m(i,o){it(i,e,o),n||(r=kt(e,"input",t[30]),n=!0)},p(i,o){4194304&o[0]&&e.value!==i[22]&&(e.value=i[22])},d(i){i&&nt(e),n=!1,r()}}}function db(t){let e,n;return e=new Xs({props:{label:vi(t[10].labelColorPalette,t[10]),class:$n(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[38]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[39],$$slots:{option:[bk,({option:r})=>({51:r}),({option:r})=>[0,r?1048576:0]],group:[yk,({option:r})=>({51:r}),({option:r})=>[0,r?1048576:0]]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};1024&i[0]&&(o.label=vi(r[10].labelColorPalette,r[10])),512&i[0]&&(o.class=$n(["PinturaColorPresets",r[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&i[0]&&(o.name=r[1]),16&i[0]&&(o.value=r[4]),1028&i[0]&&(o.options=r[2].map(r[38])),8&i[0]&&(o.selectedIndex=r[3]),128&i[0]&&(o.optionMapper=r[7]),64&i[0]&&(o.optionLabelClass=r[6]),512&i[0]|3145728&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function yk(t){let e,n,r=t[51].label+"";return{c(){e=bt("span"),n=vr(r),w(e,"slot","group")},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){1048576&o[1]&&r!==(r=i[51].label+"")&&Vr(n,r)},d(i){i&&nt(e)}}}function ub(t){let e,n,r=t[51].label+"";return{c(){e=bt("span"),n=vr(r),w(e,"class","PinturaButtonLabel")},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){1048576&o[1]&&r!==(r=i[51].label+"")&&Vr(n,r)},d(i){i&&nt(e)}}}function bk(t){let e,n,r,i;n=new Hf({props:{title:t[51].label,color:t[51].value}});let o=!t[9]&&ub(t);return{c(){e=bt("span"),zt(n.$$.fragment),r=be(),o&&o.c(),w(e,"slot","option")},m(a,s){it(a,e,s),Ft(n,e,null),Rt(e,r),o&&o.m(e,null),i=!0},p(a,s){const l={};1048576&s[1]&&(l.title=a[51].label),1048576&s[1]&&(l.color=a[51].value),n.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=ub(a),o.c(),o.m(e,null))},i(a){i||(L(n.$$.fragment,a),i=!0)},o(a){W(n.$$.fragment,a),i=!1},d(a){a&&nt(e),Bt(n),o&&o.d()}}}function vk(t){let e,n,r,i=t[13]&&sb(t),o=t[12]&&db(t);return{c(){e=bt("div"),i&&i.c(),n=be(),o&&o.c(),w(e,"slot","details"),w(e,"class","PinturaColorPickerPanel")},m(a,s){it(a,e,s),i&&i.m(e,null),Rt(e,n),o&&o.m(e,null),r=!0},p(a,s){a[13]?i?(i.p(a,s),8192&s[0]&&L(i,1)):(i=sb(a),i.c(),L(i,1),i.m(e,n)):i&&(Be(),W(i,1,1,()=>{i=null}),ze()),a[12]?o?(o.p(a,s),4096&s[0]&&L(o,1)):(o=db(a),o.c(),L(o,1),o.m(e,null)):o&&(Be(),W(o,1,1,()=>{o=null}),ze())},i(a){r||(L(i),L(o),r=!0)},o(a){W(i),W(o),r=!1},d(a){a&&nt(e),i&&i.d(),o&&o.d()}}}function xk(t){let e,n;return e=new Fh({props:{buttonClass:$n(["PinturaColorPickerButton",t[5]]),$$slots:{details:[vk],label:[$k]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};32&i[0]&&(o.buttonClass=$n(["PinturaColorPickerButton",r[5]])),33554399&i[0]|2097152&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Sk(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,{label:b}=e,{name:S}=e,{options:v=[]}=e,{selectedIndex:T=-1}=e,{value:C}=e,{buttonClass:R}=e,{optionLabelClass:A}=e,{optionMapper:E}=e,{onchange:M}=e,{title:P}=e,{hidePresetLabel:_=!0}=e,{locale:y}=e,{enableOpacity:z=!0}=e,{enablePresets:O=!0}=e,{enablePicker:I=!0}=e,{enableInput:k=!1}=e;const G=(U,ft)=>{if(u=[U[0],U[1],U[2]],ft){let yt=((It,Jt,pe)=>{let mt=Math.max(It,Jt,pe),ot=mt-Math.min(It,Jt,pe),Q=ot&&(mt==It?(Jt-pe)/ot:mt==Jt?2+(pe-It)/ot:4+(It-Jt)/ot);return[60*(Q<0?Q+6:Q)/360,mt&&ot/mt,mt]})(...u);n(15,s=yt[0]),n(32,l=yt[1]),n(33,c=yt[2]),n(16,d=Sn(U[3])?U[3]:1)}n(17,p=Bi(U)),n(18,h=Bi([...u,0])),n(19,f=Bi([...u,1])),n(20,m=Bi(ob(s,1,1)))},X=()=>{const U=[...ob(s,l,c),d];G(U),M(U)},q=U=>{const ft=U.length===3?[...U,1]:U;G(ft,!0),M(ft)},D=(U,ft)=>{const yt=sr(U.x/ft.width,0,1),It=sr(U.y/ft.height,0,1);var Jt;Jt=1-It,n(32,l=yt),n(33,c=Jt),d===0&&n(16,d=1),X()};let lt,pt,Lt,et;const Y=U=>{const ft=Zr(iy(U),et);D(Xr(Ue(Lt),ft),pt)},j=U=>{pt=void 0,document.documentElement.removeEventListener("pointermove",Y),document.documentElement.removeEventListener("pointerup",j)};let ct;return t.$$set=U=>{"label"in U&&n(0,b=U.label),"name"in U&&n(1,S=U.name),"options"in U&&n(2,v=U.options),"selectedIndex"in U&&n(3,T=U.selectedIndex),"value"in U&&n(4,C=U.value),"buttonClass"in U&&n(5,R=U.buttonClass),"optionLabelClass"in U&&n(6,A=U.optionLabelClass),"optionMapper"in U&&n(7,E=U.optionMapper),"onchange"in U&&n(31,M=U.onchange),"title"in U&&n(8,P=U.title),"hidePresetLabel"in U&&n(9,_=U.hidePresetLabel),"locale"in U&&n(10,y=U.locale),"enableOpacity"in U&&n(11,z=U.enableOpacity),"enablePresets"in U&&n(12,O=U.enablePresets),"enablePicker"in U&&n(13,I=U.enablePicker),"enableInput"in U&&n(14,k=U.enableInput)},t.$$.update=()=>{16&t.$$.dirty[0]|8&t.$$.dirty[1]&&(!C||$&&qs(C,$)||(n(34,$=[...C]),G(C,!0))),2&t.$$.dirty[1]&&n(24,r=100*l),4&t.$$.dirty[1]&&n(23,i=100-100*c),16&t.$$.dirty[1]&&n(36,o=!!ct&&ct.length>=4&&ct.length<=5),18448&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(22,a=k&&C?((U,ft,yt)=>{let It=U.map(Jt=>Math.round(255*Jt).toString(16).toLowerCase().padStart(2,"0"));return(!ft&&It.length>3||It[3]==="ff")&&It.pop(),yt&&(It=It.map(Jt=>Jt.substring(0,1))),"#"+It.join("")})(C,z,o):void 0)},[b,S,v,T,C,R,A,E,P,_,y,z,O,I,k,s,d,p,h,f,m,lt,a,i,r,q,U=>{n(15,s=U),d===0&&n(16,d=1),X()},U=>{n(16,d=U),X()},U=>{U.stopPropagation(),pt=ii(lt.offsetWidth,lt.offsetHeight),Lt=(ft=>dt(ft.offsetX,ft.offsetY))(U),et=iy(U),D(Lt,pt),document.documentElement.addEventListener("pointermove",Y),document.documentElement.addEventListener("pointerup",j)},U=>{pt=ii(lt.offsetWidth,lt.offsetHeight);const ft=r/100*pt.width,yt=i/100*pt.height;D({x:ft+U.detail.x,y:yt+U.detail.y},pt)},U=>{const{value:ft}=U.target,yt=ft.length;if(!ft.startsWith("#")||yt<4||yt===6||yt===8||yt>9||!z&&yt>7)return;const It=Ew(ft);It&&(n(35,ct=ft),G(It),M(It))},M,l,c,$,ct,o,function(U){zn[U?"unshift":"push"](()=>{lt=U,n(21,lt)})},([U,ft])=>[U,hr(ft)?ft(y):ft],U=>q(U.value)]}class wk extends mn{constructor(e){super(),hn(this,e,Sk,xk,rn,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:31,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14},null,[-1,-1])}}function Tk(t){let e,n,r;return n=new na({props:{items:t[0]}}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"class","PinturaShorthandControl PinturaShapeStyle")},m(i,o){it(i,e,o),Ft(n,e,null),r=!0},p(i,[o]){const a={};1&o&&(a.items=i[0]),n.$set(a)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Bt(n)}}}function Ek(t,e,n){let r,i,{value:o}=e,{onchange:a}=e,{controls:s=[]}=e;return t.$$set=l=>{n(6,e=Or(Or({},e),iu(l))),"value"in l&&n(1,o=l.value),"onchange"in l&&n(2,a=l.onchange),"controls"in l&&n(3,s=l.controls)},t.$$.update=()=>{n(4,r=(l=>{const{controls:c,...d}=l;return d})(e)),30&t.$$.dirty&&n(0,i=s.map((l,c)=>{const[d,u,p]=l;return[d,u,{...r,...p,value:o[c],onchange:h=>{const f=[...o];f[c]=h,a(f)}}]}))},e=iu(e),[i,o,a,s,r]}class Ik extends mn{constructor(e){super(),hn(this,e,Ek,Tk,rn,{value:1,onchange:2,controls:3})}}function pb(t,e,n){const r=t.slice();return r[9]=e[n][0],r[0]=e[n][1],r[10]=e[n][2],r[2]=e[n][3],r}function _k(t){let e,n,r;const i=[t[10]];var o=t[3][t[9]]||t[9];function a(s){let l={};for(let c=0;c<i.length;c+=1)l=Or(l,i[c]);return{props:l}}return o&&(e=ih(o,a())),{c(){e&&zt(e.$$.fragment),n=Nr()},m(s,l){e&&Ft(e,s,l),it(s,n,l),r=!0},p(s,l){const c=4&l?Vi(i,[to(s[10])]):{};if(o!==(o=s[3][s[9]]||s[9])){if(e){Be();const d=e;W(d.$$.fragment,1,0,()=>{Bt(d,1)}),ze()}o?(e=ih(o,a()),zt(e.$$.fragment),L(e.$$.fragment,1),Ft(e,n.parentNode,n)):e=null}else o&&e.$set(c)},i(s){r||(e&&L(e.$$.fragment,s),r=!0)},o(s){e&&W(e.$$.fragment,s),r=!1},d(s){s&&nt(n),e&&Bt(e,s)}}}function Ck(t){let e,n=t[9],r=t[9]&&Wm(t);return{c(){r&&r.c(),e=Nr()},m(i,o){r&&r.m(i,o),it(i,e,o)},p(i,o){i[9]?n?rn(n,i[9])?(r.d(1),r=Wm(i),r.c(),r.m(e.parentNode,e)):r.p(i,o):(r=Wm(i),r.c(),r.m(e.parentNode,e)):n&&(r.d(1),r=null),n=i[9]},i:Je,o(i){W(r)},d(i){i&&nt(e),r&&r.d(i)}}}function Rk(t){let e,n,r=t[10].innerHTML+"";return{c(){e=new Ph(!1),n=Nr(),e.a=n},m(i,o){e.m(r,i,o),it(i,n,o)},p(i,o){4&o&&r!==(r=i[10].innerHTML+"")&&e.p(r)},i:Je,o:Je,d(i){i&&nt(n),i&&e.d()}}}function Mk(t){let e,n=t[10].textContent+"";return{c(){e=vr(n)},m(r,i){it(r,e,i)},p(r,i){4&i&&n!==(n=r[10].textContent+"")&&Vr(e,n)},i:Je,o:Je,d(r){r&&nt(e)}}}function kk(t){let e,n;return e=new na({props:{items:t[2],discardEmptyItems:!0}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};4&i&&(o.items=r[2]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Wm(t){let e,n,r,i,o;const a=[kk,Mk,Rk],s=[];function l(u,p){return u[2]&&u[2].length?0:u[10].textContent?1:u[10].innerHTML?2:-1}~(n=l(t))&&(r=s[n]=a[n](t));let c=[t[4](t[10])],d={};for(let u=0;u<c.length;u+=1)d=Or(d,c[u]);return{c(){e=bt(t[9]),r&&r.c(),i=be(),/-/.test(t[9])?zy(e,d):By(e,d)},m(u,p){it(u,e,p),~n&&s[n].m(e,null),Rt(e,i),o=!0},p(u,p){let h=n;n=l(u),n===h?~n&&s[n].p(u,p):(r&&(Be(),W(s[h],1,1,()=>{s[h]=null}),ze()),~n?(r=s[n],r?r.p(u,p):(r=s[n]=a[n](u),r.c()),L(r,1),r.m(e,i)):r=null),d=Vi(c,[4&p&&u[4](u[10])]),/-/.test(u[9])?zy(e,d):By(e,d)},i(u){o||(L(r),o=!0)},o(u){W(r),o=!1},d(u){u&&nt(e),~n&&s[n].d()}}}function hb(t,e){let n,r,i,o,a,s;const l=[Ck,_k],c=[];function d(u,p){return 4&p&&(r=null),r==null&&(r=!u[5](u[9])),r?0:1}return i=d(e,-1),o=c[i]=l[i](e),{key:t,first:null,c(){n=Nr(),o.c(),a=Nr(),this.first=n},m(u,p){it(u,n,p),c[i].m(u,p),it(u,a,p),s=!0},p(u,p){let h=i;i=d(e=u,p),i===h?c[i].p(e,p):(Be(),W(c[h],1,1,()=>{c[h]=null}),ze(),o=c[i],o?o.p(e,p):(o=c[i]=l[i](e),o.c()),L(o,1),o.m(a.parentNode,a))},i(u){s||(L(o),s=!0)},o(u){W(o),s=!1},d(u){u&&nt(n),c[i].d(u),u&&nt(a)}}}function Pk(t){let e,n,r=[],i=new Map,o=t[2];const a=s=>s[0]+s[1];for(let s=0;s<o.length;s+=1){let l=pb(t,o,s),c=a(l);i.set(c,r[s]=hb(c,l))}return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Nr()},m(s,l){for(let c=0;c<r.length;c+=1)r[c].m(s,l);it(s,e,l),n=!0},p(s,[l]){62&l&&(o=s[2],Be(),r=_s(r,l,a,1,s,o,i,e.parentNode,Cl,hb,e,pb),ze())},i(s){if(!n){for(let l=0;l<o.length;l+=1)L(r[l]);n=!0}},o(s){for(let l=0;l<r.length;l+=1)W(r[l]);n=!1},d(s){for(let l=0;l<r.length;l+=1)r[l].d(s);s&&nt(e)}}}function Ak(t,e,n){let r,i,{items:o}=e,{discardEmptyItems:a=!0}=e,{key:s=""}=e;const l={Button:Rl,ImageButton:$w,ImageButtonList:Gf,Dropdown:Tw,RadioGroup:Xs,Input:ww,Panel:tk,ProgressIndicator:fw,ShapeStyle:mk,ToggleSlider:uk,ColorPicker:wk,ShorthandControl:Ik},c=u=>!Ve(u)||!!l[u],d=u=>{if(!u)return!1;const[p,,h,f=[]]=u;return!!c(p)||f.some(d)||h.textContent||h.innerHTML};return t.$$set=u=>{"items"in u&&n(6,o=u.items),"discardEmptyItems"in u&&n(7,a=u.discardEmptyItems),"key"in u&&n(0,s=u.key)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=s),192&t.$$.dirty&&n(2,i=(o&&a?o.filter(d):o)||[])},[s,r,i,l,(u={})=>{const{textContent:p,innerHTML:h,...f}=u;return f},c,o,a]}class na extends mn{constructor(e){super(),hn(this,e,Ak,Pk,rn,{items:6,discardEmptyItems:7,key:0})}}let Hm=null;var Lk=t=>{if(Hm===null&&(Hm=Ji()&&"visualViewport"in window),!Hm)return!1;const e=visualViewport.height,n=()=>{t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",n),()=>visualViewport.removeEventListener("resize",n)};function mb(t){let e,n;const r=[{onclick:t[1]},t[3]];let i={};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new Rl({props:i}),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=10&a[0]?Vi(r,[2&a[0]&&{onclick:o[1]},8&a[0]&&to(o[3])]):{};e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){Bt(e,o)}}}function fb(t){let e,n;const r=[{onclick:t[0]},{class:"PinturaInputFormButtonConfirm"},t[2]];let i={};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new Rl({props:i}),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=5&a[0]?Vi(r,[1&a[0]&&{onclick:o[0]},r[1],4&a[0]&&to(o[2])]):{};e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){Bt(e,o)}}}function Ok(t){let e,n,r,i,o,a,s,l,c=t[3]&&mb(t);const d=t[24].default,u=Si(d,t,t[23],null);let p=t[2]&&fb(t);return{c(){e=bt("div"),n=bt("div"),c&&c.c(),r=be(),i=bt("div"),u&&u.c(),o=be(),p&&p.c(),w(i,"class","PinturaInputFormFields"),w(n,"class","PinturaInputFormInner"),w(e,"class","PinturaInputForm"),w(e,"data-layout",t[4]),w(e,"style",t[6])},m(h,f){it(h,e,f),Rt(e,n),c&&c.m(n,null),Rt(n,r),Rt(n,i),u&&u.m(i,null),Rt(n,o),p&&p.m(n,null),t[25](e),a=!0,s||(l=[kt(i,"keydown",t[10]),kt(e,"focusin",t[7]),kt(e,"focusout",t[8]),kt(e,"measure",t[9]),Jn(Ui.call(null,e))],s=!0)},p(h,f){h[3]?c?(c.p(h,f),8&f[0]&&L(c,1)):(c=mb(h),c.c(),L(c,1),c.m(n,r)):c&&(Be(),W(c,1,1,()=>{c=null}),ze()),u&&u.p&&(!a||8388608&f[0])&&Ti(u,d,h,h[23],a?wi(d,h[23],f,null):Ei(h[23]),null),h[2]?p?(p.p(h,f),4&f[0]&&L(p,1)):(p=fb(h),p.c(),L(p,1),p.m(n,null)):p&&(Be(),W(p,1,1,()=>{p=null}),ze()),(!a||16&f[0])&&w(e,"data-layout",h[4]),(!a||64&f[0])&&w(e,"style",h[6])},i(h){a||(L(c),L(u,h),L(p),a=!0)},o(h){W(c),W(u,h),W(p),a=!1},d(h){h&&nt(e),c&&c.d(),u&&u.d(h),p&&p.d(),t[25](null),s=!1,tr(l)}}}function Dk(t,e,n){let r,i,o,a,s,{$$slots:l={},$$scope:c}=e,{onconfirm:d}=e,{oncancel:u}=e,{autoFocus:p=!0}=e,{autoPositionCursor:h=!0}=e,{buttonConfirm:f}=e,{buttonCancel:m}=e,{layout:$="stack"}=e,{parentRect:b}=e,{align:S}=e,{justify:v}=e,{parentMargin:T=16}=e,{panelOffset:C=pr()}=e,R=!1,A,E,M="",P=0;const _=()=>{const I=s.querySelector("input, textarea");I.focus(),P>=1||I.select()},y=()=>{R=!0,O||!is()&&!Ch()||n(19,M="top:1em;bottom:auto;"),is()&&(I=>{let k;const G=q=>k=q.touches[0].screenY,X=q=>{const D=q.touches[0].screenY,lt=q.target;/textarea/i.test(lt.nodeName)?(D>k?lt.scrollTop==0&&q.preventDefault():D<k?lt.scrollTop+lt.offsetHeight==lt.scrollHeight&&q.preventDefault():q.preventDefault(),k=D):q.preventDefault()};I.addEventListener("touchstart",G),I.addEventListener("touchmove",X)})(s),n(20,P=1)};let z;const O=Lk(I=>{o?I!=="hidden"||R?(clearTimeout(E),E=void 0,n(19,M=`top:${visualViewport.height-A.height-C.y}px`),I==="visible"?(n(5,s.dataset.stick=!0,s),_(),y()):(R=!1,n(20,P=0))):_():n(19,M="top: 4.5em; bottom: auto")});return _l(()=>{p&&_()}),$a(()=>{O&&O()}),t.$$set=I=>{"onconfirm"in I&&n(0,d=I.onconfirm),"oncancel"in I&&n(1,u=I.oncancel),"autoFocus"in I&&n(11,p=I.autoFocus),"autoPositionCursor"in I&&n(12,h=I.autoPositionCursor),"buttonConfirm"in I&&n(2,f=I.buttonConfirm),"buttonCancel"in I&&n(3,m=I.buttonCancel),"layout"in I&&n(4,$=I.layout),"parentRect"in I&&n(13,b=I.parentRect),"align"in I&&n(14,S=I.align),"justify"in I&&n(15,v=I.justify),"parentMargin"in I&&n(16,T=I.parentMargin),"panelOffset"in I&&n(17,C=I.panelOffset),"$$scope"in I&&n(23,c=I.$$scope)},t.$$.update=()=>{385024&t.$$.dirty[0]&&n(21,r=b&&A?((I,k,G,X,q)=>{let D,lt;return D=X==="center"?I.x+.5*I.width-.5*k.width:X==="right"?I.x+I.width-k.width-q:I.x+q,lt=G==="center"?I.y+.5*I.height-.5*k.height:G==="bottom"?I.y+I.height-k.height-q:I.y+q,`left:${D}px;top:${lt}px;right:auto;bottom:auto;`})(b,A,S,v,T):void 0),32&t.$$.dirty[0]&&n(22,i=s&&getComputedStyle(s)),4194304&t.$$.dirty[0]&&(o=i&&i.getPropertyValue("--editor-modal")==="1"),3670016&t.$$.dirty[0]&&n(6,a=`opacity:${P};${r||M}`)},[d,u,f,m,$,s,a,I=>{var k;((G=>/textarea/i.test(G))(I.target)||yw(I.target))&&(z=Date.now(),h&&((k=I.target).selectionStart=k.selectionEnd=k.value.length),clearTimeout(E),E=setTimeout(y,200))},I=>{Date.now()-z>50||(I.stopPropagation(),_())},({detail:I})=>{n(18,A={width:I.width,height:I.height})},I=>I.key==="Enter"?d():I.key==="Escape"?u():void 0,p,h,b,S,v,T,C,A,M,P,r,i,c,l,function(I){zn[I?"unshift":"push"](()=>{s=I,n(5,s)})}]}class Iw extends mn{constructor(e){super(),hn(this,e,Dk,Ok,rn,{onconfirm:0,oncancel:1,autoFocus:11,autoPositionCursor:12,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:13,align:14,justify:15,parentMargin:16,panelOffset:17},null,[-1,-1])}}const Fk=["aspectRatio","isRotatedSideways","flip","cropSize"],gb=Lf.map(([t])=>t).filter(t=>!Fk.includes(t));var ll=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),_w=(t,e)=>(e?Ff(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),$b=(t,e=ur)=>{const{subscribe:n,set:r}=ye(void 0);return{subscribe:n,destroy:((i,o)=>{const a=matchMedia(i);return a.addListener(o),o(a),{get matches(){return a.matches},destroy:()=>a.removeListener(o)}})(t,({matches:i})=>r(e(i))).destroy}},ld=t=>/video/.test(t.type),yb=(t,e,n)=>new Promise((r,i)=>{(async()=>{ld(t)&&r(await(l=>new Promise((c,d)=>{const u=br("video");u.onseeked=()=>{const p=br("canvas");lS(u).then(({width:h,height:f})=>{p.width=h,p.height=f;const m=p.getContext("2d",{willReadFrequently:!0}),$=()=>{m.drawImage(u,0,0,p.width,p.height);const b=m.getImageData(0,0,p.width,p.height);pi(p),URL.revokeObjectURL(u.src),c(b)};Ss()?setTimeout($,16):$()})},u.onloadeddata=()=>{u.currentTime=0},u.onerror=p=>{console.error(p),d(u.error)},u.src=URL.createObjectURL(l),u.load()}))(t));const o=await e.read(t),a=l=>Yx(l,n).then(c=>e.apply(c,o)).then(r).catch(i);if(qx(t)||!jx()||Ss()||is())return a(t);let s;try{s=await mu((l,c)=>createImageBitmap(l).then(d=>c(null,d)).catch(c),[t])}catch{}s&&s.width?await _h()?zf()&&o>1?r(await(async l=>hu(await ad(l)))(s)):r(s):r(e.apply(s,o)):a(t)})()}),bb=(t,e)=>new Promise(async n=>{if(t.width<e.width&&t.height<e.height)return n(t);const r=Math.min(e.width/t.width,e.height/t.height),i=r*t.width,o=r*t.height,a=br("canvas",{width:i,height:o}),s=a.getContext("2d",{willReadFrequently:!0}),l=Qc(t)?await ad(t):t;s.drawImage(l,0,0,i,o),n(hu(a))});let jm=null;var Bk=()=>{if(jm===null){let t=br("canvas");jm=!!Ah(t),pi(t),t=void 0}return jm};const vb=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],ec={precision:1e-4},_p={precision:.01*ec.precision};var zk=()=>{const t=[],e=[],n=[],r=()=>{e.forEach(o=>o(n))},i=o=>{o.unsub=o.subscribe(a=>((s,l)=>{const c=t.indexOf(s);c<0||(n[c]=l,r())})(o,a)),r()};return{get length(){return t.length},clear:()=>{t.forEach(o=>o.unsub()),t.length=0,n.length=0},unshift:o=>{t.unshift(o),i(o)},get:o=>t[o],push:o=>{t.push(o),i(o)},remove:o=>{o.unsub();const a=t.indexOf(o);t.splice(a,1),n.splice(a,1)},forEach:o=>t.forEach(o),filter:o=>t.filter(o),subscribe:o=>(e.push(o),o(n),()=>{e.splice(e.indexOf(o),1)})}},qm=t=>t[0]<.25&&t[1]<.25&&t[2]<.25,Cw=(t={})=>new Promise(e=>{const{accept:n="image/*"}=t,r=br("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:n}),i=()=>{const[o]=r.files;r.parentNode&&r.remove(),r.removeEventListener("change",i),e(o)};r.addEventListener("change",i),is()&&document.body.append(r),r.click()}),lu=t=>{try{return t()}catch(e){console.error(e)}},Nk=([t,e])=>t+.5*(e-t),bl=t=>Math.round(100*t),jf=t=>dt(t.clientX,t.clientY),C0=(t,e,n)=>{const r=jf(t);return Zr(Zr(r,e),n)};function Vk(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,b,S,v,T,C,R,{root:A}=e,{locale:E}=e,{stores:M}=e,{allowPan:P=!0}=e,{allowZoom:_=!0}=e,{enablePan:y=!0}=e,{enableZoom:z=!0}=e,{enableZoomControls:O=z}=e,{enableZoomInput:I=!0}=e,{enablePanInput:k=!0}=e,{enablePanLimit:G=!0}=e,{panLimitGutterScalar:X=0}=e,{zoomOptions:q=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:D=.25}=e,{zoomAdjustFactor:lt=.1}=e,{zoomAdjustWheelFactor:pt=1}=e,{elasticity:Lt=5}=e,{imageSelectionRectCentered:et}=e,{imageSelectionRectScalar:Y}=e,{zoomLevel:j=null}=e,{zoomControls:ct}=e,{zoomMultiTouching:U=!1}=e;const{isAnimated:ft,isInteracting:yt,rootRect:It,stageRect:Jt,stageScalar:pe,imageSelectionPan:mt,imageSelectionZoom:ot,imageSelectionStageFitScalar:Q,imageSelectionRect:Se,imageSelectionStoredState:Mt,imagePreviewUpscale:xt}=M;N(t,ft,rt=>n(68,C=rt)),N(t,yt,rt=>n(67,v=rt)),N(t,It,rt=>n(65,b=rt)),N(t,Jt,rt=>n(64,$=rt)),N(t,pe,rt=>n(45,T=rt)),N(t,mt,rt=>n(63,h=rt)),N(t,ot,rt=>n(42,p=rt)),N(t,Q,rt=>n(43,f=rt)),N(t,Se,rt=>n(66,S=rt)),N(t,Mt,rt=>n(69,R=rt)),N(t,xt,rt=>n(44,m=rt));let Wt=!1,Ht,Ae,ke,st;const St=rt=>{const Dt=A.querySelector(".PinturaMain > .PinturaUtilMain")||A.querySelector('div[tabindex="0"] .PinturaUtilMain');return!!Dt&&!!Dt.contains(rt.target)&&!su(rt.target)},Ce=(rt={})=>{const{pan:Dt=h,zoom:ee=p}=rt;Ct(Mt,R={translation:Dt,zoom:ee},R)},dn=()=>h&&h.x===0&&h.y===0,Te=()=>{Ct(ot,p=void 0,p),dn()||Ct(mt,h=pr(),h),Ee.set(void 0,{hard:!0})},Ut=()=>{Te(),Ce()},Ee=un(void 0,{precision:.01});Ee.subscribe(rt=>{if(rt===void 0)return Ct(ot,p=void 0,p),void(dn()||Ct(mt,h=pr(),h));const Dt=p;rt<=1?dn()||Ct(mt,h=pr(),h):rt<=Dt&&Ct(mt,h=Qi(h,.8),h),Ct(ot,p=rt,p)});const Ne=rt=>{Ee.update(Dt=>{const ee=rt(Dt||f);return Ce({zoom:ee}),ee})},qe=rt=>{rt?Ee.set(rt,{hard:C===!1}):(rt=void 0,Ee.set(void 0,{hard:!0})),Ct(ot,p=rt,p),Ce({zoom:rt})},En=(rt,Dt)=>{const ee=Y*Dt,de={...et},te=1-sr(X,0,1);Ki(de,ee<te?ee:te);const on={...et};Ki(on,ee),ka(on,rt);const Xt={...on};return on.x>de.x&&(Xt.x=de.x),on.y>de.y&&(Xt.y=de.y),on.x+on.width<de.x+de.width&&(Xt.x=de.x+de.width-on.width),on.y+on.height<de.y+de.height&&(Xt.y=de.y+de.height-on.height),Zr(An(Xt),An(de))},Et=({translation:rt,zoom:Dt=1,elastify:ee=!0})=>{if(!Ht)return;let de=rt;const te=dt(Ht.x+de.x,Ht.y+de.y);if(!G)return te;const on=En(te,Dt);return ee?iM(on,te,Lt):on};let Tt,je;const Le=()=>{je=void 0,Ct(yt,v=!0,v),n(33,Wt=k),Tt=!1,ke=!1,Ht={...h},Ae=m?p||f:o?p||1:p||f},yn=rt=>{const{scalar:Dt,translation:ee,isMultiTouching:de}=rt.detail;if(!Ht||!de&&!k)return;de&&Qi(ee,.5),(k||de)&&(Tt=!0),U||n(12,U=de);const te=r?sr(Ae*Dt,s,l):1,on=Et({translation:ee,zoom:te,elastify:!0}),Xt=fl(on);st=fl(h),ke=Xt<st,r&&ot.set(te),mt.set(on),je=U&&{translation:rt.detail.translation,scalar:Dt}},en=rt=>{Ct(yt,v=!1,v),n(33,Wt=!1),n(12,U=!1),ke&&st<50&&(Ht=void 0,Ae=void 0,mt.set(pr()))},Ke=rt=>{Ct(yt,v=!1,v),n(33,Wt=!1),n(12,U=!1),Promise.resolve().then(()=>{if(Tt&&Ht){const Dt=je||rt.detail,ee=r?sr(Ae*Dt.scalar,s,l):1,de=Et({elastify:!1,translation:Dt.translation,zoom:ee});mt.set(de)}Ht=void 0,Ae=void 0,k&&rt.detail.isDoubleTap&&Ut(),Ce()})};let Cn,J=Date.now(),he=0,K=!1,Gt=!1;const ce=rt=>{if(!St(rt)||(rt.preventDefault(),rt.stopPropagation(),Gt))return;clearTimeout(Cn);const Dt=Dh(rt),ee=Date.now(),de=ee-J;J=ee;const te=Math.abs(Dt/de)>.2;he=te?he+1:0;const on=1+-1*Dt*pt/(te?50:100),Xt=C0(rt,b,$);we(Xt,on,{isZoomingFast:te})},we=(rt,Dt,{isZoomingFast:ee})=>{const de=m?p||f:o?p||1:p||f,te=de*Dt,on=pr(),Xt=h,ue=m?f:o?1:f,wn=Math.abs(te-ue),Zn=te<de,_r=de>ue&&Zn||de<ue&&te>de,Nn=he>=5;if(ee||(K=!1),he>0&&!K&&(K=_r),Nn&&K)return Ut(),Gt=!0,void setTimeout(()=>{Gt=!1},100);if(Nn)return;!ee&&_r&&wn<=.05&&(Cn=setTimeout(()=>{Ut()},250)),Ct(ot,p=sr(te,s,l),p);const ne=Pn(S);Ki(ne,de),ka(ne,Xt);const Ie=An(ne),mr=Pn(ne);Ki(mr,p-de+1,rt);const fr=An(mr),Ur=oy(Zr(fr,Ie),de);(($r,Er,ir)=>{$r.x=Er,$r.y=ir})(on,Xt.x+Ur.x,Xt.y+Ur.y),Ct(mt,h=Zn&&ee?Qi(Ue(h),.85):En(on,de),h),Ce()},ge=rt=>(rt?"add":"remove")+"EventListener";let Nt,Pe,Qt,Ge;const Ye=rt=>{rt.preventDefault(),Pe={...h},Ge=Pn(S),Qt=C0(rt,b,$),Nt=m?p||f:o?p||1:p||f},Qe=rt=>{rt.preventDefault(),Ct(ot,p=sr(rt.scale*Nt,s,l),p);const Dt=Pn(Ge);Ki(Dt,Nt),ka(Dt,Pe);const ee=An(Dt),de=Pn(Dt);Ki(de,p-Nt+1,Qt);const te=An(de),on=oy(Zr(te,ee),Nt),Xt={x:Pe.x+on.x,y:Pe.y+on.y};Ct(mt,h=En(Xt,p),h)},fn=rt=>{rt.preventDefault()},at=rt=>{A[ge(rt)]("wheel",ce),is()||(A[ge(rt)]("gesturestart",Ye),A[ge(rt)]("gesturechange",Qe),A[ge(rt)]("gestureend",fn))},At=rt=>{const Dt=ge(rt);A[Dt]("interactionstart",Le),A[Dt]("interactionupdate",yn),A[Dt]("interactionrelease",en),A[Dt]("interactionend",Ke)};let jt;return _l(()=>{jt=Ml(A,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:St})}),$a(()=>{at(!1),At(!1),jt.destroy(),jt=void 0}),t.$$set=rt=>{"root"in rt&&n(13,A=rt.root),"locale"in rt&&n(14,E=rt.locale),"stores"in rt&&n(15,M=rt.stores),"allowPan"in rt&&n(16,P=rt.allowPan),"allowZoom"in rt&&n(17,_=rt.allowZoom),"enablePan"in rt&&n(18,y=rt.enablePan),"enableZoom"in rt&&n(19,z=rt.enableZoom),"enableZoomControls"in rt&&n(20,O=rt.enableZoomControls),"enableZoomInput"in rt&&n(21,I=rt.enableZoomInput),"enablePanInput"in rt&&n(22,k=rt.enablePanInput),"enablePanLimit"in rt&&n(23,G=rt.enablePanLimit),"panLimitGutterScalar"in rt&&n(24,X=rt.panLimitGutterScalar),"zoomOptions"in rt&&n(25,q=rt.zoomOptions),"zoomAdjustStep"in rt&&n(26,D=rt.zoomAdjustStep),"zoomAdjustFactor"in rt&&n(27,lt=rt.zoomAdjustFactor),"zoomAdjustWheelFactor"in rt&&n(28,pt=rt.zoomAdjustWheelFactor),"elasticity"in rt&&n(29,Lt=rt.elasticity),"imageSelectionRectCentered"in rt&&n(30,et=rt.imageSelectionRectCentered),"imageSelectionRectScalar"in rt&&n(31,Y=rt.imageSelectionRectScalar),"zoomLevel"in rt&&n(32,j=rt.zoomLevel),"zoomControls"in rt&&n(11,ct=rt.zoomControls),"zoomMultiTouching"in rt&&n(12,U=rt.zoomMultiTouching)},t.$$.update=()=>{var rt,Dt;2752512&t.$$.dirty[0]&&n(35,r=_&&z&&I),327680&t.$$.dirty[0]&&n(34,i=P&&y),196608&t.$$.dirty[0]&&(P||_?(Ct(ot,p=z?R.zoom:void 0,p),Ct(mt,h=y?Ue(R.translation):dn()?h:pr(),h),Ee.set(p)):Te()),16384&t.$$.dirty[1]&&(o=T>=1),33570816&t.$$.dirty[0]|28672&t.$$.dirty[1]&&n(39,a=[(m||T<1)&&[f,bl(f)+"%",{sublabel:E.labelZoomFit}],...q.map(ee=>[ee,bl(ee)+"%"])].filter(Boolean).map(ee=>(ee[0]===1&&(ee[2]={sublabel:E.labelZoomActual}),ee)).sort((ee,de)=>{const te=ee[0]||f,on=de[0]||f;return te<on?-1:on<te?1:0})),4352&t.$$.dirty[1]&&n(37,s=Math.min(a.reduce((ee,[de])=>de<ee?de:ee,Number.MAX_SAFE_INTEGER),f)),256&t.$$.dirty[1]&&n(36,l=a.reduce((ee,[de])=>de>ee?de:ee,Number.MIN_SAFE_INTEGER)),2&t.$$.dirty[1]&&j!==null&&qe(j),30720&t.$$.dirty[1]&&n(41,d=p||(m||T<1?f:1)),1280&t.$$.dirty[1]&&n(38,(rt=a.map(([ee])=>ee),Dt=d,c=rt.findIndex(ee=>ee===Dt))),1024&t.$$.dirty[1]&&n(40,u=bl(d)+"%"),202522624&t.$$.dirty[0]|3040&t.$$.dirty[1]&&n(11,ct=(_||_)&&O?[["Button","zoom-out",{hideLabel:!0,label:E.labelZoomOut,icon:E.iconZoomOut,disabled:p===s,onclick:()=>Ne(ee=>Math.max(s,ee-D)),onhold:()=>Ne(ee=>Math.max(s,ee*(1-lt)))}],["Dropdown","zoom-level",{label:u,labelClass:"PinturaFixedWidthCharacters",options:a,selectedIndex:c,onchange:ee=>qe(ee.value)}],["Button","zoom-in",{hideLabel:!0,label:E.labelZoomIn,icon:E.iconZoomIn,disabled:p===l,onclick:()=>Ne(ee=>Math.min(l,ee+D)),onhold:()=>Ne(ee=>Math.min(l,ee*(1+lt)))}]]:[]),8192&t.$$.dirty[0]|16&t.$$.dirty[1]&&A&&at(r),8192&t.$$.dirty[0]|8&t.$$.dirty[1]&&A&&At(i),4202496&t.$$.dirty[0]|12&t.$$.dirty[1]&&A&&A.style.setProperty("--cursor",i&&k?Wt?"grabbing":"grab":"")},[ft,yt,It,Jt,pe,mt,ot,Q,Se,Mt,xt,ct,U,A,E,M,P,_,y,z,O,I,k,G,X,q,D,lt,pt,Lt,et,Y,j,Wt,i,r,l,s,c,a,u,d,p,f,m,T]}class Uk extends mn{constructor(e){super(),hn(this,e,Vk,null,rn,{root:13,locale:14,stores:15,allowPan:16,allowZoom:17,enablePan:18,enableZoom:19,enableZoomControls:20,enableZoomInput:21,enablePanInput:22,enablePanLimit:23,panLimitGutterScalar:24,zoomOptions:25,zoomAdjustStep:26,zoomAdjustFactor:27,zoomAdjustWheelFactor:28,elasticity:29,imageSelectionRectCentered:30,imageSelectionRectScalar:31,zoomLevel:32,zoomControls:11,zoomMultiTouching:12},null,[-1,-1,-1,-1])}}const Gk=t=>new Promise(e=>{const n=new FileReader;n.onload=()=>e(n.result),n.readAsArrayBuffer(t)}),Ym=(t,e=0,n=t.byteLength)=>{const r=[],i=e+n;for(;e<i;){const o=t.getUint32(e);if(o<0)break;const a=t.getUint32(e+4);if(r.push({type:a,size:o,offset:e,bodyOffset:e+8,bodySize:o-8}),o<8)break;e+=o}return r},Wk=(t,{limit:e=1024}={})=>{let n=0;if(n+=4,t.getUint32(n)!==1718909296)return 0;n+=4;const r=t.getUint32(n);return r===1836069938?((i,o,a)=>{let s=!1,l=-1;for(let h=o;h<a;h++)if(s||i.getUint32(h)!==1953653099||(s=!0,h+=4),s&&i.getUint8(h)==64){l=h;break}if(l<0)return 0;const c=i.getUint32(l-28),d=i.getUint32(l-20),u=i.getUint32(l-32),p=i.getUint32(l-16);return c===65536&&d===4294901760?90:u===4294901760&&p===4294901760?180:c===4294901760&&d===65536?270:0})(t,n,e):r===1903435808?(i=>{const o=Ym(i).find(c=>c.type===1836019574);if(!o)return 0;const a=Ym(i,o.bodyOffset,o.bodySize);a.filter(c=>c.type===1953653099).forEach(c=>{a.push(...Ym(i,c.bodyOffset,c.bodySize))});const s=[1836476516,1953196132],l=a.filter(c=>s.includes(c.type));for(const{type:c,bodyOffset:d}of l){const u=i.getUint8(d);let p=d+4;p+=c===1836476516?32:36,p+=u===1?12:0;const h=i.getInt32(p),f=i.getInt32(p+4);if(h===0&&f>0)return 90;if(h<0&&f===0)return 180;if(h===0&&f<0)return 270}return 0})(t):0},{window:nc}=GS;function xb(t){let e,n,r,i=t[42]&&Sb(t),o=t[39]&&Ib(t);return{c(){i&&i.c(),e=be(),o&&o.c(),n=Nr()},m(a,s){i&&i.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,n,s),r=!0},p(a,s){a[42]?i?(i.p(a,s),2048&s[1]&&L(i,1)):(i=Sb(a),i.c(),L(i,1),i.m(e.parentNode,e)):i&&(Be(),W(i,1,1,()=>{i=null}),ze()),a[39]?o?(o.p(a,s),256&s[1]&&L(o,1)):(o=Ib(a),o.c(),L(o,1),o.m(n.parentNode,n)):o&&(Be(),W(o,1,1,()=>{o=null}),ze())},i(a){r||(L(i),L(o),r=!0)},o(a){W(i),W(o),r=!1},d(a){i&&i.d(a),a&&nt(e),o&&o.d(a),a&&nt(n)}}}function Sb(t){let e,n,r,i,o,a;const s=[jk,Hk],l=[];function c(d,u){return d[40]?0:d[35]?1:-1}return~(r=c(t))&&(i=l[r]=s[r](t)),{c(){e=bt("div"),n=bt("p"),i&&i.c(),w(n,"style",t[73]),w(e,"class","PinturaStatus"),w(e,"style",o="opacity: "+t[55])},m(d,u){it(d,e,u),Rt(e,n),~r&&l[r].m(n,null),a=!0},p(d,u){let p=r;r=c(d),r===p?~r&&l[r].p(d,u):(i&&(Be(),W(l[p],1,1,()=>{l[p]=null}),ze()),~r?(i=l[r],i?i.p(d,u):(i=l[r]=s[r](d),i.c()),L(i,1),i.m(n,null)):i=null),(!a||2048&u[2])&&w(n,"style",d[73]),(!a||16777216&u[1]&&o!==(o="opacity: "+d[55]))&&w(e,"style",o)},i(d){a||(L(i),a=!0)},o(d){W(i),a=!1},d(d){d&&nt(e),~r&&l[r].d()}}}function Hk(t){let e,n,r,i;e=new mw({props:{text:t[35].text||"",onmeasure:t[214]}});let o=t[35].aside&&wb(t);return{c(){zt(e.$$.fragment),n=be(),o&&o.c(),r=Nr()},m(a,s){Ft(e,a,s),it(a,n,s),o&&o.m(a,s),it(a,r,s),i=!0},p(a,s){const l={};16&s[1]&&(l.text=a[35].text||""),e.$set(l),a[35].aside?o?(o.p(a,s),16&s[1]&&L(o,1)):(o=wb(a),o.c(),L(o,1),o.m(r.parentNode,r)):o&&(Be(),W(o,1,1,()=>{o=null}),ze())},i(a){i||(L(e.$$.fragment,a),L(o),i=!0)},o(a){W(e.$$.fragment,a),W(o),i=!1},d(a){Bt(e,a),a&&nt(n),o&&o.d(a),a&&nt(r)}}}function jk(t){let e,n,r,i;return e=new mw({props:{text:t[40],onmeasure:t[214]}}),r=new gw({props:{class:"PinturaStatusIcon",offset:t[83],opacity:t[84],$$slots:{default:[Xk]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment),n=be(),zt(r.$$.fragment)},m(o,a){Ft(e,o,a),it(o,n,a),Ft(r,o,a),i=!0},p(o,a){const s={};512&a[1]&&(s.text=o[40]),e.$set(s);const l={};2097152&a[2]&&(l.offset=o[83]),4194304&a[2]&&(l.opacity=o[84]),8&a[0]|536870912&a[18]&&(l.$$scope={dirty:a,ctx:o}),r.$set(l)},i(o){i||(L(e.$$.fragment,o),L(r.$$.fragment,o),i=!0)},o(o){W(e.$$.fragment,o),W(r.$$.fragment,o),i=!1},d(o){Bt(e,o),o&&nt(n),Bt(r,o)}}}function wb(t){let e,n;return e=new gw({props:{class:"PinturaStatusButton",offset:t[83],opacity:t[84],$$slots:{default:[qk]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};2097152&i[2]&&(o.offset=r[83]),4194304&i[2]&&(o.opacity=r[84]),16&i[1]|536870912&i[18]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Tb(t){let e,n;return e=new fw({props:{progress:t[35].progressIndicator.progress}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16&i[1]&&(o.progress=r[35].progressIndicator.progress),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Eb(t){let e,n;const r=[t[35].closeButton,{hideLabel:!0}];let i={};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new Rl({props:i}),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=16&a[1]?Vi(r,[to(o[35].closeButton),r[1]]):{};e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){Bt(e,o)}}}function qk(t){let e,n,r,i=t[35].progressIndicator.visible&&Tb(t),o=t[35].closeButton&&t[35].text&&Eb(t);return{c(){i&&i.c(),e=be(),o&&o.c(),n=Nr()},m(a,s){i&&i.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,n,s),r=!0},p(a,s){a[35].progressIndicator.visible?i?(i.p(a,s),16&s[1]&&L(i,1)):(i=Tb(a),i.c(),L(i,1),i.m(e.parentNode,e)):i&&(Be(),W(i,1,1,()=>{i=null}),ze()),a[35].closeButton&&a[35].text?o?(o.p(a,s),16&s[1]&&L(o,1)):(o=Eb(a),o.c(),L(o,1),o.m(n.parentNode,n)):o&&(Be(),W(o,1,1,()=>{o=null}),ze())},i(a){r||(L(i),L(o),r=!0)},o(a){W(i),W(o),r=!1},d(a){i&&i.d(a),a&&nt(e),o&&o.d(a),a&&nt(n)}}}function Yk(t){let e,n=t[3].iconSupportError+"";return{c(){e=zi("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){8&i[0]&&n!==(n=r[3].iconSupportError+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function Xk(t){let e,n;return e=new ea({props:{$$slots:{default:[Yk]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};8&i[0]|536870912&i[18]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Ib(t){let e,n,r,i,o,a,s,l,c,d,u,p,h,f,m=t[10]&&_b(t),$=t[46]&&t[45]&&Cb(t);const b=[t6,Jk],S=[];function v(E,M){return E[46]?0:1}function T(E){t[427](E)}function C(E){t[428](E)}function R(E){t[429](E)}r=v(t),i=S[r]=b[r](t),a=new NR({props:{isAnimated:t[54],isTransparent:t[20],pixelRatio:t[58],textPixelRatio:t[6],backgroundColor:t[57],maskRect:t[59],maskOpacity:t[74]?t[74].maskOpacity:1,maskMarkupOpacity:t[7],maskFrameOpacity:t[5],clipAnnotationsToImage:t[86],images:t[56],interfaceImages:t[87],loadImageData:t[28],enableGrid:t[11],gridSize:t[88],gridColors:[t[89],t[90]],gridOpacity:t[91],selectionColor:t[92],willRequest:t[82]||t[93],willRender:t[424],didRender:t[425]}});let A={root:t[2],locale:t[3],stores:t[200],allowPan:t[95],enablePan:t[17],enablePanLimit:t[21],panLimitGutterScalar:t[22],enablePanInput:t[96],allowZoom:t[97],enableZoom:t[18],enableZoomInput:t[19]!==void 0?t[19]:t[98],enableZoomControls:t[99],zoomOptions:t[13]||t[23],zoomAdjustStep:t[14]||t[24],zoomAdjustFactor:t[15]||t[25],zoomAdjustWheelFactor:t[16]||t[26],imageSelectionRectCentered:t[100],imageSelectionRectScalar:t[101],elasticity:R0*t[8]};return t[0]!==void 0&&(A.zoomLevel=t[0]),t[33]!==void 0&&(A.zoomControls=t[33]),t[34]!==void 0&&(A.zoomMultiTouching=t[34]),d=new Uk({props:A}),zn.push(()=>Go(d,"zoomLevel",T)),zn.push(()=>Go(d,"zoomControls",C)),zn.push(()=>Go(d,"zoomMultiTouching",R)),{c(){m&&m.c(),e=be(),$&&$.c(),n=be(),i.c(),o=be(),zt(a.$$.fragment),s=be(),l=bt("div"),c=be(),zt(d.$$.fragment),w(l,"class","PinturaRootPortal")},m(E,M){m&&m.m(E,M),it(E,e,M),$&&$.m(E,M),it(E,n,M),S[r].m(E,M),it(E,o,M),Ft(a,E,M),it(E,s,M),it(E,l,M),t[426](l),it(E,c,M),Ft(d,E,M),f=!0},p(E,M){E[10]?m?(m.p(E,M),1024&M[0]&&L(m,1)):(m=_b(E),m.c(),L(m,1),m.m(e.parentNode,e)):m&&(Be(),W(m,1,1,()=>{m=null}),ze()),E[46]&&E[45]?$?($.p(E,M),49152&M[1]&&L($,1)):($=Cb(E),$.c(),L($,1),$.m(n.parentNode,n)):$&&(Be(),W($,1,1,()=>{$=null}),ze());let P=r;r=v(E),r===P?S[r].p(E,M):(Be(),W(S[P],1,1,()=>{S[P]=null}),ze(),i=S[r],i?i.p(E,M):(i=S[r]=b[r](E),i.c()),L(i,1),i.m(o.parentNode,o));const _={};8388608&M[1]&&(_.isAnimated=E[54]),1048576&M[0]&&(_.isTransparent=E[20]),134217728&M[1]&&(_.pixelRatio=E[58]),64&M[0]&&(_.textPixelRatio=E[6]),67108864&M[1]&&(_.backgroundColor=E[57]),268435456&M[1]&&(_.maskRect=E[59]),4096&M[2]&&(_.maskOpacity=E[74]?E[74].maskOpacity:1),128&M[0]&&(_.maskMarkupOpacity=E[7]),32&M[0]&&(_.maskFrameOpacity=E[5]),16777216&M[2]&&(_.clipAnnotationsToImage=E[86]),33554432&M[1]&&(_.images=E[56]),33554432&M[2]&&(_.interfaceImages=E[87]),268435456&M[0]&&(_.loadImageData=E[28]),2048&M[0]&&(_.enableGrid=E[11]),67108864&M[2]&&(_.gridSize=E[88]),402653184&M[2]&&(_.gridColors=[E[89],E[90]]),536870912&M[2]&&(_.gridOpacity=E[91]),1073741824&M[2]&&(_.selectionColor=E[92]),1048576&M[2]|1&M[3]&&(_.willRequest=E[82]||E[93]),512&M[0]|541982784&M[1]|2&M[3]&&(_.willRender=E[424]),124&M[2]&&(_.didRender=E[425]),a.$set(_);const y={};4&M[0]&&(y.root=E[2]),8&M[0]&&(y.locale=E[3]),4&M[3]&&(y.allowPan=E[95]),131072&M[0]&&(y.enablePan=E[17]),2097152&M[0]&&(y.enablePanLimit=E[21]),4194304&M[0]&&(y.panLimitGutterScalar=E[22]),8&M[3]&&(y.enablePanInput=E[96]),16&M[3]&&(y.allowZoom=E[97]),262144&M[0]&&(y.enableZoom=E[18]),524288&M[0]|32&M[3]&&(y.enableZoomInput=E[19]!==void 0?E[19]:E[98]),64&M[3]&&(y.enableZoomControls=E[99]),8396800&M[0]&&(y.zoomOptions=E[13]||E[23]),16793600&M[0]&&(y.zoomAdjustStep=E[14]||E[24]),33587200&M[0]&&(y.zoomAdjustFactor=E[15]||E[25]),67174400&M[0]&&(y.zoomAdjustWheelFactor=E[16]||E[26]),128&M[3]&&(y.imageSelectionRectCentered=E[100]),256&M[3]&&(y.imageSelectionRectScalar=E[101]),256&M[0]&&(y.elasticity=R0*E[8]),!u&&1&M[0]&&(u=!0,y.zoomLevel=E[0],ta(()=>u=!1)),!p&&4&M[1]&&(p=!0,y.zoomControls=E[33],ta(()=>p=!1)),!h&&8&M[1]&&(h=!0,y.zoomMultiTouching=E[34],ta(()=>h=!1)),d.$set(y)},i(E){f||(L(m),L($),L(i),L(a.$$.fragment,E),L(d.$$.fragment,E),f=!0)},o(E){W(m),W($),W(i),W(a.$$.fragment,E),W(d.$$.fragment,E),f=!1},d(E){m&&m.d(E),E&&nt(e),$&&$.d(E),E&&nt(n),S[r].d(E),E&&nt(o),Bt(a,E),E&&nt(s),E&&nt(l),t[426](null),E&&nt(c),Bt(d,E)}}}function _b(t){let e,n,r,i,o;return n=new na({props:{items:t[70]}}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"class","PinturaNav PinturaNavTools")},m(a,s){it(a,e,s),Ft(n,e,null),r=!0,i||(o=[kt(e,"measure",t[411]),Jn(Ui.call(null,e))],i=!0)},p(a,s){const l={};256&s[2]&&(l.items=a[70]),n.$set(l)},i(a){r||(L(n.$$.fragment,a),r=!0)},o(a){W(n.$$.fragment,a),r=!1},d(a){a&&nt(e),Bt(n),i=!1,tr(o)}}}function Cb(t){let e,n,r;return n=new cs({props:{elasticity:t[8]*M0,scrollDirection:t[76]?"y":"x",$$slots:{default:[Qk]},$$scope:{ctx:t}}}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"class","PinturaNav PinturaNavMain")},m(i,o){it(i,e,o),Ft(n,e,null),r=!0},p(i,o){const a={};256&o[0]&&(a.elasticity=i[8]*M0),16384&o[2]&&(a.scrollDirection=i[76]?"y":"x"),8192&o[1]|393216&o[2]|536870912&o[18]&&(a.$$scope={dirty:o,ctx:i}),n.$set(a)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Bt(n)}}}function Zk(t){let e,n=t[586].icon+"";return{c(){e=zi("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){268435456&i[18]&&n!==(n=r[586].icon+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function Kk(t){let e,n,r,i,o,a=t[586].label+"";return e=new ea({props:{$$slots:{default:[Zk]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment),n=be(),r=bt("span"),i=vr(a)},m(s,l){Ft(e,s,l),it(s,n,l),it(s,r,l),Rt(r,i),o=!0},p(s,l){const c={};805306368&l[18]&&(c.$$scope={dirty:l,ctx:s}),e.$set(c),(!o||268435456&l[18])&&a!==(a=s[586].label+"")&&Vr(i,a)},i(s){o||(L(e.$$.fragment,s),o=!0)},o(s){W(e.$$.fragment,s),o=!1},d(s){Bt(e,s),s&&nt(n),s&&nt(r)}}}function Qk(t){let e,n;const r=[t[80],{tabs:t[79]}];let i={$$slots:{default:[Kk,({tab:o})=>({586:o}),({tab:o})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o?268435456:0]]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new Lh({props:i}),e.$on("select",t[412]),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=393216&a[2]?Vi(r,[262144&a[2]&&to(o[80]),131072&a[2]&&{tabs:o[79]}]):{};805306368&a[18]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){Bt(e,o)}}}function Jk(t){let e,n,r;function i(a){t[420](a)}let o={class:"PinturaMain",content:{...t[47].find(t[419]),props:t[27][t[44]]},locale:t[3],stores:t[200]};return t[1][t[44]]!==void 0&&(o.component=t[1][t[44]]),e=new dw({props:o}),zn.push(()=>Go(e,"component",i)),e.$on("measure",t[226]),e.$on("show",t[421]),e.$on("hide",t[422]),e.$on("fade",t[423]),{c(){zt(e.$$.fragment)},m(a,s){Ft(e,a,s),r=!0},p(a,s){const l={};134217728&s[0]|73728&s[1]&&(l.content={...a[47].find(a[419]),props:a[27][a[44]]}),8&s[0]&&(l.locale=a[3]),!n&&2&s[0]|8192&s[1]&&(n=!0,l.component=a[1][a[44]],ta(()=>n=!1)),e.$set(l)},i(a){r||(L(e.$$.fragment,a),r=!0)},o(a){W(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function t6(t){let e,n;const r=[{class:"PinturaMain"},{visible:t[63]},t[80],{panels:t[78]}];let i={$$slots:{default:[e6,({panel:o,panelIsActive:a})=>({584:o,585:a}),({panel:o,panelIsActive:a})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(o?67108864:0)|(a?134217728:0)]]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new Oh({props:i}),e.$on("measure",t[418]),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=327682&a[2]?Vi(r,[r[0],2&a[2]&&{visible:o[63]},262144&a[2]&&to(o[80]),65536&a[2]&&{panels:o[78]}]):{};134217738&a[0]|65664&a[1]|2&a[2]|738197504&a[18]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){Bt(e,o)}}}function e6(t){let e,n,r;function i(...s){return t[413](t[584],...s)}function o(s){t[414](s,t[584])}let a={content:{...t[47].find(i),props:t[27][t[584]]},locale:t[3],isActive:t[585],stores:t[200]};return t[1][t[584]]!==void 0&&(a.component=t[1][t[584]]),e=new dw({props:a}),zn.push(()=>Go(e,"component",o)),e.$on("measure",t[226]),e.$on("show",function(){return t[415](t[584])}),e.$on("hide",function(){return t[416](t[584])}),e.$on("fade",function(...s){return t[417](t[584],...s)}),{c(){zt(e.$$.fragment)},m(s,l){Ft(e,s,l),r=!0},p(s,l){t=s;const c={};134217728&l[0]|65536&l[1]|67108864&l[18]&&(c.content={...t[47].find(i),props:t[27][t[584]]}),8&l[0]&&(c.locale=t[3]),134217728&l[18]&&(c.isActive=t[585]),!n&&2&l[0]|67108864&l[18]&&(n=!0,c.component=t[1][t[584]],ta(()=>n=!1)),e.$set(c)},i(s){r||(L(e.$$.fragment,s),r=!0)},o(s){W(e.$$.fragment,s),r=!1},d(s){Bt(e,s)}}}function Rb(t){let e,n;return{c(){e=bt("span"),w(e,"class","PinturaEditorOverlay"),w(e,"style",n="opacity:"+t[102])},m(r,i){it(r,e,i)},p(r,i){512&i[3]&&n!==(n="opacity:"+r[102])&&w(e,"style",n)},d(r){r&&nt(e)}}}function Mb(t){let e,n;const r=[{layout:"row"},{parentRect:t[51]},t[61]];let i={$$slots:{default:[n6]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new Iw({props:i}),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=1074790400&a[1]?Vi(r,[r[0],1048576&a[1]&&{parentRect:o[51]},1073741824&a[1]&&to(o[61])]):{};1073741824&a[1]|1&a[2]|536870912&a[18]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){Bt(e,o)}}}function n6(t){let e,n,r;return{c(){e=bt("input"),e.value=n=t[61].text,w(e,"placeholder",r=t[61].placeholder),w(e,"type","text"),w(e,"spellcheck","false"),w(e,"autocorrect","off"),w(e,"autocapitalize","off")},m(i,o){it(i,e,o),t[430](e)},p(i,o){1073741824&o[1]&&n!==(n=i[61].text)&&e.value!==n&&(e.value=n),1073741824&o[1]&&r!==(r=i[61].placeholder)&&w(e,"placeholder",r)},d(i){i&&nt(e),t[430](null)}}}function r6(t){let e,n,r,i,o,a;nd(t[410]);let s=t[41]&&xb(t),l=t[102]>0&&Rb(t),c=t[61]&&Mb(t);return{c(){e=bt("div"),s&&s.c(),n=be(),l&&l.c(),r=be(),c&&c.c(),w(e,"id",t[4]),w(e,"class",t[77]),w(e,"data-env",t[75]),w(e,"dir",t[12])},m(d,u){it(d,e,u),s&&s.m(e,null),Rt(e,n),l&&l.m(e,null),Rt(e,r),c&&c.m(e,null),t[431](e),i=!0,o||(a=[kt(nc,"keydown",t[217]),kt(nc,"keyup",t[218]),kt(nc,"blur",t[219]),kt(nc,"paste",t[223]),kt(nc,"resize",t[410]),kt(e,"ping",function(){Qn(t[69])&&t[69].apply(this,arguments)}),kt(e,"contextmenu",t[220]),kt(e,"touchstart",t[215],{passive:!1}),kt(e,"touchmove",function(){Qn(t[72])&&t[72].apply(this,arguments)}),kt(e,"pointermove",function(){Qn(t[71])&&t[71].apply(this,arguments)}),kt(e,"transitionend",t[205]),kt(e,"dropfiles",t[221]),kt(e,"measure",t[432]),kt(e,"click",function(){Qn(t[43]?t[222]:ve)&&(t[43]?t[222]:ve).apply(this,arguments)}),Jn(Ui.call(null,e,{observeViewRect:!0,isMeasureRoot:!0})),Jn(DR.call(null,e)),Jn(cw.call(null,e))],o=!0)},p(d,u){(t=d)[41]?s?(s.p(t,u),1024&u[1]&&L(s,1)):(s=xb(t),s.c(),L(s,1),s.m(e,n)):s&&(Be(),W(s,1,1,()=>{s=null}),ze()),t[102]>0?l?l.p(t,u):(l=Rb(t),l.c(),l.m(e,r)):l&&(l.d(1),l=null),t[61]?c?(c.p(t,u),1073741824&u[1]&&L(c,1)):(c=Mb(t),c.c(),L(c,1),c.m(e,null)):c&&(Be(),W(c,1,1,()=>{c=null}),ze()),(!i||16&u[0])&&w(e,"id",t[4]),(!i||32768&u[2])&&w(e,"class",t[77]),(!i||8192&u[2])&&w(e,"data-env",t[75]),(!i||4096&u[0])&&w(e,"dir",t[12])},i(d){i||(L(s),L(c),i=!0)},o(d){W(s),W(c),i=!1},d(d){d&&nt(e),s&&s.d(),l&&l.d(),c&&c.d(),t[431](null),o=!1,tr(a)}}}const R0=1,M0=10;function i6(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,b,S,v,T,C,R,A,E,M,P,_,y,z,O,I,k,G,X,q,D,lt,pt,Lt,et,Y,j,ct,U,ft,yt,It,Jt,pe,mt,ot,Q,Se,Mt,xt,Wt,Ht,Ae,ke,st,St,Ce,dn,Te,Ut,Ee,Ne,qe,En,Et,Tt,je,Le,yn,en,Ke,Cn,J,he,K,Gt,ce,we,ge,Nt,Pe,Qt,Ge,Ye,Qe,fn,at,At,jt,rt,Dt,ee,de,te,on,Xt,ue,wn,Zn,_r,Nn,ne,Ie,mr,fr,Ur,$r,Er,ir,Jr,hi,Cr,Gr,mi,Wr,Mi,ti,or,On,ya,Hr,xo,Ao,ba,Wi,xr,ar,So,ra,Hi,eo,ia,Lo,Ua,jo,no,ji,va,Oo,Dr,wo,jr,ki,qi,Ii,In,Do,ei,Ir,ni,To,oi,qo,qr,Kr,Yo,Eo,Io,ro,Qr,io,ai,Pi,an,H,me,Tn,sn,se,_e,Bn,Yn,Sr,lr,Wn,_o,Fo,Bo,Zs,Co,li,Ro,B,Oe,He,kn,Vn,Un,nn,gn,Dn,Gn,Ln,Yr,wr,Ar,Rn,Ai,oa,Cs,Ga,Pl,Al,Ks,Qs,Js=Je,ds=Je;N(t,LR,g=>n(398,sn=g)),t.$$.on_destroy.push(()=>Js()),t.$$.on_destroy.push(()=>ds());const Wa=Gs(),Li=ls();let oo,ao,{class:Yi}=e,{layout:Kn}=e,{stores:aa}=e,{locale:cr}=e,{id:zo}=e,{util:Rs}=e,{utils:Ms}=e,{animations:ks="auto"}=e,{disabled:Ha=!1}=e,{status:x}=e,{previewUpscale:Z=!1}=e,{previewPad:V=!1}=e,{previewMaskOpacity:ht=.95}=e,{previewImageDataMaxSize:$t}=e,{previewImageTextPixelRatio:Yt}=e,{markupMaskOpacity:Ot=1}=e,{zoomMaskOpacity:ie=.85}=e,{elasticityMultiplier:qt=10}=e,{willRevert:Zt=()=>Promise.resolve(!0)}=e,{willProcessImage:le=()=>Promise.resolve(!0)}=e,{willRenderCanvas:oe=ur}=e,{willRenderToolbar:We=ur}=e,{willSetHistoryInitialState:fe=ur}=e,{enableButtonExport:Me=!0}=e,{enableButtonRevert:Re=!0}=e,{enableNavigateHistory:re=!0}=e,{enableToolbar:De=!0}=e,{enableUtils:bn=!0}=e,{enableButtonClose:Hn=!1}=e,{enableDropImage:vn=!1}=e,{enablePasteImage:xn=!1}=e,{enableBrowseImage:tn=!1}=e,{enableTransparencyGrid:yr=!1}=e,{layoutDirectionPreference:Xn="auto"}=e,{layoutHorizontalUtilsPreference:Xi="left"}=e,{layoutVerticalUtilsPreference:Oi="bottom"}=e,{layoutVerticalToolbarPreference:Mr="top"}=e,{layoutVerticalControlGroupsPreference:Fr="bottom"}=e,{layoutVerticalControlTabsPreference:Di="bottom"}=e,{textDirection:Mo}=e,{markupEditorZoomLevel:ja=null}=e,{markupEditorZoomLevels:Ll}=e,{markupEditorZoomAdjustStep:Ol}=e,{markupEditorZoomAdjustFactor:us}=e,{markupEditorZoomAdjustWheelFactor:xa}=e,{markupEditorInteractionMode:Xo=!1}=e,{muteAudio:ps=!0}=e,{willSetMediaInitialTimeOffset:qa=(g,tt)=>g*Nk(tt[0])}=e,{enablePan:Dl=!0}=e,{enableZoom:Sa=!0}=e,{enableZoomControls:hs=!0}=e,{enableZoomInput:tl}=e,{enablePanInput:el}=e,{enableCanvasAlpha:Fl=!1}=e,{enablePanLimit:ms}=e,{panLimitGutterScalar:Ps}=e,{zoomPresetOptions:fi=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:Ya=.25}=e,{zoomAdjustFactor:rg=.1}=e,{zoomAdjustWheelFactor:ig=1}=e,{zoomLevel:Bl=null}=e,{imagePreviewSrc:Hh}=e,{imageOrienter:yu={read:()=>1,apply:g=>g}}=e,{pluginComponents:vc}=e,{pluginOptions:zl={}}=e;const r4=Wa.sub,sa={};let{root:_i}=e;const jh=()=>{te.setAttribute("data-redraw","true"),Sc.set({})},qh=ye(!0);N(t,qh,g=>n(464,mi=g));const cd=ye(void 0);N(t,cd,g=>n(406,Ro=g));const nl=ye(0);N(t,nl,g=>n(407,B=g));const og=ye(0),ag=ye(!1),bu=g=>{ag.set(g.type==="play"),Wa.pub(g.type)};let sg,Yh,lg,Xh,Zh=!1;const Kh=()=>{if(!i||!xc())return;Xh=d,Ct(cd,Ro=void 0,Ro);const g=te;Zh=!1;const tt=1/24,vt=Vl();(Math.abs(l*vt-B*vt)<=tt||vt-vt*B<=tt)&&Ct(nl,B=s,B),xu(Vl()*B),g.play().catch(()=>{});const _t=()=>{xc()||(lg=requestAnimationFrame(_t),Ct(nl,B=vu()/Vl(),B),Xh>=0&&B>=l&&(Ct(nl,B=l,B),Nl()),d>-1&&(Zh=!0),Zh&&d===-1&&u>0&&(Ct(nl,B=a[u][0],B),xu(B*Vl())),jh())};_t()},Nl=()=>{i&&!xc()&&(Ct(cd,Ro=void 0,Ro),Xh=void 0,te.pause(),cancelAnimationFrame(lg),jh())},xc=()=>te&&te.paused,Qh=()=>{if(i)return xc()?Kh():Nl()},Jh=()=>{i&&(te.muted=!0)},t1=()=>{i&&(te.muted=!1)},cg=()=>{i&&Ct(dd,li=!li,li)},dd=ye(ps);N(t,dd,g=>n(405,li=g));const Vl=()=>{if(i)return te.duration},vu=()=>{if(i)return te.currentTime},xu=g=>{i&&(te.currentTime=g,og.set(g))};ca("previewcontrols",{play:Kh,pause:Nl,togglePlayPause:Qh,mute:Jh,unmute:t1,toggleMute:cg,setCurrentTime:xu,getCurrentTime:vu,getDuration:Vl,currentTime:og,frameOffset:nl,framePeekOffset:cd,isPlaying:ag,isMuted:dd});const Sc=ye({});N(t,Sc,g=>n(53,ti=g)),ca("redrawTrigger",Sc);const Su=ye(qt);N(t,Su,g=>n(480,Zs=g)),ca("elasticityMultiplier",Su);let ud=[];const e1=un();N(t,e1,g=>n(102,Qs=g));const dg=Bf()||1024,ug=ii(dg,dg),pg=QS(),i4=g=>Promise.resolve(Bo&&Bo(g,{resourceType:"image"})).then(tt=>{if(tt===!1)return;const{headers:vt,credentials:_t}=tt||{};return fetch(g,{headers:vt,credentials:_t}).then(gt=>{if(gt.status!==200)throw`${gt.status} (${gt.statusText})`;return gt.blob()}).then(gt=>yb(gt,yu,pg)).then(gt=>bb(gt,f))});let{imageSourceToImageData:n1=g=>Ve(g)?i4(g):td(g)?new Promise(tt=>tt(hu(g))):yf(g)||fu(g)?yb(g,yu,pg).then(tt=>bb(tt,f)):void 0}=e;const r1=(()=>{let g,tt;const vt=gb.reduce((_t,gt)=>(_t[gt]=function(wt,ae,Xe){let Ze=[];return{set:ae,update:Xe,publish:$e=>{Ze.forEach(jn=>jn($e))},subscribe:$e=>(Ze.push($e),wt($e),()=>{Ze=Ze.filter(jn=>jn!==$e)})}}(wt=>{if(!tt)return wt();tt.stores[gt].subscribe(wt)()},wt=>{tt&&tt.stores[gt].set(wt)},wt=>{tt&&tt.stores[gt].update(wt)}),_t),{});return{update:_t=>{if(tt=_t,g&&(g.forEach(gt=>gt()),g=void 0),!_t)return vt.file.publish(void 0),void vt.loadState.publish(void 0);g=gb.map(gt=>_t.stores[gt].subscribe(wt=>{vt[gt].publish(wt)}))},stores:vt,destroy:()=>{g&&g.forEach(_t=>_t())}}})(),{file:i1,size:Ul,duration:o1,trim:a1,volume:hg,minDuration:o4,maxDuration:s1,loadState:wu,processState:l1,cropAspectRatio:Tu,cropLimitToImage:c1,crop:Xa,cropMinSize:a4,cropMaxSize:s4,cropRange:l4,cropOrigin:c4,cropRectAspectRatio:d4,rotation:wc,rotationRange:u4,targetSize:p4,flipX:Eu,flipY:Iu,backgroundColor:_u,backgroundImage:mg,colorMatrix:fg,convolutionMatrix:gg,gamma:$g,vignette:yg,noise:bg,decoration:d1,annotation:u1,manipulation:p1,redaction:h1,frame:Gl,selection:m1,state:Cu}=r1.stores;N(t,i1,g=>n(382,ji=g)),N(t,Ul,g=>n(355,ue=g)),N(t,o1,g=>n(408,Oe=g)),N(t,a1,g=>n(403,Fo=g)),N(t,hg,g=>n(404,Co=g)),N(t,s1,g=>n(409,He=g)),N(t,wu,g=>n(374,ar=g)),N(t,l1,g=>n(373,xr=g)),N(t,Tu,g=>n(477,_e=g)),N(t,c1,g=>n(86,nn=g)),N(t,Xa,g=>n(393,Kr=g)),N(t,wc,g=>n(358,_r=g)),N(t,Eu,g=>n(357,Zn=g)),N(t,Iu,g=>n(356,wn=g)),N(t,_u,g=>n(364,hi=g)),N(t,d1,g=>n(49,Xt=g)),N(t,u1,g=>n(50,Nn=g)),N(t,p1,g=>n(361,Er=g)),N(t,h1,g=>n(362,ir=g)),N(t,Gl,g=>n(48,on=g)),N(t,m1,g=>n(60,lr=g)),N(t,Cu,g=>n(466,Dr=g));const vg=(g,tt,vt=0)=>new Promise((_t,gt)=>{if(ld(g))return void(ws()?(async Ze=>{const $e=await Gk(Ze),jn=new DataView($e);return Wk(jn)})(g):Promise.resolve()).then(Ze=>{const $e=document.createElement("video");$e.onerror=()=>console.error($e.error),$e.playsInline=!0,$e.preload="auto",$e.onloadeddata=()=>{$e.onloadeddata=void 0,$e.dataset.rotation=Ze||"0",tw($e).then(()=>{const jn=qa($e.duration,Fo||[[0,1]]);jn>0?($e.onseeked=()=>{$e.onseeked=void 0,_t($e)},$e.currentTime=jn):($e.currentTime=jn,_t($e))})},$e.src=URL.createObjectURL(g),$e.load()});let wt,ae=!1;tt.cancel=()=>ae=!0;const Xe=Date.now();n1(g).then(Ze=>{const $e=Date.now()-Xe;clearTimeout(wt),wt=setTimeout(()=>{ae||_t(Ze)},Math.max(0,vt-$e))}).catch(gt)}),{images:xg,shapePreprocessor:Sg,imageScrambler:wg,imageRedactionRendering:Tg,willRequest:Eg,willRequestResource:Ig}=aa;let pd;N(t,xg,g=>n(402,_o=g)),N(t,Sg,g=>n(401,Wn=g)),N(t,wg,g=>n(365,Cr=g)),N(t,Tg,g=>n(363,Jr=g)),N(t,Eg,g=>n(82,Bo=g)),N(t,Ig,g=>n(93,Ar=g));const h4=Fn(mg,(g,tt)=>{if(!g)return tt(void 0);pd&&(pd.cancel(),pd=void 0),pd={cancel:ve},vg(g,pd).then(tt).catch(vt=>{})}),m4=Cu.subscribe(g=>Wa.pub("update",g)),f4=ye();ca("ui",ye({})),ca("selection",m1);const f1=ye(!0);N(t,f1,g=>n(95,Ai=g));const g1=ye(!0);N(t,g1,g=>n(97,Cs=g));const $1=ye(!0);N(t,$1,g=>n(400,Sr=g));const Ru=ye(!0);N(t,Ru,g=>n(478,Bn=g));const y1=ye(!0);N(t,y1,g=>n(98,Ga=g));const b1=ye();N(t,b1,g=>n(99,Pl=g));const Mu=ye();N(t,Mu,g=>n(479,Yn=g));const v1=Fn([Mu,Ru],()=>Yn!==void 0?Yn:Bn);N(t,v1,g=>n(96,oa=g));const hd=ye([0,0,0]);N(t,hd,g=>n(57,Ii=g));const ku=ye([1,1,1]);N(t,ku,g=>n(462,$r=g));const md=un([1,1,1]);N(t,md,g=>n(461,Ur=g));const x1=ye();N(t,x1,g=>n(92,wr=g));const _g=ye(),S1=ye();N(t,S1,g=>n(52,Wr=g));const Tc=ye();N(t,Tc,g=>n(359,Ie=g));const Ec=ye(gl());N(t,Ec,g=>n(81,wo=g));const w1=ye(0);N(t,w1,g=>n(399,se=g));const fd=ye(gl());N(t,fd,g=>n(85,Un=g));const Wl=ye();N(t,Wl,g=>n(459,de=g));const Pu=$b("(pointer: fine)",g=>g?"pointer-fine":"pointer-coarse");N(t,Pu,g=>n(380,jo=g));const Au=$b("(hover: hover)",g=>g?"pointer-hover":"pointer-no-hover");N(t,Au,g=>n(379,Ua=g));const Cg=ye(!1),gd=ye(!1);N(t,gd,g=>n(360,fr=g));const T1=Vc(void 0,g=>{const tt=un(0),vt=[gd.subscribe(_t=>{tt.set(_t?1:0)}),tt.subscribe(g)];return()=>vt.forEach(_t=>_t())});N(t,T1,g=>n(460,mr=g));const Lu=ye();N(t,Lu,g=>n(465,eo=g));const Ou=ye();let E1;N(t,Ou,g=>n(54,On=g)),ca("isAnimated",Ou);const Du=ye(Z);N(t,Du,g=>n(383,va=g));const Hl=ye(!1);N(t,Hl,g=>n(471,ro=g)),ca("imageIsStatic",Hl);const $d=ye();N(t,$d,g=>n(472,Qr=g));const I1=ye();N(t,I1,g=>n(469,Eo=g));const Rg=Vc(void 0,g=>{const tt=ye(void 0),vt=[Xa.subscribe(()=>{if(!Kr)return;if(ro)return tt.set(Pn(Kr));const _t=E2(Kr,Eo,5*qt);tt.set(_t)}),tt.subscribe(g)];return()=>vt.forEach(_t=>_t())}),wa=ye();N(t,wa,g=>n(468,qr=g));const Fu=ye();N(t,Fu,g=>n(470,Io=g));const _1=ye(void 0);N(t,_1,g=>n(475,H=g));const Mg=ye(pr());N(t,Mg,g=>n(476,me=g));const kg=(g,tt)=>{if(!tt||!g)return{top:0,right:0,bottom:0,left:0};const vt=ES(tt,g,m),_t=TS(vt,g);return{top:Math.abs(_t.top),right:Math.abs(_t.right),bottom:Math.abs(_t.bottom),left:Math.abs(_t.left)}},Pg=ye({}),C1=Fn([Wl,Ec,fd,Pg],([g,tt,vt,_t],gt)=>{if(!g)return gt(void 0);let wt=0;O.length!==1||p||Mr==="bottom"||(wt=vt.y+vt.height),gt(Br(g.x+tt.x,g.y+tt.y+wt,g.width,g.height))});let yd={left:0,right:0,top:0,bottom:0};const Bu=ye(!1),Ic=Fn([Bu,Gl,C1,gd],([g,tt,vt,_t],gt)=>{if(!vt)return gt({left:0,right:0,top:0,bottom:0});if(!g)return;const wt=Math.min(vt.width,vt.height),ae=kg({width:wt,height:wt},tt);ln(yd.top,4)===ln(ae.top,4)&&ln(yd.bottom,4)===ln(ae.bottom,4)&&ln(yd.right,4)===ln(ae.right,4)&&ln(yd.left,4)===ln(ae.left,4)||(yd=ae,gt(ae))});N(t,Ic,g=>n(391,To=g));const _c=Fn([Bu,Ic],([g,tt],vt)=>{if(!g)return vt(!1);vt(Object.values(tt).some(_t=>_t>0))});N(t,_c,g=>n(392,oi=g));const g4=Fn([Bu,Wl,_c,Ic],([g,tt,vt,_t],gt)=>{if(tt)return g&&vt?void gt(Br(tt.x+_t.left,tt.y+_t.top,tt.width-_t.left-_t.right,tt.height-_t.top-_t.bottom)):gt({...tt})}),fs=Fn([C1,_c,Ic],([g,tt,vt],_t)=>g?tt?void _t(Br(g.x+vt.left,g.y+vt.top,g.width-vt.left-vt.right,g.height-vt.top-vt.bottom)):_t(g):_t(void 0));N(t,fs,g=>n(51,ne=g));const $4=Fn([Hl,Ul,wc],([g,tt,vt],_t)=>{if(!g||!tt)return _t(void 0);const gt=fo(tt);_t(Fi(gt,vt))}),R1=Fn([$4],([g],tt)=>{if(!g)return tt(void 0);const vt=yi(g);tt(ru(vt))});N(t,R1,g=>n(394,Yo=g));const As=Fn([fs,Xa,R1,Du],([g,tt,vt,_t],gt)=>{if(!g||!tt||!(!Qr&&!Eo))return;const{width:wt,height:ae}=vt||tt,Xe=Math.min(g.width/wt,g.height/ae);gt(_t?Xe:Math.min(1,Xe))});N(t,As,g=>n(395,ai=g)),ca("imageStaticVisualCorners",Fn([Hl,Ul,wc,fs,Wl,As],([g,tt,vt,_t,gt,wt],ae)=>{if(!(g&&_t&&gt&&tt))return ae(void 0);const Xe=fo(tt),Ze=ru(Ki(Xe,wt)),$e=Op(_t,Ze);Ze.x=$e.x,Ze.y=$e.y,ae(Fi(Ze,vt))}));const Cc=ye(void 0);N(t,Cc,g=>n(397,Tn=g));const Ag=Fn([Xa,fs],([g,tt])=>{if(tt&&g)return Math.min(tt.width/g.width,tt.height/g.height)}),M1=Fn([Xa,wa],([g,tt])=>g&&tt?Math.min(g.width/tt.width,g.height/tt.height):1);N(t,M1,g=>n(101,Ks=g));const bd=Fn([Cc,M1],([g,tt])=>g&&tt?tt*g:1);N(t,bd,g=>n(474,Pi=g));const Rc=ye(pr());N(t,Rc,g=>n(396,an=g));const Lg=ye({scalar:Pi,translation:an}),Og=()=>{Lg.set({scalar:void 0,translation:pr()})},zu=Vc(void 0,g=>{const tt=un(void 0,{precision:1e-4}),vt=Gd()===1?wt=>ma(wt,Math.round):ur,_t=()=>{if(!qr)return;const wt=fr||!eo;if(ro){const Xe=Pn(qr);return ka(Xe,me),ka(Xe,ne),tt.set(Xe,{hard:wt})}const ae=E2(qr,H,R0*qt);ae.width<0&&(ae.width=0,ae.x=qr.x),ae.height<0&&(ae.height=0,ae.y=qr.y),ka(ae,ne),ka(ae,an),Ki(ae,Pi),!wt&&vt(ae),tt.set(ae,{hard:wt})},gt=[fs.subscribe(_t),wa.subscribe(_t),bd.subscribe(_t),Rc.subscribe(_t),Gl.subscribe(_t),tt.subscribe(g)];return()=>gt.forEach(wt=>wt())});N(t,zu,g=>n(59,ni=g));const k1=ye(1);N(t,k1,g=>n(467,qo=g));const P1=()=>{if(!Kr||!ne)return;let g=$l(Pn(Kr),ai||1);const tt=Op(ne,$l(Pn(Yo),ai));ka(g,tt);const vt=de.width/g.width,_t=de.height/g.height,gt=Math.min(1,vt,_t);k1.set(gt),Ki(g,gt),((wt,ae)=>{const[Xe,Ze,$e,jn]=uc(wt);Xe<ae.y&&(wt.y=Math.max(ae.y,wt.y)),Ze>ae.width&&(wt.x=ae.width-wt.width),$e>ae.height&&(wt.y=ae.height-wt.height),jn<ae.x&&(wt.x=Math.max(ae.x,wt.x))})(g,{...de,x:0,y:0}),wa.set(g)},Dg=Fn([fs,As,Xa,Ul],([g,tt,vt,_t],gt)=>{g&&(vt||_t)&&gt(Fg(g,tt||1,vt||_t))});N(t,Dg,g=>n(100,Al=g));const Fg=(g,tt,vt)=>vt.width<=g.width&&vt.height<=g.height?Op(g,$l(Pn(vt),tt)):vo(g,bi(vt));let A1,Bg;const L1=g=>{if(p&&A1&&Aa(A1,g)&&Bg===ai)return;if(ro)return P1();A1=g,Bg=ai;const tt=Fg(g,ai,Kr||ue);wa.set(tt)};let zg=!1;const y4=As.subscribe(g=>{!zg&&g!==void 0&&Kr&&(L1(ne),zg=!0)}),b4=fs.subscribe(g=>{g&&ai!==void 0&&Kr&&L1(g)}),v4=Hl.subscribe(g=>{!g&&ne&&L1(ne)});let O1;const x4=Fu.subscribe(g=>{if(!g)return O1=void 0,void Ct($d,Qr=void 0,Qr);O1=io;const tt=Pn(Kr);$d.set(tt)}),S4=wa.subscribe(g=>{if(!g||!Io)return;const tt=(vt=Pn(g),_t=Io,vt.x-=_t.x,vt.y-=_t.y,vt.width-=_t.width,vt.height-=_t.height,vt);var vt,_t;((wt,ae)=>{wt.x/=ae,wt.y/=ae,wt.width/=ae,wt.height/=ae})(tt,O1);const gt=((wt,ae)=>(wt.x+=ae.x,wt.y+=ae.y,wt.width+=ae.width,wt.height+=ae.height,wt))(Pn(Qr),tt);Xa.set(gt)}),w4=Xa.subscribe(g=>{if(!g||!qr)return;if(ro)return void(Io||P1());if(fr||Io||Eo)return;const tt=bi(qr),vt=bi(g);if(ln(tt,6)===ln(vt,6))return;const{width:_t,height:gt}=Yo||Kr,wt=Math.min(ne.width/_t,ne.height/gt),ae=ii(g.width*wt,g.height*wt),Xe=.5*(qr.width-ae.width),Ze=.5*(qr.height-ae.height),$e=Br(qr.x+Xe,qr.y+Ze,ae.width,ae.height);wa.set($e)}),Ng=Fn([As,Xa,wa,Hl],([g,tt,vt,_t],gt)=>{if(!g||!tt||!vt)return;if(_t)return gt(qo);const wt=vt.width/tt.width,ae=vt.height/tt.height;gt(Math.max(wt,ae)/g)}),Nu=Fn([As,Ng],([g,tt],vt)=>{tt&&vt(g*tt)});N(t,Nu,g=>n(473,io=g));let Mc={left:0,right:0,top:0,bottom:0};const Vg=Fn([Gl,wa],([g,tt],vt)=>{if(!tt)return vt(Mc);const _t=kg(tt,g);ln(Mc.top,4)===ln(_t.top,4)&&ln(Mc.bottom,4)===ln(_t.bottom,4)&&ln(Mc.right,4)===ln(_t.right,4)&&ln(Mc.left,4)===ln(_t.left,4)||(Mc=_t,vt(_t))}),T4=Fn([Vg],([g],tt)=>{tt(Object.values(g).some(vt=>vt>0))}),D1=un(.075,{stiffness:.03,damping:.4,precision:.001}),E4=Fn([md,hd,D1,zu,bd,Gl,T4,Vg,_c],([g,tt,vt,_t,gt,wt,ae,Xe,Ze],$e)=>{if(!_t||p)return $e([]);let{x:jn,y:Lr,width:Zi,height:dr}=_t;jn+=.5,Lr+=.5,Zi-=.5,dr-=.5;const gi=[];if(wt){if(ae){let{left:er,right:Ea,top:Yl,bottom:Pc}=Xe;er*=gt,Ea*=gt,Yl*=gt,Pc*=gt;const am=qm(tt)?[1,1,1,.125]:[0,0,0,.075];gi.push({x:jn-er-.5,y:Lr-Yl-.5,width:Zi+er+Ea+1,height:dr+Yl+Pc+1,strokeWidth:1,strokeColor:am,opacity:Ze?1:.5})}const la=qm(g);wt&&wt.frameColor&&qm(wt.frameColor)||la||(gi.push({x:jn-1,y:Lr-1,width:Zi+2,height:dr+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:vt}),gi.push({x:jn+1,y:Lr+1,width:Zi-2,height:dr-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:vt}))}$e([...gi,{x:jn,y:Lr,width:Zi,height:dr,strokeWidth:1,strokeColor:g,opacity:vt}])}),vd=ye([]);N(t,vd,g=>n(385,jr=g));const Ug=Fn([E4,vd],([g,tt],vt)=>{vt([...g,...tt])});N(t,Ug,g=>n(94,Rn=g));const F1=un(0,{precision:.001});N(t,F1,g=>n(387,qi=g));const B1=un();N(t,B1,g=>n(390,ei=g));const z1=un();N(t,z1,g=>n(389,Do=g));const N1=un();N(t,N1,g=>n(388,In=g));const V1=un();N(t,V1,g=>n(386,ki=g));const xd=ye(!1);N(t,xd,g=>n(372,Wi=g));const Sd=ye();let rl;N(t,Sd,g=>n(375,So=g));const U1=Fn([xd,Sd],([g,tt],vt)=>{if(!g||!tt)return void vt(void 0);if(rl&&(rl.cancel(),n(282,rl=void 0)),gu(tt))return vt(Gx(tt));const _t=Ta.length?0:On?250:0;n(282,rl={cancel:ve}),vg(tt,rl,_t).then(vt).catch(gt=>{Ct(wu,ar.error=gt,ar)}).finally(()=>{n(282,rl=void 0)})});Js(),Js=ho(U1,g=>n(354,te=g));let{imagePreviewCurrent:wd}=e;const G1=ye({});N(t,G1,g=>n(377,ia=g));const Vu=ye([]);N(t,Vu,g=>n(87,gn=g));const Uu=Fn([fs,Tc,Ul,Rg,wa,Nu,wc,Eu,Iu,bd,Rc,Cg],([g,tt,vt,_t,gt,wt,ae,Xe,Ze,$e,jn,Lr],Zi)=>{if(!g||!gt)return;const dr=bR(g,tt,vt,_t,gt,$e,jn,wt,ae,Xe,Ze);!Lr&&_(dr),Zi(dr)});N(t,Uu,g=>n(378,Lo=g));const Gg=Fn([fg,gg,$g,yg,bg],([g,tt,vt,_t,gt],wt)=>{const ae=g&&Object.keys(g).map(Xe=>g[Xe]).filter(Boolean);wt({gamma:vt||void 0,vignette:_t||void 0,noise:gt||void 0,convolutionMatrix:tt||void 0,colorMatrix:ae&&ae.length&&Rf(ae)})});let Gu,W1;const Wg=(()=>{if(!is())return!1;const g=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,tt,vt]=g.map(_t=>parseInt(_t,10)||0);return tt>13||tt===13&&vt>=4})(),Td=ye({});N(t,Td,g=>n(366,Mi=g)),ca("env",Td);const Hg=Gd(),H1=Vc(Hg,g=>{const tt=()=>g(Gd()),vt=matchMedia(`(resolution: ${Hg}dppx)`);return vt.addListener(tt),()=>vt.removeListener(tt)});N(t,H1,g=>n(58,Ir=g));const gs=((g,tt)=>{const{sub:vt,pub:_t}=Gs(),gt=[],wt=ye(0),ae=[],Xe=()=>ae.forEach($e=>$e({index:rs(wt),length:gt.length})),Ze={get index(){return rs(wt)},set index($e){$e=Number.isInteger($e)?$e:0,$e=sr($e,0,gt.length-1),wt.set($e),tt(gt[Ze.index]),Xe()},get state(){return gt[gt.length-1]},length:()=>gt.length,undo(){const $e=Ze.index--;return _t("undo",$e),$e},redo(){const $e=Ze.index++;return _t("redo",Ze.index),$e},revert(){gt.length=1,Ze.index=0,_t("revert")},write($e){$e&&tt({...g(),...$e});const jn=g(),Lr=gt[gt.length-1];JSON.stringify(jn)!==JSON.stringify(Lr)&&(gt.length=Ze.index+1,gt.push(jn),wt.set(gt.length-1),Xe(),_t("writehistory"))},set($e={}){gt.length=0,Ze.index=0;const jn=Array.isArray($e)?$e:[$e];gt.push(...jn),Ze.index=gt.length-1},get:()=>[...gt],subscribe:$e=>(ae.push($e),$e({index:Ze.index,length:gt.length}),()=>ae.splice(ae.indexOf($e),1)),on:vt};return Ze})(()=>Dr,g=>{Ct(Cu,Dr=g,Dr),Ec.set(wo)});ds(),ds=ho(gs,g=>n(384,Oo=g));const jg=()=>{const g={x:0,y:0,...ue},tt=ma(vo(g,Dr.cropAspectRatio),Math.round),vt=fe({...Dr,rotation:0,crop:tt},Dr),_t=[vt];JSON.stringify(vt)!==JSON.stringify(Dr)&&_t.push({...Dr}),gs.set(_t)},I4=wu.subscribe(g=>{g&&g.complete&&jg()}),_4=()=>Zt().then(g=>g&&gs.revert()),il=ye(!1);N(t,il,g=>n(367,or=g));const C4=()=>{Ct(il,or=!0,or),le().then(g=>{if(!g)return void Ct(il,or=!1,or);let tt;tt=Ed.subscribe(vt=>{vt===1&&(tt&&tt(),Li("processImage"))})})},R4=l1.subscribe(g=>{if(!g)return void Ct(il,or=!1,or);Ct(il,or=!0,or);const{complete:tt,abort:vt}=g;(tt||vt)&&Ct(il,or=!1,or)}),Ta=zk();N(t,Ta,g=>n(56,ra=g));const M4=Fn([Ta],([g],tt)=>{if(!g.length)return tt();const{origin:vt,translation:_t,rotation:gt,scale:wt}=g[0];tt({origin:vt,translation:_t,rotation:gt,scale:wt})}),Wu=ye();N(t,Wu,g=>n(381,no=g));let Hu,ju=[];const qg=ye(),j1=ye(),k4=Fn([Cc,j1,As,Ag],([g,tt,vt,_t])=>g||(tt||vt<1?_t:1)),Yg={...aa,imageFile:i1,imageSize:Ul,mediaDuration:o1,mediaMinDuration:o4,mediaMaxDuration:s1,mediaTrim:a1,imageBackgroundColor:_u,imageBackgroundImage:mg,imageCropAspectRatio:Tu,imageCropMinSize:a4,imageCropMaxSize:s4,imageCropLimitToImage:c1,imageCropRect:Xa,imageCropRectOrigin:c4,imageCropRectSnapshot:$d,imageCropRectAspectRatio:d4,imageCropRange:l4,imageRotation:wc,imageRotationRange:u4,imageFlipX:Eu,imageFlipY:Iu,imageOutputSize:p4,imageColorMatrix:fg,imageConvolutionMatrix:gg,imageGamma:$g,imageVignette:yg,imageNoise:bg,imageManipulation:p1,imageDecoration:d1,imageAnnotation:u1,imageRedaction:h1,imageFrame:Gl,imagePreview:U1,imagePreviewSource:Sd,imageTransforms:Uu,imagePreviewModifiers:G1,history:gs,animation:Lu,pixelRatio:H1,elasticityMultiplier:qt,scrollElasticity:M0,rangeInputElasticity:5,redrawTrigger:Sc,pointerAccuracy:Pu,pointerHoverable:Au,env:Td,rootRect:Tc,stageRect:fs,stageRectBase:C1,stageRecenter:Pg,stageScalar:As,stagePadding:Ic,stagePadded:_c,presentationScalar:Nu,imagePreviewUpscale:j1,utilRect:Wl,utilRectPadded:g4,allowPlayPause:qh,allowPan:f1,allowZoom:g1,allowZoomControls:$1,enableZoomInput:y1,enablePanInput:Ru,enablePanInputStatus:v1,imageSelectionMultiTouching:qg,rootBackgroundColor:hd,rootForegroundColor:ku,rootLineColor:md,rootColorSecondary:_g,imageOutlineOpacity:D1,utilTools:Wu,imageSelectionPan:Rc,imageSelectionZoom:Cc,imageSelectionZoomCurrent:k4,imageSelectionStageFitScalar:Ag,imageSelectionStoredState:Lg,imageOverlayMarkup:vd,interfaceImages:Vu,isInteracting:gd,isTransformingImage:Cg,isInteractingFraction:T1,imageCropRectIntent:I1,imageCropRectPresentation:Rg,imageSelectionRect:wa,imageSelectionRectIntent:_1,imageSelectionRectPresentation:zu,imageSelectionRectSnapshot:Fu,imageScalar:Ng,imageTransformsInterpolated:M4,imageEffects:Gg};delete Yg.image;const P4="util-"+Oa();let q1=[];const Xg=g=>I.find(([tt])=>g===tt);let Ls=[],Zg=is();const Kg=(g,tt,vt)=>{let _t=St.getPropertyValue(g);_t=vt?vt(_t):/^[0-9]+$/.test(_t)?parseFloat(_t):void 0,tt.set(_t,{hard:!On})},jl=(g,tt,vt=!1)=>{const _t=(gt=>{const wt=St.getPropertyValue(gt);return Ew(wt)})(g);_t&&_t[3]!==0&&(vt||(_t.length=3),tt.set(_t,{hard:!On}))},Y1=ye();N(t,Y1,g=>n(88,Dn=g));const X1=ye();N(t,X1,g=>n(89,Gn=g));const Z1=ye();N(t,Z1,g=>n(90,Ln=g));const qu=un(0,{damping:.9});N(t,qu,g=>n(91,Yr=g));const Qg=()=>{jl("color",ku),jl(Fl?"--color-background":"background-color",hd),jl("outline-color",md),jl("--color-primary",x1),jl("--color-secondary",_g),jl("--grid-color-even",X1,!0),jl("--grid-color-odd",Z1,!0),Kg("--grid-size",Y1),Kg("--editor-inset-top",w1,g=>parseInt(g,10))},Jg=Fn([Uu,Gg,_u,h4],([g,tt,vt,_t])=>g&&{...g,...tt,backgroundColor:vt,backgroundImage:_t});N(t,Jg,g=>n(376,Hi=g));const A4=()=>{const g=Ta.length?void 0:{resize:1.05},tt=((vt,_t,gt={})=>{const{resize:wt=1,opacity:ae=0}=gt,Xe={opacity:[un(ae,{...ec,stiffness:.1}),ur],resize:[un(wt,{...ec,stiffness:.1}),ur],translation:[un(void 0,ec),ur],rotation:[un(void 0,_p),ur],origin:[un(void 0,ec),ur],scale:[un(void 0,_p),ur],gamma:[un(void 0,_p),dr=>dr||1],vignette:[un(void 0,_p),dr=>dr||0],colorMatrix:[un([...vb],ec),dr=>dr||[...vb]],convolutionMatrix:[ye(void 0),dr=>dr&&dr.clarity||void 0],backgroundColor:[un(void 0,ec),(dr,gi,la)=>{if(Array.isArray(dr)){if(Array.isArray(gi)){const er=[...dr];gi[3]===0?(er[3]=0,la(er)):er[3]===0&&((dr=[...gi])[3]=0)}return dr}}],backgroundImage:[ye(void 0),ur]},Ze=Object.entries(Xe).map(([dr,gi])=>[dr,gi[0]]),$e=Ze.map(([,dr])=>dr),jn=Object.entries(Xe).reduce((dr,[gi,la])=>{const[er,Ea]=la;return dr[gi]=(Yl,Pc)=>er.set(Ea(Yl,Lr[gi],am=>{er.set(am,{hard:!0})}),Pc),dr},{});let Lr;const Zi=Fn($e,dr=>(Lr=dr.reduce((gi,la,er)=>(gi[Ze[er][0]]=la,gi),{}),Lr.data=vt,Lr.size=_t,Lr.scale*=dr[1],Lr));return Zi.get=()=>Lr,Zi.set=(dr,gi)=>{const la={hard:!gi};Object.entries(dr).forEach(([er,Ea])=>{jn[er]&&jn[er](Ea,la)})},Zi})(te,ue,g);Ta.unshift(tt),t$(Hi)},t$=g=>{Ta.forEach((tt,vt)=>{const _t=vt===0?1:0;tt.set({...g,opacity:_t,resize:1},eo)})};let Yu;const Ed=Nf(void 0,{duration:500});let K1;N(t,Ed,g=>n(55,Ao=g));const Xu=ye(!1);let Os;N(t,Xu,g=>n(371,ba=g));const Zu=un(void 0,{stiffness:.1,damping:.7,precision:.25});N(t,Zu,g=>n(83,kn=g));const Ku=un(0,{stiffness:.1,precision:.05});N(t,Ku,g=>n(84,Vn=g));const Id=un(0,{stiffness:.02,damping:.5,precision:.25});N(t,Id,g=>n(369,Hr=g));const Q1=un(void 0,{stiffness:.02,damping:.5,precision:.25});N(t,Q1,g=>n(370,xo=g));const Qu=un(void 0,{stiffness:.02,damping:.5,precision:.25});let Ju;N(t,Qu,g=>n(368,ya=g));const L4=()=>{Li("abortLoadImage")},O4=()=>{Li("abortProcessImage"),Ct(il,or=!1,or)},e$=g=>{g.target&&g.target.dataset.touchScroll==="true"||g.preventDefault()},D4=Wg?g=>{const tt=g.touches?g.touches[0]:g;tt.pageX>20&&tt.pageX<window.innerWidth-20||e$(g)}:ve,ql=ye([]);N(t,ql,g=>n(463,Gr=g)),ca("keysPressed",ql);const J1=g=>{!g||ed(g)&&!(tt=>/^image/.test(tt.type)&&!/svg/.test(tt.type))(g)||!ed(g)&&!/^http/.test(g)||Li("loadImage",g)},F4=g=>{g&&J1(g)};let kc,_d,tm=[];const n$=ye();ca("rootPortal",n$),ca("rootRect",Tc);const r$=()=>({foregroundColor:[...$r],lineColor:[...Ur],utilVisibility:{...q},isInteracting:fr,isInteractingFraction:mr,rootRect:Pn(Ie),stageRect:Pn(ne),manipulationShapesDirty:op,annotationShapesDirty:ep,decorationShapesDirty:rp,frameShapesDirty:ip}),i$=(g,tt,vt)=>si(g,ii(tt.width/vt,tt.height/vt)),o$=(g,tt,vt)=>{var _t;return g._translate=dt((_t=tt).x,_t.y),g._scale=vt,g},tp=g=>{const tt=[];return g.forEach(vt=>tt.push(B4(vt))),tt.filter(Boolean)},B4=g=>$i(g)?(g.points=[dt(g.x1,g.y1),dt(g.x2,g.y2)],g):(!(tt=>di(tt)&&!tt.text.length)(g)||g.backgroundColor&&g.backgroundColor[3]!==0||(eh(g)&&(g.width=5,g.height=g.lineHeight),g.strokeWidth=1,g.strokeColor=[1,1,1,.5],g.backgroundColor=[0,0,0,.1]),g);let a$,em=[],nm=[],rm=[],im=[],om=[],s$={};const l$=(g,tt,vt,_t,gt,wt,ae)=>{const{manipulationShapesDirty:Xe,annotationShapesDirty:Ze,decorationShapesDirty:$e,frameShapesDirty:jn,selectionRect:Lr,scale:Zi}=g,dr=a$!==Zi,gi=dr||!Aa(s$,Lr);gi&&(a$=Zi,s$=Lr),Xe&&(rm=tt.filter($p).map(ri).map(er=>si(er,ue))),(Ze||vt!==Nn)&&(em=vt.filter($p).map(ri).sort((er,Ea)=>er.alwaysOnTop?1:Ea.alwaysOnTop?-1:0).map(er=>si(er,ue))),(dr||np||Ze||vt!==Nn)&&(nm=tp(em.map(er=>m(er,{flipX:Zn,flipY:wn,rotation:_r,scale:Zi,context:fo(ue)})).flat())),($e||_t!==Xt||gi)&&(im=tp(_t.filter($p).map(ri).sort((er,Ea)=>er.alwaysOnTop?1:Ea.alwaysOnTop?-1:0).map(er=>i$(er,Lr,Zi)).map(er=>m(er,{context:Lr})).flat().map(er=>o$(er,Lr,Zi)))),(jn||wt!==on||gi)&&(om=wt?tp([wt].map(ri).map(er=>i$(er,Lr,Zi)).map(m).flat().map(er=>o$(er,Lr,Zi))):[]);let la=tp(gt.filter($p));return typeof window<"u"&&(er=>{if(er&&er._clpdx4s)return;const[Ea]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101]].map(Yl=>Yl.map(Pc=>String.fromCharCode(Pc)).join(""));la=[...la,{x:Lr.x+.5*Lr.width-82,y:Lr.y+Lr.height-16-12,width:164,height:16,text:Ea,fontWeight:900,fontSize:12,color:[1,1,1,.25]}]})(window),{manipulationShapesDirty:Xe,manipulationShapes:rm,annotationShapesDirty:Ze,annotationShapes:nm,decorationShapesDirty:$e,decorationShapes:im,frameShapesDirty:jn,frameShapes:om,interfaceShapes:la,selectionShapes:ae.map(ri).map(er=>si(er,ue))}};let ep=!0,np=!0,rp=!0,ip=!0,op=!0;return $a(()=>{Nl(),te&&Ve(te.src)&&/^blob:/.test(te.src)&&URL.revokeObjectURL(te.src),m4(),b4(),y4(),v4(),x4(),S4(),w4(),I4(),R4(),Pu.destroy(),Au.destroy(),r1.destroy(),Ta.clear(),em.length=0,nm.length=0,rm.length=0,im.length=0,om.length=0;try{n(228,wd=void 0),n(283,Yu=void 0)}catch{}}),t.$$set=g=>{"class"in g&&n(229,Yi=g.class),"layout"in g&&n(230,Kn=g.layout),"stores"in g&&n(231,aa=g.stores),"locale"in g&&n(3,cr=g.locale),"id"in g&&n(4,zo=g.id),"util"in g&&n(232,Rs=g.util),"utils"in g&&n(233,Ms=g.utils),"animations"in g&&n(234,ks=g.animations),"disabled"in g&&n(235,Ha=g.disabled),"status"in g&&n(227,x=g.status),"previewUpscale"in g&&n(236,Z=g.previewUpscale),"previewPad"in g&&n(237,V=g.previewPad),"previewMaskOpacity"in g&&n(5,ht=g.previewMaskOpacity),"previewImageDataMaxSize"in g&&n(238,$t=g.previewImageDataMaxSize),"previewImageTextPixelRatio"in g&&n(6,Yt=g.previewImageTextPixelRatio),"markupMaskOpacity"in g&&n(7,Ot=g.markupMaskOpacity),"zoomMaskOpacity"in g&&n(239,ie=g.zoomMaskOpacity),"elasticityMultiplier"in g&&n(8,qt=g.elasticityMultiplier),"willRevert"in g&&n(240,Zt=g.willRevert),"willProcessImage"in g&&n(241,le=g.willProcessImage),"willRenderCanvas"in g&&n(9,oe=g.willRenderCanvas),"willRenderToolbar"in g&&n(242,We=g.willRenderToolbar),"willSetHistoryInitialState"in g&&n(243,fe=g.willSetHistoryInitialState),"enableButtonExport"in g&&n(244,Me=g.enableButtonExport),"enableButtonRevert"in g&&n(245,Re=g.enableButtonRevert),"enableNavigateHistory"in g&&n(246,re=g.enableNavigateHistory),"enableToolbar"in g&&n(10,De=g.enableToolbar),"enableUtils"in g&&n(247,bn=g.enableUtils),"enableButtonClose"in g&&n(248,Hn=g.enableButtonClose),"enableDropImage"in g&&n(249,vn=g.enableDropImage),"enablePasteImage"in g&&n(250,xn=g.enablePasteImage),"enableBrowseImage"in g&&n(251,tn=g.enableBrowseImage),"enableTransparencyGrid"in g&&n(11,yr=g.enableTransparencyGrid),"layoutDirectionPreference"in g&&n(252,Xn=g.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in g&&n(253,Xi=g.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in g&&n(254,Oi=g.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in g&&n(255,Mr=g.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in g&&n(256,Fr=g.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in g&&n(257,Di=g.layoutVerticalControlTabsPreference),"textDirection"in g&&n(12,Mo=g.textDirection),"markupEditorZoomLevel"in g&&n(258,ja=g.markupEditorZoomLevel),"markupEditorZoomLevels"in g&&n(13,Ll=g.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in g&&n(14,Ol=g.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in g&&n(15,us=g.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in g&&n(16,xa=g.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in g&&n(259,Xo=g.markupEditorInteractionMode),"muteAudio"in g&&n(260,ps=g.muteAudio),"willSetMediaInitialTimeOffset"in g&&n(261,qa=g.willSetMediaInitialTimeOffset),"enablePan"in g&&n(17,Dl=g.enablePan),"enableZoom"in g&&n(18,Sa=g.enableZoom),"enableZoomControls"in g&&n(262,hs=g.enableZoomControls),"enableZoomInput"in g&&n(19,tl=g.enableZoomInput),"enablePanInput"in g&&n(263,el=g.enablePanInput),"enableCanvasAlpha"in g&&n(20,Fl=g.enableCanvasAlpha),"enablePanLimit"in g&&n(21,ms=g.enablePanLimit),"panLimitGutterScalar"in g&&n(22,Ps=g.panLimitGutterScalar),"zoomPresetOptions"in g&&n(23,fi=g.zoomPresetOptions),"zoomAdjustStep"in g&&n(24,Ya=g.zoomAdjustStep),"zoomAdjustFactor"in g&&n(25,rg=g.zoomAdjustFactor),"zoomAdjustWheelFactor"in g&&n(26,ig=g.zoomAdjustWheelFactor),"zoomLevel"in g&&n(0,Bl=g.zoomLevel),"imagePreviewSrc"in g&&n(266,Hh=g.imagePreviewSrc),"imageOrienter"in g&&n(267,yu=g.imageOrienter),"pluginComponents"in g&&n(268,vc=g.pluginComponents),"pluginOptions"in g&&n(27,zl=g.pluginOptions),"root"in g&&n(2,_i=g.root),"imageSourceToImageData"in g&&n(28,n1=g.imageSourceToImageData),"imagePreviewCurrent"in g&&n(228,wd=g.imagePreviewCurrent)},t.$$.update=()=>{if(1&t.$$.dirty[0]|1024&t.$$.dirty[8]&&n(0,Bl=Bl===null?ja:Bl),2&t.$$.dirty[0]|1048576&t.$$.dirty[8]){let gt=!1;vc.forEach(([wt])=>{sa[wt]||(n(1,sa[wt]={},sa),gt=!0)}),gt&&n(280,ud=[...vc])}var g,tt,vt,_t;if(8&t.$$.dirty[0]|65536&t.$$.dirty[7]|2&t.$$.dirty[9]&&n(335,O=cr&&ud.length?Ms||ud.map(([gt])=>gt):[]),134217728&t.$$.dirty[0]|2&t.$$.dirty[9]|33554432&t.$$.dirty[10]|1024&t.$$.dirty[12]&&n(336,I=((gt,wt,ae,Xe)=>{const Ze=wt.filter(([$e])=>gt.includes($e)).filter(([$e,{isSupported:jn}])=>jn({...Xe,...ae[$e]})).map(([$e,jn])=>[$e,jn.Component]);return qs(Ze,q1,($e,jn)=>$e[0]===jn[0]&&$e[1]===jn[1])?q1:(q1=Ze,Ze)})(O,ud,zl,{src:ji})),67108864&t.$$.dirty[10]&&n(291,k=I.length),8&t.$$.dirty[0]|4096&t.$$.dirty[9]|33554432&t.$$.dirty[10]&&n(47,G=k&&O.map(gt=>{const wt=Xg(gt);if(wt)return{id:gt,view:wt[1],tabIcon:cr[gt+"Icon"],tabLabel:cr[gt+"Label"]}}).filter(Boolean)||[]),65536&t.$$.dirty[1]&&n(353,r=!!G.find(gt=>gt.id==="trim")),12288&t.$$.dirty[11]|32&t.$$.dirty[13]&&n(290,i=!!(Oe&&te&&r)),32768&t.$$.dirty[7]|4096&t.$$.dirty[9]&&n(44,X=k&&Rs&&typeof Rs=="string"&&Xg(Rs)?Rs:k>0?I[0][0]:void 0),8192&t.$$.dirty[1]|2048&t.$$.dirty[9]&&i&&X&&Nl(),2048&t.$$.dirty[9]|8192&t.$$.dirty[11]&&(i?(te.addEventListener("play",bu),te.addEventListener("pause",bu)):te&&te.nodeName==="video"&&(te.removeEventListener("play",bu),te.removeEventListener("pause",bu))),2048&t.$$.dirty[9]&&i&&nl.set(vu()/Vl()),24&t.$$.dirty[13]&&(gt=>{if(!xc())return;const wt=Date.now();if(Yh&&wt-Yh<16)return;Yh=wt;const ae=Oe*gt;if(ae.toFixed(1)===sg)return;sg=ae.toFixed(1);const Xe=te,Ze=()=>{Xe.removeEventListener("seeked",Ze),jh()};Xe.addEventListener("seeked",Ze),(($e,jn)=>{$e.fastSeek&&$e.fastSeek(jn),$e.currentTime=jn})(Xe,ae)})(Ro||B),16&t.$$.dirty[13]&&n(351,o=B&&ln(B,6)),97&t.$$.dirty[13]&&n(349,a=Fo||[[0,Math.min(Oe,He)/Oe]]),256&t.$$.dirty[11]&&(s=a[0][0]),256&t.$$.dirty[11]&&(l=a[a.length-1][1]),256&t.$$.dirty[11]&&n(352,c=a.map(([gt,wt])=>[ln(gt,6),ln(wt,6)])),3072&t.$$.dirty[11]&&n(350,d=c.findIndex(([gt,wt])=>o>=gt&&o<=wt)),3584&t.$$.dirty[11]&&(u=d===-1&&c.findIndex((gt,wt,ae)=>{const Xe=ae[wt-1];return Xe?o<=gt[0]&&o>=Xe[1]:o<=gt[0]})),4096&t.$$.dirty[8]&&dd.set(ps),8192&t.$$.dirty[11]|4&t.$$.dirty[13]&&(te&&li?Jh():t1()),8192&t.$$.dirty[11]|2&t.$$.dirty[13]&&te&&(gt=>{i&&(te.volume=Math.min(1,gt))})(Co),256&t.$$.dirty[0]&&Ct(Su,Zs=qt,Zs),8192&t.$$.dirty[7]&&n(345,p=Kn==="overlay"),1073741824&t.$$.dirty[7]|16&t.$$.dirty[11]&&n(45,h=bn&&!p),134217730&t.$$.dirty[0]&&zl&&Object.entries(zl).forEach(([gt,wt])=>{Object.entries(wt).forEach(([ae,Xe])=>{sa[gt]&&n(1,sa[gt][ae]=Xe,sa)})}),262144&t.$$.dirty[7]&&e1.set(Ha?1:0),2097152&t.$$.dirty[7]&&(f=$t?(g=$t,tt=ug,ii(Math.min(g.width,tt.width),Math.min(g.height,tt.height))):ug),1073741824&t.$$.dirty[12]&&r1.update(_o[0]),536870912&t.$$.dirty[12]&&(m=Wn?(gt,wt)=>Wn(gt,{flipX:void 0,flipY:void 0,rotation:void 0,...wt,isPreview:!0}):ur),536870912&t.$$.dirty[1]&&Array.isArray(lr)&&Li("selectionchange",[...lr]),16384&t.$$.dirty[8]|268435456&t.$$.dirty[12]&&b1.set(Sr&&hs),34816&t.$$.dirty[8]&&Mu.set(Xo==="pan"||el),2097152&t.$$.dirty[1]&&Wr&&Tc.set(Br(Wr.x,Wr.y,Wr.width,Wr.height)),262160&t.$$.dirty[11]|4&t.$$.dirty[12]&&Ie&&p&&ar&&ar.complete&&(()=>{const gt=_e,wt=bi(Ie);gt&&gt===wt||(Tu.set(bi(Ie)),jg())})(),33554432&t.$$.dirty[10]&&n(46,Lt=O.length>1),32768&t.$$.dirty[1]&&(Lt||Ec.set(gl())),1024&t.$$.dirty[0]|134217728&t.$$.dirty[12]&&(De||fd.set(Br(0,se,0,0))),524352&t.$$.dirty[11]&&n(348,b=!fr&&$),67108864&t.$$.dirty[12]&&n(346,S=!sn),2097152&t.$$.dirty[1]&&n(292,fn=Wr&&Wr.width>0&&Wr.height>0),8&t.$$.dirty[0]|12288&t.$$.dirty[9]&&n(41,at=fn&&cr&&!!k),1024&t.$$.dirty[1]&&setTimeout(()=>n(281,E1=at),1),131072&t.$$.dirty[7]|4&t.$$.dirty[9]|160&t.$$.dirty[11]&&Ct(Lu,eo=ks==="always"?b:ks!=="never"&&b&&E1&&S,eo),131072&t.$$.dirty[7]|96&t.$$.dirty[11]&&Ct(Ou,On=ks==="always"?$:ks!=="never"&&$&&S,On),524288&t.$$.dirty[7]|16&t.$$.dirty[11]&&Du.set(Z||p),1048576&t.$$.dirty[7]&&Bu.set(V),4&t.$$.dirty[0]|41943040&t.$$.dirty[12]&&_i&&(_i.dispatchEvent(ll("markupzoom",Tn)),_i.dispatchEvent(ll("zoom",Sn(Tn)?Tn:ai))),4&t.$$.dirty[0]|16777216&t.$$.dirty[12]&&_i&&(_i.dispatchEvent(ll("markuppan",an)),_i.dispatchEvent(ll("pan",an))),2097152&t.$$.dirty[12]&&Kr&&Og(),4194304&t.$$.dirty[12]&&Yo&&P1(),8396800&t.$$.dirty[1]&&X&&D1.set(.075,{hard:!On}),4194304&t.$$.dirty[7]&&n(343,v=ie),1572864&t.$$.dirty[12]&&n(344,T=oi?-Math.max(...Object.values(To)):0),277872640&t.$$.dirty[1]|12&t.$$.dirty[11]&&ni){let gt=ni.x-ne.x,wt=ne.x+ne.width-(ni.x+ni.width),ae=ni.y-ne.y,Xe=ne.y+ne.height-(ni.y+ni.height),Ze=Math.min(gt,ae,wt,Xe);F1.set(Ze>T?0:Math.min(v,Math.abs(Ze/64)),{hard:!On})}if(134217728&t.$$.dirty[1]&&n(342,C=.55/Ir),9437184&t.$$.dirty[1]|2&t.$$.dirty[11]&&ne&&B1.set({x:0,y:ne.y,width:ne.x<64?0:ne.x,height:ne.height+C},{hard:!On}),9437184&t.$$.dirty[1]|262146&t.$$.dirty[11]&&ne&&z1.set({x:0,y:0,width:Ie.width,height:ne.y+C},{hard:!On}),9437184&t.$$.dirty[1]|262146&t.$$.dirty[11]&&ne){let gt=ne.x+ne.width,wt=Ie.width-(ne.x+ne.width);wt<64&&(gt+=wt,wt=0),N1.set({x:gt,y:ne.y,width:wt,height:ne.height+C},{hard:!On})}if(9437184&t.$$.dirty[1]|262144&t.$$.dirty[11]&&ne&&V1.set({x:0,y:ne.y+ne.height,width:Ie.width,height:Ie.height-(ne.y+ne.height)},{hard:!On}),67108864&t.$$.dirty[1]|294912&t.$$.dirty[12]&&n(338,R=ei&&{id:"stage-overlay",backgroundColor:Ii,opacity:qi,...ei}),67108864&t.$$.dirty[1]|163840&t.$$.dirty[12]&&n(341,A=Do&&{id:"stage-overlay",backgroundColor:Ii,opacity:qi,...Do}),67108864&t.$$.dirty[1]|98304&t.$$.dirty[12]&&n(340,E=In&&{id:"stage-overlay",backgroundColor:Ii,opacity:qi,...In}),67108864&t.$$.dirty[1]|49152&t.$$.dirty[12]&&n(339,M=ki&&{id:"stage-overlay",backgroundColor:Ii,opacity:qi,...ki}),1879048192&t.$$.dirty[10]|1&t.$$.dirty[11]&&n(337,P=[A,E,M,R].filter(Boolean)),134217728&t.$$.dirty[10]|8192&t.$$.dirty[12]&&P&&jr&&vd.update(gt=>[...gt.filter(wt=>wt.id!=="stage-overlay"),...P]),262144&t.$$.dirty[8]|1024&t.$$.dirty[12]&&Sd.set(Hh||ji||void 0),4&t.$$.dirty[0]|2048&t.$$.dirty[7]|8192&t.$$.dirty[11]&&(n(228,wd=te),te&&_i.dispatchEvent(ll("loadpreview",wd))),8&t.$$.dirty[12]&&So&&(Rc.set(pr()),Cc.set(void 0),Og(),Vu.set([])),4096&t.$$.dirty[12]&&n(296,y=Oo.index>0),4096&t.$$.dirty[12]&&n(295,z=Oo.index<Oo.length-1),8&t.$$.dirty[1]&&qg.set(Hu),2048&t.$$.dirty[12]&&j1.set(va),8192&t.$$.dirty[1]&&f4.set(X),65664&t.$$.dirty[1]&&n(38,q=G.reduce((gt,wt)=>(gt[wt.id]=q&&q[wt.id]||0,gt),{})),8192&t.$$.dirty[1]&&n(80,D={name:P4,selected:X}),65536&t.$$.dirty[1]&&n(79,lt=G.map(gt=>({id:gt.id,icon:gt.tabIcon,label:gt.tabLabel}))),65536&t.$$.dirty[1]&&n(78,pt=G.map(gt=>gt.id)),4096&t.$$.dirty[7]&&n(77,et=$n(["PinturaRoot","PinturaRootComponent",Yi])),262144&t.$$.dirty[11]&&n(331,Y=Ie&&(Ie.width>1e3?"wide":Ie.width<600?"narrow":void 0)),262144&t.$$.dirty[11]&&n(318,j=Ie&&(Ie.width<=320||Ie.height<=460)),262144&t.$$.dirty[11]&&n(330,ct=Ie&&(Ie.height>1e3?"tall":Ie.height<600?"short":void 0)),4&t.$$.dirty[0]&&n(298,U=_i&&_i.parentNode&&_i.parentNode.classList.contains("PinturaModal")),1&t.$$.dirty[1]|524288&t.$$.dirty[9]|262144&t.$$.dirty[11]&&n(323,ft=U&&Ie&&Gu>Ie.width),2&t.$$.dirty[1]|524288&t.$$.dirty[9]|262144&t.$$.dirty[11]&&n(322,yt=U&&Ie&&W1>Ie.height),12288&t.$$.dirty[10]&&n(324,It=ft&&yt),1048576&t.$$.dirty[0]&&n(321,Jt=Fl),2097152&t.$$.dirty[10]&&n(293,pe=Y==="narrow"),16&t.$$.dirty[8]|262144&t.$$.dirty[11]&&n(332,(vt=Ie,_t=Xn,mt=Ie?_t==="auto"?vt.width>vt.height?"landscape":"portrait":_t==="horizontal"?vt.width<500?"portrait":"landscape":_t==="vertical"?vt.height<400?"landscape":"portrait":void 0:"landscape")),4194304&t.$$.dirty[10]&&n(76,ot=mt==="landscape"),16384&t.$$.dirty[9]|1048576&t.$$.dirty[10]&&n(320,Q=pe||ct==="short"),1&t.$$.dirty[1]|262144&t.$$.dirty[11]&&n(319,Se=Zg&&Ie&&Gu===Ie.width&&!Wg),4&t.$$.dirty[1]|512&t.$$.dirty[12]&&n(294,Mt=[...no||[],...ju].filter(Boolean)),32&t.$$.dirty[8]&&n(329,xt="has-navigation-preference-"+Xi),64&t.$$.dirty[8]&&n(328,Wt="has-navigation-preference-"+Oi),128&t.$$.dirty[8]&&n(325,Ht="has-toolbar-preference-"+Mr),256&t.$$.dirty[8]&&n(327,Ae="has-controlgroups-preference-"+Fr),512&t.$$.dirty[8]&&n(326,ke="has-controltabs-preference-"+Di),262144&t.$$.dirty[11]&&n(334,st=Ie!==void 0&&Ie.width>0&&Ie.height>0),4&t.$$.dirty[0]|16777216&t.$$.dirty[10]&&n(333,St=st&&_i&&getComputedStyle(_i)),8388608&t.$$.dirty[10]&&St&&Qg(),1024&t.$$.dirty[0]|8437760&t.$$.dirty[1]|270336&t.$$.dirty[7]|524288&t.$$.dirty[9]|8388352&t.$$.dirty[10]|33554432&t.$$.dirty[11]|384&t.$$.dirty[12]&&Td.set({...Mi,layoutMode:Kn,orientation:mt,horizontalSpace:Y,verticalSpace:ct,navigationHorizontalPreference:xt,navigationVerticalPreference:Wt,controlGroupsVerticalPreference:Ae,controlTabsVerticalpreference:ke,toolbarVerticalPreference:Ht,isModal:U,isDisabled:Ha,isCentered:It,isCenteredHorizontally:ft,isCenteredVertically:yt,isAnimated:On,isTransparent:Jt,pointerAccuracy:jo,pointerHoverable:Ua,isCompact:Q,hasSwipeNavigation:Se,hasLimitedSpace:j,hasToolbar:De,hasNavigation:Lt&&h,isIOS:Zg,browserVersion:zf()?"chrome-"+(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]:void 0}),33554432&t.$$.dirty[11]&&n(75,Ce=Object.entries(Mi).map(([gt,wt])=>/^is|has/.test(gt)?wt?_w(gt):void 0:wt).filter(Boolean).join(" ")),8192&t.$$.dirty[1]&&X&&Wu.set([]),96&t.$$.dirty[12]&&n(74,dn=Lo&&Object.entries(ia).filter(([,gt])=>gt!=null).reduce((gt,[,wt])=>gt={...gt,...wt},{})),4&t.$$.dirty[12]&&n(315,Ne=ar&&ar.task==="any-to-file"),32&t.$$.dirty[10]&&Ne&&Ta&&Ta.clear(),16&t.$$.dirty[12]&&n(317,Te=!!Hi&&!!Hi.translation),16&t.$$.dirty[9]|128&t.$$.dirty[10]|8192&t.$$.dirty[11]&&Te&&te&&te!==Yu&&(n(283,Yu=te),A4()),128&t.$$.dirty[10]|16&t.$$.dirty[12]&&Te&&t$(Hi),33554432&t.$$.dirty[1]&&ra&&ra.length>1){let gt=[];Ta.forEach((wt,ae)=>{ae!==0&&wt.get().opacity<=0&&gt.push(wt)}),gt.forEach(wt=>Ta.remove(wt))}if(8&t.$$.dirty[0]|64&t.$$.dirty[10]&&n(40,Ee=cr&&Ut.length&&cr.labelSupportError(Ut)),4&t.$$.dirty[12]&&n(307,qe=ar&&!!ar.error),4&t.$$.dirty[12]&&n(43,En=!ar||!ar.complete&&ar.task===void 0),4&t.$$.dirty[12]&&n(308,Et=ar&&(ar.taskLengthComputable?ar.taskProgress:1/0)),32&t.$$.dirty[10]&&Ne&&Ct(xd,Wi=!1,Wi),8388608&t.$$.dirty[1]|32&t.$$.dirty[9]|4&t.$$.dirty[12]&&ar&&ar.complete){const gt=On?250:0;clearTimeout(K1),n(284,K1=setTimeout(()=>{Ct(xd,Wi=!0,Wi)},gt))}if(4096&t.$$.dirty[1]|268435456&t.$$.dirty[9]|5&t.$$.dirty[12]&&n(312,Tt=ar&&!qe&&!En&&!Wi),8&t.$$.dirty[9]|8192&t.$$.dirty[11]|8&t.$$.dirty[12]&&n(311,je=!(!So||te&&!rl)),8388608&t.$$.dirty[1]|1&t.$$.dirty[12]&&(Wi?setTimeout(()=>qu.set(1),On?500:0):qu.set(0)),67108864&t.$$.dirty[11]|2&t.$$.dirty[12]&&n(306,Le=!!(or||xr&&xr.progress!==void 0&&!xr.complete)),134217728&t.$$.dirty[9]&&Le&&Nl(),4096&t.$$.dirty[1]|4&t.$$.dirty[12]&&n(309,yn=ar&&!(ar.error||En)),8&t.$$.dirty[0]|4&t.$$.dirty[12]&&n(310,en=cr&&(ar?!ar.complete||ar.error?Ff(cr.statusLabelLoadImage(ar),ar.error&&ar.error.metadata,"{","}"):cr.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):cr.statusLabelLoadImage(ar))),8&t.$$.dirty[0]|2&t.$$.dirty[12]&&n(305,Ke=xr&&cr&&cr.statusLabelProcessImage(xr)),2&t.$$.dirty[12]&&n(303,Cn=xr&&(xr.taskLengthComputable?xr.taskProgress:1/0)),2&t.$$.dirty[12]&&n(304,J=xr&&!xr.error),2&t.$$.dirty[12]&&n(302,he=!(!xr||!xr.error)),8&t.$$.dirty[0]|4096&t.$$.dirty[1]|1024&t.$$.dirty[7]|2139095040&t.$$.dirty[9]|7&t.$$.dirty[10])if(x){let gt,wt,ae,Xe,Ze;Ve(x)&&(gt=x),Sn(x)?wt=x:Array.isArray(x)&&([gt,wt,Ze]=x,wt===!1&&(Xe=!0),Sn(wt)&&(ae=!0)),n(35,Os=(gt||wt)&&{text:gt,aside:Xe||ae,progressIndicator:{visible:ae,progress:wt},closeButton:Xe&&{label:cr.statusLabelButtonClose,icon:cr.statusIconButtonClose,onclick:Ze||(()=>n(227,x=void 0))}})}else n(35,Os=cr&&En||qe||Tt||je?{text:en,aside:qe||yn,progressIndicator:{visible:yn,progress:Et},closeButton:qe&&{label:cr.statusLabelButtonClose,icon:cr.statusIconButtonClose,onclick:L4}}:cr&&Le&&Ke?{text:Ke,aside:he||J,progressIndicator:{visible:J,progress:Cn},closeButton:he&&{label:cr.statusLabelButtonClose,icon:cr.statusIconButtonClose,onclick:O4}}:void 0);if(1024&t.$$.dirty[7]&&n(314,K=x!==void 0),8388608&t.$$.dirty[1]|524288&t.$$.dirty[9]|2&t.$$.dirty[12]&&U&&xr&&xr.complete&&(Xu.set(!0),setTimeout(()=>Xu.set(!1),On?100:0)),4&t.$$.dirty[0]|8192&t.$$.dirty[1]|1&t.$$.dirty[12]&&Wi&&_i&&_i.dispatchEvent(ll("selectutil",X)),4608&t.$$.dirty[1]|402653184&t.$$.dirty[9]|22&t.$$.dirty[10]|1073741824&t.$$.dirty[11]&&n(313,Gt=ba||Ee||En||qe||Tt||je||Le||K),8&t.$$.dirty[10]&&Ct(Ed,Ao=Gt?1:0,Ao),8388608&t.$$.dirty[1]|8&t.$$.dirty[10]&&Ed.set(Gt?1:0,{duration:On?500:1}),16777216&t.$$.dirty[1]&&n(42,ce=Ao>0),16&t.$$.dirty[1]&&n(301,we=!(!Os||!Os.aside)),8390672&t.$$.dirty[1]|4194368&t.$$.dirty[9]|536870912&t.$$.dirty[11]&&ce&&Os){clearTimeout(Ju);const gt={hard:On===!1};if(we){const wt=!!Os.error||!On;Ku.set(1,gt),Zu.set(xo,{hard:wt}),n(285,Ju=setTimeout(()=>{Id.set(16,gt)},1))}else Ku.set(0,gt),n(285,Ju=setTimeout(()=>{Id.set(0,gt)},1))}if(2048&t.$$.dirty[1]&&(ce||(Qu.set(void 0,{hard:!0}),Zu.set(void 0,{hard:!0}),Id.set(0,{hard:!0}))),268435456&t.$$.dirty[11]&&n(300,ge=.5*Hr),2097152&t.$$.dirty[9]|134217728&t.$$.dirty[11]&&n(73,Nt=`transform: translateX(${ya-ge}px)`),512&t.$$.dirty[1]|8192&t.$$.dirty[11]&&n(39,ee=te&&!Ee),256&t.$$.dirty[1]|1572864&t.$$.dirty[9]&&n(297,Qt=Pe&&(ee||U)?e$:ve),262144&t.$$.dirty[9]&&n(72,Ge=Qt),262144&t.$$.dirty[9]&&n(71,Ye=Qt),8&t.$$.dirty[0]|4194304&t.$$.dirty[1]|973078528&t.$$.dirty[7]|1&t.$$.dirty[8]|245760&t.$$.dirty[9]|33554432&t.$$.dirty[11]&&n(70,Qe=cr&&ti&&lu(()=>We([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[Hn&&["Button","close",{label:cr.labelClose,icon:cr.iconButtonClose,onclick:()=>Li("close"),hideLabel:!0}],Re&&["Button","revert",{label:cr.labelButtonRevert,icon:cr.iconButtonRevert,disabled:!y,onclick:_4,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[re&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:cr.labelButtonUndo,icon:cr.iconButtonUndo,disabled:!y,onclick:gs.undo,hideLabel:!0}],["Button","redo",{label:cr.labelButtonRedo,icon:cr.iconButtonRedo,disabled:!z,onclick:gs.redo,hideLabel:!0}]]],Mt.length&&["div","plugin-tools",{class:"PinturaNavSet"},Mt.filter(Boolean).map(([gt,wt,ae])=>[gt,wt,{...ae}])]]],["div","gamma",{class:"PinturaNavGroup"},[Me&&["Button","export",{label:cr.labelButtonExport,icon:pe&&cr.iconButtonExport,class:"PinturaButtonExport",onclick:C4,hideLabel:pe}]]]],{...Mi},()=>Sc.set({})))),2097152&t.$$.dirty[11]&&n(289,At=ir&&!!ir.length),1024&t.$$.dirty[9]|2113536&t.$$.dirty[11]&&n(288,jt=At&&PS(ue,ir)),1536&t.$$.dirty[9]|25174016&t.$$.dirty[11]&&At&&((gt,wt,ae,Xe)=>{if(!wt)return;const Ze={dataSizeScalar:ae};Xe&&Xe[3]>0&&(Ze.backgroundColor=[...Xe]),wt(gt,Ze).then($e=>{kc&&pi(kc),n(286,kc=$e)})})(te,Cr,jt,hi),128&t.$$.dirty[9]|6307840&t.$$.dirty[11]&&ir&&kc&&ue){const{width:gt,height:wt}=ue,ae=Ss()?"pixelated":Jr==="auto"?"auto":"pixelated";n(287,tm=ir.map(Xe=>{const Ze=Br(Xe.x,Xe.y,Xe.width,Xe.height),$e=Fi(Pn(Ze),Xe.rotation).map(jn=>dt(jn.x/gt,jn.y/wt));return{...Xe,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:kc,backgroundImageRendering:ae,backgroundCorners:$e}}))}256&t.$$.dirty[9]|1048576&t.$$.dirty[11]&&n(37,rt=[...tm,...Er||[]]),32&t.$$.dirty[1]&&_d&&n$.set(_d),4&t.$$.dirty[0]|256&t.$$.dirty[1]&&ee&&_i.dispatchEvent(ll("ready")),524288&t.$$.dirty[1]&&n(64,ep=!0),245760&t.$$.dirty[11]&&n(65,np=!0),262144&t.$$.dirty[1]&&n(66,rp=!0),131072&t.$$.dirty[1]&&n(67,ip=!0),64&t.$$.dirty[1]&&n(68,op=!0)},n(347,$=!Vf()),_=Gd()===1?g=>{g&&(Jo(g.origin,Math.round),Jo(g.translation,Math.round))}:ur,n(316,Ut=[!Bk()&&"WebGL"].filter(Boolean)),n(299,Pe=is()||Ch()&&ws()),n(69,Dt=((g,tt=!0)=>vt=>{vt.type==="ping"&&(tt&&vt.stopPropagation(),g(vt.detail.type,vt.detail.data))})(Wa.pub)),[Bl,sa,_i,cr,zo,ht,Yt,Ot,qt,oe,De,yr,Mo,Ll,Ol,us,xa,Dl,Sa,tl,Fl,ms,Ps,fi,Ya,rg,ig,zl,n1,U1,gs,Gu,W1,ju,Hu,Os,_d,rt,q,ee,Ee,at,ce,En,X,h,Lt,G,on,Xt,Nn,ne,Wr,ti,On,Ao,ra,Ii,Ir,ni,lr,oo,ao,Ls,ep,np,rp,ip,op,Dt,Qe,Ye,Ge,Nt,dn,Ce,ot,et,pt,lt,D,wo,Bo,kn,Vn,Un,nn,gn,Dn,Gn,Ln,Yr,wr,Ar,Rn,Ai,oa,Cs,Ga,Pl,Al,Ks,Qs,qh,cd,nl,dd,Sc,Su,e1,i1,Ul,o1,a1,hg,s1,wu,l1,Tu,c1,Xa,wc,Eu,Iu,_u,d1,u1,p1,h1,Gl,m1,Cu,xg,Sg,wg,Tg,Eg,Ig,f1,g1,$1,Ru,y1,b1,Mu,v1,hd,ku,md,x1,S1,Tc,Ec,w1,fd,Wl,Pu,Au,gd,T1,Lu,Ou,Du,Hl,$d,I1,wa,Fu,_1,Mg,Ic,_c,fs,R1,As,Cc,M1,bd,Rc,zu,k1,Dg,Nu,vd,Ug,F1,B1,z1,N1,V1,xd,Sd,G1,Vu,Uu,Td,H1,il,Ta,Wu,Yg,Y1,X1,Z1,qu,({target:g,propertyName:tt})=>{g===_i&&/background|outline/.test(tt)&&St&&Qg()},Jg,Ed,Xu,Zu,Ku,Id,Q1,Qu,g=>{const tt=!(!Os||!Os.closeButton)||!On;Q1.set(g.detail.width,{hard:tt}),Qu.set(Math.round(.5*-g.detail.width),{hard:tt})},D4,ql,g=>{const{keyCode:tt,metaKey:vt,ctrlKey:_t,shiftKey:gt}=g;if(tt===9&&Ha)return void g.preventDefault();if(g.target&&tt===32&&_i.contains(g.target)&&!su(g.target)&&(mi&&i&&Qh(),g.preventDefault()),tt===90&&(vt||_t))return void(gt&&vt?gs.redo():gs.undo());if(tt===89&&_t)return void gs.redo();if(tt===229)return;const wt=new Set([...Gr,tt]);ql.set(Array.from(wt))},({key:g,keyCode:tt})=>{if(g==="Meta")return ql.set([]);ql.set(Gr.filter(vt=>vt!==tt))},()=>{ql.set([])},g=>{su(g.target)||g.preventDefault()},g=>{vn&&J1(g.detail.resources[0])},()=>{tn&&Cw().then(F4)},g=>{if(!xn)return;const tt=sr((window.innerWidth-Math.abs(Ie.x))/Ie.width,0,1),vt=sr((window.innerHeight-Math.abs(Ie.y))/Ie.height,0,1);tt<.75&&vt<.75||J1((g.clipboardData||window.clipboardData).files[0])},r$,l$,g=>{de&&Aa(g.detail,de)||Ct(Wl,de=g.detail,de)},x,wd,Yi,Kn,aa,Rs,Ms,ks,Ha,Z,V,$t,ie,Zt,le,We,fe,Me,Re,re,bn,Hn,vn,xn,tn,Xn,Xi,Oi,Mr,Fr,Di,ja,Xo,ps,qa,hs,el,()=>n(61,oo=void 0),(g,tt,vt)=>{const{text:_t="",placeholder:gt="",autoClose:wt=!0,align:ae="top",justify:Xe="center",buttonConfirm:Ze,buttonCancel:$e}=vt;n(61,oo={align:ae,justify:Xe,text:_t,placeholder:gt,buttonConfirm:Ze,buttonCancel:$e,onconfirm:()=>{g(ao.value),wt&&n(61,oo=void 0)},oncancel:()=>{tt(void 0),n(61,oo=void 0)}})},Hh,yu,vc,r4,Kh,Nl,xc,Qh,Jh,t1,cg,Vl,vu,xu,ud,E1,rl,Yu,K1,Ju,kc,tm,jt,At,i,k,fn,pe,Mt,z,y,Qt,U,Pe,ge,we,he,Cn,J,Ke,Le,qe,Et,yn,en,je,Tt,Gt,K,Ne,Ut,Te,j,Se,Q,Jt,yt,ft,It,Ht,ke,Ae,Wt,xt,ct,Y,mt,St,st,O,I,P,R,M,E,A,C,v,T,p,S,$,b,a,d,o,c,r,te,ue,wn,Zn,_r,Ie,fr,Er,ir,Jr,hi,Cr,Mi,or,ya,Hr,xo,ba,Wi,xr,ar,So,Hi,ia,Lo,Ua,jo,no,ji,va,Oo,jr,ki,qi,In,Do,ei,To,oi,Kr,Yo,ai,an,Tn,sn,se,Sr,Wn,_o,Fo,Co,li,Ro,B,Oe,He,function(){n(31,Gu=nc.innerWidth),n(32,W1=nc.innerHeight)},g=>Ct(fd,Un=g.detail,Un),({detail:g})=>n(44,X=g),(g,tt)=>tt.id===g,function(g,tt){t.$$.not_equal(sa[tt],g)&&(sa[tt]=g,n(1,sa),n(268,vc),n(27,zl))},g=>n(63,Ls=Ls.concat(g)),g=>n(63,Ls=Ls.filter(tt=>tt!==g)),(g,{detail:tt})=>n(38,q[g]=tt,q),g=>Ct(Ec,wo=g.detail,wo),g=>g.id===X,function(g){t.$$.not_equal(sa[X],g)&&(sa[X]=g,n(1,sa),n(268,vc),n(27,zl))},()=>n(63,Ls=Ls.concat(X)),()=>n(63,Ls=Ls.filter(g=>g!==X)),({detail:g})=>n(38,q[X]=g,q),g=>{const tt={...g,...r$()},{annotationShapes:vt,decorationShapes:_t,interfaceShapes:gt,frameShapes:wt,selectionShapes:ae}=oe({annotationShapes:Nn,decorationShapes:Xt,interfaceShapes:Rn,frameShapes:on,selectionShapes:lr},tt);return l$(tt,rt,vt,_t,gt,wt,ae)},()=>{n(64,ep=!1),n(65,np=!1),n(66,rp=!1),n(67,ip=!1),n(68,op=!1)},function(g){zn[g?"unshift":"push"](()=>{_d=g,n(36,_d)})},function(g){Bl=g,n(0,Bl),n(258,ja)},function(g){ju=g,n(33,ju)},function(g){Hu=g,n(34,Hu)},function(g){zn[g?"unshift":"push"](()=>{ao=g,n(62,ao)})},function(g){zn[g?"unshift":"push"](()=>{_i=g,n(2,_i)})},g=>Ct(S1,Wr=g.detail,Wr)]}class kb extends mn{constructor(e){super(),hn(this,e,i6,r6,rn,{class:229,layout:230,stores:231,locale:3,id:4,util:232,utils:233,animations:234,disabled:235,status:227,previewUpscale:236,previewPad:237,previewMaskOpacity:5,previewImageDataMaxSize:238,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:239,elasticityMultiplier:8,willRevert:240,willProcessImage:241,willRenderCanvas:9,willRenderToolbar:242,willSetHistoryInitialState:243,enableButtonExport:244,enableButtonRevert:245,enableNavigateHistory:246,enableToolbar:10,enableUtils:247,enableButtonClose:248,enableDropImage:249,enablePasteImage:250,enableBrowseImage:251,enableTransparencyGrid:11,layoutDirectionPreference:252,layoutHorizontalUtilsPreference:253,layoutVerticalUtilsPreference:254,layoutVerticalToolbarPreference:255,layoutVerticalControlGroupsPreference:256,layoutVerticalControlTabsPreference:257,textDirection:12,markupEditorZoomLevel:258,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:259,muteAudio:260,willSetMediaInitialTimeOffset:261,enablePan:17,enableZoom:18,enableZoomControls:262,enableZoomInput:19,enablePanInput:263,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,hideTextInput:264,showTextInput:265,imagePreviewSrc:266,imageOrienter:267,pluginComponents:268,pluginOptions:27,sub:269,pluginInterface:1,root:2,play:270,pause:271,isPaused:272,togglePlayPause:273,mute:274,unmute:275,toggleMute:276,getDuration:277,getCurrentTime:278,setCurrentTime:279,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:228,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[229]}set class(e){this.$$set({class:e}),F()}get layout(){return this.$$.ctx[230]}set layout(e){this.$$set({layout:e}),F()}get stores(){return this.$$.ctx[231]}set stores(e){this.$$set({stores:e}),F()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),F()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),F()}get util(){return this.$$.ctx[232]}set util(e){this.$$set({util:e}),F()}get utils(){return this.$$.ctx[233]}set utils(e){this.$$set({utils:e}),F()}get animations(){return this.$$.ctx[234]}set animations(e){this.$$set({animations:e}),F()}get disabled(){return this.$$.ctx[235]}set disabled(e){this.$$set({disabled:e}),F()}get status(){return this.$$.ctx[227]}set status(e){this.$$set({status:e}),F()}get previewUpscale(){return this.$$.ctx[236]}set previewUpscale(e){this.$$set({previewUpscale:e}),F()}get previewPad(){return this.$$.ctx[237]}set previewPad(e){this.$$set({previewPad:e}),F()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),F()}get previewImageDataMaxSize(){return this.$$.ctx[238]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),F()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),F()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),F()}get zoomMaskOpacity(){return this.$$.ctx[239]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),F()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),F()}get willRevert(){return this.$$.ctx[240]}set willRevert(e){this.$$set({willRevert:e}),F()}get willProcessImage(){return this.$$.ctx[241]}set willProcessImage(e){this.$$set({willProcessImage:e}),F()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),F()}get willRenderToolbar(){return this.$$.ctx[242]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),F()}get willSetHistoryInitialState(){return this.$$.ctx[243]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),F()}get enableButtonExport(){return this.$$.ctx[244]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),F()}get enableButtonRevert(){return this.$$.ctx[245]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),F()}get enableNavigateHistory(){return this.$$.ctx[246]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),F()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),F()}get enableUtils(){return this.$$.ctx[247]}set enableUtils(e){this.$$set({enableUtils:e}),F()}get enableButtonClose(){return this.$$.ctx[248]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),F()}get enableDropImage(){return this.$$.ctx[249]}set enableDropImage(e){this.$$set({enableDropImage:e}),F()}get enablePasteImage(){return this.$$.ctx[250]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),F()}get enableBrowseImage(){return this.$$.ctx[251]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),F()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),F()}get layoutDirectionPreference(){return this.$$.ctx[252]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),F()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[253]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),F()}get layoutVerticalUtilsPreference(){return this.$$.ctx[254]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),F()}get layoutVerticalToolbarPreference(){return this.$$.ctx[255]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),F()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[256]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),F()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[257]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),F()}get textDirection(){return this.$$.ctx[12]}set textDirection(e){this.$$set({textDirection:e}),F()}get markupEditorZoomLevel(){return this.$$.ctx[258]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),F()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),F()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),F()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),F()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),F()}get markupEditorInteractionMode(){return this.$$.ctx[259]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),F()}get muteAudio(){return this.$$.ctx[260]}set muteAudio(e){this.$$set({muteAudio:e}),F()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[261]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),F()}get enablePan(){return this.$$.ctx[17]}set enablePan(e){this.$$set({enablePan:e}),F()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(e){this.$$set({enableZoom:e}),F()}get enableZoomControls(){return this.$$.ctx[262]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),F()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),F()}get enablePanInput(){return this.$$.ctx[263]}set enablePanInput(e){this.$$set({enablePanInput:e}),F()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),F()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),F()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),F()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),F()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),F()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),F()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),F()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),F()}get hideTextInput(){return this.$$.ctx[264]}get showTextInput(){return this.$$.ctx[265]}get imagePreviewSrc(){return this.$$.ctx[266]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),F()}get imageOrienter(){return this.$$.ctx[267]}set imageOrienter(e){this.$$set({imageOrienter:e}),F()}get pluginComponents(){return this.$$.ctx[268]}set pluginComponents(e){this.$$set({pluginComponents:e}),F()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(e){this.$$set({pluginOptions:e}),F()}get sub(){return this.$$.ctx[269]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),F()}get play(){return this.$$.ctx[270]}get pause(){return this.$$.ctx[271]}get isPaused(){return this.$$.ctx[272]}get togglePlayPause(){return this.$$.ctx[273]}get mute(){return this.$$.ctx[274]}get unmute(){return this.$$.ctx[275]}get toggleMute(){return this.$$.ctx[276]}get getDuration(){return this.$$.ctx[277]}get getCurrentTime(){return this.$$.ctx[278]}get setCurrentTime(){return this.$$.ctx[279]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),F()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[228]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),F()}get history(){return this.$$.ctx[30]}}typeof window<"u"&&(t=>{if(t&&t._clpdx4s)return;const[e,n,r]=[[99,111,110,115,111,108,101],[108,111,103],[84,104,105,115,32,118,101,114,115,105,111,110,32,111,102,32,80,105,110,116,117,114,97,32,105,115,32,102,111,114,32,116,101,115,116,105,110,103,32,112,117,114,112,111,115,101,115,32,111,110,108,121,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,47,32,116,111,32,112,117,114,99,104,97,115,101,32,97,32,118,97,108,105,100,32,108,105,99,101,110,115,101,46]].map(i=>i.map(o=>String.fromCharCode(o)).join(""));t&&t[e]&&t[e][n](r)})(window);const o6=["klass","stores","isVisible","isActive","isActiveFraction","locale"],a6=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],s6=["locale"];let Xm;const Rw=new Set([]),Vp={},k0=new Map,l6=(...t)=>{t.filter(e=>!!e.util).forEach(e=>{const[n,r,i=()=>!0]=e.util;k0.has(n)||(k0.set(n,{Component:r,isSupported:i}),Uf(r).filter(o=>!o6.includes(o)).forEach(o=>{Rw.add(o),Vp[o]?Vp[o].push(n):Vp[o]=[n]}))})};var Mw=[...ZS,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"],kw=(t,e,n={})=>{const{prefix:r="pintura:"}=n;return Mw.map(i=>t.on(i,o=>td(e)?((a,s,l)=>a.dispatchEvent(new CustomEvent(s,{detail:l,bubbles:!0,cancelable:!0})))(e,`${r}${i}`,o):e(i,o)))};const c6=t=>Ve(t[0]),d6=t=>!c6(t),Pw=t=>t[1],P0=t=>t[3]||[],u6=(t,e)=>{const n=A0(t,e);return pw(n,r=>Pw(r)===t),n},A0=(t,e)=>{if(d6(e)){if(e.find(r=>Pw(r)===t))return e;const n=e.find(r=>A0(t,P0(r)));return n&&n[3]}return A0(t,P0(e))},p6=()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],h6=()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],m6=()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],f6=()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],g6=()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],$6=()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],y6=()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],b6=()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],v6=()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],x6=()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],S6=()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],w6=()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],T6=()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0],E6={chrome:h6,fade:m6,pastel:p6,cold:g6,warm:f6,monoDefault:$6,monoWash:b6,monoNoir:y6,monoStark:v6,sepiaDefault:x6,sepiaRust:w6,sepiaBlues:S6,sepiaColor:T6};var I6={filterFunctions:E6,filterOptions:[["Default",[[void 0,t=>t.labelDefault]]],["Classic",[["chrome",t=>t.filterLabelChrome],["fade",t=>t.filterLabelFade],["cold",t=>t.filterLabelCold],["warm",t=>t.filterLabelWarm],["pastel",t=>t.filterLabelPastel]]],["Monochrome",[["monoDefault",t=>t.filterLabelMonoDefault],["monoNoir",t=>t.filterLabelMonoNoir],["monoStark",t=>t.filterLabelMonoStark],["monoWash",t=>t.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",t=>t.filterLabelSepiaDefault],["sepiaRust",t=>t.filterLabelSepiaRust],["sepiaBlues",t=>t.filterLabelSepiaBlues],["sepiaColor",t=>t.filterLabelSepiaColor]]]]};const _6={base:0,min:-.25,max:.25,getLabel:t=>bl(t/.25),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update(n=>({...n,brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]}))},C6={base:1,min:.5,max:1.5,getLabel:t=>bl(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update(n=>({...n,contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]}))},R6={base:1,min:0,max:2,getLabel:t=>bl(t-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update(n=>({...n,saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]}))},M6={base:1,min:.5,max:1.5,getLabel:t=>bl(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update(n=>({...n,exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]}))},k6={base:1,min:.15,max:4,getLabel:t=>bl(t<1?(t-.15)/.85-1:(t-1)/3),getStore:({imageGamma:t})=>t},P6={base:0,min:-1,max:1,getStore:({imageVignette:t})=>t},A6={base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:t})=>t,getValue:t=>{if(t.clarity)return t.clarity[0]===0?t.clarity[1]/-1:t.clarity[1]/-2},setValue:(t,e)=>{t.update(n=>({...n,clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]}))}},L6={base:0,min:-1,max:1,getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(!t.temperature)return;const e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15},setValue:(t,e)=>t.update(n=>({...n,temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]}))};var O6={finetuneControlConfiguration:{gamma:k6,brightness:_6,contrast:C6,saturation:R6,exposure:M6,temperature:L6,clarity:A6,vignette:P6},finetuneOptions:[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!Vf()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean)};const D6={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},F6={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},B6={shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:'<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},z6={shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:'<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>'},N6={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:'<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>'},V6={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:'<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},U6={shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:'<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>'},G6={shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:'<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>'},W6={shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'};var H6={frameStyles:{solidSharp:D6,solidRound:F6,lineSingle:B6,lineMultiple:z6,edgeSeparate:N6,edgeCross:V6,edgeOverlap:U6,hook:G6,polaroid:W6},frameOptions:[[void 0,t=>t.labelNone],["solidSharp",t=>t.frameLabelMatSharp],["solidRound",t=>t.frameLabelMatRound],["lineSingle",t=>t.frameLabelLineSingle],["lineMultiple",t=>t.frameLabelLineMultiple],["edgeCross",t=>t.frameLabelEdgeCross],["edgeSeparate",t=>t.frameLabelEdgeSeparate],["edgeOverlap",t=>t.frameLabelEdgeOverlap],["hook",t=>t.frameLabelCornerHooks],["polaroid",t=>t.frameLabelPolaroid]]},rd=t=>t.charAt(0).toUpperCase()+t.slice(1);let Fd=null;var Zm=()=>{if(Fd===null)if(Ji())try{Fd=document.fonts.check("16px TestNonExistingFont")===!1}catch{Fd=!1}else Fd=!1;return Fd};const cu=(t,e)=>n=>n[e?`${e}${rd(t)}`:t],j6=t=>[t,""+t],Bh=(t,e)=>n=>[t[n],cu(n,e)],Aw=t=>Array.isArray(t)&&t.every(Sn)?t.map(j6):t,Jl=[1,.2549,.2118],Pb=[1,1,1,0],q6=t=>{const{hideLabel:e=!0}=t||{};return s8(["new","add","subtract"].map(n=>[n,cu(n,"shapeLabelSelectionMode"),{icon:cu(n,"shapeIconSelectionMode"),hideLabel:e}]),{title:n=>n.shapeTitleSelectionMode,layout:"radio"})},Y6=t=>Lw(t,{title:e=>e.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(e,n)=>`<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="${2+8*n}"/>`}),Ab={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[]}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},al=(t,e={},n)=>{if(!Ab[t])return;const{position:r="relative",inputMode:i="drag",isSelection:o=!1}=n||{};return[{...Ab[t](),...e},{position:r,inputMode:i,isSelection:o}]},X6=t=>({sharpie:al("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:"0.5%",strokeColor:[...Jl],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0}),eraser:al("eraser"),path:al("path",{pathClose:void 0,strokeWidth:"0.5%",strokeColor:[...Jl],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:al("line",{strokeColor:[...Jl],strokeWidth:"0.5%"}),arrow:al("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...Jl],strokeWidth:"0.5%"}),rectangle:al("rectangle",{strokeColor:[...Pb],backgroundColor:[...Jl]}),ellipse:al("ellipse",{strokeColor:[...Pb],backgroundColor:[...Jl]}),text:al("text",{color:[...Jl],fontSize:"2%"}),...t}),Km=(t,e,n)=>[t,e||cu(t,"shapeLabelTool"),{icon:cu(t,"shapeIconTool"),...n}],Z6=(t=["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"])=>t.map(e=>Ve(e)?Km(e):Array.isArray(e)?$c(e[1])?Km(e[0],void 0,e[1]):Km(e[0],e[1],e[2]):void 0).filter(Boolean),K6=t=>Object.keys(t).map(Bh(t,"shapeTitleColor")),Q6=t=>Object.keys(t).map(Bh(t,"labelSize")),J6=t=>Object.keys(t).map(Bh(t,"labelSize")),Lb=t=>Object.keys(t).map(Bh(t,"labelSize")),t8=t=>[...t],e8=t=>t.map(e=>[e,n=>n["shapeLabelFontStyle"+e.filter(r=>r!=="normal").map(rd).join("")]]),n8=t=>t.map(e=>[_w(e),n=>n["shapeTitleLineDecoration"+rd(e)],{icon:n=>n["shapeIconLineDecoration"+rd(e)]}]),as=(t,e)=>{const{defaultKey:n,defaultValue:r,defaultOptions:i}=e||{},o=[];return n&&(o[0]=[r,a=>a[n],{...i}]),[...o,...t]},Ob=t=>t.split(",").map(e=>e.trim()).some(e=>document.fonts.check("16px "+e)),Db=(t={})=>["ToggleSlider",{...t}],r8=(t,e={defaultKey:"labelDefault"})=>["Dropdown",{title:n=>n.shapeTitleFontFamily,onload:({options:n=[]})=>{Zm()&&n.map(([r])=>r).filter(Boolean).filter(r=>!Ob(r)).forEach(r=>{const i="PinturaFontTest-"+r.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(i)||document.body.append(br("span",{textContent:" ",id:i,class:"PinturaFontTest",style:`font-family:${r};font-size:0;color:transparent;`}))})},ondestroy:()=>{Zm()&&document.querySelectorAll(".PinturaFontTest").forEach(n=>n.remove())},optionLabelStyle:n=>"font-family: "+n,options:as(t,e),optionFilter:n=>{if(!Zm())return!0;const[r]=n;return r?Ob(r):!0}}],zh=(t,e={})=>["ColorPicker",{options:as(t),...e}],i8=(t,e={})=>zh(t,{title:n=>n.labelColor,...e}),o8=(t,e={})=>zh(t,{title:n=>n.shapeTitleBackgroundColor,...e}),a8=(t,e={})=>zh(t,{title:n=>n.shapeTitleStrokeColor,options:as(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(n,r)=>{const i=r.strokeWidth;(Sn(i)||Ve(i)?parseFloat(i):0)>0||(r.strokeWidth=e&&e.defaultStrokeWidth||"0.5%")},...e}),Lw=(t,e)=>{const{title:n,optionHideLabel:r=!1,layout:i,optionIcon:o=!1}=e||{},a=Aw(t),s=t.map(([u])=>Ve(u)?parseFloat(u):u),l=Math.max(...s),c=Math.min(...s),d=l-c;return[i==="radio"?"RadioGroup":"Dropdown",{title:n===!1?void 0:n||(u=>u.shapeTitleStrokeWidth),options:u=>{const p=e?a.map(h=>{const[f,m,$={}]=h,b=Ve(f)?parseFloat(f):f,S=(b-c)/d;let v;return o==="line"?v=`<path stroke="currentColor" stroke-linecap="square" stroke-width="${.1+.875*S}em" d="M3,12 H20"/>`:o==="dot"?v=`<circle fill="currentColor" cx="12" cy="12" r="${2+8*S}"/>`:Ve(o)?v=o:hr(o)&&(v=o(b,S)),[f,m,{icon:v,hideLabel:r,...$}]}):a;return Fe(u,"backgroundColor")?as(p,{defaultKey:"shapeLabelStrokeNone"}):as(p)},onchange:(u,p)=>{if(!u)return;const h=p.strokeColor||[];if(h[3])return;const f=[...h];f[3]=1,p.strokeColor=f}}]},s8=(t,e)=>{const{title:n,layout:r}=e||{};return[r==="radio"?"RadioGroup":"Dropdown",{title:n,options:as(t)}]},Ow=(t,e,n)=>["Dropdown",{title:r=>r[e],options:as(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:n}],l8=t=>Ow(t,"shapeTitleLineStart","transform: scaleX(-1)"),c8=t=>Ow(t,"shapeTitleLineEnd"),d8=t=>zh(t,{title:e=>e.shapeTitleTextColor,options:as(t)}),u8=t=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&`font-style:${e[0]};font-weight:${e[1]}`,options:as(t,{defaultKey:"shapeLabelFontStyleNormal"})}],Dw=t=>["ShorthandControl",t],Fw=(t,e,n,r)=>{r||t.find(([o])=>o===n)||(r={defaultKey:"labelAuto",defaultValue:n});const i=Aw(t);return["Dropdown",{title:e,options:as(i,r),...r}]},p8=(t,e)=>Fw(t,n=>n.shapeTitleFontSize,"4%",e),h8=(t,e)=>Fw(t,n=>n.shapeTitleLineHeight,"120%",e),m8=t=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:as(t)}],Qm={colorOptions:()=>K6({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),lineEndStyleOptions:()=>n8(["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"]),fontFamilyOptions:()=>t8([["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]]),fontStyleOptions:()=>e8([["normal","bold"],["italic","normal"],["italic","bold"]]),textAlignOptions:()=>["left","center","right"].map(t=>[t,e=>e["shapeTitleTextAlign"+rd(t)],{hideLabel:!0,icon:e=>e["shapeIconTextAlign"+rd(t)]}]),strokeWidthOptions:()=>Lb({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),brushSizeOptions:()=>Lb(Object.entries({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}).reduce((t,[e,n])=>(t[e]=2*parseFloat(n)+"%",t),{})),fontSizeOptions:()=>Q6({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),lineHeightOptions:()=>J6({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"})},f8=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),Bw=(t,e)=>Ve(e)?t+"%":t,zw=(t,e,n,r)=>Ve(r)?Math.round(t/n*100)+"%":""+f8.format(t),Jm={getValue:t=>parseFloat(t),setValue:Bw,label:zw,step:.05,labelClass:"PinturaPercentageLabel"},g8={factory:Dw,options:{title:"Text shadow",controls:[["ToggleSlider","x",{...Jm,min:-100,max:100,labelPrefix:"X"}],["ToggleSlider","y",{...Jm,min:-100,max:100,labelPrefix:"Y"}],["ToggleSlider","blur",{...Jm,min:0,max:25,labelPrefix:t=>t.shapeTitleTextShadowBlur}],["ColorPicker","color",{enablePresets:!1}]]}},Cp={defaultColor:{factory:i8,items:"colorOptions"},defaultNumber:{factory:Db},defaultPercentage:{factory:Db,options:{getValue:t=>parseFloat(t),setValue:t=>t+"%",step:.05,label:(t,e,n)=>Math.round(t/n*100)+"%",labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:o8},strokeColor:{items:"colorOptions",factory:a8},strokeWidth:{items:"strokeWidthOptions",factory:Lw},brushSize:{items:"brushSizeOptions",factory:Y6},drawMode:{factory:q6},lineStart:{items:"lineEndStyleOptions",factory:l8},lineEnd:{items:"lineEndStyleOptions",factory:c8},color:{items:"colorOptions",factory:d8},fontFamily:{items:"fontFamilyOptions",factory:r8},fontStyle_fontWeight:{items:"fontStyleOptions",factory:u8},fontSize:{items:"fontSizeOptions",factory:p8},lineHeight:{items:"lineHeightOptions",factory:h8},textAlign:{items:"textAlignOptions",factory:m8},textShadowX_textShadowY_textShadowBlur_textShadowColor:g8,textOutlineWidth_textOutlineColor:{factory:Dw,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:t=>parseFloat(t),setValue:Bw,label:zw,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:t=>t.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:t=>t.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:t=>t.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:t=>t.labelAmount}}},Nw=(t={})=>{const e={...Cp,...t},n={};return Object.entries(e).forEach(([r,i])=>{if(!/Options$/.test(r))if(Cp[r]&&$c(i)&&!zr(i)){const{component:o,factory:a,items:s,options:l={}}=e[r];if(Ve(a))n[r]=[a,l];else{const c=Cp[r].items;let d=Ve(c)?e[c]||Qm[c]():void 0;Ve(s)&&Qm[s]?d=e[s]?e[s].every(p=>!Array.isArray(p))?e[s].map(p=>[p,p]):e[s]:Qm[s]():(s||l.items)&&(d=s||l.items);let u=a||Cp[r].factory;hr(u)?n[r]=d?u(d,l):u(l):o&&(n[r]=[o,{...l,items:s}])}}else n[r]=i}),n};function $8(t){let e,n,r,i,o;const a=t[7].default,s=Si(a,t,t[6],null);return{c(){e=bt("div"),n=bt("div"),s&&s.c(),w(n,"class","PinturaToolbarInner"),w(e,"class","PinturaToolbar"),w(e,"data-layout",t[1]),w(e,"data-overflow",t[0])},m(l,c){it(l,e,c),Rt(e,n),s&&s.m(n,null),r=!0,i||(o=[kt(n,"measure",t[3]),Jn(Ui.call(null,n)),kt(e,"measure",t[2]),Jn(Ui.call(null,e))],i=!0)},p(l,[c]){s&&s.p&&(!r||64&c)&&Ti(s,a,l,l[6],r?wi(a,l[6],c,null):Ei(l[6]),null),(!r||2&c)&&w(e,"data-layout",l[1]),(!r||1&c)&&w(e,"data-overflow",l[0])},i(l){r||(L(s,l),r=!0)},o(l){W(s,l),r=!1},d(l){l&&nt(e),s&&s.d(l),i=!1,tr(o)}}}function y8(t,e,n){let r,i,{$$slots:o={},$$scope:a}=e,s=0,l=0,c=0;const d=()=>{n(0,i=r==="compact"&&s>c?"overflow":void 0)};return t.$$set=u=>{"$$scope"in u&&n(6,a=u.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&n(1,r=l>c?"compact":"default")},[i,r,({detail:u})=>{const{width:p}=u;n(5,c=p),d()},({detail:u})=>{const{width:p}=u;p>l&&n(4,l=p),s=p,i||d()},l,c,a,o]}class Vw extends mn{constructor(e){super(),hn(this,e,y8,$8,rn,{})}}function b8(t){let e,n,r,i;const o=t[5].default,a=Si(o,t,t[4],null);return{c(){e=bt("div"),a&&a.c(),w(e,"class",t[0])},m(s,l){it(s,e,l),a&&a.m(e,null),n=!0,r||(i=[kt(e,"measure",function(){Qn(t[1]&&t[3])&&(t[1]&&t[3]).apply(this,arguments)}),Jn(t[2].call(null,e))],r=!0)},p(s,[l]){t=s,a&&a.p&&(!n||16&l)&&Ti(a,o,t,t[4],n?wi(o,t[4],l,null):Ei(t[4]),null),(!n||1&l)&&w(e,"class",t[0])},i(s){n||(L(a,s),n=!0)},o(s){W(a,s),n=!1},d(s){s&&nt(e),a&&a.d(s),r=!1,tr(i)}}}function v8(t,e,n){let{$$slots:r={},$$scope:i}=e;const o=ls();let{class:a=null}=e;const s=kr("measurable");let l=!1;return _l(()=>n(1,l=!0)),t.$$set=c=>{"class"in c&&n(0,a=c.class),"$$scope"in c&&n(4,i=c.$$scope)},[a,l,s,({detail:c})=>o("measure",c),i,r]}class x8 extends mn{constructor(e){super(),hn(this,e,v8,b8,rn,{class:0})}}const S8=t=>({}),Fb=t=>({}),w8=t=>({}),Bb=t=>({}),T8=t=>({}),zb=t=>({});function Nb(t){let e,n;const r=t[4].header,i=Si(r,t,t[3],zb);return{c(){e=bt("div"),i&&i.c(),w(e,"class","PinturaUtilHeader")},m(o,a){it(o,e,a),i&&i.m(e,null),n=!0},p(o,a){i&&i.p&&(!n||8&a)&&Ti(i,r,o,o[3],n?wi(r,o[3],a,T8):Ei(o[3]),zb)},i(o){n||(L(i,o),n=!0)},o(o){W(i,o),n=!1},d(o){o&&nt(e),i&&i.d(o)}}}function Vb(t){let e,n;const r=t[4].footer,i=Si(r,t,t[3],Fb);return{c(){e=bt("div"),i&&i.c(),w(e,"class","PinturaUtilFooter")},m(o,a){it(o,e,a),i&&i.m(e,null),n=!0},p(o,a){i&&i.p&&(!n||8&a)&&Ti(i,r,o,o[3],n?wi(r,o[3],a,S8):Ei(o[3]),Fb)},i(o){n||(L(i,o),n=!0)},o(o){W(i,o),n=!1},d(o){o&&nt(e),i&&i.d(o)}}}function E8(t){let e,n,r,i,o,a,s=t[1]&&Nb(t);const l=t[4].main,c=Si(l,t,t[3],Bb),d=c||function(p){let h,f;return h=new x8({props:{class:"PinturaStage"}}),h.$on("measure",p[5]),{c(){zt(h.$$.fragment)},m(m,$){Ft(h,m,$),f=!0},p:Je,i(m){f||(L(h.$$.fragment,m),f=!0)},o(m){W(h.$$.fragment,m),f=!1},d(m){Bt(h,m)}}}(t);let u=t[2]&&Vb(t);return{c(){s&&s.c(),e=be(),n=bt("div"),d&&d.c(),r=be(),u&&u.c(),i=be(),o=Nr(),w(n,"class","PinturaUtilMain")},m(p,h){s&&s.m(p,h),it(p,e,h),it(p,n,h),d&&d.m(n,null),t[6](n),it(p,r,h),u&&u.m(p,h),it(p,i,h),it(p,o,h),a=!0},p(p,[h]){p[1]?s?(s.p(p,h),2&h&&L(s,1)):(s=Nb(p),s.c(),L(s,1),s.m(e.parentNode,e)):s&&(Be(),W(s,1,1,()=>{s=null}),ze()),c&&c.p&&(!a||8&h)&&Ti(c,l,p,p[3],a?wi(l,p[3],h,w8):Ei(p[3]),Bb),p[2]?u?(u.p(p,h),4&h&&L(u,1)):(u=Vb(p),u.c(),L(u,1),u.m(i.parentNode,i)):u&&(Be(),W(u,1,1,()=>{u=null}),ze())},i(p){a||(L(s),L(d,p),L(u),L(!1),a=!0)},o(p){W(s),W(d,p),W(u),W(!1),a=!1},d(p){s&&s.d(p),p&&nt(e),p&&nt(n),d&&d.d(p),t[6](null),p&&nt(r),u&&u.d(p),p&&nt(i),p&&nt(o)}}}function I8(t,e,n){let{$$slots:r={},$$scope:i}=e,{hasHeader:o=!!e.$$slots.header}=e,{hasFooter:a=!!e.$$slots.footer}=e,{root:s}=e;return t.$$set=l=>{n(7,e=Or(Or({},e),iu(l))),"hasHeader"in l&&n(1,o=l.hasHeader),"hasFooter"in l&&n(2,a=l.hasFooter),"root"in l&&n(0,s=l.root),"$$scope"in l&&n(3,i=l.$$scope)},e=iu(e),[s,o,a,i,r,function(l){go.call(this,t,l)},function(l){zn[l?"unshift":"push"](()=>{s=l,n(0,s)})}]}class bc extends mn{constructor(e){super(),hn(this,e,I8,E8,rn,{hasHeader:1,hasFooter:2,root:0})}}function Ub(t){let e,n;return{c(){e=bt("div"),w(e,"class","PinturaRangeInputMeter"),w(e,"style",n=`transform: translateX(${t[9].x-t[11].x}px) translateY(${t[9].y-t[11].y}px)`)},m(r,i){it(r,e,i),e.innerHTML=t[7]},p(r,i){128&i[0]&&(e.innerHTML=r[7]),512&i[0]&&n!==(n=`transform: translateX(${r[9].x-r[11].x}px) translateY(${r[9].y-r[11].y}px)`)&&w(e,"style",n)},d(r){r&&nt(e)}}}function _8(t){let e,n,r,i,o,a,s,l,c,d,u,p=t[9]&&Ub(t);return{c(){e=bt("div"),n=bt("span"),r=be(),i=bt("button"),o=vr(t[1]),s=be(),l=bt("div"),p&&p.c(),w(n,"class","PinturaRangeInputValue"),w(i,"class","PinturaRangeInputReset"),w(i,"type","button"),i.disabled=a=t[0]===t[2],w(l,"class","PinturaRangeInputInner"),w(l,"style",t[8]),w(l,"data-value-limited",t[5]),w(e,"class","PinturaRangeInput"),w(e,"tabindex","0")},m(h,f){it(h,e,f),Rt(e,n),n.innerHTML=t[3],Rt(e,r),Rt(e,i),Rt(i,o),Rt(e,s),Rt(e,l),p&&p.m(l,null),d||(u=[kt(i,"click",t[16]),kt(l,"interactionstart",t[12]),kt(l,"interactionupdate",t[14]),kt(l,"interactionend",t[15]),kt(l,"interactionrelease",t[13]),Jn(c=Ml.call(null,l,{inertia:t[6]})),kt(l,"measure",t[36]),Jn(Ui.call(null,l)),kt(e,"wheel",t[18],{passive:!1}),kt(e,"nudge",t[19]),Jn(kl.call(null,e,{direction:"horizontal",preventDefault:!0}))],d=!0)},p(h,f){8&f[0]&&(n.innerHTML=h[3]),2&f[0]&&Vr(o,h[1]),5&f[0]&&a!==(a=h[0]===h[2])&&(i.disabled=a),h[9]?p?p.p(h,f):(p=Ub(h),p.c(),p.m(l,null)):p&&(p.d(1),p=null),256&f[0]&&w(l,"style",h[8]),32&f[0]&&w(l,"data-value-limited",h[5]),c&&Qn(c.update)&&64&f[0]&&c.update.call(null,{inertia:h[6]})},i:Je,o:Je,d(h){h&&nt(e),p&&p.d(),d=!1,tr(u)}}}function C8(t,e,n){let r,i,o,a,s,l,c,d,u,{labelReset:p="Reset"}=e,{direction:h="x"}=e,{min:f=0}=e,{max:m=1}=e,{base:$=f}=e,{value:b=0}=e,{valueLabel:S=0}=e,{valueMin:v}=e,{valueMax:T}=e,{oninputstart:C=ve}=e,{oninputmove:R=ve}=e,{oninputend:A=ve}=e,{elasticity:E=0}=e,{nudgeMultiplier:M}=e,{step:P=8}=e;const _=kr("isAnimated");N(t,_,U=>n(6,d=U));const y=(U,ft,yt)=>Math.ceil((U-yt)/ft)*ft+yt;let z,O,I;const k={x:2,y:0},G=(U,ft,yt)=>`M ${U-yt} ${ft} a ${yt} ${yt} 0 1 0 0 -1`;let X,q,D=!1,lt={snap:!1,elastic:!1};const pt=(U,ft,yt)=>{const It=U[h]+ft[h],Jt=sr(It,X[1][h],X[0][h]),pe=E?Jt+pl(It-Jt,E):Jt,mt=yt.elastic?pe:Jt,ot=dt(0,0);return ot[h]=mt,Lt.set(ot,{hard:yt.snap}),sr(Y(ot,h),f,m)},Lt=un();N(t,Lt,U=>n(9,u=U));const et=(U,ft)=>{const yt=.5*(z[ft]-a[ft])-(Wd(U,f,m)*a[ft]-.5*a[ft]);return{x:ft==="x"?yt:0,y:ft==="y"?yt:0}},Y=(U,ft)=>{const yt=-(U[ft]-.5*z[ft])/a[ft];return f+yt*r},j=Lt.subscribe(U=>{U&&q&&R(sr(Y(U,h),f,m))}),ct=U=>{const ft=[et(v??f,h),et(T??m,h)],yt={x:h==="x"?u.x+U:0,y:h==="y"?u.y+U:0},It=sr(yt[h],ft[1][h],ft[0][h]),Jt={...u,[h]:It};Ct(Lt,u=Jt,u);const pe=sr(Y(Jt,h),f,m);C(),R(pe),A(pe)};return $a(()=>{j()}),t.$$set=U=>{"labelReset"in U&&n(1,p=U.labelReset),"direction"in U&&n(20,h=U.direction),"min"in U&&n(21,f=U.min),"max"in U&&n(22,m=U.max),"base"in U&&n(2,$=U.base),"value"in U&&n(0,b=U.value),"valueLabel"in U&&n(3,S=U.valueLabel),"valueMin"in U&&n(23,v=U.valueMin),"valueMax"in U&&n(24,T=U.valueMax),"oninputstart"in U&&n(25,C=U.oninputstart),"oninputmove"in U&&n(26,R=U.oninputmove),"oninputend"in U&&n(27,A=U.oninputend),"elasticity"in U&&n(28,E=U.elasticity),"nudgeMultiplier"in U&&n(29,M=U.nudgeMultiplier),"step"in U&&n(30,P=U.step)},t.$$.update=()=>{if(6291456&t.$$.dirty[0]&&n(32,r=m-f),10485760&t.$$.dirty[0]&&n(34,i=v!=null?Math.max(v,f):f),20971520&t.$$.dirty[0]&&n(33,o=T!=null?Math.min(T,m):m),6291460&t.$$.dirty[0]&&n(35,s=Wd($,f,m)),16&t.$$.dirty[0]|16&t.$$.dirty[1]&&z){const U=.5*z.y;let ft,yt=40*s,It="",Jt=z.y,pe="";for(let mt=0;mt<=40;mt++){const ot=k.x+10*mt,Q=U;It+=G(ot,Q,mt%5==0?2:.75)+" ",ft=ot+k.x,mt===yt&&(pe=`<path d="M${ot} ${Q-4} l2 3 l-2 -1 l-2 1 z"/>`)}n(7,O=`<svg width="${ft}" height="${Jt}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${ft} ${Jt}" aria-hidden="true" focusable="false">
        ${pe}
        <rect rx="4" ry="4" y="${U-4}"" height="8"/>
        <path fill-rule="evenodd" d="${It.trim()}"/></svg>`),n(31,I={x:ft-2*k.x,y:Jt})}16&t.$$.dirty[0]|1&t.$$.dirty[1]&&(a=z&&I),6291456&t.$$.dirty[0]|12&t.$$.dirty[1]&&n(5,l=i!==f||o!==m),32&t.$$.dirty[0]|12&t.$$.dirty[1]&&n(8,c=l?function(U,ft){const It=Wd(U,f,m),Jt=Wd(ft,f,m);return`--range-mask-from:${100*ln(y(It,.025,0)-.0125)}%;--range-mask-to:${100*ln(y(Jt,.025,0)-.0125)}%`}(i,o):""),1048657&t.$$.dirty[0]|2&t.$$.dirty[1]&&r&&z&&z.x&&z.y&&Lt.set(et(b,h),{hard:d===!1})},[b,p,$,S,z,l,d,O,c,u,_,k,()=>{D=!1,q=rs(Lt),X=[et(v??f,h),et(T??m,h)],C()},()=>{D=!0},({detail:U})=>{lt.snap=!D,lt.elastic=!D,pt(q,U.translation,lt)},({detail:U})=>{lt.snap=!1,lt.elastic=!1;const ft=pt(q,U.translation,lt);if(q=void 0,X=void 0,Math.abs(ft-$)<.01)return A($);A(ft)},()=>{n(0,b=sr($,i,o)),C(),A(b)},Lt,U=>{U.preventDefault(),U.stopPropagation();const ft=Dh(U)*P;ct(ft)},({detail:U})=>{ct(U[h]*Math.abs(M||8))},h,f,m,v,T,C,R,A,E,M,P,I,r,o,i,s,U=>n(4,z=(ft=>dt(ft.width,ft.height))(U.detail))]}class qf extends mn{constructor(e){super(),hn(this,e,C8,_8,rn,{labelReset:1,direction:20,min:21,max:22,base:2,value:0,valueLabel:3,valueMin:23,valueMax:24,oninputstart:25,oninputmove:26,oninputend:27,elasticity:28,nudgeMultiplier:29,step:30},null,[-1,-1])}}var R8={[vl]:t=>({x:t.x,y:t.y}),[Ba]:t=>({x:t.x+t.width,y:t.y}),[xl]:t=>({x:t.x+t.width,y:t.y}),[za]:t=>({x:t.x+t.width,y:t.y+t.height}),[Sl]:t=>({x:t.x,y:t.y+t.height}),[Na]:t=>({x:t.x,y:t.y+t.height}),[wl]:t=>({x:t.x,y:t.y}),[Fa]:t=>({x:t.x,y:t.y})};function Gb(t,e,n){const r=t.slice();return r[14]=e[n].key,r[15]=e[n].translate,r[16]=e[n].scale,r[17]=e[n].type,r[18]=e[n].opacity,r}function Wb(t,e){let n,r,i,o,a,s,l,c;return{key:t,first:null,c(){n=bt("div"),w(n,"role","button"),w(n,"aria-label",r=`Drag ${e[17]} ${e[14]}`),w(n,"tabindex",i=e[17]==="edge"?-1:0),w(n,"class","PinturaRectManipulator"),w(n,"data-direction",o=e[14]),w(n,"data-shape",a=e[17]==="edge"?"edge":""+e[0]),w(n,"style",s=`--tx:${e[15].x};--ty:${e[15].y};--sx:${e[16].x};--sy:${e[16].y};opacity:${e[18]}`),this.first=n},m(d,u){it(d,n,u),l||(c=[kt(n,"nudge",function(){Qn(e[6](e[14]))&&e[6](e[14]).apply(this,arguments)}),Jn(kl.call(null,n,{preventDefault:!0})),kt(n,"interactionstart",function(){Qn(e[5]("resizestart",e[14]))&&e[5]("resizestart",e[14]).apply(this,arguments)}),kt(n,"interactionupdate",function(){Qn(e[5]("resizemove",e[14]))&&e[5]("resizemove",e[14]).apply(this,arguments)}),kt(n,"interactionend",function(){Qn(e[5]("resizeend",e[14]))&&e[5]("resizeend",e[14]).apply(this,arguments)}),Jn(Ml.call(null,n))],l=!0)},p(d,u){e=d,2&u&&r!==(r=`Drag ${e[17]} ${e[14]}`)&&w(n,"aria-label",r),2&u&&i!==(i=e[17]==="edge"?-1:0)&&w(n,"tabindex",i),2&u&&o!==(o=e[14])&&w(n,"data-direction",o),3&u&&a!==(a=e[17]==="edge"?"edge":""+e[0])&&w(n,"data-shape",a),2&u&&s!==(s=`--tx:${e[15].x};--ty:${e[15].y};--sx:${e[16].x};--sy:${e[16].y};opacity:${e[18]}`)&&w(n,"style",s)},d(d){d&&nt(n),l=!1,tr(c)}}}function M8(t){let e,n=[],r=new Map,i=t[1];const o=a=>a[14];for(let a=0;a<i.length;a+=1){let s=Gb(t,i,a),l=o(s);r.set(l,n[a]=Wb(l,s))}return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Nr()},m(a,s){for(let l=0;l<n.length;l+=1)n[l].m(a,s);it(a,e,s)},p(a,[s]){99&s&&(i=a[1],n=_s(n,s,o,1,a,i,r,e.parentNode,WS,Wb,e,Gb))},i:Je,o:Je,d(a){for(let s=0;s<n.length;s+=1)n[s].d(a);a&&nt(e)}}}function k8(t,e,n){let r,i,o,a,{rect:s=null}=e,{visible:l=!1}=e,{style:c}=e;const d=kr("isAnimated");N(t,d,m=>n(11,a=m));const u=un(void 0,{precision:1e-4,stiffness:.2,damping:.4});N(t,u,m=>n(10,o=m));const p=un(0,{precision:.001});let h;N(t,p,m=>n(9,i=m));const f=ls();return t.$$set=m=>{"rect"in m&&n(7,s=m.rect),"visible"in m&&n(8,l=m.visible),"style"in m&&n(0,c=m.style)},t.$$.update=()=>{2304&t.$$.dirty&&u.set(l?1:.5,{hard:a===!1}),2304&t.$$.dirty&&p.set(l?1:0,{hard:a===!1}),1664&t.$$.dirty&&n(1,r=Object.keys(u0).map((m,$)=>{const b=u0[m],S=R8[b](s),v=b.length===1?"edge":"corner",T=v==="corner";return{key:b,type:v,scale:{x:/^(t|b)$/.test(b)?s.width:T?sr(o,.5,1.25):1,y:/^(r|l)$/.test(b)?s.height:T?sr(o,.5,1.25):1},translate:{x:S.x,y:S.y},opacity:i}}))},[c,r,d,u,p,(m,$)=>({detail:b})=>{h&&$!==h||m!=="resizestart"&&h===void 0||(m==="resizestart"&&(h=$),m==="resizeend"&&(h=void 0),f(m,{direction:$,translation:b&&b.translation}))},m=>({detail:$})=>{f("resizestart",{direction:m,translation:{x:0,y:0}}),f("resizemove",{direction:m,translation:$}),f("resizeend",{direction:m,translation:{x:0,y:0}})},s,l,i,o,a]}class P8 extends mn{constructor(e){super(),hn(this,e,k8,M8,rn,{rect:7,visible:8,style:0})}}var A8=t=>{function e(a,s){t.dispatchEvent(new CustomEvent(a,{detail:s}))}const n=a=>{a.preventDefault(),t.addEventListener("gesturechange",r),t.addEventListener("gestureend",i),e("gesturedown")},r=a=>{a.preventDefault(),e("gestureupdate",a.scale)},i=a=>{e("gestureup",a.scale),a.preventDefault(),o()},o=()=>{t.removeEventListener("gesturechange",r),t.removeEventListener("gestureend",i)};return t.addEventListener("gesturestart",n),{destroy:()=>{o(),t.removeEventListener("gesturestart",n)}}},Yf={[vl]:Sl,[xl]:wl,[Sl]:vl,[wl]:xl,[Fa]:za,[Ba]:Na,[za]:Fa,[Na]:Ba},Xf=t=>{const e=t===wl||t===xl,n=t===vl||t===Sl;return[t===xl||t===Ba||t===za,t===wl||t===Na||t===Fa,t===vl||t===Ba||t===Fa,t===Sl||t===za||t===Na,e,n,e||n]},Hb=(t,e,n,r={})=>{const{target:i,translate:o}=e,{aspectRatio:a,minSize:s,maxSize:l}=r,c=eu[Yf[i]],d=Xr(dt(t.x,t.y),dt(c[0]*t.width,c[1]*t.height)),u=eu[i],p=Xr(Pn(t),dt(u[0]*t.width,u[1]*t.height)),[h,f,m,$,b,S,v]=Xf(i);let T=o.x,C=o.y;b?C=0:S&&(T=0);const{inner:R,outer:A}=L8(d,i,n,{aspectRatio:a,minSize:s,maxSize:l});let[E,M,P,_]=uc(t);if(h?_=d.x:f&&(M=d.x),$?E=d.y:m&&(P=d.y),h){const y=R.x+R.width,z=A.x+A.width;M=sr(p.x+T,y,z)}else if(f){const y=A.x,z=R.x;_=sr(p.x+T,y,z)}if($){const y=R.y+R.height,z=A.y+A.height;P=sr(p.y+C,y,z)}else if(m){const y=A.y,z=R.y;E=sr(p.y+C,y,z)}if(_>R.x&&(_=R.x),M<R.x+R.width&&(M=R.x+R.width),E>R.y&&(E=R.y),P<R.y+R.height&&(P=R.y+R.height),_<A.x){const y=A.x-_;_=A.x,M+=y}if(M>A.x+A.width){const y=M-(A.x+A.width);M=A.x+A.width,_-=y}if(E<A.y){const y=A.y-E;E=A.y,P+=y}if(P>A.y+A.height){const y=P-(A.y+A.height);P=A.y+A.height,E-=y}if(a)if(v){let y=M-_,z=P-E;b?(z=y/a,E=d.y-.5*z,P=d.y+.5*z):S&&(y=z*a,_=d.x-.5*y,M=d.x+.5*y)}else{const y=dt(p.x+T-d.x,p.y+C-d.y);i===Ba?(y.x=Math.max(0,y.x),y.y=Math.min(0,y.y)):i===za?(y.x=Math.max(0,y.x),y.y=Math.max(0,y.y)):i===Na?(y.x=Math.min(0,y.x),y.y=Math.max(0,y.y)):i===Fa&&(y.x=Math.min(0,y.x),y.y=Math.min(0,y.y));const z=fl(y),O=fl(dt(R.width,R.height)),I=fl(dt(A.width,A.height)),k=sr(z,O,I),G=dt(a,1),X=Qi(Po(G),k);i===Ba?(M=d.x+X.x,E=d.y-X.y):i===za?(M=d.x+X.x,P=d.y+X.y):i===Na?(_=d.x-X.x,P=d.y+X.y):i===Fa&&(_=d.x-X.x,E=d.y-X.y)}return Br(_,E,M-_,P-E)};const L8=(t,e,n,r)=>{const{aspectRatio:i,minSize:o,maxSize:a}=r,s=e===xl||e===Ba||e===za,l=e===wl||e===Na||e===Fa,c=e===vl||e===Ba||e===Fa,d=e===Sl||e===za||e===Na,u=e===wl||e===xl,p=e===vl||e===Sl,h=Pn(n);s?(h.x=t.x,h.width-=t.x):l&&(h.width=t.x),d?(h.y=t.y,h.height-=t.y):c&&(h.height=t.y);const f=((R,A)=>Va(0,0,R,A))(Math.min(h.width,a.width),Math.min(h.height,a.height));if(i){if(u){const R=Math.min(t.y,n.height-t.y);f.height=Math.min(2*R,f.height)}else if(p){const R=Math.min(t.x,n.width-t.x);f.width=Math.min(2*R,f.width)}}const m=i?dc(js(fo(o),i)):o,$=i?dc(vo(f,i)):f;let b,S,v,T;s?b=t.x:l&&(S=t.x),d?v=t.y:c&&(T=t.y),s?S=b+m.width:l&&(b=S-m.width),d?T=v+m.height:c&&(v=T-m.height),u?(v=t.y-.5*m.height,T=t.y+.5*m.height):p&&(b=t.x-.5*m.width,S=t.x+.5*m.width);const C=yi([dt(b,v),dt(S,T)]);return s?S=b+$.width:l&&(b=S-$.width),d?T=v+$.height:c&&(v=T-$.height),u?(v=t.y-.5*$.height,T=t.y+.5*$.height):p&&(b=t.x-.5*$.width,S=t.x+.5*$.width),b=Math.max(n.x,b),S=Math.min(n.x+n.width,S),v=Math.max(n.y,v),T=Math.min(n.y+n.height,T),{inner:C,outer:yi([dt(b,v),dt(S,T)])}};var jb=t=>180*t/Math.PI;function O8(t){let e,n,r;return n=new qf({props:{elasticity:t[5],min:t[9],max:t[10],value:t[11],valueMin:Math.max(t[9],t[0]),valueMax:Math.min(t[10],t[1]),labelReset:t[6],base:t[12],valueLabel:Math.round(jb(t[11]))+"&deg;",oninputstart:t[2],oninputmove:t[17],oninputend:t[18]}}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"class","PinturaImageRotator")},m(i,o){it(i,e,o),Ft(n,e,null),r=!0},p(i,[o]){const a={};32&o&&(a.elasticity=i[5]),512&o&&(a.min=i[9]),1024&o&&(a.max=i[10]),2048&o&&(a.value=i[11]),513&o&&(a.valueMin=Math.max(i[9],i[0])),1026&o&&(a.valueMax=Math.min(i[10],i[1])),64&o&&(a.labelReset=i[6]),4096&o&&(a.base=i[12]),2048&o&&(a.valueLabel=Math.round(jb(i[11]))+"&deg;"),4&o&&(a.oninputstart=i[2]),392&o&&(a.oninputmove=i[17]),400&o&&(a.oninputend=i[18]),n.$set(a)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Bt(n)}}}function D8(t,e,n){let r,i,o,a,s,l,c,{rotation:d}=e,{valueMin:u}=e,{valueMax:p}=e,{oninputstart:h=ve}=e,{oninputmove:f=ve}=e,{oninputend:m=ve}=e,{elasticity:$=0}=e,{labelReset:b}=e,{rotationMin:S}=e,{rotationMax:v}=e;return t.$$set=T=>{"rotation"in T&&n(13,d=T.rotation),"valueMin"in T&&n(0,u=T.valueMin),"valueMax"in T&&n(1,p=T.valueMax),"oninputstart"in T&&n(2,h=T.oninputstart),"oninputmove"in T&&n(3,f=T.oninputmove),"oninputend"in T&&n(4,m=T.oninputend),"elasticity"in T&&n(5,$=T.elasticity),"labelReset"in T&&n(6,b=T.labelReset),"rotationMin"in T&&n(14,S=T.rotationMin),"rotationMax"in T&&n(15,v=T.rotationMax)},t.$$.update=()=>{16384&t.$$.dirty&&n(9,r=S+1e-9),32768&t.$$.dirty&&n(10,i=v-1e-9),1536&t.$$.dirty&&n(12,o=r+.5*(i-r)),32768&t.$$.dirty&&n(16,a=2*v),8192&t.$$.dirty&&n(8,s=Math.sign(d)),73728&t.$$.dirty&&n(7,l=Math.round(Math.abs(d)/a)*a),8576&t.$$.dirty&&n(11,c=d-s*l)},[u,p,h,f,m,$,b,l,s,r,i,c,o,d,S,v,a,T=>f(s*l+T),T=>m(s*l+T)]}class F8 extends mn{constructor(e){super(),hn(this,e,D8,O8,rn,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function B8(t){let e,n,r,i,o;return{c(){e=bt("div"),n=bt("p"),r=vr(t[0]),i=vr(" × "),o=vr(t[1]),w(e,"class","PinturaImageInfo")},m(a,s){it(a,e,s),Rt(e,n),Rt(n,r),Rt(n,i),Rt(n,o)},p(a,[s]){1&s&&Vr(r,a[0]),2&s&&Vr(o,a[1])},i:Je,o:Je,d(a){a&&nt(e)}}}function z8(t,e,n){let{width:r}=e,{height:i}=e;return t.$$set=o=>{"width"in o&&n(0,r=o.width),"height"in o&&n(1,i=o.height)},[r,i]}class N8 extends mn{constructor(e){super(),hn(this,e,z8,B8,rn,{width:0,height:1})}}function V8(t){let e,n;return e=new Xs({props:{class:"PinturaPresetListFilter",layout:"row",options:t[8],selectedIndex:t[7],onchange:t[10]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};256&i&&(o.options=r[8]),128&i&&(o.selectedIndex=r[7]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function U8(t){let e,n;return e=new Tw({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[9],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[V8]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,[i]){const o={};1&i&&(o.icon=r[0]),2&i&&(o.label=r[1]),4&i&&(o.labelClass=r[2]),8&i&&(o.hideLabel=r[3]),512&i&&(o.options=r[9]),16&i&&(o.selectedIndex=r[4]),32&i&&(o.onchange=r[5]),64&i&&(o.optionMapper=r[6]),262528&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}const qb='fill="none" stroke="currentColor"';function G8(t,e,n){let r,i,o,{icon:a}=e,{label:s}=e,{labelClass:l}=e,{hideLabel:c}=e,{options:d}=e,{selectedIndex:u}=e,{onchange:p}=e,{optionMapper:h}=e,{filter:f="landscape"}=e,{onfilterchange:m=ve}=e;const $=(S,v,T,C,R)=>`
    <rect ${qb} x="${S}" y="${v}" width="${T}" height="${C}" rx="${R}"/>`,b=(S,v)=>`<path ${qb} d="M${S} ${v} l2 2 l3 -4"/>`;return t.$$set=S=>{"icon"in S&&n(0,a=S.icon),"label"in S&&n(1,s=S.label),"labelClass"in S&&n(2,l=S.labelClass),"hideLabel"in S&&n(3,c=S.hideLabel),"options"in S&&n(12,d=S.options),"selectedIndex"in S&&n(4,u=S.selectedIndex),"onchange"in S&&n(5,p=S.onchange),"optionMapper"in S&&n(6,h=S.optionMapper),"filter"in S&&n(11,f=S.filter),"onfilterchange"in S&&n(13,m=S.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&n(9,r=((S,v)=>(S||[]).map(T=>Ve(T[0])?(T[1]=T[1].map(v),T):v(T)))(d,(S=>v=>{const[T,C,R={}]=v;return Sn(T)&&(R.hidden=S==="landscape"?T<1:T>1),[T,C,R]})(f))),2048&t.$$.dirty&&n(7,i=f==="landscape"?0:1),128&t.$$.dirty&&n(8,o=[["landscape","Landscape",{hideLabel:!0,icon:$(2,6,19,12,2)+(i===0?b(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:$(5,3,13,18,2)+(i===1?b(9,12):"")}]])},[a,s,l,c,u,p,h,i,o,r,S=>{n(11,f=S.value),m(S.value)},f,d,m]}class W8 extends mn{constructor(e){super(),hn(this,e,G8,U8,rn,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}const Yb=t=>Jo(t,e=>ln(e,6)),Xb=t=>ma(t,e=>ln(e,6)),sl=(t,e,n=1e-4)=>Math.abs(t-e)<n;var H8=(t,e,n,r,i={})=>{const{aspectRatio:o}=i;t=Xb(t),r=r.map(Yb);const a=ly(t,Yf[n.target]),s=Jo(a,b=>ln(b,6)),l=o?js(i.minSize,o):i.minSize,c=o?vo(i.maxSize,o):i.maxSize,d=ly(e,n.target);if(Vo(d,a)<1){e=Pn(t);const b=Math.min(l.width/t.width,l.height/t.height);Ki(e,b,a)}e=sy(Pn(e),l,c,a);let u=Pn(e);e=Xb(e);const p=oS(r,1),h=fa(t),f=fa(e),m=h.findIndex(b=>ul(Jo(b,S=>ln(S,6)),s)),$=b=>p.map(S=>hf(S,b)).filter(Boolean).pop();if(o){const b=f.map((S,v)=>{if(v===m)return;const T=dt(a.x-S.x,a.y-S.y);Po(T),Qi(T,.5);const C=dt(a.x-T.x,a.y-T.y),R=Tl(C,Yb(S)),A=$(R);if(!A)return;const E=h[v];return{intersection:A,cornerDist:Vo(a,E),intersectionDist:Vo(a,A)}}).filter(Boolean);if(b.length){const S=b.reduce((v,T)=>{const C=T.intersectionDist/T.cornerDist;return C<v?C:v},Number.MAX_SAFE_INTEGER);u=Pn(t),Ki(u,S,a)}}else{const b=n.target.length===1,S=!(r[0].y===r[1].y||r[0].x===r[1].x),v=h.map((T,C)=>{if(C===m)return;const R=f[C],A=!sl(R.x,s.x)&&!sl(R.y,s.y);if(!b&&!S&&A||b&&(sl(R.x,s.x)||sl(R.y,s.y)))return;const E=Ue(b?T:a),M=Zr(Ue(E),R);Po(M),Qi(M,.5),b?Xr(E,M):Zr(E,M);const P=Tl(E,R);return $(P)||void 0}).filter(Boolean);if(v.length){const[T,C,R,A]=Xf(n.target);let[E,M,P,_]=uc(e);v.forEach(({x:y,y:z})=>{const O=ln(y,6),I=ln(z,6);R&&!sl(I,s.y)&&(E=Math.max(E,z)),T&&!sl(O,s.x)&&(M=Math.min(M,y)),A&&!sl(I,s.y)&&(P=Math.min(P,z)),C&&!sl(O,s.x)&&(_=Math.max(_,y))}),u=K_([E,M,P,_]),Ki(u,.9999,a)}}return sy(u,l,c,a),u};function j8(t){let e,n;return e=new na({props:{items:t[11]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};2048&i[0]&&(o.items=r[11]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function q8(t){let e,n,r;return n=new Vw({props:{$$slots:{default:[j8]},$$scope:{ctx:t}}}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"slot","header")},m(i,o){it(i,e,o),Ft(n,e,null),r=!0},p(i,o){const a={};2048&o[0]|1&o[7]&&(a.$$scope={dirty:o,ctx:i}),n.$set(a)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Bt(n)}}}function Zb(t){let e,n;return e=new Rl({props:{onclick:t[87],label:t[4].cropLabelButtonRecenter,icon:t[4].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!t[9],hideLabel:!0,style:`opacity: ${t[29]}; transform: translate3d(${t[30].x}px, ${t[30].y}px, 0)`}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16&i[0]&&(o.label=r[4].cropLabelButtonRecenter),16&i[0]&&(o.icon=r[4].cropIconButtonRecenter),512&i[0]&&(o.disabled=!r[9]),1610612736&i[0]&&(o.style=`opacity: ${r[29]}; transform: translate3d(${r[30].x}px, ${r[30].y}px, 0)`),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Kb(t){let e,n;return e=new P8({props:{rect:t[8],visible:t[12],style:t[1]}}),e.$on("resizestart",t[67]),e.$on("resizemove",t[68]),e.$on("resizeend",t[69]),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};256&i[0]&&(o.rect=r[8]),4096&i[0]&&(o.visible=r[12]),2&i[0]&&(o.style=r[1]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Qb(t){let e,n;return e=new N8({props:{width:Math.round(t[13].width),height:Math.round(t[13].height)}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};8192&i[0]&&(o.width=Math.round(r[13].width)),8192&i[0]&&(o.height=Math.round(r[13].height)),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Y8(t){let e,n,r,i,o,a,s,l,c=t[21]&&t[10]&&Zb(t),d=t[21]&&Kb(t),u=t[22]&&Qb(t);return{c(){e=bt("div"),n=bt("div"),c&&c.c(),r=be(),d&&d.c(),o=be(),u&&u.c(),w(n,"class","PinturaStage"),w(e,"slot","main")},m(p,h){it(p,e,h),Rt(e,n),c&&c.m(n,null),Rt(n,r),d&&d.m(n,null),t[161](n),Rt(e,o),u&&u.m(e,null),a=!0,s||(l=[Jn(Ui.call(null,n)),kt(n,"measure",t[159]),kt(n,"wheel",function(){Qn(t[2]&&t[86])&&(t[2]&&t[86]).apply(this,arguments)},{passive:!1}),kt(n,"interactionstart",t[73]),kt(n,"interactionupdate",t[74]),kt(n,"interactionrelease",t[76]),kt(n,"interactionend",t[75]),Jn(i=Ml.call(null,n,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:tv,getEventPosition:t[162]})),kt(n,"gesturedown",t[83]),kt(n,"gestureupdate",t[84]),kt(n,"gestureup",t[85]),Jn(A8.call(null,n))],s=!0)},p(p,h){(t=p)[21]&&t[10]?c?(c.p(t,h),2098176&h[0]&&L(c,1)):(c=Zb(t),c.c(),L(c,1),c.m(n,r)):c&&(Be(),W(c,1,1,()=>{c=null}),ze()),t[21]?d?(d.p(t,h),2097152&h[0]&&L(d,1)):(d=Kb(t),d.c(),L(d,1),d.m(n,null)):d&&(Be(),W(d,1,1,()=>{d=null}),ze()),i&&Qn(i.update)&&16777220&h[0]&&i.update.call(null,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:tv,getEventPosition:t[162]}),t[22]?u?(u.p(t,h),4194304&h[0]&&L(u,1)):(u=Qb(t),u.c(),L(u,1),u.m(e,null)):u&&(Be(),W(u,1,1,()=>{u=null}),ze())},i(p){a||(L(c),L(d),L(u),a=!0)},o(p){W(c),W(d),W(u),a=!1},d(p){p&&nt(e),c&&c.d(),d&&d.d(),t[161](null),u&&u.d(),s=!1,tr(l)}}}function Jb(t){let e,n,r,i;const o=[{class:"PinturaControlList"},{tabs:t[7]},t[18]];let a={$$slots:{default:[X8,({tab:c})=>({216:c}),({tab:c})=>[0,0,0,0,0,0,c?1073741824:0]]},$$scope:{ctx:t}};for(let c=0;c<o.length;c+=1)a=Or(a,o[c]);e=new Lh({props:a}),e.$on("select",t[160]);const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[17]},t[18]];let l={$$slots:{default:[Q8,({panel:c})=>({215:c}),({panel:c})=>[0,0,0,0,0,0,c?536870912:0]]},$$scope:{ctx:t}};for(let c=0;c<s.length;c+=1)l=Or(l,s[c]);return r=new Oh({props:l}),{c(){zt(e.$$.fragment),n=be(),zt(r.$$.fragment)},m(c,d){Ft(e,c,d),it(c,n,d),Ft(r,c,d),i=!0},p(c,d){const u=262272&d[0]?Vi(o,[o[0],128&d[0]&&{tabs:c[7]},262144&d[0]&&to(c[18])]):{};1073741824&d[6]|1&d[7]&&(u.$$scope={dirty:d,ctx:c}),e.$set(u);const p=393216&d[0]?Vi(s,[s[0],s[1],131072&d[0]&&{panels:c[17]},262144&d[0]&&to(c[18])]):{};511721496&d[0]|536870912&d[6]|1&d[7]&&(p.$$scope={dirty:d,ctx:c}),r.$set(p)},i(c){i||(L(e.$$.fragment,c),L(r.$$.fragment,c),i=!0)},o(c){W(e.$$.fragment,c),W(r.$$.fragment,c),i=!1},d(c){Bt(e,c),c&&nt(n),Bt(r,c)}}}function X8(t){let e,n,r=t[216].label+"";return{c(){e=bt("span"),n=vr(r)},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){1073741824&o[6]&&r!==(r=i[216].label+"")&&Vr(n,r)},d(i){i&&nt(e)}}}function Z8(t){let e,n;return e=new qf({props:{elasticity:t[25]*t[43],base:nP,min:t[23],max:eP,valueMin:t[27][0],valueMax:t[27][1],value:t[28],labelReset:t[4].labelReset,valueLabel:Math.round(100*t[28])+"%",oninputstart:t[80],oninputmove:t[81],oninputend:t[82]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};33554432&i[0]&&(o.elasticity=r[25]*r[43]),8388608&i[0]&&(o.min=r[23]),134217728&i[0]&&(o.valueMin=r[27][0]),134217728&i[0]&&(o.valueMax=r[27][1]),268435456&i[0]&&(o.value=r[28]),16&i[0]&&(o.labelReset=r[4].labelReset),268435456&i[0]&&(o.valueLabel=Math.round(100*r[28])+"%"),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function K8(t){let e,n;return e=new F8({props:{elasticity:t[25]*t[43],rotation:t[14],labelReset:t[4].labelReset,valueMin:t[26][0],valueMax:t[26][1],rotationMin:-t[3],rotationMax:t[3],oninputstart:t[70],oninputmove:t[71],oninputend:t[72]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};33554432&i[0]&&(o.elasticity=r[25]*r[43]),16384&i[0]&&(o.rotation=r[14]),16&i[0]&&(o.labelReset=r[4].labelReset),67108864&i[0]&&(o.valueMin=r[26][0]),67108864&i[0]&&(o.valueMax=r[26][1]),8&i[0]&&(o.rotationMin=-r[3]),8&i[0]&&(o.rotationMax=r[3]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Q8(t){let e,n,r,i;const o=[K8,Z8],a=[];function s(l,c){return l[215]===l[92]+"-rotation"?0:l[215]===l[92]+"-zoom"?1:-1}return~(e=s(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),r=Nr()},m(l,c){~e&&a[e].m(l,c),it(l,r,c),i=!0},p(l,c){let d=e;e=s(l),e===d?~e&&a[e].p(l,c):(n&&(Be(),W(a[d],1,1,()=>{a[d]=null}),ze()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),L(n,1),n.m(r.parentNode,r)):n=null)},i(l){i||(L(n),i=!0)},o(l){W(n),i=!1},d(l){~e&&a[e].d(l),l&&nt(r)}}}function J8(t){let e,n,r=t[19]&&Jb(t);return{c(){e=bt("div"),r&&r.c(),w(e,"slot","footer"),w(e,"style",t[16])},m(i,o){it(i,e,o),r&&r.m(e,null),n=!0},p(i,o){i[19]?r?(r.p(i,o),524288&o[0]&&L(r,1)):(r=Jb(i),r.c(),L(r,1),r.m(e,null)):r&&(Be(),W(r,1,1,()=>{r=null}),ze()),(!n||65536&o[0])&&w(e,"style",i[16])},i(i){n||(L(r),n=!0)},o(i){W(r),n=!1},d(i){i&&nt(e),r&&r.d()}}}function tP(t){let e,n,r;function i(a){t[163](a)}let o={hasHeader:t[20],$$slots:{footer:[J8],main:[Y8],header:[q8]},$$scope:{ctx:t}};return t[15]!==void 0&&(o.root=t[15]),e=new bc({props:o}),zn.push(()=>Go(e,"root",i)),e.$on("measure",t[164]),{c(){zt(e.$$.fragment)},m(a,s){Ft(e,a,s),r=!0},p(a,s){const l={};1048576&s[0]&&(l.hasHeader=a[20]),2146402302&s[0]|1&s[7]&&(l.$$scope={dirty:s,ctx:a}),!n&&32768&s[0]&&(n=!0,l.root=a[15],ta(()=>n=!1)),e.$set(l)},i(a){r||(L(e.$$.fragment,a),r=!0)},o(a){W(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}const eP=1,nP=0,tv=(t,e)=>t.target===e;function rP(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,b,S,v,T,C,R,A,E,M,P,_,y,z,O,I,k,G,X,q,D,lt,pt,Lt,et,Y,j,ct,U,ft,yt,It,Jt,pe,mt,ot,Q,Se,Mt,xt,Wt,Ht,Ae,ke,st,St,Ce,dn,Te,Ut,Ee,Ne,qe,En,Et,Tt,je,Le,yn=Je,en=()=>(yn(),yn=ho(Ke,B=>n(12,I=B)),Ke);t.$$.on_destroy.push(()=>yn());let{isActive:Ke}=e;en();let{stores:Cn}=e,{cropImageSelectionCornerStyle:J="circle"}=e,{cropWillRenderImageSelectionGuides:he=(B,Oe)=>{const He=B=="rotate";return{rows:He?5:3,cols:He?5:3,opacity:.25*Oe}}}=e,{cropAutoCenterImageSelectionTimeout:K}=e,{cropEnableZoomMatchImageAspectRatio:Gt=!0}=e,{cropEnableRotateMatchImageAspectRatio:ce="never"}=e,{cropEnableRotationInput:we=!0}=e,{cropEnableZoom:ge=!0}=e,{cropEnableZoomInput:Nt=!0}=e,{cropEnableZoomAutoHide:Pe=!0}=e,{cropEnableImageSelection:Qt=!0}=e,{cropEnableInfoIndicator:Ge=!1}=e,{cropEnableZoomTowardsWheelPosition:Ye=!0}=e,{cropEnableLimitWheelInputToCropSelection:Qe=!0}=e,{cropEnableCenterImageSelection:fn=!0}=e,{cropEnableButtonRotateLeft:at=!0}=e,{cropEnableButtonRotateRight:At=!1}=e,{cropEnableButtonFlipHorizontal:jt=!0}=e,{cropEnableButtonFlipVertical:rt=!1}=e,{cropSelectPresetOptions:Dt}=e,{cropEnableSelectPreset:ee=!0}=e,{cropEnableFilterMatchAspectRatio:de=!0}=e,{cropSelectPresetFilter:te=!1}=e,{cropEnableButtonToggleCropLimit:on=!1}=e,{cropWillRenderTools:Xt=ur}=e,{cropActiveTransformTool:ue="rotation"}=e,{cropMinimizeToolbar:wn="auto"}=e,{cropInteractionFocus:Zn="image"}=e,{cropRotationRange:_r=Ma}=e,{cropMaskOpacity:Nn=.85}=e,{locale:ne={}}=e;const Ie=kr("isAnimated");N(t,Ie,B=>n(138,k=B));const mr=kr("elasticityMultiplier");N(t,mr,B=>n(25,qe=B));const fr=kr("redrawTrigger");N(t,fr,B=>n(158,Ne=B));const Ur=kr("imageIsStatic");N(t,Ur,B=>n(144,Lt=B));const $r=kr("imageStaticVisualCorners");N(t,$r,B=>n(179,ke=B));let Er="idle";const ir=ye();N(t,ir,B=>n(155,Te=B));const Jr=()=>Ht===void 0,hi=B=>1/B,Cr=B=>{de&&te!==B&&(n(94,te=B),Ht&&Ht!==1&&Gr()&&Ct(ni,Ht=hi(Ht),Ht))},Gr=()=>{if(Ht===1||!r)return!1;const B=hi(Ht);return!!yl(Te).find(([Oe])=>Oe===B)},mi=(B,Oe,He)=>ys(He)?Oe.width===Math.round(B.height)||Oe.height===Math.round(B.width):Oe.width===Math.round(B.width)||Oe.height===Math.round(B.height),Wr=()=>(Jr()||ce==="always"&&Gr())&&((B,Oe,He)=>{const kn=Us(Qx(ko(Oe),He),nn=>Math.abs(Math.round(nn))),Vn=Jc(kn),Un=An(B);return ul(Vn,Un)})(et,pe,mt)&&mi(et,pe,mt),Mi=B=>{if(ce!=="never"&&Wr()){Ct(ji,mt+=B,mt);const Oe=ys(mt),He=Oe?pe.height:pe.width,kn=Oe?pe.width:pe.height;Ct(In,et=Br(0,0,He,kn),et),Jr()||Ct(ni,Ht=Ra(He,kn),Ht)}else Ct(ji,mt+=B,mt)},{history:ti,env:or,isInteracting:On,isInteractingFraction:ya,isTransformingImage:Hr,rootRect:xo,stageRect:Ao,utilRect:ba,utilRectPadded:Wi,rootLineColor:xr,allowPan:ar,allowZoom:So,allowPlayPause:ra,rangeInputElasticity:Hi,presentationScalar:eo,utilTools:ia,imagePreviewModifiers:Lo,imageOutlineOpacity:Ua,imageFlipX:jo,imageFlipY:no,imageRotation:ji,imageRotationRange:va,imageOutputSize:Oo,imageSelectionRect:Dr,imageSelectionRectSnapshot:wo,imageSelectionRectIntent:jr,imageSelectionRectPresentation:ki,imageCropRectIntent:qi,imageCropRectOrigin:Ii,imageCropRect:In,imageCropMinSize:Do,imageCropMaxSize:ei,imageCropRange:Ir,imageCropAspectRatio:ni,imageCropLimitToImage:To,imageSize:oi,imageScalar:qo,imageOverlayMarkup:qr,stagePadded:Kr,stageRecenter:Yo}=Cn;let Eo;N(t,or,B=>n(139,G=B)),N(t,On,B=>n(143,pt=B)),N(t,Hr,B=>n(172,It=B)),N(t,xo,B=>n(24,Se=B)),N(t,Ao,B=>n(150,yt=B)),N(t,Wi,B=>n(147,ct=B)),N(t,eo,B=>n(146,j=B)),N(t,ia,B=>n(181,St=B)),N(t,Lo,B=>n(171,D=B)),N(t,jo,B=>n(157,Ee=B)),N(t,no,B=>n(156,Ut=B)),N(t,ji,B=>n(14,mt=B)),N(t,va,B=>n(26,En=B)),N(t,Oo,B=>n(182,Ce=B)),N(t,Dr,B=>n(149,ft=B)),N(t,wo,B=>n(148,U=B)),N(t,jr,B=>n(180,st=B)),N(t,ki,B=>n(142,lt=B)),N(t,qi,B=>n(174,Mt=B)),N(t,Ii,B=>n(176,Wt=B)),N(t,In,B=>n(13,et=B)),N(t,Do,B=>n(153,Q=B)),N(t,ei,B=>n(178,Ae=B)),N(t,Ir,B=>n(175,xt=B)),N(t,ni,B=>n(177,Ht=B)),N(t,To,B=>n(152,ot=B)),N(t,oi,B=>n(151,pe=B)),N(t,qo,B=>n(145,Y=B)),N(t,Kr,B=>n(141,q=B));const Io=(B,Oe)=>{const He={target:B,translate:Oe},kn=fp(ko(Q),j),Vn=fp(ko(Ae),j);let Un=Hb(U,He,{...ct,x:0,y:0},{aspectRatio:Ht,minSize:kn,maxSize:Vn});if(Un=((gn,Dn,Gn)=>{const[Ln,Yr,wr,Ar]=uc(gn),Rn={...gn};if(Ln<Dn.y&&(gn.height=gn.height-(Dn.y-Ln),gn.y=Dn.y),Yr>Dn.x+Dn.width&&(gn.width=Dn.x+Dn.width-gn.x),wr>Dn.y+Dn.height&&(gn.height=Dn.y+Dn.height-gn.y),Ar<Dn.x&&(gn.width=gn.width-(Dn.x-Ar),gn.x=Dn.x),Gn){const Ai=Math.min(1,Rn.width/gn.width,Rn.height/gn.height);return $l(Rn,Ai)}return gn})(Un,{...ct,x:0,y:0},Ht),!ot)return{boundsLimited:Un,boundsIntent:Un};let nn=H8(U,Un,He,ke,{aspectRatio:Ht,minSize:kn,maxSize:Vn});return{boundsLimited:nn,boundsIntent:nn}},ro=(B,Oe)=>{const He={target:B,translate:Oe},kn=fp(ko(Q),j),Vn=fp(ko(Ae),j),Un=((nn,gn,Dn={})=>{const{target:Gn,translate:Ln}=gn,{aspectRatio:Yr,minSize:wr}=Dn,Ar=eu[Yf[Gn]],Rn=Xr(Pn(nn),dt(Ar[0]*nn.width,Ar[1]*nn.height)),Ai=eu[Gn],oa=Xr(Pn(nn),dt(Ai[0]*nn.width,Ai[1]*nn.height)),[Cs,Ga,Pl,Al,Ks,Qs,Js]=Xf(Gn);let ds=Ln.x,Wa=Ln.y;Ks?Wa=0:Qs&&(ds=0);let[Li,oo,ao,Yi]=uc(nn);if(Cs?Yi=Rn.x:Ga&&(oo=Rn.x),Al?Li=Rn.y:Pl&&(ao=Rn.y),Cs?oo=oa.x+ds:Ga&&(Yi=oa.x+ds),Al?ao=oa.y+Wa:Pl&&(Li=oa.y+Wa),wr&&Ks&&ao-Li<wr.height){const Kn=wr.height-(ao-Li);Li-=.5*Kn,ao+=.5*Kn}if(wr&&Qs&&oo-Yi<wr.width){const Kn=wr.width-(oo-Yi);Yi-=.5*Kn,oo+=.5*Kn}if(Yr)if(Js){let Kn=oo-Yi,aa=ao-Li;Ks?(aa=Kn/Yr,Li=Rn.y-.5*aa,ao=Rn.y+.5*aa):Qs&&(Kn=aa*Yr,Yi=Rn.x-.5*Kn,oo=Rn.x+.5*Kn)}else{const Kn=dt(oa.x+ds-Rn.x,oa.y+Wa-Rn.y);Gn===Ba?(Kn.x=Math.max(0,Kn.x),Kn.y=Math.min(0,Kn.y)):Gn===za?(Kn.x=Math.max(0,Kn.x),Kn.y=Math.max(0,Kn.y)):Gn===Na?(Kn.x=Math.min(0,Kn.x),Kn.y=Math.max(0,Kn.y)):Gn===Fa&&(Kn.x=Math.min(0,Kn.x),Kn.y=Math.min(0,Kn.y));const aa=fl(Kn),cr=dt(Yr,1),zo=Qi(Po(cr),aa);Gn===Ba?(oo=Rn.x+zo.x,Li=Rn.y-zo.y):Gn===za?(oo=Rn.x+zo.x,ao=Rn.y+zo.y):Gn===Na?(Yi=Rn.x-zo.x,ao=Rn.y+zo.y):Gn===Fa&&(Yi=Rn.x-zo.x,Li=Rn.y-zo.y)}return Br(Yi,Li,oo-Yi,ao-Li)})(U,He,{aspectRatio:Ht,minSize:kn});return{boundsLimited:Hb(U,He,{...ct,x:0,y:0},{aspectRatio:Ht,minSize:kn,maxSize:Vn}),boundsIntent:Un}};let Qr,io;const ai=({translation:B,scalar:Oe})=>{Lt&&(Oe=1,B=Wc(Ue(B)));const He=Math.min(ft.width/et.width,ft.height/et.height),kn=Qi(Ue(B),1/He);let Vn;if(io){const Un=Zr(Ue(io),B);io=B,Vn=ka(Pn(et),Un)}else Vn=ka(Pn(Qr),Wc(Ue(kn))),Oe!==void 0&&Ki(Vn,1/Oe);Ct(qi,Mt=Vn,Mt),Ct(In,et=Vn,et)},Pi=Fn([Ir,In],([B,Oe],He)=>{if(!Oe)return;const[kn,Vn]=B,Un=bi(Oe);He([dc(ma(js(kn,Un),ln)),dc(ma(vo(Vn,Un),ln))])});N(t,Pi,B=>n(173,Jt=B));const an=Fn([oi,To,Do,ei,Ir,ji],([B,Oe,He,kn,Vn,Un],nn)=>{if(!B)return;const gn=Vn[0],Dn=Vn[1];let Gn,Ln;Oe?(Gn=((Yr,wr,Ar)=>ys(Ar)?1-1/Math.min(Yr.height/wr.width,Yr.width/wr.height):1-1/Math.min(Yr.width/wr.width,Yr.height/wr.height))(B,Dn,Un),Ln=Math.min(gn.width/He.width,gn.height/He.height)):(Gn=-1,Ln=1),nn([Gn,Ln].map(Yr=>ln(Yr)))});N(t,an,B=>n(27,Et=B));const H=Fn([oi,In,Ir,ji],([B,Oe,He,kn],Vn)=>{if(!B||!Oe)return Vn(0);let Un;const nn=He[0],gn=He[1],Dn=Oe.width,Gn=Oe.height,Ln=bi(Oe),Yr=ys(kn)?ii(B.height,B.width):B,wr=vo(Yr,Ln);if(Dn<=wr.width||Gn<=wr.height){const Ar=wr.width-nn.width,Rn=wr.height-nn.height;Un=Ar===0||Rn===0?1:1-Math.min((Dn-nn.width)/Ar,(Gn-nn.height)/Rn)}else{const Ar=gn.width-wr.width,Rn=gn.height-wr.height,Ai=vo({width:Ar,height:Rn},Ln);Un=-Math.min((Dn-wr.width)/Ai.width,(Gn-wr.height)/Ai.height)}Vn(Un)});N(t,H,B=>n(28,Tt=B));const me=B=>{const Oe=bi(Qr);let He,kn,Vn;const Un=ys(mt)?ii(pe.height,pe.width):pe,nn=vo(Un,Oe);if(B>=0){const Gn=nn.width-xt[0].width,Ln=nn.height-xt[0].height;He=nn.width-Gn*B,kn=nn.height-Ln*B,Vn=js({width:He,height:kn},Oe)}else{const Gn=xt[1].width-nn.width,Ln=xt[1].height-nn.height;He=nn.width+Gn*-B,kn=nn.height+Ln*-B,Vn=vo({width:He,height:kn},Oe)}He=Vn.width,kn=Vn.height;const gn=Qr.x+.5*Qr.width-.5*He,Dn=Qr.y+.5*Qr.height-.5*kn;Ct(In,et={x:gn,y:Dn,width:He,height:kn},et)};let Tn;const sn=B=>{const Oe=Ki(Pn(Tn),1/B);Ct(qi,Mt=Oe,Mt),Ct(In,et=Oe,et)};let se;const _e=()=>{Yo.set({})};let Bn;const Yn=un(0,{precision:1e-4});N(t,Yn,B=>n(29,je=B));const Sr=un();N(t,Sr,B=>n(30,Le=B));const lr=Fn([ni,Oo,ir],([B,Oe,He],kn)=>{if(!r)return;const Vn=yl(He),Un=[...Vn].map(nn=>nn[0]).sort((nn,gn)=>zr(nn[0])&&!zr(gn[0])?1:-1).find(nn=>{if(zr(nn)&&Oe){const[gn,Dn]=nn,Gn=Oe.width===gn&&Oe.height===Dn,Ln=B===Ra(gn,Dn);return Gn&&Ln}return nn===B});if(!Un)return kn(void 0);kn(Vn.map(nn=>nn[0]).findIndex(nn=>zr(nn)?qs(nn,Un):nn===Un))});N(t,lr,B=>n(154,dn=B));const Wn=(B,Oe)=>{if(!r||B===-1||B===void 0)return;const He=yl(Oe)[B][0];return He?zr(He)?Ra(He[0],He[1]):He:void 0},_o=Fn([xr,ki,ya],([B,Oe,He],kn)=>{const{rows:Vn,cols:Un,opacity:nn}=he(Er,He);if(!Oe||nn<=0)return kn([]);const{x:gn,y:Dn,width:Gn,height:Ln}=Oe,Yr=Gn/Un,wr=Ln/Vn,Ar=[];for(let Rn=1;Rn<=Vn-1;Rn++){const Ai=Dn+wr*Rn;Ar.push({id:"image-selection-guide-row-"+Rn,points:[dt(gn,Ai),dt(gn+Gn,Ai)],opacity:nn,strokeWidth:1,strokeColor:B})}for(let Rn=1;Rn<=Un-1;Rn++){const Ai=gn+Yr*Rn;Ar.push({id:"image-selection-guide-col-"+Rn,points:[dt(Ai,Dn),dt(Ai,Dn+Ln)],opacity:nn,strokeWidth:1,strokeColor:B})}kn(Ar)});N(t,_o,B=>n(140,X=B));const Fo="crop-"+Oa();let Bo,Zs=Fo+"-"+(we?ue:"zoom"),Co=Zs,li;const Ro=un(k?20:0);return N(t,Ro,B=>n(137,O=B)),t.$$set=B=>{"isActive"in B&&en(n(0,Ke=B.isActive)),"stores"in B&&n(96,Cn=B.stores),"cropImageSelectionCornerStyle"in B&&n(1,J=B.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in B&&n(97,he=B.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in B&&n(98,K=B.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in B&&n(99,Gt=B.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in B&&n(100,ce=B.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in B&&n(101,we=B.cropEnableRotationInput),"cropEnableZoom"in B&&n(2,ge=B.cropEnableZoom),"cropEnableZoomInput"in B&&n(102,Nt=B.cropEnableZoomInput),"cropEnableZoomAutoHide"in B&&n(103,Pe=B.cropEnableZoomAutoHide),"cropEnableImageSelection"in B&&n(104,Qt=B.cropEnableImageSelection),"cropEnableInfoIndicator"in B&&n(105,Ge=B.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in B&&n(106,Ye=B.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in B&&n(107,Qe=B.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in B&&n(108,fn=B.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in B&&n(109,at=B.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in B&&n(110,At=B.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in B&&n(111,jt=B.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in B&&n(112,rt=B.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in B&&n(113,Dt=B.cropSelectPresetOptions),"cropEnableSelectPreset"in B&&n(114,ee=B.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in B&&n(115,de=B.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in B&&n(94,te=B.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in B&&n(116,on=B.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in B&&n(117,Xt=B.cropWillRenderTools),"cropActiveTransformTool"in B&&n(118,ue=B.cropActiveTransformTool),"cropMinimizeToolbar"in B&&n(119,wn=B.cropMinimizeToolbar),"cropInteractionFocus"in B&&n(120,Zn=B.cropInteractionFocus),"cropRotationRange"in B&&n(3,_r=B.cropRotationRange),"cropMaskOpacity"in B&&n(121,Nn=B.cropMaskOpacity),"locale"in B&&n(4,ne=B.locale)},t.$$.update=()=>{4096&t.$$.dirty[0]|134217728&t.$$.dirty[3]&&Ur.set(Zn==="selection"&&I),1048576&t.$$.dirty[3]&&n(128,r=Dt&&Array.isArray(Dt)&&Dt.length),1048576&t.$$.dirty[3]|16&t.$$.dirty[4]&&ir.set(r?Dt:[]),4096&t.$$.dirty[0]&&I&&Ua.set(1),4096&t.$$.dirty[0]&&ar.set(!I),4096&t.$$.dirty[0]&&So.set(!I),4096&t.$$.dirty[0]&&I&&ra.set(!0),32768&t.$$.dirty[4]&&n(123,h=G.layoutMode==="overlay"),1075838976&t.$$.dirty[3]&&n(127,C=ee&&!h),41943040&t.$$.dirty[4]&&n(136,l=ct&&ft&&Op(ct,ft)),33558528&t.$$.dirty[4]&&n(134,c=!(!ft||!l)),33559552&t.$$.dirty[4]&&n(132,d=c&&Aa(ft,l,B=>ln(B,5))),16400&t.$$.dirty[0]|26148866&t.$$.dirty[3]|2013298968&t.$$.dirty[4]|15&t.$$.dirty[5]&&n(11,i=Ne&&Xt([at&&["Button","rotate-left",{label:ne.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:ne.cropIconButtonRotateLeft,onclick:()=>{Mi(-Math.PI/2),ti.write()}}],At&&["Button","rotate-right",{label:ne.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:ne.cropIconButtonRotateRight,onclick:()=>{Mi(Math.PI/2),ti.write()}}],jt&&["Button","flip-horizontal",{label:ne.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:ne.cropIconButtonFlipHorizontal,onclick:()=>{ys(mt)?Ct(no,Ut=!Ut,Ut):Ct(jo,Ee=!Ee,Ee),ti.write()}}],rt&&["Button","flip-vertical",{label:ne.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:ne.cropIconButtonFlipVertical,onclick:()=>{ys(mt)?Ct(jo,Ee=!Ee,Ee):Ct(no,Ut=!Ut,Ut),ti.write()}}],C&&r&&[te===!1?"Dropdown":W8,"select-preset",{icon:vi(ne.cropIconSelectPreset,ne,Wn(dn,Te)),label:vi(ne.cropLabelSelectPreset,ne,Wn(dn,Te)),labelClass:"PinturaToolbarContentWide",options:Te,filter:te,onfilterchange:Cr,selectedIndex:dn,onchange:({value:B})=>{zr(B)?(Ct(ni,Ht=Ra(B[0],B[1]),Ht),Ct(Oo,Ce=Kx(B),Ce)):Ct(ni,Ht=B,Ht),d&&_e(),ti.write()},optionMapper:B=>{let Oe=!1;const He=zr(B.value)?B.value[0]/B.value[1]:B.value;if(He){const kn=Uc(pe,mt,He);Oe=kn.width<Q.width||kn.height<Q.height}return B.icon=((kn,Vn={})=>{const{width:Un=24,height:nn=24,bounds:gn=16,radius:Dn=3}=Vn;let Gn,Ln,Yr,wr,Ar=zr(kn)?Ra(kn[0],kn[1]):kn,Rn=!!Ar;return Ar=Rn?Ar:1,Yr=Ar>1?gn:Ar*gn,wr=Yr/Ar,Gn=Math.round(.5*(Un-Yr)),Ln=Math.round(.5*(nn-wr)),`<rect fill="${Rn?"currentColor":"none"}" stroke="${Rn?"none":"currentColor"}" stroke-width="${Un/16}" stroke-dasharray="${[Un/12,Un/6].join(" ")}" x="${Gn}" y="${Ln}" width="${Yr}" height="${wr}" rx="${Dn}"/>`})(B.value,{bounds:14}),{...B,disabled:Oe}}}],on&&["Dropdown","select-crop-limit",{icon:vi(ne.cropIconCropBoundary,ne,ot),label:ne.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:B})=>{Ct(To,ot=B,ot),ti.write()},options:[[!0,ne.cropLabelCropBoundaryEdge,{icon:vi(ne.cropIconCropBoundary,ne,!0)}],[!1,ne.cropLabelCropBoundaryNone,{icon:vi(ne.cropIconCropBoundary,ne,!1)}]]}]].filter(Boolean),G,()=>fr.set({})).filter(Boolean)),6144&t.$$.dirty[0]|1140850688&t.$$.dirty[3]|32768&t.$$.dirty[4]&&Ct(ia,St=I&&wn!=="never"&&(wn==="always"||G.verticalSpace==="short"||h)?i.map(([B,Oe,He])=>Array.isArray(He)?[B,Oe,He]:[B,Oe,{...He,hideLabel:!0}]):[],St),268435456&t.$$.dirty[4]&&n(23,o=ot?0:-1),75497472&t.$$.dirty[4]&&n(129,a=ct&&dt(-(yt.x-ct.x),-(yt.y-ct.y))),262176&t.$$.dirty[4]&&n(130,s=lt&&dt(au(lt.x+.5*lt.width+a.x),au(lt.y+.5*lt.height+a.y))),16777216&t.$$.dirty[4]&&n(133,u=U!=null),8392704&t.$$.dirty[4]&&n(135,p=ct&&l&&(l.height===ct.height||l.width===ct.width)),6293504&t.$$.dirty[4]&&n(131,f=!p&&j<1&&Y<1),1920&t.$$.dirty[4]&&n(9,m=c&&!u&&(!d||f)),8192&t.$$.dirty[0]|1073745920&t.$$.dirty[3]&&n(22,$=Ge&&!!et&&!h),262176&t.$$.dirty[4]&&n(8,v=lt&&a&&{x:lt.x+a.x,y:lt.y+a.y,width:lt.width,height:lt.height}),256&t.$$.dirty[0]|1073743872&t.$$.dirty[3]&&n(21,b=Qt&&!!v&&!h),32800&t.$$.dirty[3]|1048640&t.$$.dirty[4]&&n(10,S=fn&&!!s&&!K&&!Lt),512&t.$$.dirty[0]|536870944&t.$$.dirty[3]|524288&t.$$.dirty[4]&&m&&K&&!pt&&(clearTimeout(Bn),n(122,Bn=setTimeout(_e,K))),536870912&t.$$.dirty[3]|524288&t.$$.dirty[4]&&pt&&clearTimeout(Bn),1536&t.$$.dirty[0]|16384&t.$$.dirty[4]&&Yn.set(S&&m?1:0,{hard:k===!1}),16448&t.$$.dirty[4]&&Sr.set(s,{hard:k===!1}),4096&t.$$.dirty[0]|131072&t.$$.dirty[4]&&(I&&!q?(Ct(Lo,D.crop={maskOpacity:Nn,maskMarkupOpacity:Nn},D),Lo.set(D)):(delete D.crop,Lo.set(D))),65536&t.$$.dirty[4]&&X&&qr.update(B=>{const Oe=B.filter(He=>!/^image\-selection\-guide/.test(He.id));return I?[...Oe,...X]:Oe}),32768&t.$$.dirty[4]&&n(126,T=G.verticalSpace!=="short"),1140850688&t.$$.dirty[3]|4&t.$$.dirty[4]&&n(20,R=wn==="never"&&!h||T&&wn!=="always"),4&t.$$.dirty[0]|512&t.$$.dirty[3]&&n(125,A=ge&&Nt),1024&t.$$.dirty[3]|6&t.$$.dirty[4]&&n(124,E=Pe?T&&A:A),256&t.$$.dirty[3]|1&t.$$.dirty[4]&&n(19,M=we||E),1&t.$$.dirty[4]&&(E||n(5,Co=Zs)),32&t.$$.dirty[0]&&n(18,P={name:Fo,selected:Co}),16&t.$$.dirty[0]|256&t.$$.dirty[3]|1&t.$$.dirty[4]&&n(7,_=[we&&{id:Fo+"-rotation",label:ne.cropLabelTabRotation},E&&{id:Fo+"-zoom",label:ne.cropLabelTabZoom}].filter(Boolean)),128&t.$$.dirty[0]&&n(17,y=_.map(B=>B.id)),64&t.$$.dirty[0]|1073741824&t.$$.dirty[3]&&Bo&&!Bo.children.length&&h&&Bo.dispatchEvent(new CustomEvent("measure",{detail:Bo.rect})),4096&t.$$.dirty[0]|16384&t.$$.dirty[4]&&k&&Ro.set(I?0:20),8192&t.$$.dirty[4]&&n(16,z=O?`transform: translateY(${O}px)`:void 0)},[Ke,J,ge,_r,ne,Co,Bo,_,v,m,S,i,I,et,mt,li,z,y,P,M,R,b,$,o,Se,qe,En,Et,Tt,je,Le,Ie,mr,fr,Ur,$r,ir,or,On,Hr,xo,Ao,Wi,Hi,eo,ia,Lo,jo,no,ji,va,Oo,Dr,wo,jr,ki,qi,Ii,In,Do,ei,Ir,ni,To,oi,qo,Kr,()=>{Er="select",Ct(On,pt=!0,pt),Ct(wo,U=Pn(ft),U),Eo=Lt?Io:ro},({detail:B})=>{const{boundsLimited:Oe,boundsIntent:He}=Eo(B.direction,B.translation);Ct(Hr,It=!0,It),Ct(jr,st=He,st),Ct(Dr,ft=Oe,ft)},({detail:B})=>{const{boundsLimited:Oe}=Eo(B.direction,B.translation);Ct(Hr,It=!1,It),Ct(On,pt=!1,pt),Ct(jr,st=void 0,st),fl(B.translation)&&(Ct(Dr,ft=Oe,ft),ti.write()),Ct(wo,U=void 0,U),Er=void 0},()=>{Er="rotate",Ct(On,pt=!0,pt),Ct(Ii,Wt=Pn(et),Wt)},B=>{Ct(Hr,It=!0,It),Ct(ji,mt=B,mt)},B=>{Ct(Hr,It=!1,It),Ct(On,pt=!1,pt),Ct(ji,mt=B,mt),ti.write(),Ct(Ii,Wt=void 0,Wt)},()=>{Er="pan",io=void 0,Ct(On,pt=!0,pt),Qr=Pn(et)},({detail:B})=>{Ct(Hr,It=!0,It),ai(B)},({detail:B})=>{Ct(Hr,It=!1,It),Ct(On,pt=!1,pt),(fl(B.translation)>0||B.scalar!==0)&&(ai(B),ti.write()),Ct(qi,Mt=void 0,Mt),Qr=void 0},({detail:{translation:B}})=>{Lt&&(B=Wc(Ue(B))),io=B,Ct(On,pt=!1,pt)},Pi,an,H,()=>{Er="zoom",Ct(On,pt=!0,pt),Qr=Pn(et)},B=>{Ct(Hr,It=!1,It),me(B)},B=>{me(B),ti.write(),Ct(Hr,It=!1,It),Ct(On,pt=!1,pt),Qr=void 0},()=>{Er="zoom",Qr||(Tn=Pn(et),Ct(On,pt=!0,pt))},({detail:B})=>{Tn&&(Ct(Hr,It=!0,It),sn(B))},({detail:B})=>{Tn&&(Ct(Hr,It=!1,It),Ct(On,pt=!1,pt),sn(B),Ct(qi,Mt=void 0,Mt),Tn=void 0,ti.write())},B=>{const Oe=C0(B,Se,yt);if(Qe&&!Kp(ft,Oe))return;Er="zoom",Ct(On,pt=!0,pt),Ct(Hr,It=!0,It),B.preventDefault(),B.stopPropagation();const He=Dh(B),kn=1+He/100,Vn=Pn(et),Un=Math.min(et.width/Q.width,et.height/Q.height)===1;if(Gt&&ot){const Dn=mi(et,pe,mt);if(Jr()&&Dn&&He>0&&d){Ct(On,pt=!1,pt),Ct(Hr,It=!1,It);const Gn=ys(mt)?fo({height:pe.width,width:pe.height}):fo(pe);return Aa(Vn,Gn)||(clearTimeout(se),Aa(ti.state.crop,Gn))?void 0:(Ct(In,et=Gn,et),void ti.write())}}let nn=An(et);if(Ye&&Zn!=="selection"&&He<0&&!Un){const Dn=Zr(Ue(Oe),ft),Gn=Math.min(ft.width/et.width,ft.height/et.height),Ln=Ki(Pn(ft),1.1);nn=Kp(Ln,Oe)?Xr(Pn(et),Qi(Dn,1/Gn)):nn}let gn=Ki(Pn(et),kn,nn);if(Zp(Jt[1],gn)||(gn=ay(An(gn),Jt[1])),Zp(gn,Jt[0])||(gn=ay(An(gn),Jt[0])),Aa(Vn,gn,ln))return Ct(On,pt=!1,pt),void Ct(Hr,It=!1,It);Ct(In,et=ma(gn,Dn=>ln(Dn,5)),et),Ct(On,pt=!1,pt),Ct(Hr,It=!1,It),clearTimeout(se),se=setTimeout(()=>{ti.write()},500)},_e,Yn,Sr,lr,_o,Fo,Ro,te,"crop",Cn,he,K,Gt,ce,we,Nt,Pe,Qt,Ge,Ye,Qe,fn,at,At,jt,rt,Dt,ee,de,on,Xt,ue,wn,Zn,Nn,Bn,h,E,A,T,C,r,a,s,f,d,u,c,p,l,O,k,G,X,q,lt,pt,Lt,Y,j,ct,U,ft,yt,pe,ot,Q,dn,Te,Ut,Ee,Ne,function(B){go.call(this,t,B)},({detail:B})=>n(5,Co=B),function(B){zn[B?"unshift":"push"](()=>{Bo=B,n(6,Bo)})},B=>jf(B),function(B){li=B,n(15,li)},function(B){go.call(this,t,B)}]}var iP={util:["crop",class extends mn{constructor(t){super(),hn(this,t,rP,tP,rn,{name:95,isActive:0,stores:96,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:97,cropAutoCenterImageSelectionTimeout:98,cropEnableZoomMatchImageAspectRatio:99,cropEnableRotateMatchImageAspectRatio:100,cropEnableRotationInput:101,cropEnableZoom:2,cropEnableZoomInput:102,cropEnableZoomAutoHide:103,cropEnableImageSelection:104,cropEnableInfoIndicator:105,cropEnableZoomTowardsWheelPosition:106,cropEnableLimitWheelInputToCropSelection:107,cropEnableCenterImageSelection:108,cropEnableButtonRotateLeft:109,cropEnableButtonRotateRight:110,cropEnableButtonFlipHorizontal:111,cropEnableButtonFlipVertical:112,cropSelectPresetOptions:113,cropEnableSelectPreset:114,cropEnableFilterMatchAspectRatio:115,cropSelectPresetFilter:94,cropEnableButtonToggleCropLimit:116,cropWillRenderTools:117,cropActiveTransformTool:118,cropMinimizeToolbar:119,cropInteractionFocus:120,cropRotationRange:3,cropMaskOpacity:121,locale:4},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[95]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),F()}get stores(){return this.$$.ctx[96]}set stores(t){this.$$set({stores:t}),F()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$$set({cropImageSelectionCornerStyle:t}),F()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[97]}set cropWillRenderImageSelectionGuides(t){this.$$set({cropWillRenderImageSelectionGuides:t}),F()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[98]}set cropAutoCenterImageSelectionTimeout(t){this.$$set({cropAutoCenterImageSelectionTimeout:t}),F()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[99]}set cropEnableZoomMatchImageAspectRatio(t){this.$$set({cropEnableZoomMatchImageAspectRatio:t}),F()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableRotateMatchImageAspectRatio(t){this.$$set({cropEnableRotateMatchImageAspectRatio:t}),F()}get cropEnableRotationInput(){return this.$$.ctx[101]}set cropEnableRotationInput(t){this.$$set({cropEnableRotationInput:t}),F()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$$set({cropEnableZoom:t}),F()}get cropEnableZoomInput(){return this.$$.ctx[102]}set cropEnableZoomInput(t){this.$$set({cropEnableZoomInput:t}),F()}get cropEnableZoomAutoHide(){return this.$$.ctx[103]}set cropEnableZoomAutoHide(t){this.$$set({cropEnableZoomAutoHide:t}),F()}get cropEnableImageSelection(){return this.$$.ctx[104]}set cropEnableImageSelection(t){this.$$set({cropEnableImageSelection:t}),F()}get cropEnableInfoIndicator(){return this.$$.ctx[105]}set cropEnableInfoIndicator(t){this.$$set({cropEnableInfoIndicator:t}),F()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[106]}set cropEnableZoomTowardsWheelPosition(t){this.$$set({cropEnableZoomTowardsWheelPosition:t}),F()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[107]}set cropEnableLimitWheelInputToCropSelection(t){this.$$set({cropEnableLimitWheelInputToCropSelection:t}),F()}get cropEnableCenterImageSelection(){return this.$$.ctx[108]}set cropEnableCenterImageSelection(t){this.$$set({cropEnableCenterImageSelection:t}),F()}get cropEnableButtonRotateLeft(){return this.$$.ctx[109]}set cropEnableButtonRotateLeft(t){this.$$set({cropEnableButtonRotateLeft:t}),F()}get cropEnableButtonRotateRight(){return this.$$.ctx[110]}set cropEnableButtonRotateRight(t){this.$$set({cropEnableButtonRotateRight:t}),F()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[111]}set cropEnableButtonFlipHorizontal(t){this.$$set({cropEnableButtonFlipHorizontal:t}),F()}get cropEnableButtonFlipVertical(){return this.$$.ctx[112]}set cropEnableButtonFlipVertical(t){this.$$set({cropEnableButtonFlipVertical:t}),F()}get cropSelectPresetOptions(){return this.$$.ctx[113]}set cropSelectPresetOptions(t){this.$$set({cropSelectPresetOptions:t}),F()}get cropEnableSelectPreset(){return this.$$.ctx[114]}set cropEnableSelectPreset(t){this.$$set({cropEnableSelectPreset:t}),F()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[115]}set cropEnableFilterMatchAspectRatio(t){this.$$set({cropEnableFilterMatchAspectRatio:t}),F()}get cropSelectPresetFilter(){return this.$$.ctx[94]}set cropSelectPresetFilter(t){this.$$set({cropSelectPresetFilter:t}),F()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[116]}set cropEnableButtonToggleCropLimit(t){this.$$set({cropEnableButtonToggleCropLimit:t}),F()}get cropWillRenderTools(){return this.$$.ctx[117]}set cropWillRenderTools(t){this.$$set({cropWillRenderTools:t}),F()}get cropActiveTransformTool(){return this.$$.ctx[118]}set cropActiveTransformTool(t){this.$$set({cropActiveTransformTool:t}),F()}get cropMinimizeToolbar(){return this.$$.ctx[119]}set cropMinimizeToolbar(t){this.$$set({cropMinimizeToolbar:t}),F()}get cropInteractionFocus(){return this.$$.ctx[120]}set cropInteractionFocus(t){this.$$set({cropInteractionFocus:t}),F()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(t){this.$$set({cropRotationRange:t}),F()}get cropMaskOpacity(){return this.$$.ctx[121]}set cropMaskOpacity(t){this.$$set({cropMaskOpacity:t}),F()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),F()}}]};function oP(t){let e,n,r,i,o,a,s,l=t[77],c=(hr(t[77].label)?t[77].label(t[2]):t[77].label)+"";function d(...h){return t[51](t[77],...h)}const u=()=>t[52](n,l),p=()=>t[52](null,l);return{c(){e=bt("div"),n=bt("div"),r=be(),i=bt("span"),o=vr(c),w(n,"class",Uw),w(e,"slot","option"),w(e,"class","PinturaFilterOption")},m(h,f){it(h,e,f),Rt(e,n),u(),Rt(e,r),Rt(e,i),Rt(i,o),a||(s=[kt(n,"measure",d),Jn(Ui.call(null,n))],a=!0)},p(h,f){l!==(t=h)[77]&&(p(),l=t[77],u()),4&f[0]|32768&f[2]&&c!==(c=(hr(t[77].label)?t[77].label(t[2]):t[77].label)+"")&&Vr(o,c)},d(h){h&&nt(e),p(),a=!1,tr(s)}}}function aP(t){let e,n;return e=new Xs({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[12],onchange:t[32],$$slots:{option:[oP,({option:r})=>({77:r}),({option:r})=>[0,0,r?32768:0]]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};4&i[0]&&(o.locale=r[2]),8&i[0]&&(o.options=r[3]),4096&i[0]&&(o.selectedIndex=r[12]),1028&i[0]|98304&i[2]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function sP(t){let e,n,r,i,o,a,s,l;function c(h){t[54](h)}function d(h){t[55](h)}function u(h){t[56](h)}let p={elasticity:t[13]*t[19],onscroll:t[53],$$slots:{default:[aP]},$$scope:{ctx:t}};return t[4]!==void 0&&(p.maskFeatherStartOpacity=t[4]),t[5]!==void 0&&(p.maskFeatherEndOpacity=t[5]),t[6]!==void 0&&(p.maskFeatherSize=t[6]),n=new cs({props:p}),zn.push(()=>Go(n,"maskFeatherStartOpacity",c)),zn.push(()=>Go(n,"maskFeatherEndOpacity",d)),zn.push(()=>Go(n,"maskFeatherSize",u)),n.$on("measure",t[57]),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"slot","footer"),w(e,"style",t[11])},m(h,f){it(h,e,f),Ft(n,e,null),a=!0,s||(l=[kt(e,"transitionend",t[30]),kt(e,"measure",t[58]),Jn(Ui.call(null,e,{observePosition:!0}))],s=!0)},p(h,f){const m={};8192&f[0]&&(m.elasticity=h[13]*h[19]),128&f[0]&&(m.onscroll=h[53]),5132&f[0]|65536&f[2]&&(m.$$scope={dirty:f,ctx:h}),!r&&16&f[0]&&(r=!0,m.maskFeatherStartOpacity=h[4],ta(()=>r=!1)),!i&&32&f[0]&&(i=!0,m.maskFeatherEndOpacity=h[5],ta(()=>i=!1)),!o&&64&f[0]&&(o=!0,m.maskFeatherSize=h[6],ta(()=>o=!1)),n.$set(m),(!a||2048&f[0])&&w(e,"style",h[11])},i(h){a||(L(n.$$.fragment,h),a=!0)},o(h){W(n.$$.fragment,h),a=!1},d(h){h&&nt(e),Bt(n),s=!1,tr(l)}}}function lP(t){let e,n;return e=new bc({props:{$$slots:{footer:[sP]},$$scope:{ctx:t}}}),e.$on("measure",t[59]),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16380&i[0]|65536&i[2]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}let Uw="PinturaFilterPreview";function cP(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,b,S,v,T,C,R,A=Je,E=()=>(A(),A=ho(y,Et=>n(43,d=Et)),y),M=Je,P=()=>(M(),M=ho(_,Et=>n(49,v=Et)),_);t.$$.on_destroy.push(()=>A()),t.$$.on_destroy.push(()=>M());let{isActive:_}=e;P();let{isActiveFraction:y}=e;E();let{stores:z}=e,{locale:O}=e,{filterFunctions:I}=e,{filterOptions:k}=e;const G=kr("elasticityMultiplier");N(t,G,Et=>n(13,R=Et));const{history:X,interfaceImages:q,stageRectBase:D,utilRect:lt,animation:pt,scrollElasticity:Lt,imageSize:et,imagePreview:Y,imageCropRect:j,imageRotation:ct,imageFlipX:U,imageFlipY:ft,imageBackgroundColor:yt,imageGamma:It,imageColorMatrix:Jt,allowPan:pe,allowZoom:mt,allowZoomControls:ot,allowPlayPause:Q}=z;N(t,q,Et=>n(60,u=Et)),N(t,D,Et=>n(48,S=Et)),N(t,lt,Et=>n(47,b=Et)),N(t,pt,Et=>n(50,T=Et)),N(t,et,Et=>n(62,h=Et)),N(t,Y,Et=>n(42,c=Et)),N(t,yt,Et=>n(61,p=Et)),N(t,It,Et=>n(44,f=Et)),N(t,Jt,Et=>n(40,s=Et));const Se=ye({});N(t,Se,Et=>n(46,$=Et));const Mt=(Et,Tt)=>Ct(Se,$[Et.value]=Tt,$),xt=Fn(Se,Et=>{if(!Et[void 0])return;const Tt=Et[void 0];return C&&nu(C,Tt)?C:ko(Tt)});N(t,xt,Et=>n(63,C=Et));const Wt=Fn([_,xt,j,et,ct,U,ft],([Et,Tt,je,Le,yn,en,Ke],Cn)=>{if(!Et||!Tt||!Le)return m;const J=fo(Le),he=An(J),K=Af(Le,je,yn),Gt=An(K),ce=Zr(Ue(he),Gt),we=Wc(Ue(ce)),ge=Math.max(Tt.width/je.width,Tt.height/je.height);Cn({origin:we,translation:ce,rotation:{x:Ke?Math.PI:0,y:en?Math.PI:0,z:yn},scale:ge})});N(t,Wt,Et=>n(45,m=Et));const Ht=un(T?20:0);let Ae;N(t,Ht,Et=>n(39,a=Et));const ke={};let st,St,Ce,dn,Te,Ut,Ee={x:0,y:0};const Ne=ye([]);N(t,Ne,Et=>n(41,l=Et));const qe=Et=>{const Tt={...Et,data:c,size:h,offset:{...Et.offset},mask:{...Et.mask},backgroundColor:p};return Tt.opacity=d,Tt.offset.y+=a,Tt.mask.y+=a,Tt.id="filter",Tt},En=()=>u.filter(Et=>Et.id!=="filter");return $a(()=>{q.set([])}),t.$$set=Et=>{"isActive"in Et&&P(n(0,_=Et.isActive)),"isActiveFraction"in Et&&E(n(1,y=Et.isActiveFraction)),"stores"in Et&&n(34,z=Et.stores),"locale"in Et&&n(2,O=Et.locale),"filterFunctions"in Et&&n(35,I=Et.filterFunctions),"filterOptions"in Et&&n(3,k=Et.filterOptions)},t.$$.update=()=>{if(262144&t.$$.dirty[1]&&pe.set(v),262144&t.$$.dirty[1]&&mt.set(v),262144&t.$$.dirty[1]&&ot.set(v),262144&t.$$.dirty[1]&&v&&Q.set(!1),8&t.$$.dirty[0]&&n(38,r=yl(k)),640&t.$$.dirty[1]&&n(12,i=((Et,Tt)=>{if(!Et||!Et.filter||!Tt)return 0;const je=Et.filter;return Tt.findIndex(([Le])=>{if(!I[Le])return!1;const yn=I[Le]();return qs(yn,je)})})(s,r)),786432&t.$$.dirty[1]&&T&&Ht.set(v?0:20),512&t.$$.dirty[0]|458752&t.$$.dirty[1]&&v&&b&&S&&Ut&&n(37,Te={x:S.x-b.x,y:S.y-b.y+Ut.y}),496&t.$$.dirty[0]|58096&t.$$.dirty[1]&&m&&Te&&Ee&&dn&&Ae){const Et=Te.x+dn.x+Ee.x,Tt=Te.y,je=dn.x+Te.x,Le=je+dn.width;Ne.set(r.map(([yn],en)=>{const Ke=$[yn],Cn=Ee.x+Ke.x,J=Cn+Ke.width;if(J<0||Cn>dn.width)return!1;const he=Et+Ke.x,K=Tt+Ke.y,Gt=(we=>({origin:Ue(we.origin),translation:Ue(we.translation),rotation:{...we.rotation},scale:we.scale}))(m);Gt.offset=dt(.5*Ke.width+he,.5*Ke.height+K),Gt.maskOpacity=1,Gt.mask=Br(he+0,K,Ke.width+0,Ke.height),Gt.maskFeather=[1,0,1,0,1,Le,1,Le],Cn<Ce&&st<1&&(Gt.maskFeather[0]=st,Gt.maskFeather[1]=je,Gt.maskFeather[2]=1,Gt.maskFeather[3]=je+Ce),J>dn.width-Ce&&St<1&&(Gt.maskFeather[4]=St,Gt.maskFeather[5]=Le-Ce,Gt.maskFeather[6]=1,Gt.maskFeather[7]=Le),Gt.maskCornerRadius=Ae[yn];let ce=s&&Object.keys(s).filter(we=>we!="filter").map(we=>s[we])||[];return hr(I[yn])&&ce.push(I[yn]()),Gt.colorMatrix=ce.length?Rf(ce):void 0,Gt.gamma=f,Gt}).filter(Boolean))}if(7424&t.$$.dirty[1])if(d>0&&l){const Et=[...En(),...l.map(qe)];q.set(Et)}else q.set(En());256&t.$$.dirty[1]&&n(11,o=a?`transform: translateY(${a}px)`:void 0)},[_,y,O,k,st,St,Ce,Ee,dn,Ut,ke,o,i,R,G,q,D,lt,pt,Lt,et,Y,yt,It,Jt,Se,Mt,xt,Wt,Ht,Et=>{Et.target.className===Uw&&n(36,Ae=Object.keys(ke).reduce((Tt,je)=>{const Le=ke[je],yn=getComputedStyle(Le),en=["top-left","top-right","bottom-left","bottom-right"].map(Ke=>yn.getPropertyValue(`border-${Ke}-radius`)).map(hw).map(Ke=>1.25*Ke);return Tt[je]=en,Tt},{}))},Ne,({value:Et})=>{Ct(Jt,s={...s,filter:hr(I[Et])?I[Et]():void 0},s),X.write()},"filter",z,I,Ae,Te,r,a,s,l,c,d,f,m,$,b,S,v,T,(Et,Tt)=>Mt(Et,Tt.detail),function(Et,Tt){zn[Et?"unshift":"push"](()=>{ke[Tt.value]=Et,n(10,ke)})},Et=>n(7,Ee=Et),function(Et){st=Et,n(4,st)},function(Et){St=Et,n(5,St)},function(Et){Ce=Et,n(6,Ce)},Et=>n(8,dn=Et.detail),Et=>n(9,Ut=Et.detail),function(Et){go.call(this,t,Et)}]}var dP={util:["filter",class extends mn{constructor(t){super(),hn(this,t,cP,lP,rn,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),F()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),F()}get stores(){return this.$$.ctx[34]}set stores(t){this.$$set({stores:t}),F()}get locale(){return this.$$.ctx[2]}set locale(t){this.$$set({locale:t}),F()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(t){this.$$set({filterFunctions:t}),F()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(t){this.$$set({filterOptions:t}),F()}}]};function uP(t){let e,n,r=t[43].label+"";return{c(){e=bt("span"),n=vr(r)},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){4096&o[1]&&r!==(r=i[43].label+"")&&Vr(n,r)},d(i){i&&nt(e)}}}function pP(t){let e,n;const r=[{class:"PinturaControlList"},{tabs:t[1]},t[5]];let i={$$slots:{default:[uP,({tab:o})=>({43:o}),({tab:o})=>[0,o?4096:0]]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new Lh({props:i}),e.$on("select",t[24]),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=34&a[0]?Vi(r,[r[0],2&a[0]&&{tabs:o[1]},32&a[0]&&to(o[5])]):{};12288&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){Bt(e,o)}}}function hP(t){let e,n;const r=[t[7][t[42]]];let i={};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new qf({props:i}),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=128&a[0]|2048&a[1]?Vi(r,[to(o[7][o[42]])]):{};e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){Bt(e,o)}}}function mP(t){let e,n,r,i,o;n=new cs({props:{elasticity:t[6]*t[9],class:"PinturaControlListScroller",$$slots:{default:[pP]},$$scope:{ctx:t}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[5]];let s={$$slots:{default:[hP,({panel:l})=>({42:l}),({panel:l})=>[0,l?2048:0]]},$$scope:{ctx:t}};for(let l=0;l<a.length;l+=1)s=Or(s,a[l]);return i=new Oh({props:s}),{c(){e=bt("div"),zt(n.$$.fragment),r=be(),zt(i.$$.fragment),w(e,"slot","footer"),w(e,"style",t[3])},m(l,c){it(l,e,c),Ft(n,e,null),Rt(e,r),Ft(i,e,null),o=!0},p(l,c){const d={};64&c[0]&&(d.elasticity=l[6]*l[9]),38&c[0]|8192&c[1]&&(d.$$scope={dirty:c,ctx:l}),n.$set(d);const u=48&c[0]?Vi(a,[a[0],a[1],16&c[0]&&{panels:l[4]},32&c[0]&&to(l[5])]):{};128&c[0]|10240&c[1]&&(u.$$scope={dirty:c,ctx:l}),i.$set(u),(!o||8&c[0])&&w(e,"style",l[3])},i(l){o||(L(n.$$.fragment,l),L(i.$$.fragment,l),o=!0)},o(l){W(n.$$.fragment,l),W(i.$$.fragment,l),o=!1},d(l){l&&nt(e),Bt(n),Bt(i)}}}function fP(t){let e,n;return e=new bc({props:{$$slots:{footer:[mP]},$$scope:{ctx:t}}}),e.$on("measure",t[25]),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};254&i[0]|8192&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function gP(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f=Je,m=()=>(f(),f=ho(b,j=>n(21,c=j)),b);t.$$.on_destroy.push(()=>f());let{stores:$}=e,{isActive:b}=e;m();let{locale:S={}}=e,{finetuneControlConfiguration:v}=e,{finetuneOptions:T}=e,{finetuneNudgePrecision:C}=e;const{history:R,animation:A,scrollElasticity:E,rangeInputElasticity:M,imageColorMatrix:P,imageConvolutionMatrix:_,imageGamma:y,imageVignette:z,imageNoise:O,allowPan:I,allowZoom:k,allowZoomControls:G,allowPlayPause:X}=$;N(t,A,j=>n(22,d=j));const q={imageColorMatrix:P,imageConvolutionMatrix:_,imageGamma:y,imageVignette:z,imageNoise:O},D=kr("elasticityMultiplier");N(t,D,j=>n(6,p=j));const lt="finetune-"+Oa(),pt=ye({});N(t,pt,j=>n(23,u=j));const Lt=ye({});N(t,Lt,j=>n(7,h=j));let et=[];const Y=un(d?20:0);return N(t,Y,j=>n(20,l=j)),t.$$set=j=>{"stores"in j&&n(15,$=j.stores),"isActive"in j&&m(n(0,b=j.isActive)),"locale"in j&&n(16,S=j.locale),"finetuneControlConfiguration"in j&&n(17,v=j.finetuneControlConfiguration),"finetuneOptions"in j&&n(18,T=j.finetuneOptions),"finetuneNudgePrecision"in j&&n(19,C=j.finetuneNudgePrecision)},t.$$.update=()=>{var j;2097152&t.$$.dirty[0]&&I.set(c),2097152&t.$$.dirty[0]&&k.set(c),2097152&t.$$.dirty[0]&&G.set(c),2097152&t.$$.dirty[0]&&c&&X.set(!0),327680&t.$$.dirty[0]&&n(1,r=T?T.map(([ct,U])=>({id:ct,label:hr(U)?U(S):U})):[]),2&t.$$.dirty[0]&&n(2,i=r.length&&r[0].id),4&t.$$.dirty[0]&&n(5,o={name:lt,selected:i}),2&t.$$.dirty[0]&&n(4,a=r.map(ct=>ct.id)),131072&t.$$.dirty[0]&&v&&(j=v,et&&et.forEach(ct=>ct()),et=a.map(ct=>{const{getStore:U,getValue:ft=ur}=j[ct];return U(q).subscribe(yt=>{const It=yt!=null?ft(yt):yt;Ct(pt,u={...u,[ct]:It},u)})})),8519680&t.$$.dirty[0]&&v&&u&&Ct(Lt,h=Object.keys(u).reduce((ct,U)=>{const{base:ft,min:yt,max:It,getLabel:Jt,getStore:pe,setValue:mt=(Se,Mt)=>Se.set(Mt)}=v[U],ot=pe(q),Q=u[U]!=null?u[U]:ft;return ct[U]={base:ft,min:yt,max:It,value:Q,valueLabel:Jt?Jt(Q,yt,It,It-yt):Math.round(100*Q),oninputmove:Se=>{mt(ot,Se)},oninputend:Se=>{mt(ot,Se),R.write()},elasticity:p*M,labelReset:S.labelReset,nudgeMultiplier:C},ct},{}),h),6291456&t.$$.dirty[0]&&d&&Y.set(c?0:20),1048576&t.$$.dirty[0]&&n(3,s=l?`transform: translateY(${l}px)`:void 0)},[b,r,i,s,a,o,p,h,A,E,D,pt,Lt,Y,"finetune",$,S,v,T,C,l,c,d,u,({detail:j})=>n(2,i=j),function(j){go.call(this,t,j)}]}var $P={util:["finetune",class extends mn{constructor(t){super(),hn(this,t,gP,fP,rn,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(t){this.$$set({stores:t}),F()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),F()}get locale(){return this.$$.ctx[16]}set locale(t){this.$$set({locale:t}),F()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(t){this.$$set({finetuneControlConfiguration:t}),F()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(t){this.$$set({finetuneOptions:t}),F()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(t){this.$$set({finetuneNudgePrecision:t}),F()}}]},sh=(t,e)=>{const n=e.length;return t<0?t%n+n:t>=n?t%n:t};function ev(t,e,n){const r=t.slice();return r[45]=e[n].key,r[46]=e[n].index,r[47]=e[n].translate,r[48]=e[n].scale,r[12]=e[n].rotate,r[49]=e[n].dir,r[50]=e[n].center,r[51]=e[n].type,r[2]=e[n].visible,r}function nv(t){let e,n;return{c(){e=bt("div"),w(e,"class","PinturaShapeManipulator"),w(e,"data-control","point"),w(e,"style",n=`pointer-events:none;transform: translate3d(${t[50].x}px, ${t[50].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[4]}`)},m(r,i){it(r,e,i)},p(r,i){56&i[0]&&n!==(n=`pointer-events:none;transform: translate3d(${r[50].x}px, ${r[50].y}px, 0) scale(${r[5]}, ${r[5]}); opacity: ${r[4]}`)&&w(e,"style",n)},d(r){r&&nt(e)}}}function rv(t,e){let n,r,i,o,a,s,l,c,d;function u(...h){return e[17](e[46],...h)}let p=e[51]==="edge"&&e[2]&&nv(e);return{key:t,first:null,c(){n=bt("div"),s=be(),p&&p.c(),l=Nr(),w(n,"role","button"),w(n,"aria-label",r=`Drag ${e[51]} ${e[45]}`),w(n,"tabindex",i=e[51]==="edge"?-1:0),w(n,"class","PinturaShapeManipulator"),w(n,"data-control",o=e[51]),w(n,"style",a=`cursor:${e[49]?e[49]+"-resize":"move"};opacity:${e[4]};--tx:${e[47].x};--ty:${e[47].y};--r:${e[51]==="edge"?e[12]:0}rad;--sx:${e[51]==="point"?e[5]:e[48].x};--sy:${e[51]==="point"?e[5]:e[48].y};`),this.first=n},m(h,f){it(h,n,f),it(h,s,f),p&&p.m(h,f),it(h,l,f),c||(d=[kt(n,"nudge",u),Jn(kl.call(null,n,{preventDefault:!0})),kt(n,"interactionstart",function(){Qn(e[9]("start",e[46]))&&e[9]("start",e[46]).apply(this,arguments)}),kt(n,"interactionupdate",function(){Qn(e[9]("move",e[46]))&&e[9]("move",e[46]).apply(this,arguments)}),kt(n,"interactionend",function(){Qn(e[9]("end",e[46]))&&e[9]("end",e[46]).apply(this,arguments)}),Jn(Ml.call(null,n,{observeKeys:!0}))],c=!0)},p(h,f){e=h,8&f[0]&&r!==(r=`Drag ${e[51]} ${e[45]}`)&&w(n,"aria-label",r),8&f[0]&&i!==(i=e[51]==="edge"?-1:0)&&w(n,"tabindex",i),8&f[0]&&o!==(o=e[51])&&w(n,"data-control",o),56&f[0]&&a!==(a=`cursor:${e[49]?e[49]+"-resize":"move"};opacity:${e[4]};--tx:${e[47].x};--ty:${e[47].y};--r:${e[51]==="edge"?e[12]:0}rad;--sx:${e[51]==="point"?e[5]:e[48].x};--sy:${e[51]==="point"?e[5]:e[48].y};`)&&w(n,"style",a),e[51]==="edge"&&e[2]?p?p.p(e,f):(p=nv(e),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null)},d(h){h&&nt(n),h&&nt(s),p&&p.d(h),h&&nt(l),c=!1,tr(d)}}}function iv(t){let e,n,r,i;return{c(){e=bt("div"),w(e,"role","button"),w(e,"aria-label","Drag rotator"),w(e,"tabindex","0"),w(e,"class","PinturaShapeManipulator"),w(e,"data-control","rotate"),w(e,"style",n=`transform: translate3d(${t[0].x}px, ${t[0].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[4]}`)},m(o,a){it(o,e,a),r||(i=[kt(e,"nudge",t[11]),Jn(kl.call(null,e,{preventDefault:!0})),kt(e,"interactionstart",t[12]("start")),kt(e,"interactionupdate",t[12]("move")),kt(e,"interactionend",t[12]("end")),Jn(Ml.call(null,e,{observeKeys:!0}))],r=!0)},p(o,a){49&a[0]&&n!==(n=`transform: translate3d(${o[0].x}px, ${o[0].y}px, 0) scale(${o[5]}, ${o[5]}); opacity: ${o[4]}`)&&w(e,"style",n)},d(o){o&&nt(e),r=!1,tr(i)}}}function yP(t){let e,n,r=[],i=new Map,o=t[3];const a=l=>l[45];for(let l=0;l<o.length;l+=1){let c=ev(t,o,l),d=a(c);i.set(d,r[l]=rv(d,c))}let s=t[1]&&iv(t);return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=be(),s&&s.c(),n=Nr()},m(l,c){for(let d=0;d<r.length;d+=1)r[d].m(l,c);it(l,e,c),s&&s.m(l,c),it(l,n,c)},p(l,c){1592&c[0]&&(o=l[3],r=_s(r,c,a,1,l,o,i,e.parentNode,WS,rv,e,ev)),l[1]?s?s.p(l,c):(s=iv(l),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:Je,o:Je,d(l){for(let c=0;c<r.length;c+=1)r[c].d(l);l&&nt(e),s&&s.d(l),l&&nt(n)}}}function bP(t,e,n){let r,i,o,a;const s=ls(),l=.5*Ma,c=ga-l,d=ga+l,u=-ga,p=u-l,h=u+l,f=vm-l,m=-vm+l,$=l,b=-l,S=ga-Ma,v=S-l,T=S+l,C=vm-Ma,R=C-l,A=C+l,E=u-Ma,M=E+l,P=E-l,_=u+Ma,y=_+l,z=_-l;let{visible:O=!1}=e,{points:I=[]}=e,{rotatorPoint:k}=e,{enableDragEdges:G=!0}=e,{enableDragPoints:X=!0}=e,{enableRotatePoints:q=!0}=e;const D=kr("isAnimated");N(t,D,Y=>n(16,i=Y));const lt=un(.5,{precision:1e-4,stiffness:.3,damping:.7});N(t,lt,Y=>n(5,a=Y));const pt=un(0,{precision:.001,stiffness:.3,damping:.7});N(t,pt,Y=>n(4,o=Y));const Lt=Y=>{let j="";return(Y<=d&&Y>=c||Y>=p&&Y<=h)&&(j="ns"),(Y<=m||Y>=f||Y>=b&&Y<=$)&&(j="ew"),(Y>=R&&Y<=A||Y<=y&&Y>=z)&&(j="nesw"),(Y>=v&&Y<=T||Y<=M&&Y>=P)&&(j="nwse"),j},et=(Y,j)=>{s("resizestart",{indexes:Y,translation:pr()}),s("resizemove",{indexes:Y,translation:j}),s("resizeend",{indexes:Y,translation:pr()})};return t.$$set=Y=>{"visible"in Y&&n(2,O=Y.visible),"points"in Y&&n(13,I=Y.points),"rotatorPoint"in Y&&n(0,k=Y.rotatorPoint),"enableDragEdges"in Y&&n(14,G=Y.enableDragEdges),"enableDragPoints"in Y&&n(15,X=Y.enableDragPoints),"enableRotatePoints"in Y&&n(1,q=Y.enableRotatePoints)},t.$$.update=()=>{65540&t.$$.dirty[0]&&lt.set(O?1:.5,{hard:i===!1}),65540&t.$$.dirty[0]&&pt.set(O?1:0,{hard:i===!1}),8192&t.$$.dirty[0]&&n(3,r=((Y,j)=>{let ct=0;const U=ha(Y),ft=[],yt=Y.length;for(;ct<yt;ct++){const It=sh(ct-1,Y),Jt=sh(ct+1,Y),pe=Y[It],mt=Y[ct],ot=Y[Jt],Q=Math.atan2(ot.y-mt.y,ot.x-mt.x);if(X){const Mt=Po(dt(pe.x-mt.x,pe.y-mt.y)),xt=Po(dt(ot.x-mt.x,ot.y-mt.y)),Wt=dt(Mt.x+xt.x,Mt.y+xt.y),Ht=G?X&&Lt(Math.atan2(Wt.y,Wt.x)):void 0;ft.push({index:[ct],key:"point-"+ct,type:"point",scale:{x:1,y:1},translate:{x:mt.x,y:mt.y},angle:void 0,rotate:q,center:mt,dir:Ht})}if(!G||Array.isArray(G)&&!G.some(([Mt,xt])=>ct===Mt&&Jt===xt))continue;const Se=dt(mt.x+.5*(ot.x-mt.x),mt.y+.5*(ot.y-mt.y));ft.push({index:[ct,Jt],key:"edge-"+ct,type:"edge",scale:{x:Vo(mt,ot),y:1},translate:{x:mt.x,y:mt.y},angle:Q,rotate:Q,center:Se,visible:Array.isArray(G),dir:Lt(Math.atan2(U.y-Se.y,U.x-Se.x))})}return ft})(I))},[k,q,O,r,o,a,D,lt,pt,(Y,j)=>({detail:ct})=>{const U=ct&&ct.translation?ct.translation:dt(0,0);s("resize"+Y,{...ct,indexes:j,translation:U})},et,({detail:Y})=>{s("rotatestart",{translation:pr()}),s("rotatemove",{translation:Y}),s("rotateend",{translation:pr()})},Y=>({detail:j})=>{const ct=j&&j.translation?j.translation:dt(0,0);s("rotate"+Y,{...j,translation:ct})},I,G,X,i,(Y,{detail:j})=>et(Y,j)]}class vP extends mn{constructor(e){super(),hn(this,e,bP,yP,rn,{visible:2,points:13,rotatorPoint:0,enableDragEdges:14,enableDragPoints:15,enableRotatePoints:1},null,[-1,-1])}}var L0=(t,e)=>{const n=jf(t);return Zr(n,e)},Rp=t=>document.createTextNode(t),Gw=t=>(Ss()&&t.endsWith("<div><br></div>")?t.replace(/<div><br><\/div>$/,"<br><br>"):t).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function ov(t){let e,n;return{c(){e=bt("pre"),w(e,"class","PinturaContentEditable"),w(e,"style",n=t[7]+";position:absolute;z-index:-1;pointer-events:none;")},m(r,i){it(r,e,i),e.innerHTML=t[0]},p(r,i){1&i[0]&&(e.innerHTML=r[0]),128&i[0]&&n!==(n=r[7]+";position:absolute;z-index:-1;pointer-events:none;")&&w(e,"style",n)},d(r){r&&nt(e)}}}function xP(t){let e,n,r,i,o,a,s=t[8]&&ov(t);return{c(){s&&s.c(),e=be(),n=bt("pre"),w(n,"class","PinturaContentEditable"),w(n,"data-wrap-content",r=t[4]||t[5]?"wrap":"nowrap"),w(n,"contenteditable",""),w(n,"spellcheck",t[1]),w(n,"autocorrect",t[2]),w(n,"autocapitalize",t[3]),w(n,"style",i=t[8]?t[15](t[7]):t[7])},m(l,c){s&&s.m(l,c),it(l,e,c),it(l,n,c),t[26](n),o||(a=[kt(n,"input",t[13]),kt(n,"compositionend",t[12]),kt(n,"paste",t[14]),kt(n,"keydown",t[10]),kt(n,"keyup",t[11]),kt(n,"blur",t[9])],o=!0)},p(l,c){l[8]?s?s.p(l,c):(s=ov(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),48&c[0]&&r!==(r=l[4]||l[5]?"wrap":"nowrap")&&w(n,"data-wrap-content",r),2&c[0]&&w(n,"spellcheck",l[1]),4&c[0]&&w(n,"autocorrect",l[2]),8&c[0]&&w(n,"autocapitalize",l[3]),384&c[0]&&i!==(i=l[8]?l[15](l[7]):l[7])&&w(n,"style",i)},i:Je,o:Je,d(l){s&&s.d(l),l&&nt(e),l&&nt(n),t[26](null),o=!1,tr(a)}}}function SP(t,e,n){let r,i,{spellcheck:o="false"}=e,{autocorrect:a="off"}=e,{autocapitalize:s="off"}=e,{wrapLines:l=!0}=e,{allowNewline:c=!0}=e,{textFormat:d="text"}=e,{formatInput:u=ur}=e,{formatPaste:p=ur}=e,{style:h}=e,{innerHTML:f}=e,{oninput:m=ve}=e,{enableTextStyleShortcuts:$=!1}=e;const b=()=>{if(!v)return;const I=document.createRange();I.selectNodeContents(v);const k=P();k.removeAllRanges(),k.addRange(I)},S=ls();let v;document.execCommand("defaultParagraphSeparator",!1,"br");const T=I=>I.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),C=()=>{n(0,f=v.innerHTML);const I=Gw(f);S("input",I),m(I),requestAnimationFrame(()=>v&&v.scrollTo(0,0))},R=()=>{_(v);const I=d==="html"?v.innerHTML:T(v.innerHTML);n(6,v.innerHTML=u(I),v),y(v),C()},A={b:"bold",i:"italic",u:"underline",s:"strikethrough"},E=I=>{const k=br("span");return k.dataset.bookmark=I,k},M=(I,k,G)=>{const X=E(G);if(I.nodeType===Node.TEXT_NODE){const q=I.textContent;if(G==="start"){const D=Rp(q.substr(0,k)),lt=Rp(q.substr(k));I.replaceWith(D,X,lt)}else{const D=Rp(q.substr(0,k)),lt=Rp(q.substr(k));I.replaceWith(D,X,lt)}}else I.nodeType===Node.ELEMENT_NODE&&I.insertBefore(X,I.childNodes[k])},P=()=>{const I=v.getRootNode();return"getSelection"in I?I.getSelection():document.getSelection()},_=I=>{const k=P();if(!k.getRangeAt||!k.rangeCount)return;const G=k.getRangeAt(0),{startOffset:X,endOffset:q,startContainer:D,endContainer:lt}=G;if(I.contains(G.startContainer)&&I.contains(G.endContainer))if(D.nodeType===Node.TEXT_NODE&&D===lt){const pt=D.textContent,Lt=pt.substr(0,X),et=E("start"),Y=q-X>0?pt.substr(X,q):"",j=E("end"),ct=pt.substr(q);D.replaceWith(Lt,et,Y,j,ct)}else M(D,X,"start"),M(lt,q+(D===lt?1:0),"end")},y=I=>{const k=z(I,"start"),G=z(I,"end");if(!k||!G)return;const X=document.createRange();X.setStart(k,0),X.setEnd(G,0);const q=P();q.removeAllRanges(),q.addRange(X),k.remove(),G.remove()},z=(I,k)=>{const G=I.children;for(let X=0;X<G.length;X++){const q=G[X];if(q.dataset.bookmark===k)return q;if(q.children.length){const D=z(q,k);if(D)return D}}};let O;return t.$$set=I=>{"spellcheck"in I&&n(1,o=I.spellcheck),"autocorrect"in I&&n(2,a=I.autocorrect),"autocapitalize"in I&&n(3,s=I.autocapitalize),"wrapLines"in I&&n(4,l=I.wrapLines),"allowNewline"in I&&n(5,c=I.allowNewline),"textFormat"in I&&n(16,d=I.textFormat),"formatInput"in I&&n(17,u=I.formatInput),"formatPaste"in I&&n(18,p=I.formatPaste),"style"in I&&n(19,h=I.style),"innerHTML"in I&&n(0,f=I.innerHTML),"oninput"in I&&n(20,m=I.oninput),"enableTextStyleShortcuts"in I&&n(21,$=I.enableTextStyleShortcuts)},t.$$.update=()=>{var I;if(64&t.$$.dirty[0]&&n(25,r=!!v),33554433&t.$$.dirty[0]&&r&&f&&(I=f)!==v.innerHTML&&(n(6,v.innerHTML=I,v),v===document.activeElement&&b()),524336&t.$$.dirty[0])if(!l&&c){const k=h.includes(":right")?"text-indent:-100px!important":h.includes(":center")?"":"min-width:calc(100% + 100px)!important";n(7,O=h+";overflow:visible;"+k)}else n(7,O=h);524288&t.$$.dirty[0]&&n(8,i=h.includes("text-stroke"))},[f,o,a,s,l,c,v,O,i,()=>{S("blur")},I=>{if(/escape/i.test(I.code))return I.stopPropagation(),void S("cancel");const k=I.ctrlKey||I.metaKey;if(d==="html"&&k&&/b|i|u|s/.test(I.key))return $&&(G=>{const X=A[G];X&&document.execCommand(X)})(I.key),void I.preventDefault();/enter/i.test(I.code)&&(I.stopPropagation(),I.isComposing||(k?S("confirm"):(c||I.preventDefault(),document.execCommand("insertLineBreak"),I.preventDefault())))},()=>{},I=>{I.data!==""&&R()},I=>{const{inputType:k}=I;k!=="insertCompositionText"&&k!=="deleteCompositionText"&&R()},I=>{I.preventDefault();const k=I.clipboardData.getData("text/plain"),G=d==="html"?k:T(k),X=p(G);if(!X.length)return;const q=P().getRangeAt(0);q.deleteContents(),q.insertNode(document.createTextNode(X)),C()},I=>I.replace("-webkit-text-stroke","--text-stroke").replace("text-shadow","--text-shadow"),d,u,p,h,m,$,()=>R(),()=>v&&v.focus(),b,r,function(I){zn[I?"unshift":"push"](()=>{v=I,n(6,v)})}]}class wP extends mn{constructor(e){super(),hn(this,e,SP,xP,rn,{spellcheck:1,autocorrect:2,autocapitalize:3,wrapLines:4,allowNewline:5,textFormat:16,formatInput:17,formatPaste:18,style:19,innerHTML:0,oninput:20,enableTextStyleShortcuts:21,confirm:22,focus:23,select:24},null,[-1,-1])}get spellcheck(){return this.$$.ctx[1]}set spellcheck(e){this.$$set({spellcheck:e}),F()}get autocorrect(){return this.$$.ctx[2]}set autocorrect(e){this.$$set({autocorrect:e}),F()}get autocapitalize(){return this.$$.ctx[3]}set autocapitalize(e){this.$$set({autocapitalize:e}),F()}get wrapLines(){return this.$$.ctx[4]}set wrapLines(e){this.$$set({wrapLines:e}),F()}get allowNewline(){return this.$$.ctx[5]}set allowNewline(e){this.$$set({allowNewline:e}),F()}get textFormat(){return this.$$.ctx[16]}set textFormat(e){this.$$set({textFormat:e}),F()}get formatInput(){return this.$$.ctx[17]}set formatInput(e){this.$$set({formatInput:e}),F()}get formatPaste(){return this.$$.ctx[18]}set formatPaste(e){this.$$set({formatPaste:e}),F()}get style(){return this.$$.ctx[19]}set style(e){this.$$set({style:e}),F()}get innerHTML(){return this.$$.ctx[0]}set innerHTML(e){this.$$set({innerHTML:e}),F()}get oninput(){return this.$$.ctx[20]}set oninput(e){this.$$set({oninput:e}),F()}get enableTextStyleShortcuts(){return this.$$.ctx[21]}set enableTextStyleShortcuts(e){this.$$set({enableTextStyleShortcuts:e}),F()}get confirm(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}get select(){return this.$$.ctx[24]}}const av=["i","b","u","strike"].map(t=>({tag:t,tagOpen:new RegExp(`<${t}>`,"g"),tagClose:new RegExp(`</${t}>`,"g"),placeholderOpen:new RegExp(`___${t}O___`,"g"),placeholderClose:new RegExp(`___${t}C___`,"g")}));var TP=t=>t=((e,n=av)=>(n.forEach(({tag:r,placeholderOpen:i,placeholderClose:o})=>{e=e.replace(i,`<${r}>`).replace(o,`</${r}>`)}),e))(t=(t=((e,n=av)=>(n.forEach(({tag:r,tagOpen:i,tagClose:o})=>{e=e.replace(i,`___${r}O___`).replace(o,`___${r}C___`)}),e))(t)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split(`
`).join("<br>")),Mp=(t,e)=>Ve(t)?parseFloat(t)/100*e:t,Bd=(t,e)=>({x:so(t.x,e.width),y:so(t.y,e.height)});function sv(t,e,n){const r=t.slice();return r[276]=e[n],r[278]=n,r}function lv(t,e){let n,r,i,o,a,s,l,c,d,u,p,h=e[276].name+"";function f(){return e[180](e[278])}return i=new Hf({props:{color:e[276].color}}),{key:t,first:null,c(){n=bt("li"),r=bt("button"),zt(i.$$.fragment),o=be(),a=bt("span"),s=vr(h),c=be(),w(r,"class","PinturaShapeListItem"),w(r,"type","button"),w(r,"aria-label",l="Select shape "+e[276].name),this.first=n},m(m,$){it(m,n,$),Rt(n,r),Ft(i,r,null),Rt(r,o),Rt(r,a),Rt(a,s),Rt(n,c),d=!0,u||(p=kt(r,"click",f),u=!0)},p(m,$){e=m;const b={};1048576&$[0]&&(b.color=e[276].color),i.$set(b),(!d||1048576&$[0])&&h!==(h=e[276].name+"")&&Vr(s,h),(!d||1048576&$[0]&&l!==(l="Select shape "+e[276].name))&&w(r,"aria-label",l)},i(m){d||(L(i.$$.fragment,m),d=!0)},o(m){W(i.$$.fragment,m),d=!1},d(m){m&&nt(n),Bt(i),u=!1,p()}}}function cv(t){let e,n;return e=new vP({props:{visible:!0,points:t[12],rotatorPoint:t[26],enableDragEdges:t[16],enableDragPoints:t[28],enableRotatePoints:t[14]}}),e.$on("resizestart",t[37]),e.$on("resizemove",t[38]),e.$on("resizeend",t[39]),e.$on("rotatestart",t[40]),e.$on("rotatemove",t[41]),e.$on("rotateend",t[42]),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};4096&i[0]&&(o.points=r[12]),67108864&i[0]&&(o.rotatorPoint=r[26]),65536&i[0]&&(o.enableDragEdges=r[16]),268435456&i[0]&&(o.enableDragPoints=r[28]),16384&i[0]&&(o.enableRotatePoints=r[14]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function dv(t){let e,n,r,i;const o=[IP,EP],a=[];function s(l,c){return l[4]==="modal"?0:l[4]==="inline"?1:-1}return~(e=s(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),r=Nr()},m(l,c){~e&&a[e].m(l,c),it(l,r,c),i=!0},p(l,c){let d=e;e=s(l),e===d?~e&&a[e].p(l,c):(n&&(Be(),W(a[d],1,1,()=>{a[d]=null}),ze()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),L(n,1),n.m(r.parentNode,r)):n=null)},i(l){i||(L(n),i=!0)},o(l){W(n),i=!1},d(l){~e&&a[e].d(l),l&&nt(r)}}}function EP(t){let e,n,r,i,o,a={formatInput:t[44],wrapLines:!!t[13].width,textFormat:t[13].format,enableTextStyleShortcuts:t[5],allowNewline:t[27],style:t[25]};return n=new wP({props:a}),t[183](n),n.$on("input",t[45]),n.$on("keyup",t[48]),n.$on("cancel",t[50]),n.$on("confirm",t[49]),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"class","PinturaInlineInput"),w(e,"style",t[24])},m(s,l){it(s,e,l),Ft(n,e,null),r=!0,i||(o=kt(e,"focusout",t[184]),i=!0)},p(s,l){const c={};8192&l[0]&&(c.wrapLines=!!s[13].width),8192&l[0]&&(c.textFormat=s[13].format),32&l[0]&&(c.enableTextStyleShortcuts=s[5]),134217728&l[0]&&(c.allowNewline=s[27]),33554432&l[0]&&(c.style=s[25]),n.$set(c),(!r||16777216&l[0])&&w(e,"style",s[24])},i(s){r||(L(n.$$.fragment,s),r=!0)},o(s){W(n.$$.fragment,s),r=!1},d(s){s&&nt(e),t[183](null),Bt(n),i=!1,o()}}}function IP(t){let e,n;return e=new Iw({props:{panelOffset:t[2],onconfirm:t[49],oncancel:t[50],buttonCancel:{icon:t[6].shapeIconInputCancel,label:t[6].shapeLabelInputCancel},buttonConfirm:{icon:t[6].shapeLabelInputConfirm,label:t[6].shapeIconInputConfirm,hideLabel:!0},$$slots:{default:[_P]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};4&i[0]&&(o.panelOffset=r[2]),64&i[0]&&(o.buttonCancel={icon:r[6].shapeIconInputCancel,label:r[6].shapeLabelInputCancel}),64&i[0]&&(o.buttonConfirm={icon:r[6].shapeLabelInputConfirm,label:r[6].shapeIconInputConfirm,hideLabel:!0}),41943296&i[0]|1&i[9]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function _P(t){let e,n,r;return{c(){e=bt("textarea"),w(e,"spellcheck","false"),w(e,"autocorrect","off"),w(e,"autocapitalize","off"),w(e,"style",t[25])},m(i,o){it(i,e,o),t[181](e),Ny(e,t[23]),n||(r=[kt(e,"keydown",t[47]),kt(e,"keypress",t[46]),kt(e,"keyup",t[48]),kt(e,"input",t[45]),kt(e,"input",t[182])],n=!0)},p(i,o){33554432&o[0]&&w(e,"style",i[25]),8388608&o[0]&&Ny(e,i[23])},d(i){i&&nt(e),t[181](null),n=!1,tr(r)}}}function uv(t){let e,n,r,i,o;return n=new na({props:{items:t[21],key:t[10]}}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"class","PinturaShapeControls"),w(e,"style",t[22])},m(a,s){it(a,e,s),Ft(n,e,null),r=!0,i||(o=[kt(e,"measure",t[185]),Jn(Ui.call(null,e))],i=!0)},p(a,s){const l={};2097152&s[0]&&(l.items=a[21]),1024&s[0]&&(l.key=a[10]),n.$set(l),(!r||4194304&s[0])&&w(e,"style",a[22])},i(a){r||(L(n.$$.fragment,a),r=!0)},o(a){W(n.$$.fragment,a),r=!1},d(a){a&&nt(e),Bt(n),i=!1,tr(o)}}}function CP(t){let e,n,r,i,o,a,s,l,c,d,u=[],p=new Map,h=t[20];const f=S=>S[276].id;for(let S=0;S<h.length;S+=1){let v=sv(t,h,S),T=f(v);p.set(T,u[S]=lv(T,v))}let m=t[15]&&cv(t),$=t[11]&&dv(t),b=t[17]>0&&uv(t);return{c(){e=bt("div"),n=bt("nav"),r=bt("ul");for(let S=0;S<u.length;S+=1)u[S].c();i=be(),m&&m.c(),o=be(),$&&$.c(),a=be(),b&&b.c(),w(n,"class","PinturaShapeList"),w(n,"data-visible",t[18]),w(e,"class","PinturaShapeEditor"),w(e,"tabindex","0")},m(S,v){it(S,e,v),Rt(e,n),Rt(n,r);for(let T=0;T<u.length;T+=1)u[T].m(r,null);Rt(e,i),m&&m.m(e,null),Rt(e,o),$&&$.m(e,null),Rt(e,a),b&&b.m(e,null),t[186](e),l=!0,c||(d=[kt(n,"focusin",t[53]),kt(n,"focusout",t[54]),kt(e,"keydown",function(){Qn(t[0]?ve:t[43])&&(t[0]?ve:t[43]).apply(this,arguments)}),kt(e,"nudge",function(){Qn(t[0]?ve:t[52])&&(t[0]?ve:t[52]).apply(this,arguments)}),kt(e,"measure",t[179]),kt(e,"pointermove",function(){Qn(t[0]?ve:t[55])&&(t[0]?ve:t[55]).apply(this,arguments)}),kt(e,"pointerleave",function(){Qn(t[0]?ve:t[56])&&(t[0]?ve:t[56]).apply(this,arguments)}),kt(e,"interactionstart",function(){Qn(t[0]?ve:t[31])&&(t[0]?ve:t[31]).apply(this,arguments)}),kt(e,"interactionupdate",function(){Qn(t[0]?ve:t[33])&&(t[0]?ve:t[33]).apply(this,arguments)}),kt(e,"interactioncancel",function(){Qn(t[0]?ve:t[32])&&(t[0]?ve:t[32]).apply(this,arguments)}),kt(e,"interactionrelease",function(){Qn(t[0]?ve:t[34])&&(t[0]?ve:t[34]).apply(this,arguments)}),kt(e,"interactionend",function(){Qn(t[0]?ve:t[35])&&(t[0]?ve:t[35]).apply(this,arguments)}),Jn(Ui.call(null,e)),Jn(kl.call(null,e)),Jn(s=Ml.call(null,e,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:pv,getEventPosition:t[187]}))],c=!0)},p(S,v){t=S,1048706&v[0]&&(h=t[20],Be(),u=_s(u,v,f,1,t,h,p,r,Cl,lv,null,sv),ze()),(!l||262144&v[0])&&w(n,"data-visible",t[18]),t[15]?m?(m.p(t,v),32768&v[0]&&L(m,1)):(m=cv(t),m.c(),L(m,1),m.m(e,o)):m&&(Be(),W(m,1,1,()=>{m=null}),ze()),t[11]?$?($.p(t,v),2048&v[0]&&L($,1)):($=dv(t),$.c(),L($,1),$.m(e,a)):$&&(Be(),W($,1,1,()=>{$=null}),ze()),t[17]>0?b?(b.p(t,v),131072&v[0]&&L(b,1)):(b=uv(t),b.c(),L(b,1),b.m(e,null)):b&&(Be(),W(b,1,1,()=>{b=null}),ze()),s&&Qn(s.update)&&8&v[0]&&s.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:pv,getEventPosition:t[187]})},i(S){if(!l){for(let v=0;v<h.length;v+=1)L(u[v]);L(m),L($),L(b),l=!0}},o(S){for(let v=0;v<u.length;v+=1)W(u[v]);W(m),W($),W(b),l=!1},d(S){S&&nt(e);for(let v=0;v<u.length;v+=1)u[v].d();m&&m.d(),$&&$.d(),b&&b.d(),t[186](null),c=!1,tr(d)}}}const pv=(t,e)=>t.target===e;function RP(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,b,S,v,T,C,R,A,E,M,P,_,y,z,O,I,k,G,X,q,D,lt,pt,Lt,et,Y,j,ct,U,ft,yt,It,Jt,pe,mt,ot,Q,Se,Mt,xt,Wt,Ht=Je,Ae=()=>(Ht(),Ht=ho(Ce,x=>n(175,Q=x)),Ce);t.$$.on_destroy.push(()=>Ht());let{uid:ke=Oa()}=e,{ui:st}=e,{disabled:St=!1}=e,{shapes:Ce}=e;Ae();let{selection:dn}=e,{offset:Te}=e,{contextRotation:Ut=0}=e,{contextFlipX:Ee=!1}=e,{contextFlipY:Ne=!1}=e,{contextZoom:qe=1}=e,{active:En=!1}=e,{opacity:Et=1}=e,{parentRect:Tt}=e,{rootRect:je}=e,{utilRect:Le}=e,{hoverColor:yn}=e,{caretColor:en}=e,{gridColor:Ke}=e,{snapColor:Cn}=e,{textInputMode:J="inline"}=e,{oninteractionstart:he=ve}=e,{oninteractionupdate:K=ve}=e,{oninteractionrelease:Gt=ve}=e,{oninteractionend:ce=ve}=e,{oninteractioncancel:we=ve}=e,{onaddshape:ge=ve}=e,{onupdateshape:Nt=ve}=e,{onselectshape:Pe=ve}=e,{onblurshape:Qt=ve}=e,{onremoveshape:Ge=ve}=e,{ontapshape:Ye=ve}=e,{onhovershape:Qe=ve}=e,{onhovercanvas:fn=ve}=e,{ontapcanvas:at=ve}=e,{onleavecanvas:At=ve}=e,{beforeSelectShape:jt=()=>!0}=e,{beforeDeselectShape:rt=()=>!0}=e,{beforeRemoveShape:Dt=()=>!0}=e,{beforeUpdateShape:ee=(x,Z)=>Z}=e,{willRenderShapeControls:de=ur}=e,{willRenderShapeTextControls:te=ur}=e,{willStartInteraction:on=(x,Z)=>!0}=e,{mapEditorPointToImagePoint:Xt}=e,{mapImagePointToEditorPoint:ue}=e,{eraseRadius:wn}=e,{selectRadius:Zn}=e,{enableButtonFlipVertical:_r=!1}=e,{enableTapToAddText:Nn=!0}=e,{enableTextStyleControls:ne=!0}=e,{locale:Ie}=e,{snapThreshold:mr=0}=e,{snapPointer:fr=!0}=e,{enableSnapToContext:Ur=!0}=e,{gridSize:$r=0}=e;const Er=x=>{if(mr===0)return[];let Z;return Ur&&(Z={...Tt,x:0,y:0}),[...Q.filter(V=>V!==x).filter(V=>!Zo(V)).map(V=>si({...V},Tt)),Z].filter(Boolean)},ir=(x,Z,V,ht)=>x===0?{snapTargets:[]}:{snapThreshold:x,gridSize:Z,gridRect:V,snapTargets:Er(ht)},Jr=kr("isAnimated");N(t,Jr,x=>n(176,Mt=x));const hi=x=>x.set(rs(x)),Cr=x=>rs(x).find(Zo),Gr=(x,Z)=>{if(!Cr(Z))return m0(x),ti(x,Z)},mi=x=>{Cr(x)&&x.update(Z=>Z.filter(V=>!Zo(V)))},Wr=x=>{const Z=Cr(x);if(Z)return _y(Z),hi(x),Z},Mi=(x,Z,V=(ht,$t)=>({...ht,...$t}))=>{Cr(Z)&&Z.update(ht=>ht.map($t=>Zo($t)?V($t,x):$t))},ti=(x,Z=Ce)=>(Z.update(V=>[...V,x]),x),or=(x,Z,V)=>{const ht=ee({...x},Z,{...V});return ts(x,ht,V),x},On=(x,Z)=>{const V=Vo(x,Z),ht=mp(x,Z),$t=Math.PI/8,Yt=$t*Math.round(ht/$t)-Ut%$t;Z.x=x.x+V*Math.cos(Yt),Z.y=x.y+V*Math.sin(Yt)},ya=kr("keysPressed");N(t,ya,x=>n(177,xt=x));const Hr=(x,Z,V)=>x===0||Z&&V?x:Z||V?-x:x,xo=x=>{if(x.x===null&&x.y===null)return Ao();x.x&&n(138,ba=Xt({x:x.x,y:0}).x),x.y&&n(139,Wi=Xt({x:0,y:x.y}).y)},Ao=()=>{n(138,ba=null),n(139,Wi=null)};let ba=null,Wi=null;const xr=(x,Z)=>{const V=ue(x);return Xt(Xr(V,Z))},ar=(x,Z,V)=>{const ht=(V-Z)/x+1;return Array.from({length:ht},($t,Yt)=>Z+Yt*x)},So=x=>{let Z=[],V=[],ht=x.points;if(x.x1!==void 0&&(ht=[{x:x.x1,y:x.y1},{x:x.x2,y:x.y2}]),ht){const $t=ht.map(ue),Yt=yi($t),Ot=$t[0],ie=$t[$t.length-1];Z=[Yt.x,Yt.x+.5*Yt.width,Yt.x+Yt.width,Ot.x,ie.x],V=[Yt.y,Yt.y+.5*Yt.height,Yt.y+Yt.height,Ot.y,ie.y]}else if(x.text||x.width!==void 0||x.rx!==void 0){let $t;if(x.text&&x.height===void 0){const oe=Ca(x.text,x);$t=Br(x.x,x.y,oe.width,oe.height)}else $t=x.width!==void 0?cl(x):cl({x:x.x-x.rx,y:x.y-x.ry,width:2*x.rx,height:2*x.ry});const Yt=fa($t).map(ue),Ot=Math.abs(x.rotation)>0?Fi($t,x.rotation).map(ue):Yt,ie=yi(Ot),qt=An(ie),Zt=.5*ie.width,le=.5*ie.height;Z=[qt.x-Zt,qt.x,qt.x+Zt],V=[qt.y-le,qt.y,qt.y+le]}else if(x.x!==void 0){const $t=ue(x);Z=[$t.x],V=[$t.y]}return{x:Z,y:V}},ra=(x,Z,V)=>{let ht,$t,Yt,Ot=Number.Infinity,ie=null,qt=null;for(let Zt=0;Zt<x.length;Zt++){$t=x[Zt];for(let le=0;le<Z.length;le++)Yt=Z[le],ht=Math.abs($t-Yt),ht<V&&(qt===null||ht<Ot)&&(Ot=ht,ie=$t,qt=Yt)}return{origin:ie,target:qt}},Hi=(x,Z,V,ht,$t)=>{const Yt={x:null,y:null},Ot={x:null,y:null},ie=Z.map(So);if(ht>0){const qt=ue({x:0,y:0}),Zt=ue({x:ht,y:ht}),le=ue({x:$t.width,y:$t.height}),oe=Zt.x-qt.x,We=ar(oe,qt.x,le.x),fe=ar(oe,qt.y,le.y);ie.push({x:We,y:fe})}return ie.forEach(qt=>{const{snapTranslation:Zt,snapLine:le}=((oe,We,fe)=>{const Me={x:null,y:null},Re={x:null,y:null},re=ra(oe.x,We.x,fe);re.target!==null&&(Me.x=re.target,Re.x=re.target-re.origin);const De=ra(oe.y,We.y,fe);return De.target!==null&&(Me.y=De.target,Re.y=De.target-De.origin),{snapTranslation:Re,snapLine:Me}})(x,qt,V);Zt.x!==null&&(Ot.x===null||Math.abs(Zt.x)<Math.abs(Ot.x))&&(Ot.x=Zt.x||0,Yt.x=le.x),Zt.y!==null&&(Ot.y===null||Math.abs(Zt.y)<Math.abs(Ot.y))&&(Ot.y=Zt.y||0,Yt.y=le.y)}),{snapTranslation:Ot,snapLines:Yt}},eo=(x,Z)=>(Z.x!==null&&(x.x+=Z.x),Z.y!==null&&(x.y+=Z.y),x),ia=(x,Z,V,ht)=>{const{snapThreshold:$t=0,gridSize:Yt=0,gridRect:Ot,snapTargets:ie=[]}=ht||{};let qt=null;if($i(x)){if($t){const oe=si({...x},Tt),We=xr(Fs(Z),V),fe=xr(Bs(Z),V),Me=So({...oe,x1:We.x,y1:We.y,x2:fe.x,y2:fe.y}),{snapTranslation:Re,snapLines:re}=Hi(Me,ie,$t,Yt,Ot);eo(V,Re),xo(re)}const Zt=xr(Fs(Z),V),le=xr(Bs(Z),V);qt={x1:Zt.x,y1:Zt.y,x2:le.x,y2:le.y}}else if(x.points){if($t){const Zt=si({...x},Tt),le=So({...Zt,points:Z.points.map(fe=>xr(fe,V))}),{snapTranslation:oe,snapLines:We}=Hi(le,ie,$t,Yt,Ot);eo(V,oe),xo(We)}qt={points:Z.points.map(Zt=>xr(Zt,V))}}else if(Qo(x)||di(x)||ui(x)){if($t){const Zt=si({...x},Tt),le=xr(Z,V),oe=So({...Zt,...le}),{snapTranslation:We,snapLines:fe}=Hi(oe,ie,$t,Yt,Ot);eo(V,We),xo(fe)}qt=xr(Z,V)}qt&&(or(x,qt,Tt),Dr())},Lo={0:1,1:0,2:3,3:2},Ua={0:3,1:2,2:1,3:0};let jo;const no=()=>{if(Q.length)return Q.find(Zo)},ji=()=>{if(Q.length)return Q.findIndex(Zo)},va=()=>{const x=no();if(x)return _y(x),Dr(),x},Oo=()=>{if(!no())return;const x=[...Q];x.splice(ji(),1),Ce.set(x)},Dr=()=>{Ce.set(Q)},wo=(x,Z=[],V=!0)=>{Z.filter(Boolean).forEach(ht=>delete x[ht]),V&&Dr()},jr=(x,Z,V=!0)=>{x=Object.assign(x,Z),V&&Dr()},ki=(x,Z,V,ht=!0)=>{x[Z]=V,ht&&Dr()},qi=(x,Z=!0)=>{Q.forEach(V=>jr(V,x,!1)),Z&&Dr()},Ii=()=>[...Q].reverse().find(dl),In=()=>!!Ii(),Do=x=>{if(!Dt(x))return!1;Ce.set(Q.filter(Z=>Z!==x)),Ge(x)},ei=()=>{const x=Ii();if(!x)return;const Z=Q.filter($t=>Cy($t)&&Za($t)),V=Z.findIndex($t=>$t===x);if(Do(x)===!1)return;if(Ir=x,Z.length-1<=0)return ni();const ht=V-1<0?Z.length-1:V-1;oi(Z[ht])};let Ir;const ni=(x={})=>{const{storePrevious:Z=!0}=x;Object.keys(Ga).forEach(ht=>Ga[ht]={});const V=To();Z&&(Ir=V),qi({isSelected:!1,isEditing:!1,_prerender:!1}),V&&Qt(V)},To=()=>Q.find(dl),oi=(x,Z=!0)=>{if(Zo(x))return;const V=To()||Ir,ht=dl(x);Ir=void 0,jt(V,x)&&(ni(),($t=>{$t.isSelected=!0})(x),!ht&&Pe(x),Z&&Dr())},qo=x=>{Ln&&Ln.confirm&&x.isEditing&&Ln.confirm(),jr(x,{isSelected:!1,isEditing:!1,_prerender:!1}),Qt(x)},qr=x=>{jr(x,{isSelected:!0,isEditing:!0,_prerender:J==="inline"})},Kr=x=>{jr(x,{isSelected:!0,isEditing:!1,_prerender:!1})},Yo=x=>{if(!x.length)return[];const Z=x.filter(Dt);return Ce.set(Q.filter(V=>!Z.includes(V))),Z},Eo=x=>{const Z=Ca(x.text,x);return Br(x.x,x.y,x.width?Math.min(x.width,Z.width):Z.width,x.height?Math.min(x.height,Z.height):Z.height)},Io=x=>{if(tc(x))return cl(x);if(ui(x))return xm(x);const Z=Eo(x);return Z.width=Math.max(10,x.width||Z.width),Z},ro=(x,Z,V=0,ht=()=>!0)=>[...x].reverse().filter(ht).map($t=>({shape:$t,priority:1})).filter($t=>{const{shape:Yt}=$t,Ot=si(ri(Yt),Tt),ie=V+.5*(Ot.strokeWidth||0);if(Qo(Ot))return Sm(Z,ie,Ot,Yt.rotation);if(di(Ot)){const qt=Io(Ot),Zt=Sm(Z,ie,qt,Yt.rotation);let le=!1;if(Zt&&!dl(Yt)){const oe=Eo(Ot);Yt.textAlign!=="right"||Yt.flipX||(oe.x=qt.x+qt.width-oe.width),Yt.textAlign==="center"&&(oe.x=qt.x+.5*qt.width-.5*oe.width),le=Sm(Z,ie,oe,Yt.rotation,An(qt)),le||($t.priority=-1)}return Zt}return ui(Ot)?((qt,Zt,le,oe,We,fe)=>{const Me=Qp(dt(le.x,le.y),le.rx,le.ry,oe,We,fe,12);return h0(qt,Zt,Me)})(Z,ie,Ot,Yt.rotation,Yt.flipX,Yt.flipY):$i(Ot)?mf(Z,Math.max(16,ie),Fs(Ot),Bs(Ot)):ci(Ot)&&Ot.pathClose?h0(Z,ie,Ot.points):!!ci(Ot)&&(Ot.points.length===1?pa(Z,Ot.points[0])<ie*ie:aS(Z,Math.max(16,ie),Ot.points))}).sort(($t,Yt)=>$t.priority<Yt.priority?1:$t.priority>Yt.priority?-1:0).map($t=>$t.shape),Qr=(x,Z,V,ht=0)=>{const $t=Math.abs(ht),Yt=Tl(Z,V),Ot=pf(Yt,$t),ie=(({start:qt,end:Zt},le)=>{if(le===0)return[dt(qt.x,qt.y),dt(qt.x,qt.y),dt(Zt.x,Zt.y),dt(Zt.x,Zt.y)];const oe=Math.atan2(Zt.y-qt.y,Zt.x-qt.x),We=Math.sin(oe)*le,fe=Math.cos(oe)*le;return[dt(We+qt.x,-fe+qt.y),dt(-We+qt.x,fe+qt.y),dt(-We+Zt.x,fe+Zt.y),dt(We+Zt.x,-fe+Zt.y)]})(Ot,$t);return x.filter(qt=>{const Zt=si(ri(qt),Tt);if($i(Zt)||ci(Zt)){const le=Zt.points?[...Zt.points]:[Fs(Zt),Bs(Zt)];return!!rS(Ot,le)}return((le,oe)=>!!le.find(We=>p0(We,oe))||!!oe.find(We=>p0(We,le)))(ie,((le,oe=12)=>{if(Qo(le))return Fi(le,le.rotation,An(le));if(di(le)){const We=Io(le);return Fi(We,le.rotation,An(We))}return ui(le)?Qp(dt(le.x,le.y),le.rx,le.ry,le.rotation,le.flipX,le.flipY,oe):[]})(Zt))})};let io,ai,Pi,an,H,me,Tn=!1,sn=!1,se=!1;const _e=()=>{clearTimeout(ai),ai=void 0,n(141,se=!1),Ao()};let Bn=null;const Yn=x=>{const Z=Sn(x.rotation)&&x.rotation!==0;if(Qo(x)){if(x.width<1&&x.height<1)return;const V=An(x),ht=fa(x);return(x.flipX||x.flipY)&&Hc(ht,x.flipX,x.flipY,V.x,V.y),Z?cc(ht,x.rotation,V.x,V.y):ht}if(ui(x)){if(x.rx<1&&x.ry<1)return;const V=x,ht=fa(xm(x));return(x.flipX||x.flipY)&&Hc(ht,x.flipX,x.flipY,V.x,V.y),Z?cc(ht,x.rotation,V.x,V.y):ht}if($i(x))return[Fs(x),Bs(x)];if(ci(x)){if(x.bitmap&&!x.pathClose){const V=yi(x.points);return V.x-=.5*x.strokeWidth,V.y-=.5*x.strokeWidth,V.width+=x.strokeWidth,V.height+=x.strokeWidth,Yn({...x,...V})}return[...x.points]}if(di(x)){if(x.width<5&&x.height<5)return;const V=Io(x);V.width=Math.max(10,V.width);const ht=An(V),$t=fa(V);return(x.flipX||x.flipY)&&Hc($t,x.flipX,x.flipY,ht.x,ht.y),Z?cc($t,x.rotation,ht.x,ht.y):$t}return[]},Sr=x=>{const Z=Yn(x);let V,ht;return x.flipY?(V=ha([Z[0],Z[1]]),ht=Po(dt(Z[1].x-Z[2].x,Z[1].y-Z[2].y))):(V=ha([Z[2],Z[3]]),ht=Po(dt(Z[2].x-Z[1].x,Z[2].y-Z[1].y))),Qi(ht,20/qe),{origin:V,dir:ht}},lr=x=>Z=>Z.id===x,Wn=x=>{const Z=lr(x);return V=>V.filter((ht=>$t=>!ht($t))(Z))},_o=x=>{const Z=lr(x),V=Wn(x);return()=>st.update(ht=>ht.some(Z)?V(ht):ht)},Fo=x=>{const Z=Wn(x);return(...V)=>{st.update(ht=>[...Z(ht),...V.filter(Boolean)])}},Bo=_o("markup-hover"),Zs=Fo("markup-hover");let Co;const li="markup-manipulator-segment-"+ke,Ro=(x,Z)=>{const V=x[Z],ht=Z-1<0?x[x.length-1]:x[Z-1],$t=Z+1<x.length?x[Z+1]:x[0],Yt=Zr(Ue(ht),V);Po(Yt);const Ot=Xr(Qi(Yt,10),V),ie=Zr(Ue($t),V);return Po(ie),[Ot,V,Xr(Qi(ie,10),V)]},B=_o(li),Oe=Fo(li),He=(x,Z)=>{if(mr<=0)return x;if(Z)return Ao(),x;const V=Xt(x),ht=Er(),{snapTranslation:$t,snapLines:Yt}=Hi(So(V),ht,mr,$r,r);return xo(Yt),eo(x,$t),x},kn=un(0);N(t,kn,x=>n(178,Wt=x));const Vn="markup-grid-line-"+ke,Un=_o(Vn),nn=Fo(Vn),gn="markup-snap-line",Dn=_o(gn),Gn=Fo(gn);let Ln;const Yr=x=>{n(8,Ln.innerHTML=TP(x),Ln)},wr=x=>{const Z=x.value===void 0?x.innerHTML:x.value,V=i.format==="text"?Gw(Z).split(/<br>|<br\/>/g).join(`
`).replace(/&nbsp;/g," ").replace(/&amp;/g,"&"):Z;return eh(i)&&i.disableNewline!==!1?(ht=>{const $t=ht.split(/[\n\r]/g);return $t.length>1?$t.map(Yt=>Yt.trim()).filter(Yt=>Yt.length).join(" "):$t[0]})(V):V},Ar=()=>{const x=wr(Ln),Z=Lc(i,x),V=Z===!0?x:Z;let ht=y.x,$t=y.y;if(!i.height){const Yt=Fi({...O},i.rotation),Ot=Ca(V,l),ie=Fi({x:ht,y:$t,...Ot},i.rotation),[qt,,Zt]=Yt,[le,,oe]=ie;let We=qt,fe=le;i.flipX&&(We=Zt,fe=oe);const Me=Zr(Ue(We),fe);ht+=Me.x,$t+=Me.y}jr(i,{x:Ve(_.x)?so(ht,Tt.width):ht,y:Ve(_.y)?so($t,Tt.height):$t,text:V})},Rn=()=>{let x=a;a&&va(),Ln&&Ln.confirm&&Ln.confirm(),Ar(),Kr(i),x?ge(i):Nt(i)},Ai=()=>{a?Oo():(jr(i,{text:_.text,x:_.x,y:_.y}),Kr(i))},oa=(x,Z,{flipX:V,flipY:ht,rotation:$t},Yt="top left")=>{let Ot,ie;const[qt,Zt,le,oe]=Fi(x,$t),[We,fe,Me,Re]=Fi(Z,$t);return Yt==="top center"?(Ot=ha(ht?[oe,le]:[qt,Zt]),ie=ha(ht?[Re,Me]:[We,fe])):Yt==="top right"&&!V||Yt==="top left"&&V?(Ot=ht?le:Zt,ie=ht?Me:fe):(Ot=ht?oe:qt,ie=ht?Re:We),Zr(Ue(Ot),ie)},Cs=(x,Z,V)=>dt(Ve(x.x)?so(Z.x+V.x,Tt.width):Z.x+V.x,Ve(x.y)?so(Z.y+V.y,Tt.height):Z.y+V.y),Ga={},Pl=()=>qr(i),Al=()=>{const x=Us(Ca(i.text,l),qt=>Math.ceil(qt)),Z=Fe(i,"height"),V=!Z&&Fe(i,"width"),ht=i.id;let $t=Ga[ht];$t||(Ga[ht]={},$t=Ga[ht]);const Yt=qt=>{const{width:Zt,...le}=l,oe=Ca(i.text,le),We=oa(Br(l.x,l.y,qt.width,qt.height),Br(l.x,l.y,oe.width,oe.height),l,"top "+i.textAlign),fe=l.disableNewline!==!1;wo(i,["width","height",fe&&"textAlign"]),jr(i,{...Cs(i,l,We)})},Ot=qt=>{const Zt=ii($t.width||l.width||x.width,x.height),le=$t.textAlign||"left",oe=oa(Br(l.x,l.y,qt.width,qt.height),Br(l.x,l.y,Zt.width,Zt.height),l,"top "+le);wo(i,["height"]),jr(i,{...Cs(i,l,oe),width:Ve(i.width)?so(Zt.width,Tt.width):Zt.width,textAlign:le})},ie=qt=>{const Zt=ii($t.width||x.width,$t.height||x.height),le=$t.textAlign||"left",oe=oa(Br(l.x,l.y,qt.width,qt.height),Br(l.x,l.y,Zt.width,Zt.height),l,"top "+le);jr(i,{...Cs(i,l,oe),width:Ve(i.width)?so(Zt.width,Tt.width):Zt.width,height:Ve(i.width)?so(Zt.height,Tt.height):Zt.height,textAlign:le})};if(Z){$t.textAlign=i.textAlign,$t.width=l.width,$t.height=l.height;const qt=ii(l.width,l.height);Xl(i,"auto-height")?Ot(qt):Xl(i,"auto-width")&&Yt(qt)}else if(V){$t.textAlign=i.textAlign,$t.width=l.width;const qt=ii(l.width,x.height);Xl(i,"auto-width")?Yt(qt):Xl(i,"fixed-size")&&ie(qt)}else{$t.textAlign=i.textAlign;const qt=ii(Math.ceil(x.width),Math.ceil(x.height));Xl(i,"fixed-size")?ie(qt):Xl(i,"auto-height")&&Ot(qt)}},Ks=x=>{x.stopPropagation();const Z=i.flipX||!1;ki(i,"flipX",!Z),Nt(i)},Qs=x=>{x.stopPropagation();const Z=i.flipY||!1;ki(i,"flipY",!Z),Nt(i)},Js=x=>{ki(i,"opacity",x)},ds=x=>{Js(x),Nt(i)},Wa=x=>{x.stopPropagation(),x.target.blur(),ei()},Li=x=>{x.stopPropagation(),Q.findIndex(Z=>Z===i)!==Q.length-1&&(Ce.set(Q.filter(Z=>Z!==i).concat([i])),Nt(i))},oo=x=>{x.stopPropagation(),ao()},ao=()=>{const x=ri(i);x.id=Oa();const Z=dt(50,-50);if(Fe(x,"points")){const V=jc(x,["points"],Tt);V.points.forEach(ht=>{ht.x+=Z.x,ht.y+=Z.y}),ts(x,V,Tt)}else if($i(x)){const V=jc(x,["x1","y1","x2","y2"],Tt);V.x1+=Z.x,V.y1+=Z.y,V.x2+=Z.x,V.y2+=Z.y,ts(x,V,Tt)}else{const V=jc(x,["x","y"],Tt);V.x+=50,V.y-=50,ts(x,V,Tt)}Ce.set([...Q,x]),ge(x),oi(x)},Yi=un(0,{stiffness:.2,damping:.7});let Kn;N(t,Yi,x=>n(17,Se=x));const aa=(x,Z)=>{const{disableTextLayout:V=[]}=Z;return"height"in Z?V.includes("auto-height")?x.shapeIconButtonTextLayoutAutoWidth:x.shapeIconButtonTextLayoutAutoHeight:"width"in Z?V.includes("auto-width")?x.shapeIconButtonTextLayoutFixedSize:x.shapeIconButtonTextLayoutAutoWidth:V.includes("fixed-size")?x.shapeIconButtonTextLayoutAutoHeight:x.shapeIconButtonTextLayoutFixedSize},cr=(x,Z)=>{const{disableTextLayout:V=[]}=Z;return"height"in Z?V.includes("auto-height")?x.shapeTitleButtonTextLayoutAutoWidth:x.shapeTitleButtonTextLayoutAutoHeight:"width"in Z?V.includes("auto-width")?x.shapeTitleButtonTextLayoutFixedSize:x.shapeTitleButtonTextLayoutAutoWidth:V.includes("fixed-size")?x.shapeTitleButtonTextLayoutAutoHeight:x.shapeTitleButtonTextLayoutFixedSize};let zo=!1,Rs=pr(),Ms;const ks=x=>{Qe(x),n(142,Co=x)};let Ha;return $a(()=>{Dn(),Un(),B(),Bo()}),t.$$set=x=>{"uid"in x&&n(57,ke=x.uid),"ui"in x&&n(58,st=x.ui),"disabled"in x&&n(0,St=x.disabled),"shapes"in x&&Ae(n(1,Ce=x.shapes)),"selection"in x&&n(59,dn=x.selection),"offset"in x&&n(2,Te=x.offset),"contextRotation"in x&&n(60,Ut=x.contextRotation),"contextFlipX"in x&&n(61,Ee=x.contextFlipX),"contextFlipY"in x&&n(62,Ne=x.contextFlipY),"contextZoom"in x&&n(63,qe=x.contextZoom),"active"in x&&n(64,En=x.active),"opacity"in x&&n(65,Et=x.opacity),"parentRect"in x&&n(66,Tt=x.parentRect),"rootRect"in x&&n(3,je=x.rootRect),"utilRect"in x&&n(67,Le=x.utilRect),"hoverColor"in x&&n(68,yn=x.hoverColor),"caretColor"in x&&n(69,en=x.caretColor),"gridColor"in x&&n(70,Ke=x.gridColor),"snapColor"in x&&n(71,Cn=x.snapColor),"textInputMode"in x&&n(4,J=x.textInputMode),"oninteractionstart"in x&&n(72,he=x.oninteractionstart),"oninteractionupdate"in x&&n(73,K=x.oninteractionupdate),"oninteractionrelease"in x&&n(74,Gt=x.oninteractionrelease),"oninteractionend"in x&&n(75,ce=x.oninteractionend),"oninteractioncancel"in x&&n(76,we=x.oninteractioncancel),"onaddshape"in x&&n(77,ge=x.onaddshape),"onupdateshape"in x&&n(78,Nt=x.onupdateshape),"onselectshape"in x&&n(79,Pe=x.onselectshape),"onblurshape"in x&&n(80,Qt=x.onblurshape),"onremoveshape"in x&&n(81,Ge=x.onremoveshape),"ontapshape"in x&&n(82,Ye=x.ontapshape),"onhovershape"in x&&n(83,Qe=x.onhovershape),"onhovercanvas"in x&&n(84,fn=x.onhovercanvas),"ontapcanvas"in x&&n(85,at=x.ontapcanvas),"onleavecanvas"in x&&n(86,At=x.onleavecanvas),"beforeSelectShape"in x&&n(87,jt=x.beforeSelectShape),"beforeDeselectShape"in x&&n(88,rt=x.beforeDeselectShape),"beforeRemoveShape"in x&&n(89,Dt=x.beforeRemoveShape),"beforeUpdateShape"in x&&n(90,ee=x.beforeUpdateShape),"willRenderShapeControls"in x&&n(91,de=x.willRenderShapeControls),"willRenderShapeTextControls"in x&&n(92,te=x.willRenderShapeTextControls),"willStartInteraction"in x&&n(93,on=x.willStartInteraction),"mapEditorPointToImagePoint"in x&&n(94,Xt=x.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in x&&n(95,ue=x.mapImagePointToEditorPoint),"eraseRadius"in x&&n(96,wn=x.eraseRadius),"selectRadius"in x&&n(97,Zn=x.selectRadius),"enableButtonFlipVertical"in x&&n(98,_r=x.enableButtonFlipVertical),"enableTapToAddText"in x&&n(99,Nn=x.enableTapToAddText),"enableTextStyleControls"in x&&n(5,ne=x.enableTextStyleControls),"locale"in x&&n(6,Ie=x.locale),"snapThreshold"in x&&n(100,mr=x.snapThreshold),"snapPointer"in x&&n(101,fr=x.snapPointer),"enableSnapToContext"in x&&n(102,Ur=x.enableSnapToContext),"gridSize"in x&&n(103,$r=x.gridSize)},t.$$.update=()=>{var x,Z;16&t.$$.dirty[2]|1024&t.$$.dirty[3]&&n(166,r=$r>0?{x:0,y:0,...Tt}:void 0),1&t.$$.dirty[0]|1048576&t.$$.dirty[5]&&n(146,i=!St&&Q&&(no()||Ii())),4194304&t.$$.dirty[4]&&n(173,o=!!i),4194304&t.$$.dirty[4]&&n(160,a=i&&Zo(i)),4194304&t.$$.dirty[4]|32&t.$$.dirty[5]&&n(10,s=i&&!a?i.id:void 0),8&t.$$.dirty[0]|16&t.$$.dirty[2]|4194304&t.$$.dirty[4]&&n(13,l=je&&i&&si(ri(i),Tt)),4194304&t.$$.dirty[4]|32&t.$$.dirty[5]&&n(144,c=!(!i||!a)),8192&t.$$.dirty[0]|8&t.$$.dirty[2]|4194304&t.$$.dirty[4]&&n(172,d=i&&Et&&Yn(l)||[]),4194304&t.$$.dirty[4]&&n(174,u=i&&g0(x=i)&&zd(x)&&x.disableResize!==!0&&(tc(x)||Fp(x)||ui(x)||$i(x)||ci(x)&&Fe(x,"pathClose"))&&!Ds(i)),4194304&t.$$.dirty[4]&&n(14,p=i&&(V=>g0(V)&&V.disableRotate!==!0&&(tc(V)||Fe(V,"text")||ui(V)))(i)&&!Ds(i)),4194304&t.$$.dirty[4]|524288&t.$$.dirty[5]&&n(16,h=u&&Fe(i,"text")&&!i.height?[[1,2],[3,0]]:(!i||!$i(i)&&!ci(i))&&u),65536&t.$$.dirty[0]|4194304&t.$$.dirty[4]|524288&t.$$.dirty[5]&&n(28,f=!!i&&!Array.isArray(h)&&u),4194304&t.$$.dirty[4]|131072&t.$$.dirty[5]&&n(15,m=i&&d.length>1),4&t.$$.dirty[3]|131072&t.$$.dirty[5]&&n(170,$=d.map(ue)),4&t.$$.dirty[0]|32768&t.$$.dirty[5]&&n(12,b=$.map(V=>dt(V.x-Te.x,V.y-Te.y))),4194304&t.$$.dirty[4]|262144&t.$$.dirty[5]&&n(27,S=o&&(Fp(i)?!Fe(i,"disableNewline")||!i.disableNewline:i.disableNewline===!1)),4&t.$$.dirty[3]|262144&t.$$.dirty[4]&&(Co&&ue&&!dl(Co)&&Za(Co)?(V=>{const ht=Yn(si(ri(V),Tt));if(!ht)return;const $t=ht.map(ue),Yt=!!V.pathClose||!(!V.bitmap&&(ci(V)||$i(V))),Ot=V.selectionStyle==="hook",ie=Ot?$t.map((Zt,le,oe)=>({id:"markup-hover",points:Ro(oe,le),strokeColor:[0,0,0,.1],strokeWidth:2})):[{id:"markup-hover",points:$t.map(Zt=>dt(Zt.x+1,Zt.y+1)),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:Yt}],qt=Ot?$t.map((Zt,le,oe)=>({id:"markup-hover",points:Ro(oe,le),strokeColor:yn,strokeWidth:2})):[{id:"markup-hover",points:$t,strokeColor:yn,strokeWidth:2,pathClose:Yt}];Zs(...ie,...qt)})(Co):Bo()),61440&t.$$.dirty[0]|8&t.$$.dirty[2]&&n(171,v=m&&p&&Et&&b&&(V=>{const ht=Sr(V),$t=ue({x:ht.origin.x+ht.dir.x,y:ht.origin.y+ht.dir.y});return{origin:ue(ht.origin),position:$t}})(l)),4&t.$$.dirty[0]|65536&t.$$.dirty[5]&&n(26,T=v&&dt(v.position.x-Te.x,v.position.y-Te.y)),4194304&t.$$.dirty[5]&&n(165,E=!!(xt||[]).find(V=>[91,93,17].includes(V))),256&t.$$.dirty[3]|1024&t.$$.dirty[5]&&n(167,C=!(E||!fr)),8&t.$$.dirty[2]|4718592&t.$$.dirty[4]|36896&t.$$.dirty[5]&&i&&$&&Et>0&&((V,ht,$t)=>{if(!Za(ht))return;const Yt=ci(ht),Ot=Yt&&Fe(ht,"pathClose"),ie=Ot&&(Mr=>Mr.strokeWidth&&((Fr,Di)=>{const Mo=Fr.strokeColor;return!!Mo&&(Mo.length===3||Mo[3]>0)})(Mr))(ht),qt=Zo(ht),Zt=Ds(ht),le=ht.selectionStyle==="hook",{selectionOpacity:oe=1}=ht;if(qt&&Yt&&!Ot)return;const We=[],fe=[...$],Me=fe[fe.length-1],Re=fe[0],re=(Zt?.05:.1)*V*oe,De=re>0,bn=(Zt?.5:1)*V*oe,Hn=bn>0,vn=[0,0,0],xn=[1,1,1],tn=Zt?1:1.5;xt.includes(16)&&Me&&$t&&On(Me,$t);const yr=(fe.length&&Ot&&qt&&$t?pa(Re,$t):1/0)<=256,Xn=(fe.length&&Ot&&qt&&$t?pa(Me,$t):1/0)<=256;!yr&&$t&&fe.push($t);const Xi=fe.length>1,Oi=!!ht.pathClose||!(!ht.bitmap&&(ci(ht)||$i(ht)))||fe.length>2&&yr;Xi&&De&&(le?We.push(...fe.map((Mr,Fr,Di)=>({id:li,points:Ro(Di,Fr),strokeColor:vn,strokeWidth:2,opacity:re}))):We.push({id:li,points:fe.map(Mr=>dt(Mr.x+1,Mr.y+1)),pathClose:Oi,strokeColor:vn,strokeWidth:2,opacity:re})),Ot&&De&&We.push(...fe.map(Mr=>({id:li,...Mr,rx:2*tn,ry:2*tn,backgroundColor:vn,opacity:re}))),v&&De&&We.push({id:li,points:[dt(v.origin.x+1,v.origin.y+1),dt(v.position.x+1,v.position.y+1)],strokeColor:vn,strokeWidth:2,opacity:re}),Xi&&Hn&&(le?We.push(...fe.map((Mr,Fr,Di)=>({id:li,points:Ro(Di,Fr),strokeColor:xn,strokeWidth:tn,opacity:bn}))):We.push({id:li,points:fe,pathClose:Oi,strokeColor:xn,strokeWidth:tn,backgroundColor:qt&&Ot&&ht.backgroundColor&&ht.backgroundColor[3]>0?ht.backgroundColor:[0,0,0,0],opacity:bn})),Ot&&We.push(...fe.map(Mr=>({id:li,...Mr,rx:3*tn,ry:3*tn,backgroundColor:[.5,.5,.5],strokeWidth:tn,strokeColor:xn}))),Ot&&qt&&$.length>=3&&We.push({...Re,id:li,rx:tn*(yr?5:4),ry:tn*(yr?5:4),backgroundColor:yr?yn:[.5,.5,.5],strokeWidth:tn,strokeColor:xn}),Ot&&qt&&ie&&!yr&&d.length>=2&&We.push({...Me,id:li,rx:tn*(Xn?5:4),ry:tn*(Xn?5:4),backgroundColor:Xn?yn:[.5,.5,.5],strokeWidth:tn,strokeColor:xn}),v&&Hn&&!le&&We.push({id:li,points:[{x:v.origin.x,y:v.origin.y},{x:v.position.x,y:v.position.y}],strokeColor:xn,strokeWidth:tn,opacity:bn}),Oe(...We)})(Et,i,a&&ci(i)?He({...Ms},!C):void 0),4194304&t.$$.dirty[4]&&(i||B()),262144&t.$$.dirty[4]&&n(168,R=!!Co),65536&t.$$.dirty[4]&&n(169,A=!!an),524288&t.$$.dirty[4]|28672&t.$$.dirty[5]&&(!Ms||A||R||He({...Ms},!C)),256&t.$$.dirty[2]|1028&t.$$.dirty[3]|8390656&t.$$.dirty[5]&&$r>0&&r&&ue&&((V,ht,$t,Yt)=>{const Ot=ue({x:0,y:0}),ie=ue({x:V,y:V}),qt=ue({x:ht.width,y:ht.height}),Zt=ie.x-Ot.x;if(kn.set(Zt>6?1:0),Yt<=0)return Un();const le=ar(Zt,Ot.x,qt.x).map(We=>({id:Vn,opacity:Yt,points:[{x:We,y:Ot.y},{x:We,y:qt.y}],strokeWidth:1,strokeColor:$t})),oe=ar(Zt,Ot.y,qt.y).map(We=>({id:Vn,opacity:Yt,points:[{x:Ot.x,y:We},{x:qt.x,y:We}],strokeWidth:1,strokeColor:$t}));nn(...oe,...le)})($r,r,Ke,Wt),512&t.$$.dirty[2]|4&t.$$.dirty[3]|49152&t.$$.dirty[4]|1024&t.$$.dirty[5]&&ue&&(E?Dn():((V,ht,$t)=>{if(V===null&&ht===null)return Dn();let Yt,Ot;V!==null&&(Yt={id:gn,strokeColor:$t,strokeWidth:1.5,points:[ue({x:V,y:0}),ue({x:V,y:Tt.height})]}),ht!==null&&(Ot={id:gn,strokeColor:$t,strokeWidth:1.5,points:[ue({x:0,y:ht}),ue({x:Tt.width,y:ht})]}),Gn(Yt,Ot)})(ba,Wi,Cn)),4&t.$$.dirty[2]&&(V=>{if(!V)return qi({_prerender:!1});const ht=Q.find($t=>$t.isEditing);ht&&jr(ht,{_prerender:J==="inline"})})(En),4194304&t.$$.dirty[5]&&xt&&xt.length&&(()=>{const[V]=xt;V!==8&&V!==46||In()&&(i.isEditing||setTimeout(()=>ei(),0))})(),272&t.$$.dirty[0]&&Ln&&J==="inline"&&Ln.focus(),4194304&t.$$.dirty[4]&&n(164,M=i&&di(i)),4194304&t.$$.dirty[4]|512&t.$$.dirty[5]&&n(11,P=M&&Lc(i)!==!1&&Ds(i)),2048&t.$$.dirty[0]&&n(159,_=P?{...i}:void 0),16&t.$$.dirty[2]|16&t.$$.dirty[5]&&n(161,y=_&&si({..._},Tt)),64&t.$$.dirty[5]&&n(163,z=y&&Ca(y.text,y)),320&t.$$.dirty[5]&&(O=y&&Br(y.x,y.y,z.width,z.height)),2048&t.$$.dirty[0]|4194304&t.$$.dirty[4]&&n(23,I=P?i.text:""),2056&t.$$.dirty[0]|16&t.$$.dirty[2]|4194304&t.$$.dirty[4]&&n(162,k=je&&i&&P&&si({...ri(i),width:Sn(i.width)?Math.floor(i.width):void 0,height:Sn(i.height)?Math.floor(i.height):void 0},Tt)),2064&t.$$.dirty[0]|128&t.$$.dirty[5]&&n(25,G=P&&((V,ht)=>{const{textAlign:$t="left",fontFamily:Yt="sans-serif",fontWeight:Ot="normal",fontStyle:ie="normal",letterSpacing:qt="normal",textShadowX:Zt=0,textShadowY:le=0,textShadowBlur:oe=0,textShadowColor:We,textOutlineWidth:fe=0,textOutlineColor:Me}=V,Re="!important",re=`caret-color:${q};text-align:${$t}${Re};font-family:${Yt}${Re};font-weight:${Ot}${Re};font-style:${ie}${Re};letter-spacing:${Sn(qt)?qt+"px":"normal"}${Re}`;if(ht==="modal")return re;const De=fe?`;-webkit-text-stroke:${2*fe}px ${Bi(Me)} ${Re}`:"",bn=oe||Zt||le?`;text-shadow:${Zt}px ${le}px ${oe}px ${Bi(We)} ${Re}`:"";let Hn=V.fontSize,vn=1,xn="";Hn>1e3&&ws()&&(vn=Hn/1e3,xn=`transform-origin:0 0;transform:scale(${vn})`,Hn=1e3);let tn=V.lineHeight/vn;const yr=Bi(V.color),Xn=.5*Math.max(0,Hn-tn);return`--font-scalar:${vn};--bottom-inset:${Xn}px;padding:${Xn}px 0 0${Re};color:${yr}${Re};font-size:${Hn}px${Re};line-height:${tn}px${Re};${re};${xn}${De}${bn}`})(k,J)),2052&t.$$.dirty[0]|536870912&t.$$.dirty[1]|2&t.$$.dirty[2]|128&t.$$.dirty[5]&&n(24,X=P&&((V,ht,$t,Yt)=>{let Ot,ie;V.width&&V.height?(Ot=An(V),ie=Is(V)):(ie=Ca(i.text,l),ie.width=l.width||ie.width,Ot=dt(V.x+.5*ie.width,V.y+.5*ie.height));const qt=Math.max(0,V.fontSize-V.lineHeight)+V.lineHeight,Zt=ue(Ot);let le=Zt.x-ht.x-.5*ie.width,oe=Zt.y-ht.y-.5*ie.height,We=V.flipX,fe=V.flipY,Me=V.rotation;Ee&&Ne?(We=!We,fe=!fe):Ee?(We=!We,Me=-Me):Ne&&(fe=!fe,Me=-Me),Me+=Yt;const Re=$t*(We?-1:1),re=$t*(fe?-1:1);return`--line-height:${qt}px;width:${ie.width}px;height:${ie.height}px;transform:translate(${le}px,${oe}px) rotate(${Me}rad) scale(${Re}, ${re})`})(k,Te,qe,Ut)),128&t.$$.dirty[2]&&(q=Bi(en)),2320&t.$$.dirty[0]&&P&&Ln&&J==="inline"&&Yr(I),72351744&t.$$.dirty[4]&&n(150,D=i&&!c?i:D),67108864&t.$$.dirty[4]&&n(152,lt=D&&SC(D)),67108864&t.$$.dirty[4]&&n(147,pt=D&&Xl(D)),67108864&t.$$.dirty[4]&&n(149,Lt=D&&(V=>V.disableDuplicate!==!0&&zd(V))(D)),67108864&t.$$.dirty[4]&&n(148,et=D&&Cy(D)),67108864&t.$$.dirty[4]&&n(151,Y=D&&(V=>V.disableReorder!==!0)(D)),67108864&t.$$.dirty[4]&&n(145,j=D&&Lc(D)!==!1),67108864&t.$$.dirty[4]&&n(153,ct=D&&Fe(D,"backgroundImage")&&f0(D,"opacity")),4194304&t.$$.dirty[4]&&n(155,U=i&&i.format==="html"),5242880&t.$$.dirty[4]|1&t.$$.dirty[5]&&n(158,ft=i&&(!c||U)),131072&t.$$.dirty[4]|2097160&t.$$.dirty[5]&&Yi.set(ft&&!se?1:0,{hard:Mt===!1}),4096&t.$$.dirty[0]|12&t.$$.dirty[5]&&n(157,yt=ft&&b.length?(Z=yi(b),Jo(dt(Z.x+.5*Z.width,Z.y),au)):yt),512&t.$$.dirty[0]|32&t.$$.dirty[2]|4&t.$$.dirty[5]&&n(156,It=yt&&Kn&&Le&&(V=>{const ht=Le.x,$t=Le.y,Yt=ht+Le.width;let Ot=Math.max(V.x-.5*Kn.width,ht),ie=Math.max(V.y-Kn.height-16,$t);return Ot+Kn.width>Yt&&(Ot=Yt-Kn.width),dt(Ot,ie)})(yt)),131072&t.$$.dirty[0]|2&t.$$.dirty[5]&&n(22,Jt=It&&`transform: translate(${It.x}px, ${It.y}px);opacity:${Se}`),2048&t.$$.dirty[0]&&n(154,pe=P?"text":"shape"),1088&t.$$.dirty[0]|1610612736&t.$$.dirty[2]|32&t.$$.dirty[3]|2145386496&t.$$.dirty[4]|1048577&t.$$.dirty[5]&&n(21,mt=pe==="text"&&te&&U?lu(()=>te([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map(([V,ht])=>["Button","style-"+V,{onclick:()=>document.execCommand(V),...ht,style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+ht.style}])]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400;",label:'<span style="font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline;">T</span><span style="position:relative;top:.175rem;">&times;</span>',title:"Remove styles"}]]]],s)):pe==="shape"&&de&&s?lu(()=>de([ct&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:ds,onchange:Js,step:.01,value:Fe(i,"opacity")?i.opacity:1,label:(V,ht,$t)=>Math.round(V/$t*100)+"%",min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[lt&&["Button","flip-horizontal",{onclick:Ks,label:Ie.shapeTitleButtonFlipHorizontal,icon:Ie.shapeIconButtonFlipHorizontal,hideLabel:!0}],lt&&_r&&["Button","flip-vertical",{onclick:Qs,label:Ie.shapeTitleButtonFlipVertical,icon:Ie.shapeIconButtonFlipVertical,hideLabel:!0}],Y&&["Button","to-front",{onclick:Li,label:Ie.shapeTitleButtonMoveToFront,icon:Ie.shapeIconButtonMoveToFront,hideLabel:!0,disabled:Q[Q.length-1]===D}],Lt&&["Button","duplicate",{onclick:oo,label:Ie.shapeTitleButtonDuplicate,icon:Ie.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],et&&["Button","remove",{onclick:Wa,label:Ie.shapeTitleButtonRemove,icon:Ie.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],j&&pt&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:Al,label:vi(cr,Ie,i),icon:vi(aa,Ie,i),hideLabel:!0}]]],j&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:Ie.shapeLabelInputText,onclick:Pl}]]]].filter(Boolean),s)):[]),64&t.$$.dirty[0]|1048576&t.$$.dirty[5]&&n(20,ot=Q.filter(Za).filter(V=>V.id).filter(V=>!Zo(V)).map(V=>({id:V.id,color:di(V)?V.color:$i(V)?V.strokeColor:V.backgroundColor,name:V.name||Ie["shapeLabelTool"+qS(IC(V))]})))},[St,Ce,Te,je,J,ne,Ie,oi,Ln,Kn,s,P,b,l,p,m,h,Se,zo,Ha,ot,mt,Jt,I,X,G,T,S,f,Jr,ya,x=>{const{origin:Z}=x.detail;n(140,an=void 0),H=void 0,me=void 0,Tn=!1,Pi=void 0,sn=!1,Ao(),clearTimeout(ai),ai=setTimeout(()=>n(141,se=!0),250);const V=no();if(!V||ci(V)&&Fe(V,"pathClose")||va(),io=Xt(Ue(Z)),V&&ci(V)&&Fe(V,"pathClose"))return he(x);const ht=ro(Q,io,Zn,Yt=>Za(Yt)),$t=ht.length&&ht.shift();if(i&&Ds(i)&&(Rn(),Nn&&(sn=!0)),!$t&&i&&Ds(i)&&qo(i),!!on(Z)){if($t&&dl($t))return Tn=!0,n(140,an=$t),H=ri(an),void(me=si(ri(an),Tt));Pi=$t||void 0,!he(x)&&$t&&(oi($t),n(140,an=$t),H=ri(an),me=si(ri(an),Tt))}},x=>{_e(),we(x)},x=>{const{translation:Z,ctrlKey:V,metaKey:ht,shiftKey:$t,position:Yt}=x.detail;if(an){if(!zd(an)||Ds(an))return;if($t){let Ot=Math.abs(Z.x),ie=Math.abs(Z.y);Bn==="x"&&(ie-=64),Bn==="y"&&(Ot-=64),Ot>ie?(Z.y=0,Bn="x"):ie>Ot&&(Z.x=0,Bn="y")}else Bn=null;return ia(an,me,Z,{...ir(V||ht?0:mr,$r,r,an)})}K(x)},x=>{_e(),an?Ds(an)?Ai():x.detail.isTap&&Tn&&di(an)&&Lc(an)!==!1&&qr(an):Gt(x)},x=>{const Z=Pi&&x.detail.isTap;if(x.detail.isTap&&setTimeout(()=>{at({target:an||Pi,position:io},0)}),an)return Ye(an),V=an,ht=H,JSON.stringify(V)!==JSON.stringify(ht)&&Nt(an),void n(140,an=void 0);var V,ht;const $t=To(),Yt=!$t||rt($t,Pi||void 0);Yt&&ni({storePrevious:!1}),ce(x),Yt&&Z&&oi(Pi)},kn,x=>{n(141,se=!0),n(140,an=i),me=l},x=>{if(!an)return void n(141,se=!1);const{translation:Z,indexes:V,shiftKey:ht,ctrlKey:$t,metaKey:Yt}=x.detail;((Ot,ie,qt,Zt,le)=>{const{snapThreshold:oe=0,gridSize:We=0,gridRect:fe,snapTargets:Me=[]}=le||{},Re=oe?(re,De,bn)=>{const{snapTranslation:Hn,snapLines:vn}=Hi(So(re),Me,oe,We,fe);eo(De,Hn),xo(vn);const xn=xr(bn(),De);re.x=xn.x,re.y=xn.y}:ve;if($i(Ot)||ci(Ot)&&Fe(Ot,"pathClose")){const[re]=qt,De=xt.includes(16)?On:(tn,yr)=>yr;let bn,Hn,vn;if($i(Ot))re===0?(bn=()=>Fs(ie),Hn=tn=>De(Bs(ie),tn),vn=(tn,yr)=>{tn.x1=yr.x,tn.y1=yr.y}):re===1&&(bn=()=>Bs(ie),Hn=tn=>De(Fs(ie),tn),vn=(tn,yr)=>{tn.x2=yr.x,tn.y2=yr.y});else{const tn=ie.points;bn=()=>({...tn[re]}),Hn=yr=>{const Xn=tn[sh(re-1,tn)],Xi=tn[sh(re+1,tn)];De(Xn,yr),De(Xi,yr)},vn=(yr,Xn)=>yr.points[re]=Xn}const xn=xr(bn(),Zt);Re(xn,Zt,bn),Hn(xn),vn(Ot,xn)}else if(tc(Ot)||ui(Ot)||Fp(Ot)){let re,De,bn=!1;if(ui(Ot))re=xm(ie);else if(tc(Ot))re=cl(ie);else{bn=!0,re=cl(ie);const Xn=Ca(ie.text,ie);re.height=Xn.height}Ot.aspectRatio?De=Ot.aspectRatio:le.shiftKey&&!bn&&(De=re.width/re.height);const Hn=cl(re),vn=An(Hn),xn=Ot.rotation,tn=fa(Hn),yr=Fi(Hn,xn);if(qt.length===1){let Xn=qt[0];Ot.flipX&&(Xn=Lo[Xn]),Ot.flipY&&(Xn=Ua[Xn]);const[Xi,Oi,Mr,Fr]=tn,Di=ue(yr[Xn]),Mo=Xr({...Di},Zt),ja=Xt(Mo);Re(ja,Zt,()=>Xt(Di));const Ll=dt(ja.x-yr[Xn].x,ja.y-yr[Xn].y),Ol=yo(Ue(Ll),-xn),us=dt(tn[Xn].x+Ol.x,tn[Xn].y+Ol.y);let xa;Xn===0&&(xa=Mr),Xn===1&&(xa=Fr),Xn===2&&(xa=Xi),Xn===3&&(xa=Oi);const Xo=yi([xa,us]);if(De){const{width:tl,height:el}=vo(Xo,De),[Fl,ms,Ps,fi]=uc(Xo);Xo.width=tl,Xo.height=el,us.y<xa.y&&(Xo.y=Ps-el),us.x<xa.x&&(Xo.x=ms-tl)}const ps=Fi(Xo,xn,vn),qa=ha(ps),Dl=yo(ps[0],-xn,qa),Sa=yo(ps[2],-xn,qa),hs=yi([Dl,Sa]);or(Ot,ui(Ot)?ry(hs):hs,Tt)}else{qt=qt.map(fi=>(Ot.flipX&&(fi=Lo[fi]),Ot.flipY&&(fi=Ua[fi]),fi));const[Xn,Xi]=qt.map(fi=>yr[fi]),Oi={x:Xn.x+.5*(Xi.x-Xn.x),y:Xn.y+.5*(Xi.y-Xn.y)},[Mr,Fr]=qt.map(fi=>tn[fi]),[Di,Mo]=qt.map(fi=>{const Ya=fi+2;return Ya<4?tn[Ya]:tn[Ya-4]}),ja={x:Di.x+.5*(Mo.x-Di.x),y:Di.y+.5*(Mo.y-Di.y)},Ll=ue(Oi),Ol=Xr({...Ll},Zt),us=Xt(Ol);Re(us,Zt,()=>Xt(Ll));const xa=dt(us.x-Oi.x,us.y-Oi.y),Xo=yo(Ue(xa),-xn),ps=Zr(Ue(Mr),Fr),qa=Jo(ps,fi=>1-Math.abs(Math.sign(fi))),Dl=dt(Xo.x*qa.x,Xo.y*qa.y);Xr(Mr,Dl),Xr(Fr,Dl);const Sa=yi(tn);if(De){let fi=Sa.width,Ya=Sa.height;qa.y===0?Ya=fi/De:fi=Ya*De,Sa.width=fi,Sa.height=Ya,qa.y===0?Sa.y=ja.y-.5*Ya:Sa.x=ja.x-.5*fi}const hs=Fi(Sa,xn,vn),tl=ha(hs),el=yo(hs[0],-xn,tl),Fl=yo(hs[2],-xn,tl),ms=yi([el,Fl]);let Ps;ui(Ot)?Ps=ry(ms):tc(Ot)?Ps=ms:bn&&(Ps={x:ms.x,y:ms.y,width:ms.width}),or(Ot,Ps,Tt)}}Dr()})(an,me,V,Z,{shiftKey:ht,...ir($t||Yt?0:mr,$r,r,an)})},x=>{if(!an)return void n(141,se=!1);oi(an);const{isTap:Z}=x.detail;Z&&Ye(an),n(140,an=void 0),n(141,se=!1),Nt(i)},x=>{jo=Sr(l).origin,n(141,se=!0),n(140,an=i),me=l},x=>{if(!an)return void n(141,se=!1);const{translation:Z,shiftKey:V}=x.detail;((ht,$t,Yt,Ot)=>{const ie=Io(si(ri(ht),Tt)),qt=An(ie),Zt=xr(jo,Yt);let le=mp(Zt,qt)+Math.PI/2;if(Ot.shiftKey){const oe=Math.PI/16;le=oe*Math.round(le/oe)-Ut%oe}or(ht,{rotation:le},Tt),Dr()})(an,0,Z,{shiftKey:V})},()=>{an?(oi(an),n(140,an=void 0),n(141,se=!1),Nt(i)):n(141,se=!1)},x=>{const{key:Z}=x,V=/escape/i.test(Z);if(In())return V?(x.preventDefault(),x.stopPropagation(),qo(i)):void(Lt&&Z==="d"&&(x.metaKey||x.ctrlKey)&&(x.preventDefault(),x.stopPropagation(),ao()))},x=>{const Z=Lc(i,x);return Z===!0?x:Z},Ar,x=>{const{target:Z,key:V}=x,ht=Z.value||Z.innerText,$t=Z.selectionStart||0,Yt=Z.selectionEnd||ht.length,Ot=ht.substring(0,$t)+V+ht.substring(Yt);if(Lc(i,Ot)!==Ot)return x.preventDefault()},x=>eh(i)&&/enter/i.test(x.code)&&i.disableNewline!==!1?x.preventDefault():/arrow/i.test(x.code)?x.stopPropagation():/escape/i.test(x.key)?Ai():void 0,x=>{const{key:Z,ctrlKey:V,altKey:ht}=x;if(/enter/i.test(Z)&&(V||ht))return Rn()},Rn,Ai,Yi,x=>{const Z=Ii();Z&&(Ds(Z)||zd(Z)&&(n(140,an=Z),me=si(ri(an),Tt),ia(an,me,x.detail)))},x=>{n(18,zo=!0)},({relatedTarget:x})=>{x&&x.classList.contains("shape-selector__button")||n(18,zo=!1)},x=>{if(x.pointerType==="touch"||x.target.className!=="PinturaShapeEditor")return void At();(se||ai)&&ks(void 0);const Z=L0(x,je);n(143,Ms=Ue(Z));const V=Jo(Xt(Z),$t=>Math.round($t));if(ul(V,Rs)||(Rs=Ue(V),fn(se,Z,V),se||ai)||c)return;const[ht]=ro(Q,V,0,Za);ht&&Zo(ht)||ks(ht)},x=>{x.pointerType!=="touch"&&At()},ke,st,dn,Ut,Ee,Ne,qe,En,Et,Tt,Le,yn,en,Ke,Cn,he,K,Gt,ce,we,ge,Nt,Pe,Qt,Ge,Ye,Qe,fn,at,At,jt,rt,Dt,ee,de,te,on,Xt,ue,wn,Zn,_r,Nn,mr,fr,Ur,$r,hi,Cr,Gr,mi,Wr,Mi,ti,(x,Z={})=>{let V,ht,$t,Yt=ui(x),Ot=di(x),ie=Z.position==="relative";const qt=Er(),Zt=fe=>{if(!mr)return fe;const Me=Xt(fe),{snapTranslation:Re,snapLines:re}=Hi(So(Me),qt,mr,$r,r);return eo(fe,Re),xo(re),fe},le=!!To(),oe=Z.isSelection?dn:Ce,We=Z.inputMode==="step";if(ci(x)){if(We){let fe=!1;const Me=(Re,re)=>{const De=Cr(oe),bn=Re&&dt(Mp(Re.x,Tt.width),Mp(Re.y,Tt.height)),Hn=bn&&ue(bn);xt.includes(16)&&Hn&&On(Hn,re);const vn=Xt(re),xn=De.points.length?De.points[0]:vn,tn=dt(Mp(xn.x,Tt.width),Mp(xn.y,Tt.height)),yr=ue(tn),Xn=pa(yr,re);if(!fe&&De.points.length===1&&Xn<36)return mi(oe);if(De.points.length>2&&Xn<=256){De.pathClose=!0,Za(De)&&oi(De);const Mr=Wr(oe);return void ge(Mr)}const Xi=De.strokeWidth&&De.strokeColor&&(De.strokeColor[3]===void 0||De.strokeColor[3]>0),Oi=pa(Hn,re);if(Xi&&De.points.length>1&&Oi<256){De.pathClose=!1,De.backgroundColor=[0,0,0,0],Za(De)&&oi(De);const Mr=Wr(oe);ge(Mr)}else if(!(De.points.length>0&&Oi<100))return ie?Bd(vn,Tt):vn};return{start:Re=>{const re=Cr(oe),{origin:De}=Re.detail;if(ht=4,V=Zt(Ue(De)),$t=Ue(V),re){const bn=re.points[re.points.length-1],Hn=Me(bn,V);return Hn&&(re.points=[...re.points,Hn]),void Mi({points:re.points},oe)}fe=!0},update:Re=>{if(!fe)return;const re=Cr(oe);if(!re)return;const De=re.points[0],bn=Me(De,dt(V.x+Re.detail.translation.x,V.y+Re.detail.translation.y));bn&&(re.points[1]=bn,Mi({points:re.points},oe))},release:Re=>Re.detail.preventInertia(),end:Re=>{if(!fe)return;const re=Xt(V),De=ie?Bd(re,Tt):re,{isTap:bn}=Re.detail;if(bn&&ro(Q,re,0,Za).length)return mi(oe);Gr({...x,points:[De]},oe)}}}return{start:fe=>{const{origin:Me}=fe.detail;ht=4,V=Ue(Me),$t=Ue(V);const Re=Xt(V),re=ie?Bd(Re,Tt):Re;Gr({...x,points:[re]},oe)},update:fe=>{const Me=Cr(oe),{translation:Re}=fe.detail,re=dt(V.x+Re.x,V.y+Re.y),De=Vo($t,re);if(ln(De,5)<=ht)return;const bn=mp(re,$t),Hn=ht-De;$t.x+=Hn*Math.cos(bn),$t.y+=Hn*Math.sin(bn);const vn=Xt($t),xn=ie?Bd(vn,Tt):vn;Mi({points:Me.points.concat(xn)},oe)},release:fe=>fe.detail.preventInertia(),cancel:()=>{mi(oe)},end:fe=>{const Me=Cr(oe);if(fe.detail.isTap){let re=!1;if(Me.bitmap?(Pi&&(re=!0),le&&(re=!0)):re=!0,re)return mi(oe)}const Re=Wr(oe);ge(Re)}}}return Yt||Ot||Qo(x)?{start:fe=>{const{origin:Me}=fe.detail;V=Zt(Ue(Me));const Re=Xt(V),re=ie?Bd(Re,Tt):Re,De=-1*Hr(Ut,Ee,Ne),bn={...x,rotation:De,...re};bn.flipX=Ee,bn.flipY=Ne,delete bn.position,bn.opacity=0,(Yt?["rx","ry"]:["width","height"]).forEach(Hn=>{bn[Hn]=ie?"0%":0}),Gr(bn,oe)},update:fe=>{const Me=Cr(oe);Me.opacity=1;let{aspectRatio:Re}=Me,{translation:re,shiftKey:De,ctrlKey:bn}=fe.detail;!Re&&De&&(Re=1);const Hn=Zt(dt(V.x+re.x,V.y+re.y)),vn=Xt(V),xn=Xt(Hn);if(Re){const Di=yi([vn,xn]),Mo=vo(Di,Re);xn.x=vn.x+Mo.width,xn.y=vn.y+Mo.height}const tn={x:vn.x+.5*(xn.x-vn.x),y:vn.y+.5*(xn.y-vn.y)},yr=Hr(Ut,Ee,Ne);yo(vn,yr,tn),yo(xn,yr,tn);const Xn=Math.min(vn.x,xn.x),Xi=Math.min(vn.y,xn.y);let Oi=Math.max(vn.x,xn.x)-Xn,Mr=Math.max(vn.y,xn.y)-Xi,Fr={};Yt?(bn?(Fr.x=vn.x,Fr.y=vn.y):(Fr.x=Xn+.5*Oi,Fr.y=Xi+.5*Mr),Fr.rx=.5*Oi,Fr.ry=.5*Mr):(bn?(Fr.x=vn.x-.5*Oi,Fr.y=vn.y-.5*Mr):(Fr.x=Xn,Fr.y=Xi),Fr.width=Oi,Fr.height=Mr),Mi(Fr,oe,(Di,Mo)=>or(Di,Mo,Tt))},release:fe=>{fe.detail.preventInertia()},cancel:fe=>{mi(oe)},end:fe=>{const Me=Cr(oe);if(fe.detail.isTap){if(di(Me)&&Nn&&sn||!di(Me)||!Nn||Pi)return mi(oe);delete Me.width,delete Me.height,Me.disableNewline!==!1&&delete Me.textAlign;const Re=si({...Me},Tt),re=Ca(Me.text,Re),De=Xt({x:V.x,y:V.y-.5*re.height}),bn=Xt({x:V.x+re.width,y:V.y+.5*re.height}),Hn={x:De.x+.5*(bn.x-De.x),y:De.y+.5*(bn.y-De.y)},vn=Hr(Ut,Ee,Ne);yo(De,vn,Hn),yo(bn,vn,Hn);let xn=Math.min(De.x,bn.x),tn=Math.min(De.y,bn.y);xn<0&&(xn=0),tn<0&&(tn=0),xn+re.width>Tt.width&&(xn=Tt.width-re.width),tn+re.height>Tt.height&&(tn=Tt.height-re.height),Me.x=Ve(Me.x)?so(xn,Tt.width):xn,Me.y=Ve(Me.y)?so(tn,Tt.height):tn}if(Me.opacity=1,!di(Me)){const Re=Wr(oe);ge(Re)}Za(Me)&&oi(Me),di(Me)&&qr(Me)}}:$i(x)?{start:fe=>{const{origin:Me}=fe.detail,Re=Xt(Zt(Me)),re=Jo(Re,au);V=Ue(Me),Gr({...x,x1:ie?so(re.x,Tt.width):re.x,y1:ie?so(re.y,Tt.height):re.y,x2:ie?so(re.x,Tt.width):re.x,y2:ie?so(re.y,Tt.height):re.y,opacity:0},oe)},update:fe=>{const{translation:Me}=fe.detail,Re=Zt(Xr(Ue(V),Me));if(xt.includes(16)){const De=Vo(V,Re),bn=mp(V,Re),Hn=Math.PI/4,vn=Hn*Math.round(bn/Hn);Re.x=V.x+De*Math.cos(vn),Re.y=V.y+De*Math.sin(vn)}const re=Xt(Re);Mi({x2:ie?so(re.x,Tt.width):re.x,y2:ie?so(re.y,Tt.height):re.y,opacity:1},oe)},release:fe=>fe.detail.preventInertia(),cancel:fe=>{mi(oe)},end:fe=>{const Me=Cr(oe);if(fe.detail.isTap)return mi(oe);Me.opacity=1;const Re=Wr(oe);ge(Re),Za(Me)&&oi(Re)}}:void 0},()=>{let x,Z;const V=wn*wn,ht=($t,Yt,Ot=!1)=>{const ie=pa($t,Yt);if(!Ot&&ie<2)return!1;const qt=Q.filter(le=>!le.disableErase);let Zt;return Zt=ie<V?ro(Q,Xt(Yt),wn):Qr(qt,Xt($t),Xt(Yt),wn),Yo(Zt).forEach(Ge),!0};return{start:$t=>{x=dt(Math.round($t.detail.origin.x),Math.round($t.detail.origin.y)),ht(x,x,!0),Z=x},update:$t=>{const{translation:Yt}=$t.detail,Ot=dt(Math.round(x.x+Yt.x),Math.round(x.y+Yt.y));ht(Z,Ot)&&(Z=Ue(Ot))},release:$t=>$t.detail.preventInertia(),end:()=>{}}},no,ji,x=>{if(!no())return m0(x),ti(x)},va,Oo,(x={})=>({id:Oa(),...x}),Dr,wo,jr,ki,(x,Z,V=!0)=>{Q.forEach(ht=>ki(ht,x,Z,!1)),V&&Dr()},qi,Ii,In,Do,ei,ni,qo,qr,Kr,Yo,Eo,Io,ro,Qr,ba,Wi,an,se,Co,Ms,c,j,i,pt,et,Lt,D,Y,lt,ct,pe,U,It,yt,ft,_,a,y,k,z,M,E,r,C,R,A,$,v,d,o,u,Q,Mt,xt,Wt,function(x){go.call(this,t,x)},x=>oi(Ce[x]),function(x){zn[x?"unshift":"push"](()=>{Ln=x,n(8,Ln)})},function(){I=this.value,n(23,I),n(11,P),n(146,i),n(164,M),n(0,St),n(175,Q)},function(x){zn[x?"unshift":"push"](()=>{Ln=x,n(8,Ln)})},()=>{Ha&&Ha.focus()},x=>n(9,Kn=x.detail),function(x){zn[x?"unshift":"push"](()=>{Ha=x,n(19,Ha)})},x=>L0(x,je)]}class MP extends mn{constructor(e){super(),hn(this,e,RP,CP,rn,{uid:57,ui:58,disabled:0,shapes:1,selection:59,offset:2,contextRotation:60,contextFlipX:61,contextFlipY:62,contextZoom:63,active:64,opacity:65,parentRect:66,rootRect:3,utilRect:67,hoverColor:68,caretColor:69,gridColor:70,snapColor:71,textInputMode:4,oninteractionstart:72,oninteractionupdate:73,oninteractionrelease:74,oninteractionend:75,oninteractioncancel:76,onaddshape:77,onupdateshape:78,onselectshape:79,onblurshape:80,onremoveshape:81,ontapshape:82,onhovershape:83,onhovercanvas:84,ontapcanvas:85,onleavecanvas:86,beforeSelectShape:87,beforeDeselectShape:88,beforeRemoveShape:89,beforeUpdateShape:90,willRenderShapeControls:91,willRenderShapeTextControls:92,willStartInteraction:93,mapEditorPointToImagePoint:94,mapImagePointToEditorPoint:95,eraseRadius:96,selectRadius:97,enableButtonFlipVertical:98,enableTapToAddText:99,enableTextStyleControls:5,locale:6,snapThreshold:100,snapPointer:101,enableSnapToContext:102,gridSize:103,syncShapeCollection:104,getShapeDraft:105,addShapeDraft:106,discardShapeDraft:107,confirmShapeDraft:108,updateShapeDraft:109,addShape:110,createShape:111,eraseShape:112,getMarkupItemDraft:113,getMarkupItemDraftIndex:114,addMarkupItemDraft:115,confirmMarkupItemDraft:116,discardMarkupItemDraft:117,createMarkupItem:118,syncShapes:119,removeMarkupShapeProps:120,updateMarkupShape:121,updateMarkupShapeProperty:122,updateMarkupItemsShapeProperty:123,updateMarkupShapeItems:124,getActiveMarkupItem:125,hasActiveMarkupItem:126,removeShape:127,removeActiveMarkupItem:128,blurShapes:129,selectShape:7,deselectMarkupItem:130,editMarkupItem:131,finishEditMarkupItem:132,removeMarkupItems:133,getTextShapeRect:134,getMarkupShapeRect:135,getShapesNearPosition:136,getShapesBetweenPoints:137},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get syncShapeCollection(){return this.$$.ctx[104]}get getShapeDraft(){return this.$$.ctx[105]}get addShapeDraft(){return this.$$.ctx[106]}get discardShapeDraft(){return this.$$.ctx[107]}get confirmShapeDraft(){return this.$$.ctx[108]}get updateShapeDraft(){return this.$$.ctx[109]}get addShape(){return this.$$.ctx[110]}get createShape(){return this.$$.ctx[111]}get eraseShape(){return this.$$.ctx[112]}get getMarkupItemDraft(){return this.$$.ctx[113]}get getMarkupItemDraftIndex(){return this.$$.ctx[114]}get addMarkupItemDraft(){return this.$$.ctx[115]}get confirmMarkupItemDraft(){return this.$$.ctx[116]}get discardMarkupItemDraft(){return this.$$.ctx[117]}get createMarkupItem(){return this.$$.ctx[118]}get syncShapes(){return this.$$.ctx[119]}get removeMarkupShapeProps(){return this.$$.ctx[120]}get updateMarkupShape(){return this.$$.ctx[121]}get updateMarkupShapeProperty(){return this.$$.ctx[122]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[123]}get updateMarkupShapeItems(){return this.$$.ctx[124]}get getActiveMarkupItem(){return this.$$.ctx[125]}get hasActiveMarkupItem(){return this.$$.ctx[126]}get removeShape(){return this.$$.ctx[127]}get removeActiveMarkupItem(){return this.$$.ctx[128]}get blurShapes(){return this.$$.ctx[129]}get selectShape(){return this.$$.ctx[7]}get deselectMarkupItem(){return this.$$.ctx[130]}get editMarkupItem(){return this.$$.ctx[131]}get finishEditMarkupItem(){return this.$$.ctx[132]}get removeMarkupItems(){return this.$$.ctx[133]}get getTextShapeRect(){return this.$$.ctx[134]}get getMarkupShapeRect(){return this.$$.ctx[135]}get getShapesNearPosition(){return this.$$.ctx[136]}get getShapesBetweenPoints(){return this.$$.ctx[137]}}function kP(t){let e,n,r;return n=new na({props:{items:t[2]}}),{c(){e=bt("ul"),zt(n.$$.fragment),w(e,"class","PinturaShapeStyleList")},m(i,o){it(i,e,o),Ft(n,e,null),r=!0},p(i,o){const a={};4&o&&(a.items=i[2]),n.$set(a)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Bt(n)}}}function PP(t){let e,n;return e=new cs({props:{class:"PinturaShapeStyles",elasticity:t[0],$$slots:{default:[AP]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};1&i&&(o.elasticity=r[0]),131076&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function AP(t){let e,n,r;return n=new na({props:{items:t[2]}}),{c(){e=bt("ul"),zt(n.$$.fragment),w(e,"class","PinturaShapeStyleList")},m(i,o){it(i,e,o),Ft(n,e,null),r=!0},p(i,o){const a={};4&o&&(a.items=i[2]),n.$set(a)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Bt(n)}}}function LP(t){let e,n,r,i;const o=[PP,kP],a=[];function s(l,c){return l[1]?0:1}return n=s(t),r=a[n]=o[n](t),{c(){e=bt("div"),r.c(),w(e,"style",t[3])},m(l,c){it(l,e,c),a[n].m(e,null),i=!0},p(l,[c]){let d=n;n=s(l),n===d?a[n].p(l,c):(Be(),W(a[d],1,1,()=>{a[d]=null}),ze(),r=a[n],r?r.p(l,c):(r=a[n]=o[n](l),r.c()),L(r,1),r.m(e,null)),(!i||8&c)&&w(e,"style",l[3])},i(l){i||(L(r),i=!0)},o(l){W(r),i=!1},d(l){l&&nt(e),a[n].d()}}}function OP(t,e,n){let r,i,o,a,s,l,{isActive:c=!1}=e,{controls:d=[]}=e,{locale:u}=e,{scrollElasticity:p}=e,{scrollEnable:h=!0}=e,{hideTitles:f=!1}=e,{willRenderControls:m=ur}=e;const $=kr("redrawTrigger");N(t,$,T=>n(14,a=T));const b=kr("env");N(t,b,T=>n(13,o=T));const S=kr("isAnimated");N(t,S,T=>n(16,l=T));const v=un(0,{stiffness:.25,damping:.9});return N(t,v,T=>n(15,s=T)),t.$$set=T=>{"isActive"in T&&n(8,c=T.isActive),"controls"in T&&n(9,d=T.controls),"locale"in T&&n(10,u=T.locale),"scrollElasticity"in T&&n(0,p=T.scrollElasticity),"scrollEnable"in T&&n(1,h=T.scrollEnable),"hideTitles"in T&&n(11,f=T.hideTitles),"willRenderControls"in T&&n(12,m=T.willRenderControls)},t.$$.update=()=>{65792&t.$$.dirty&&v.set(c?1:0,{hard:l===!1}),33024&t.$$.dirty&&n(3,r=`opacity:${s};${c?"":"pointer-events:none;"}${s<=0?"visibility:hidden":""}`),32256&t.$$.dirty&&n(2,i=a&&m(d.map(T=>["ShapeStyle",T.id,{title:T.componentProps.title,locale:u,hideTitle:f,items:[[T.component,T.id,T.componentProps]]}]),o,()=>$.set({})))},[p,h,i,r,$,b,S,v,c,d,u,f,m,o,a,s,l]}class DP extends mn{constructor(e){super(),hn(this,e,OP,LP,rn,{isActive:8,controls:9,locale:10,scrollElasticity:0,scrollEnable:1,hideTitles:11,willRenderControls:12})}}function hv(t,e,n){const r=t.slice();return r[15]=e[n].key,r[6]=e[n].controls,r[16]=e[n].isActive,r}function mv(t,e){let n,r,i;return r=new DP({props:{isActive:e[16],controls:e[6],locale:e[1],scrollElasticity:e[2],scrollEnable:e[3],hideTitles:e[4],willRenderControls:e[5]}}),{key:t,first:null,c(){n=Nr(),zt(r.$$.fragment),this.first=n},m(o,a){it(o,n,a),Ft(r,o,a),i=!0},p(o,a){e=o;const s={};128&a&&(s.isActive=e[16]),128&a&&(s.controls=e[6]),2&a&&(s.locale=e[1]),4&a&&(s.scrollElasticity=e[2]),8&a&&(s.scrollEnable=e[3]),16&a&&(s.hideTitles=e[4]),32&a&&(s.willRenderControls=e[5]),r.$set(s)},i(o){i||(L(r.$$.fragment,o),i=!0)},o(o){W(r.$$.fragment,o),i=!1},d(o){o&&nt(n),Bt(r,o)}}}function FP(t){let e,n,r,i=[],o=new Map,a=t[7];const s=l=>l[15];for(let l=0;l<a.length;l+=1){let c=hv(t,a,l),d=s(c);o.set(d,i[l]=mv(d,c))}return{c(){e=bt("div");for(let l=0;l<i.length;l+=1)i[l].c();w(e,"class",n=$n(["PinturaShapeStyleEditor",!t[3]&&"PinturaShapeStyleEditorOverflow",t[0]]))},m(l,c){it(l,e,c);for(let d=0;d<i.length;d+=1)i[d].m(e,null);r=!0},p(l,[c]){190&c&&(a=l[7],Be(),i=_s(i,c,s,1,l,a,o,e,Cl,mv,null,hv),ze()),(!r||9&c&&n!==(n=$n(["PinturaShapeStyleEditor",!l[3]&&"PinturaShapeStyleEditorOverflow",l[0]])))&&w(e,"class",n)},i(l){if(!r){for(let c=0;c<a.length;c+=1)L(i[c]);r=!0}},o(l){for(let c=0;c<i.length;c+=1)W(i[c]);r=!1},d(l){l&&nt(e);for(let c=0;c<i.length;c+=1)i[c].d()}}}function BP(t,e,n){let r,i,o,{class:a}=e,{controls:s={}}=e,{shape:l}=e,{onchange:c}=e,{locale:d}=e,{scrollElasticity:u}=e,{scrollEnable:p=!0}=e,{hideTitles:h=!1}=e,{willRenderControls:f}=e;const m=[];return t.$$set=$=>{"class"in $&&n(0,a=$.class),"controls"in $&&n(6,s=$.controls),"shape"in $&&n(8,l=$.shape),"onchange"in $&&n(9,c=$.onchange),"locale"in $&&n(1,d=$.locale),"scrollElasticity"in $&&n(2,u=$.scrollElasticity),"scrollEnable"in $&&n(3,p=$.scrollEnable),"hideTitles"in $&&n(4,h=$.hideTitles),"willRenderControls"in $&&n(5,f=$.willRenderControls)},t.$$.update=()=>{64&t.$$.dirty&&n(11,r=Object.keys(s).filter($=>s[$])),2304&t.$$.dirty&&n(10,i=l&&Object.keys(l).length&&r&&f0(l)?($=>r.filter(b=>b.split("_").every(S=>Fe($,S)&&f0($,S))).map(b=>{const S=($.settings&&$.settings[b]||{}).control||b,v=b.split("_"),T=v.length>1?v.map(E=>$[E]):$[b];if(hr(s[S])){const{title:E,component:M}=s[S](T,P=>{c({[b]:P})},{selectedShapeId:$.id});return{id:S,component:na,componentProps:{title:E,items:M}}}let[C,R]=s[S];if(Ve(C)&&s[C]){const E={...R};[C,R]=s[C],R={...R,...E}}const A=hr(R.options)?R.options($):R.options;return{id:S,component:C,componentProps:{...R,options:A,locale:d,value:T,optionLabelClass:"PinturaButtonLabel",onchange:E=>{const M=$c(E)&&!zr(E)?E.value:E;R.onchange&&R.onchange(M,$);const P=v.length>1?v.reduce((_,y,z)=>({..._,[y]:Array.isArray(M)?M[z]:M}),{}):{[b]:M};c(P)}}}}).filter(Boolean))(l):[]),1280&t.$$.dirty&&n(7,o=(($,b)=>{let S=m.find(v=>v.key===$);return S||(S={key:$,controls:b},m.push(S)),m.forEach(v=>v.isActive=!1),S.controls=b,S.isActive=!0,m})(l&&Object.keys(l).length?Object.keys(l).join("_"):"none",i||[]))},[a,d,u,p,h,f,s,o,l,c,i,r]}class Nh extends mn{constructor(e){super(),hn(this,e,BP,FP,rn,{class:0,controls:6,shape:8,onchange:9,locale:1,scrollElasticity:2,scrollEnable:3,hideTitles:4,willRenderControls:5})}}var Ww=t=>/<svg /.test(t);function zP(t){let e,n;return e=new na({props:{items:t[10]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};1024&i&&(o.items=r[10]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function NP(t){let e,n,r,i;const o=[UP,VP],a=[];function s(l,c){return l[8]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=Nr()},m(l,c){a[e].m(l,c),it(l,r,c),i=!0},p(l,c){let d=e;e=s(l),e===d?a[e].p(l,c):(Be(),W(a[d],1,1,()=>{a[d]=null}),ze(),n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),L(n,1),n.m(r.parentNode,r))},i(l){i||(L(n),i=!0)},o(l){W(n),i=!1},d(l){a[e].d(l),l&&nt(r)}}}function VP(t){let e,n,r,i,o=t[10]&&fv(t);return r=new cs({props:{scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[GP]},$$scope:{ctx:t}}}),{c(){e=bt("div"),o&&o.c(),n=be(),zt(r.$$.fragment),w(e,"class","PinturaShapePresetsFlat")},m(a,s){it(a,e,s),o&&o.m(e,null),Rt(e,n),Ft(r,e,null),i=!0},p(a,s){a[10]?o?(o.p(a,s),1024&s&&L(o,1)):(o=fv(a),o.c(),L(o,1),o.m(e,n)):o&&(Be(),W(o,1,1,()=>{o=null}),ze());const l={};512&s&&(l.scrollAutoCancel=a[9]),1&s&&(l.elasticity=a[0]),536871070&s&&(l.$$scope={dirty:s,ctx:a}),r.$set(l)},i(a){i||(L(o),L(r.$$.fragment,a),i=!0)},o(a){W(o),W(r.$$.fragment,a),i=!1},d(a){a&&nt(e),o&&o.d(),Bt(r)}}}function UP(t){let e,n,r,i,o;n=new cs({props:{elasticity:t[0],class:"PinturaShapePresetsGroups",$$slots:{default:[jP]},$$scope:{ctx:t}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[11]},t[12]];let s={$$slots:{default:[YP,({panel:l,panelIsActive:c})=>({26:l,27:c}),({panel:l,panelIsActive:c})=>(l?67108864:0)|(c?134217728:0)]},$$scope:{ctx:t}};for(let l=0;l<a.length;l+=1)s=Or(s,a[l]);return i=new Oh({props:s}),{c(){e=bt("div"),zt(n.$$.fragment),r=be(),zt(i.$$.fragment),w(e,"class","PinturaShapePresetsGrouped")},m(l,c){it(l,e,c),Ft(n,e,null),Rt(e,r),Ft(i,e,null),o=!0},p(l,c){const d={};1&c&&(d.elasticity=l[0]),536876128&c&&(d.$$scope={dirty:c,ctx:l}),n.$set(d);const u=6144&c?Vi(a,[a[0],a[1],2048&c&&{panels:l[11]},4096&c&&to(l[12])]):{};738206239&c&&(u.$$scope={dirty:c,ctx:l}),i.$set(u)},i(l){o||(L(n.$$.fragment,l),L(i.$$.fragment,l),o=!0)},o(l){W(n.$$.fragment,l),W(i.$$.fragment,l),o=!1},d(l){l&&nt(e),Bt(n),Bt(i)}}}function fv(t){let e,n;return e=new na({props:{items:t[10]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};1024&i&&(o.items=r[10]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function GP(t){let e,n;return e=new Gf({props:{items:t[7],onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};128&i&&(o.items=r[7]),2&i&&(o.onclickitem=r[1]),4&i&&(o.ongrabitem=r[2]),8&i&&(o.ondragitem=r[3]),16&i&&(o.ondropitem=r[4]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function gv(t){let e,n;return e=new na({props:{items:t[10]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};1024&i&&(o.items=r[10]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function $v(t){let e,n;return e=new ea({props:{$$slots:{default:[WP]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};805306368&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function WP(t){let e,n=t[28].icon+"";return{c(){e=zi("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){268435456&i&&n!==(n=r[28].icon+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function yv(t){let e,n,r=t[28].label+"";return{c(){e=bt("span"),n=vr(r)},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){268435456&o&&r!==(r=i[28].label+"")&&Vr(n,r)},d(i){i&&nt(e)}}}function HP(t){let e,n,r,i=t[28].icon&&$v(t),o=!t[28].hideLabel&&yv(t);return{c(){i&&i.c(),e=be(),o&&o.c(),n=Nr()},m(a,s){i&&i.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,n,s),r=!0},p(a,s){a[28].icon?i?(i.p(a,s),268435456&s&&L(i,1)):(i=$v(a),i.c(),L(i,1),i.m(e.parentNode,e)):i&&(Be(),W(i,1,1,()=>{i=null}),ze()),a[28].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=yv(a),o.c(),o.m(n.parentNode,n))},i(a){r||(L(i),r=!0)},o(a){W(i),r=!1},d(a){i&&i.d(a),a&&nt(e),o&&o.d(a),a&&nt(n)}}}function jP(t){let e,n,r,i=t[10]&&gv(t);const o=[{class:"PinturaControlList"},{tabs:t[5]},t[12],{layout:"compact"}];let a={$$slots:{default:[HP,({tab:s})=>({28:s}),({tab:s})=>s?268435456:0]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)a=Or(a,o[s]);return n=new Lh({props:a}),n.$on("select",t[18]),{c(){i&&i.c(),e=be(),zt(n.$$.fragment)},m(s,l){i&&i.m(s,l),it(s,e,l),Ft(n,s,l),r=!0},p(s,l){s[10]?i?(i.p(s,l),1024&l&&L(i,1)):(i=gv(s),i.c(),L(i,1),i.m(e.parentNode,e)):i&&(Be(),W(i,1,1,()=>{i=null}),ze());const c=4128&l?Vi(o,[o[0],32&l&&{tabs:s[5]},4096&l&&to(s[12]),o[3]]):{};805306368&l&&(c.$$scope={dirty:l,ctx:s}),n.$set(c)},i(s){r||(L(i),L(n.$$.fragment,s),r=!0)},o(s){W(i),W(n.$$.fragment,s),r=!1},d(s){i&&i.d(s),s&&nt(e),Bt(n,s)}}}function qP(t){let e,n;return e=new Gf({props:{items:t[13][t[26]].items,disabled:t[13][t[26]].disabled,onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};67117056&i&&(o.items=r[13][r[26]].items),67117056&i&&(o.disabled=r[13][r[26]].disabled),2&i&&(o.onclickitem=r[1]),4&i&&(o.ongrabitem=r[2]),8&i&&(o.ondragitem=r[3]),16&i&&(o.ondropitem=r[4]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function YP(t){let e,n;return e=new cs({props:{scroll:t[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[qP]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};134217728&i&&(o.scroll=r[27]?{scrollOffset:0,animate:!1}:void 0),512&i&&(o.scrollAutoCancel=r[9]),1&i&&(o.elasticity=r[0]),603987998&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function XP(t){let e,n,r,i;const o=[NP,zP],a=[];function s(l,c){return l[9]?0:l[10]?1:-1}return~(n=s(t))&&(r=a[n]=o[n](t)),{c(){e=bt("div"),r&&r.c(),w(e,"class","PinturaShapePresetsPalette")},m(l,c){it(l,e,c),~n&&a[n].m(e,null),i=!0},p(l,[c]){let d=n;n=s(l),n===d?~n&&a[n].p(l,c):(r&&(Be(),W(a[d],1,1,()=>{a[d]=null}),ze()),~n?(r=a[n],r?r.p(l,c):(r=a[n]=o[n](l),r.c()),L(r,1),r.m(e,null)):r=null)},i(l){i||(L(r),i=!0)},o(l){W(r),i=!1},d(l){l&&nt(e),~n&&a[n].d()}}}function ZP(t,e,n){let r,i,o,a,s,l,c,d,u,{locale:p}=e,{presets:h}=e,{scrollElasticity:f}=e,{enableSelectImage:m=!0}=e,{willRenderPresetToolbar:$=ur}=e,{onaddpreset:b=ve}=e,{ongrabpreset:S}=e,{ondragpreset:v}=e,{ondroppreset:T}=e;const C="presets-"+Oa(),R=(P,_="")=>Ww(P)?P:th(P)?fS(P,_):`<img src="${P}" alt="${_}"/>`,A=P=>Zx(ff(P)),E=["src","alt","thumb","shape","id","mount","disabled"],M=P=>P.map(_=>(y=>zr(y)&&Ve(y[0])&&zr(y[1]))(_)?{..._[2],id:`${C}-${_[0].toLowerCase()}`,label:_[0],items:M(_[1])}:(y=>{let z,O,I,k,G,X,q,D=y;return Ve(y)?th(y)?(z=y,G=y,k=R(z,G)):(z=y,G=A(z),k=R(z,G)):(z=y.src,G=y.alt||(Ve(z)?A(z):Ve(y.thumb)?A(y.thumb):void 0),k=R(y.thumb||z,G),O=y.shape,X=y.mount,q=y.disabled,I=Object.keys(y).reduce((lt,pt)=>(E.includes(pt)||(lt[pt]=y[pt]),lt),{})),{id:D,src:z,thumb:k,shape:O,shapeProps:I,alt:G,title:G,mount:X,disabled:q}})(_));return t.$$set=P=>{"locale"in P&&n(14,p=P.locale),"presets"in P&&n(15,h=P.presets),"scrollElasticity"in P&&n(0,f=P.scrollElasticity),"enableSelectImage"in P&&n(16,m=P.enableSelectImage),"willRenderPresetToolbar"in P&&n(17,$=P.willRenderPresetToolbar),"onaddpreset"in P&&n(1,b=P.onaddpreset),"ongrabpreset"in P&&n(2,S=P.ongrabpreset),"ondragpreset"in P&&n(3,v=P.ondragpreset),"ondroppreset"in P&&n(4,T=P.ondroppreset)},t.$$.update=()=>{32768&t.$$.dirty&&n(7,r=M(h)),128&t.$$.dirty&&n(9,i=r.length),640&t.$$.dirty&&n(8,o=i&&r.some(P=>!!P.items)),384&t.$$.dirty&&n(5,a=o&&r),384&t.$$.dirty&&n(13,s=o&&r.reduce((P,_)=>(P[_.id]=_,P),{})),96&t.$$.dirty&&n(6,l=l||a&&(a.find(P=>!P.disabled)||{}).id),64&t.$$.dirty&&n(12,c={name:C,selected:l}),32&t.$$.dirty&&n(11,d=a&&a.map(P=>P.id)),212994&t.$$.dirty&&n(10,u=p&&$([m&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{Cw().then(P=>{P&&b(P)})}}]]))},[f,b,S,v,T,a,l,r,o,i,u,d,c,s,p,h,m,$,({detail:P})=>n(6,l=P)]}class Hw extends mn{constructor(e){super(),hn(this,e,ZP,XP,rn,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}function KP(t){let e,n,r,i;return e=new na({props:{items:t[29]}}),r=new Nh({props:{locale:t[4],shape:t[31]||t[49],onchange:t[86],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[163]}}),{c(){zt(e.$$.fragment),n=be(),zt(r.$$.fragment)},m(o,a){Ft(e,o,a),it(o,n,a),Ft(r,o,a),i=!0},p(o,a){const s={};536870912&a[0]&&(s.items=o[29]),e.$set(s);const l={};16&a[0]&&(l.locale=o[4]),262145&a[1]&&(l.shape=o[31]||o[49]),512&a[0]&&(l.controls=o[9]),r.$set(l)},i(o){i||(L(e.$$.fragment,o),L(r.$$.fragment,o),i=!0)},o(o){W(e.$$.fragment,o),W(r.$$.fragment,o),i=!1},d(o){Bt(e,o),o&&nt(n),Bt(r,o)}}}function QP(t){let e,n,r;return n=new Vw({props:{$$slots:{default:[KP]},$$scope:{ctx:t}}}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"slot","header")},m(i,o){it(i,e,o),Ft(n,e,null),r=!0},p(i,o){const a={};536871440&o[0]|262145&o[1]|262144&o[6]&&(a.$$scope={dirty:o,ctx:i}),n.$set(a)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Bt(n)}}}function bv(t){let e,n;const r=[{locale:t[4]},{ui:t[69]},{shapes:t[5]},{selection:t[58]},{uid:t[19]},{parentRect:t[37]},{rootRect:t[55]},{utilRect:t[39]},{offset:t[50]},{disabled:t[38]},{contextRotation:t[22]},{contextFlipX:t[23]},{contextFlipY:t[24]},{contextZoom:t[36].scale},{active:t[35]},{opacity:t[56]},{hoverColor:t[57]},{caretColor:t[57]},{gridColor:[1,1,1,.125]},{snapColor:t[57]},{eraseRadius:t[47]},{selectRadius:t[6]},{enableButtonFlipVertical:t[10]},{mapEditorPointToImagePoint:t[20]},{mapImagePointToEditorPoint:t[21]},{enableTapToAddText:t[13]},{textInputMode:t[8]},{snapThreshold:t[15]},{snapPointer:!t[48]},{enableSnapToContext:t[16]},{gridSize:t[14]},{willStartInteraction:t[96]},{oninteractionstart:t[80]},{oninteractionupdate:t[81]},{oninteractionrelease:t[82]},{oninteractionend:t[84]},{oninteractioncancel:t[83]},{onleavecanvas:t[88]},{onhovercanvas:t[87]},{onhovershape:t[90]},{ontapcanvas:t[89]},{onaddshape:t[155]},{onselectshape:t[156]},{onblurshape:t[157]},{ontapshape:t[158]},{onupdateshape:t[159]},{onremoveshape:t[160]},t[42]];let i={};for(let o=0;o<r.length;o+=1)i=Or(i,r[o]);return e=new MP({props:i}),t[161](e),{c(){zt(e.$$.fragment)},m(o,a){Ft(e,o,a),n=!0},p(o,a){const s=1106896240&a[0]|252381680&a[1]|511443072&a[2]|24&a[3]?Vi(r,[16&a[0]&&{locale:o[4]},128&a[2]&&{ui:o[69]},32&a[0]&&{shapes:o[5]},134217728&a[1]&&{selection:o[58]},524288&a[0]&&{uid:o[19]},64&a[1]&&{parentRect:o[37]},16777216&a[1]&&{rootRect:o[55]},256&a[1]&&{utilRect:o[39]},524288&a[1]&&{offset:o[50]},128&a[1]&&{disabled:o[38]},4194304&a[0]&&{contextRotation:o[22]},8388608&a[0]&&{contextFlipX:o[23]},16777216&a[0]&&{contextFlipY:o[24]},32&a[1]&&{contextZoom:o[36].scale},16&a[1]&&{active:o[35]},33554432&a[1]&&{opacity:o[56]},67108864&a[1]&&{hoverColor:o[57]},67108864&a[1]&&{caretColor:o[57]},r[18],67108864&a[1]&&{snapColor:o[57]},65536&a[1]&&{eraseRadius:o[47]},64&a[0]&&{selectRadius:o[6]},1024&a[0]&&{enableButtonFlipVertical:o[10]},1048576&a[0]&&{mapEditorPointToImagePoint:o[20]},2097152&a[0]&&{mapImagePointToEditorPoint:o[21]},8192&a[0]&&{enableTapToAddText:o[13]},256&a[0]&&{textInputMode:o[8]},32768&a[0]&&{snapThreshold:o[15]},131072&a[1]&&{snapPointer:!o[48]},65536&a[0]&&{enableSnapToContext:o[16]},16384&a[0]&&{gridSize:o[14]},8&a[3]&&{willStartInteraction:o[96]},262144&a[2]&&{oninteractionstart:o[80]},524288&a[2]&&{oninteractionupdate:o[81]},1048576&a[2]&&{oninteractionrelease:o[82]},4194304&a[2]&&{oninteractionend:o[84]},2097152&a[2]&&{oninteractioncancel:o[83]},67108864&a[2]&&{onleavecanvas:o[88]},33554432&a[2]&&{onhovercanvas:o[87]},268435456&a[2]&&{onhovershape:o[90]},134217728&a[2]&&{ontapcanvas:o[89]},1073741824&a[0]|16&a[3]&&{onaddshape:o[155]},1073741824&a[0]&&{onselectshape:o[156]},1073741824&a[0]&&{onblurshape:o[157]},1073741824&a[0]&&{ontapshape:o[158]},1073741824&a[0]|16&a[3]&&{onupdateshape:o[159]},1073741824&a[0]|16&a[3]&&{onremoveshape:o[160]},2048&a[1]&&to(o[42])]):{};e.$set(s)},i(o){n||(L(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){t[161](null),Bt(e,o)}}}function JP(t){let e,n,r,i,o,a=t[51]&&bv(t);return{c(){e=bt("div"),a&&a.c(),w(e,"slot","main"),w(e,"style",n="cursor:"+t[46])},m(s,l){it(s,e,l),a&&a.m(e,null),t[162](e),r=!0,i||(o=[kt(e,"keydown",t[85]),Jn(cw.call(null,e)),kt(e,"dropfiles",function(){Qn(t[12]?t[95]:ve)&&(t[12]?t[95]:ve).apply(this,arguments)}),Jn(Ui.call(null,e)),kt(e,"measure",t[151])],i=!0)},p(s,l){(t=s)[51]?a?(a.p(t,l),1048576&l[1]&&L(a,1)):(a=bv(t),a.c(),L(a,1),a.m(e,null)):a&&(Be(),W(a,1,1,()=>{a=null}),ze()),(!r||32768&l[1]&&n!==(n="cursor:"+t[46]))&&w(e,"style",n)},i(s){r||(L(a),r=!0)},o(s){W(a),r=!1},d(s){s&&nt(e),a&&a.d(),t[162](null),i=!1,tr(o)}}}function tA(t){let e,n;return e=new Hw({props:{locale:t[4],presets:t[18],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[94],ongrabpreset:t[91],ondragpreset:t[92],ondroppreset:t[93],scrollElasticity:t[44]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16&i[0]&&(o.locale=r[4]),262144&i[0]&&(o.presets=r[18]),2048&i[0]&&(o.enableSelectImage=r[11]),4096&i[1]&&(o.willRenderPresetToolbar=r[43]),8192&i[1]&&(o.scrollElasticity=r[44]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function eA(t){let e,n,r,i=t[7]==="stack"&&vv(t),o=(t[53]&&t[34]||t[7]==="row")&&xv(t);return{c(){i&&i.c(),e=be(),o&&o.c(),n=Nr()},m(a,s){i&&i.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,n,s),r=!0},p(a,s){a[7]==="stack"?i?(i.p(a,s),128&s[0]&&L(i,1)):(i=vv(a),i.c(),L(i,1),i.m(e.parentNode,e)):i&&(Be(),W(i,1,1,()=>{i=null}),ze()),a[53]&&a[34]||a[7]==="row"?o?(o.p(a,s),128&s[0]|4194312&s[1]&&L(o,1)):(o=xv(a),o.c(),L(o,1),o.m(n.parentNode,n)):o&&(Be(),W(o,1,1,()=>{o=null}),ze())},i(a){r||(L(i),L(o),r=!0)},o(a){W(i),W(o),r=!1},d(a){i&&i.d(a),a&&nt(e),o&&o.d(a),a&&nt(n)}}}function vv(t){let e,n,r,i;const o=[rA,nA],a=[];function s(l,c){return l[45]?0:1}return n=s(t),r=a[n]=o[n](t),{c(){e=bt("div"),r.c(),w(e,"class","PinturaControlPanels")},m(l,c){it(l,e,c),a[n].m(e,null),i=!0},p(l,c){let d=n;n=s(l),n===d?a[n].p(l,c):(Be(),W(a[d],1,1,()=>{a[d]=null}),ze(),r=a[n],r?r.p(l,c):(r=a[n]=o[n](l),r.c()),L(r,1),r.m(e,null))},i(l){i||(L(r),i=!0)},o(l){W(r),i=!1},d(l){l&&nt(e),a[n].d()}}}function nA(t){let e,n,r;return n=new Nh({props:{locale:t[4],shape:t[31]||t[49],onchange:t[86],controls:t[9],scrollElasticity:t[44],willRenderControls:t[17]}}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"class","PinturaControlPanel")},m(i,o){it(i,e,o),Ft(n,e,null),r=!0},p(i,o){const a={};16&o[0]&&(a.locale=i[4]),262145&o[1]&&(a.shape=i[31]||i[49]),512&o[0]&&(a.controls=i[9]),8192&o[1]&&(a.scrollElasticity=i[44]),131072&o[0]&&(a.willRenderControls=i[17]),n.$set(a)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Bt(n)}}}function rA(t){let e,n,r;return n=new Hw({props:{locale:t[4],presets:t[18],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[94],ongrabpreset:t[91],ondragpreset:t[92],ondroppreset:t[93],scrollElasticity:t[44]}}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"class","PinturaControlPanel")},m(i,o){it(i,e,o),Ft(n,e,null),r=!0},p(i,o){const a={};16&o[0]&&(a.locale=i[4]),262144&o[0]&&(a.presets=i[18]),2048&o[0]&&(a.enableSelectImage=i[11]),4096&o[1]&&(a.willRenderPresetToolbar=i[43]),8192&o[1]&&(a.scrollElasticity=i[44]),n.$set(a)},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Bt(n)}}}function xv(t){let e,n;return e=new cs({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[aA]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};8192&i[1]&&(o.elasticity=r[44]),131729&i[0]|262155&i[1]|262144&i[6]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function Sv(t){let e,n;return e=new Xs({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[32],selectedIndex:t[32].findIndex(t[152]),onchange:t[79],$$slots:{option:[oA,({option:r})=>({203:r}),({option:r})=>[0,0,0,0,0,0,r?131072:0]]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16&i[0]&&(o.locale=r[4]),2&i[1]&&(o.options=r[32]),1&i[0]|2&i[1]&&(o.selectedIndex=r[32].findIndex(r[152])),16&i[0]|393216&i[6]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function wv(t){let e,n;return e=new ea({props:{$$slots:{default:[iA]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16&i[0]|393216&i[6]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function iA(t){let e,n=(hr(t[203].icon)?t[203].icon(t[4]):t[203].icon)+"";return{c(){e=zi("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){16&i[0]|131072&i[6]&&n!==(n=(hr(r[203].icon)?r[203].icon(r[4]):r[203].icon)+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function Tv(t){let e,n,r=(hr(t[203].label)?t[203].label(t[4]):t[203].label)+"";return{c(){e=bt("span"),n=vr(r)},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){16&o[0]|131072&o[6]&&r!==(r=(hr(i[203].label)?i[203].label(i[4]):i[203].label)+"")&&Vr(n,r)},d(i){i&&nt(e)}}}function oA(t){let e,n,r,i=t[203].icon&&wv(t),o=!t[203].hideLabel&&Tv(t);return{c(){e=bt("div"),i&&i.c(),n=be(),o&&o.c(),w(e,"slot","option")},m(a,s){it(a,e,s),i&&i.m(e,null),Rt(e,n),o&&o.m(e,null),r=!0},p(a,s){a[203].icon?i?(i.p(a,s),131072&s[6]&&L(i,1)):(i=wv(a),i.c(),L(i,1),i.m(e,n)):i&&(Be(),W(i,1,1,()=>{i=null}),ze()),a[203].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=Tv(a),o.c(),o.m(e,null))},i(a){r||(L(i),r=!0)},o(a){W(i),r=!1},d(a){a&&nt(e),i&&i.d(),o&&o.d()}}}function Ev(t){let e,n;return e=new Nh({props:{locale:t[4],shape:t[31]||t[49],onchange:t[86],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[153]}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16&i[0]&&(o.locale=r[4]),262145&i[1]&&(o.shape=r[31]||r[49]),512&i[0]&&(o.controls=r[9]),131072&i[0]&&(o.willRenderControls=r[153]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function aA(t){let e,n,r,i=t[34]&&Sv(t),o=t[7]==="row"&&Ev(t);return{c(){i&&i.c(),e=be(),o&&o.c(),n=Nr()},m(a,s){i&&i.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,n,s),r=!0},p(a,s){a[34]?i?(i.p(a,s),8&s[1]&&L(i,1)):(i=Sv(a),i.c(),L(i,1),i.m(e.parentNode,e)):i&&(Be(),W(i,1,1,()=>{i=null}),ze()),a[7]==="row"?o?(o.p(a,s),128&s[0]&&L(o,1)):(o=Ev(a),o.c(),L(o,1),o.m(n.parentNode,n)):o&&(Be(),W(o,1,1,()=>{o=null}),ze())},i(a){r||(L(i),L(o),r=!0)},o(a){W(i),W(o),r=!1},d(a){i&&i.d(a),a&&nt(e),o&&o.d(a),a&&nt(n)}}}function Iv(t){let e,n;return e=new cs({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[cA]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};8192&i[1]&&(o.elasticity=r[44]),67108880&i[0]|8388608&i[1]|262144&i[6]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function _v(t){let e,n;return e=new ea({props:{$$slots:{default:[sA]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16&i[0]|393216&i[6]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function sA(t){let e,n=(hr(t[203].icon)?t[203].icon(t[4]):t[203].icon)+"";return{c(){e=zi("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){16&i[0]|131072&i[6]&&n!==(n=(hr(r[203].icon)?r[203].icon(r[4]):r[203].icon)+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function lA(t){let e,n,r,i,o,a=(hr(t[203].label)?t[203].label(t[4]):t[203].label)+"",s=t[203].icon&&_v(t);return{c(){e=bt("div"),s&&s.c(),n=be(),r=bt("span"),i=vr(a),w(e,"slot","option")},m(l,c){it(l,e,c),s&&s.m(e,null),Rt(e,n),Rt(e,r),Rt(r,i),o=!0},p(l,c){l[203].icon?s?(s.p(l,c),131072&c[6]&&L(s,1)):(s=_v(l),s.c(),L(s,1),s.m(e,n)):s&&(Be(),W(s,1,1,()=>{s=null}),ze()),(!o||16&c[0]|131072&c[6])&&a!==(a=(hr(l[203].label)?l[203].label(l[4]):l[203].label)+"")&&Vr(i,a)},i(l){o||(L(s),o=!0)},o(l){W(s),o=!1},d(l){l&&nt(e),s&&s.d()}}}function cA(t){let e,n;return e=new Xs({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[54],selectedIndex:t[54].findIndex(t[154]),onchange:t[78],$$slots:{option:[lA,({option:r})=>({203:r}),({option:r})=>[0,0,0,0,0,0,r?131072:0]]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};16&i[0]&&(o.locale=r[4]),8388608&i[1]&&(o.options=r[54]),67108864&i[0]|8388608&i[1]&&(o.selectedIndex=r[54].findIndex(r[154])),16&i[0]|393216&i[6]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function dA(t){let e,n,r,i,o;const a=[eA,tA],s=[];function l(d,u){return d[52]?0:d[45]?1:-1}~(n=l(t))&&(r=s[n]=a[n](t));let c=t[33]&&Iv(t);return{c(){e=bt("div"),r&&r.c(),i=be(),c&&c.c(),w(e,"slot","footer"),w(e,"style",t[40])},m(d,u){it(d,e,u),~n&&s[n].m(e,null),Rt(e,i),c&&c.m(e,null),o=!0},p(d,u){let p=n;n=l(d),n===p?~n&&s[n].p(d,u):(r&&(Be(),W(s[p],1,1,()=>{s[p]=null}),ze()),~n?(r=s[n],r?r.p(d,u):(r=s[n]=a[n](d),r.c()),L(r,1),r.m(e,i)):r=null),d[33]?c?(c.p(d,u),4&u[1]&&L(c,1)):(c=Iv(d),c.c(),L(c,1),c.m(e,null)):c&&(Be(),W(c,1,1,()=>{c=null}),ze()),(!o||512&u[1])&&w(e,"style",d[40])},i(d){o||(L(r),L(c),o=!0)},o(d){W(r),W(c),o=!1},d(d){d&&nt(e),~n&&s[n].d(),c&&c.d()}}}function uA(t){let e,n;return e=new bc({props:{hasHeader:t[41],$$slots:{footer:[dA],main:[JP],header:[QP]},$$scope:{ctx:t}}}),e.$on("measure",t[164]),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};1024&i[1]&&(o.hasHeader=r[41]),2113929201&i[0]|134216703&i[1]|262144&i[6]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function pA(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,b,S,v,T,C,R,A,E,M,P,_,y,z,O,I,k,G,X,q,D,lt,pt,Lt,et,Y,j,ct,U,ft,yt,It,Jt,pe,mt,ot,Q,Se,Mt,xt,Wt,Ht,Ae,ke,st,St,Ce,dn,Te,Ut,Ee,Ne,qe,En=Je,Et=()=>(En(),En=ho(he,H=>n(35,U=H)),he),Tt=Je,je=()=>(Tt(),Tt=ho(ge,H=>n(142,Jt=H)),ge),Le=Je,yn=()=>(Le(),Le=ho(hi,H=>n(37,xt=H)),hi),en=Je,Ke=()=>(en(),en=ho(Gt,H=>n(149,Te=H)),Gt),Cn=Je,J=()=>(Cn(),Cn=ho(K,H=>n(56,Ne=H)),K);t.$$.on_destroy.push(()=>En()),t.$$.on_destroy.push(()=>Tt()),t.$$.on_destroy.push(()=>Le()),t.$$.on_destroy.push(()=>en()),t.$$.on_destroy.push(()=>Cn());let{isActive:he}=e;Et();let{isActiveFraction:K}=e;J();let{isVisible:Gt}=e;Ke();let{stores:ce}=e,{locale:we={}}=e,{shapes:ge}=e;je();let{toolbar:Nt=[]}=e,{toolShapes:Pe={}}=e,{toolActive:Qt}=e,{toolSelectRadius:Ge}=e,{toolRetainStyles:Ye=!1}=e,{toolbarLayout:Qe="stack"}=e,{textInputMode:fn}=e,{shapeControls:at={}}=e,{enableButtonFlipVertical:At=!1}=e,{enablePresetSelectImage:jt=!0}=e,{enablePresetDropImage:rt=!0}=e,{enableSelectToolToAddShape:Dt=!1}=e,{enableAutoSelectMoveTool:ee=["line","arrow","path","rectangle","ellipse","text"]}=e,{enableTapToAddText:de=!1}=e,{enableMoveTool:te=!1}=e,{enableViewTool:on=!1}=e,{enableToolShareStyles:Xt=!0}=e,{gridSize:ue=0}=e,{snapThreshold:wn=0}=e,{enableSnapToContext:Zn=!0}=e,{willRenderHeaderTools:_r=ur}=e,{willRenderPresetToolbar:Nn}=e,{willRenderShapeStyleControls:ne}=e,{willStartInteraction:Ie}=e,{shapePresets:mr=[]}=e,{utilKey:fr}=e,{mapScreenPointToImagePoint:Ur}=e,{mapImagePointToScreenPoint:$r}=e,{imageRotation:Er=0}=e,{imageFlipX:ir=!1}=e,{imageFlipY:Jr=!1}=e,{parentRect:hi}=e;yn();let{hooks:Cr={}}=e;const Gr=kr("selection");N(t,Gr,H=>n(148,St=H));const mi=kr("isAnimated");N(t,mi,H=>n(139,ft=H));const Wr=kr("elasticityMultiplier");N(t,Wr,H=>n(143,pe=H));const Mi=kr("ui");N(t,Mi,H=>n(174,Ce=H));const ti=kr("keysPressed");let or;N(t,ti,H=>n(146,ke=H));const{env:On,history:ya,rootRect:Hr,rootColorSecondary:xo,enablePanInput:Ao,enablePanInputStatus:ba,enableZoomInput:Wi,stageRect:xr,utilRectPadded:ar,scrollElasticity:So,imageOverlayMarkup:ra,imagePreviewModifiers:Hi,imageCropRect:eo,shapePreprocessor:ia,stageScalar:Lo,imageSelectionRect:Ua,imageTransformsInterpolated:jo,imageSelectionPan:no,imageSize:ji,allowPan:va,allowZoom:Oo,allowZoomControls:Dr,allowPlayPause:wo}=ce;N(t,On,H=>n(140,yt=H)),N(t,Hr,H=>n(55,Ee=H)),N(t,xo,H=>n(57,qe=H)),N(t,ba,H=>n(38,Ht=H)),N(t,xr,H=>n(144,mt=H)),N(t,ar,H=>n(39,dn=H)),N(t,Hi,H=>n(150,Ut=H)),N(t,eo,H=>n(173,Wt=H)),N(t,ia,H=>n(147,st=H)),N(t,Lo,H=>n(171,Se=H)),N(t,Ua,H=>n(172,Mt=H)),N(t,jo,H=>n(36,ot=H)),N(t,no,H=>n(170,Q=H)),N(t,ji,H=>n(145,Ae=H));let jr=0,ki={};const qi=H=>{const[me,Tn]=or[H];let sn,se,_e=Tn.position==="relative";const Bn=_e?"0%":0,Yn=_e?"0%":0;Qo(me)||di(me)?(se=_e?"20%":.2*xt.width,sn=ri(me),sn.x=Bn,sn.y=Yn,ts(sn,{width:se,height:se},xt)):ui(me)?(se=_e?"10%":.1*xt.width,sn=ri(me),sn.x=Bn,sn.y=Yn,ts(sn,{rx:se,ry:se},xt)):$i(me)&&(se=_e?"10%":.1*xt.width,sn=ri(me),sn.x1=Bn,sn.y1=Yn,sn.x2=Bn,sn.y2=Yn),sn&&Promise.resolve().then(()=>{Io(Yo(sn,void 0,se))})},Ii=H=>Ur(L0(H,Ee));let In,Do,ei={},Ir;const ni=H=>{if(!(ci(H)&&Fe(H,"pathClose")))return;const me=[...H.strokeColor];me[3]=1,In.updateMarkupShape(H,{pathClose:!1,strokeColor:me},!1),In.removeMarkupShapeProps(H,["backgroundColor"],!1),In.confirmMarkupItemDraft(),In.selectShape(H)};let To;const oi=(H,me)=>{if(Sn(H))return H;if(H.endsWith("%"))return parseFloat(H)/100*me.width};let qo,qr,Kr;const Yo=(H,me,Tn)=>{let sn=!1;me||(sn=!0,me=q?Ur(An(mt)):An(Wt)),me.x-=xt.x||0,me.y-=xt.y||0,(ir||Jr)&&(H.flipX=ir,H.flipY=Jr);const se=In.getShapesNearPosition(Jt,me);if(sn&&se.length){const _e=.1*Math.min(Wt.width,Wt.height);me.x+=Math.round(-_e+Math.random()*_e*2),me.y+=Math.round(-_e+Math.random()*_e*2)}if(Er!==0&&(H.rotation=ir&&Jr?-Er:ir||Jr?Er:-Er),Fe(H,"width")&&Fe(H,"height")){const{width:_e,height:Bn}=jc(H,["width","height"],xt);ts(H,{x:me.x-.5*_e,y:me.y-.5*Bn},xt)}else if(ui(H))ts(H,{x:me.x,y:me.y},xt);else if($i(H)){const{x1:_e,y1:Bn,x2:Yn,y2:Sr}=jc(H,["x1","y1","x2","y2"],xt),lr=Vo(dt(_e,Bn),dt(Yn,Sr)),Wn=Ve(Tn)?nh(Tn,xt.width):lr;ts(H,{x1:me.x-Wn,y1:me.y+Wn,x2:me.x+Wn,y2:me.y-Wn},xt)}else if(ci(H)){const{points:_e}=jc(H,["points"],xt),Bn=ha(_e);ts(H,{points:_e.map(Yn=>({x:Yn.x+me.x-Bn.x,y:Yn.y+me.y-Bn.y}))},xt)}return H},Eo=(H,me)=>{const Tn=Yo(Iy(H,Wt),me);return H.shape&&(Fe(H.shape,"x")&&(Tn.x=H.shape.x),Fe(H.shape,"y")&&(Tn.y=H.shape.y)),Io(Tn)},Io=H=>{const{beforeAddShape:me=()=>!0}=Cr;if(me(H))return In.addShape(H),In.selectShape(H),D("addshape",H),ya.write(),H};let ro=!1;const Qr=()=>{ya.write()};let io;const ai=kr("redrawTrigger");N(t,ai,H=>n(141,It=H));const Pi=[],an=un(ft?20:0);return N(t,an,H=>n(138,ct=H)),t.$$set=H=>{"isActive"in H&&Et(n(1,he=H.isActive)),"isActiveFraction"in H&&J(n(2,K=H.isActiveFraction)),"isVisible"in H&&Ke(n(3,Gt=H.isVisible)),"stores"in H&&n(101,ce=H.stores),"locale"in H&&n(4,we=H.locale),"shapes"in H&&je(n(5,ge=H.shapes)),"toolbar"in H&&n(102,Nt=H.toolbar),"toolShapes"in H&&n(103,Pe=H.toolShapes),"toolActive"in H&&n(0,Qt=H.toolActive),"toolSelectRadius"in H&&n(6,Ge=H.toolSelectRadius),"toolRetainStyles"in H&&n(104,Ye=H.toolRetainStyles),"toolbarLayout"in H&&n(7,Qe=H.toolbarLayout),"textInputMode"in H&&n(8,fn=H.textInputMode),"shapeControls"in H&&n(9,at=H.shapeControls),"enableButtonFlipVertical"in H&&n(10,At=H.enableButtonFlipVertical),"enablePresetSelectImage"in H&&n(11,jt=H.enablePresetSelectImage),"enablePresetDropImage"in H&&n(12,rt=H.enablePresetDropImage),"enableSelectToolToAddShape"in H&&n(105,Dt=H.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in H&&n(106,ee=H.enableAutoSelectMoveTool),"enableTapToAddText"in H&&n(13,de=H.enableTapToAddText),"enableMoveTool"in H&&n(107,te=H.enableMoveTool),"enableViewTool"in H&&n(108,on=H.enableViewTool),"enableToolShareStyles"in H&&n(109,Xt=H.enableToolShareStyles),"gridSize"in H&&n(14,ue=H.gridSize),"snapThreshold"in H&&n(15,wn=H.snapThreshold),"enableSnapToContext"in H&&n(16,Zn=H.enableSnapToContext),"willRenderHeaderTools"in H&&n(110,_r=H.willRenderHeaderTools),"willRenderPresetToolbar"in H&&n(111,Nn=H.willRenderPresetToolbar),"willRenderShapeStyleControls"in H&&n(17,ne=H.willRenderShapeStyleControls),"willStartInteraction"in H&&n(112,Ie=H.willStartInteraction),"shapePresets"in H&&n(18,mr=H.shapePresets),"utilKey"in H&&n(19,fr=H.utilKey),"mapScreenPointToImagePoint"in H&&n(20,Ur=H.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in H&&n(21,$r=H.mapImagePointToScreenPoint),"imageRotation"in H&&n(22,Er=H.imageRotation),"imageFlipX"in H&&n(23,ir=H.imageFlipX),"imageFlipY"in H&&n(24,Jr=H.imageFlipY),"parentRect"in H&&yn(n(25,hi=H.parentRect)),"hooks"in H&&n(113,Cr=H.hooks)},t.$$.update=()=>{var H,me,Tn,sn;if(4194304&t.$$.dirty[4]&&n(123,r=ke.includes(18)),2098176&t.$$.dirty[3]&&(or&&Pe===or||n(114,or=Pe)),16&t.$$.dirty[1]&&va.set(U),16&t.$$.dirty[1]&&Oo.set(U),16&t.$$.dirty[1]&&Dr.set(U),512&t.$$.dirty[3]&&n(33,i=Array.isArray(Nt)&&Nt.length>1&&Array.isArray(Nt[0][1])),4&t.$$.dirty[1]|512&t.$$.dirty[3]&&n(54,o=i?Nt.map((se,_e)=>[_e,se[0]]):[]),67108864&t.$$.dirty[0]|4&t.$$.dirty[1]|512&t.$$.dirty[3]&&n(137,a=i?Nt[jr][1]:Nt),262144&t.$$.dirty[0]|311296&t.$$.dirty[3]|8192&t.$$.dirty[4]&&n(32,s=((se,{willRenderPresetToolbar:_e,shapePresets:Bn,enableViewTool:Yn,enableMoveTool:Sr})=>{let lr=Bn.length!==0||_e?se:se.filter(Wn=>Wn[0]!=="preset");return i&&(lr=[["move",Wn=>Wn.shapeLabelToolMove,{icon:Wn=>Wn.shapeIconToolMove}],["view",Wn=>Wn.shapeLabelToolView,{icon:Wn=>Wn.shapeIconToolView}],...lr]),lr=Sr?lr:lr.filter(Wn=>Wn[0]!=="move"),Yn?lr:lr.filter(Wn=>Wn[0]!=="view")})(a,{willRenderPresetToolbar:Nn,shapePresets:mr,enableMoveTool:te,enableViewTool:on})),2&t.$$.dirty[1]&&n(135,d=!!s.length),1&t.$$.dirty[0]|2&t.$$.dirty[1]|2048&t.$$.dirty[4]&&d&&Qt===void 0&&n(0,Qt=s[0][0]),67108865&t.$$.dirty[0]|4&t.$$.dirty[1]|4194304&t.$$.dirty[3]|8192&t.$$.dirty[4]&&i&&n(115,ki={...ki,[jr]:a.map(([se])=>se).includes(Qt)?Qt:ki[jr]||a[0][0]}),512&t.$$.dirty[0]&&n(134,l=!!Object.keys(at).length),2&t.$$.dirty[1]&&n(34,c=s.length>1),12&t.$$.dirty[1]&&n(53,u=c||i),1&t.$$.dirty[0]&&n(136,p=Qt!==void 0),7168&t.$$.dirty[4]&&n(52,h=(!p||d)&&l),268435456&t.$$.dirty[0]&&n(30,D=io&&(H=io,(se,_e)=>{H.dispatchEvent(ll(se,_e))})),1073741825&t.$$.dirty[0]|16&t.$$.dirty[1]&&U&&D&&D("selectcontrol",Qt),524288&t.$$.dirty[0]|16&t.$$.dirty[1]|67108864&t.$$.dirty[4]&&(U?Ct(Hi,Ut[fr]={maskMarkupOpacity:.85},Ut):delete Ut[fr]),1&t.$$.dirty[0]|2097152&t.$$.dirty[3]&&n(133,f=Qt&&or[Qt]?or[Qt][1]:void 0),512&t.$$.dirty[4]&&n(124,m=f&&f.isSelection?"selection":"shapes"),1073741824&t.$$.dirty[3]|1&t.$$.dirty[4]&&(se=>{if(!In)return;const _e=In.getShapeDraft(Gr);_e&&(se&&(Do=_e.drawMode),In.updateShapeDraft({drawMode:se?"subtract":Do},Gr))})(m==="selection"&&r),134217729&t.$$.dirty[0]&&Qt&&In){const se=In.getMarkupItemDraft();se&&ni(se)}if(1&t.$$.dirty[0]&&Qt&&In&&Qt!=="move"&&In.blurShapes(),16&t.$$.dirty[1]|33554432&t.$$.dirty[4]&&n(51,$=Te&&U),256&t.$$.dirty[1]|1048576&t.$$.dirty[4]&&n(50,b=dn&&dt(mt.x-dn.x,mt.y-dn.y)),512&t.$$.dirty[0]&&n(132,S=Object.keys(at)),16&t.$$.dirty[1]|262144&t.$$.dirty[4]&&n(120,v=U&&Jt.filter(dl)[0]),16&t.$$.dirty[1]|262144&t.$$.dirty[4]&&n(129,T=U&&Jt.find(se=>Cm(se))),16&t.$$.dirty[1]|262144&t.$$.dirty[4]&&n(49,C=U&&Jt.find(se=>Zo(se))),1&t.$$.dirty[0]|16&t.$$.dirty[1]|2097152&t.$$.dirty[3]&&n(126,R=U&&or[Qt]?SS(ri({...or[Qt][0],...Ce[fr]?Ce[fr][Qt]:{}})):{}),2097152&t.$$.dirty[3]&&or&&n(116,ei={}),1&t.$$.dirty[0]|8454144&t.$$.dirty[3]|260&t.$$.dirty[4]&&n(125,A=R&&Object.keys(R).reduce((se,_e)=>{const Bn=_e==="disableStyle",Yn=_e==="settings",Sr=!!S.find(_o=>_o.split("_").includes(_e));if(!Bn&&!Yn&&!Sr||R[_e]===void 0||R.disableStyle===!0||R.disableStyle&&R.disableStyle.includes(_e))return se;if(_e==="strokeWidth"&&ei[_e]===void 0&&Fe(R,"points"))return se[_e]=R[_e],se;const{share:lr=!0}=R.settings&&R.settings[_e]||{},Wn=Xt&&lr?ei:ei[Qt]||{};return se[_e]=Fe(Wn,_e)?Wn[_e]:R[_e],se},{})),t.$$.dirty[4],524289&t.$$.dirty[0]|2048&t.$$.dirty[3]|2&t.$$.dirty[4]&&(Ye?((se,_e,Bn)=>{const Yn=Ce[se],Sr=Yn?Yn[_e]:{};Mi.set({...Ce,[se]:{...Yn,[_e]:{...Sr,...Bn}}})})(fr,Qt,A):(me=fr,Mi.set({[me]:{}}))),16&t.$$.dirty[1]|134217728&t.$$.dirty[3]|16777218&t.$$.dirty[4]&&n(31,E=St&&U?v||A:void 0),1&t.$$.dirty[1]|8388608&t.$$.dirty[4]&&E&&E.lineEnd&&!st&&console.warn(`Set shapePreprocessor property to draw lineStart and lineEnd styles.
https://pqina.nl/pintura/docs/v8/api/exports/#createshapepreprocessor`),1&t.$$.dirty[0]|4&t.$$.dirty[4]&&n(48,M=Fe(R,"eraseRadius")||Fe(R,"points")&&!Fe(R,"pathClose")||Qt==="move"||Qt==="view"),64&t.$$.dirty[1]|4&t.$$.dirty[4]&&n(47,P=R&&R.eraseRadius!==void 0?oi(R.eraseRadius,xt):void 0),16&t.$$.dirty[1]|4194304&t.$$.dirty[4]&&n(130,_=U&&ke.includes(32)),1&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(131,y=U&&Qt==="view"),192&t.$$.dirty[4]&&n(128,z=y||_),48&t.$$.dirty[4]&&n(127,O=!!z&&(!!T||su(document.activeElement))),16&t.$$.dirty[1]|24&t.$$.dirty[4]&&Ao.set(!U||z&&!O),16&t.$$.dirty[1]|8&t.$$.dirty[4]&&Wi.set(!U||!O),64&t.$$.dirty[1]|6&t.$$.dirty[4]&&n(121,I=R.cursorStyle?(({cursorStyle:se,cursorSize:_e},Bn,Yn)=>{let Sr;const lr=Bn[_e];if(lr===void 0?Sr=oi(_e,Yn):Sn(lr)?Sr=lr:Ve(lr)&&(Sr=RC(_e,Bn[_e],Yn),_e==="strokeWidth"&&(Sr*=.5)),!(Sr<=0||Sr===void 0))return{size:Sr,style:se}})(R,{...R,...A},xt):void 0),67108864&t.$$.dirty[3]|2097152&t.$$.dirty[4]&&n(122,k=Kr&&(sn=Ae,(Tn=Kr).x>=0&&Tn.y>=0&&Tn.x<=sn.width&&Tn.y<=sn.height)),524288&t.$$.dirty[0]|160&t.$$.dirty[1]|1929379840&t.$$.dirty[3]|1&t.$$.dirty[4])if(k&&!qo&&I&&!Ht){const se=I.size*ot.scale,_e={id:"cursor-"+fr,x:qr.x,y:qr.y,strokeWidth:.5,strokeColor:[0,0,0]};I.style==="ellipse"&&(_e.rx=se,_e.ry=se);const Bn={strokeWidth:2.5,strokeColor:[1,1,1],opacity:.75},Yn=[{..._e,...Bn},_e];if(m==="selection"&&r){const Sr=se,lr=qr.x+Sr,Wn=qr.y+Sr+4,_o={id:"cursor-"+fr,strokeWidth:.75,strokeColor:[0,0,0],points:[{x:lr,y:Wn},{x:lr+4,y:Wn}]};Yn.push({..._o,...Bn,strokeWidth:2,points:[{x:lr-.5,y:Wn},{x:lr+4.5,y:Wn}]},_o)}(Sr=>{ra.update(lr=>[...lr.filter(Wn=>Wn.id!=="cursor-"+fr),...Sr])})(Yn)}else ra.update(se=>se.filter(_e=>_e.id!=="cursor-"+fr));1&t.$$.dirty[0]|128&t.$$.dirty[1]|956301312&t.$$.dirty[3]&&n(46,G=k?((se,_e,Bn,Yn,Sr,lr)=>{if(Yn)return Sr?"grabbing":"grab";if(se&&!_e)return"none";if(!_e)return lr==="move"?"default":"crosshair";let Wn=_e||Bn;return dl(Wn)?Cm(Wn)?fn==="modal"?"default":"text":zd(Wn)?"move":"default":"default"})(I,qo,v,Ht,!1,Qt):"default"),264193&t.$$.dirty[0]|262144&t.$$.dirty[3]&&n(45,X=Qt==="preset"&&(mr.length>0||jt||Nn)),64&t.$$.dirty[1]&&(q=!Fe(xt,"x")&&!Fe(xt,"y")),524288&t.$$.dirty[4]&&n(44,lt=pe*So),262144&t.$$.dirty[3]|196608&t.$$.dirty[4]&&n(43,pt=It&&Nn?se=>lu(()=>Nn(se,Eo,{...yt},()=>ai.set({}))):ur),1048576&t.$$.dirty[3]&&n(42,Lt=Object.keys(Cr).reduce((se,_e)=>(_e==="beforeAddShape"||Cr[_e]===void 0||(se[_e]=Cr[_e]),se),{})),16&t.$$.dirty[1]&&(se=>{Jt&&ge.update(_e=>_e.map(Bn=>(Bn._prerender=!!se&&Cm(Bn),Bn)))})(U),131072&t.$$.dirty[3]|196608&t.$$.dirty[4]&&n(29,et=It&&_r([],yt,()=>ai.set({}))),536871424&t.$$.dirty[0]&&n(41,Y=!!et.length||!!Object.keys(at).some(se=>Pi.includes(se))),16&t.$$.dirty[1]|32768&t.$$.dirty[4]&&ft&&an.set(U?0:20),16384&t.$$.dirty[4]&&n(40,j=ct?`transform: translateY(${ct}px)`:void 0)},wo.set(!1),[Qt,he,K,Gt,we,ge,Ge,Qe,fn,at,At,jt,rt,de,ue,wn,Zn,ne,mr,fr,Ur,$r,Er,ir,Jr,hi,jr,In,io,et,D,E,s,i,c,U,ot,xt,Ht,dn,j,Y,Lt,pt,lt,X,G,P,M,C,b,$,h,u,o,Ee,Ne,qe,Gr,mi,Wr,Mi,ti,On,Hr,xo,ba,xr,ar,ra,Hi,eo,ia,Lo,Ua,jo,no,ji,({index:H},me)=>{n(26,jr=H),n(0,Qt=ki[H])},({value:H},me)=>{n(0,Qt=H),(Dt||/enter/i.test(me.key))&&qi(H)},H=>{if(Qt==="eraser")Ir=In.eraseShape();else if(Qt&&or[Qt]){const[me,Tn={}]=or[Qt],{drawMode:sn}=E;m==="selection"&&sn==="new"&&Gr.set([]);let se={};m==="selection"&&(D("selectiondown",[...St]),r&&(Do=me.drawMode,se.drawMode="subtract")),Ir=In.createShape({...me,...A,...se},Tn)}else Ir=void 0;return!!Ir&&(Ir.start(H),!0)},H=>!!Ir&&(Ir.update(H),!0),H=>!!Ir&&(Ir.release(H),!0),H=>!!Ir&&(Ir.cancel(H),Ir=void 0,!0),H=>{if(!Ir)return!1;if(Ir.end(H),Ir=void 0,m==="selection"){if(H.detail.isTap){const[sn]=or[Qt];sn.bitmap||Gr.set([])}D("selectionup",[...St])}const me=In.getMarkupItemDraft(),Tn=te&&(ee===!0||Array.isArray(ee)&&ee.includes(Qt));return me&&!me.isEditing||!Tn||n(0,Qt="move"),!0},H=>{const{key:me}=H,Tn=In.getMarkupItemDraft();/escape/i.test(me)&&Tn&&(H.preventDefault(),H.stopPropagation(),In.discardMarkupItemDraft(),Ir=void 0),/enter/i.test(me)&&Tn&&(H.preventDefault(),H.stopPropagation(),ni(Tn),Ir=void 0)},function(H){Object.keys(H).forEach(me=>{const{retain:Tn=!0,share:sn=!0}=R.settings&&R.settings[me]||{};Tn&&(Xt&&sn?n(116,ei[me]=H[me],ei):(ei[Qt]||n(116,ei[Qt]={},ei),n(116,ei[Qt][me]=H[me],ei)))}),D("selectstyle",H),v&&(In.updateMarkupShape(v,H),clearTimeout(To),To=setTimeout(()=>{Qr()},200))},(H,me,Tn)=>{n(118,qr=me),n(119,Kr=Tn)},()=>{n(119,Kr=void 0),n(118,qr=void 0)},H=>{D("markuptap",H)},H=>n(117,qo=H),()=>{ro=!1},(H,me)=>{if(ro)return;const{beforeAddShape:Tn=()=>!0}=Cr,sn=Ii(me),se=In.getMarkupItemDraft(),_e=Kp(Wt,{x:sn.x+(xt.x||0),y:sn.y+(xt.y||0)});if(se&&!_e&&In.discardMarkupItemDraft(),_e){if(!se){const Bn=Iy(H,Wt),Yn=Yo(Bn,sn);return Tn(Yn)?(m0(Yn),void In.addShape(Yn)):(ro=!0,void me.preventDefault())}Qo(se)&&(sn.x-=.5*se.width,sn.y-=.5*se.height),H.shape&&(Fe(H.shape,"x")&&(sn.x=H.shape.x),Fe(H.shape,"y")&&(sn.y=H.shape.y)),In.updateMarkupShape(se,sn)}},(H,me)=>{if(ro)return;const Tn=Ii(me);if(!Kp(Wt,{x:Tn.x+(xt.x||0),y:Tn.y+(xt.y||0)}))return void In.discardMarkupItemDraft();const sn=In.confirmMarkupItemDraft();In.selectShape(sn),D("addshape",sn),ya.write()},H=>Eo(H),H=>{return me=H.detail.resources,Tn=Ii(H.detail.event),me.forEach(sn=>Eo(sn,Tn));var me,Tn},H=>{if(!Ie)return!0;const me=rectClone(Mt);return rectScale(me,1/Se),rectTranslate(me,Q),rectScale(me,ot.scale),Ie(H,{...me,x:me.x+mt.x,y:me.y+mt.y})},Qr,ai,Pi,an,ce,Nt,Pe,Ye,Dt,ee,te,on,Xt,_r,Nn,Ie,Cr,or,ki,ei,qo,qr,Kr,v,I,k,r,m,A,R,O,z,T,_,y,S,f,l,d,p,a,ct,ft,yt,It,Jt,pe,mt,Ae,ke,st,St,Te,Ut,function(H){go.call(this,t,H)},H=>H[0]===Qt,(H,me,Tn)=>{const sn=H.filter(([,se])=>!Pi.includes(se));return ne?ne(sn,me,Tn):sn},H=>H[0]===jr,H=>{Promise.resolve().then(()=>{D("addshape",H),Qr()})},H=>{D("selectshape",H)},H=>{Promise.resolve().then(()=>{D("blurshape",H)})},H=>{D("tapshape",H)},H=>{D("updateshape",H),Qr()},H=>{D("removeshape",H),Qr()},function(H){zn[H?"unshift":"push"](()=>{In=H,n(27,In)})},function(H){zn[H?"unshift":"push"](()=>{io=H,n(28,io)})},H=>H.filter(([,me])=>Pi.includes(me)),function(H){go.call(this,t,H)}]}class Vh extends mn{constructor(e){super(),hn(this,e,pA,uA,rn,{isActive:1,isActiveFraction:2,isVisible:3,stores:101,locale:4,shapes:5,toolbar:102,toolShapes:103,toolActive:0,toolSelectRadius:6,toolRetainStyles:104,toolbarLayout:7,textInputMode:8,shapeControls:9,enableButtonFlipVertical:10,enablePresetSelectImage:11,enablePresetDropImage:12,enableSelectToolToAddShape:105,enableAutoSelectMoveTool:106,enableTapToAddText:13,enableMoveTool:107,enableViewTool:108,enableToolShareStyles:109,gridSize:14,snapThreshold:15,enableSnapToContext:16,willRenderHeaderTools:110,willRenderPresetToolbar:111,willRenderShapeStyleControls:17,willStartInteraction:112,shapePresets:18,utilKey:19,mapScreenPointToImagePoint:20,mapImagePointToScreenPoint:21,imageRotation:22,imageFlipX:23,imageFlipY:24,parentRect:25,hooks:113},null,[-1,-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),F()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),F()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),F()}get stores(){return this.$$.ctx[101]}set stores(e){this.$$set({stores:e}),F()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),F()}get shapes(){return this.$$.ctx[5]}set shapes(e){this.$$set({shapes:e}),F()}get toolbar(){return this.$$.ctx[102]}set toolbar(e){this.$$set({toolbar:e}),F()}get toolShapes(){return this.$$.ctx[103]}set toolShapes(e){this.$$set({toolShapes:e}),F()}get toolActive(){return this.$$.ctx[0]}set toolActive(e){this.$$set({toolActive:e}),F()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(e){this.$$set({toolSelectRadius:e}),F()}get toolRetainStyles(){return this.$$.ctx[104]}set toolRetainStyles(e){this.$$set({toolRetainStyles:e}),F()}get toolbarLayout(){return this.$$.ctx[7]}set toolbarLayout(e){this.$$set({toolbarLayout:e}),F()}get textInputMode(){return this.$$.ctx[8]}set textInputMode(e){this.$$set({textInputMode:e}),F()}get shapeControls(){return this.$$.ctx[9]}set shapeControls(e){this.$$set({shapeControls:e}),F()}get enableButtonFlipVertical(){return this.$$.ctx[10]}set enableButtonFlipVertical(e){this.$$set({enableButtonFlipVertical:e}),F()}get enablePresetSelectImage(){return this.$$.ctx[11]}set enablePresetSelectImage(e){this.$$set({enablePresetSelectImage:e}),F()}get enablePresetDropImage(){return this.$$.ctx[12]}set enablePresetDropImage(e){this.$$set({enablePresetDropImage:e}),F()}get enableSelectToolToAddShape(){return this.$$.ctx[105]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),F()}get enableAutoSelectMoveTool(){return this.$$.ctx[106]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),F()}get enableTapToAddText(){return this.$$.ctx[13]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),F()}get enableMoveTool(){return this.$$.ctx[107]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),F()}get enableViewTool(){return this.$$.ctx[108]}set enableViewTool(e){this.$$set({enableViewTool:e}),F()}get enableToolShareStyles(){return this.$$.ctx[109]}set enableToolShareStyles(e){this.$$set({enableToolShareStyles:e}),F()}get gridSize(){return this.$$.ctx[14]}set gridSize(e){this.$$set({gridSize:e}),F()}get snapThreshold(){return this.$$.ctx[15]}set snapThreshold(e){this.$$set({snapThreshold:e}),F()}get enableSnapToContext(){return this.$$.ctx[16]}set enableSnapToContext(e){this.$$set({enableSnapToContext:e}),F()}get willRenderHeaderTools(){return this.$$.ctx[110]}set willRenderHeaderTools(e){this.$$set({willRenderHeaderTools:e}),F()}get willRenderPresetToolbar(){return this.$$.ctx[111]}set willRenderPresetToolbar(e){this.$$set({willRenderPresetToolbar:e}),F()}get willRenderShapeStyleControls(){return this.$$.ctx[17]}set willRenderShapeStyleControls(e){this.$$set({willRenderShapeStyleControls:e}),F()}get willStartInteraction(){return this.$$.ctx[112]}set willStartInteraction(e){this.$$set({willStartInteraction:e}),F()}get shapePresets(){return this.$$.ctx[18]}set shapePresets(e){this.$$set({shapePresets:e}),F()}get utilKey(){return this.$$.ctx[19]}set utilKey(e){this.$$set({utilKey:e}),F()}get mapScreenPointToImagePoint(){return this.$$.ctx[20]}set mapScreenPointToImagePoint(e){this.$$set({mapScreenPointToImagePoint:e}),F()}get mapImagePointToScreenPoint(){return this.$$.ctx[21]}set mapImagePointToScreenPoint(e){this.$$set({mapImagePointToScreenPoint:e}),F()}get imageRotation(){return this.$$.ctx[22]}set imageRotation(e){this.$$set({imageRotation:e}),F()}get imageFlipX(){return this.$$.ctx[23]}set imageFlipX(e){this.$$set({imageFlipX:e}),F()}get imageFlipY(){return this.$$.ctx[24]}set imageFlipY(e){this.$$set({imageFlipY:e}),F()}get parentRect(){return this.$$.ctx[25]}set parentRect(e){this.$$set({parentRect:e}),F()}get hooks(){return this.$$.ctx[113]}set hooks(e){this.$$set({hooks:e}),F()}}var Zf=(t,e,n,r,i,o,a,s,l)=>{const c=Ue(t),d=.5*n.width,u=.5*n.height,p=.5*e.width,h=.5*e.height,f=i.x+r.x,m=i.y+r.y;s&&(c.x=n.width-c.x),l&&(c.y=n.height-c.y);const $=Math.cos(o),b=Math.sin(o);c.x-=d,c.y-=u;const S=c.x*$-c.y*b,v=c.x*b+c.y*$;c.x=d+S,c.y=u+v,c.x*=a,c.y*=a,c.x+=p,c.y+=h,c.x+=f,c.y+=m,c.x-=d*a,c.y-=u*a;const T=(i.x-f)*a,C=(i.y-m)*a,R=T*$-C*b,A=T*b+C*$;return c.x+=R,c.y+=A,c},Kf=(t,e,n,r,i,o,a,s,l)=>{const c=Ue(t),d=Jc(n),u=Jc(e),p=dt(i.x+r.x,i.y+r.y),h=Math.cos(o),f=Math.sin(o);c.x-=u.x,c.y-=u.y;const m=(i.x-p.x)*a,$=(i.y-p.y)*a,b=m*h-$*f,S=m*f+$*h;c.x-=b,c.y-=S,c.x-=p.x,c.y-=p.y,c.x/=a,c.y/=a;const v=c.x*h+c.y*f,T=c.x*f-c.y*h;return c.x=v,c.y=-T,c.x+=d.x,c.y+=d.y,s&&(c.x=n.width-c.x),l&&(c.y=n.height-c.y),c},id=t=>typeof t=="boolean";function hA(t){let e,n,r;function i(a){t[58](a)}let o={utilKey:"annotate",stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[43],mapImagePointToScreenPoint:t[42],imageRotation:t[44],imageFlipX:t[41],imageFlipY:t[40],shapes:t[46],toolbar:t[20]||t[6],toolShapes:t[21]||t[7],toolRetainStyles:t[8],enableSelectToolToAddShape:t[29],enableTapToAddText:t[30],enableViewTool:t[28],enableMoveTool:t[32],enableAutoSelectMoveTool:t[31],snapThreshold:t[15],gridSize:Sn(t[17])?t[17]:t[14],enableSnapToContext:id(t[18])?t[18]:t[16],enableToolShareStyles:t[12],shapeControls:t[22]||t[9],shapePresets:t[26],enableButtonFlipVertical:t[23],parentRect:t[47],enablePresetDropImage:t[25],enablePresetSelectImage:t[24],toolSelectRadius:t[10],textInputMode:t[11],willStartInteraction:t[13],willRenderPresetToolbar:t[27]||t[19],hooks:{willRenderShapeControls:t[33],willRenderShapeTextControls:t[34],beforeAddShape:t[35],beforeRemoveShape:t[36],beforeDeselectShape:t[37],beforeSelectShape:t[38],beforeUpdateShape:t[39]}};return t[0]!==void 0&&(o.toolActive=t[0]),e=new Vh({props:o}),zn.push(()=>Go(e,"toolActive",i)),e.$on("measure",t[59]),{c(){zt(e.$$.fragment)},m(a,s){Ft(e,a,s),r=!0},p(a,s){const l={};16&s[0]&&(l.stores=a[4]),32&s[0]&&(l.locale=a[5]),2&s[0]&&(l.isActive=a[1]),4&s[0]&&(l.isActiveFraction=a[2]),8&s[0]&&(l.isVisible=a[3]),4096&s[1]&&(l.mapScreenPointToImagePoint=a[43]),2048&s[1]&&(l.mapImagePointToScreenPoint=a[42]),8192&s[1]&&(l.imageRotation=a[44]),1024&s[1]&&(l.imageFlipX=a[41]),512&s[1]&&(l.imageFlipY=a[40]),1048640&s[0]&&(l.toolbar=a[20]||a[6]),2097280&s[0]&&(l.toolShapes=a[21]||a[7]),256&s[0]&&(l.toolRetainStyles=a[8]),536870912&s[0]&&(l.enableSelectToolToAddShape=a[29]),1073741824&s[0]&&(l.enableTapToAddText=a[30]),268435456&s[0]&&(l.enableViewTool=a[28]),2&s[1]&&(l.enableMoveTool=a[32]),1&s[1]&&(l.enableAutoSelectMoveTool=a[31]),32768&s[0]&&(l.snapThreshold=a[15]),147456&s[0]&&(l.gridSize=Sn(a[17])?a[17]:a[14]),327680&s[0]&&(l.enableSnapToContext=id(a[18])?a[18]:a[16]),4096&s[0]&&(l.enableToolShareStyles=a[12]),4194816&s[0]&&(l.shapeControls=a[22]||a[9]),67108864&s[0]&&(l.shapePresets=a[26]),8388608&s[0]&&(l.enableButtonFlipVertical=a[23]),33554432&s[0]&&(l.enablePresetDropImage=a[25]),16777216&s[0]&&(l.enablePresetSelectImage=a[24]),1024&s[0]&&(l.toolSelectRadius=a[10]),2048&s[0]&&(l.textInputMode=a[11]),8192&s[0]&&(l.willStartInteraction=a[13]),134742016&s[0]&&(l.willRenderPresetToolbar=a[27]||a[19]),508&s[1]&&(l.hooks={willRenderShapeControls:a[33],willRenderShapeTextControls:a[34],beforeAddShape:a[35],beforeRemoveShape:a[36],beforeDeselectShape:a[37],beforeSelectShape:a[38],beforeUpdateShape:a[39]}),!n&&1&s[0]&&(n=!0,l.toolActive=a[0],ta(()=>n=!1)),e.$set(l)},i(a){r||(L(e.$$.fragment,a),r=!0)},o(a){W(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function mA(t,e,n){let r,i,o,a,s,l,c,d,u,{isActive:p}=e,{isActiveFraction:h}=e,{isVisible:f}=e,{stores:m}=e,{locale:$={}}=e,{markupEditorToolbar:b}=e,{markupEditorToolStyles:S}=e,{markupEditorToolRetainStyles:v}=e,{markupEditorShapeStyleControls:T}=e,{markupEditorToolSelectRadius:C}=e,{markupEditorTextInputMode:R}=e,{markupEditorToolShareStyles:A}=e,{markupEditorWillStartInteraction:E}=e,{markupEditorGridSize:M=0}=e,{markupEditorSnapThreshold:P=0}=e,{markupEditorSnapToContext:_=!1}=e,{annotateGridSize:y}=e,{annotateSnapToContext:z}=e,{willRenderShapePresetToolbar:O}=e,{annotateTools:I}=e,{annotateToolShapes:k}=e,{annotateShapeControls:G}=e,{annotateActiveTool:X}=e,{annotateEnableButtonFlipVertical:q=!1}=e,{annotateEnableSelectImagePreset:D=!1}=e,{annotateEnableDropImagePreset:lt=!0}=e,{annotatePresets:pt=[]}=e,{annotateWillRenderShapePresetToolbar:Lt}=e,{enableViewTool:et}=e,{enableSelectToolToAddShape:Y}=e,{enableTapToAddText:j}=e,{enableAutoSelectMoveTool:ct}=e,{enableMoveTool:U}=e,{willRenderShapeControls:ft}=e,{willRenderShapeTextControls:yt}=e,{beforeAddShape:It}=e,{beforeRemoveShape:Jt}=e,{beforeDeselectShape:pe}=e,{beforeSelectShape:mt}=e,{beforeUpdateShape:ot}=e;const{rootRect:Q,imageAnnotation:Se,imageSize:Mt,imageRotation:xt,imageFlipX:Wt,imageFlipY:Ht,imageTransforms:Ae,imageTransformsInterpolated:ke}=m;return N(t,Q,st=>n(57,d=st)),N(t,Mt,st=>n(56,c=st)),N(t,xt,st=>n(44,u=st)),N(t,Wt,st=>n(41,a=st)),N(t,Ht,st=>n(40,o=st)),N(t,Ae,st=>n(55,l=st)),N(t,ke,st=>n(54,s=st)),t.$$set=st=>{"isActive"in st&&n(1,p=st.isActive),"isActiveFraction"in st&&n(2,h=st.isActiveFraction),"isVisible"in st&&n(3,f=st.isVisible),"stores"in st&&n(4,m=st.stores),"locale"in st&&n(5,$=st.locale),"markupEditorToolbar"in st&&n(6,b=st.markupEditorToolbar),"markupEditorToolStyles"in st&&n(7,S=st.markupEditorToolStyles),"markupEditorToolRetainStyles"in st&&n(8,v=st.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in st&&n(9,T=st.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in st&&n(10,C=st.markupEditorToolSelectRadius),"markupEditorTextInputMode"in st&&n(11,R=st.markupEditorTextInputMode),"markupEditorToolShareStyles"in st&&n(12,A=st.markupEditorToolShareStyles),"markupEditorWillStartInteraction"in st&&n(13,E=st.markupEditorWillStartInteraction),"markupEditorGridSize"in st&&n(14,M=st.markupEditorGridSize),"markupEditorSnapThreshold"in st&&n(15,P=st.markupEditorSnapThreshold),"markupEditorSnapToContext"in st&&n(16,_=st.markupEditorSnapToContext),"annotateGridSize"in st&&n(17,y=st.annotateGridSize),"annotateSnapToContext"in st&&n(18,z=st.annotateSnapToContext),"willRenderShapePresetToolbar"in st&&n(19,O=st.willRenderShapePresetToolbar),"annotateTools"in st&&n(20,I=st.annotateTools),"annotateToolShapes"in st&&n(21,k=st.annotateToolShapes),"annotateShapeControls"in st&&n(22,G=st.annotateShapeControls),"annotateActiveTool"in st&&n(0,X=st.annotateActiveTool),"annotateEnableButtonFlipVertical"in st&&n(23,q=st.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in st&&n(24,D=st.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in st&&n(25,lt=st.annotateEnableDropImagePreset),"annotatePresets"in st&&n(26,pt=st.annotatePresets),"annotateWillRenderShapePresetToolbar"in st&&n(27,Lt=st.annotateWillRenderShapePresetToolbar),"enableViewTool"in st&&n(28,et=st.enableViewTool),"enableSelectToolToAddShape"in st&&n(29,Y=st.enableSelectToolToAddShape),"enableTapToAddText"in st&&n(30,j=st.enableTapToAddText),"enableAutoSelectMoveTool"in st&&n(31,ct=st.enableAutoSelectMoveTool),"enableMoveTool"in st&&n(32,U=st.enableMoveTool),"willRenderShapeControls"in st&&n(33,ft=st.willRenderShapeControls),"willRenderShapeTextControls"in st&&n(34,yt=st.willRenderShapeTextControls),"beforeAddShape"in st&&n(35,It=st.beforeAddShape),"beforeRemoveShape"in st&&n(36,Jt=st.beforeRemoveShape),"beforeDeselectShape"in st&&n(37,pe=st.beforeDeselectShape),"beforeSelectShape"in st&&n(38,mt=st.beforeSelectShape),"beforeUpdateShape"in st&&n(39,ot=st.beforeUpdateShape)},t.$$.update=()=>{125830656&t.$$.dirty[1]&&n(43,r=st=>Kf(st,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),125830656&t.$$.dirty[1]&&n(42,i=st=>Zf(st,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[X,p,h,f,m,$,b,S,v,T,C,R,A,E,M,P,_,y,z,O,I,k,G,q,D,lt,pt,Lt,et,Y,j,ct,U,ft,yt,It,Jt,pe,mt,ot,o,a,i,r,u,Q,Se,Mt,xt,Wt,Ht,Ae,ke,"annotate",s,l,c,d,function(st){X=st,n(0,X)},function(st){go.call(this,t,st)}]}var fA={util:["annotate",class extends mn{constructor(t){super(),hn(this,t,mA,hA,rn,{name:53,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,markupEditorWillStartInteraction:13,markupEditorGridSize:14,markupEditorSnapThreshold:15,markupEditorSnapToContext:16,annotateGridSize:17,annotateSnapToContext:18,willRenderShapePresetToolbar:19,annotateTools:20,annotateToolShapes:21,annotateShapeControls:22,annotateActiveTool:0,annotateEnableButtonFlipVertical:23,annotateEnableSelectImagePreset:24,annotateEnableDropImagePreset:25,annotatePresets:26,annotateWillRenderShapePresetToolbar:27,enableViewTool:28,enableSelectToolToAddShape:29,enableTapToAddText:30,enableAutoSelectMoveTool:31,enableMoveTool:32,willRenderShapeControls:33,willRenderShapeTextControls:34,beforeAddShape:35,beforeRemoveShape:36,beforeDeselectShape:37,beforeSelectShape:38,beforeUpdateShape:39},null,[-1,-1])}get name(){return this.$$.ctx[53]}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$$set({isActive:t}),F()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),F()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$$set({isVisible:t}),F()}get stores(){return this.$$.ctx[4]}set stores(t){this.$$set({stores:t}),F()}get locale(){return this.$$.ctx[5]}set locale(t){this.$$set({locale:t}),F()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),F()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),F()}get markupEditorToolRetainStyles(){return this.$$.ctx[8]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),F()}get markupEditorShapeStyleControls(){return this.$$.ctx[9]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),F()}get markupEditorToolSelectRadius(){return this.$$.ctx[10]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),F()}get markupEditorTextInputMode(){return this.$$.ctx[11]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),F()}get markupEditorToolShareStyles(){return this.$$.ctx[12]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),F()}get markupEditorWillStartInteraction(){return this.$$.ctx[13]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),F()}get markupEditorGridSize(){return this.$$.ctx[14]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),F()}get markupEditorSnapThreshold(){return this.$$.ctx[15]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),F()}get markupEditorSnapToContext(){return this.$$.ctx[16]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),F()}get annotateGridSize(){return this.$$.ctx[17]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),F()}get annotateSnapToContext(){return this.$$.ctx[18]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),F()}get willRenderShapePresetToolbar(){return this.$$.ctx[19]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),F()}get annotateTools(){return this.$$.ctx[20]}set annotateTools(t){this.$$set({annotateTools:t}),F()}get annotateToolShapes(){return this.$$.ctx[21]}set annotateToolShapes(t){this.$$set({annotateToolShapes:t}),F()}get annotateShapeControls(){return this.$$.ctx[22]}set annotateShapeControls(t){this.$$set({annotateShapeControls:t}),F()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(t){this.$$set({annotateActiveTool:t}),F()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[23]}set annotateEnableButtonFlipVertical(t){this.$$set({annotateEnableButtonFlipVertical:t}),F()}get annotateEnableSelectImagePreset(){return this.$$.ctx[24]}set annotateEnableSelectImagePreset(t){this.$$set({annotateEnableSelectImagePreset:t}),F()}get annotateEnableDropImagePreset(){return this.$$.ctx[25]}set annotateEnableDropImagePreset(t){this.$$set({annotateEnableDropImagePreset:t}),F()}get annotatePresets(){return this.$$.ctx[26]}set annotatePresets(t){this.$$set({annotatePresets:t}),F()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[27]}set annotateWillRenderShapePresetToolbar(t){this.$$set({annotateWillRenderShapePresetToolbar:t}),F()}get enableViewTool(){return this.$$.ctx[28]}set enableViewTool(t){this.$$set({enableViewTool:t}),F()}get enableSelectToolToAddShape(){return this.$$.ctx[29]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),F()}get enableTapToAddText(){return this.$$.ctx[30]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),F()}get enableAutoSelectMoveTool(){return this.$$.ctx[31]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),F()}get enableMoveTool(){return this.$$.ctx[32]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),F()}get willRenderShapeControls(){return this.$$.ctx[33]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),F()}get willRenderShapeTextControls(){return this.$$.ctx[34]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),F()}get beforeAddShape(){return this.$$.ctx[35]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),F()}get beforeRemoveShape(){return this.$$.ctx[36]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),F()}get beforeDeselectShape(){return this.$$.ctx[37]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),F()}get beforeSelectShape(){return this.$$.ctx[38]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),F()}get beforeUpdateShape(){return this.$$.ctx[39]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),F()}}]};function gA(t){let e,n,r;function i(a){t[50](a)}let o={stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[41],mapImagePointToScreenPoint:t[40],utilKey:"decorate",shapes:t[43],toolbar:t[19]||t[6],toolShapes:t[20]||t[7],toolRetainStyles:t[8],shapeControls:t[21]||t[9],shapePresets:t[25],enableSelectToolToAddShape:t[27],enableTapToAddText:t[28],enableViewTool:t[29],enableMoveTool:t[30],enableAutoSelectMoveTool:t[31],snapThreshold:t[15],gridSize:Sn(t[17])?t[17]:t[14],enableSnapToContext:id(t[18])?t[18]:t[16],enableToolShareStyles:t[12],enablePresetSelectImage:t[23],enablePresetDropImage:t[24],enableButtonFlipVertical:t[22],parentRect:t[42],toolSelectRadius:t[10],textInputMode:t[11],willStartInteraction:t[39],willRenderPresetToolbar:t[26]||t[13],hooks:{willRenderShapeControls:t[32],willRenderShapeTextControls:t[33],beforeAddShape:t[34],beforeRemoveShape:t[35],beforeDeselectShape:t[36],beforeSelectShape:t[37],beforeUpdateShape:t[38]}};return t[0]!==void 0&&(o.toolActive=t[0]),e=new Vh({props:o}),zn.push(()=>Go(e,"toolActive",i)),e.$on("measure",t[51]),{c(){zt(e.$$.fragment)},m(a,s){Ft(e,a,s),r=!0},p(a,s){const l={};16&s[0]&&(l.stores=a[4]),32&s[0]&&(l.locale=a[5]),2&s[0]&&(l.isActive=a[1]),4&s[0]&&(l.isActiveFraction=a[2]),8&s[0]&&(l.isVisible=a[3]),1024&s[1]&&(l.mapScreenPointToImagePoint=a[41]),512&s[1]&&(l.mapImagePointToScreenPoint=a[40]),524352&s[0]&&(l.toolbar=a[19]||a[6]),1048704&s[0]&&(l.toolShapes=a[20]||a[7]),256&s[0]&&(l.toolRetainStyles=a[8]),2097664&s[0]&&(l.shapeControls=a[21]||a[9]),33554432&s[0]&&(l.shapePresets=a[25]),134217728&s[0]&&(l.enableSelectToolToAddShape=a[27]),268435456&s[0]&&(l.enableTapToAddText=a[28]),536870912&s[0]&&(l.enableViewTool=a[29]),1073741824&s[0]&&(l.enableMoveTool=a[30]),1&s[1]&&(l.enableAutoSelectMoveTool=a[31]),32768&s[0]&&(l.snapThreshold=a[15]),147456&s[0]&&(l.gridSize=Sn(a[17])?a[17]:a[14]),327680&s[0]&&(l.enableSnapToContext=id(a[18])?a[18]:a[16]),4096&s[0]&&(l.enableToolShareStyles=a[12]),8388608&s[0]&&(l.enablePresetSelectImage=a[23]),16777216&s[0]&&(l.enablePresetDropImage=a[24]),4194304&s[0]&&(l.enableButtonFlipVertical=a[22]),1024&s[0]&&(l.toolSelectRadius=a[10]),2048&s[0]&&(l.textInputMode=a[11]),256&s[1]&&(l.willStartInteraction=a[39]),67117056&s[0]&&(l.willRenderPresetToolbar=a[26]||a[13]),254&s[1]&&(l.hooks={willRenderShapeControls:a[32],willRenderShapeTextControls:a[33],beforeAddShape:a[34],beforeRemoveShape:a[35],beforeDeselectShape:a[36],beforeSelectShape:a[37],beforeUpdateShape:a[38]}),!n&&1&s[0]&&(n=!0,l.toolActive=a[0],ta(()=>n=!1)),e.$set(l)},i(a){r||(L(e.$$.fragment,a),r=!0)},o(a){W(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function $A(t,e,n){let r,i,o,a,s,{isActive:l}=e,{isActiveFraction:c}=e,{isVisible:d}=e,{stores:u}=e,{locale:p={}}=e,{markupEditorToolbar:h}=e,{markupEditorToolStyles:f}=e,{markupEditorToolRetainStyles:m}=e,{markupEditorShapeStyleControls:$}=e,{markupEditorToolSelectRadius:b}=e,{markupEditorTextInputMode:S}=e,{markupEditorToolShareStyles:v}=e,{willRenderShapePresetToolbar:T}=e,{markupEditorGridSize:C}=e,{markupEditorSnapThreshold:R}=e,{markupEditorSnapToContext:A=!0}=e,{decorateGridSize:E}=e,{decorateSnapToContext:M}=e,{decorateTools:P}=e,{decorateToolShapes:_}=e,{decorateShapeControls:y}=e,{decorateActiveTool:z}=e,{decorateEnableButtonFlipVertical:O=!1}=e,{decorateEnableSelectImagePreset:I=!1}=e,{decorateEnableDropImagePreset:k=!0}=e,{decoratePresets:G=[]}=e,{decorateWillRenderShapePresetToolbar:X}=e,{enableSelectToolToAddShape:q}=e,{enableTapToAddText:D}=e,{enableViewTool:lt}=e,{enableMoveTool:pt}=e,{enableAutoSelectMoveTool:Lt}=e,{willRenderShapeControls:et}=e,{willRenderShapeTextControls:Y}=e,{beforeAddShape:j}=e,{beforeRemoveShape:ct}=e,{beforeDeselectShape:U}=e,{beforeSelectShape:ft}=e,{beforeUpdateShape:yt}=e,{markupEditorWillStartInteraction:It}=e;const{imageCropRect:Jt,imageDecoration:pe,imageSelectionRectPresentation:mt,imageTransformsInterpolated:ot}=u;return N(t,mt,Q=>n(48,a=Q)),N(t,ot,Q=>n(49,s=Q)),t.$$set=Q=>{"isActive"in Q&&n(1,l=Q.isActive),"isActiveFraction"in Q&&n(2,c=Q.isActiveFraction),"isVisible"in Q&&n(3,d=Q.isVisible),"stores"in Q&&n(4,u=Q.stores),"locale"in Q&&n(5,p=Q.locale),"markupEditorToolbar"in Q&&n(6,h=Q.markupEditorToolbar),"markupEditorToolStyles"in Q&&n(7,f=Q.markupEditorToolStyles),"markupEditorToolRetainStyles"in Q&&n(8,m=Q.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in Q&&n(9,$=Q.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in Q&&n(10,b=Q.markupEditorToolSelectRadius),"markupEditorTextInputMode"in Q&&n(11,S=Q.markupEditorTextInputMode),"markupEditorToolShareStyles"in Q&&n(12,v=Q.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in Q&&n(13,T=Q.willRenderShapePresetToolbar),"markupEditorGridSize"in Q&&n(14,C=Q.markupEditorGridSize),"markupEditorSnapThreshold"in Q&&n(15,R=Q.markupEditorSnapThreshold),"markupEditorSnapToContext"in Q&&n(16,A=Q.markupEditorSnapToContext),"decorateGridSize"in Q&&n(17,E=Q.decorateGridSize),"decorateSnapToContext"in Q&&n(18,M=Q.decorateSnapToContext),"decorateTools"in Q&&n(19,P=Q.decorateTools),"decorateToolShapes"in Q&&n(20,_=Q.decorateToolShapes),"decorateShapeControls"in Q&&n(21,y=Q.decorateShapeControls),"decorateActiveTool"in Q&&n(0,z=Q.decorateActiveTool),"decorateEnableButtonFlipVertical"in Q&&n(22,O=Q.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in Q&&n(23,I=Q.decorateEnableSelectImagePreset),"decorateEnableDropImagePreset"in Q&&n(24,k=Q.decorateEnableDropImagePreset),"decoratePresets"in Q&&n(25,G=Q.decoratePresets),"decorateWillRenderShapePresetToolbar"in Q&&n(26,X=Q.decorateWillRenderShapePresetToolbar),"enableSelectToolToAddShape"in Q&&n(27,q=Q.enableSelectToolToAddShape),"enableTapToAddText"in Q&&n(28,D=Q.enableTapToAddText),"enableViewTool"in Q&&n(29,lt=Q.enableViewTool),"enableMoveTool"in Q&&n(30,pt=Q.enableMoveTool),"enableAutoSelectMoveTool"in Q&&n(31,Lt=Q.enableAutoSelectMoveTool),"willRenderShapeControls"in Q&&n(32,et=Q.willRenderShapeControls),"willRenderShapeTextControls"in Q&&n(33,Y=Q.willRenderShapeTextControls),"beforeAddShape"in Q&&n(34,j=Q.beforeAddShape),"beforeRemoveShape"in Q&&n(35,ct=Q.beforeRemoveShape),"beforeDeselectShape"in Q&&n(36,U=Q.beforeDeselectShape),"beforeSelectShape"in Q&&n(37,ft=Q.beforeSelectShape),"beforeUpdateShape"in Q&&n(38,yt=Q.beforeUpdateShape),"markupEditorWillStartInteraction"in Q&&n(39,It=Q.markupEditorWillStartInteraction)},t.$$.update=()=>{262144&t.$$.dirty[1]&&n(47,r=s?s.scale:1),196608&t.$$.dirty[1]&&n(41,i=Q=>{const Se=Ue(Q);return Se.x-=a.x,Se.y-=a.y,Se.x/=r,Se.y/=r,Se}),196608&t.$$.dirty[1]&&n(40,o=Q=>{const Se=Ue(Q);return Se.x*=r,Se.y*=r,Se.x+=a.x,Se.y+=a.y,Se})},[z,l,c,d,u,p,h,f,m,$,b,S,v,T,C,R,A,E,M,P,_,y,O,I,k,G,X,q,D,lt,pt,Lt,et,Y,j,ct,U,ft,yt,It,o,i,Jt,pe,mt,ot,"decorate",r,a,s,function(Q){z=Q,n(0,z)},function(Q){go.call(this,t,Q)}]}var yA={util:["decorate",class extends mn{constructor(t){super(),hn(this,t,$A,gA,rn,{name:46,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,willRenderShapePresetToolbar:13,markupEditorGridSize:14,markupEditorSnapThreshold:15,markupEditorSnapToContext:16,decorateGridSize:17,decorateSnapToContext:18,decorateTools:19,decorateToolShapes:20,decorateShapeControls:21,decorateActiveTool:0,decorateEnableButtonFlipVertical:22,decorateEnableSelectImagePreset:23,decorateEnableDropImagePreset:24,decoratePresets:25,decorateWillRenderShapePresetToolbar:26,enableSelectToolToAddShape:27,enableTapToAddText:28,enableViewTool:29,enableMoveTool:30,enableAutoSelectMoveTool:31,willRenderShapeControls:32,willRenderShapeTextControls:33,beforeAddShape:34,beforeRemoveShape:35,beforeDeselectShape:36,beforeSelectShape:37,beforeUpdateShape:38,markupEditorWillStartInteraction:39},null,[-1,-1])}get name(){return this.$$.ctx[46]}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$$set({isActive:t}),F()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),F()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$$set({isVisible:t}),F()}get stores(){return this.$$.ctx[4]}set stores(t){this.$$set({stores:t}),F()}get locale(){return this.$$.ctx[5]}set locale(t){this.$$set({locale:t}),F()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),F()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),F()}get markupEditorToolRetainStyles(){return this.$$.ctx[8]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),F()}get markupEditorShapeStyleControls(){return this.$$.ctx[9]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),F()}get markupEditorToolSelectRadius(){return this.$$.ctx[10]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),F()}get markupEditorTextInputMode(){return this.$$.ctx[11]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),F()}get markupEditorToolShareStyles(){return this.$$.ctx[12]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),F()}get willRenderShapePresetToolbar(){return this.$$.ctx[13]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),F()}get markupEditorGridSize(){return this.$$.ctx[14]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),F()}get markupEditorSnapThreshold(){return this.$$.ctx[15]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),F()}get markupEditorSnapToContext(){return this.$$.ctx[16]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),F()}get decorateGridSize(){return this.$$.ctx[17]}set decorateGridSize(t){this.$$set({decorateGridSize:t}),F()}get decorateSnapToContext(){return this.$$.ctx[18]}set decorateSnapToContext(t){this.$$set({decorateSnapToContext:t}),F()}get decorateTools(){return this.$$.ctx[19]}set decorateTools(t){this.$$set({decorateTools:t}),F()}get decorateToolShapes(){return this.$$.ctx[20]}set decorateToolShapes(t){this.$$set({decorateToolShapes:t}),F()}get decorateShapeControls(){return this.$$.ctx[21]}set decorateShapeControls(t){this.$$set({decorateShapeControls:t}),F()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(t){this.$$set({decorateActiveTool:t}),F()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[22]}set decorateEnableButtonFlipVertical(t){this.$$set({decorateEnableButtonFlipVertical:t}),F()}get decorateEnableSelectImagePreset(){return this.$$.ctx[23]}set decorateEnableSelectImagePreset(t){this.$$set({decorateEnableSelectImagePreset:t}),F()}get decorateEnableDropImagePreset(){return this.$$.ctx[24]}set decorateEnableDropImagePreset(t){this.$$set({decorateEnableDropImagePreset:t}),F()}get decoratePresets(){return this.$$.ctx[25]}set decoratePresets(t){this.$$set({decoratePresets:t}),F()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[26]}set decorateWillRenderShapePresetToolbar(t){this.$$set({decorateWillRenderShapePresetToolbar:t}),F()}get enableSelectToolToAddShape(){return this.$$.ctx[27]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),F()}get enableTapToAddText(){return this.$$.ctx[28]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),F()}get enableViewTool(){return this.$$.ctx[29]}set enableViewTool(t){this.$$set({enableViewTool:t}),F()}get enableMoveTool(){return this.$$.ctx[30]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),F()}get enableAutoSelectMoveTool(){return this.$$.ctx[31]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),F()}get willRenderShapeControls(){return this.$$.ctx[32]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),F()}get willRenderShapeTextControls(){return this.$$.ctx[33]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),F()}get beforeAddShape(){return this.$$.ctx[34]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),F()}get beforeRemoveShape(){return this.$$.ctx[35]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),F()}get beforeDeselectShape(){return this.$$.ctx[36]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),F()}get beforeSelectShape(){return this.$$.ctx[37]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),F()}get beforeUpdateShape(){return this.$$.ctx[38]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),F()}get markupEditorWillStartInteraction(){return this.$$.ctx[39]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),F()}}]};function bA(t){let e,n;return e=new Vh({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[25],mapImagePointToScreenPoint:t[24],utilKey:"sticker",shapePresets:t[5],shapes:t[6]?t[34]:t[35],toolActive:"preset",imageFlipX:!!t[6]&&t[23],imageFlipY:!!t[6]&&t[22],imageRotation:t[6]?t[30]:0,parentRect:t[6]?t[36]:t[32],snapThreshold:t[28],gridSize:t[27],enableSnapToContext:t[26],enablePresetDropImage:t[7],enablePresetSelectImage:t[29],enableButtonFlipVertical:t[10]||t[8],toolSelectRadius:t[14],willStartInteraction:t[21],willRenderPresetToolbar:t[11]||t[9]||t[15],hooks:{willRenderShapeControls:t[12],willRenderShapeTextControls:t[13],beforeAddShape:t[16],beforeRemoveShape:t[17],beforeDeselectShape:t[18],beforeSelectShape:t[19],beforeUpdateShape:t[20]}}}),e.$on("measure",t[59]),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};8&i[0]&&(o.stores=r[3]),16&i[0]&&(o.locale=r[4]),1&i[0]&&(o.isActive=r[0]),2&i[0]&&(o.isActiveFraction=r[1]),4&i[0]&&(o.isVisible=r[2]),33554432&i[0]&&(o.mapScreenPointToImagePoint=r[25]),16777216&i[0]&&(o.mapImagePointToScreenPoint=r[24]),32&i[0]&&(o.shapePresets=r[5]),64&i[0]&&(o.shapes=r[6]?r[34]:r[35]),8388672&i[0]&&(o.imageFlipX=!!r[6]&&r[23]),4194368&i[0]&&(o.imageFlipY=!!r[6]&&r[22]),1073741888&i[0]&&(o.imageRotation=r[6]?r[30]:0),64&i[0]&&(o.parentRect=r[6]?r[36]:r[32]),268435456&i[0]&&(o.snapThreshold=r[28]),134217728&i[0]&&(o.gridSize=r[27]),67108864&i[0]&&(o.enableSnapToContext=r[26]),128&i[0]&&(o.enablePresetDropImage=r[7]),536870912&i[0]&&(o.enablePresetSelectImage=r[29]),1280&i[0]&&(o.enableButtonFlipVertical=r[10]||r[8]),16384&i[0]&&(o.toolSelectRadius=r[14]),2097152&i[0]&&(o.willStartInteraction=r[21]),35328&i[0]&&(o.willRenderPresetToolbar=r[11]||r[9]||r[15]),2043904&i[0]&&(o.hooks={willRenderShapeControls:r[12],willRenderShapeTextControls:r[13],beforeAddShape:r[16],beforeRemoveShape:r[17],beforeDeselectShape:r[18],beforeSelectShape:r[19],beforeUpdateShape:r[20]}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function vA(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,b,{isActive:S}=e,{isActiveFraction:v}=e,{isVisible:T}=e,{stores:C}=e,{locale:R={}}=e,{stickers:A=[]}=e,{stickerForceEnable:E=!1}=e,{stickerStickToImage:M=!1}=e,{stickerEnableSelectImagePreset:P=!0}=e,{stickerEnableDropImagePreset:_=!0}=e,{stickerEnableButtonFlipVertical:y=!1}=e,{stickerWillRenderShapePresetToolbar:z}=e,{stickerEnableSelectImage:O=!0}=e,{stickersEnableButtonFlipVertical:I=!1}=e,{stickersWillRenderShapePresetToolbar:k}=e,{markupEditorGridSize:G=0}=e,{markupEditorSnapThreshold:X=0}=e,{markupEditorSnapToContext:q=!1}=e,{annotateGridSize:D}=e,{annotateSnapToContext:lt}=e,{decorateGridSize:pt}=e,{decorateSnapToContext:Lt}=e,{willRenderShapeControls:et}=e,{willRenderShapeTextControls:Y}=e,{markupEditorToolSelectRadius:j}=e,{willRenderShapePresetToolbar:ct}=e,{beforeAddShape:U}=e,{beforeRemoveShape:ft}=e,{beforeDeselectShape:yt}=e,{beforeSelectShape:It}=e,{beforeUpdateShape:Jt}=e,{markupEditorWillStartInteraction:pe}=e;const{rootRect:mt,imageCropRect:ot,imageSelectionRectPresentation:Q,imageAnnotation:Se,imageDecoration:Mt,imageSize:xt,imageTransforms:Wt,imageTransformsInterpolated:Ht,imageRotation:Ae,imageFlipX:ke,imageFlipY:st}=C;return N(t,mt,St=>n(58,$=St)),N(t,Q,St=>n(54,d=St)),N(t,xt,St=>n(57,m=St)),N(t,Wt,St=>n(56,f=St)),N(t,Ht,St=>n(55,h=St)),N(t,Ae,St=>n(30,b=St)),N(t,ke,St=>n(23,p=St)),N(t,st,St=>n(22,u=St)),t.$$set=St=>{"isActive"in St&&n(0,S=St.isActive),"isActiveFraction"in St&&n(1,v=St.isActiveFraction),"isVisible"in St&&n(2,T=St.isVisible),"stores"in St&&n(3,C=St.stores),"locale"in St&&n(4,R=St.locale),"stickers"in St&&n(5,A=St.stickers),"stickerForceEnable"in St&&n(43,E=St.stickerForceEnable),"stickerStickToImage"in St&&n(6,M=St.stickerStickToImage),"stickerEnableSelectImagePreset"in St&&n(44,P=St.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in St&&n(7,_=St.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in St&&n(8,y=St.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in St&&n(9,z=St.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in St&&n(45,O=St.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in St&&n(10,I=St.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in St&&n(11,k=St.stickersWillRenderShapePresetToolbar),"markupEditorGridSize"in St&&n(46,G=St.markupEditorGridSize),"markupEditorSnapThreshold"in St&&n(47,X=St.markupEditorSnapThreshold),"markupEditorSnapToContext"in St&&n(48,q=St.markupEditorSnapToContext),"annotateGridSize"in St&&n(49,D=St.annotateGridSize),"annotateSnapToContext"in St&&n(50,lt=St.annotateSnapToContext),"decorateGridSize"in St&&n(51,pt=St.decorateGridSize),"decorateSnapToContext"in St&&n(52,Lt=St.decorateSnapToContext),"willRenderShapeControls"in St&&n(12,et=St.willRenderShapeControls),"willRenderShapeTextControls"in St&&n(13,Y=St.willRenderShapeTextControls),"markupEditorToolSelectRadius"in St&&n(14,j=St.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in St&&n(15,ct=St.willRenderShapePresetToolbar),"beforeAddShape"in St&&n(16,U=St.beforeAddShape),"beforeRemoveShape"in St&&n(17,ft=St.beforeRemoveShape),"beforeDeselectShape"in St&&n(18,yt=St.beforeDeselectShape),"beforeSelectShape"in St&&n(19,It=St.beforeSelectShape),"beforeUpdateShape"in St&&n(20,Jt=St.beforeUpdateShape),"markupEditorWillStartInteraction"in St&&n(21,pe=St.markupEditorWillStartInteraction)},t.$$.update=()=>{16777216&t.$$.dirty[1]&&n(53,r=h?h.scale:1),24576&t.$$.dirty[1]&&n(29,i=P!==!1&&O),65536&t.$$.dirty[1]&&n(28,o=X),64&t.$$.dirty[0]|1343488&t.$$.dirty[1]&&n(27,a=M?Sn(D)?D:G:Sn(pt)?pt:G),64&t.$$.dirty[0]|2752512&t.$$.dirty[1]&&n(26,s=M?id(lt)?lt:q:id(Lt)?Lt:q),12582976&t.$$.dirty[0]|264241152&t.$$.dirty[1]&&n(25,l=M?St=>Kf(St,$,m,h.origin,h.translation,f.rotation.z,h.scale,p,u):St=>{const Ce=Ue(St);return Ce.x-=d.x,Ce.y-=d.y,Ce.x/=r,Ce.y/=r,Ce}),12582976&t.$$.dirty[0]|264241152&t.$$.dirty[1]&&n(24,c=M?St=>Zf(St,$,m,h.origin,h.translation,f.rotation.z,h.scale,p,u):St=>{const Ce=Ue(St);return Ce.x*=r,Ce.y*=r,Ce.x+=d.x,Ce.y+=d.y,Ce})},[S,v,T,C,R,A,M,_,y,z,I,k,et,Y,j,ct,U,ft,yt,It,Jt,pe,u,p,c,l,s,a,o,i,b,mt,ot,Q,Se,Mt,xt,Wt,Ht,Ae,ke,st,"sticker",E,P,O,G,X,q,D,lt,pt,Lt,r,d,h,f,m,$,function(St){go.call(this,t,St)}]}var xA={util:["sticker",class extends mn{constructor(t){super(),hn(this,t,vA,bA,rn,{name:42,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerForceEnable:43,stickerStickToImage:6,stickerEnableSelectImagePreset:44,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:45,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,markupEditorGridSize:46,markupEditorSnapThreshold:47,markupEditorSnapToContext:48,annotateGridSize:49,annotateSnapToContext:50,decorateGridSize:51,decorateSnapToContext:52,willRenderShapeControls:12,willRenderShapeTextControls:13,markupEditorToolSelectRadius:14,willRenderShapePresetToolbar:15,beforeAddShape:16,beforeRemoveShape:17,beforeDeselectShape:18,beforeSelectShape:19,beforeUpdateShape:20,markupEditorWillStartInteraction:21},null,[-1,-1])}get name(){return this.$$.ctx[42]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),F()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),F()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),F()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),F()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),F()}get stickers(){return this.$$.ctx[5]}set stickers(t){this.$$set({stickers:t}),F()}get stickerForceEnable(){return this.$$.ctx[43]}set stickerForceEnable(t){this.$$set({stickerForceEnable:t}),F()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(t){this.$$set({stickerStickToImage:t}),F()}get stickerEnableSelectImagePreset(){return this.$$.ctx[44]}set stickerEnableSelectImagePreset(t){this.$$set({stickerEnableSelectImagePreset:t}),F()}get stickerEnableDropImagePreset(){return this.$$.ctx[7]}set stickerEnableDropImagePreset(t){this.$$set({stickerEnableDropImagePreset:t}),F()}get stickerEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickerEnableButtonFlipVertical(t){this.$$set({stickerEnableButtonFlipVertical:t}),F()}get stickerWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickerWillRenderShapePresetToolbar(t){this.$$set({stickerWillRenderShapePresetToolbar:t}),F()}get stickerEnableSelectImage(){return this.$$.ctx[45]}set stickerEnableSelectImage(t){this.$$set({stickerEnableSelectImage:t}),F()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[10]}set stickersEnableButtonFlipVertical(t){this.$$set({stickersEnableButtonFlipVertical:t}),F()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[11]}set stickersWillRenderShapePresetToolbar(t){this.$$set({stickersWillRenderShapePresetToolbar:t}),F()}get markupEditorGridSize(){return this.$$.ctx[46]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),F()}get markupEditorSnapThreshold(){return this.$$.ctx[47]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),F()}get markupEditorSnapToContext(){return this.$$.ctx[48]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),F()}get annotateGridSize(){return this.$$.ctx[49]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),F()}get annotateSnapToContext(){return this.$$.ctx[50]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),F()}get decorateGridSize(){return this.$$.ctx[51]}set decorateGridSize(t){this.$$set({decorateGridSize:t}),F()}get decorateSnapToContext(){return this.$$.ctx[52]}set decorateSnapToContext(t){this.$$set({decorateSnapToContext:t}),F()}get willRenderShapeControls(){return this.$$.ctx[12]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),F()}get willRenderShapeTextControls(){return this.$$.ctx[13]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),F()}get markupEditorToolSelectRadius(){return this.$$.ctx[14]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),F()}get willRenderShapePresetToolbar(){return this.$$.ctx[15]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),F()}get beforeAddShape(){return this.$$.ctx[16]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),F()}get beforeRemoveShape(){return this.$$.ctx[17]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),F()}get beforeDeselectShape(){return this.$$.ctx[18]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),F()}get beforeSelectShape(){return this.$$.ctx[19]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),F()}get beforeUpdateShape(){return this.$$.ctx[20]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),F()}get markupEditorWillStartInteraction(){return this.$$.ctx[21]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),F()}},({stickers:t,stickerEnableSelectImage:e,stickerEnableSelectImagePreset:n,stickerEnableDropImagePreset:r,stickerForceEnable:i})=>t&&t.length||e||n||r||i]};function SA(t){let e,n,r,i,o,a=(t[14](t[34].value)||"")+"",s=(hr(t[34].label)?t[34].label(t[1]):t[34].label)+"";return{c(){e=bt("div"),n=new Ph(!1),r=be(),i=bt("span"),o=vr(s),n.a=r,w(e,"slot","option")},m(l,c){it(l,e,c),n.m(a,e),Rt(e,r),Rt(e,i),Rt(i,o)},p(l,c){8&c[1]&&a!==(a=(l[14](l[34].value)||"")+"")&&n.p(a),2&c[0]|8&c[1]&&s!==(s=(hr(l[34].label)?l[34].label(l[1]):l[34].label)+"")&&Vr(o,s)},d(l){l&&nt(e)}}}function wA(t){let e,n;return e=new Xs({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[6],onchange:t[12],$$slots:{option:[SA,({option:r})=>({34:r}),({option:r})=>[0,r?8:0]]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};2&i[0]&&(o.locale=r[1]),4&i[0]&&(o.options=r[2]),64&i[0]&&(o.selectedIndex=r[6]),2&i[0]|24&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function TA(t){let e,n,r,i,o;return n=new Nh({props:{locale:t[1],class:"PinturaControlPanels",shape:t[4],onchange:t[13],controls:t[3],scrollElasticity:t[7]}}),i=new cs({props:{elasticity:t[10],$$slots:{default:[wA]},$$scope:{ctx:t}}}),{c(){e=bt("div"),zt(n.$$.fragment),r=be(),zt(i.$$.fragment),w(e,"slot","footer"),w(e,"style",t[5])},m(a,s){it(a,e,s),Ft(n,e,null),Rt(e,r),Ft(i,e,null),o=!0},p(a,s){const l={};2&s[0]&&(l.locale=a[1]),16&s[0]&&(l.shape=a[4]),8&s[0]&&(l.controls=a[3]),128&s[0]&&(l.scrollElasticity=a[7]),n.$set(l);const c={};70&s[0]|16&s[1]&&(c.$$scope={dirty:s,ctx:a}),i.$set(c),(!o||32&s[0])&&w(e,"style",a[5])},i(a){o||(L(n.$$.fragment,a),L(i.$$.fragment,a),o=!0)},o(a){W(n.$$.fragment,a),W(i.$$.fragment,a),o=!1},d(a){a&&nt(e),Bt(n),Bt(i)}}}function EA(t){let e,n;return e=new bc({props:{$$slots:{footer:[TA]},$$scope:{ctx:t}}}),e.$on("measure",t[23]),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};254&i[0]|16&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function IA(t,e,n){let r,i,o,a,s,l,c,d,u=Je,p=()=>(u(),u=ho(h,I=>n(20,s=I)),h);t.$$.on_destroy.push(()=>u());let{isActive:h}=e;p();let{stores:f}=e,{locale:m={}}=e,{frameStyles:$={}}=e,{frameOptions:b=[]}=e,{markupEditorShapeStyleControls:S}=e;const v=kr("elasticityMultiplier");N(t,v,I=>n(22,d=I));const{history:T,animation:C,scrollElasticity:R,imageFrame:A,allowPan:E,allowZoom:M,allowZoomControls:P,allowPlayPause:_}=f;N(t,C,I=>n(21,l=I)),N(t,A,I=>n(4,c=I));let y={},z;const O=un(l?20:0);return N(t,O,I=>n(19,a=I)),t.$$set=I=>{"isActive"in I&&p(n(0,h=I.isActive)),"stores"in I&&n(17,f=I.stores),"locale"in I&&n(1,m=I.locale),"frameStyles"in I&&n(18,$=I.frameStyles),"frameOptions"in I&&n(2,b=I.frameOptions),"markupEditorShapeStyleControls"in I&&n(3,S=I.markupEditorShapeStyleControls)},t.$$.update=()=>{1048576&t.$$.dirty[0]&&E.set(s),1048576&t.$$.dirty[0]&&M.set(s),1048576&t.$$.dirty[0]&&P.set(s),1048576&t.$$.dirty[0]&&s&&_.set(!0),4194304&t.$$.dirty[0]&&n(7,r=d*R),20&t.$$.dirty[0]&&n(6,i=c?b.findIndex(([I])=>I===c.id):0),3145728&t.$$.dirty[0]&&l&&O.set(s?0:20),524288&t.$$.dirty[0]&&n(5,o=a?`transform: translateY(${a}px)`:void 0)},[h,m,b,S,c,o,i,r,v,C,R,A,({value:I})=>{const k=$[I];if(!k||!k.shape)return A.set(void 0),void T.write();const{shape:G}=k,X={id:I,...ri(G),...Object.keys(y).reduce((q,D)=>(G[D]&&(q[D]=y[D]),q),{})};A.set(X),T.write()},function(I){Fe(I,"frameColor")&&(y.frameColor=I.frameColor),c&&(ts(c,I),A.set(c),clearTimeout(z),z=setTimeout(()=>{T.write()},200))},I=>{const k=$[I];var G;if(k&&k.thumb)return G=k.thumb,/div/i.test(G)||Ww(G)?G:/rect|path|circle|line|<g>/i.test(G)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${G}</svg>`:`<img src="${G}" alt=""/>`},O,"frame",f,$,a,s,l,d,function(I){go.call(this,t,I)}]}var _A={util:["frame",class extends mn{constructor(t){super(),hn(this,t,IA,EA,rn,{name:16,isActive:0,stores:17,locale:1,frameStyles:18,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[16]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),F()}get stores(){return this.$$.ctx[17]}set stores(t){this.$$set({stores:t}),F()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),F()}get frameStyles(){return this.$$.ctx[18]}set frameStyles(t){this.$$set({frameStyles:t}),F()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(t){this.$$set({frameOptions:t}),F()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),F()}},({src:t})=>t&&!ld(t)]};function CA(t){let e,n,r,i,o,a,s,l;return{c(){e=bt("div"),n=bt("input"),i=be(),o=bt("label"),a=vr(t[1]),w(n,"id",t[0]),w(n,"type","number"),w(n,"min","1"),w(n,"inputmode","numeric"),w(n,"pattern","[0-9]*"),w(n,"data-state",t[3]),w(n,"autocomplete","off"),w(n,"placeholder",t[4]),n.value=r=t[5]===void 0?"":t[7](t[5]+""),w(o,"for",t[0]),w(o,"title",t[2]),w(o,"aria-label",t[2]),w(e,"class","PinturaInputDimension")},m(c,d){it(c,e,d),Rt(e,n),Rt(e,i),Rt(e,o),Rt(o,a),s||(l=kt(n,"input",t[8]),s=!0)},p(c,[d]){1&d&&w(n,"id",c[0]),8&d&&w(n,"data-state",c[3]),16&d&&w(n,"placeholder",c[4]),160&d&&r!==(r=c[5]===void 0?"":c[7](c[5]+""))&&n.value!==r&&(n.value=r),2&d&&Vr(a,c[1]),1&d&&w(o,"for",c[0]),4&d&&w(o,"title",c[2]),4&d&&w(o,"aria-label",c[2])},i:Je,o:Je,d(c){c&&nt(e),s=!1,l()}}}function RA(t,e,n){let{id:r}=e,{label:i}=e,{title:o}=e,{state:a}=e,{placeholder:s}=e,{value:l}=e,{onchange:c}=e,{format:d=u=>u.replace(/\D/g,"")}=e;return t.$$set=u=>{"id"in u&&n(0,r=u.id),"label"in u&&n(1,i=u.label),"title"in u&&n(2,o=u.title),"state"in u&&n(3,a=u.state),"placeholder"in u&&n(4,s=u.placeholder),"value"in u&&n(5,l=u.value),"onchange"in u&&n(6,c=u.onchange),"format"in u&&n(7,d=u.format)},[r,i,o,a,s,l,c,d,u=>c(d(u.currentTarget.value))]}class Cv extends mn{constructor(e){super(),hn(this,e,RA,CA,rn,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function MA(t){let e;return{c(){e=zi("g")},m(n,r){it(n,e,r),e.innerHTML=t[2]},p(n,r){4&r&&(e.innerHTML=n[2])},d(n){n&&nt(e)}}}function kA(t){let e,n,r,i,o,a,s,l;return o=new ea({props:{$$slots:{default:[MA]},$$scope:{ctx:t}}}),{c(){e=bt("div"),n=bt("input"),r=be(),i=bt("label"),zt(o.$$.fragment),w(n,"id",t[0]),w(n,"class","implicit"),w(n,"type","checkbox"),n.checked=t[1],w(i,"for",t[0]),w(i,"title",t[3])},m(c,d){it(c,e,d),Rt(e,n),Rt(e,r),Rt(e,i),Ft(o,i,null),a=!0,s||(l=kt(n,"change",t[5]),s=!0)},p(c,[d]){(!a||1&d)&&w(n,"id",c[0]),(!a||2&d)&&(n.checked=c[1]);const u={};68&d&&(u.$$scope={dirty:d,ctx:c}),o.$set(u),(!a||1&d)&&w(i,"for",c[0]),(!a||8&d)&&w(i,"title",c[3])},i(c){a||(L(o.$$.fragment,c),a=!0)},o(c){W(o.$$.fragment,c),a=!1},d(c){c&&nt(e),Bt(o),s=!1,l()}}}function PA(t,e,n){let{id:r}=e,{locked:i}=e,{icon:o}=e,{title:a}=e,{onchange:s}=e;return t.$$set=l=>{"id"in l&&n(0,r=l.id),"locked"in l&&n(1,i=l.locked),"icon"in l&&n(2,o=l.icon),"title"in l&&n(3,a=l.title),"onchange"in l&&n(4,s=l.onchange)},[r,i,o,a,s,l=>s(l.currentTarget.checked)]}class AA extends mn{constructor(e){super(),hn(this,e,PA,kA,rn,{id:0,locked:1,icon:2,title:3,onchange:4})}}function LA(t){let e;return{c(){e=vr("Save")},m(n,r){it(n,e,r)},d(n){n&&nt(e)}}}function OA(t){let e,n,r,i,o,a,s,l,c,d,u,p,h,f=t[1].resizeLabelFormCaption+"";return l=new na({props:{items:t[4]}}),d=new Rl({props:{type:"submit",class:"implicit",$$slots:{default:[LA]},$$scope:{ctx:t}}}),{c(){e=bt("form"),n=bt("div"),r=bt("fieldset"),i=bt("legend"),o=vr(f),a=be(),s=bt("div"),zt(l.$$.fragment),c=be(),zt(d.$$.fragment),w(i,"class","implicit"),w(s,"class","PinturaFieldsetInner"),w(n,"class","PinturaFormInner"),w(e,"slot","footer"),w(e,"style",t[3])},m(m,$){it(m,e,$),Rt(e,n),Rt(n,r),Rt(r,i),Rt(i,o),Rt(r,a),Rt(r,s),Ft(l,s,null),t[65](s),Rt(n,c),Ft(d,n,null),u=!0,p||(h=[kt(s,"focusin",t[15]),kt(s,"focusout",t[16]),kt(e,"submit",BC(t[17]))],p=!0)},p(m,$){(!u||2&$[0])&&f!==(f=m[1].resizeLabelFormCaption+"")&&Vr(o,f);const b={};16&$[0]&&(b.items=m[4]),l.$set(b);const S={};16&$[3]&&(S.$$scope={dirty:$,ctx:m}),d.$set(S),(!u||8&$[0])&&w(e,"style",m[3])},i(m){u||(L(l.$$.fragment,m),L(d.$$.fragment,m),u=!0)},o(m){W(l.$$.fragment,m),W(d.$$.fragment,m),u=!1},d(m){m&&nt(e),Bt(l),t[65](null),Bt(d),p=!1,tr(h)}}}function DA(t){let e,n;return e=new bc({props:{$$slots:{footer:[OA]},$$scope:{ctx:t}}}),e.$on("measure",t[66]),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};30&i[0]|16&i[3]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function FA(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,f,m,$,b,S,v,T,C,R,A,E,M,P,_,y,z,O,I,k,G=Je,X=()=>(G(),G=ho(D,at=>n(49,h=at)),D);t.$$.on_destroy.push(()=>G());const q=(at,At=0,jt=9999)=>{if(Ve(at)&&!(at=at.replace(/\D/g,"")).length)return;const rt=Math.round(at);return Number.isNaN(rt)?void 0:sr(rt,At,jt)};let{isActive:D}=e;X();let{stores:lt}=e,{locale:pt={}}=e,{resizeMinSize:Lt=ii(1,1)}=e,{resizeMaxSize:et=ii(9999,9999)}=e,{resizeAspectRatioLocked:Y=!1}=e,{resizeEnableButtonLockAspectRatio:j=!0}=e,{resizeSizePresetOptions:ct}=e,{resizeWidthPresetOptions:U}=e,{resizeHeightPresetOptions:ft}=e,{resizeWillRenderFooter:yt=ur}=e;const It=un(0,{stiffness:.15,damping:.3});N(t,It,at=>n(54,S=at));const{animation:Jt,imageSize:pe,imageCropRect:mt,imageCropRectAspectRatio:ot,imageCropAspectRatio:Q,imageOutputSize:Se,imageSelectionZoom:Mt,imageSelectionPan:xt,history:Wt,env:Ht,allowPan:Ae,allowZoom:ke,allowZoomControls:st,allowPlayPause:St}=lt;N(t,Jt,at=>n(50,f=at)),N(t,pe,at=>n(73,O=at)),N(t,mt,at=>n(52,$=at)),N(t,ot,at=>n(53,b=at)),N(t,Q,at=>n(72,P=at)),N(t,Se,at=>n(61,M=at)),N(t,Mt,at=>n(74,I=at)),N(t,xt,at=>n(75,k=at)),N(t,Ht,at=>n(51,m=at));const Ce=Oa();let dn,Te,Ut,Ee,Ne,qe,En=pr();const Et=(at,At,jt,rt,Dt)=>at!=null&&jt!==At?at>=rt[At]&&at<=Dt[At]?"valid":"invalid":"undetermined",Tt=(at,At,jt)=>Math.round(at!=null?at/At:jt.height),je=()=>{Y&&Te&&Ut&&(Ee==="width"?n(39,Ut=Math.round(Te/b)):Ee==="height"?n(38,Te=Math.round(Ut*b)):(Ne==="width"?n(39,Ut=Math.round(Te/b)):Ne==="height"&&n(38,Te=Math.round(Ut*b)),Le()))},Le=at=>{let At=q(Te),jt=q(Ut),rt=At,Dt=jt,ee=rt&&Dt,de=at||b;if(!rt&&!Dt)return;rt&&!Dt?Dt=Math.round(rt/de):Dt&&!rt&&(rt=Math.round(Dt*de)),de=at||ee?Ra(rt,Dt):b;let te=ii(rt,Dt);Zp(et,te)||(te=vo(et,de)),Zp(te,Lt)||(te=js(Lt,de)),n(38,Te=At!=null?Math.round(te.width):void 0),n(39,Ut=jt!=null?Math.round(te.height):void 0)},yn=()=>{Le();const{width:at,height:At}=M||{};at===Te&&At===Ut||(Te||Ut?(Te&&Ut&&Ct(Q,P=Te/Ut,P),Ct(Se,M=ii(Te,Ut),M)):(Ct(Q,P=O.width/O.height,P),Ct(Q,P=void 0,P),Ct(Se,M=void 0,M)),Wt.write())},en=Se.subscribe(at=>{if(!at)return n(38,Te=void 0),void n(39,Ut=void 0);n(38,Te=at.width),n(39,Ut=at.height),Le()}),Ke=Q.subscribe(at=>{(Te||Ut)&&at&&(Te&&Ut&&Ra(Te,Ut)!==at?(n(39,Ut=Te/at),Le(at)):Le())}),Cn=at=>Ve(at[0])?(at[1]=at[1].map(Cn),at):Sn(at)?[at,""+at]:at,J=at=>{if(Ve(at[0]))return at[1]=at[1].map(J),at;let[At,jt]=at;if(Sn(At)&&Sn(jt)){const[rt,Dt]=[At,jt];jt=`${rt} &times; ${Dt}`,At=[rt,Dt]}return[At,jt]},he=ye();N(t,he,at=>n(60,E=at));const K=ye();N(t,K,at=>n(64,z=at));const Gt=ye();N(t,Gt,at=>n(58,R=at));const ce=ye();N(t,ce,at=>n(63,y=at));const we=ye();N(t,we,at=>n(56,T=at));const ge=ye();N(t,ge,at=>n(62,_=at));const Nt=Fn([Se,K],([at,At],jt)=>{if(!At)return jt(-1);const rt=At.findIndex(([Dt])=>{if(!Dt&&!at)return!0;if(!Dt)return!1;const[ee,de]=Dt;return at.width===ee&&at.height===de});jt(rt<0?0:rt)});N(t,Nt,at=>n(59,A=at));const Pe=Fn([Se,ce],([at,At],jt)=>{if(!At)return jt(-1);const rt=At.findIndex(([Dt])=>!Dt&&!at||!!Dt&&at.width===Dt);jt(rt<0?0:rt)});N(t,Pe,at=>n(57,C=at));const Qt=Fn([Se,ge],([at,At],jt)=>{if(!At)return jt(-1);const rt=At.findIndex(([Dt])=>!Dt&&!at||!!Dt&&at.height===Dt);jt(rt<0?0:rt)});N(t,Qt,at=>n(55,v=at));let Ge,Ye;const Qe=kr("redrawTrigger"),fn=un(f?20:0);return N(t,fn,at=>n(48,p=at)),$a(()=>{en(),Ke()}),t.$$set=at=>{"isActive"in at&&X(n(0,D=at.isActive)),"stores"in at&&n(30,lt=at.stores),"locale"in at&&n(1,pt=at.locale),"resizeMinSize"in at&&n(31,Lt=at.resizeMinSize),"resizeMaxSize"in at&&n(32,et=at.resizeMaxSize),"resizeAspectRatioLocked"in at&&n(28,Y=at.resizeAspectRatioLocked),"resizeEnableButtonLockAspectRatio"in at&&n(33,j=at.resizeEnableButtonLockAspectRatio),"resizeSizePresetOptions"in at&&n(34,ct=at.resizeSizePresetOptions),"resizeWidthPresetOptions"in at&&n(35,U=at.resizeWidthPresetOptions),"resizeHeightPresetOptions"in at&&n(36,ft=at.resizeHeightPresetOptions),"resizeWillRenderFooter"in at&&n(37,yt=at.resizeWillRenderFooter)},t.$$.update=()=>{var at;262144&t.$$.dirty[1]&&Ae.set(!h),262144&t.$$.dirty[1]&&ke.set(!h),262144&t.$$.dirty[1]&&st.set(!h),262144&t.$$.dirty[1]&&h&&St.set(!0),536870920&t.$$.dirty[1]&&ct&&(Ct(he,E=ct.map(J),E),Ct(K,z=yl(E),z)),536870912&t.$$.dirty[1]&&n(47,a=!!E),268435456&t.$$.dirty[1]|4&t.$$.dirty[2]&&n(46,r=A>-1&&z[A][1]),134217744&t.$$.dirty[1]&&U&&(Ct(Gt,R=U.map(Cn),R),Ct(ce,y=yl(R),y)),134283264&t.$$.dirty[1]&&n(44,s=!a&&R),67108864&t.$$.dirty[1]|2&t.$$.dirty[2]&&n(45,i=C>-1&&y[C][1]),33554464&t.$$.dirty[1]&&ft&&(Ct(we,T=ft.map(Cn),T),Ct(ge,_=yl(T),_)),33619968&t.$$.dirty[1]&&n(43,l=!a&&T),16777216&t.$$.dirty[1]|1&t.$$.dirty[2]&&n(42,o=v>-1&&_[v][1]),77824&t.$$.dirty[1]&&n(41,c=!a&&!s&&!l),268435458&t.$$.dirty[0]|1072824263&t.$$.dirty[1]&&n(4,d=Qe&&lu(()=>{return yt([a&&["Dropdown","size-presets",{label:r,options:E,onchange:Dt=>{return(ee=Dt.value)&&!Ge&&(Ge={...$},Ye=P),ee?(Ct(Q,P=Ra(ee[0],ee[1]),P),Ct(Se,M=Kx(ee),M)):(Ct(mt,$=Ge,$),Ct(Q,P=Ye,P),Ct(Se,M=void 0,M),Ge=void 0,Ye=void 0),void Wt.write();var ee},selectedIndex:A}],s&&["Dropdown","width-presets",{label:i,options:R,onchange:Dt=>{n(38,Te=Dt.value),yn()},selectedIndex:C}],s&&l&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],l&&["Dropdown","height-presets",{label:o,options:T,onchange:Dt=>{n(39,Ut=Dt.value),yn()},selectedIndex:v}],c&&[Cv,"width-input",{id:"width-"+Ce,title:pt.resizeTitleInputWidth,label:pt.resizeLabelInputWidth,placeholder:(At=q(Ut),jt=b,rt=$,Math.round(At!=null?At*jt:rt.width)),value:Te,state:Et(q(Te),"width",Ee,Lt,et),onchange:Dt=>{n(38,Te=Dt),je()}}],c&&j&&[AA,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+Ce,title:pt.resizeTitleButtonMaintainAspectRatio,icon:Ve(pt.resizeIconButtonMaintainAspectRatio)?pt.resizeIconButtonMaintainAspectRatio:pt.resizeIconButtonMaintainAspectRatio(Y,S),locked:Y,onchange:Dt=>{n(28,Y=Dt),je()}}],c&&[Cv,"height-input",{id:"height-"+Ce,title:pt.resizeTitleInputHeight,label:pt.resizeLabelInputHeight,placeholder:Tt(q(Te),b,$),value:Ut,state:Et(q(Ut),"height",Ee,Lt,et),onchange:Dt=>{n(39,Ut=Dt),je()}}]].filter(Boolean),{...m},()=>Qe.set({}));var At,jt,rt}).filter(Boolean)),268435456&t.$$.dirty[0]&&It.set(Y?1:0),512&t.$$.dirty[1]&&Ee&&(Ne=Ee),262144&t.$$.dirty[1]&&h&&(En=k,qe=I),1074003968&t.$$.dirty[1]&&(h?(at=M,Ct(xt,k=pr(),k),Ct(Mt,I=at&&$?at.width/$.width||at.height/$.height:1,I)):(Ct(xt,k=En,k),Ct(Mt,I=qe,I))),786432&t.$$.dirty[1]&&f&&fn.set(h?0:20),131072&t.$$.dirty[1]&&n(3,u=p?`transform: translateY(${p}px)`:void 0)},[D,pt,dn,u,d,It,Jt,pe,mt,ot,Q,Se,Mt,xt,Ht,at=>{const At=at.target.id;/width/.test(At)?n(40,Ee="width"):/height/.test(At)?n(40,Ee="height"):/aspectRatio/i.test(At)?n(40,Ee="lock"):n(40,Ee=void 0)},at=>{dn.contains(at.relatedTarget)||yn(),n(40,Ee=void 0)},yn,he,K,Gt,ce,we,ge,Nt,Pe,Qt,fn,Y,"resize",lt,Lt,et,j,ct,U,ft,yt,Te,Ut,Ee,c,o,l,s,i,r,a,p,h,f,m,$,b,S,v,T,C,R,A,E,M,_,y,z,function(at){zn[at?"unshift":"push"](()=>{dn=at,n(2,dn)})},function(at){go.call(this,t,at)}]}var BA={util:["resize",class extends mn{constructor(t){super(),hn(this,t,FA,DA,rn,{name:29,isActive:0,stores:30,locale:1,resizeMinSize:31,resizeMaxSize:32,resizeAspectRatioLocked:28,resizeEnableButtonLockAspectRatio:33,resizeSizePresetOptions:34,resizeWidthPresetOptions:35,resizeHeightPresetOptions:36,resizeWillRenderFooter:37},null,[-1,-1,-1,-1])}get name(){return this.$$.ctx[29]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),F()}get stores(){return this.$$.ctx[30]}set stores(t){this.$$set({stores:t}),F()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),F()}get resizeMinSize(){return this.$$.ctx[31]}set resizeMinSize(t){this.$$set({resizeMinSize:t}),F()}get resizeMaxSize(){return this.$$.ctx[32]}set resizeMaxSize(t){this.$$set({resizeMaxSize:t}),F()}get resizeAspectRatioLocked(){return this.$$.ctx[28]}set resizeAspectRatioLocked(t){this.$$set({resizeAspectRatioLocked:t}),F()}get resizeEnableButtonLockAspectRatio(){return this.$$.ctx[33]}set resizeEnableButtonLockAspectRatio(t){this.$$set({resizeEnableButtonLockAspectRatio:t}),F()}get resizeSizePresetOptions(){return this.$$.ctx[34]}set resizeSizePresetOptions(t){this.$$set({resizeSizePresetOptions:t}),F()}get resizeWidthPresetOptions(){return this.$$.ctx[35]}set resizeWidthPresetOptions(t){this.$$set({resizeWidthPresetOptions:t}),F()}get resizeHeightPresetOptions(){return this.$$.ctx[36]}set resizeHeightPresetOptions(t){this.$$set({resizeHeightPresetOptions:t}),F()}get resizeWillRenderFooter(){return this.$$.ctx[37]}set resizeWillRenderFooter(t){this.$$set({resizeWillRenderFooter:t}),F()}},({src:t})=>t&&!ld(t)]};function zA(t){let e,n;return e=new Vh({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[9],mapImagePointToScreenPoint:t[8],utilKey:"redact",imageRotation:t[10],imageFlipX:t[7],imageFlipY:t[6],shapes:t[11],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:t[13],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:t[5],hooks:{willRenderShapeControls:t[24]}}}),e.$on("measure",t[25]),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,[i]){const o={};8&i&&(o.stores=r[3]),16&i&&(o.locale=r[4]),1&i&&(o.isActive=r[0]),2&i&&(o.isActiveFraction=r[1]),4&i&&(o.isVisible=r[2]),512&i&&(o.mapScreenPointToImagePoint=r[9]),256&i&&(o.mapImagePointToScreenPoint=r[8]),1024&i&&(o.imageRotation=r[10]),128&i&&(o.imageFlipX=r[7]),64&i&&(o.imageFlipY=r[6]),32&i&&(o.willStartInteraction=r[5]),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function NA(t,e,n){let r,i,o,a,s,l,c,d,u,{isActive:p}=e,{isActiveFraction:h}=e,{isVisible:f}=e,{stores:m}=e,{locale:$={}}=e,{markupEditorWillStartInteraction:b}=e;const{imageRedaction:S,rootRect:v,imageSize:T,imageRotation:C,imageFlipX:R,imageFlipY:A,imageTransforms:E,imageTransformsInterpolated:M}=m;return N(t,v,P=>n(23,d=P)),N(t,T,P=>n(22,c=P)),N(t,C,P=>n(10,u=P)),N(t,R,P=>n(7,a=P)),N(t,A,P=>n(6,o=P)),N(t,E,P=>n(21,l=P)),N(t,M,P=>n(20,s=P)),t.$$set=P=>{"isActive"in P&&n(0,p=P.isActive),"isActiveFraction"in P&&n(1,h=P.isActiveFraction),"isVisible"in P&&n(2,f=P.isVisible),"stores"in P&&n(3,m=P.stores),"locale"in P&&n(4,$=P.locale),"markupEditorWillStartInteraction"in P&&n(5,b=P.markupEditorWillStartInteraction)},t.$$.update=()=>{15728832&t.$$.dirty&&n(9,r=P=>Kf(P,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),15728832&t.$$.dirty&&n(8,i=P=>Zf(P,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[p,h,f,m,$,b,o,a,i,r,u,S,v,T,C,R,A,E,M,"redact",s,l,c,d,P=>{const _=P0(P[0]);return u6("to-front",_),P},function(P){go.call(this,t,P)}]}var VA={util:["redact",class extends mn{constructor(t){super(),hn(this,t,NA,zA,rn,{name:19,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5})}get name(){return this.$$.ctx[19]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),F()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),F()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),F()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),F()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),F()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),F()}},({src:t})=>t&&!ld(t)]};function Rv(t){let e,n,r=(hr(t[32].label)?t[32].label(t[1]):t[32].label)+"";return{c(){e=bt("span"),n=vr(r)},m(i,o){it(i,e,o),Rt(e,n)},p(i,o){2&o[0]|2&o[1]&&r!==(r=(hr(i[32].label)?i[32].label(i[1]):i[32].label)+"")&&Vr(n,r)},d(i){i&&nt(e)}}}function UA(t){let e,n,r,i=(t[11](t[32].value)||"")+"",o=t[32].label&&Rv(t);return{c(){e=bt("div"),n=new Ph(!1),r=be(),o&&o.c(),n.a=r,w(e,"slot","option")},m(a,s){it(a,e,s),n.m(i,e),Rt(e,r),o&&o.m(e,null)},p(a,s){2&s[1]&&i!==(i=(a[11](a[32].value)||"")+"")&&n.p(i),a[32].label?o?o.p(a,s):(o=Rv(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(a){a&&nt(e),o&&o.d()}}}function GA(t){let e,n;return e=new Xs({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[4],onchange:t[10],$$slots:{option:[UA,({option:r})=>({32:r}),({option:r})=>[0,r?2:0]]},$$scope:{ctx:t}}}),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};2&i[0]&&(o.locale=r[1]),4&i[0]&&(o.options=r[2]),16&i[0]&&(o.selectedIndex=r[4]),2&i[0]|6&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function WA(t){let e,n,r;return n=new cs({props:{elasticity:t[5],$$slots:{default:[GA]},$$scope:{ctx:t}}}),{c(){e=bt("div"),zt(n.$$.fragment),w(e,"slot","footer"),w(e,"style",t[3])},m(i,o){it(i,e,o),Ft(n,e,null),r=!0},p(i,o){const a={};32&o[0]&&(a.elasticity=i[5]),22&o[0]|4&o[1]&&(a.$$scope={dirty:o,ctx:i}),n.$set(a),(!r||8&o[0])&&w(e,"style",i[3])},i(i){r||(L(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Bt(n)}}}function HA(t){let e,n;return e=new bc({props:{$$slots:{footer:[WA]},$$scope:{ctx:t}}}),e.$on("measure",t[22]),{c(){zt(e.$$.fragment)},m(r,i){Ft(e,r,i),n=!0},p(r,i){const o={};62&i[0]|4&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){W(e.$$.fragment,r),n=!1},d(r){Bt(e,r)}}}function jA(t,e,n){let r,i,o,a,s,l,c,d,u,p,h=Je,f=()=>(h(),h=ho(m,I=>n(17,l=I)),m);t.$$.on_destroy.push(()=>h());let{isActive:m}=e;f();let{stores:$}=e,{locale:b={}}=e,{fillOptions:S=[]}=e;const v=I=>I.map(k=>(G=>zr(G)&&Ve(G[0])&&zr(G[1]))(k)?[k[0],v(k[1]),k[2]]:(G=>[Array.isArray(G)&&G.length===3?[...G,1]:G,void 0,{disabled:!1}])(k)),T=kr("elasticityMultiplier");N(t,T,I=>n(21,p=I));const{history:C,animation:R,scrollElasticity:A,imageBackgroundColor:E,imageBackgroundImage:M,allowPan:P,allowZoom:_,allowZoomControls:y,allowPlayPause:z}=$;N(t,R,I=>n(18,c=I)),N(t,E,I=>n(20,u=I)),N(t,M,I=>n(19,d=I));const O=un(c?20:0);return N(t,O,I=>n(16,s=I)),t.$$set=I=>{"isActive"in I&&f(n(0,m=I.isActive)),"stores"in I&&n(14,$=I.stores),"locale"in I&&n(1,b=I.locale),"fillOptions"in I&&n(15,S=I.fillOptions)},t.$$.update=()=>{32768&t.$$.dirty[0]&&n(2,r=v(S)),131072&t.$$.dirty[0]&&P.set(l),131072&t.$$.dirty[0]&&_.set(l),131072&t.$$.dirty[0]&&y.set(l),131072&t.$$.dirty[0]&&l&&z.set(!0),2097152&t.$$.dirty[0]&&n(5,i=p*A),1572868&t.$$.dirty[0]&&n(4,o=r.findIndex(([I])=>d?I===d:Array.isArray(I)?qs(I,u):void 0)||0),393216&t.$$.dirty[0]&&c&&O.set(l?0:20),65536&t.$$.dirty[0]&&n(3,a=s?`transform: translateY(${s}px)`:void 0)},[m,b,r,a,o,i,T,R,E,M,({value:I})=>{Ve(I)&&(Ct(E,u=void 0,u),Ct(M,d=I,d)),zr(I)&&(Ct(E,u=I,u),Ct(M,d=void 0,d)),C.write()},I=>{if(Ve(I))return`<div class="PinturaFillTile"><img src="${I}" alt="" width="48" height="64"/></div>`;if(zr(I)){const[k,G,X,q]=I.map((D,lt)=>lt<3?Math.round(255*D):D);return`<div class="PinturaFillTile" data-transparent="${q<1}"><div style="background-color:rgba(${k},${G},${X},${q})"></div></div>`}return"<div></div>"},O,"fill",$,S,s,l,c,d,u,p,function(I){go.call(this,t,I)}]}var qA={util:["fill",class extends mn{constructor(t){super(),hn(this,t,jA,HA,rn,{name:13,isActive:0,stores:14,locale:1,fillOptions:15},null,[-1,-1])}get name(){return this.$$.ctx[13]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),F()}get stores(){return this.$$.ctx[14]}set stores(t){this.$$set({stores:t}),F()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),F()}get fillOptions(){return this.$$.ctx[15]}set fillOptions(t){this.$$set({fillOptions:t}),F()}},({src:t,fillOptions:e})=>t&&!ld(t)&&e&&e.length]};const Mv='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',t0='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var YA={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:t=>t.join(", ")+" not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:Mv,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:Mv,statusLabelLoadImage:t=>t&&t.task?t.error?t.error.code==="IMAGE_TOO_SMALL"?"Minimum image size is {minWidth} &times; {minHeight}":"Error loading image":t.task==="blob-to-bitmap"?"Preparing image&hellip;":"Loading image&hellip;":"Waiting for image",statusLabelProcessImage:t=>{if(t&&t.task)return t.task==="store"?t.error?"Error uploading image":"Uploading image&hellip;":t.error?"Error processing image":"Processing image&hellip;"}};const XA={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+t0,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+t0,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+t0,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextOutline:"Text outline",shapeTitleTextOutlineWidth:"Width",shapeTitleTextShadow:"Text shadow",shapeTitleTextShadowBlur:"Blur",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:"Selection mode",shapeTitleBrushSize:"Brush size",shapeLabelSelectionModeNew:"New",shapeLabelSelectionModeAdd:"Add",shapeLabelSelectionModeSubtract:"Remove",shapeLabelToolSelectionBrush:"Brush",shapeLabelToolSelectionLassoo:"Lassoo",shapeLabelToolSelectionRectangle:"Rectangle marquee",shapeLabelToolSelectionEllipse:"Ellipse marquee",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'};var ZA={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(t,e)=>{const[n,r,i]=e?[e<1?1:.3,e===1?.85:.5,e>1?1:.3]:[.2,.3,.4];return`<g fill="currentColor">
            <rect opacity="${n}" x="2" y="4" width="10" height="18" rx="1"/>
            <rect opacity="${r}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${i}" x="6" y="12" width="17" height="10" rx="1"/>
        </g>`},cropIconCropBoundary:(t,e)=>{const[n,r,i,o]=e?[.3,1,0,0]:[0,0,.3,1];return`<g fill="currentColor">
            <rect opacity="${n}" x="2" y="3" width="20" height="20" rx="1"/>
            <rect opacity="${r}" x="7" y="8" width="10" height="10" rx="1"/>
            <rect opacity="${i}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${o}" x="12" y="4" width="10" height="10" rx="1"/>
        </g>`},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},KA={fillLabel:"Fill",fillIcon:`
    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
        <g transform="rotate(60, 12, 12)">
            <rect x="4" y="4" width="14" height="16" rx="3"/>
        </g>
        <path d="M21 13 L21 21"></path>
        <path d="M4.5 12.5 L19 12.5"></path>
    </g>
    `},QA={frameLabel:"Frame",frameIcon:`<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
            <rect x="2" y="2" width="20" height="20" rx="4"/>
            <rect x="6" y="6" width="12" height="12" rx="1"/>
        </g>`,frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},JA={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},O0=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t);Object.keys(n).forEach(r=>{n[r].get?Object.defineProperty(e,r,{get:()=>t[r],set:i=>t[r]=i}):e[r]=t[r]})},jw=t=>{const e={},{sub:n,pub:r}=Gs();Ji()&&document.doctype!==null||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const i=KS();O0(i,e);const o=((c,d)=>{const u={},p=new kb({target:c,props:{stores:d,pluginComponents:Array.from(k0)}});let h=!1;const f=()=>{h||(Ji()&&window.removeEventListener("pagehide",f),p&&(h=!0,p.$destroy()))};Xm||(Xm=new Set(Uf(kb).filter($=>!a6.includes($)))),Xm.forEach($=>{Object.defineProperty(u,$,{get:()=>p[$],set:s6.includes($)?b=>{p[$]={...p[$],...b}}:b=>p[$]=b})}),Object.defineProperty(u,"previewImageData",{get:()=>p.imagePreviewCurrent}),Rw.forEach($=>{const b=Vp[$],S=b[0];Object.defineProperty(u,$,{get:()=>p.pluginInterface[S][$],set:v=>{const T=b.reduce((C,R)=>(C[R]={...p.pluginOptions[R],[$]:v},C),{});p.pluginOptions={...p.pluginOptions,...T}}})}),Object.defineProperty(u,"element",{get:()=>p.root,set:()=>{}});const m=p.history;return ah(u,{on:($,b)=>{if(h)return()=>{};if(/undo|redo|revert|writehistory/.test($))return m.on($,b);const S=[p.sub($,b),p.$on($,v=>b(v instanceof CustomEvent&&!v.detail?void 0:v))].filter(Boolean);return()=>S.forEach(v=>v())},updateImagePreview:$=>{p.imagePreviewSrc=$},close:()=>!h&&p.pub("close"),destroy:f}),Object.defineProperty(u,"history",{get:()=>({undo:()=>m.undo(),redo:()=>m.redo(),revert:()=>m.revert(),get:()=>m.get(),getCollapsed:()=>m.get().splice(0,m.index+1),set:$=>m.set($),write:$=>m.write($),get length(){return m.length()},get index(){return m.index},set index($){m.index=$}})}),Ji()&&window.addEventListener("pagehide",f),u})(t,i.stores);O0(o,e);const a=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(c=>o.on(c,d=>{const u=i[c](d&&d.detail);u instanceof Promise&&u.catch(ve)})),s=(c,d)=>{const u=n(c,d),p=i.on(c,d),h=o.on(c,d);return()=>{u(),p(),h()}};e.handleEvent=ve;const l=Mw.map(c=>s(c,d=>e.handleEvent(c,d)));return ah(e,{on:s,updateImage:c=>new Promise((d,u)=>{const p=e.history.get(),h=e.history.index,f=e.imageState;i.loadImage(c).then(m=>{e.history.set(p),e.history.index=h,e.imageState=f,d(m)}).catch(u)}),close:()=>{r("close")},destroy:()=>{[...a,...l].forEach(c=>c()),o.destroy(),i.destroy(),r("destroy")}}),setTimeout(()=>r("init",e),0),e};Ji();var t7=(t,e={})=>{const n=Ve(t)?document.querySelector(t):t;if(!td(n))return;e.class=e.class?"pintura-editor "+e.class:"pintura-editor";const r=jw(n);return Object.assign(r,e)};const kv=(t,e,n,r)=>{const i=dt(e.x-t.x,e.y-t.y),o=Po(i),a=5*n;let s;s=r?.5*a:Math.ceil(.5*(a-1));const l=Qi(Ue(o),s);return{anchor:Ue(t),offset:l,normal:o,solid:r,size:a,sizeHalf:s}},e7=({anchor:t,solid:e,normal:n,offset:r,size:i,sizeHalf:o,strokeWidth:a,strokeColor:s,strokeJoin:l,strokeCap:c,bitmap:d},u)=>{const p=t.x,h=t.y,f=Qi(Ue(n),i),m=dt(p+f.x,h+f.y);if(Qi(f,.55),e){Xr(u,r);const $=Qi(Ue(n),.5*o);return[{points:[dt(p-$.x,h-$.y),dt(m.x-f.y,m.y+f.x),dt(m.x+f.y,m.y-f.x)],pathClose:!0,backgroundColor:s}]}{const $=Qi((v=>{const T=v.x;return v.x=-v.y,v.y=T,v})(Ue(n)),.5),b=dt(p-$.x,h-$.y),S=dt(p+$.x,h+$.y);return[{points:[dt(m.x+f.y,m.y-f.x),b,dt(p,h),S,dt(m.x-f.y,m.y+f.x)],pathClose:!1,strokeWidth:a,strokeColor:s,strokeJoin:l,strokeCap:c,bitmap:d}]}},n7=({anchor:t,solid:e,offset:n,normal:r,sizeHalf:i,strokeWidth:o,strokeColor:a},s)=>(Xr(s,n),e&&Xr(s,Wc(Ue(r))),[{x:t.x,y:t.y,rx:i,ry:i,backgroundColor:e?a:void 0,strokeWidth:e?void 0:o,strokeColor:e?void 0:a}]),r7=({anchor:t,offset:e,strokeWidth:n,strokeColor:r,strokeJoin:i,strokeCap:o,bitmap:a})=>[{points:[dt(t.x-e.y,t.y+e.x),dt(t.x+e.y,t.y-e.x)],strokeWidth:n,strokeColor:r,strokeJoin:i,strokeCap:o,bitmap:a}],i7=({anchor:t,solid:e,offset:n,normal:r,sizeHalf:i,strokeWidth:o,strokeColor:a},s)=>{return Xr(s,n),[{x:t.x-i,y:t.y-i,width:2*i,height:2*i,rotation:(l=r,Math.atan2(l.y,l.x)),backgroundColor:e?a:void 0,strokeWidth:e?void 0:o,strokeColor:e?void 0:a}];var l},o7=(t={})=>e=>{if(!e.lineStart&&!e.lineEnd)return;const n=[],{lineStart:r,lineEnd:i,strokeWidth:o,strokeColor:a,strokeJoin:s,strokeCap:l,bitmap:c}=e,d=dt(e.x1,e.y1),u=dt(e.x2,e.y2),p=[d,u];if(r){const[h,f]=r.split("-"),m=t[h];if(m){const $=kv(d,u,o,!!f);n.push(...m({...$,strokeColor:a,strokeWidth:o,strokeJoin:s,strokeCap:l,bitmap:c},d))}}if(i){const[h,f]=i.split("-"),m=t[h];if(m){const $=kv(u,d,o,!!f);n.push(...m({...$,strokeColor:a,strokeWidth:o,strokeJoin:s,strokeCap:l,bitmap:c},u))}}return[{points:p,strokeWidth:o,strokeColor:a,strokeJoin:s,strokeCap:l,bitmap:c},...n]},a7=()=>({arrow:e7,circle:n7,square:i7,bar:r7}),D0=(t,e)=>{const n=parseFloat(t)*e;return Ve(t)?n+"%":n},La=(t,e)=>Ve(t)?nh(t,e):t,s7=t=>[{...t,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?D0(t.frameSize,2):"2.5%",frameRadius:t.frameRound?D0(t.frameSize,2):0}],l7=({width:t,height:e,frameImage:n,frameSize:r="15%",frameOutset:i=0,frameSlices:o={x1:.15,y1:.15,x2:.85,y2:.85}},{isPreview:a})=>{if(!n)return[];const s=Math.sqrt(t*e),l=La(r,s),c=a?l:Math.round(l),d=c,u=La(i,s),p=2*u,{x1:h,x2:f,y1:m,y2:$}=o,b={x0:0,y0:0,x1:c,y1:d,x2:t-c,y2:e-d,x3:t,y3:e,cw:c,ch:d,ew:t-c-c,eh:e-d-d},S=a?1:0,v=2*S,T=u>0,C={expandsCanvas:T,width:b.cw,height:b.ch,backgroundImage:n};return[{expandsCanvas:T,x:b.x1-S-u,y:b.y0-u,width:b.ew+v+p,height:b.ch,backgroundCorners:[{x:h,y:0},{x:f,y:0},{x:f,y:m},{x:h,y:m}],backgroundImage:n},{expandsCanvas:T,x:b.x1-S-u,y:b.y2+u,width:b.ew+v+p,height:b.ch,backgroundCorners:[{x:h,y:$},{x:f,y:$},{x:f,y:1},{x:h,y:1}],backgroundImage:n},{expandsCanvas:T,x:b.x0-u,y:b.y1-S-u,width:b.cw,height:b.eh+v+p,backgroundCorners:[{x:0,y:m},{x:h,y:m},{x:h,y:$},{x:0,y:$}],backgroundImage:n},{expandsCanvas:T,x:b.x2+u,y:b.y1-S-u,width:b.cw,height:b.eh+v+p,backgroundCorners:[{x:f,y:m},{x:1,y:m},{x:1,y:$},{x:f,y:$}],backgroundImage:n},{...C,x:b.x0-u,y:b.y0-u,backgroundCorners:[{x:0,y:0},{x:h,y:0},{x:h,y:m},{x:0,y:m}]},{...C,x:b.x2+u,y:b.y0-u,backgroundCorners:[{x:f,y:0},{x:1,y:0},{x:1,y:m},{x:f,y:m}]},{...C,x:b.x2+u,y:b.y2+u,backgroundCorners:[{x:f,y:$},{x:1,y:$},{x:1,y:1},{x:f,y:1}]},{...C,x:b.x0-u,y:b.y2+u,backgroundCorners:[{x:0,y:$},{x:h,y:$},{x:h,y:1},{x:0,y:1}]}]},c7=({x:t,y:e,width:n,height:r,frameInset:i="3.5%",frameSize:o=".25%",frameColor:a=[1,1,1],frameOffset:s="5%",frameAmount:l=1,frameRadius:c=0,expandsCanvas:d=!1},{isPreview:u})=>{const p=Math.sqrt(n*r);let h=La(o,p);const f=La(i,p),m=La(s,p);let $=0;u||(h=Math.max(1,Math.round(h)),$=h%2==0?0:.5);const b=La(D0(c,l),p);return new Array(l).fill(void 0).map((S,v)=>{const T=m*v;let C=t+f+T,R=e+f+T,A=t+n-f-T,E=e+r-f-T;return u||(C=Math.round(C),R=Math.round(R),A=Math.round(A),E=Math.round(E)),{x:C+$,y:R+$,width:A-C,height:E-R,cornerRadius:b>0?b-T:0,strokeWidth:h,strokeColor:a,expandsCanvas:d}})},d7=({x:t,y:e,width:n,height:r,frameSize:i=".25%",frameOffset:o=0,frameInset:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(n*r);let d=La(i,c),u=La(a,c),p=La(o,c),h=0;l||(d=Math.max(1,Math.round(d)),u=Math.round(u),p=Math.round(p),h=d%2==0?0:.5);const f=p-u,m=t+u+h,$=e+u+h,b=t+n-u-h,S=e+r-u-h;return[{points:[dt(m+f,$),dt(b-f,$)]},{points:[dt(b,$+f),dt(b,S-f)]},{points:[dt(b-f,S),dt(m+f,S)]},{points:[dt(m,S-f),dt(m,$+f)]}].map(v=>(v.strokeWidth=d,v.strokeColor=s,v))},u7=({x:t,y:e,width:n,height:r,frameSize:i=".25%",frameInset:o="2.5%",frameLength:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(n*r);let d=La(i,c),u=La(o,c),p=La(a,c),h=0;l||(d=Math.max(1,Math.round(d)),u=Math.round(u),p=Math.round(p),h=d%2==0?0:.5);const f=t+u+h,m=e+u+h,$=t+n-u-h,b=e+r-u-h;return[{points:[dt(f,m+p),dt(f,m),dt(f+p,m)]},{points:[dt($-p,m),dt($,m),dt($,m+p)]},{points:[dt($,b-p),dt($,b),dt($-p,b)]},{points:[dt(f+p,b),dt(f,b),dt(f,b-p)]}].map(S=>(S.strokeWidth=d,S.strokeColor=s,S))},p7=({x:t,y:e,width:n,height:r,frameColor:i=[1,1,1]},{isPreview:o})=>{const a=Math.sqrt(n*r),s=.1*a;let l=.2*a,c=0;const d=.5*s;return o?c=1:l=Math.ceil(l),i.length=3,[{id:"border",x:t-d+c,y:e-d+c,width:n+s-2*c,height:r+l-2*c,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:s,frameColor:i,expandsCanvas:!0},{id:"chin",x:t-d,y:r-c,width:n+s,height:l,backgroundColor:i,expandsCanvas:!0}].filter(Boolean)},h7=(t={})=>(e,n)=>{if(!Fe(e,"frameStyle"))return;const r=e.frameStyle,i=t[r];if(!i)return;const{frameStyle:o,...a}=e;return i(a,n)},m7=()=>({solid:s7,hook:u7,line:c7,edge:d7,polaroid:p7,nine:l7}),f7=t=>{const e=(n,r={isPreview:!0})=>{const i=t.map(o=>{const a=o(n,r);if(a)return a.map(s=>e(s,r))}).filter(Boolean).flat();return i.length?i.flat().map((o,a)=>(o.id=n.id+"_"+a,o)):n};return e};typeof window<"u"&&(t=>{if(!t)return;const[e,n,r,i]=[[108,111,99,97,116,105,111,110],[82,101,103,69,120,112],[116,101,115,116],[112,113,105,110,97,92,46,110,108]].map(o=>o.map(a=>String.fromCharCode(a)).join(""));t._clpdx4s=new t[n](i)[r](t[e])})(window);const g7=aw,Pv=sw,$7=()=>({read:G_,apply:Wx}),y7=(t={})=>{const{blurAmount:e,dataSizeScalar:n,scrambleAmount:r,backgroundColor:i}=t;return(o,a)=>(async(s,l={})=>{if(!s)return;const{width:c,height:d}=s,{dataSize:u=96,dataSizeScalar:p=1,scrambleAmount:h=4,blurAmount:f=6,outputFormat:m="canvas",backgroundColor:$=[0,0,0]}=l,b=Math.round(u*p),S=Math.min(b/c,b/d),v=Math.floor(c*S),T=Math.floor(d*S),C=br("canvas",{width:v,height:T}),R=C.getContext("2d",{willReadFrequently:!0});if($.length=3,R.fillStyle=Bi($),R.fillRect(0,0,v,T),Qc(s)){const P=br("canvas",{width:c,height:d});P.getContext("2d",{willReadFrequently:!0}).putImageData(s,0,0),R.drawImage(P,0,0,v,T),pi(P)}else R.drawImage(s,0,0,v,T);const A=R.getImageData(0,0,v,T),E=[];if(h>0&&E.push([kR,{amount:h}]),f>0)for(let P=0;P<f;P++)E.push([mS,{matrix:PR}]);let M;if(E.length){const P=(z,O)=>`(err, imageData) => {
(${z[O][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${O}]), 
${z[O+1]?P(z,O+1):"done"})
}`,_=`function (options, done) {
const filterInstructions = options.filterInstructions;
const imageData = options.imageData;
(${P(E,0)})(null, imageData)
}`,y=await mu(_,[{imageData:A,filterInstructions:E.map(z=>z[1])}],[A.data.buffer]);M=xf(y)}else M=A;return m==="canvas"?(R.putImageData(M,0,0),C):M})(o,{blurAmount:e,scrambleAmount:r,backgroundColor:i,...a,dataSizeScalar:n||a.dataSizeScalar})},b7=Nw,v7={markupEditorToolbar:Z6(),markupEditorToolStyles:X6(),markupEditorShapeStyleControls:Nw()},x7=iP,S7=dP,w7=$P,T7=fA,E7=yA,I7=xA,_7=_A,C7=VA,R7=BA,M7=qA,k7=O6,P7=I6,A7=H6,L7=YA,O7=XA,D7=ZA,F7=KA,B7={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},z7={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},N7={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:(t,e)=>`<defs><mask id="mask1" x="0" y="0" width="24" height="24" ><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g  mask="url(#mask1)"><path transform="translate(0 ${3*(e-1)})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>`},V7={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},U7={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},G7={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},W7=QA,H7=JA,j7=t7,q7=(t=[])=>f7([h7(m7()),o7(a7()),...t]),Y7=(t={})=>{let e,n;Array.isArray(t.imageReader)||(n=t.imageReader,delete t.imageReader),Array.isArray(t.imageWriter)?e=Pv():(e=hr(t.imageWriter)?t.imageWriter:Pv(t.imageWriter),delete t.imageWriter);let r;return hr(t.imageScrambler)||(r=t.imageScrambler,delete t.imageScrambler),{imageReader:g7(n),imageWriter:e,imageOrienter:$7(),imageScrambler:y7(r)}},X7=(t={})=>{l6(x7,S7,w7,T7,E7,I7,_7,C7,R7,M7);const e=Y7(t),n={...L7,...O7,...D7,...F7,...B7,...z7,...W7,...H7,...N7,...V7,...U7,...G7,...t.locale};delete t.locale;const r=typeof t.shapePreprocessor=="function"?t.shapePreprocessor:q7(t.shapePreprocessor);return delete t.shapePreprocessor,t.markupEditorShapeStyleControls&&Object.entries(t.markupEditorShapeStyleControls).every(([i,o])=>/Options$/.test(i)||!Array.isArray(o))&&(t.markupEditorShapeStyleControls=b7({...t.markupEditorShapeStyleControls})),HS([{...e,shapePreprocessor:r,utils:["trim","crop","filter","finetune","retouch","annotate","decorate","sticker","fill","frame","redact","resize"],...k7,...P7,...A7,...v7,stickerStickToImage:!0,locale:n},t])},Z7={mounted(){this.editor=j7(this.$refs.elementRef,Object.assign({},this.$attrs)),this.unsubs=kw(this.editor,this.$refs.elementRef)},beforeUpdate(){Object.assign(this.editor,Object.assign({},this.$attrs))},beforeUnmount(){this.editor&&(this.editor.destroy(),this.unsubs.forEach(t=>t()),this.unsubs=[],this.editor=void 0)},render(){return zs("div",{className:"PinturaRootWrapper",ref:"elementRef"})}};function K7(t){let{rootEl:e,isSticky:n,layoutItemStyles:r}=t;const i=hl(!1),o=hl(0),a=Mn(()=>{const c=typeof i.value=="boolean"?"top":i.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,i.value?{[c]:bs(o.value)}:{top:r.value.top}]});du(()=>{Uo(n,c=>{c?window.addEventListener("scroll",l,{passive:!0}):window.removeEventListener("scroll",l)},{immediate:!0})}),zv(()=>{window.removeEventListener("scroll",l)});let s=0;function l(){const c=s>window.scrollY?"up":"down",d=e.value.getBoundingClientRect(),u=parseFloat(r.value.top??0),p=window.scrollY-Math.max(0,o.value-u),h=d.height+Math.max(o.value,u)-window.scrollY-window.innerHeight,f=parseFloat(getComputedStyle(e.value).getPropertyValue("--v-body-scroll-y"))||0;d.height<window.innerHeight-u?(i.value="top",o.value=u):c==="up"&&i.value==="bottom"||c==="down"&&i.value==="top"?(o.value=window.scrollY+d.top-f,i.value=!0):c==="down"&&h<=0?(o.value=0,i.value="bottom"):c==="up"&&p<=0&&(f?i.value!=="top"&&(o.value=-p+f+u,i.value="top"):(o.value=d.top+p,i.value="top")),s=window.scrollY}return{isStuck:i,stickyStyles:a}}const Q7=100,J7=20;function Av(t){const e=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*e}function Lv(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let e=0;for(let n=t.length-1;n>0;n--){if(t[n].t===t[n-1].t)continue;const r=Av(e),i=(t[n].d-t[n-1].d)/(t[n].t-t[n-1].t);e+=(i-r)*Math.abs(i),n===t.length-1&&(e*=.5)}return Av(e)*1e3}function tL(){const t={};function e(i){Array.from(i.changedTouches).forEach(o=>{(t[o.identifier]??(t[o.identifier]=new N4(J7))).push([i.timeStamp,o])})}function n(i){Array.from(i.changedTouches).forEach(o=>{delete t[o.identifier]})}function r(i){var c;const o=(c=t[i])==null?void 0:c.values().reverse();if(!o)throw new Error(`No samples for touch id ${i}`);const a=o[0],s=[],l=[];for(const d of o){if(a[0]-d[0]>Q7)break;s.push({t:d[0],d:d[1].clientX}),l.push({t:d[0],d:d[1].clientY})}return{x:Lv(s),y:Lv(l),get direction(){const{x:d,y:u}=this,[p,h]=[Math.abs(d),Math.abs(u)];return p>h&&d>=0?"right":p>h&&d<=0?"left":h>p&&u>=0?"down":h>p&&u<=0?"up":eL()}}}return{addMovement:e,endTouch:n,getVelocity:r}}function eL(){throw new Error}function nL(t){let{isActive:e,isTemporary:n,width:r,touchless:i,position:o}=t;du(()=>{window.addEventListener("touchstart",b,{passive:!0}),window.addEventListener("touchmove",S,{passive:!1}),window.addEventListener("touchend",v,{passive:!0})}),zv(()=>{window.removeEventListener("touchstart",b),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",v)});const a=Mn(()=>["left","right"].includes(o.value)),{addMovement:s,endTouch:l,getVelocity:c}=tL();let d=!1;const u=hl(!1),p=hl(0),h=hl(0);let f;function m(C,R){return(o.value==="left"?C:o.value==="right"?document.documentElement.clientWidth-C:o.value==="top"?C:o.value==="bottom"?document.documentElement.clientHeight-C:Fc())-(R?r.value:0)}function $(C){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const A=o.value==="left"?(C-h.value)/r.value:o.value==="right"?(document.documentElement.clientWidth-C-h.value)/r.value:o.value==="top"?(C-h.value)/r.value:o.value==="bottom"?(document.documentElement.clientHeight-C-h.value)/r.value:Fc();return R?Math.max(0,Math.min(1,A)):A}function b(C){if(i.value)return;const R=C.changedTouches[0].clientX,A=C.changedTouches[0].clientY,E=25,M=o.value==="left"?R<E:o.value==="right"?R>document.documentElement.clientWidth-E:o.value==="top"?A<E:o.value==="bottom"?A>document.documentElement.clientHeight-E:Fc(),P=e.value&&(o.value==="left"?R<r.value:o.value==="right"?R>document.documentElement.clientWidth-r.value:o.value==="top"?A<r.value:o.value==="bottom"?A>document.documentElement.clientHeight-r.value:Fc());(M||P||e.value&&n.value)&&(d=!0,f=[R,A],h.value=m(a.value?R:A,e.value),p.value=$(a.value?R:A),l(C),s(C))}function S(C){const R=C.changedTouches[0].clientX,A=C.changedTouches[0].clientY;if(d){if(!C.cancelable){d=!1;return}const M=Math.abs(R-f[0]),P=Math.abs(A-f[1]);(a.value?M>P&&M>3:P>M&&P>3)?(u.value=!0,d=!1):(a.value?P:M)>3&&(d=!1)}if(!u.value)return;C.preventDefault(),s(C);const E=$(a.value?R:A,!1);p.value=Math.max(0,Math.min(1,E)),E>1?h.value=m(a.value?R:A,!0):E<0&&(h.value=m(a.value?R:A,!1))}function v(C){if(d=!1,!u.value)return;s(C),u.value=!1;const R=c(C.changedTouches[0].identifier),A=Math.abs(R.x),E=Math.abs(R.y);(a.value?A>E&&A>400:E>A&&E>3)?e.value=R.direction===({left:"right",right:"left",top:"down",bottom:"up"}[o.value]||Fc()):e.value=p.value>.5}const T=Mn(()=>u.value?{transform:o.value==="left"?`translateX(calc(-100% + ${p.value*r.value}px))`:o.value==="right"?`translateX(calc(100% - ${p.value*r.value}px))`:o.value==="top"?`translateY(calc(-100% + ${p.value*r.value}px))`:o.value==="bottom"?`translateY(calc(100% - ${p.value*r.value}px))`:Fc(),transition:"none"}:void 0);return{isDragging:u,dragProgress:p,dragStyles:T}}function Fc(){throw new Error}const rL=["start","end","left","right","top","bottom"],iL=Ys({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>rL.includes(t)},sticky:Boolean,...G0(),...pc(),...V4(),...ph(),...Nv(),...hh(),...mh({tag:"nav"}),...z0()},"VNavigationDrawer"),qw=El()({name:"VNavigationDrawer",props:iL(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{isRtl:o}=lh(),{themeClasses:a}=Bv(t),{borderClasses:s}=W0(t),{backgroundColorClasses:l,backgroundColorStyles:c}=Xc(co(t,"color")),{elevationClasses:d}=fh(t),{displayClasses:u,mobile:p}=Vv(t),{roundedClasses:h}=gh(t),f=mT(),m=Uv(t,"modelValue",null,D=>!!D),{ssrBootStyles:$}=H0(),{scopeId:b}=fT(),S=nr(),v=hl(!1),T=Mn(()=>t.rail&&t.expandOnHover&&v.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),C=Mn(()=>gT(t.location,o.value)),R=Mn(()=>!t.permanent&&(p.value||t.temporary)),A=Mn(()=>t.sticky&&!R.value&&C.value!=="bottom");sm(()=>t.expandOnHover&&t.rail!=null,()=>{Uo(v,D=>r("update:rail",!D))}),sm(()=>!t.disableResizeWatcher,()=>{Uo(R,D=>!t.permanent&&Hv(()=>m.value=!D))}),sm(()=>!t.disableRouteWatcher&&!!f,()=>{Uo(f.currentRoute,()=>R.value&&(m.value=!1))}),Uo(()=>t.permanent,D=>{D&&(m.value=!0)}),U4(()=>{t.modelValue!=null||R.value||(m.value=t.permanent||!p.value)});const{isDragging:E,dragProgress:M,dragStyles:P}=nL({isActive:m,isTemporary:R,width:T,touchless:co(t,"touchless"),position:C}),_=Mn(()=>{const D=R.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):T.value;return E.value?D*M.value:D}),{layoutItemStyles:y,layoutItemScrimStyles:z}=Gv({id:t.name,order:Mn(()=>parseInt(t.order,10)),position:C,layoutSize:_,elementSize:T,active:Mn(()=>m.value||E.value),disableTransitions:Mn(()=>E.value),absolute:Mn(()=>t.absolute||A.value&&typeof O.value!="string")}),{isStuck:O,stickyStyles:I}=K7({rootEl:S,isSticky:A,layoutItemStyles:y}),k=Xc(Mn(()=>typeof t.scrim=="string"?t.scrim:null)),G=Mn(()=>({...E.value?{opacity:M.value*.2,transition:"none"}:void 0,...z.value}));Wv({VList:{bgColor:"transparent"}});function X(){v.value=!0}function q(){v.value=!1}return Il(()=>{const D=i.image||t.image;return ut(Ts,null,[ut(t.tag,Up({ref:S,onMouseenter:X,onMouseleave:q,class:["v-navigation-drawer",`v-navigation-drawer--${C.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":v.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":R.value,"v-navigation-drawer--active":m.value,"v-navigation-drawer--sticky":A.value},a.value,l.value,s.value,u.value,d.value,h.value,t.class],style:[c.value,y.value,P.value,$.value,I.value,t.style]},b,n),{default:()=>{var lt,pt,Lt,et;return[D&&ut("div",{key:"image",class:"v-navigation-drawer__img"},[i.image?(lt=i.image)==null?void 0:lt.call(i,{image:t.image}):ut("img",{src:t.image,alt:""},null)]),i.prepend&&ut("div",{class:"v-navigation-drawer__prepend"},[(pt=i.prepend)==null?void 0:pt.call(i)]),ut("div",{class:"v-navigation-drawer__content"},[(Lt=i.default)==null?void 0:Lt.call(i)]),i.append&&ut("div",{class:"v-navigation-drawer__append"},[(et=i.append)==null?void 0:et.call(i)])]}}),ut(G4,{name:"fade-transition"},{default:()=>[R.value&&(E.value||m.value)&&!!t.scrim&&ut("div",Up({class:["v-navigation-drawer__scrim",k.backgroundColorClasses.value],style:[G.value,k.backgroundColorStyles.value],onClick:()=>m.value=!1},b),null)]})])}),{isStuck:O}}}),oL=cn({__name:"InstagramMediaEditor",props:{media:{}},async setup(t){let e,n;const r=t,i=X7({enableButtonClose:!0}),o=([e,n]=ch(()=>dh(r.media)),e=await e,n(),e);function a(l){r.media.setMediaImage(l.detail.dest),r.media.setEditing(!1),r.media.setUniqueId()}function s(l){l||r.media.setEditing(!1)}return(l,c)=>(Vt(),xe(W4,{to:"#drawer-editor"},[ut(qw,{width:500,"rail-width":500,touchless:"","model-value":!0,"disable-resize-watcher":!0,elevation:0,class:"ig-navigation-drawer-editor py-2","onUpdate:modelValue":s},{default:Pt(()=>[ut(_n(Z7),Up(_n(i),{src:_n(o),"onPintura:process":c[0]||(c[0]=d=>a(d)),"onPintura:close":c[1]||(c[1]=d=>l.media.setEditing(!1)),onContextmenu:c[2]||(c[2]=U0(()=>{},["stop"]))}),null,16,["src"])]),_:1})]))}}),Yw=rr(oL,[["__scopeId","data-v-7b99362f"]]),aL={},sL={class:"cursor-pointer ig-media__icon-edit"};function lL(t,e){return Vt(),Rr("div",sL,[ut(os,{icon:"mdi-pencil",size:"20px"})])}const cL=rr(aL,[["render",lL]]),Qf=cn({__name:"InstagramMediaImage",props:{media:{},isFromDetail:{type:Boolean}},async setup(t){let e,n;const r=t,i=([e,n]=ch(()=>dh(r.media)),e=await e,n(),e);return(o,a)=>{const s=cL,l=Yw,c=Ih;return Vt(),xe(c,{type:"image",media:o.media},{default:Pt(()=>[ut(Xv,{cover:"",height:"100%",src:_n(i)},null,8,["src"]),ut(s,{onClick:a[0]||(a[0]=U0(d=>o.media.setEditing(!0),["stop"]))}),o.media.isEditing?(Vt(),xe(l,{key:0,media:o.media},null,8,["media"])):gr("",!0)]),_:1},8,["media"])}}}),dL=["src"],uL=cn({__name:"InstagramMediaIframe",props:{media:{},isFromDetail:{type:Boolean}},setup(t){const e=t,n=nr(typeof e.media.cover!="object"),r=Mn(()=>e.media.collection==="reels");function i(o){o.target.closest(".ig-media-detail")&&(n.value=!0)}return(o,a)=>{const s=Qf,l=Ih;return Vt(),xe(l,{type:_n(n)?"iframe":"video",media:o.media,class:mc({"ig-media--reel":_n(r)})},{default:Pt(()=>[_n(n)?(Vt(),Rr("iframe",{key:1,src:o.media.href},null,8,dL)):(Vt(),xe(s,{key:o.media.cover.id,media:o.media.cover,onClick:i},null,8,["media"]))]),_:1},8,["type","media","class"])}}}),pL=rr(uL,[["__scopeId","data-v-c97987b5"]]),hL=cn({__name:"InstagramMediaAlbumCurrentIndex",props:{index:{},max:{}},setup(t){return(e,n)=>(Vt(),xe($T,{class:"ig-media__badge-index hidden-xs",color:"transparent",content:`${e.index} / ${e.max}`},null,8,["content"]))}}),mL=rr(hL,[["__scopeId","data-v-1873ee36"]]);/**
 * Vue 3 Carousel 0.3.1
 * (c) 2023
 * @license MIT
 */const $o={itemsToShow:1,itemsToScroll:1,modelValue:0,transition:300,autoplay:0,snapAlign:"center",wrapAround:!1,throttle:16,pauseAutoplayOnHover:!1,mouseDrag:!0,touchDrag:!0,dir:"ltr",breakpoints:void 0,i18n:{ariaNextSlide:"Navigate to next slide",ariaPreviousSlide:"Navigate to previous slide",ariaNavigateToSlide:"Navigate to slide {slideNumber}",ariaGallery:"Gallery",itemXofY:"Item {currentSlide} of {slidesCount}",iconArrowUp:"Arrow pointing upwards",iconArrowDown:"Arrow pointing downwards",iconArrowRight:"Arrow pointing to the right",iconArrowLeft:"Arrow pointing to the left"}},Ov={itemsToShow:{default:$o.itemsToShow,type:Number},itemsToScroll:{default:$o.itemsToScroll,type:Number},wrapAround:{default:$o.wrapAround,type:Boolean},throttle:{default:$o.throttle,type:Number},snapAlign:{default:$o.snapAlign,validator(t){return["start","end","center","center-even","center-odd"].includes(t)}},transition:{default:$o.transition,type:Number},breakpoints:{default:$o.breakpoints,type:Object},autoplay:{default:$o.autoplay,type:Number},pauseAutoplayOnHover:{default:$o.pauseAutoplayOnHover,type:Boolean},modelValue:{default:void 0,type:Number},mouseDrag:{default:$o.mouseDrag,type:Boolean},touchDrag:{default:$o.touchDrag,type:Boolean},dir:{default:$o.dir,validator(t){return["rtl","ltr"].includes(t)}},i18n:{default:$o.i18n,type:Object},settings:{default(){return{}},type:Object}};function fL({config:t,slidesCount:e}){const{snapAlign:n,wrapAround:r,itemsToShow:i=1}=t;if(r)return Math.max(e-1,0);let o;switch(n){case"start":o=e-i;break;case"end":o=e-1;break;case"center":case"center-odd":o=e-Math.ceil((i-.5)/2);break;case"center-even":o=e-Math.ceil(i/2);break;default:o=0;break}return Math.max(o,0)}function gL({config:t,slidesCount:e}){const{wrapAround:n,snapAlign:r,itemsToShow:i=1}=t;let o=0;if(n||i>e)return o;switch(r){case"start":o=0;break;case"end":o=i-1;break;case"center":case"center-odd":o=Math.floor((i-1)/2);break;case"center-even":o=Math.floor((i-2)/2);break;default:o=0;break}return o}function F0({val:t,max:e,min:n}){return e<n?t:Math.min(Math.max(t,n),e)}function $L({config:t,currentSlide:e,slidesCount:n}){const{snapAlign:r,wrapAround:i,itemsToShow:o=1}=t;let a=e;switch(r){case"center":case"center-odd":a-=(o-1)/2;break;case"center-even":a-=(o-2)/2;break;case"end":a-=o-1;break}return i?a:F0({val:a,max:n-o,min:0})}function Xw(t){return t?t.reduce((e,n)=>{var r;return n.type===Ts?[...e,...Xw(n.children)]:((r=n.type)===null||r===void 0?void 0:r.name)==="CarouselSlide"?[...e,n]:e},[]):[]}function B0({val:t,max:e,min:n=0}){return t>e?B0({val:t-(e+1),max:e,min:n}):t<n?B0({val:t+(e+1),max:e,min:n}):t}function yL(t,e){let n;return e?function(...r){const i=this;n||(t.apply(i,r),n=!0,setTimeout(()=>n=!1,e))}:t}function bL(t,e){let n;return function(...r){n&&clearTimeout(n),n=setTimeout(()=>{t(...r),n=null},e)}}function vL(t="",e={}){return Object.entries(e).reduce((n,[r,i])=>n.replace(`{${r}}`,String(i)),t)}var xL=cn({name:"ARIA",setup(){const t=Ns("config",Hd(Object.assign({},$o))),e=Ns("currentSlide",nr(0)),n=Ns("slidesCount",nr(0));return()=>zs("div",{class:["carousel__liveregion","carousel__sr-only"],"aria-live":"polite","aria-atomic":"true"},vL(t.i18n.itemXofY,{currentSlide:e.value+1,slidesCount:n.value}))}}),SL=cn({name:"Carousel",props:Ov,setup(t,{slots:e,emit:n,expose:r}){var i;const o=nr(null),a=nr([]),s=nr(0),l=nr(0),c=Hd(Object.assign({},$o));let d=Object.assign({},$o),u;const p=nr((i=t.modelValue)!==null&&i!==void 0?i:0),h=nr(0),f=nr(0),m=nr(0),$=nr(0);let b,S;$s("config",c),$s("slidesCount",l),$s("currentSlide",p),$s("maxSlide",m),$s("minSlide",$),$s("slideWidth",s);function v(){u=Object.assign({},t.breakpoints),d=Object.assign(Object.assign(Object.assign({},d),t),{i18n:Object.assign(Object.assign({},d.i18n),t.i18n),breakpoints:void 0}),C(d)}function T(){if(!u||!Object.keys(u).length)return;const mt=Object.keys(u).map(Q=>Number(Q)).sort((Q,Se)=>+Se-+Q);let ot=Object.assign({},d);mt.some(Q=>{const Se=window.matchMedia(`(min-width: ${Q}px)`).matches;return Se&&(ot=Object.assign(Object.assign({},ot),u[Q])),Se}),C(ot)}function C(mt){Object.entries(mt).forEach(([ot,Q])=>c[ot]=Q)}const R=bL(()=>{T(),A()},16);function A(){if(!o.value)return;const mt=o.value.getBoundingClientRect();s.value=mt.width/c.itemsToShow}function E(){l.value<=0||(f.value=Math.ceil((l.value-1)/2),m.value=fL({config:c,slidesCount:l.value}),$.value=gL({config:c,slidesCount:l.value}),c.wrapAround||(p.value=F0({val:p.value,max:m.value,min:$.value})))}du(()=>{Hv(()=>A()),setTimeout(()=>A(),1e3),T(),D(),window.addEventListener("resize",R,{passive:!0}),n("init")}),H4(()=>{S&&clearTimeout(S),b&&clearInterval(b),window.removeEventListener("resize",R,{passive:!0})});let M=!1;const P={x:0,y:0},_={x:0,y:0},y=Hd({x:0,y:0}),z=nr(!1),O=nr(!1),I=()=>{z.value=!0},k=()=>{z.value=!1};function G(mt){["INPUT","TEXTAREA","SELECT"].includes(mt.target.tagName)||(M=mt.type==="touchstart",M||mt.preventDefault(),!(!M&&mt.button!==0||pt.value)&&(P.x=M?mt.touches[0].clientX:mt.clientX,P.y=M?mt.touches[0].clientY:mt.clientY,document.addEventListener(M?"touchmove":"mousemove",X,!0),document.addEventListener(M?"touchend":"mouseup",q,!0)))}const X=yL(mt=>{O.value=!0,_.x=M?mt.touches[0].clientX:mt.clientX,_.y=M?mt.touches[0].clientY:mt.clientY;const ot=_.x-P.x,Q=_.y-P.y;y.y=Q,y.x=ot},c.throttle);function q(){const mt=c.dir==="rtl"?-1:1,ot=Math.sign(y.x)*.4,Q=Math.round(y.x/s.value+ot)*mt;if(Q&&!M){const Se=Mt=>{Mt.stopPropagation(),window.removeEventListener("click",Se,!0)};window.addEventListener("click",Se,!0)}Lt(p.value-Q),y.x=0,y.y=0,O.value=!1,document.removeEventListener(M?"touchmove":"mousemove",X,!0),document.removeEventListener(M?"touchend":"mouseup",q,!0)}function D(){!c.autoplay||c.autoplay<=0||(b=setInterval(()=>{c.pauseAutoplayOnHover&&z.value||et()},c.autoplay))}function lt(){b&&(clearInterval(b),b=null),D()}const pt=nr(!1);function Lt(mt){const ot=c.wrapAround?mt:F0({val:mt,max:m.value,min:$.value});p.value===ot||pt.value||(n("slide-start",{slidingToIndex:mt,currentSlideIndex:p.value,prevSlideIndex:h.value,slidesCount:l.value}),pt.value=!0,h.value=p.value,p.value=ot,S=setTimeout(()=>{if(c.wrapAround){const Q=B0({val:ot,max:m.value,min:0});Q!==p.value&&(p.value=Q,n("loop",{currentSlideIndex:p.value,slidingToIndex:mt}))}n("update:modelValue",p.value),n("slide-end",{currentSlideIndex:p.value,prevSlideIndex:h.value,slidesCount:l.value}),pt.value=!1,lt()},c.transition))}function et(){Lt(p.value+c.itemsToScroll)}function Y(){Lt(p.value-c.itemsToScroll)}const j={slideTo:Lt,next:et,prev:Y};$s("nav",j),$s("isSliding",pt);const ct=Mn(()=>$L({config:c,currentSlide:p.value,slidesCount:l.value}));$s("slidesToScroll",ct);const U=Mn(()=>{const mt=c.dir==="rtl"?-1:1,ot=ct.value*s.value*mt;return{transform:`translateX(${y.x-ot}px)`,transition:`${pt.value?c.transition:0}ms`,margin:c.wrapAround?`0 -${l.value*s.value}px`:"",width:"100%"}});function ft(){v(),T(),E(),A(),lt()}Object.keys(Ov).forEach(mt=>{["modelValue"].includes(mt)||Uo(()=>t[mt],ft)}),Uo(()=>t.modelValue,mt=>{mt!==p.value&&Lt(Number(mt))}),Uo(l,E),n("before-init"),v();const yt={config:c,slidesCount:l,slideWidth:s,next:et,prev:Y,slideTo:Lt,currentSlide:p,maxSlide:m,minSlide:$,middleSlide:f};r({updateBreakpointsConfigs:T,updateSlidesData:E,updateSlideWidth:A,initDefaultConfigs:v,restartCarousel:ft,slideTo:Lt,next:et,prev:Y,nav:j,data:yt});const It=e.default||e.slides,Jt=e.addons,pe=Hd(yt);return()=>{const mt=Xw(It==null?void 0:It(pe)),ot=(Jt==null?void 0:Jt(pe))||[];mt.forEach((xt,Wt)=>xt.props.index=Wt);let Q=mt;if(c.wrapAround){const xt=mt.map((Ht,Ae)=>c$(Ht,{index:-mt.length+Ae,isClone:!0,key:`clone-before-${Ae}`})),Wt=mt.map((Ht,Ae)=>c$(Ht,{index:mt.length+Ae,isClone:!0,key:`clone-after-${Ae}`}));Q=[...xt,...mt,...Wt]}a.value=mt,l.value=Math.max(mt.length,1);const Se=zs("ol",{class:"carousel__track",style:U.value,onMousedownCapture:c.mouseDrag?G:null,onTouchstartPassiveCapture:c.touchDrag?G:null},Q),Mt=zs("div",{class:"carousel__viewport"},Se);return zs("section",{ref:o,class:{carousel:!0,"is-sliding":pt.value,"is-dragging":O.value,"is-hover":z.value,"carousel--rtl":c.dir==="rtl"},dir:c.dir,"aria-label":c.i18n.ariaGallery,tabindex:"0",onMouseenter:I,onMouseleave:k},[Mt,ot,zs(xL)])}}}),Dv;(function(t){t.arrowUp="arrowUp",t.arrowDown="arrowDown",t.arrowRight="arrowRight",t.arrowLeft="arrowLeft"})(Dv||(Dv={}));var wL=cn({name:"CarouselSlide",props:{index:{type:Number,default:1},isClone:{type:Boolean,default:!1}},setup(t,{slots:e}){const n=Ns("config",Hd(Object.assign({},$o))),r=Ns("currentSlide",nr(0)),i=Ns("slidesToScroll",nr(0)),o=Ns("isSliding",nr(!1)),a=()=>t.index===r.value,s=()=>t.index===r.value-1,l=()=>t.index===r.value+1,c=()=>{const d=Math.floor(i.value),u=Math.ceil(i.value+n.itemsToShow-1);return t.index>=d&&t.index<=u};return()=>{var d;return zs("li",{style:{width:`${100/n.itemsToShow}%`},class:{carousel__slide:!0,"carousel__slide--clone":t.isClone,"carousel__slide--visible":c(),"carousel__slide--active":a(),"carousel__slide--prev":s(),"carousel__slide--next":l(),"carousel__slide--sliding":o.value},"aria-hidden":!c()},(d=e.default)===null||d===void 0?void 0:d.call(e))}}});const TL=cn({__name:"InstagramMediaAlbum",props:{media:{},profile:{},isFromDetail:{type:Boolean}},setup(t){const e=t,n=nr(!1);return Uo(()=>e.media.list,()=>{let r=!1;for(const i of e.media.list)i.isEditing&&(r=!0);n.value=r},{deep:!0}),(r,i)=>{const o=Uh,a=mL,s=Ih;return Vt(),xe(s,{type:"album",media:r.media},{default:Pt(()=>[ut(_n(SL),{"mouse-drag":!_n(n),"touch-drag":!_n(n),modelValue:r.media.listIndex,"onUpdate:modelValue":i[0]||(i[0]=l=>r.media.listIndex=l)},{default:Pt(()=>[(Vt(!0),Rr(Ts,null,uh(r.media.list,(l,c)=>(Vt(),xe(_n(wL),{key:c},{default:Pt(()=>[(Vt(),xe(o,{key:l.id,"context-menu":!1,media:l,profile:r.profile},null,8,["media","profile"]))]),_:2},1024))),128))]),_:1},8,["mouse-drag","touch-drag","modelValue"]),_n(n)?gr("",!0):(Vt(),xe(a,{key:0,index:r.media.currentIndex,max:r.media.itemsCount},null,8,["index","max"]))]),_:1},8,["media"])}}}),EL=rr(TL,[["__scopeId","data-v-ebeb6e1b"]]),Jf=Symbol.for("vuetify:v-slider");function IL(t,e,n){const r=n==="vertical",i=e.getBoundingClientRect(),o="touches"in t?t.touches[0]:t;return r?o.clientY-(i.top+i.height/2):o.clientX-(i.left+i.width/2)}function _L(t,e){return"touches"in t&&t.touches.length?t.touches[0][e]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0][e]:t[e]}const CL=Ys({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:t=>typeof t=="boolean"||t==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:t=>typeof t=="boolean"||t==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:t=>["vertical","horizontal"].includes(t)},reverse:Boolean,...hh(),...ph({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),RL=t=>{const e=Mn(()=>parseFloat(t.min)),n=Mn(()=>parseFloat(t.max)),r=Mn(()=>+t.step>0?parseFloat(t.step):0),i=Mn(()=>Math.max(d$(r.value),d$(e.value)));function o(a){if(a=parseFloat(a),r.value<=0)return a;const s=jv(a,e.value,n.value),l=e.value%r.value,c=Math.round((s-l)/r.value)*r.value+l;return parseFloat(Math.min(c,n.value).toFixed(i.value))}return{min:e,max:n,step:r,decimals:i,roundValue:o}},ML=t=>{let{props:e,steps:n,onSliderStart:r,onSliderMove:i,onSliderEnd:o,getActiveThumb:a}=t;const{isRtl:s}=lh(),l=co(e,"reverse"),c=Mn(()=>e.direction==="vertical"),d=Mn(()=>c.value!==l.value),{min:u,max:p,step:h,decimals:f,roundValue:m}=n,$=Mn(()=>parseInt(e.thumbSize,10)),b=Mn(()=>parseInt(e.tickSize,10)),S=Mn(()=>parseInt(e.trackSize,10)),v=Mn(()=>(p.value-u.value)/h.value),T=co(e,"disabled"),C=Mn(()=>e.error||e.disabled?void 0:e.thumbColor??e.color),R=Mn(()=>e.error||e.disabled?void 0:e.trackColor??e.color),A=Mn(()=>e.error||e.disabled?void 0:e.trackFillColor??e.color),E=hl(!1),M=hl(0),P=nr(),_=nr();function y(j){var ot;const ct=e.direction==="vertical",U=ct?"top":"left",ft=ct?"height":"width",yt=ct?"clientY":"clientX",{[U]:It,[ft]:Jt}=(ot=P.value)==null?void 0:ot.$el.getBoundingClientRect(),pe=_L(j,yt);let mt=Math.min(Math.max((pe-It-M.value)/Jt,0),1)||0;return(ct?d.value:d.value!==s.value)&&(mt=1-mt),m(u.value+mt*(p.value-u.value))}const z=j=>{o({value:y(j)}),E.value=!1,M.value=0},O=j=>{_.value=a(j),_.value&&(_.value.focus(),E.value=!0,_.value.contains(j.target)?M.value=IL(j,_.value,e.direction):(M.value=0,i({value:y(j)})),r({value:y(j)}))},I={passive:!0,capture:!0};function k(j){i({value:y(j)})}function G(j){j.stopPropagation(),j.preventDefault(),z(j),window.removeEventListener("mousemove",k,I),window.removeEventListener("mouseup",G)}function X(j){var ct;z(j),window.removeEventListener("touchmove",k,I),(ct=j.target)==null||ct.removeEventListener("touchend",X)}function q(j){var ct;O(j),window.addEventListener("touchmove",k,I),(ct=j.target)==null||ct.addEventListener("touchend",X,{passive:!1})}function D(j){j.preventDefault(),O(j),window.addEventListener("mousemove",k,I),window.addEventListener("mouseup",G,{passive:!1})}const lt=j=>{const ct=(j-u.value)/(p.value-u.value)*100;return jv(isNaN(ct)?0:ct,0,100)},pt=co(e,"showTicks"),Lt=Mn(()=>pt.value?e.ticks?Array.isArray(e.ticks)?e.ticks.map(j=>({value:j,position:lt(j),label:j.toString()})):Object.keys(e.ticks).map(j=>({value:parseFloat(j),position:lt(parseFloat(j)),label:e.ticks[j]})):v.value!==1/0?j4(v.value+1).map(j=>{const ct=u.value+j*h.value;return{value:ct,position:lt(ct)}}):[]:[]),et=Mn(()=>Lt.value.some(j=>{let{label:ct}=j;return!!ct})),Y={activeThumbRef:_,color:co(e,"color"),decimals:f,disabled:T,direction:co(e,"direction"),elevation:co(e,"elevation"),hasLabels:et,isReversed:l,indexFromEnd:d,min:u,max:p,mousePressed:E,numTicks:v,onSliderMousedown:D,onSliderTouchstart:q,parsedTicks:Lt,parseMouseMove:y,position:lt,readonly:co(e,"readonly"),rounded:co(e,"rounded"),roundValue:m,showTicks:pt,startOffset:M,step:h,thumbSize:$,thumbColor:C,thumbLabel:co(e,"thumbLabel"),ticks:co(e,"ticks"),tickSize:b,trackColor:R,trackContainerRef:P,trackFillColor:A,trackSize:S,vertical:c};return $s(Jf,Y),Y},kL=Ys({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},...pc()},"VSliderThumb"),PL=El()({name:"VSliderThumb",directives:{Ripple:yT},props:kL(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=Ns(Jf),{isRtl:o,rtlClasses:a}=lh();if(!i)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:s,step:l,disabled:c,thumbSize:d,thumbLabel:u,direction:p,isReversed:h,vertical:f,readonly:m,elevation:$,mousePressed:b,decimals:S,indexFromEnd:v}=i,{textColorClasses:T,textColorStyles:C}=bT(s),{pageup:R,pagedown:A,end:E,home:M,left:P,right:_,down:y,up:z}=X4,O=[R,A,E,M,P,_,y,z],I=Mn(()=>l.value?[1,2,3]:[1,5,10]);function k(X,q){if(!O.includes(X.key))return;X.preventDefault();const D=l.value||.1,lt=(t.max-t.min)/D;if([P,_,y,z].includes(X.key)){const Lt=(f.value?[o.value?P:_,h.value?y:z]:v.value!==o.value?[P,z]:[_,z]).includes(X.key)?1:-1,et=X.shiftKey?2:X.ctrlKey?1:0;q=q+Lt*D*I.value[et]}else if(X.key===M)q=t.min;else if(X.key===E)q=t.max;else{const pt=X.key===A?1:-1;q=q-pt*D*(lt>100?lt/10:10)}return Math.max(t.min,Math.min(t.max,q))}function G(X){const q=k(X,t.modelValue);q!=null&&r("update:modelValue",q)}return Il(()=>{const X=bs(v.value?100-t.position:t.position,"%"),{elevationClasses:q}=fh(Mn(()=>c.value?void 0:$.value));return ut("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":t.focused,"v-slider-thumb--pressed":t.focused&&b.value},t.class,a.value],style:[{"--v-slider-thumb-position":X,"--v-slider-thumb-size":bs(d.value)},t.style],role:"slider",tabindex:c.value?-1:0,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.modelValue,"aria-readonly":!!m.value,"aria-orientation":p.value,onKeydown:m.value?void 0:G},[ut("div",{class:["v-slider-thumb__surface",T.value,q.value],style:{...C.value}},null),u$(ut("div",{class:["v-slider-thumb__ripple",T.value],style:C.value},null),[[q4("ripple"),t.ripple,null,{circle:!0,center:!0}]]),ut(vT,{origin:"bottom center"},{default:()=>{var D;return[u$(ut("div",{class:"v-slider-thumb__label-container"},[ut("div",{class:["v-slider-thumb__label"]},[ut("div",null,[((D=n["thumb-label"])==null?void 0:D.call(n,{modelValue:t.modelValue}))??t.modelValue.toFixed(l.value?S.value:1)])])]),[[Y4,u.value&&t.focused||u.value==="always"]])]}})])}),{}}}),AL=Ys({start:{type:Number,required:!0},stop:{type:Number,required:!0},...pc()},"VSliderTrack"),LL=El()({name:"VSliderTrack",props:AL(),emits:{},setup(t,e){let{slots:n}=e;const r=Ns(Jf);if(!r)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:i,parsedTicks:o,rounded:a,showTicks:s,tickSize:l,trackColor:c,trackFillColor:d,trackSize:u,vertical:p,min:h,max:f,indexFromEnd:m}=r,{roundedClasses:$}=gh(a),{backgroundColorClasses:b,backgroundColorStyles:S}=Xc(d),{backgroundColorClasses:v,backgroundColorStyles:T}=Xc(c),C=Mn(()=>`inset-${p.value?"block":"inline"}-${m.value?"end":"start"}`),R=Mn(()=>p.value?"height":"width"),A=Mn(()=>({[C.value]:"0%",[R.value]:"100%"})),E=Mn(()=>t.stop-t.start),M=Mn(()=>({[C.value]:bs(t.start,"%"),[R.value]:bs(E.value,"%")})),P=Mn(()=>s.value?(p.value?o.value.slice().reverse():o.value).map((y,z)=>{var I;const O=y.value!==h.value&&y.value!==f.value?bs(y.position,"%"):void 0;return ut("div",{key:y.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":y.position>=t.start&&y.position<=t.stop,"v-slider-track__tick--first":y.value===h.value,"v-slider-track__tick--last":y.value===f.value}],style:{[C.value]:O}},[(y.label||n["tick-label"])&&ut("div",{class:"v-slider-track__tick-label"},[((I=n["tick-label"])==null?void 0:I.call(n,{tick:y,index:z}))??y.label])])}):[]);return Il(()=>ut("div",{class:["v-slider-track",$.value,t.class],style:[{"--v-slider-track-size":bs(u.value),"--v-slider-tick-size":bs(l.value)},t.style]},[ut("div",{class:["v-slider-track__background",v.value,{"v-slider-track__background--opacity":!!i.value||!d.value}],style:{...A.value,...T.value}},null),ut("div",{class:["v-slider-track__fill",b.value],style:{...M.value,...S.value}},null),s.value&&ut("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":s.value==="always"}]},[P.value])])),{}}}),OL=Ys({...xT(),...CL(),...ST(),modelValue:{type:[Number,String],default:0}},"VSlider"),DL=El()({name:"VSlider",props:OL(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,start:t=>!0,end:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=nr(),{rtlClasses:o}=lh(),a=RL(t),s=Uv(t,"modelValue",void 0,R=>a.roundValue(R??a.min.value)),{min:l,max:c,mousePressed:d,roundValue:u,onSliderMousedown:p,onSliderTouchstart:h,trackContainerRef:f,position:m,hasLabels:$,readonly:b}=ML({props:t,steps:a,onSliderStart:()=>{r("start",s.value)},onSliderEnd:R=>{let{value:A}=R;const E=u(A);s.value=E,r("end",E)},onSliderMove:R=>{let{value:A}=R;return s.value=u(A)},getActiveThumb:()=>{var R;return(R=i.value)==null?void 0:R.$el}}),{isFocused:S,focus:v,blur:T}=wT(t),C=Mn(()=>m(s.value));return Il(()=>{const R=p$.filterProps(t),A=!!(t.label||n.label||n.prepend);return ut(p$,Up({class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||$.value,"v-slider--focused":S.value,"v-slider--pressed":d.value,"v-slider--disabled":t.disabled},o.value,t.class],style:t.style},R,{focused:S.value}),{...n,prepend:A?E=>{var M,P;return ut(Ts,null,[((M=n.label)==null?void 0:M.call(n,E))??(t.label?ut(TT,{id:E.id.value,class:"v-slider__label",text:t.label},null):void 0),(P=n.prepend)==null?void 0:P.call(n,E)])}:void 0,default:E=>{let{id:M,messagesId:P}=E;return ut("div",{class:"v-slider__container",onMousedown:b.value?void 0:p,onTouchstartPassive:b.value?void 0:h},[ut("input",{id:M.value,name:t.name||M.value,disabled:!!t.disabled,readonly:!!t.readonly,tabindex:"-1",value:s.value},null),ut(LL,{ref:f,start:0,stop:C.value},{"tick-label":n["tick-label"]}),ut(PL,{ref:i,"aria-describedby":P.value,focused:S.value,min:l.value,max:c.value,modelValue:s.value,"onUpdate:modelValue":_=>s.value=_,position:C.value,elevation:t.elevation,onFocus:v,onBlur:T,ripple:t.ripple},{"thumb-label":n["thumb-label"]})])}})}),{}}}),FL=cn({__name:"InstagramMediaVideoCoverSelector",props:{media:{},maxLength:{}},emits:["updateCoverTime"],setup(t,{emit:e}){const n=e,r=t,i=nr(typeof r.media.coverTime=="number"?r.media.coverTime:0);function o(){n("updateCoverTime",i.value)}return(a,s)=>r.maxLength>0?(Vt(),xe(DL,{key:0,modelValue:_n(i),"onUpdate:modelValue":s[0]||(s[0]=l=>hc(i)?i.value=l:null),color:"white",max:a.maxLength,class:"ig-media--video-slider",onEnd:o,"thumb-label":"always"},null,8,["modelValue","max"])):gr("",!0)}}),BL=rr(FL,[["__scopeId","data-v-58107bd0"]]),zL=["src","autoplay"],NL=cn({__name:"InstagramMediaVideo",props:{media:{},isFromDetail:{type:Boolean},coverSelector:{type:Boolean},playable:{type:Boolean}},async setup(t){let e,n;const r=t,i=nr(!1);Mn(()=>r.media.collection==="reels");const o=([e,n]=ch(()=>dh(r.media)),e=await e,n(),e),a=nr(null),s=nr(0);function l(c){a.value&&(a.value.currentTime=c,r.media.setCoverTime(c),r.media.save())}return du(()=>{a.value&&a.value.addEventListener("loadedmetadata",()=>{!a.value||typeof r.media.cover=="object"||r.media.cover||(a.value.currentTime=r.media.coverTime,s.value=a.value.duration)},!1)}),Uo(()=>i.value,c=>{if(!a.value||!r.playable)return!1;c?a.value.play():a.value.pause()}),(c,d)=>{const u=BL,p=Qf,h=Yw,f=Ih;return Vt(),xe(f,{type:"video",media:c.media},{default:Pt(()=>[!c.media.cover||c.media.coverTime?(Vt(),Rr(Ts,{key:0},[pn("video",{ref_key:"videoRef",ref:a,src:_n(o),autoplay:_n(i),onClick:d[0]||(d[0]=m=>i.value=!_n(i))},null,8,zL),c.coverSelector?(Vt(),xe(u,{key:0,media:c.media,"max-length":_n(s),onUpdateCoverTime:l},null,8,["media","max-length"])):gr("",!0)],64)):typeof c.media.cover=="object"?(Vt(),xe(p,{key:1,media:c.media.cover,onClick:d[1]||(d[1]=m=>i.value=!0)},null,8,["media"])):gr("",!0),c.media.isEditing?(Vt(),xe(h,{key:2,media:c.media},null,8,["media"])):gr("",!0)]),_:1},8,["media"])}}}),VL=rr(NL,[["__scopeId","data-v-7db9e365"]]),Uh=cn({__name:"InstagramMedia",props:{profile:{},media:{},isFromDetail:{type:Boolean},contextMenu:{type:Boolean}},setup(t){return(e,n)=>{const r=Qf,i=VL,o=EL,a=pL;return Vt(),Rr(Ts,null,[(Vt(),xe(Qd,null,{default:Pt(()=>[e.media.type==="image"?(Vt(),xe(r,{key:0,"is-from-detail":e.isFromDetail,"context-menu":e.contextMenu,media:e.media},null,8,["is-from-detail","context-menu","media"])):gr("",!0)]),_:1})),(Vt(),xe(Qd,null,{default:Pt(()=>[e.media.type==="video"?(Vt(),xe(i,{key:0,"is-from-detail":e.isFromDetail,"context-menu":e.contextMenu,media:e.media,"cover-selector":""},null,8,["is-from-detail","context-menu","media"])):gr("",!0)]),_:1})),e.media.type==="album"?(Vt(),xe(o,{key:0,"is-from-detail":e.isFromDetail,"context-menu":e.contextMenu,media:e.media,profile:e.profile},null,8,["is-from-detail","context-menu","media","profile"])):gr("",!0),e.media.type==="iframe"?(Vt(),xe(a,{key:1,"is-from-detail":e.isFromDetail,"context-menu":e.contextMenu,media:e.media},null,8,["is-from-detail","context-menu","media"])):gr("",!0)],64)}}}),tg=cn({__name:"contenteditable",props:{tag:String,contenteditable:{type:[Boolean,String],default:!0},modelValue:String,noHtml:{type:Boolean,default:!0},noNl:{type:Boolean,default:!1}},emits:{returned:String,"update:modelValue":String},setup(t,{emit:e}){const n=t;function r(d,u,p){return d.split(u).join(p)}const i=nr();function o(){return n.noHtml?i.value.innerText:i.value.innerHTML}function a(d){n.noHtml?i.value.innerText=d:i.value.innerHTML=d}function s(d){e("update:modelValue",o())}function l(d){d.preventDefault();let u=(d.originalEvent||d).clipboardData.getData("text/plain");n.noNl&&(u=r(u,`\r
`," "),u=r(u,`
`," "),u=r(u,"\r"," ")),window.document.execCommand("insertText",!1,u)}function c(d){d.key=="Enter"&&n.noNl&&(d.preventDefault(),e("returned",o()))}return du(()=>{var d;a((d=n.modelValue)!=null?d:"")}),Uo(()=>n.modelValue,(d,u)=>{d!=o()&&a(d??"")}),Uo(()=>n.noHtml,(d,u)=>{var p;a((p=n.modelValue)!=null?p:"")}),Uo(()=>n.tag,(d,u)=>{var p;a((p=n.modelValue)!=null?p:"")},{flush:"post"}),(d,u)=>(Vt(),xe(Z4(t.tag),{contenteditable:t.contenteditable,onInput:s,onBlur:s,onPaste:l,onKeypress:c,ref_key:"element",ref:i},null,40,["contenteditable"]))}}),UL=cn({__name:"InstagramUserProfileUsername",props:{profile:{},editable:{type:Boolean},size:{default:"medium"}},emits:["update"],setup(t,{emit:e}){const n=t,r=nr(n.profile.username??"");function i(){n.profile.updateUsername(r.value)}return(o,a)=>(Vt(),Rr("div",{class:mc(["ig-profile__header__username",{"font-weight-bold text-subtitle-2":o.size==="medium"}])},[ut(_n(tg),{tag:"span",contenteditable:o.editable,spellcheck:"false",modelValue:_n(r),"onUpdate:modelValue":a[0]||(a[0]=s=>hc(r)?r.value=s:null),"no-html":"","no-nl":"",onBlur:i},null,8,["contenteditable","modelValue"]),o.profile.verified?(Vt(),xe(os,{key:0,icon:"mdi-check-decagram"})):gr("",!0)],2))}}),Gh=rr(UL,[["__scopeId","data-v-636bd9bf"]]),GL=cn({__name:"InstagramUserAvatar",props:{avatar:{},size:{default:120}},async setup(t){let e,n;const r=t;let i;return r.avatar&&(i=([e,n]=ch(()=>dh(r.avatar)),e=await e,n(),e)),(o,a)=>(Vt(),xe(ET,{size:o.size,class:"ig-profile-avatar"},{default:Pt(()=>[_n(i)?(Vt(),xe(Xv,{key:0,src:_n(i),cover:""},null,8,["src"])):gr("",!0)]),_:1},8,["size"]))}}),$u=rr(GL,[["__scopeId","data-v-d3faf140"]]),WL={class:"ig-post-header px-4 py-3"},HL=cn({__name:"InstagramPostHeader",props:{profile:{}},setup(t){return(e,n)=>{const r=$u,i=Gh;return Vt(),Rr("div",WL,[ut(Es,null,{default:Pt(()=>[ut(mo,{class:"flex-grow-0"},{default:Pt(()=>[ut(r,{avatar:e.profile.avatar,size:32},null,8,["avatar"])]),_:1}),ut(mo,{class:"flex-grow-1 pl-1","align-self":"center"},{default:Pt(()=>[ut(i,{size:"medium",profile:e.profile},null,8,["profile"])]),_:1}),ut(mo,{class:"flex-grow-0"},{default:Pt(()=>[Da(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3})])}}}),Zw=rr(HL,[["__scopeId","data-v-c5da89c4"]]),jL={class:"ig-media-detail__interaction"},qL=cn({__name:"InstagramPostDetailMobile",props:{media:{},profile:{}},setup(t){return(e,n)=>{const r=Zw,i=Uh,o=zx,a=Bx;return Vt(),xe($h,{class:"ig-media-detail"},{default:Pt(()=>[ut(r,{profile:e.profile},{default:Pt(()=>[Da(e.$slots,"context-menu",{},void 0,!0)]),_:3},8,["profile"]),ut(i,{media:e.media,profile:e.profile,"is-from-detail":""},null,8,["media","profile"]),pn("div",jL,[ut(a,{date:e.media.date},{prepend:Pt(()=>[ut(o)]),append:Pt(()=>[ut(Jd,{class:"ma-0"})]),_:1},8,["date"])])]),_:3})}}}),YL=rr(qL,[["__scopeId","data-v-dd011ac9"]]),XL={},ZL={height:"24",viewBox:"0 0 24 24",width:"24"},KL=pn("path",{d:"M15.83 10.997a1.167 1.167 0 1 0 1.167 1.167 1.167 1.167 0 0 0-1.167-1.167Zm-6.5 1.167a1.167 1.167 0 1 0-1.166 1.167 1.167 1.167 0 0 0 1.166-1.167Zm5.163 3.24a3.406 3.406 0 0 1-4.982.007 1 1 0 1 0-1.557 1.256 5.397 5.397 0 0 0 8.09 0 1 1 0 0 0-1.55-1.263ZM12 .503a11.5 11.5 0 1 0 11.5 11.5A11.513 11.513 0 0 0 12 .503Zm0 21a9.5 9.5 0 1 1 9.5-9.5 9.51 9.51 0 0 1-9.5 9.5Z"},null,-1),QL=[KL];function JL(t,e){return Vt(),Rr("svg",ZL,QL)}const t9=rr(XL,[["render",JL]]),e9={};function n9(t,e){const n=t9;return Vt(),xe(Eh,null,{default:Pt(()=>[ut(Es,{"no-gutters":""},{default:Pt(()=>[ut(mo,{class:"flex-grow-0 pl-4 pr-0 py-0","align-self":"center"},{default:Pt(()=>[ut(n)]),_:1}),ut(mo,{class:"flex-grow-1"},{default:Pt(()=>[ut(IT,{placeholder:"Add a comment...",variant:"solo",flat:"","hide-details":""},{append:Pt(()=>[ut(vs,{class:"mr-2",variant:"flat",text:"Post"})]),_:1})]),_:1})]),_:1})]),_:1})}const r9=rr(e9,[["render",n9],["__scopeId","data-v-462f7b0f"]]),i9={},o9={class:"ig-user-comments"};function a9(t,e){return Vt(),Rr("div",o9,[ut(Jd,{class:"ma-0"}),Da(t.$slots,"default",{},()=>[ut(Es,{"no-gutters":"",class:"text-center fill-height"},{default:Pt(()=>[ut(mo,{"align-self":"center"},{default:Pt(()=>[Tr(" No comments here. ")]),_:1})]),_:1})],!0),ut(Jd,{class:"ma-0"})])}const s9=rr(i9,[["render",a9],["__scopeId","data-v-ef89412f"]]),l9={class:"px-4 py-3"},c9=["textContent"],d9=cn({__name:"InstagramPostComment",props:{media:{},profile:{}},setup(t){return(e,n)=>{const r=$u,i=Gh;return Vt(),xe(Eh,{class:"ig-user-comment fill-height"},{default:Pt(()=>[pn("div",l9,[ut(Es,null,{default:Pt(()=>[ut(mo,{class:"flex-grow-0"},{default:Pt(()=>[ut(r,{avatar:e.profile.avatar,size:32},null,8,["avatar"])]),_:1}),ut(mo,{class:"flex-grow-1 pl-1","align-self":"center"},{default:Pt(()=>[ut(i,{size:"medium",class:"d-inline mr-1",profile:e.profile},null,8,["profile"]),pn("p",{textContent:xs(e.media.caption)},null,8,c9)]),_:1})]),_:1})])]),_:1})}}}),u9=rr(d9,[["__scopeId","data-v-8ae9ff0e"]]),p9={class:"ig-media-detail__interaction"},h9=cn({__name:"InstagramPostDetailDesktop",props:{media:{},profile:{}},setup(t){return(e,n)=>{const r=Uh,i=Zw,o=u9,a=s9,s=zx,l=Bx,c=r9;return Vt(),xe($h,{class:"ig-media-detail ig-media-detail--desktop"},{default:Pt(()=>[ut(Es,{class:"ma-0"},{default:Pt(()=>[ut(mo,{class:mc(["pa-0 ig-media-detail__media",{"ig-media-detail__media--reel":e.media.collection==="reels"}]),"align-self":"center"},{default:Pt(()=>[ut(r,{media:e.media,profile:e.profile,"is-from-detail":""},null,8,["media","profile"])]),_:1},8,["class"]),ut(mo,{class:"pa-0"},{default:Pt(()=>[pn("div",p9,[ut(i,{profile:e.profile},{default:Pt(()=>[Da(e.$slots,"context-menu",{},void 0,!0)]),_:3},8,["profile"]),ut(a,null,{default:Pt(()=>[e.media.caption?(Vt(),xe(o,{key:0,profile:e.profile,media:e.media},null,8,["profile","media"])):gr("",!0)]),_:1}),ut(l,{date:e.media.date},{prepend:Pt(()=>[ut(s)]),append:Pt(()=>[ut(Jd,{class:"ma-0"})]),_:1},8,["date"]),ut(c)])]),_:3})]),_:3})]),_:3})}}}),m9=rr(h9,[["__scopeId","data-v-1d6020d3"]]),f9=cn({__name:"InstagramPostDetail",props:{media:{},profile:{}},setup(t){return(e,n)=>{const r=m9,i=YL;return e.$vuetify.display.smAndUp?(Vt(),xe(r,{key:0,media:e.media,profile:e.profile},{"context-menu":Pt(()=>[Da(e.$slots,"context-menu")]),_:3},8,["media","profile"])):(Vt(),xe(i,{key:1,media:e.media,profile:e.profile},{"context-menu":Pt(()=>[Da(e.$slots,"context-menu")]),_:3},8,["media","profile"]))}}}),g9=cn({__name:"InstagramPost",props:{profile:{},media:{},contextMenu:{type:Boolean}},setup(t){const e=t,n=Vv(),r=nr(null),i=nr(!1);function o(){n.smAndUp.value&&!e.media.isEditing&&(i.value=!0)}return _T(r,()=>{n.smAndUp.value||(i.value=!0)},{modifiers:{prevent:!0}}),Uo(()=>i.value,a=>{e.media.setDetailView(a)}),Uo(()=>e.media.isDetailView,a=>{i.value=a}),(a,s)=>{const l=Uh,c=Nx,d=f9;return Vt(),Rr("div",{ref_key:"postContainerRef",ref:r,class:"ig-post-container cursor-pointer",onClick:o},[ut(l,qv(Yv(a.$props)),null,16),ut(Gp,{modelValue:_n(i),"onUpdate:modelValue":s[0]||(s[0]=u=>hc(i)?i.value=u:null)},{default:Pt(()=>[ut(d,{media:a.media,profile:a.profile},{"context-menu":Pt(()=>[ut(vs,{icon:""},{default:Pt(()=>[ut(os,{icon:"mdi-dots-vertical"}),ut(c,{activator:"parent",media:a.media,width:240,offset:[8,0],location:"bottom right"},null,8,["media"])]),_:1})]),_:1},8,["media","profile"])]),_:1},8,["modelValue"])],512)}}}),$9=rr(g9,[["__scopeId","data-v-89673784"]]),y9=cn({__name:"InstagramUserGrid",props:{user:{},collection:{}},setup(t){const e=t,n=nr(),r=nr(!1);function i(){e.user.save()}function o(){r.value=!0}function a(){r.value=!1}return(s,l)=>{const c=$9,d=Fx;return Vt(),xe(Zv,{class:"ig-profile-page__grid-container px-0"},{default:Pt(()=>[pn("div",{class:mc(["ig-profile-page__grid",{"ig-profile-page__grid--dragging":_n(r)}]),ref_key:"gridListRef",ref:n},[s.user.media.collections[s.collection].length>0?(Vt(),xe(_n(K4),{key:0,list:e.user.media.collections[s.collection],"onUpdate:list":[l[0]||(l[0]=u=>e.user.media.collections[s.collection]=u),i],axis:"xy",class:"v-row","use-drag-handle":"","press-delay":100,"press-threshold":100,onSortStart:o,onSortEnd:a},{default:Pt(()=>[(Vt(!0),Rr(Ts,null,uh(s.user.media.collections[s.collection],(u,p)=>(Vt(),xe(_n(Q4),{key:u.id,index:p,class:"ig-profile-page__grid__item v-col v-col-4"},{default:Pt(()=>[ut(_n(J4),{class:"ig-profile-page__grid__drag-handle"},{default:Pt(()=>[ut(os,{icon:"mdi-drag",color:"white"})]),_:1}),ut(c,{profile:s.user.profile,media:u,"context-menu":""},null,8,["profile","media"])]),_:2},1032,["index"]))),128))]),_:1},8,["list"])):(Vt(),xe($h,{key:1,height:500,border:"",elevation:0},{default:Pt(()=>[ut(d,{user:s.user},null,8,["user"])]),_:1}))],2)]),_:1})}}}),b9={class:"ig-profile-page__tabs"},v9=["onClick"],x9=cn({__name:"InstagramUserTabs",props:{media:{},active:{}},emits:["select"],setup(t,{emit:e}){const n=e,r=t,i=Mn(()=>{let o=[{name:"posts",label:"Posts",icon:"mdi-grid"}];return r.media.hasCollection("reels")&&r.media.collections.reels.length>0&&o.push({name:"reels",label:"Reels",icon:"mdi-play-box-multiple-outline"}),o});return(o,a)=>(Vt(),Rr("div",b9,[(Vt(!0),Rr(Ts,null,uh(_n(i),(s,l)=>(Vt(),Rr("div",{key:l,class:mc(["ig-profile-page__tabs__tab",{"ig-profile-page__tabs__tab--active":o.active===s.name}]),onClick:c=>n("select",s.name)},[ut(os,{size:"15"},{default:Pt(()=>[Tr(xs(s.icon),1)]),_:2},1024),Tr(" "+xs(s.label),1)],10,v9))),128))]))}}),S9=rr(x9,[["__scopeId","data-v-75751132"]]),w9=["href"],T9=cn({__name:"InstagramUserProfileWebsite",props:{user:{}},setup(t){const e=t,n=Mn(()=>new URL(e.user.profile.website).host);return(r,i)=>r.user.profile.website?(Vt(),Rr("a",{key:0,class:"ig-profile-page__header__website",href:e.user.profile.website,target:"_blank"},[ut(os,{icon:"mdi-link-variant",size:16}),Tr(" "+xs(_n(n)),1)],8,w9)):gr("",!0)}}),E9=rr(T9,[["__scopeId","data-v-99602a51"]]),I9=cn({__name:"InstagramUserProfileBiography",props:{biography:{}},emits:["update"],setup(t,{emit:e}){const n=t,r=e,i=nr(n.biography??"");function o(){r("update",i.value)}return(a,s)=>(Vt(),xe(_n(tg),{tag:"p",class:"ig-profile-page__header__biography",contenteditable:"",spellcheck:"false",modelValue:_n(i),"onUpdate:modelValue":s[0]||(s[0]=l=>hc(i)?i.value=l:null),"no-html":!0,onBlur:o},null,8,["modelValue"]))}}),_9=cn({__name:"InstagramUserProfileName",props:{user:{}},emits:["update"],setup(t,{emit:e}){const n=t,r=nr(n.user.profile.name??"");function i(){n.user.profile.updateName(r.value)}return(o,a)=>_n(r)?(Vt(),xe(_n(tg),{key:0,tag:"p",class:"ig-profile-page__header__name",contenteditable:"",spellcheck:"false",modelValue:_n(r),"onUpdate:modelValue":a[0]||(a[0]=s=>hc(r)?r.value=s:null),"no-html":"","no-nl":"",onBlur:i},null,8,["modelValue"])):gr("",!0)}}),C9=rr(_9,[["__scopeId","data-v-5da3c4f7"]]),R9={class:"ig-profile-page__header__inner"},M9=cn({__name:"InstagramUserProfileInner",props:{user:{}},setup(t){return(e,n)=>{const r=C9,i=I9,o=E9;return Vt(),Rr("div",R9,[ut(r,{user:e.user},null,8,["user"]),ut(i,{biography:e.user.profile.biography,onUpdate:n[0]||(n[0]=a=>e.user.profile.updateBiography(a))},null,8,["biography"]),ut(o,{user:e.user},null,8,["user"])])}}}),Kw=rr(M9,[["__scopeId","data-v-dd9755a6"]]),eg=t=>(N0("data-v-23b5582e"),t=t(),V0(),t),k9=["textContent"],P9=eg(()=>pn("span",null,"posts",-1)),A9=["textContent"],L9=eg(()=>pn("span",null,"followers",-1)),O9=["textContent"],D9=eg(()=>pn("span",null,"following",-1)),F9=cn({__name:"InstagramUserProfileStats",props:{profile:{},mobile:{type:Boolean}},setup(t){return(e,n)=>(Vt(),Rr("ul",{class:mc(["ig-profile-page__header__stats",{"ig-profile-page__header__stats--mobile":e.mobile}])},[pn("li",null,[pn("b",{textContent:xs(e.profile.posts_count)},null,8,k9),Tr(),P9]),pn("li",null,[pn("b",{textContent:xs(e.profile.followers_count)},null,8,A9),Tr(),L9]),pn("li",null,[pn("b",{textContent:xs(e.profile.follows_count)},null,8,O9),Tr(),D9])],2))}}),Qw=rr(F9,[["__scopeId","data-v-23b5582e"]]),Jw=cn({__name:"InstagramUserProfileAvatarEditor",props:{user:{},size:{default:120}},setup(t){const e=t,{files:n,open:r,reset:i,onChange:o}=uu({accept:"image/jpg, image/jpeg, image/png",multiple:!1});return o(async a=>{if(!a)return;const s=a[0];await e.user.profile.updateAvatar(s)}),(a,s)=>{const l=$u;return Vt(),xe(Qd,null,{default:Pt(()=>[ut(l,{onDblclick:_n(r),avatar:a.user.profile.avatar,size:a.size},null,8,["onDblclick","avatar","size"])]),_:1})}}}),B9={class:"ig-profile-page__header"},z9={class:"ig-profile-page__header__top py-4"},N9={class:"mt-2 mb-8"},V9={class:"my-4 mt-n6"},U9=cn({__name:"InstagramUserProfileMobile",props:{user:{}},setup(t){return(e,n)=>{const r=tT("router-link"),i=Gh,o=Jw,a=Qw,s=Kw;return Vt(),Rr("div",B9,[pn("div",z9,[ut(r,{to:{name:"index"}},{default:Pt(()=>[ut(os,{icon:"mdi-arrow-left",class:"mr-4",style:{"margin-top":"-2px"}})]),_:1}),ut(i,{editable:"",profile:e.user.profile,size:"large",class:"mb-5"},null,8,["profile"])]),pn("div",N9,[ut(Es,null,{default:Pt(()=>[ut(mo,{cols:"3",class:"ig-profile-page__header__avatar text-left"},{default:Pt(()=>[ut(o,{size:72,user:e.user},null,8,["user"])]),_:1}),ut(mo,{cols:"9","align-self":"center"},{default:Pt(()=>[ut(a,{mobile:"",profile:e.user.profile},null,8,["profile"])]),_:1})]),_:1})]),pn("div",V9,[ut(s,{user:e.user},null,8,["user"])])])}}}),G9=rr(U9,[["__scopeId","data-v-ce86e357"]]),W9={class:"ig-profile-page__header py-12"},H9=cn({__name:"InstagramUserProfileDesktop",props:{user:{}},setup(t){return(e,n)=>{const r=Jw,i=Gh,o=Qw,a=Kw;return Vt(),Rr("div",W9,[ut(Es,null,{default:Pt(()=>[ut(mo,{cols:"4",class:"ig-profile-page__header__avatar text-center"},{default:Pt(()=>[ut(r,{user:e.user},null,8,["user"])]),_:1}),ut(mo,{cols:"8"},{default:Pt(()=>[ut(i,{editable:"",profile:e.user.profile,size:"large",class:"mb-5"},null,8,["profile"]),ut(o,{profile:e.user.profile,class:"mb-5"},null,8,["profile"]),ut(a,{user:e.user},null,8,["user"])]),_:1})]),_:1})])}}}),j9=rr(H9,[["__scopeId","data-v-6be001e8"]]),q9=cn({__name:"InstagramUserProfile",props:{user:{}},setup(t){return(e,n)=>{const r=j9,i=G9;return e.$vuetify.display.smAndUp?(Vt(),xe(r,{key:0,user:e.user},null,8,["user"])):(Vt(),xe(i,{key:1,user:e.user},null,8,["user"]))}}}),Y9=cn({__name:"InstagramUser",props:{user:{}},setup(t){const e=nr("posts");return(n,r)=>{const i=q9,o=S9,a=y9;return Vt(),xe(Eh,{color:"transparent",class:"ig-profile-page"},{default:Pt(()=>[ut(Zv,{class:"py-0"},{default:Pt(()=>[ut(i,{user:n.user},null,8,["user"]),ut(o,{media:n.user.media,active:_n(e),onSelect:r[0]||(r[0]=s=>e.value=s)},null,8,["media","active"]),ut(a,{user:n.user,collection:_n(e)},null,8,["user","collection"])]),_:1})]),_:1})}}}),X9=cn({__name:"DialogContent",props:{title:{},height:{default:"60vh"}},setup(t){return(e,n)=>(Vt(),xe($h,{height:e.height},{default:Pt(()=>[ut(CT,{textContent:xs(e.title)},null,8,["textContent"]),ut(RT,null,{default:Pt(()=>[Da(e.$slots,"default",{},void 0,!0)]),_:3})]),_:3},8,["height"]))}}),ng=rr(X9,[["__scopeId","data-v-20c91c81"]]),Z9=cn({__name:"InstagramMediaCreate",props:{user:{}},emits:["close"],setup(t,{emit:e}){const n=e;function r(i){n("close")}return(i,o)=>{const a=Fx,s=ng;return Vt(),xe(Gp,{"content-class":"ig-media-create","max-width":700,onClose:o[0]||(o[0]=l=>n("close"))},{default:Pt(()=>[ut(s,{title:"Create new post"},{default:Pt(()=>[ut(a,{class:"mx-4",user:i.user,onAdd:r},null,8,["user"])]),_:1})]),_:1})}}}),K9={},Q9={height:"24",viewBox:"0 0 24 24",width:"24"},J9=pn("polygon",{fill:"none",points:"13.941 13.953 7.581 16.424 10.06 10.056 16.42 7.585 13.941 13.953",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1),tO=pn("polygon",{"fill-rule":"evenodd",points:"10.06 10.056 13.949 13.945 7.581 16.424 10.06 10.056"},null,-1),eO=pn("circle",{cx:"12.001",cy:"12.005",fill:"none",r:"10.5",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1),nO=[J9,tO,eO];function rO(t,e){return Vt(),Rr("svg",Q9,nO)}const t4=rr(K9,[["render",rO]]),iO={},oO={height:"24",viewBox:"0 0 24 24",width:"24"},aO=pn("path",{d:"M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1),sO=pn("line",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",x1:"6.545",x2:"17.455",y1:"12.001",y2:"12.001"},null,-1),lO=pn("line",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",x1:"12.003",x2:"12.003",y1:"6.545",y2:"17.455"},null,-1),cO=[aO,sO,lO];function dO(t,e){return Vt(),Rr("svg",oO,cO)}const e4=rr(iO,[["render",dO]]),uO={},pO={height:"22",viewBox:"0 0 24 24",width:"24"},hO=pn("path",{d:"M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"2"},null,-1),mO=[hO];function fO(t,e){return Vt(),Rr("svg",pO,mO)}const n4=rr(uO,[["render",fO]]),Yc={docs:"https://dxlliv.github.io/planner/docs/",source:"https://github.com/dxlliv/planner",support:"https://patreon.com/dxlliv"},gO=Ys({bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...G0(),...pc(),...MT(),...ph(),...hh(),...Nv({name:"bottom-navigation"}),...mh({tag:"header"}),...kT({modelValue:!0,selectedClass:"v-btn--selected"}),...z0()},"VBottomNavigation"),$O=El()({name:"VBottomNavigation",props:gO(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=eT(),{borderClasses:i}=W0(t),{backgroundColorClasses:o,backgroundColorStyles:a}=Xc(co(t,"bgColor")),{densityClasses:s}=PT(t),{elevationClasses:l}=fh(t),{roundedClasses:c}=gh(t),{ssrBootStyles:d}=H0(),u=Mn(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),p=co(t,"active"),{layoutItemStyles:h}=Gv({id:t.name,order:Mn(()=>parseInt(t.order,10)),position:Mn(()=>"bottom"),layoutSize:Mn(()=>p.value?u.value:0),elementSize:u,active:p,absolute:co(t,"absolute")});return AT(t,LT),Wv({VBtn:{color:co(t,"color"),density:co(t,"density"),stacked:Mn(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),Il(()=>ut(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":p.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},r.value,o.value,i.value,s.value,l.value,c.value,t.class],style:[a.value,h.value,{height:bs(u.value),transform:`translateY(${bs(p.value?0:100,"%")})`},d.value,t.style]},{default:()=>[n.default&&ut("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}}),yO=cn({__name:"InstagramNavigationDrawerHorizontal",props:{user:{}},emits:["create","export"],setup(t,{emit:e}){const n=e;return(r,i)=>{const o=n4,a=af,s=e4,l=t4,c=$u;return Vt(),xe($O,{class:"ig-navigation-drawer ig-navigation-drawer--horizontal",height:"50"},{default:Pt(()=>[ut(vs,{to:{name:"index"}},{default:Pt(()=>[ut(o)]),_:1}),ut(vs,{href:_n(Yc).support,target:"_blank"},{default:Pt(()=>[ut(a)]),_:1},8,["href"]),ut(vs,{onClick:i[0]||(i[0]=d=>n("create"))},{default:Pt(()=>[ut(s)]),_:1}),ut(vs,{href:_n(Yc).docs},{default:Pt(()=>[ut(l)]),_:1},8,["href"]),ut(vs,{to:r.user.route},{default:Pt(()=>[r.user.ready?(Vt(),xe(c,{key:0,avatar:r.user.profile.avatar,size:26},null,8,["avatar"])):gr("",!0)]),_:1},8,["to"])]),_:1})}}}),bO=rr(yO,[["__scopeId","data-v-71fe3c6b"]]),vO=pn("p",null,[Tr(" Changes have been made to the profile"),pn("br"),Tr(" and are now stored in your browser. ")],-1),xO=pn("p",{class:"mt-4"},[Tr(" You could export your changes as a ZIP"),pn("br"),Tr(" and overwrite your profile configuration in"),pn("br"),pn("code",null,"/public/user/instagram/{user}")],-1),SO=pn("br",null,null,-1),wO=cn({__name:"InstagramUserExport",props:{user:{}},setup(t){return(e,n)=>{const r=ng;return Vt(),xe(r,{title:"Profile export"},{default:Pt(()=>[ut(Es,{class:"ma-0 fill-height"},{default:Pt(()=>[ut(mo,{"align-self":"center",class:"text-center"},{default:Pt(()=>[vO,xO,SO,ut(vs,{color:"primary",onClick:n[0]||(n[0]=i=>e.user.storage.exportAsZip())},{default:Pt(()=>[Tr(" Export as ZIP ")]),_:1})]),_:1})]),_:1})]),_:1})}}}),Wh=t=>(N0("data-v-2c758cf0"),t=t(),V0(),t),TO=Wh(()=>pn("p",null,[Tr(" I've recently integrated "),pn("a",{class:"font-italic",href:"https://pqina.nl/pintura/",target:"_blank"},"Pintura"),Tr(" in the planner,"),pn("br"),Tr(" a powerful JavaScript Image Editor by PQINA. ")],-1)),EO=Wh(()=>pn("p",{class:"mt-4"},[Tr(" You can try it out in this demo, but is limited"),pn("br"),Tr(" and has watermarks because Pintura isn't free. ")],-1)),IO=Wh(()=>pn("p",{class:"mt-4"},[Tr(" Support the goal on Patreon and I'll organize"),pn("br"),Tr(" to provide a Premium version of this planner,"),pn("br"),Tr(" with a valid license and the video editor too. ")],-1)),_O=Wh(()=>pn("br",null,null,-1)),CO=cn({__name:"MainPremium",setup(t){return(e,n)=>{const r=ng;return Vt(),xe(r,{title:"Unlock Premium Editing"},{default:Pt(()=>[ut(Es,{"no-gutters":"",class:"ma-0 fill-height"},{default:Pt(()=>[ut(mo,{"align-self":"center",class:"text-center"},{default:Pt(()=>[TO,EO,IO,_O,ut(vs,{href:_n(Yc).support,target:"_blank",color:"primary"},{default:Pt(()=>[Tr("Become a Patron")]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})}}}),RO=rr(CO,[["__scopeId","data-v-2c758cf0"]]),MO={},kO={height:"24",viewBox:"0 0 24 24",width:"24"},PO=pn("path",{d:"M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1),AO=pn("line",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",x1:"16.511",x2:"22",y1:"16.511",y2:"22"},null,-1),LO=[PO,AO];function OO(t,e){return Vt(),Rr("svg",kO,LO)}const DO=rr(MO,[["render",OO]]),FO=cn({__name:"InstagramNavigationDrawerVertical",props:{user:{},nav:{}},emits:["create","export"],setup(t,{emit:e}){const n=e;return(r,i)=>{const o=OT,a=n4,s=t4,l=DO,c=af,d=e4,u=$u,p=RO,h=wO;return Vt(),xe(qw,{class:"ig-navigation-drawer",permanent:r.$vuetify.display.smAndUp,rail:r.$vuetify.display.mdAndDown,width:244,"rail-width":72},{default:Pt(()=>[ut(jd,{class:"pt-7 pb-3 hidden-md-and-down"},{default:Pt(()=>[ut(uo,null,{default:Pt(()=>[ut(o)]),_:1})]),_:1}),ut(jd,{density:"compact",nav:"",class:"mt-2 mt-lg-0"},{default:Pt(()=>[ut(uo,{title:"Home",to:{name:"index"}},{prepend:Pt(()=>[ut(a)]),_:1}),(Vt(!0),Rr(Ts,null,uh(r.nav,f=>(Vt(),xe(uo,qv(Yv(f.item)),{prepend:Pt(()=>[f.icon==="IconExplore"?(Vt(),xe(s,{key:0})):gr("",!0),f.icon==="IconMagnify"?(Vt(),xe(l,{key:1})):gr("",!0),f.icon==="IconHeart"?(Vt(),xe(c,{key:2})):gr("",!0)]),_:2},1040))),256)),ut(uo,{title:"Create",onClick:i[0]||(i[0]=f=>n("create"))},{prepend:Pt(()=>[ut(d)]),_:1}),r.user.ready?(Vt(),xe(uo,{key:0,title:"Profile",to:r.user.route},{prepend:Pt(()=>[(Vt(),xe(Qd,null,{default:Pt(()=>[ut(u,{avatar:r.user.profile.avatar,size:26},null,8,["avatar"])]),_:1}))]),_:1},8,["to"])):gr("",!0)]),_:1}),ut(jd,{density:"compact",nav:"",class:"ig-navigation-drawer__list-bottom"},{default:Pt(()=>[ut(uo,{title:"Premium",href:"javascript:void('premium')"},{prepend:Pt(()=>[ut(os,{icon:"mdi-shimmer"})]),default:Pt(()=>[ut(Gp,{"max-width":700,activator:"parent"},{default:Pt(()=>[ut(p)]),_:1})]),_:1}),r.user.hasLocalChanges?(Vt(),xe(uo,{key:0,title:"Export","base-color":"primary",onClick:i[1]||(i[1]=f=>n("export"))},{prepend:Pt(()=>[ut(os,{icon:"mdi-content-save-move-outline"})]),default:Pt(()=>[ut(Gp,{"max-width":700,activator:"parent"},{default:Pt(()=>[ut(h,{user:r.user},null,8,["user"])]),_:1})]),_:1})):gr("",!0)]),_:1})]),_:1},8,["permanent","rail"])}}}),BO=cn({__name:"InstagramNavigationDrawer",props:{user:{}},setup(t){const e=[{item:{title:"Source",href:Yc.source,target:"_blank"},icon:"IconMagnify"},{item:{title:"Readme",href:Yc.docs},icon:"IconExplore"},{item:{title:"Support",href:Yc.support,target:"_blank"},icon:"IconHeart"}],n=nr(!1);return(r,i)=>{const o=FO,a=bO,s=Z9;return Vt(),Rr(Ts,null,[ut(o,{class:"hidden-xs",user:r.user,nav:e,onCreate:i[0]||(i[0]=l=>n.value=!0)},null,8,["user"]),ut(a,{class:"hidden-sm-and-up",user:r.user,onCreate:i[1]||(i[1]=l=>n.value=!0)},null,8,["user"]),ut(s,{user:r.user,modelValue:_n(n),"onUpdate:modelValue":i[2]||(i[2]=l=>hc(n)?n.value=l:null),onClose:i[3]||(i[3]=l=>n.value=!1)},null,8,["user","modelValue"])],64)}}}),zO=rr(BO,[["__scopeId","data-v-77b84566"]]),NO=Ys({...pc(),...nT()},"VLayout"),VO=El()({name:"VLayout",props:NO(),setup(t,e){let{slots:n}=e;const{layoutClasses:r,layoutStyles:i,getLayoutItem:o,items:a,layoutRef:s}=rT(t);return Il(()=>{var l;return ut("div",{ref:s,class:[r.value,t.class],style:[i.value,t.style]},[(l=n.default)==null?void 0:l.call(n)])}),{getLayoutItem:o,items:a}}}),UO=Ys({scrollable:Boolean,...pc(),...mh({tag:"main"})},"VMain"),GO=El()({name:"VMain",props:UO(),setup(t,e){let{slots:n}=e;const{mainStyles:r}=iT(),{ssrBootStyles:i}=H0();return Il(()=>ut(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[r.value,i.value,t.style]},{default:()=>{var o,a;return[t.scrollable?ut("div",{class:"v-main__scroller"},[(o=n.default)==null?void 0:o.call(n)]):(a=n.default)==null?void 0:a.call(n)]}})),{}}}),WO=pn("div",{id:"drawer-editor"},null,-1),HO=cn({__name:"LayoutInstagram",props:{user:{}},setup(t){return(e,n)=>{const r=zO,i=DT;return Vt(),xe(VO,null,{default:Pt(()=>[ut(r,{user:e.user},null,8,["user"]),WO,ut(GO,null,{default:Pt(()=>[Da(e.$slots,"default"),ut(i,{class:"mt-1"})]),_:3})]),_:3})}}}),YO=cn({__name:"PageUser",setup(t){const e=oT(),n=aT(),r=Fv(),i=n.params.platform?n.params.platform.toString():e.platform.default,o=n.params.username.toString(),a=r.getUser(o,i);return a&&a.media.fetch(),(s,l)=>{const c=Y9;return Vt(),xe(HO,{user:_n(a)},{default:Pt(()=>[ut(c,{user:_n(a)},null,8,["user"])]),_:1},8,["user"])}}});export{YO as default};
