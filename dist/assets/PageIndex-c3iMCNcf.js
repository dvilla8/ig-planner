import{_ as ce,V as Ke,a as he,b as _e,c as Re,d as Je,e as Xe,f as Ye,m as Ct,u as Vt,g as je,h as Ie,i as Pt,j as kt,k as St,l as Rt,n as It,o as Ot,p as Et,M as At,q as Ft,r as Ut,s as Lt,t as Tt,v as jt,w as Oe,x as Dt,y as Bt,z as Mt,A as zt,B as Nt,C as Gt,L as Ht,D as Wt,E as qt,F as Ze,I as Qe,G as $e,H as Kt,J as et,K as Z,N as oe,O as Jt,P as Xt,Q as Yt}from"./VRow-CnD2Mdi1.js";import{o as S,c as te,a as Zt,d as H,r as C,b as D,w as x,e as se,f as c,g as Qt,u as g,h as ie,i as xe,p as ae,j as en,k as re,l as Ee,m as tt,n as $,q as K,s as le,t as de,v as tn,F as J,S as nn,x as Ae,y as ee,z as an,A as Y,B as Fe,C as ue,D as nt,I as Ve,E as Pe,G as rn,H as ln,J as on,K as sn,L as G,M as at,N as un,O as cn,P as rt,Q as lt,R as dn,T as ot,U as fn,V as vn,W as mn,X as ne,Y as it,Z as pn,_ as gn,$ as De,a0 as Be,a1 as yn,a2 as st,a3 as ut,a4 as ct,a5 as hn,a6 as _n,a7 as dt,a8 as $n,a9 as xn,aa as Me,ab as bn,ac as wn,ad as Cn,ae as Vn,af as Pn}from"./index-D3z7LLPK.js";const kn={},Sn={class:"ig-intro text-center"},Rn=Zt('<h2 class="hidden-md-and-up" data-v-e5af98a7> Plan your Instagram grid<br data-v-e5af98a7>like a pro with IG Planner </h2><h2 class="hidden-sm-and-down" data-v-e5af98a7>Plan your Instagram grid like a pro</h2><p class="mt-5 text-grey-darken-1" data-v-e5af98a7><a href="https://github.com/dxlliv/ig-planner" data-v-e5af98a7>dxlliv/ig-planner</a> let you preview what your profile grid will look like.<br class="hidden-xs" data-v-e5af98a7> Clone the repository and build your Instagram grid with a text editor. </p>',3),In=[Rn];function On(e,n){return S(),te("div",Sn,In)}const En=ce(kn,[["render",On],["__scopeId","data-v-e5af98a7"]]),An=H({__name:"UserSelectorMenu",props:{user:{}},setup(e){const{user:n}=e,a=C(!1);function t(){n.isRemovable||(a.value=!0),n.remove()}return(r,l)=>(S(),D(Je,{"content-class":"ig-profile-selector__context-menu",activator:"parent",transition:"slide-y-transition","close-on-back":"","open-delay":5e3,offset:[7,0]},{default:x(()=>[c(Ke,null,{default:x(()=>[c(he,{href:r.user.profile.public_profile,target:"_blank"},{default:x(()=>[c(_e,null,{default:x(()=>[se("Open on Instagram")]),_:1})]),_:1},8,["href"]),c(Re),c(he,{onClick:l[0]||(l[0]=f=>t()),class:"text-red"},{default:x(()=>[c(_e,null,{default:x(()=>[se("Remove")]),_:1})]),_:1})]),_:1})]),_:1}))}}),Fn={class:"ig-profile-avatar__container"},Un=H({__name:"UserSelectorAvatar",props:{avatar:{},size:{default:"120px"}},async setup(e){let n,a;const t=e;let r;return t.avatar&&(r=URL.createObjectURL(([n,a]=Qt(()=>t.avatar.file),n=await n,a(),n))),(l,f)=>(S(),te("div",Fn,[c(Ye,{size:l.size,class:"ig-profile-avatar"},{default:x(()=>[g(r)?(S(),D(Xe,{key:0,src:g(r)},null,8,["src"])):ie("",!0),xe(l.$slots,"inner",{},void 0,!0)]),_:3},8,["size"]),xe(l.$slots,"default",{},void 0,!0)]))}}),ft=ce(Un,[["__scopeId","data-v-b1d784b9"]]),Ln=ae({id:String,text:String,...en(Ct({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),Tn=re()({name:"VTooltip",props:Ln(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:a}=n;const t=Ee(e,"modelValue"),{scopeId:r}=Vt(),l=tt(),f=$(()=>e.id||`v-tooltip-${l}`),d=C(),s=$(()=>e.location.split(" ").length>1?e.location:e.location+" center"),u=$(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),v=$(()=>e.transition?e.transition:t.value?"scale-transition":"fade-transition"),i=$(()=>K({"aria-describedby":f.value},e.activatorProps));return le(()=>{const h=je.filterProps(e);return c(je,K({ref:d,class:["v-tooltip",e.class],style:e.style,id:f.value},h,{modelValue:t.value,"onUpdate:modelValue":y=>t.value=y,transition:v.value,absolute:!0,location:s.value,origin:u.value,persistent:!0,role:"tooltip",activatorProps:i.value,_disableGlobalStack:!0},r),{activator:a.activator,default:function(){var _;for(var y=arguments.length,o=new Array(y),m=0;m<y;m++)o[m]=arguments[m];return((_=a.default)==null?void 0:_.call(a,...o))??e.text}})}),Ie({},d)}}),jn={};function Dn(e,n){return S(),D(Pt,{color:"grey-darken-3"},{default:x(()=>[c(Tn,{"content-class":"text-overline",activator:"parent",offset:[16,3]},{default:x(()=>[se(" Local ")]),_:1})]),_:1})}const Bn=ce(jn,[["render",Dn]]),Mn=["textContent"],zn=["href"],vt=H({__name:"UserSelector",props:{user:{},add:{type:Boolean}},setup(e){const n=de({enabled:!1,x:0,y:0});function a(t){t.preventDefault(),n.enabled=!1,n.x=t.clientX,n.y=t.clientY,Y(()=>{n.enabled=!0})}return(t,r)=>{const l=Bn,f=ft,d=An,s=tn("router-link");return S(),te("div",{class:an(["ig-profile-selector",{"ig-profile-selector--add":t.add}])},[t.user?(S(),te(J,{key:0},[c(s,{to:{name:"user",params:{username:t.user.username}},onContextmenu:a},{default:x(()=>[(S(),D(nn,null,{default:x(()=>[c(f,{avatar:t.user.profile.avatar},{inner:x(()=>[t.user.hasLocalChanges?(S(),D(l,{key:0})):ie("",!0)]),_:1},8,["avatar"])]),_:1})),ee("h3",{class:"mt-4",textContent:Ae(t.user.username)},null,8,Mn),g(n).enabled?(S(),D(d,{key:0,modelValue:g(n).enabled,"onUpdate:modelValue":r[0]||(r[0]=u=>g(n).enabled=u),user:t.user},null,8,["modelValue","user"])):ie("",!0)]),_:1},8,["to"]),ee("a",{class:"text-blue-grey-lighten-4",href:t.user.profile.public_profile,target:"_blank"},"ðŸ¡¥",8,zn)],64)):ie("",!0),xe(t.$slots,"default")],2)}}}),Nn=H({__name:"UserEditorDialog",props:{title:{}},emits:["close"],setup(e,{emit:n}){const a=n;return(t,r)=>(S(),D(It,{"content-class":"ig-user-export","max-width":700,onClose:r[0]||(r[0]=l=>a("close"))},{default:x(()=>[c(kt,null,{default:x(()=>[c(St,{textContent:Ae(t.title)},null,8,["textContent"]),c(Rt,null,{default:x(()=>[xe(t.$slots,"default")]),_:3})]),_:3})]),_:3}))}}),Gn=ae({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Fe(),...Ot({transition:{component:Et}})},"VCounter"),mt=re()({name:"VCounter",functional:!0,props:Gn(),setup(e,n){let{slots:a}=n;const t=$(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return le(()=>c(At,{transition:e.transition},{default:()=>[ue(c("div",{class:["v-counter",e.class],style:e.style},[a.default?a.default({counter:t.value,max:e.max,value:e.value}):t.value]),[[nt,e.active]])]})),{}}}),Hn=ae({floating:Boolean,...Fe()},"VFieldLabel"),pe=re()({name:"VFieldLabel",props:Hn(),setup(e,n){let{slots:a}=n;return le(()=>c(Ft,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},a)),{}}}),Wn=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],Ue=ae({appendInnerIcon:Ve,bgColor:String,clearable:Boolean,clearIcon:{type:Ve,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:Ve,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>Wn.includes(e)},"onClick:clear":Pe(),"onClick:appendInner":Pe(),"onClick:prependInner":Pe(),...Fe(),...Ut(),...Lt(),...rn()},"VField"),Le=re()({name:"VField",inheritAttrs:!1,props:{id:String,...Tt(),...Ue()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:a,emit:t,slots:r}=n;const{themeClasses:l}=ln(e),{loaderClasses:f}=jt(e),{focusClasses:d,isFocused:s,focus:u,blur:v}=Oe(e),{InputIcon:i}=Dt(e),{roundedClasses:h}=Bt(e),{rtlClasses:y}=on(),o=$(()=>e.dirty||e.active),m=$(()=>!e.singleLine&&!!(e.label||r.label)),_=tt(),p=$(()=>e.id||`input-${_}`),B=$(()=>`${p.value}-messages`),W=C(),T=C(),q=C(),V=$(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:E,backgroundColorStyles:R}=Mt(sn(e,"bgColor")),{textColorClasses:I,textColorStyles:z}=zt($(()=>e.error||e.disabled?void 0:o.value&&s.value?e.color:e.baseColor));G(o,P=>{if(m.value){const k=W.value.$el,A=T.value.$el;requestAnimationFrame(()=>{const j=Nt(k),F=A.getBoundingClientRect(),U=F.x-j.x,N=F.y-j.y-(j.height/2-F.height/2),w=F.width/.75,L=Math.abs(w-j.width)>1?{maxWidth:at(w)}:void 0,M=getComputedStyle(k),fe=getComputedStyle(A),Ce=parseFloat(M.transitionDuration)*1e3||150,ve=parseFloat(fe.getPropertyValue("--v-field-label-scale")),me=fe.getPropertyValue("color");k.style.visibility="visible",A.style.visibility="hidden",Gt(k,{transform:`translate(${U}px, ${N}px) scale(${ve})`,color:me,...L},{duration:Ce,easing:qt,direction:P?"normal":"reverse"}).finished.then(()=>{k.style.removeProperty("visibility"),A.style.removeProperty("visibility")})})}},{flush:"post"});const b=$(()=>({isActive:o,isFocused:s,controlRef:q,blur:v,focus:u}));function O(P){P.target!==document.activeElement&&P.preventDefault()}return le(()=>{var U,N,w;const P=e.variant==="outlined",k=r["prepend-inner"]||e.prependInnerIcon,A=!!(e.clearable||r.clear),j=!!(r["append-inner"]||e.appendInnerIcon||A),F=()=>r.label?r.label({...b.value,label:e.label,props:{for:p.value}}):e.label;return c("div",K({class:["v-field",{"v-field--active":o.value,"v-field--appended":j,"v-field--center-affix":e.centerAffix??!V.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":k,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!F(),[`v-field--variant-${e.variant}`]:!0},l.value,E.value,d.value,f.value,h.value,y.value,e.class],style:[R.value,e.style],onClick:O},a),[c("div",{class:"v-field__overlay"},null),c(Ht,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:r.loader}),k&&c("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&c(i,{key:"prepend-icon",name:"prependInner"},null),(U=r["prepend-inner"])==null?void 0:U.call(r,b.value)]),c("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&m.value&&c(pe,{key:"floating-label",ref:T,class:[I.value],floating:!0,for:p.value,style:z.value},{default:()=>[F()]}),c(pe,{ref:W,for:p.value},{default:()=>[F()]}),(N=r.default)==null?void 0:N.call(r,{...b.value,props:{id:p.value,class:"v-field__input","aria-describedby":B.value},focus:u,blur:v})]),A&&c(Wt,{key:"clear"},{default:()=>[ue(c("div",{class:"v-field__clearable",onMousedown:L=>{L.preventDefault(),L.stopPropagation()}},[r.clear?r.clear():c(i,{name:"clear"},null)]),[[nt,e.dirty]])]}),j&&c("div",{key:"append",class:"v-field__append-inner"},[(w=r["append-inner"])==null?void 0:w.call(r,b.value),e.appendInnerIcon&&c(i,{key:"append-icon",name:"appendInner"},null)]),c("div",{class:["v-field__outline",I.value],style:z.value},[P&&c(J,null,[c("div",{class:"v-field__outline__start"},null),m.value&&c("div",{class:"v-field__outline__notch"},[c(pe,{ref:T,floating:!0,for:p.value},{default:()=>[F()]})]),c("div",{class:"v-field__outline__end"},null)]),V.value&&m.value&&c(pe,{ref:T,floating:!0,for:p.value},{default:()=>[F()]})])])}),{controlRef:q}}});function pt(e){const n=Object.keys(Le.props).filter(a=>!un(a)&&a!=="class"&&a!=="style");return cn(e,n)}const qn=["color","file","time","date","datetime-local","week","month"],Kn=ae({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...Ze(),...Ue()},"VTextField"),gt=re()({name:"VTextField",directives:{Intersect:Qe},inheritAttrs:!1,props:Kn(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:a,emit:t,slots:r}=n;const l=Ee(e,"modelValue"),{isFocused:f,focus:d,blur:s}=Oe(e),u=$(()=>typeof e.counterValue=="function"?e.counterValue(l.value):typeof e.counterValue=="number"?e.counterValue:(l.value??"").toString().length),v=$(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),i=$(()=>["plain","underlined"].includes(e.variant));function h(V,E){var R,I;!e.autofocus||!V||(I=(R=E[0].target)==null?void 0:R.focus)==null||I.call(R)}const y=C(),o=C(),m=C(),_=$(()=>qn.includes(e.type)||e.persistentPlaceholder||f.value||e.active);function p(){var V;m.value!==document.activeElement&&((V=m.value)==null||V.focus()),f.value||d()}function B(V){t("mousedown:control",V),V.target!==m.value&&(p(),V.preventDefault())}function W(V){p(),t("click:control",V)}function T(V){V.stopPropagation(),p(),Y(()=>{l.value=null,ot(e["onClick:clear"],V)})}function q(V){var R;const E=V.target;if(l.value=E.value,(R=e.modelModifiers)!=null&&R.trim&&["text","search","password","tel","url"].includes(e.type)){const I=[E.selectionStart,E.selectionEnd];Y(()=>{E.selectionStart=I[0],E.selectionEnd=I[1]})}}return le(()=>{const V=!!(r.counter||e.counter!==!1&&e.counter!=null),E=!!(V||r.details),[R,I]=rt(a),{modelValue:z,...b}=$e.filterProps(e),O=pt(e);return c($e,K({ref:y,modelValue:l.value,"onUpdate:modelValue":P=>l.value=P,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":i.value},e.class],style:e.style},R,b,{centerAffix:!i.value,focused:f.value}),{...r,default:P=>{let{id:k,isDisabled:A,isDirty:j,isReadonly:F,isValid:U}=P;return c(Le,K({ref:o,onMousedown:B,onClick:W,"onClick:clear":T,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},O,{id:k.value,active:_.value||j.value,dirty:j.value||e.dirty,disabled:A.value,focused:f.value,error:U.value===!1}),{...r,default:N=>{let{props:{class:w,...L}}=N;const M=ue(c("input",K({ref:m,value:l.value,onInput:q,autofocus:e.autofocus,readonly:F.value,disabled:A.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:p,onBlur:s},L,I),null),[[lt("intersect"),{handler:h},null,{once:!0}]]);return c(J,null,[e.prefix&&c("span",{class:"v-text-field__prefix"},[c("span",{class:"v-text-field__prefix__text"},[e.prefix])]),r.default?c("div",{class:w,"data-no-activator":""},[r.default(),M]):dn(M,{class:w}),e.suffix&&c("span",{class:"v-text-field__suffix"},[c("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:E?P=>{var k;return c(J,null,[(k=r.details)==null?void 0:k.call(r,P),V&&c(J,null,[c("span",null,null),c(mt,{active:e.persistentCounter||f.value,value:u.value,max:v.value},r.counter)])])}:void 0})}),Ie({},y,o,m)}}),Jn=H({__name:"UserEditorFieldString",props:{data:{}},setup(e){return(n,a)=>(S(),D(gt,{placeholder:n.data.placeholder,"hide-details":""},null,8,["placeholder"]))}}),Xn=H({__name:"UserEditorFieldAvatar",emits:["update"],setup(e,{emit:n}){const a=n,{files:t,open:r,reset:l,onChange:f}=Kt({accept:"image/jpg, image/jpeg, image/png",multiple:!1});f(async s=>{if(!s)return;const u=s[0];d.value=await fn({file:{blob:Promise.resolve(u)}}),a("update",u)});const d=C(void 0);return(s,u)=>(S(),D(Ye,{class:"cursor-pointer",variant:"outlined",size:64,onClick:g(r)},{default:x(()=>[g(d)?(S(),D(Xe,{key:1,src:g(d)},null,8,["src"])):(S(),D(et,{key:0,icon:"mdi-account"}))]),_:1},8,["onClick"]))}}),we=e=>{if(e=g(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let n in e)return!0;return!1}return!!String(e).length},yt=e=>(e=g(e),Array.isArray(e)?e.length:typeof e=="object"?Object.keys(e).length:String(e).length);function Q(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t=>(t=g(t),!we(t)||n.every(r=>(r.lastIndex=0,r.test(t))))}Q(/^[a-zA-Z]*$/);Q(/^[a-zA-Z0-9]*$/);Q(/^\d*(\.\d+)?$/);const Yn=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;Q(Yn);function Zn(e){return n=>!we(n)||yt(n)<=g(e)}function Qn(e){return{$validator:Zn(e),$message:n=>{let{$params:a}=n;return`The maximum length allowed is ${a.max}`},$params:{max:e,type:"maxLength"}}}function ea(e){return n=>!we(n)||yt(n)>=g(e)}function ta(e){return{$validator:ea(e),$message:n=>{let{$params:a}=n;return`This field should be at least ${a.min} characters long`},$params:{min:e,type:"minLength"}}}function na(e){return typeof e=="string"&&(e=e.trim()),we(e)}var aa={$validator:na,$message:"Value is required",$params:{type:"required"}};const ra=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;Q(ra);Q(/(^[0-9]*$)|(^-[0-9]+$)/);Q(/^[-]?\d*(\.\d+)?$/);function ze(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,t)}return a}function X(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?ze(Object(a),!0).forEach(function(t){la(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ze(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function la(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function Ne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((a,t)=>(n.includes(t)||(a[t]=g(e[t])),a),{})}function be(e){return typeof e=="function"}function oa(e){return pn(e)||gn(e)}function ht(e,n,a){let t=e;const r=n.split(".");for(let l=0;l<r.length;l++){if(!t[r[l]])return a;t=t[r[l]]}return t}function ke(e,n,a){return $(()=>e.some(t=>ht(n,t,{[a]:!1})[a]))}function Ge(e,n,a){return $(()=>e.reduce((t,r)=>{const l=ht(n,r,{[a]:!1})[a]||[];return t.concat(l)},[]))}function _t(e,n,a,t){return e.call(t,g(n),g(a),t)}function $t(e){return e.$valid!==void 0?!e.$valid:!e}function ia(e,n,a,t,r,l,f){let{$lazy:d,$rewardEarly:s}=r,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],v=arguments.length>8?arguments[8]:void 0,i=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0;const y=C(!!t.value),o=C(0);a.value=!1;const m=G([n,t].concat(u,h),()=>{if(d&&!t.value||s&&!i.value&&!a.value)return;let _;try{_=_t(e,n,v,f)}catch(p){_=Promise.reject(p)}o.value++,a.value=!!o.value,y.value=!1,Promise.resolve(_).then(p=>{o.value--,a.value=!!o.value,l.value=p,y.value=$t(p)}).catch(p=>{o.value--,a.value=!!o.value,l.value=p,y.value=!0})},{immediate:!0,deep:typeof n=="object"});return{$invalid:y,$unwatch:m}}function sa(e,n,a,t,r,l,f,d){let{$lazy:s,$rewardEarly:u}=t;const v=()=>({}),i=$(()=>{if(s&&!a.value||u&&!d.value)return!1;let h=!0;try{const y=_t(e,n,f,l);r.value=y,h=$t(y)}catch(y){r.value=y}return h});return{$unwatch:v,$invalid:i}}function ua(e,n,a,t,r,l,f,d,s,u,v){const i=C(!1),h=e.$params||{},y=C(null);let o,m;e.$async?{$invalid:o,$unwatch:m}=ia(e.$validator,n,i,a,t,y,r,e.$watchTargets,s,u,v):{$invalid:o,$unwatch:m}=sa(e.$validator,n,a,t,y,r,s,u);const _=e.$message;return{$message:be(_)?$(()=>_(Ne({$pending:i,$invalid:o,$params:Ne(h),$model:n,$response:y,$validator:l,$propertyPath:d,$property:f}))):_||"",$params:h,$pending:i,$invalid:o,$response:y,$unwatch:m}}function ca(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=g(e),a=Object.keys(n),t={},r={},l={};let f=null;return a.forEach(d=>{const s=n[d];switch(!0){case be(s.$validator):t[d]=s;break;case be(s):t[d]={$validator:s};break;case d==="$validationGroups":f=s;break;case d.startsWith("$"):l[d]=s;break;default:r[d]=s}}),{rules:t,nestedValidators:r,config:l,validationGroups:f}}const da="__root";function fa(e,n,a,t,r,l,f,d,s){const u=Object.keys(e),v=t.get(r,e),i=C(!1),h=C(!1),y=C(0);if(v){if(!v.$partial)return v;v.$unwatch(),i.value=v.$dirty.value}const o={$dirty:i,$path:r,$touch:()=>{i.value||(i.value=!0)},$reset:()=>{i.value&&(i.value=!1)},$commit:()=>{}};return u.length?(u.forEach(m=>{o[m]=ua(e[m],n,o.$dirty,l,f,m,a,r,s,h,y)}),o.$externalResults=$(()=>d.value?[].concat(d.value).map((m,_)=>({$propertyPath:r,$property:a,$validator:"$externalResults",$uid:`${r}-externalResult-${_}`,$message:m,$params:{},$response:null,$pending:!1})):[]),o.$invalid=$(()=>{const m=u.some(_=>g(o[_].$invalid));return h.value=m,!!o.$externalResults.value.length||m}),o.$pending=$(()=>u.some(m=>g(o[m].$pending))),o.$error=$(()=>o.$dirty.value?o.$pending.value||o.$invalid.value:!1),o.$silentErrors=$(()=>u.filter(m=>g(o[m].$invalid)).map(m=>{const _=o[m];return de({$propertyPath:r,$property:a,$validator:m,$uid:`${r}-${m}`,$message:_.$message,$params:_.$params,$response:_.$response,$pending:_.$pending})}).concat(o.$externalResults.value)),o.$errors=$(()=>o.$dirty.value?o.$silentErrors.value:[]),o.$unwatch=()=>u.forEach(m=>{o[m].$unwatch()}),o.$commit=()=>{h.value=!0,y.value=Date.now()},t.set(r,e,o),o):(v&&t.set(r,e,o),o)}function va(e,n,a,t,r,l,f){const d=Object.keys(e);return d.length?d.reduce((s,u)=>(s[u]=Se({validations:e[u],state:n,key:u,parentKey:a,resultsCache:t,globalConfig:r,instance:l,externalResults:f}),s),{}):{}}function ma(e,n,a){const t=$(()=>[n,a].filter(o=>o).reduce((o,m)=>o.concat(Object.values(g(m))),[])),r=$({get(){return e.$dirty.value||(t.value.length?t.value.every(o=>o.$dirty):!1)},set(o){e.$dirty.value=o}}),l=$(()=>{const o=g(e.$silentErrors)||[],m=t.value.filter(_=>(g(_).$silentErrors||[]).length).reduce((_,p)=>_.concat(...p.$silentErrors),[]);return o.concat(m)}),f=$(()=>{const o=g(e.$errors)||[],m=t.value.filter(_=>(g(_).$errors||[]).length).reduce((_,p)=>_.concat(...p.$errors),[]);return o.concat(m)}),d=$(()=>t.value.some(o=>o.$invalid)||g(e.$invalid)||!1),s=$(()=>t.value.some(o=>g(o.$pending))||g(e.$pending)||!1),u=$(()=>t.value.some(o=>o.$dirty)||t.value.some(o=>o.$anyDirty)||r.value),v=$(()=>r.value?s.value||d.value:!1),i=()=>{e.$touch(),t.value.forEach(o=>{o.$touch()})},h=()=>{e.$commit(),t.value.forEach(o=>{o.$commit()})},y=()=>{e.$reset(),t.value.forEach(o=>{o.$reset()})};return t.value.length&&t.value.every(o=>o.$dirty)&&i(),{$dirty:r,$errors:f,$invalid:d,$anyDirty:u,$error:v,$pending:s,$touch:i,$reset:y,$silentErrors:l,$commit:h}}function Se(e){let{validations:n,state:a,key:t,parentKey:r,childResults:l,resultsCache:f,globalConfig:d={},instance:s,externalResults:u}=e;const v=r?`${r}.${t}`:t,{rules:i,nestedValidators:h,config:y,validationGroups:o}=ca(n),m=X(X({},d),y),_=t?$(()=>{const w=g(a);return w?g(w[t]):void 0}):a,p=X({},g(u)||{}),B=$(()=>{const w=g(u);return t?w?g(w[t]):void 0:w}),W=fa(i,_,t,f,v,m,s,B,a),T=va(h,_,v,f,m,s,B),q={};o&&Object.entries(o).forEach(w=>{let[L,M]=w;q[L]={$invalid:ke(M,T,"$invalid"),$error:ke(M,T,"$error"),$pending:ke(M,T,"$pending"),$errors:Ge(M,T,"$errors"),$silentErrors:Ge(M,T,"$silentErrors")}});const{$dirty:V,$errors:E,$invalid:R,$anyDirty:I,$error:z,$pending:b,$touch:O,$reset:P,$silentErrors:k,$commit:A}=ma(W,T,l),j=t?$({get:()=>g(_),set:w=>{V.value=!0;const L=g(a),M=g(u);M&&(M[t]=p[t]),ne(L[t])?L[t].value=w:L[t]=w}}):null;t&&m.$autoDirty&&G(_,()=>{V.value||O();const w=g(u);w&&(w[t]=p[t])},{flush:"sync"});async function F(){return O(),m.$rewardEarly&&(A(),await Y()),await Y(),new Promise(w=>{if(!b.value)return w(!R.value);const L=G(b,()=>{w(!R.value),L()})})}function U(w){return(l.value||{})[w]}function N(){ne(u)?u.value=p:Object.keys(p).length===0?Object.keys(u).forEach(w=>{delete u[w]}):Object.assign(u,p)}return de(X(X(X({},W),{},{$model:j,$dirty:V,$error:z,$errors:E,$invalid:R,$anyDirty:I,$pending:b,$touch:O,$reset:P,$path:v||da,$silentErrors:k,$validate:F,$commit:A},l&&{$getResultsForChild:U,$clearExternalResults:N,$validationGroups:q}),T))}class pa{constructor(){this.storage=new Map}set(n,a,t){this.storage.set(n,{rules:a,result:t})}checkRulesValidity(n,a,t){const r=Object.keys(t),l=Object.keys(a);return l.length!==r.length||!l.every(d=>r.includes(d))?!1:l.every(d=>a[d].$params?Object.keys(a[d].$params).every(s=>g(t[d].$params[s])===g(a[d].$params[s])):!0)}get(n,a){const t=this.storage.get(n);if(!t)return;const{rules:r,result:l}=t,f=this.checkRulesValidity(n,a,r),d=l.$unwatch?l.$unwatch:()=>({});return f?l:{$dirty:l.$dirty,$partial:!0,$unwatch:d}}}const ge={COLLECT_ALL:!0,COLLECT_NONE:!1},He=Symbol("vuelidate#injectChildResults"),We=Symbol("vuelidate#removeChildResults");function ga(e){let{$scope:n,instance:a}=e;const t={},r=C([]),l=$(()=>r.value.reduce((v,i)=>(v[i]=g(t[i]),v),{}));function f(v,i){let{$registerAs:h,$scope:y,$stopPropagation:o}=i;o||n===ge.COLLECT_NONE||y===ge.COLLECT_NONE||n!==ge.COLLECT_ALL&&n!==y||(t[h]=v,r.value.push(h))}a.__vuelidateInjectInstances=[].concat(a.__vuelidateInjectInstances||[],f);function d(v){r.value=r.value.filter(i=>i!==v),delete t[v]}a.__vuelidateRemoveInstances=[].concat(a.__vuelidateRemoveInstances||[],d);const s=De(He,[]);Be(He,a.__vuelidateInjectInstances);const u=De(We,[]);return Be(We,a.__vuelidateRemoveInstances),{childResults:l,sendValidationResultsToParent:s,removeValidationResultsFromParent:u}}function xt(e){return new Proxy(e,{get(n,a){return typeof n[a]=="object"?xt(n[a]):$(()=>n[a])}})}let qe=0;function ya(e,n){var a;let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(t=e,e=void 0,n=void 0);let{$registerAs:r,$scope:l=ge.COLLECT_ALL,$stopPropagation:f,$externalResults:d,currentVueInstance:s}=t;const u=s||((a=vn())===null||a===void 0?void 0:a.proxy),v=u?u.$options:{};r||(qe+=1,r=`_vuelidate_${qe}`);const i=C({}),h=new pa,{childResults:y,sendValidationResultsToParent:o,removeValidationResultsFromParent:m}=u?ga({$scope:l,instance:u}):{childResults:C({})};if(!e&&v.validations){const _=v.validations;n=C({}),mn(()=>{n.value=u,G(()=>be(_)?_.call(n.value,new xt(n.value)):_,p=>{i.value=Se({validations:p,state:n,childResults:y,resultsCache:h,globalConfig:t,instance:u,externalResults:d||u.vuelidateExternalResults})},{immediate:!0})}),t=v.validationsConfig||t}else{const _=ne(e)||oa(e)?e:de(e||{});G(_,p=>{i.value=Se({validations:p,state:n,childResults:y,resultsCache:h,globalConfig:t,instance:u??{},externalResults:d})},{immediate:!0})}return u&&(o.forEach(_=>_(i,{$registerAs:r,$scope:l,$stopPropagation:f})),it(()=>m.forEach(_=>_(r)))),$(()=>X(X({},g(i.value)),y.value))}function ha(e){switch(e){case"instagram":return yn[e].user}}const _a=st("user/editor",()=>{const e=C(""),n={},a={},t={};let r=C();const l=$(()=>ha(e.value));function f(u){e.value=u;for(const[v,i]of Object.entries(l.value.profile.fields))n[v]=C(""),a[v]=i,t[v]={},i.validation&&(i.validation.required&&(t[v].required=aa),i.validation.minLength&&(t[v].minLength=ta(i.validation.minLength)),i.validation.maxLength&&(t[v].maxLength=Qn(i.validation.maxLength)));r.value=ya(t,n,{$lazy:!0})}function d(){for(const[u,v]of Object.entries(l.value.profile.fields))n[u].value=""}function s(){const u={username:n.username.value,profile:{},media:{}};for(const[v,i]of Object.entries(l.value.profile.fields))u.profile[v]=n[v].value;for(const[v,i]of Object.entries(l.value.collections))u.media[v]=[];return delete u.profile.username,ut().loadUser(u,"storage"),ct().addUserToStorageIndex(n.username.value),setTimeout(()=>d(),1e3),!0}return{$v:r,fields:n,fieldsData:a,rules:t,send:s,generateFields:f}}),$a=ae({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ze(),...Ue()},"VTextarea"),xa=re()({name:"VTextarea",directives:{Intersect:Qe},inheritAttrs:!1,props:$a(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:a,emit:t,slots:r}=n;const l=Ee(e,"modelValue"),{isFocused:f,focus:d,blur:s}=Oe(e),u=$(()=>typeof e.counterValue=="function"?e.counterValue(l.value):(l.value||"").toString().length),v=$(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function i(b,O){var P,k;!e.autofocus||!b||(k=(P=O[0].target)==null?void 0:P.focus)==null||k.call(P)}const h=C(),y=C(),o=hn(""),m=C(),_=$(()=>e.persistentPlaceholder||f.value||e.active);function p(){var b;m.value!==document.activeElement&&((b=m.value)==null||b.focus()),f.value||d()}function B(b){p(),t("click:control",b)}function W(b){t("mousedown:control",b)}function T(b){b.stopPropagation(),p(),Y(()=>{l.value="",ot(e["onClick:clear"],b)})}function q(b){var P;const O=b.target;if(l.value=O.value,(P=e.modelModifiers)!=null&&P.trim){const k=[O.selectionStart,O.selectionEnd];Y(()=>{O.selectionStart=k[0],O.selectionEnd=k[1]})}}const V=C(),E=C(+e.rows),R=$(()=>["plain","underlined"].includes(e.variant));_n(()=>{e.autoGrow||(E.value=+e.rows)});function I(){e.autoGrow&&Y(()=>{if(!V.value||!y.value)return;const b=getComputedStyle(V.value),O=getComputedStyle(y.value.$el),P=parseFloat(b.getPropertyValue("--v-field-padding-top"))+parseFloat(b.getPropertyValue("--v-input-padding-top"))+parseFloat(b.getPropertyValue("--v-field-padding-bottom")),k=V.value.scrollHeight,A=parseFloat(b.lineHeight),j=Math.max(parseFloat(e.rows)*A+P,parseFloat(O.getPropertyValue("--v-input-control-height"))),F=parseFloat(e.maxRows)*A+P||1/0,U=xn(k??0,j,F);E.value=Math.floor((U-P)/A),o.value=at(U)})}dt(I),G(l,I),G(()=>e.rows,I),G(()=>e.maxRows,I),G(()=>e.density,I);let z;return G(V,b=>{b?(z=new ResizeObserver(I),z.observe(V.value)):z==null||z.disconnect()}),it(()=>{z==null||z.disconnect()}),le(()=>{const b=!!(r.counter||e.counter||e.counterValue),O=!!(b||r.details),[P,k]=rt(a),{modelValue:A,...j}=$e.filterProps(e),F=pt(e);return c($e,K({ref:h,modelValue:l.value,"onUpdate:modelValue":U=>l.value=U,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":R.value},e.class],style:e.style},P,j,{centerAffix:E.value===1&&!R.value,focused:f.value}),{...r,default:U=>{let{id:N,isDisabled:w,isDirty:L,isReadonly:M,isValid:fe}=U;return c(Le,K({ref:y,style:{"--v-textarea-control-height":o.value},onClick:B,onMousedown:W,"onClick:clear":T,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},F,{id:N.value,active:_.value||L.value,centerAffix:E.value===1&&!R.value,dirty:L.value||e.dirty,disabled:w.value,focused:f.value,error:fe.value===!1}),{...r,default:Ce=>{let{props:{class:ve,...me}}=Ce;return c(J,null,[e.prefix&&c("span",{class:"v-text-field__prefix"},[e.prefix]),ue(c("textarea",K({ref:m,class:ve,value:l.value,onInput:q,autofocus:e.autofocus,readonly:M.value,disabled:w.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:p,onBlur:s},me,k),null),[[lt("intersect"),{handler:i},null,{once:!0}]]),e.autoGrow&&ue(c("textarea",{class:[ve,"v-textarea__sizer"],id:`${me.id}-sizer`,"onUpdate:modelValue":wt=>l.value=wt,ref:V,readonly:!0,"aria-hidden":"true"},null),[[$n,l.value]]),e.suffix&&c("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:O?U=>{var N;return c(J,null,[(N=r.details)==null?void 0:N.call(r,U),b&&c(J,null,[c("span",null,null),c(mt,{active:e.persistentCounter||f.value,value:u.value,max:v.value},r.counter)])])}:void 0})}),Ie({},h,y,m)}}),ba=H({__name:"InstagramUserEditorForm",emits:["close"],setup(e,{emit:n}){const a=n,t=_a();t.generateFields("instagram");const r=t.$v;function l(d){t.fields.avatar=d}async function f(d){d.preventDefault(),await r.value.$validate()&&t.send()&&a("close")}return dt(()=>{var d;(d=document.querySelector('.ig-user-editor-form [name="username"]'))==null||d.focus()}),(d,s)=>{const u=Xn,v=Jn;return S(),te("form",{class:"ig-user-editor-form pa-12",onSubmit:f},[c(oe,null,{default:x(()=>[c(Z,{cols:12,md:4,class:"text-center pb-14"},{default:x(()=>[c(u,{onUpdate:l})]),_:1}),c(Z,{cols:12,md:8},{default:x(()=>[c(oe,null,{default:x(()=>[c(Z,null,{default:x(()=>[c(v,{name:"username",modelValue:g(t).fields.username,"onUpdate:modelValue":s[0]||(s[0]=i=>g(t).fields.username=i),data:g(t).fieldsData.username,error:g(r).username.$invalid,variant:"outlined"},null,8,["modelValue","data","error"])]),_:1}),c(Z,null,{default:x(()=>[c(v,{modelValue:g(t).fields.name,"onUpdate:modelValue":s[1]||(s[1]=i=>g(t).fields.name=i),data:g(t).fieldsData.name,error:g(r).name.$invalid,variant:"outlined"},null,8,["modelValue","data","error"])]),_:1})]),_:1}),c(oe,null,{default:x(()=>[c(Z,null,{default:x(()=>[c(gt,{modelValue:g(t).fields.website,"onUpdate:modelValue":s[2]||(s[2]=i=>g(t).fields.website=i),name:"website",placeholder:"Website",type:"url","hide-details":"",error:g(r).website.$invalid,variant:"outlined"},null,8,["modelValue","error"])]),_:1})]),_:1}),c(oe,null,{default:x(()=>[c(Z,null,{default:x(()=>[c(xa,{modelValue:g(t).fields.biography,"onUpdate:modelValue":s[3]||(s[3]=i=>g(t).fields.biography=i),name:"biography",placeholder:"Biography","hide-details":"",error:g(r).biography.$invalid,variant:"outlined"},null,8,["modelValue","error"])]),_:1})]),_:1}),c(oe,null,{default:x(()=>[c(Z,null,{default:x(()=>[c(Jt,{type:"submit",text:"Create",variant:"outlined"})]),_:1})]),_:1})]),_:1})]),_:1})],32)}}}),Te=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})();Te?Promise.resolve().then(function(){return ka}):Promise.resolve().then(function(){return Aa});const wa=Te?Promise.resolve().then(function(){return Ra}):Promise.resolve().then(function(){return Ua});async function Ca(...e){return(await wa).default(...e)}Te?Promise.resolve().then(function(){return Oa}):Promise.resolve().then(function(){return Ta});const Va=async e=>{const n=await e.getFile();return n.handle=e,n};var Pa=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const n=[];e.forEach((r,l)=>{n[l]={description:r.description||"Files",accept:{}},r.mimeTypes?r.mimeTypes.map(f=>{n[l].accept[f]=r.extensions||[]}):n[l].accept["*/*"]=r.extensions||[]});const a=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:n,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),t=await Promise.all(a.map(Va));return e[0].multiple?t:t[0]},ka={__proto__:null,default:Pa};function ye(e){function n(a){if(Object(a)!==a)return Promise.reject(new TypeError(a+" is not an object."));var t=a.done;return Promise.resolve(a.value).then(function(r){return{value:r,done:t}})}return ye=function(a){this.s=a,this.n=a.next},ye.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(a){var t=this.s.return;return t===void 0?Promise.resolve({value:a,done:!0}):n(t.apply(this.s,arguments))},throw:function(a){var t=this.s.return;return t===void 0?Promise.reject(a):n(t.apply(this.s,arguments))}},new ye(e)}const bt=async(e,n,a=e.name,t)=>{const r=[],l=[];var f,d=!1,s=!1;try{for(var u,v=function(i){var h,y,o,m=2;for(typeof Symbol<"u"&&(y=Symbol.asyncIterator,o=Symbol.iterator);m--;){if(y&&(h=i[y])!=null)return h.call(i);if(o&&(h=i[o])!=null)return new ye(h.call(i));y="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());d=!(u=await v.next()).done;d=!1){const i=u.value,h=`${a}/${i.name}`;i.kind==="file"?l.push(i.getFile().then(y=>(y.directoryHandle=e,y.handle=i,Object.defineProperty(y,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>h})))):i.kind!=="directory"||!n||t&&t(i)||r.push(bt(i,n,h,t))}}catch(i){s=!0,f=i}finally{try{d&&v.return!=null&&await v.return()}finally{if(s)throw f}}return[...(await Promise.all(r)).flat(),...await Promise.all(l)]};var Sa=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const n=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await n.values()).next()).done?[n]:bt(n,e.recursive,void 0,e.skipDirectory)},Ra={__proto__:null,default:Sa},Ia=async(e,n=[{}],a=null,t=!1,r=null)=>{Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";const l=[];let f=null;if(e instanceof Blob&&e.type?f=e.type:e.headers&&e.headers.get("content-type")&&(f=e.headers.get("content-type")),n.forEach((u,v)=>{l[v]={description:u.description||"Files",accept:{}},u.mimeTypes?(v===0&&f&&u.mimeTypes.push(f),u.mimeTypes.map(i=>{l[v].accept[i]=u.extensions||[]})):f?l[v].accept[f]=u.extensions||[]:l[v].accept["*/*"]=u.extensions||[]}),a)try{await a.getFile()}catch(u){if(a=null,t)throw u}const d=a||await window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:l,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});!a&&r&&r(d);const s=await d.createWritable();return"stream"in e?(await e.stream().pipeTo(s),d):"body"in e?(await e.body.pipeTo(s),d):(await s.write(await e),await s.close(),d)},Oa={__proto__:null,default:Ia},Ea=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((n,a)=>{const t=document.createElement("input");t.type="file";const r=[...e.map(s=>s.mimeTypes||[]),...e.map(s=>s.extensions||[])].join();t.multiple=e[0].multiple||!1,t.accept=r||"",t.style.display="none",document.body.append(t);const l=s=>{typeof f=="function"&&f(),n(s)},f=e[0].legacySetup&&e[0].legacySetup(l,()=>f(a),t),d=()=>{window.removeEventListener("focus",d),t.remove()};t.addEventListener("click",()=>{window.addEventListener("focus",d)}),t.addEventListener("change",()=>{window.removeEventListener("focus",d),t.remove(),l(t.multiple?Array.from(t.files):t.files[0])}),"showPicker"in HTMLInputElement.prototype?t.showPicker():t.click()})),Aa={__proto__:null,default:Ea},Fa=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((n,a)=>{const t=document.createElement("input");t.type="file",t.webkitdirectory=!0;const r=f=>{typeof l=="function"&&l(),n(f)},l=e[0].legacySetup&&e[0].legacySetup(r,()=>l(a),t);t.addEventListener("change",()=>{let f=Array.from(t.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(f=f.filter(d=>d.webkitRelativePath.split("/").every(s=>!e[0].skipDirectory({name:s,kind:"directory"})))):f=f.filter(d=>d.webkitRelativePath.split("/").length===2),r(f)}),"showPicker"in HTMLInputElement.prototype?t.showPicker():t.click()})),Ua={__proto__:null,default:Fa},La=async(e,n={})=>{Array.isArray(n)&&(n=n[0]);const a=document.createElement("a");let t=e;"body"in e&&(t=await async function(f,d){const s=f.getReader(),u=new ReadableStream({start:h=>async function y(){return s.read().then(({done:o,value:m})=>{if(!o)return h.enqueue(m),y();h.close()})}()}),v=new Response(u),i=await v.blob();return s.releaseLock(),new Blob([i],{type:d})}(e.body,e.headers.get("content-type"))),a.download=n.fileName||"Untitled",a.href=URL.createObjectURL(await t);const r=()=>{typeof l=="function"&&l()},l=n.legacySetup&&n.legacySetup(r,()=>l(),a);return a.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(a.href),3e4),r()}),a.click(),null},Ta={__proto__:null,default:La};async function ja(){return Ca({recursive:!0,mode:"readwrite",startIn:"documents",id:"import-profile",skipDirectory:n=>n.name[0]==="."})}async function Da(e){return new Promise((n,a)=>{let t=new FileReader;t.readAsText(e),t.onload=function(){typeof t.result!="string"&&a("Directory does not contain a valid config.json"),n(JSON.parse(t.result))},t.onerror=a})}const Ba=st("user/import",()=>{const e=ut(),n=ct(),a=C(null),t=C({});async function r(){a.value=await ja(),t.value=await Da(l.value),t.value.profile.avatar=d(),t.value.media.posts&&f("posts"),t.value.media.reels&&f("reels"),e.loadUser(t.value,"storage"),n.addUserToStorageIndex(t.value.username)}const l=$(()=>a.value.find(u=>u.name==="config.json"));function f(u){var y,o,m,_;let v=0,i={},h={};for(const p of t.value.media[u]){if(i={},typeof p=="string")i.type=Me.detectMediaType(p),p.startsWith("http")||(i.file=s(p));else if(p.type)switch(p.type){case"image":i.type=p.type,p.name&&!((y=p.name)!=null&&y.startsWith("http"))&&(i.file=s(p.name));break;case"video":i.type=p.type,p.name&&!((o=p.name)!=null&&o.startsWith("http"))&&(i.file=s(p.name)),p.cover&&typeof p.cover=="string"&&!((m=p.cover)!=null&&m.startsWith("http"))&&(i.file=s(p.cover));break;case"album":if(i.type=p.type,i.list=[],Array.isArray(p.list)){for(const B of p.list)h={},typeof B=="string"?(h.type=Me.detectMediaType(B),h.file=s(B)):B.name&&(h.type=B.type,h.file=s(B.name));i.list.push(h)}break;case"iframe":p.cover&&typeof p.cover=="string"&&!((_=p.cover)!=null&&_.startsWith("http"))&&(i.cover=s(p.cover));break}t.value.media.posts[v]=i,v++}}function d(){return a.value.find(u=>u.name===t.value.profile.avatar)}function s(u){return a.value.find(v=>v.name===u)}return{importFromDirectory:r}}),Ma=H({__name:"UserSelectorAddMenu",emits:["openCreateProfileDialog"],setup(e,{emit:n}){const a=Ba(),t=n;function r(){a.importFromDirectory()}return(l,f)=>(S(),D(Je,{"content-class":"ig-profile-selector__context-menu",activator:"parent",transition:"slide-y-transition","open-on-click":!1,"open-delay":5e3,offset:[7,0]},{default:x(()=>[c(Ke,null,{default:x(()=>[c(he,{onClick:f[0]||(f[0]=d=>t("openCreateProfileDialog"))},{default:x(()=>[c(_e,null,{default:x(()=>[se("Create profile")]),_:1})]),_:1}),c(Re),c(he,{onClick:r},{default:x(()=>[c(_e,null,{default:x(()=>[se("Import from folder")]),_:1})]),_:1})]),_:1})]),_:1}))}}),za=["textContent"],Na=H({__name:"UserSelectorAdd",setup(e){const n=de({value:"",generatorInterval:0}),a=C(!1),t=C(!1);G(()=>t.value,d=>{d?r():l()});function r(){n.generatorInterval=setInterval(()=>{n.value=bn().substring(0,6)},75)}function l(){clearInterval(n.generatorInterval),n.value=""}async function f(){}return(d,s)=>{const u=Ma,v=ft,i=ba,h=Nn,y=vt;return S(),D(y,{add:"",onClick:f},{default:x(()=>[c(v,{onClick:s[2]||(s[2]=o=>t.value=!g(t)),onContextmenu:s[3]||(s[3]=o=>{o.preventDefault(),t.value=!g(t)})},{inner:x(()=>[c(et,{size:"48px",icon:"mdi-plus",color:"grey-lighten-1"})]),default:x(()=>[c(u,{modelValue:g(t),"onUpdate:modelValue":s[0]||(s[0]=o=>ne(t)?t.value=o:null),onOpenCreateProfileDialog:s[1]||(s[1]=o=>a.value=!0)},null,8,["modelValue"]),ee("h3",{class:"text-truncate mt-4 mx-auto text-center",textContent:Ae(g(n).value)},null,8,za)]),_:1}),c(h,{title:"Create profile",modelValue:g(a),"onUpdate:modelValue":s[5]||(s[5]=o=>ne(a)?a.value=o:null)},{default:x(()=>[c(i,{onClose:s[4]||(s[4]=o=>a.value=!1)})]),_:1},8,["modelValue"])]),_:1})}}}),Ga=ce(Na,[["__scopeId","data-v-bcde7ff4"]]),Ha={class:"d-inline-flex text-center"},Wa={class:"v-col flex-grow-0 hidden-sm-and-down"},qa=H({__name:"PageIndex",setup(e){const n=wn(),a=C(n.listOfUsernames),t=$(()=>n.listOfUsers);function r(l){n.setUsersOrder(l)}return(l,f)=>{const d=vt,s=Ga,u=En,v=Yt;return S(),D(Xt,{class:"ig-index text-center py-16 align-content-center"},{default:x(()=>[ee("div",null,[ee("div",Ha,[c(g(Vn),{class:"v-row",list:g(a),"onUpdate:list":[f[0]||(f[0]=i=>ne(a)?a.value=i:null),r],axis:"x","press-delay":100},{default:x(()=>[(S(!0),te(J,null,Cn(g(t),(i,h)=>(S(),D(g(Pn),{class:"v-col flex-grow-0",key:i.username,index:h},{default:x(()=>[i&&i.ready?(S(),D(d,{key:0,user:i},null,8,["user"])):ie("",!0)]),_:2},1032,["index"]))),128)),ee("div",Wa,[c(s)])]),_:1},8,["list"])]),c(Re,{class:"mt-15 mb-10"}),c(u),c(v,{class:"pb-0"})])]),_:1})}}}),Xa=ce(qa,[["__scopeId","data-v-14c222b2"]]);export{Xa as default};
