import{r as S,b8 as j,b9 as H,aX as N,g as B,B as D,N as G,aA as M,n as I,Q,b5 as V}from"./DsiIVvjh.js";function C(t){return H()?(N(t),!0):!1}function R(){const t=new Set,n=l=>{t.delete(l)};return{on:l=>{t.add(l);const o=()=>n(l);return C(o),{off:o}},off:n,trigger:(...l)=>Promise.all(Array.from(t).map(o=>o(...l)))}}function x(t){return typeof t=="function"?t():B(t)}const A=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=Object.prototype.toString,Y=t=>X.call(t)==="[object Object]",$=()=>{},z=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);function J(t){let n;function e(){return n||(n=t()),n}return e.reset=async()=>{const c=n;n=void 0,c&&await c},e}function K(t,n,e={}){const{immediate:c=!0}=e,l=S(!1);let o=null;function d(){o&&(clearTimeout(o),o=null)}function r(){l.value=!1,d()}function v(...p){d(),l.value=!0,o=setTimeout(()=>{l.value=!1,o=null,t(...p)},x(n))}return c&&(l.value=!0,A&&v()),C(r),{isPending:j(l),start:v,stop:r}}const Z=A?window:void 0,ee=A?window.document:void 0,k=A?window.navigator:void 0;function U(t){var n;const e=x(t);return(n=e==null?void 0:e.$el)!=null?n:e}function w(...t){let n,e,c,l;if(typeof t[0]=="string"||Array.isArray(t[0])?([e,c,l]=t,n=Z):[n,e,c,l]=t,!n)return $;Array.isArray(e)||(e=[e]),Array.isArray(c)||(c=[c]);const o=[],d=()=>{o.forEach(a=>a()),o.length=0},r=(a,u,g,y)=>(a.addEventListener(u,g,y),()=>a.removeEventListener(u,g,y)),v=G(()=>[U(n),x(l)],([a,u])=>{if(d(),!a)return;const g=Y(u)?{...u}:u;o.push(...e.flatMap(y=>c.map(b=>r(a,y,b,g))))},{immediate:!0,flush:"post"}),p=()=>{v(),d()};return C(p),p}const te=500,ne=10;function ie(t,n,e){var c,l;const o=D(()=>U(t));let d,r,v,p=!1;function a(){d&&(clearTimeout(d),d=void 0),r=void 0,v=void 0,p=!1}function u(i){var s,f,m;const[_,h,T]=[v,r,p];if(a(),!(e!=null&&e.onMouseUp)||!h||!_||(s=e==null?void 0:e.modifiers)!=null&&s.self&&i.target!==o.value)return;(f=e==null?void 0:e.modifiers)!=null&&f.prevent&&i.preventDefault(),(m=e==null?void 0:e.modifiers)!=null&&m.stop&&i.stopPropagation();const P=i.x-h.x,O=i.y-h.y,q=Math.sqrt(P*P+O*O);e.onMouseUp(i.timeStamp-_,q,T)}function g(i){var s,f,m,_;(s=e==null?void 0:e.modifiers)!=null&&s.self&&i.target!==o.value||(a(),(f=e==null?void 0:e.modifiers)!=null&&f.prevent&&i.preventDefault(),(m=e==null?void 0:e.modifiers)!=null&&m.stop&&i.stopPropagation(),r={x:i.x,y:i.y},v=i.timeStamp,d=setTimeout(()=>{p=!0,n(i)},(_=e==null?void 0:e.delay)!=null?_:te))}function y(i){var s,f,m,_;if((s=e==null?void 0:e.modifiers)!=null&&s.self&&i.target!==o.value||!r||(e==null?void 0:e.distanceThreshold)===!1)return;(f=e==null?void 0:e.modifiers)!=null&&f.prevent&&i.preventDefault(),(m=e==null?void 0:e.modifiers)!=null&&m.stop&&i.stopPropagation();const h=i.x-r.x,T=i.y-r.y;Math.sqrt(h*h+T*T)>=((_=e==null?void 0:e.distanceThreshold)!=null?_:ne)&&a()}const b={capture:(c=e==null?void 0:e.modifiers)==null?void 0:c.capture,once:(l=e==null?void 0:e.modifiers)==null?void 0:l.once},E=[w(o,"pointerdown",g,b),w(o,"pointermove",y,b),w(o,["pointerup","pointerleave"],u,b)];return()=>E.forEach(i=>i())}function oe(){const t=S(!1),n=Q();return n&&I(()=>{t.value=!0},n),t}function W(t){const n=oe();return D(()=>(n.value,!!t()))}function F(t,n={}){const{controls:e=!1,navigator:c=k}=n,l=W(()=>c&&"permissions"in c),o=M(),d=typeof t=="string"?{name:t}:t,r=M(),v=()=>{var a,u;r.value=(u=(a=o.value)==null?void 0:a.state)!=null?u:"prompt"};w(o,"change",v);const p=J(async()=>{if(l.value){if(!o.value)try{o.value=await c.permissions.query(d)}catch{o.value=void 0}finally{v()}if(e)return V(o.value)}});return p(),e?{state:r,isSupported:l,query:p}:r}function ae(t={}){const{navigator:n=k,read:e=!1,source:c,copiedDuring:l=1500,legacy:o=!1}=t,d=W(()=>n&&"clipboard"in n),r=F("clipboard-read"),v=F("clipboard-write"),p=D(()=>d.value||o),a=S(""),u=S(!1),g=K(()=>u.value=!1,l);function y(){d.value&&i(r.value)?n.clipboard.readText().then(s=>{a.value=s}):a.value=L()}p.value&&e&&w(["copy","cut"],y);async function b(s=x(c)){p.value&&s!=null&&(d.value&&i(v.value)?await n.clipboard.writeText(s):E(s),a.value=s,u.value=!0,g.start())}function E(s){const f=document.createElement("textarea");f.value=s??"",f.style.position="absolute",f.style.opacity="0",document.body.appendChild(f),f.select(),document.execCommand("copy"),f.remove()}function L(){var s,f,m;return(m=(f=(s=document==null?void 0:document.getSelection)==null?void 0:s.call(document))==null?void 0:f.toString())!=null?m:""}function i(s){return s==="granted"||s==="prompt"}return{isSupported:p,text:a,copied:u,copy:b}}const re={multiple:!0,accept:"*",reset:!1,directory:!1};function ue(t={}){const{document:n=ee}=t,e=S(null),{on:c,trigger:l}=R(),{on:o,trigger:d}=R();let r;n&&(r=n.createElement("input"),r.type="file",r.onchange=a=>{const u=a.target;e.value=u.files,l(e.value)},r.oncancel=()=>{d()});const v=()=>{e.value=null,r&&r.value&&(r.value="",l(null))},p=a=>{if(!r)return;const u={...re,...t,...a};r.multiple=u.multiple,r.accept=u.accept,r.webkitdirectory=u.directory,z(u,"capture")&&(r.capture=u.capture),u.reset&&v(),r.click()};return{files:j(e),open:p,reset:v,onCancel:o,onChange:c}}export{ae as a,ie as o,ue as u};
