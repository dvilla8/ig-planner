import w from"./BWd6oKN4.js";import $ from"./Cif0gBww.js";import{_ as D}from"./CYS_-etB.js";import M from"./COnR5g-t.js";import{_ as F}from"./B_-_saWi.js";import{_ as N}from"./D2sEpSsR.js";import{bK as O,r as v,e as z,bh as A,m as R,ah as H,z as I,o as r,c as f,F as K,b as s,a as c,f as p,w as i,i as _,a3 as L,t as T,g as d,a0 as X,a6 as Y,a8 as j,at as q}from"./BAgJTPCY.js";const G=O("home",()=>{const a=v("");function l(m){a.value=m}return{profilePreview:a,setProfilePreview:l}}),J=["textContent"],re=z({__name:"UserSelector",props:{user:{},add:{type:Boolean}},setup(a){const l=a,m=A(),C=R(),U=G(),o=H({enabled:!1,x:0,y:0}),t=v(!1);function k(){C.push(l.user.route)}function S(){t.value=!0}function g(e){if(m.mdAndUp.value){U.setProfilePreview(l.user.profile.username);return}o.enabled=!0}function b(e){e.preventDefault(),o.enabled=!1,o.x=e.clientX,o.y=e.clientY,q(()=>{o.enabled=!0})}return(e,n)=>{const y=I("router-link"),V=w,h=$,P=D,x=M,B=F,E=N;return r(),f("div",{class:j(["dx-profile-selector",{"dx-profile-selector--add":e.add}])},[e.user?(r(),f(K,{key:0},[s(y,{to:e.user.route},null,8,["to"]),c("a",{class:"cursor-pointer",onClick:g,onContextmenu:b},[(r(),p(L,null,{default:i(()=>[(r(),p(h,{key:e.user.profile.avatar,avatar:e.user.profile.avatar},{inner:i(()=>[e.user.hasLocalChanges||e.user.hasUnsavedChanges?(r(),p(V,{key:0})):_("",!0)]),_:1},8,["avatar"]))]),_:1})),c("h3",{class:"mt-4 text-truncate",textContent:T(e.user.profile.username)},null,8,J),s(x,{modelValue:d(o).enabled,"onUpdate:modelValue":n[0]||(n[0]=u=>d(o).enabled=u),offset:[15,0]},{default:i(()=>[s(P,{onOpen:k,onEdit:S,user:e.user},null,8,["user"])]),_:1},8,["modelValue"])],32)],64)):_("",!0),X(e.$slots,"default"),s(E,{edit:"",modelValue:d(t),"onUpdate:modelValue":n[2]||(n[2]=u=>Y(t)?t.value=u:null)},{default:i(()=>[s(B,{user:e.user,onClose:n[1]||(n[1]=u=>t.value=!1)},null,8,["user"])]),_:1},8,["modelValue"])],2)}}});export{re as _,G as u};
