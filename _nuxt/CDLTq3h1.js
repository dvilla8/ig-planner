import{a0 as Ub,_ as Gb}from"./toyJVOOD.js";import{c as Zb,d as Xb,V as Yb,O as qb,R as Kb,l as $m,X as Jb,u as op,z as Qb,ac as tx,ai as ex}from"./CK7iLweF.js";import{V as ix}from"./BE9QC1YJ.js";import"./9GnyyO61.js";import"./brZaqqJc.js";import"./BWrCqiFU.js";import"./loxWndA1.js";import"./u-l0zx1s.js";import"./Beb0bSkS.js";import"./CgnoIz2I.js";import"./Jenkb-9w.js";import"./Cfm-9vfM.js";import"./CHG5xmPm.js";import"./DWpEEEb-.js";import"./B_q-1z95.js";import"./D3ZqSPhe.js";import"./Bvwa_7js.js";/*!
 * Pintura v8.81.0 - Test version
 * (c) 2018-2024 PQINA Inc. - All Rights Reserved
 * License: https://pqina.nl/pintura/license/
 * 
 * This version of Pintura is for testing purposes only.
 * Visit https://pqina.nl/pintura/ to obtain a commercial license.
 */const nx=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"}];var Kf=t=>{if(t.getUint16(0)!==65496)return;const e=t.byteLength;let i,n=2,r;for(;n<e&&t.getUint8(n)===255;){i=t.getUint16(n);const o=nx.find(a=>a.value===i&&(!a.subvalue||a.subvalue===t.getUint16(n+2+2)));if(o){const{name:a}=o;r||(r={}),r[a]||(r[a]={offset:n,size:t.getUint16(n+2)})}if(i===65498)break;n+=2+t.getUint16(n+2)}return r},vh=(t,e,i)=>{if(!t)return;const n=new DataView(t),r=Kf(n);if(!r||!r.exif)return;const o=((a,s)=>{if(a.getUint16(s)!==65505)return;const l=a.getUint16(s+2);if(s+=4,a.getUint32(s)!==1165519206)return;s+=6;const c=a.getUint16(s);if(c!==18761&&c!==19789)return;const d=c===18761;if(s+=2,a.getUint16(s,d)!==42)return;s+=a.getUint32(s+2,d);const u=p=>{const h=[];let g=s;const m=Math.min(a.byteLength,s+l-16);for(;g<m;g+=12){const f=g;a.getUint16(f,d)===p&&h.push(f)}return h};return{read:p=>{const h=u(p);if(h.length)return a.getUint16(h[0]+8,d)},write:(p,h)=>{const g=u(p);return!!g.length&&(g.forEach(m=>a.setUint16(m+8,h,d)),!0)}}})(n,r.exif.offset);return o?i===void 0?o.read(e):o.write(e,i):void 0},wh=t=>window.__pqina_webapi__?window.__pqina_webapi__[t]:window[t],fe=(...t)=>{};const rx={ArrayBuffer:"readAsArrayBuffer"};var Jf=async(t,e=[0,t.size],i)=>await((n,r=fe,o={})=>new Promise((a,s)=>{const{dataFormat:l=rx.ArrayBuffer}=o,c=new(wh("FileReader"));c.onload=()=>a(c.result),c.onerror=()=>s(c.error),c.onprogress=r,c[l](n)}))(t.slice(...e),i),ox=async(t,e)=>{const i=await Jf(t,[0,262144],e);return vh(i,274)||1};let ap=null;var Cr=()=>(ap===null&&(ap=typeof window<"u"&&window.document!==void 0),ap);let Ud=null;var Au=()=>new Promise(t=>{if(Ud===null){const e="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let i=Cr()?new Image:{};return i.onload=()=>{Ud=i.naturalWidth===1,i=void 0,t(Ud)},void(i.src=e)}return t(Ud)}),Zc=t=>t.getContext("2d").getImageData(0,0,t.width,t.height),yn=(t,e,i=[])=>{const n=document.createElement(t),r=Object.getOwnPropertyDescriptors(n.__proto__);for(const o in e)o==="style"?n.style.cssText=e[o]:r[o]&&r[o].set||/textContent|innerHTML/.test(o)||typeof e[o]=="function"?n[o]=e[o]:n.setAttribute(o,e[o]);return i.forEach(o=>n.appendChild(o)),n};const ax={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var or=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},Wl=t=>"data"in t,Sh=t=>Cr()?RegExp(t).test(window.navigator.userAgent):void 0;let sp=null;var Lu=()=>(sp===null&&(sp=Sh(/Android/)),sp),Qf=(t,e)=>{const i=yn("canvas",{width:t.width,height:t.height});return i.getContext("2d",e).drawImage(t,0,0),i},Gl=async(t,e=1)=>{const i=await Au(),[n,r]=i||e<5?[t.width,t.height]:[t.height,t.width],o=yn("canvas",{width:n,height:r}),a=o.getContext("2d",{willReadFrequently:!0});if(Wl(t)&&!i&&e>1){const s=yn("canvas",{width:t.width,height:t.height});s.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),t=s}if(!i&&e>1&&a.transform.apply(a,((s,l,c=-1)=>(c===-1&&(c=1),ax[c](s,l)))(t.width,t.height,e)),Wl(t)){if(a.putImageData(t,0,0),Lu())return Qf(o)}else a.drawImage(t,0,0);return t instanceof HTMLCanvasElement&&or(t),o},ty=async(t,e=1)=>e===1||await Au()?t:Zc(await Gl(t,e)),cl=t=>typeof t=="object";const gm=t=>t instanceof HTMLElement?t:cl(t)?ey(t):t,ey=t=>{let e;return Array.isArray(t)?(e=[],t.forEach((i,n)=>{e[n]=gm(i)})):(e={},t!==null&&Object.keys(t).forEach(i=>{const n=t[i];e[i]=gm(n)})),e};var _e=t=>typeof t=="string",sn=t=>typeof t=="function",sx=(t,e)=>new Promise((i,n)=>{const r=()=>i(((o,{width:a,height:s,canvasMemoryLimit:l,contextOptions:c})=>{let d=a||o.naturalWidth,u=s||o.naturalHeight;d||u||(d=300,u=150);const p=d*u;if(l&&p>l){const g=Math.sqrt(l)/Math.sqrt(p);d=Math.floor(d*g),u=Math.floor(u*g)}const h=yn("canvas");return h.width=d,h.height=u,h.getContext("2d",c).drawImage(o,0,0,d,u),h})(t,e));t.complete&&t.width?r():(t.onload=r,t.onerror=()=>n(new Error("Failed to load image")))}),iy=()=>"createImageBitmap"in window,ny=t=>/svg/.test(t.type),aa=()=>Math.random().toString(36).substring(2,9);const lp=new Map;var Xc=(t,e,i)=>new Promise((n,r)=>{const o=t.toString();let a=lp.get(o);if(!a){const l=(p=>`function () {self.onmessage = function (message) {(${p.toString()}).apply(null, message.data.content.concat([function (err, response) {
    response = response || {};
    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];
    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);
}]))}}`)(t),c=URL.createObjectURL((p=>new Blob(["(",typeof p=="function"?p.toString():p,")()"],{type:"application/javascript"}))(l)),d=new Map,u=new Worker(c);a={url:c,worker:u,messages:d,terminationTimeout:void 0,terminate:()=>{clearTimeout(a.terminationTimeout),a.worker.terminate(),URL.revokeObjectURL(c),lp.delete(o)}},u.onmessage=function(p){const{id:h,content:g,error:m}=p.data;if(clearTimeout(a.terminationTimeout),a.terminationTimeout=setTimeout(()=>{d.size>0||a.terminate()},500),!d.has(h))return;const f=d.get(h);d.delete(h),m!=null?f.reject(m):f.resolve(g)},lp.set(o,a)}const s=aa();a.messages.set(s,{resolve:n,reject:r}),a.worker.postMessage({id:s,content:e},i)});let cp=null;var ka=()=>(cp===null&&(cp=Sh(/Firefox/)),cp);const fm=async(t,e)=>{const i=await(async(r,o)=>{const a=yn("img",{src:URL.createObjectURL(r)}),s=await sx(a,o);return URL.revokeObjectURL(a.src),s})(t,{canvasMemoryLimit:e,contextOptions:{willReadFrequently:!0}}),n=Zc(i);return or(i),n};var ry=async(t,e)=>{if(Lu()&&!ka())return await fm(t,e);let i;if(iy()&&!ny(t)&&"OffscreenCanvas"in window)try{i=await Xc((n,r,o)=>{createImageBitmap(n).then(a=>{let s=a.width,l=a.height;const c=s*l;if(r&&c>r){const h=Math.sqrt(r)/Math.sqrt(c);s=Math.floor(s*h),l=Math.floor(l*h)}const d=new OffscreenCanvas(s,l),u=d.getContext("2d",{willReadFrequently:!0});u.drawImage(a,0,0,s,l);const p=u.getImageData(0,0,d.width,d.height);o(null,p)}).catch(a=>{o(a)})},[t,e])}catch{}return i&&i.width?i:await fm(t,e)},kh=(t,e,i)=>new Promise((n,r)=>{try{t.toBlob(o=>{if(!o)return r(new Error("Failed to create blob"));n(o)},e,i)}catch(o){r(o)}}),lx=async(t,e,i)=>{const n=await Gl(t),r=await kh(n,e,i);return or(n),r};const cx={matroska:"mkv"};var oy=t=>{const e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){const[,i=""]=t.split("/x-");return cx[i]}return e},ay=t=>t.substr(0,t.lastIndexOf("."))||t;const dx=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var Ch=t=>{return t&&(e=(i=t,i.split(".").pop()).toLowerCase(),dx.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":e==="svg"?"svg+xml":e):"");var e,i},Bc=(t,e,i)=>{const n=new Date().getTime(),r=t.type.length&&!/null|text/.test(t.type),o=r?t.type:i,a=((s,l)=>{const c=Ch(s);if(c===l)return s;const d=oy(l)||c;return`${ay(s)}.${d}`})(e,o);try{return new(wh("File"))([t],a,{lastModified:n,type:r?t.type:o})}catch{const l=r?t.slice():t.slice(0,t.size,o);return l.lastModified=n,l.name=a,l}},ea=(t,e)=>t/e,qi=t=>t;const dp=Math.PI,jo=Math.PI/2,ia=jo/2;var La=t=>{const e=Math.abs(t)%Math.PI;return e>ia&&e<Math.PI-ia};const Xp={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:Ps,Right:Rs,Bottom:Is,Left:Es,TopLeft:la,TopRight:ca,BottomRight:da,BottomLeft:ua}=Xp;var Oc={[Ps]:[.5,0],[Rs]:[1,.5],[Is]:[.5,1],[Es]:[0,.5],[la]:[0,0],[ca]:[1,0],[da]:[1,1],[ua]:[0,1]},ai=(t,e=12)=>parseFloat(t.toFixed(e));const yu=(t,e,i)=>i+(t-i)*e,ym=t=>({x:t.x+.5*t.width,y:t.y+.5*t.height,rx:.5*t.width,ry:.5*t.height}),an=()=>at(0,0),at=(t,e)=>({x:t,y:e}),bm=t=>at(t.pageX,t.pageY),We=t=>at(t.x,t.y),Fl=t=>(t.x=-t.x,t.y=-t.y,t),Ur=(t,e,i=an())=>{const n=Math.cos(e),r=Math.sin(e),o=t.x-i.x,a=t.y-i.y;return t.x=i.x+n*o-r*a,t.y=i.y+r*o+n*a,t},Ss=t=>Math.sqrt(t.x*t.x+t.y*t.y),ho=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?an():(t.x/=e,t.y/=e,t)},Gd=(t,e)=>Math.atan2(e.y-t.y,e.x-t.x),vs=(t,e)=>t.x===e.x&&t.y===e.y,Eo=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),Fn=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Dn=(t,e)=>(t.x-=e.x,t.y-=e.y,t),xm=(t,e)=>(t.x/=e,t.y/=e,t),Dr=(t,e)=>(t.x*=e,t.y*=e,t),cu=(t,e)=>t.x*e.x+t.y*e.y,du=(t,e)=>t.x*e.y-t.y*e.x,Po=(t,e=an())=>{const i=t.x-e.x,n=t.y-e.y;return i*i+n*n},So=(t,e=an())=>Math.sqrt(Po(t,e)),ux=(t,e,i)=>(t.x=yu(t.x,e,i.x),t.y=yu(t.y,e,i.y),t),No=t=>{let e=0,i=0;return t.forEach(n=>{e+=n.x,i+=n.y}),at(e/t.length,i/t.length)},Dl=(t,e,i,n,r)=>(t.forEach(o=>{o.x=e?n-(o.x-n):o.x,o.y=i?r-(o.y-r):o.y}),t),al=(t,e,i,n)=>{const r=Math.sin(e),o=Math.cos(e);return t.forEach(a=>{a.x-=i,a.y-=n;const s=a.x*o-a.y*r,l=a.x*r+a.y*o;a.x=i+s,a.y=n+l}),t},Zl=(t,e)=>({width:t,height:e}),po=t=>Zl(t.width,t.height),Ba=t=>Zl(t.width,t.height),sl=t=>Zl(t.width,t.height),sy=t=>Zl(t[0],t[1]),Lc=t=>{return/img/i.test(t.nodeName)?Zl((e=t).naturalWidth,e.naturalHeight):Ba(t);var e},Un=(t,e)=>Zl(t,e),Wc=(t,e,i=qi)=>i(t.width)===i(e.width)&&i(t.height)===i(e.height),Zd=(t,e)=>(t.width*=e,t.height*=e,t),_l=t=>at(.5*t.width,.5*t.height),ly=(t,e)=>{const i=Math.abs(e),n=Math.abs(Math.cos(i)),r=Math.abs(Math.sin(i)),o=n*t.width+r*t.height,a=r*t.width+n*t.height;return t.width=o,t.height=a,t},bu=(t,e)=>t.width>=e.width&&t.height>=e.height,rs=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),As=(t,e)=>({start:t,end:e}),cy=t=>As(We(t.start),We(t.end)),Th=(t,e)=>{if(e===0)return t;const i=at(t.start.x-t.end.x,t.start.y-t.end.y),n=ho(i),r=Dr(n,e);return t.start.x+=r.x,t.start.y+=r.y,t.end.x-=r.x,t.end.y-=r.y,t},px=[at(-1,-1),at(-1,1),at(1,1),at(1,-1)],pa=(t,e,i,n)=>({x:t,y:e,width:i,height:n}),Pi=t=>pa(t.x,t.y,t.width,t.height),ks=()=>pa(0,0,0,0),Zr=t=>pa(0,0,t.width,t.height),hx=t=>pa(t[3],t[0],t[1]-t[3],t[2]-t[0]),xs=t=>pa(t.x||0,t.y||0,t.width||0,t.height||0),rr=t=>{let e=t[0].x,i=t[0].x,n=t[0].y,r=t[0].y;return t.forEach(o=>{e=Math.min(e,o.x),i=Math.max(i,o.x),n=Math.min(n,o.y),r=Math.max(r,o.y)}),pa(e,n,i-e,r-n)},up=t=>En(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),vm=(t,e)=>pa(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),En=(t,e,i,n)=>pa(t,e,i,n),Ri=t=>at(t.x+.5*t.width,t.y+.5*t.height),na=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Fr=(t,e,i)=>(i=i||Ri(t),t.x=e*(t.x-i.x)+i.x,t.y=e*(t.y-i.y)+i.y,t.width=e*t.width,t.height=e*t.height,t),wm=(t,e,i,n)=>{const r=(n.x-t.x)/t.width,o=(n.y-t.y)/t.height;let a=Math.max(e.width,t.width),s=Math.max(e.height,t.height);return a=Math.min(i.width,a),s=Math.min(i.height,s),t.x=n.x-r*a,t.y=n.y-o*s,t.width=a,t.height=s,t},Sm=(t,e)=>{const[i,n]=Oc[e],r=i*t.width,o=n*t.height;return at(t.x+r,t.y+o)},Cs=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),ra=(t,e,i=qi)=>i(t.x)===i(e.x)&&i(t.y)===i(e.y)&&i(t.width)===i(e.width)&&i(t.height)===i(e.height),cr=t=>ea(t.width,t.height),dy=(t,e,i,n,r)=>(t.x=e,t.y=i,t.width=n,t.height=r,t),zu=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),wr=(t,e,i)=>(i||(i=Ri(t)),Ro(t).map(n=>Ur(n,e,i))),uu=(t,e)=>pa(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),xu=(t,e)=>!(e.x<t.x)&&!(e.y<t.y)&&!(e.x>t.x+t.width)&&!(e.y>t.y+t.height),as=(t,e,i=an())=>{if(t.width===0||t.height===0)return ks();const n=cr(t);e||(e=n);let r=t.width,o=t.height;return e>n?r=o*e:o=r/e,pa(i.x+.5*(t.width-r),i.y+.5*(t.height-o),r,o)},to=(t,e=cr(t),i=an())=>{if(t.width===0||t.height===0)return ks();let n=t.width,r=n/e;return r>t.height&&(r=t.height,n=r*e),pa(i.x+.5*(t.width-n),i.y+.5*(t.height-r),n,r)},ll=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],Ro=t=>[at(t.x,t.y),at(t.x+t.width,t.y),at(t.x+t.width,t.y+t.height),at(t.x,t.y+t.height)],Ho=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},uy=(t,e,i=Ri(t))=>Ro(t).map((n,r)=>{const o=px[r];return at(yu(n.x,1+o.x*e.x,i.x),yu(n.y,1+o.y*e.y,i.y))}),_c=t=>(t.x=0,t.y=0,t),km=t=>{const e=t[0],i=t[t.length-1];t=vs(e,i)?t:[...t,e];const n=e.x,r=e.y;let o,a,s,l=0,c=0,d=0,u=0;const p=t.length;for(;c<p;c++)o=t[c],a=t[c+1>p-1?0:c+1],s=(o.y-r)*(a.x-n)-(a.y-r)*(o.x-n),l+=s,d+=(o.x+a.x-2*n)*s,u+=(o.y+a.y-2*r)*s;return s=3*l,at(n+d/s,r+u/s)},Mh=(t,e)=>py(t.start,t.end,e.start,e.end),py=(t,e,i,n)=>{const r=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(r===0)return;const o=((n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x))/r,a=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/r;return o<0||o>1||a<0||a>1?void 0:at(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y))},hy=(t,e,{ignoreIdenticalLines:i=!1,breakOnIntersection:n=!1}={})=>{const r=e.length,o=[];for(let a=0;a<r-1;a++){if(i&&(vs(t.start,e[a])||vs(t.start,e[a+1])||vs(t.end,e[a])||vs(t.end,e[a+1])))continue;const s=py(t.start,t.end,e[a],e[a+1]);if(s){if(n)return[s];o.push(s)}}return o.length?o:void 0},Yp=(t,e)=>{let i=0,n=0,r=!1;const o=e.length;for(i=0,n=o-1;i<o;n=i++)e[i].y>t.y!=e[n].y>t.y&&t.x<(e[n].x-e[i].x)*(t.y-e[i].y)/(e[n].y-e[i].y)+e[i].x&&(r=!r);return r},my=t=>{const e=[];for(let i=0;i<t.length;i++){let n=i+1;n===t.length&&(n=0),e.push(As(We(t[i]),We(t[n])))}return e},$y=(t,e=0)=>my(t).map(i=>Th(i,e)),vu=(t,e,i,n=0,r=!1,o=!1,a=12)=>{const s=[];for(let l=0;l<a;l++)s.push(at(t.x+e*Math.cos(l*(2*Math.PI)/a),t.y+i*Math.sin(l*(2*Math.PI)/a)));return(r||o)&&Dl(s,r,o,t.x,t.y),n&&al(s,n,t.x,t.y),s},wu=(t,e,i,n)=>{const r=at(t.x-i.x,t.y-i.y),o=at(n.x-i.x,n.y-i.y),a=cu(o,o);let s=cu(r,o)/a;s=s<0?0:s,s=s>1?1:s;const l=at(o.x*s+i.x-t.x,o.y*s+i.y-t.y);return cu(l,l)<=e*e},gy=(t,e,i)=>{const n=i.length;for(let r=0;r<n-1;r++)if(wu(t,e,i[r],i[r+1]))return!0;return!1},qp=(t,e,i)=>!!Yp(t,i)||!!gy(t,e,i)||wu(t,e,i[0],i[i.length-1]),pp=(t,e,i,n,r)=>qp(t,e,wr(i,n,r||Ri(i)));var mx=(t,e)=>{const i=Zr(t),n=Ri(i),r=wr(i,e,n);return _c(rr(r))},Vl=(t,e)=>t instanceof HTMLElement&&(!e||new RegExp(`^${e}$`,"i").test(t.nodeName)),Yc=t=>t instanceof File,Cm=async(t,e,i)=>{const n=await kh(t,e,i);return Bc(n,"canvas")},Ph=t=>t.split("/").pop().split(/\?|\#/).shift();const $x=Cr()&&Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);e!==void 0&&t.append(e)},Xd=Cr()&&yn("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let Tm;var Rh=t=>($x(Xd,t),Xd.parentNode||document.body.append(Xd),clearTimeout(Tm),Tm=setTimeout(()=>{Xd.remove()},500),t);let hp=null;var Fa=()=>(hp===null&&(hp=Cr()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),hp),fy=t=>new Promise((e,i)=>{let n=!1;!t.parentNode&&Fa()&&(n=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",Rh(t));const r=()=>{const a=t.naturalWidth,s=t.naturalHeight;a&&s&&(n&&t.remove(),clearInterval(o),e({width:a,height:s}))};t.onerror=a=>{clearInterval(o),i(a)};const o=setInterval(r,1);r()}),yy=t=>new Promise((e,i)=>{const n=()=>{e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return n();t.onloadedmetadata=n,t.onerror=()=>i(t.error)}),Fu=t=>/^image/.test(t.type),Ih=t=>new Promise(e=>{const i=_e(t)?t:URL.createObjectURL(t),n=()=>{const o=new Image;o.src=i,e(o)};if(t instanceof Blob&&Fu(t))return n();const r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=()=>e(r),r.onerror=n,r.src=i}),Su=t=>t.nodeName==="VIDEO",by=async t=>{let e,i;e=t.src?t:await Ih(t);try{i=Su(e)?await yy(e):await fy(e)}finally{Yc(t)&&URL.revokeObjectURL(e.src)}return i},gx=async t=>{const e=await by(t),i=await(o=>new Promise((a,s)=>{if(o.complete)return a(o);o.onload=()=>a(o),o.onerror=()=>s(new Error("Failed to load image"))}))(t),n=yn("canvas",e);n.getContext("2d",{willReadFrequently:!0}).drawImage(i,0,0);const r=await kh(n);return Bc(r,Ph(i.src))},Al=(t=0,e=!0)=>new(wh("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e}),Mm=(t,e,i=n=>n)=>t.getAllResponseHeaders().indexOf(e)>=0?i(t.getResponseHeader(e)):void 0,fx=t=>{if(!t)return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(i=>i.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(i=>i.length);return e.length?decodeURI(e[e.length-1]):null};const yx="URL_REQUEST";class zc extends Error{constructor(e,i,n){super(e),this.name="EditorError",this.code=i,this.metadata=n}}var xy=(t,e)=>{const{headers:i={},credentials:n}=e||{};Object.entries(i).forEach(([r,o])=>t.setRequestHeader(r,o)),n&&(t.withCredentials=n!=="omit")},bx=(t,e,i)=>/^data:/.test(t)?(async(n,r="data-uri",o=fe)=>{o(Al(0));const a=await fetch(n);o(Al(.33));const s=await a.blob();let l;Fu(s)||(l="image/"+(n.includes(",/9j/")?"jpeg":"png")),o(Al(.66));const c=Bc(s,r,l);return o(Al(1)),c})(t,void 0,e):((n,r,o)=>new Promise((a,s)=>{const l=()=>s(new zc("Error fetching image",yx,c)),c=new XMLHttpRequest;c.onprogress=r,c.onerror=l,c.onload=()=>{if(!c.response||c.status>=300||c.status<200)return l();const u=Mm(c,"Content-Type"),p=Mm(c,"Content-Disposition",fx)||Ph(n);a(Bc(c.response,p,u||Ch(p)))};const{willRequest:d}=o;Promise.resolve(d&&d(n,{resourceType:"image"})).then(u=>{if(u===!1)return s("Image load rejected");c.open("GET",n),xy(c,u),c.responseType="blob",c.send()}).catch(console.error)}))(t,e,i),Eh=t=>t instanceof Blob&&!(t instanceof File),vy=t=>"close"in t,xx=async(t,e,i)=>{if(Yc(t)||Eh(t))return t;if(_e(t))return await bx(t,e,i);if(Vl(t,"canvas"))return await Cm(t);if(Vl(t,"img"))return await gx(t);if(Wl(t)||vy(t))return await Cm(await Gl(t));throw new zc("Invalid image source","invalid-image-source")};let mp=null;var Du=()=>(mp===null&&(mp=Cr()&&/^mac/i.test(navigator.platform)),mp);let $p=null;var sa=()=>($p===null&&($p=Cr()&&(Sh(/iPhone|iPad|iPod/)||Du()&&navigator.maxTouchPoints>=1)),$p),vx=async(t,e=1)=>await Au()||sa()||e<5?t:Un(t.height,t.width),wy=t=>/jpeg/.test(t.type),wx=t=>{return typeof(e=t)!="object"||e.constructor!=Object?t:JSON.stringify(t);var e},Ah=(t,e=0,i)=>(e===0||(t.translate(i.x,i.y),t.rotate(e),t.translate(-i.x,-i.y)),t),Sy=(t,e,i)=>(t.scale(e,i),t),Sx=async(t,e={})=>{const{flipX:i,flipY:n,rotation:r,crop:o}=e,a=Ba(t),s=i||n,l=!!r,c=o&&(o.x||o.y||o.width||o.height),d=c&&ra(o,Zr(a)),u=c&&!d;if(!s&&!l&&!u)return t;let p,h=yn("canvas",{width:t.width,height:t.height});if(h.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),s){const g=yn("canvas",{width:h.width,height:h.height}).getContext("2d",{willReadFrequently:!0});Sy(g,i?-1:1,n?-1:1),g.drawImage(h,i?-h.width:0,n?-h.height:0),g.restore(),or(h),h=g.canvas}if(l){const g=rs(sl(rr(wr(xs(h),r))),Math.floor),m=yn("canvas",{width:o.width,height:o.height}).getContext("2d",{willReadFrequently:!0});((f,x,w)=>{f.translate(x,w)})(m,-o.x,-o.y),Ah(m,r,_l(g)),m.drawImage(h,.5*(g.width-h.width),.5*(g.height-h.height)),m.restore(),or(h),h=m.canvas}else if(u)return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(o.x,o.y,o.width,o.height),or(h),p;return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,h.width,h.height),or(h),p},kx=(t,e)=>{const{imageData:i,width:n,height:r}=t,o=i.width,a=i.height,s=Math.round(n),l=Math.round(r),c=i.data,d=new Uint8ClampedArray(s*l*4),u=o/s,p=a/l,h=Math.ceil(.5*u),g=Math.ceil(.5*p);for(let m=0;m<l;m++)for(let f=0;f<s;f++){const x=4*(f+m*s);let w=0,S=0,C=0,I=0,E=0,B=0,T=0;const D=(m+.5)*p;for(let U=Math.floor(m*p);U<(m+1)*p;U++){const P=Math.abs(D-(U+.5))/g,y=(f+.5)*u,V=P*P;for(let nt=Math.floor(f*u);nt<(f+1)*u;nt++){let k=Math.abs(y-(nt+.5))/h;const N=Math.sqrt(V+k*k);if(N<-1||N>1||(w=2*N*N*N-3*N*N+1,w<=0))continue;k=4*(nt+U*o);const tt=c[k+3];T+=w*tt,C+=w,tt<255&&(w=w*tt/250),I+=w*c[k],E+=w*c[k+1],B+=w*c[k+2],S+=w}}d[x]=I/S,d[x+1]=E/S,d[x+2]=B/S,d[x+3]=T/C}e(null,{data:d,width:s,height:l})},Lh=t=>{if(t instanceof ImageData)return t;let e;try{e=new ImageData(t.width,t.height)}catch{e=yn("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},Cx=async(t,e={},i)=>{const{width:n,height:r,fit:o,upscale:a}=e;if(!n&&!r)return t;let s=n,l=r;if(n?r||(l=n):s=r,o!=="force"){const c=s/t.width,d=l/t.height;let u=1;if(o==="cover"?u=Math.max(c,d):o==="contain"&&(u=Math.min(c,d)),u>1&&a===!1)return t;s=Math.round(t.width*u),l=Math.round(t.height*u)}return s=Math.max(s,1),l=Math.max(l,1),t.width===s&&t.height===l?t:i?i(t,s,l):(t=await Xc(kx,[{imageData:t,width:s,height:l}],[t.data.buffer]),Lh(t))},Tx=(t,e)=>{const{imageData:i,matrix:n}=t;if(!n)return e(null,i);const r=new Uint8ClampedArray(i.width*i.height*4),o=i.data,a=o.length,s=n[0],l=n[1],c=n[2],d=n[3],u=n[4],p=n[5],h=n[6],g=n[7],m=n[8],f=n[9],x=n[10],w=n[11],S=n[12],C=n[13],I=n[14],E=n[15],B=n[16],T=n[17],D=n[18],U=n[19];let P=0,y=0,V=0,nt=0,k=0,N=0,tt=0,ct=0,ot=0,mt=0,Z=0,gt=0;for(;P<a;P+=4)y=o[P]/255,V=o[P+1]/255,nt=o[P+2]/255,k=o[P+3]/255,N=y*s+V*l+nt*c+k*d+u,tt=y*p+V*h+nt*g+k*m+f,ct=y*x+V*w+nt*S+k*C+I,ot=y*E+V*B+nt*T+k*D+U,mt=Math.max(0,N*ot)+(1-ot),Z=Math.max(0,tt*ot)+(1-ot),gt=Math.max(0,ct*ot)+(1-ot),r[P]=255*Math.max(0,Math.min(1,mt)),r[P+1]=255*Math.max(0,Math.min(1,Z)),r[P+2]=255*Math.max(0,Math.min(1,gt)),r[P+3]=255*k;e(null,{data:r,width:i.width,height:i.height})},ky=(t,e)=>{const{imageData:i,matrix:n}=t;if(!n)return e(null,i);let r=n.reduce((T,D)=>T+D);r=r<=0?1:r;const o=i.width,a=i.height,s=i.data;let l=0,c=0,d=0;const u=Math.round(Math.sqrt(n.length)),p=Math.floor(u/2);let h=0,g=0,m=0,f=0,x=0,w=0,S=0,C=0,I=0,E=0;const B=new Uint8ClampedArray(o*a*4);for(d=0;d<a;d++)for(c=0;c<o;c++){for(h=0,g=0,m=0,f=0,w=0;w<u;w++)for(x=0;x<u;x++)S=d+w-p,C=c+x-p,S<0&&(S=a-1),S>=a&&(S=0),C<0&&(C=o-1),C>=o&&(C=0),I=4*(S*o+C),E=n[w*u+x],h+=s[I]*E,g+=s[I+1]*E,m+=s[I+2]*E,f+=s[I+3]*E;B[l]=h/r,B[l+1]=g/r,B[l+2]=m/r,B[l+3]=f/r,l+=4}e(null,{data:B,width:o,height:a})},Mx=(t,e)=>{let{imageData:i,strength:n}=t;if(!n)return e(null,i);const r=new Uint8ClampedArray(i.width*i.height*4),o=i.width,a=i.height,s=i.data,l=(V,nt)=>(c=V-E,d=nt-B,Math.sqrt(c*c+d*d));let c,d,u,p,h,g,m,f,x,w,S,C=0,I=0,E=.5*o,B=.5*a,T=l(0,0);for(n>0?(u=0,p=0,h=0):(n=Math.abs(n),u=1,p=1,h=1),I=0;I<a;I++)for(C=0;C<o;C++)D=4*(C+I*o),U=s,P=r,y=l(C,I)*n/T,g=U[D]/255,m=U[D+1]/255,f=U[D+2]/255,x=U[D+3]/255,w=1-y,S=w*x+y,P[D]=(w*x*g+y*u)/S*255,P[D+1]=(w*x*m+y*p)/S*255,P[D+2]=(w*x*f+y*h)/S*255,P[D+3]=255*S;var D,U,P,y;e(null,{data:r,width:i.width,height:i.height})},Px=(t,e)=>{const{imageData:i,level:n,monochrome:r=!1}=t;if(!n)return e(null,i);const o=new Uint8ClampedArray(i.width*i.height*4),a=i.data,s=a.length;let l,c,d,u=0;const p=()=>255*(2*Math.random()-1)*n,h=r?()=>{const g=p();return[g,g,g]}:()=>[p(),p(),p()];for(;u<s;u+=4)[l,c,d]=h(),o[u]=a[u]+l,o[u+1]=a[u+1]+c,o[u+2]=a[u+2]+d,o[u+3]=a[u+3];e(null,{data:o,width:i.width,height:i.height})},Rx=(t,e)=>{const{imageData:i,level:n}=t;if(!n)return e(null,i);const r=new Uint8ClampedArray(i.width*i.height*4),o=i.data,a=o.length;let s,l,c,d=0;for(;d<a;d+=4)s=o[d]/255,l=o[d+1]/255,c=o[d+2]/255,r[d]=255*Math.pow(s,n),r[d+1]=255*Math.pow(l,n),r[d+2]=255*Math.pow(c,n),r[d+3]=o[d+3];e(null,{data:r,width:i.width,height:i.height})},Ix=async(t,e={})=>{const{colorMatrix:i,convolutionMatrix:n,gamma:r,noise:o,vignette:a}=e,s=[];if(n&&s.push([ky,{matrix:n.clarity}]),r>0&&s.push([Rx,{level:1/r}]),i&&!(d=>{const u=d.length;let p;const h=u>=20?6:u>=16?5:3;for(let g=0;g<u;g++)if(p=d[g],p===1&&g%h!=0||p!==0&&p!==1)return!1;return!0})(i)&&s.push([Tx,{matrix:i}]),(o>0||o<0)&&s.push([Px,{level:o}]),(a>0||a<0)&&s.push([Mx,{strength:a}]),!s.length)return t;const l=(d,u)=>`(err, imageData) => {
            (${d[u][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${u}]), 
                ${d[u+1]?l(d,u+1):"done"})
        }`,c=`function (options, done) {
        const filterInstructions = options.filterInstructions;
        const imageData = options.imageData;
        (${l(s,0)})(null, imageData)
    }`;return t=await Xc(c,[{imageData:t,filterInstructions:s.map(d=>d[1])}],[t.data.buffer]),Lh(t)},ui=t=>typeof t=="number",ku=t=>_e(t)&&t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g)!==null,Ae=(t,e)=>t.hasOwnProperty(e),An=t=>Array.isArray(t);let Pm=64,gp=102,Rm=112,Im=!1;var Cy=(t,e)=>(!Im&&Cr()&&(/^win/i.test(navigator.platform)&&(gp=103),(sa()||Du())&&(Pm=63.5,gp=110,Rm=123),Im=!0),`<svg${e?` aria-label="${e}"`:""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${Pm}" y="${gp}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${Rm}px">${t}</text></svg>`),Nl=t=>t instanceof Blob,jr=(t,e)=>t/e*100+"%",Sr=t=>`rgba(${Math.round(255*t[0])}, ${Math.round(255*t[1])}, ${Math.round(255*t[2])}, ${ui(t[3])?t[3]:1})`,pu=t=>Object.values(t).join("_");const Ty=async(t,e=0)=>{const i=yn("canvas",{width:80,height:80}).getContext("2d");return await((n=0)=>new Promise(r=>{setTimeout(r,n)}))(e),i.drawImage(t,0,0,80,80),!((n=>!new Uint32Array(n.getImageData(0,0,n.canvas.width,n.canvas.height).data.buffer).some(r=>r!==0))(i)&&e<=256)||await Ty(t,e+16)},Em=new Map;var Ex=t=>new Promise((e,i)=>{const n=new FileReader;n.onerror=()=>i(n.error),n.onload=()=>e(n.result),n.readAsDataURL(t)}),os=()=>{let t=[];return{sub:(e,i)=>(t.push({event:e,callback:i}),()=>t=t.filter(n=>n.event!==e||n.callback!==i)),pub:(e,i)=>{t.filter(n=>n.event===e).forEach(n=>n.callback(i))}}};const za=32,zh=({color:t=[0,0,0],fontSize:e=16,fontFamily:i="sans-serif",fontVariant:n="normal",fontWeight:r="normal",fontStyle:o="normal",textAlign:a="left",letterSpacing:s="normal",lineHeight:l=20},c=1)=>`font-size:${e*c}px;font-style:${o};font-weight:${r};font-family:${i};font-variant:${n};line-height:${l*c}px;text-align:${a};letter-spacing:${ui(s)?s+"px":"normal"};color:${Sr(t)};`,Fh=(t,e,i=1)=>{const{width:n,height:r,disableNewline:o}=e,a=!n,s=o===!1?((d="")=>d.split(`
`).length)(t):void 0,l=a?"normal":"break-word",c=a&&!s?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${a?"auto":n*i+"px"};height:${r?r*i+"px":"auto"};margin-top:0;margin-bottom:0;padding-top:${(({fontSize:d=16,lineHeight:u=20}={})=>.5*Math.max(0,d-u))(e)*i}px;word-break:${l};word-wrap:normal;white-space:${c};`},Am=new Map,My=t=>{const e=[];for(const i of Array.from(t.childNodes))i.nodeType===Node.TEXT_NODE?e.push(Ax(i)):e.push(...My(i));return e},Py="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",Ax=t=>{const e=t.nodeValue;if(!e)return[];const i=e.length,n=document.createRange();n.selectNodeContents(t);const r=[];for(let a=0;a<i;a++){n.setStart(t,0),n.setEnd(t,a+1);const s=n.getClientRects().length-1,l=e.charAt(a);r[s]?r[s]+=l:r.push(l)}const o=n.getClientRects();return r.map((a,s)=>({rect:o[s],text:a}))},Lm=new Map,Vo=(t="",e)=>{const{width:i=0,height:n=0}=e;if(i&&n)return Un(i,n);let{fontSize:r=16,fontFamily:o,lineHeight:a=20,fontWeight:s,fontStyle:l,fontVariant:c,letterSpacing:d}=e;const u=pu({text:t,fontFamily:o,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:r,letterSpacing:d,lineHeight:a,width:i});let p=Lm.get(u);if(p)return p;let h=1;r>1e3&&ka()&&(h=r/1e3,r=1e3,a/=h);const g=Rh(yn("pre",{contenteditable:"true",spellcheck:"false",style:`${Py}${zh({...e,fontSize:r,lineHeight:a})};${Fh(t,e)}"`,innerHTML:t})).getBoundingClientRect();return p=Ba(g),p=rs(p,m=>m*h),i&&(p.width=i),Lm.set(u,p),p},zm=new Map,Lx=(t,e)=>new Promise((i,n)=>{let r=zm.get(t);r===void 0&&(r=((o,a)=>{const{sub:s,pub:l}=os();let c,d;return Promise.resolve(a&&a(o,{resourceType:"stylesheet"})).then(u=>{if(u===!1)return d="requestPrevented",l("error",d);const{headers:p,credentials:h}=u||{};fetch(o,{headers:p,credentials:h}).then(g=>g.text()).then(g=>{c=g,l("load",c)}).catch(g=>{d=g,l("error",d)})}),{sub:(u,p)=>u==="load"&&c?p(c):u==="error"&&d?p(d):void s(u,p)}})(t,e),zm.set(t,r)),r.sub("load",i),r.sub("error",n)}),Fm=async(t,e,i)=>{let n;try{n=await Lx(t,e)}catch{return[]}const r={innerHTML:n,id:aa()};i&&(r.nonce=i);const o=yn("style",r);document.head.append(o);const a=Array.from(document.styleSheets).find(s=>s.ownerNode.id===o.id);return o.remove(),Array.from(a.cssRules)},Pl=new Map,zx=async(t,e,i)=>{if(Pl.has(t.href))return Pl.get(t.href);let n;try{n=Array.from(t.cssRules);for(const r of(o=>o.filter(a=>a instanceof CSSImportRule))(n)){const o=r.href;if(Pl.has(o)){const s=Pl.get(o);n=[...n,...s];continue}const a=await Fm(o,e,i);Pl.set(o,a),n=[...n,...a]}}catch{const o=t.href;n=await Fm(o,e,i),Pl.set(o,n)}return(r=>r.filter(o=>o instanceof CSSFontFaceRule))(n)},Ry=(t,e)=>t.style.getPropertyValue(e),Fx=(t,e)=>t.style?Ry(t,"font-family").replace(/^"|"$/g,"")==e:!1,Dx=async(t,e,i)=>{const n=((r,o)=>{const a=[];for(const s of r)Fx(s,o)&&a.push(s);return a})(await(async(r,o)=>{const a=Array.from(document.styleSheets).map(c=>zx(c,r,o)),s=await Promise.all(a),l=[];return s.forEach(c=>l.push(...c)),l})(e,i),t);return n.length?n.map(r=>{const o=r.parentStyleSheet.href&&new URL(r.parentStyleSheet.href),a=o?o.origin+(c=>c.pathname.split("/").slice(0,-1).join("/"))(o)+"/":"",s=r.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],l=Array.from(r.style).filter(c=>c!="src").reduce((c,d)=>c+=d+":"+Ry(r,d)+";","");return[/^http/.test(s)?s:a+s,l]}):[]},Dm=new Map,Bm=new Map;var Iy=async(t="",e)=>{if(!t.length)return;let{color:i,imageWidth:n=300,imageHeight:r=150,paddingTop:o=0,paddingRight:a=za,paddingBottom:s=0,paddingLeft:l=za,fontFamily:c,fontSize:d,pixelRatio:u=1,willRequest:p,outline:h,blur:g,styleNonce:m}=e,f=1,x="";d>1e3&&ka()&&(f=d/1e3,x=`transform-origin:0 0;transform:scale(${f})`);const w=u/f,S=(n+l+a)*u,C=(r+s+o)*u,I=await(async(y,V,nt)=>{if(Dm.get(y))return;let k=Bm.get(y);if(!k){const tt=await Dx(y,V,nt);if(!tt.length)return void Dm.set(y,!0);const ct=[];for(const[ot,mt]of tt){const Z=await fetch(ot).then(dt=>dt.blob()),gt=!(N=Z.type)||/woff2/.test(N)?"woff2":/woff/.test(N)?"woff":/ttf|truetype/.test(N)?"truetype":/otf|opentype/.test(N)?"opentype":/svg/.test(N)?"svg":"woff2",xt=await Ex(Z);ct.push(`@font-face { src:url(${xt}) format('${gt}');${mt};font-display:block; }`)}k=ct.join(""),Bm.set(y,k)}var N;return k})(c,p,m);let E="";I&&(E=`<style${m?` nonce="${m}"`:""}>${I}</style>`);const B=t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g," ").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),T=`top:${o*w}px;right:${a*w}px;bottom:${s*w}px;left:${l*w}px`;let D=i,U="",P="";if(h||g){const y=Sr(i);h&&(D=[0,0,0,0],U=`-webkit-text-stroke: ${2*h*w}px ${y}`),g&&(Fa()?P=`filter:blur(${g*w*.4}px)`:(D=[0,0,0,0],P=`text-shadow: 0 0 ${g*w}px ${y}`))}return((y,{safariCacheKey:V="*"}={})=>new Promise((nt,k)=>{const N=new Image;N.onerror=()=>k(new Error("Failed to load SVG")),N.onload=()=>{if(!Fa()||!y.includes("@font-face")||Em.has(V))return nt(N);Ty(N).then(()=>{Em.set(V,!0),nt(N)})},N.src="data:image/svg+xml,"+y}))(`<svg xmlns="http://www.w3.org/2000/svg" width="${S}" height="${C}" viewBox="0 0 ${S} ${C}"><foreignObject x="0" y="0" width="${S}" height="${C}"><div xmlns="http://www.w3.org/1999/xhtml">${E}<pre contenteditable="true" spellcheck="false" style="position:absolute;${T};${zh({...e,color:D,fontSize:d},w)};${Fh(t,e,w)};${x};${U};${P}">${B}</pre></div></foreignObject></svg>`,{safariCacheKey:c})};const In=t=>{const e={...t};return ey(e)},Om=(t,e={})=>{const i=cr(t);let n,r;const o=e.width||e.rx,a=e.height||e.ry;if(o&&a)return po(e);if(o||a){n=parseFloat(o||Number.MAX_SAFE_INTEGER),r=parseFloat(a||Number.MAX_SAFE_INTEGER);const s=Math.min(n,r);_e(o)||_e(a)?(n=s+"%",r=s*i+"%"):(n=s,r=s)}else n="10%",r=10*i+"%";return{[(e.width?"width":e.rx?"rx":void 0)||"width"]:n,[(e.width?"height":e.rx?"ry":void 0)||"height"]:r}},Wm=(t,e={})=>{return{width:void 0,height:void 0,...e,aspectRatio:1,backgroundImage:(i=Cy(t),"data:image/svg+xml,"+i.replace("<","%3C").replace(">","%3E"))};var i},_m=(t,e={})=>({backgroundColor:[0,0,0,0],...nr(e)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...e,backgroundImage:_e(t)?t:Nl(t)?URL.createObjectURL(t):t}),Vm=(t,e)=>{let i;if(_e(t)||Nl(t)){const n={...Om(e),backgroundSize:"contain"};i=ku(t)?Wm(t,n):_m(t,n)}else if(t.src){const n=Om(e,t.shape||t),r={...t.shape,...n};if(t.width&&t.height&&!Ae(r,"aspectRatio")){const o=ih(n,"width",e),a=ih(n,"height",e);r.aspectRatio=ea(o,a)}r.backgroundSize||t.shape||t.width&&t.height||(r.backgroundSize="contain"),i=ku(t.src)?Wm(t.src,r):_m(t.src,r)}else t.shape&&(i=In(t.shape));return Ae(i,"backgroundImage")&&(Ae(i,"backgroundColor")||(i.backgroundColor=[0,0,0,0]),Ae(i,"disableStyle")||(i.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),e?zn(i,e):i},es=t=>at(t.x1,t.y1),is=t=>at(t.x2,t.y2),ir=t=>Ae(t,"text"),Cu=t=>ir(t)&&!(Bu(t)||Ae(t,"width")),hu=t=>ir(t)&&(Bu(t)||Ae(t,"width")),Io=t=>!ir(t)&&Bx(t),nr=t=>Ae(t,"rx"),lr=t=>Ae(t,"x1"),Nn=t=>Ae(t,"points"),ts=t=>ir(t)&&t.isEditing,Yd=t=>!Ae(t,"opacity")||t.opacity>0,xa=t=>t.isSelected,fp=t=>t.isEditing,uo=t=>t._isDraft,il=t=>Ae(t,"width")&&Ae(t,"height"),Ey=t=>{const e=Ae(t,"right"),i=Ae(t,"bottom");return e||i},Bu=t=>(Ae(t,"x")||Ae(t,"left"))&&Ae(t,"right")||(Ae(t,"y")||Ae(t,"top"))&&Ae(t,"bottom"),Bx=t=>il(t)||Bu(t),Kp=t=>(t._isDraft=!0,t),Nm=t=>(t._isDraft=!1,t),Jp=(t,e)=>t.disableStyle!==!0&&(!An(t.disableStyle)||!e||!t.disableStyle.includes(e)),ya=t=>t.disableSelect!==!0,yp=t=>t.disableRemove!==!0,Hm=t=>t.disableDuplicate!==!0&&ol(t),Ox=t=>!t.disableFlip&&!uo(t)&&!Ey(t)&&(e=>Ae(e,"backgroundImage")||Ae(e,"text"))(t),Rl=(t,e)=>!!ir(t)&&t.disableInput!==!0&&(sn(t.disableInput)?t.disableInput(e??t.text):e||!0),Ks=(t,e)=>t.disableTextLayout!==!0&&(!An(t.disableTextLayout)||!e||!t.disableTextLayout.includes(e)),bp=t=>Ay(t)&&t.points.length>3,Ay=t=>!!Nn(t)&&t.disableAddPoints!==void 0&&t.disableAddPoints!==!0,Qp=t=>t.disableManipulate!==!0&&!uo(t)&&!Ey(t),ol=t=>Qp(t)&&t.disableMove!==!0,th=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),jm=t=>(delete t.rotation,t),Um=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),Gm=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),Zm=t=>{let e=t.text;e=e.replace(/&(#[0-9]+|[a-z]+);/gi,(i,n)=>`___${n}___`),e=e.replace(/&/,"&amp;"),t.text=e.replace(/___(#[0-9]+|[a-z]+)___/gi,(i,n)=>`&${n};`)},Wx=t=>{if(t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],t.format=t.format==="html"?"html":"text",t.textShadow){const[e,i,n,r]=t.textShadow;t.textShadowX=e,t.textShadowY=i,t.textShadowBlur=n,t.textShadowColor=r,delete t.textShadow}if(t.textOutline){const[e,i]=t.textOutline;t.textOutlineWidth=e,t.textOutlineColor=i,delete t.textOutline}return t.format==="html"?Zm(t):(e=>{Zm(e);let i=e.text;i=i.replace(/</g,"&gt;"),i=i.replace(/>/g,"&lt;"),e.text=i})(t),Cu(t)?_x(t):Vx(t)},_x=t=>(t.disableNewline!==!1&&(delete t.textAlign,t.text=t.text.replace(/\n/g," ")),th(t)),Vx=t=>(t.textAlign=t.textAlign||"left",t),Ly=t=>((e=>{_e(e.id)||(e.id=aa()),Ae(e,"rotation")||(e.rotation=0),Ae(e,"opacity")||(e.opacity=1),Ae(e,"disableErase")||(e.disableErase=!0)})(t),ir(t)?Wx(t):Io(t)?(e=>{e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],Gm(e)})(t):Nn(t)?(e=>{Um(e),jm(e),Ae(e,"pathClose")||(e.disableResize=!0,Ae(e,"disableMove")||(e.disableMove=!0)),th(e)})(t):lr(t)?(e=>{Um(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,jm(e),th(e)})(t):nr(t)&&(e=>{e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],Gm(e)})(t),t),Nx=t=>ir(t)?"text":Io(t)?"rectangle":Nn(t)?"path":lr(t)?"line":nr(t)?"ellipse":void 0,Tu=(t,e)=>parseFloat(t)/100*e,Hx=new RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),jx=new RegExp(/^y|top|bottom|^height|ry/,"i"),Dh=(t,e,{width:i,height:n})=>{if(Array.isArray(e))return e.map(o=>(cl(o)&&zy(o,{width:i,height:n}),_e(o)&&(o=Dh(t,o,{width:i,height:n})),o));if(typeof e!="string"||!e.endsWith("%"))return e;const r=parseFloat(e)/100;return Hx.test(t)?ai(i*r,6):jx.test(t)?ai(n*r,6):e},Ux=Dh,Gx=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],zy=(t,e)=>{Object.entries(t).map(([i,n])=>{t[i]=Dh(i,n,e)}),t.text&&Gx.filter(i=>_e(t[i])).forEach(i=>{var n,r;t[i]=(n=t[i],r=t.fontSize,Math.round(r*(parseFloat(n)/100)))})},zn=(t,e)=>(zy(t,e),By(t,e),t),eh=(t,e)=>{let i;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?i=e.width:/^y|height|ry/.test(t)&&(i=e.height),i},ih=(t,e,i)=>Array.isArray(t[e])?t[e].map(n=>Object.entries(n).reduce((r,[o,a])=>(r[o]=_e(a)?Tu(a,eh(o,i)):a,r),{})):_e(t[e])?Tu(t[e],eh(e,i)):t[e],Bl=(t,e,i)=>e.reduce((n,r)=>{const o=ih(t,r,i);return n[r]=o,n},{}),wa=(t,e,i)=>(Object.keys(e).forEach(n=>((r,o,a,s)=>{if(!_e(r[o]))return r[o]=a,r;const l=eh(o,s);return r[o]=l===void 0?a:jr(a,l),r})(t,n,e[n],i)),t),Fy=(t,e)=>{const i=t.filter(n=>n.x<0||n.y<0||n.x1<0||n.y1<0).reduce((n,r)=>{const[o,a,s,l]=(c=>{const d=ks(),u=c.strokeWidth||0;if(Io(c))d.x=c.x-.5*u,d.y=c.y-.5*u,d.width=c.width+u,d.height=c.height+u;else if(lr(c)){const{x1:p,y1:h,x2:g,y2:m}=c,f=Math.abs(Math.min(p,g)),x=Math.abs(Math.max(p,g)),w=Math.abs(Math.min(h,m)),S=Math.abs(Math.min(h,m));d.x=f+.5*u,d.y=x+.5*u,d.width=x-f+u,d.height=S-w+u}else nr(c)&&(d.x=c.x-c.rx+.5*u,d.y=c.y-c.ry+.5*u,d.width=2*c.rx+u,d.height=2*c.ry+u);return d&&Ae(c,"rotation")&&wr(d,c.rotation),ll(d)})(r);return n.top=Math.min(o,n.top),n.left=Math.min(l,n.left),n.bottom=Math.max(s,n.bottom),n.right=Math.max(a,n.right),n},{top:0,right:0,bottom:0,left:0});return i.right>0&&(i.right-=e.width),i.bottom>0&&(i.bottom-=e.height),i},Dy=(t,e,i)=>{const n=In(t);zn(n,e);const r=i(n);return Array.isArray(r)?r:[r]},By=(t,e)=>{if(Ae(t,"left")&&(t.x=t.left),Ae(t,"right")&&!_e(t.right)){const i=e.width-t.right;Ae(t,"left")?(t.x=t.left,t.width=Math.max(0,i-t.left)):Ae(t,"width")&&(t.x=i-t.width)}if(Ae(t,"top")&&(t.y=t.top),Ae(t,"bottom")&&!_e(t.bottom)){const i=e.height-t.bottom;Ae(t,"top")?(t.y=t.top,t.height=Math.max(0,i-t.top)):Ae(t,"height")&&(t.y=i-t.height)}return t},Oy=(t,e)=>(Nn(t)&&t.points.filter(i=>ui(i.x)).forEach(i=>{i.x*=e,i.y*=e}),lr(t)&&ui(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),ui(t.x)&&ui(t.y)&&(t.x*=e,t.y*=e),ui(t.width)&&ui(t.height)&&(t.width*=e,t.height*=e),ui(t.rx)&&ui(t.ry)&&(t.rx*=e,t.ry*=e),(i=>ui(i.strokeWidth)&&i.strokeWidth>0)(t)&&(t.strokeWidth*=e),ir(t)&&(t._scale=e,ui(t.fontSize)&&(t.fontSize*=e),ui(t.lineHeight)&&(t.lineHeight*=e),ui(t.width)&&!ui(t.height)&&(t.width*=e)),Ae(t,"cornerRadius")&&ui(t.cornerRadius)&&(t.cornerRadius*=e),t),Wy=t=>{if(Io(t))return at(t.x+.5*t.width,t.y+.5*t.height);if(nr(t))return at(t.x,t.y);if(t.text){if(hu(t)){const i=t.height||Vo(t.text,t).height;return at(t.x+.5*t.width,t.y+.5*i)}const e=Vo(t.text,t);return at(t.x+.5*e.width,t.y+.5*e.height)}return Nn(t)?No(t.points):lr(t)?No([es(t),is(t)]):void 0};var qc=t=>/canvas/i.test(t.nodeName),Zx=(t,e)=>new Promise((i,n)=>{let r=t,o=!1;const a=()=>{o||(o=!0,sn(e)&&Promise.resolve().then(()=>e(Un(r.naturalWidth,r.naturalHeight))))};if(r.src||(r=new Image,_e(t)&&new URL(t,location.href).origin!==location.origin&&(r.crossOrigin="anonymous"),r.src=_e(t)?t:URL.createObjectURL(t)),r.complete)return a(),i(r);sn(e)&&fy(r).then(a).catch(n),r.onload=()=>{a(),i(r)},r.onerror=()=>n(new Error("Failed to load image"))});const Xm=new Map([]),Bh=(t,e={})=>new Promise((i,n)=>{const{onMetadata:r=fe,onLoad:o=i,onError:a=n,onComplete:s=fe}=e;let l=Xm.get(t);if(l||(l={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:os()},Xm.set(t,l)),l.bus.sub("meta",r),l.bus.sub("load",o),l.bus.sub("error",a),l.bus.sub("complete",s),qc(t)){const c=t,d=c.cloneNode();l.complete=!0,l.image=d,l.size=Lc(c)}if(l.complete)return l.bus.pub("meta",{size:l.size}),l.error?l.bus.pub("error",l.error):l.bus.pub("load",l.image),l.bus.pub("complete"),void(l.bus=os());l.loading||(l.loading=!0,Zx(t,c=>{l.size=c,l.bus.pub("meta",{size:c})}).then(c=>{l.image=c,l.bus.pub("load",c)}).catch(c=>{l.error=c,l.bus.pub("error",c)}).finally(()=>{l.complete=!0,l.loading=!1,l.bus.pub("complete"),l.bus=os()}))}),Xx=(t,e,i,n)=>t.drawImage(e,i.x,i.x,i.width,i.height,n.x,n.y,n.width,n.height);var _y=async(t,e,i,n,r=Xx,o)=>{t.save(),t.clip(),await r(t,e,i,n,o),t.restore()};const Mu=(t,e,i,n,r)=>{const o=Pi(t);if(n){const s=Ho(rr(n),ai);return s.x*=i.width,s.width*=i.width,s.y*=i.height,s.height*=i.height,{srcRect:s,destRect:o}}const a=En(0,0,i.width,i.height);if(e==="contain"){const s=to(t,cr(a));o.width=s.width,o.height=s.height,r?(o.x+=r.x,o.y+=r.y):(o.x+=s.x,o.y+=s.y)}else if(e==="cover"){const s=as(o,a.width/a.height);o.width=s.width,o.height=s.height,r?(o.x+=r.x,o.y+=r.y):(o.x+=s.x,o.y+=s.y)}else e?(o.width=e.width,o.height=e.height,r&&(o.x+=r.x,o.y+=r.y)):r&&(o.width=i.width,o.height=i.height,o.x+=r.x,o.y+=r.y);return{srcRect:a,destRect:o}},xp=(t,e)=>(e.cornerRadius>0?((i,n,r,o,a,s)=>{o<2*s&&(s=o/2),a<2*s&&(s=a/2),i.beginPath(),i.moveTo(n+s,r),i.arcTo(n+o,r,n+o,r+a,s),i.arcTo(n+o,r+a,n,r+a,s),i.arcTo(n,r+a,n,r,s),i.arcTo(n,r,n+o,r,s),i.closePath()})(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),Ym=(t,e)=>(e.backgroundColor&&t.fill(),t),qm=(t,e)=>(e.strokeWidth&&t.stroke(),t);var Oh=async(t,e,i={})=>{const{drawImage:n}=i;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?Sr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Sr(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let r;if(r=qc(e.backgroundImage)?e.backgroundImage:await Bh(e.backgroundImage),xp(t,e),Ym(t,e),e.backgroundRepeat==="repeat"){const o=e.backgroundPosition||{x:0,y:0},{srcRect:a,destRect:s}=Mu(e,e.backgroundSize||Lc(r),Lc(r),e.backgroundCorners,{x:0,y:0}),l=document.createElement("canvas");l.width=s.width,l.height=s.height;const c=l.getContext("2d",{willReadFrequently:!1,desynchronized:!0});await n(c,r,a,{...s,x:0,y:0});const d=t.createPattern(l,"repeat");t.fillStyle=d,t.save(),t.beginPath(),t.rect(e.x+o.x,e.y+o.y,e.width-o.x,e.height-o.y),t.clip(),t.translate(s.x+o.x,s.y+o.y),t.fill(),or(l),t.restore()}else{const{srcRect:o,destRect:a}=Mu(e,e.backgroundSize,Lc(r),e.backgroundCorners,e.backgroundPosition);await _y(t,r,o,a,n,{feather:e.feather})}return t.beginPath(),xp(t,e),qm(t,e),[]}return xp(t,e),Ym(t,e),qm(t,e),[]},Wh=async(t,e,i={})=>new Promise(async(n,r)=>{const{drawImage:o}=i;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Sr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Sr(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let a;try{a=await Bh(e.backgroundImage)}catch(d){r(d)}const s=En(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),{srcRect:l,destRect:c}=Mu(s,e.backgroundSize,Lc(a),e.backgroundCorners,e.backgroundPosition);await _y(t,a,l,c,o),e.strokeWidth&&t.stroke(),n([])}else e.strokeWidth&&t.stroke(),n([])}),Yx=async(t,e,i)=>{const n=e.width&&e.height?Ba(e):Vo(e.text,e),r={x:e.x,y:e.y,width:n.width,height:n.height};if(Oh(t,{...e,...r,options:i}),!e.text.length)return[];const{textOutlineWidth:o=0,textShadowX:a=0,textShadowY:s=0,textShadowBlur:l=0,textShadowColor:c,outline:d,blur:u,...p}=e,h=!!e.height;if(h&&(t.rect(r.x-o+Math.min(a,0),r.y-o+Math.min(s,0),r.width+o+o+Math.abs(a)+l,r.height+o+Math.abs(s)+l),t.save(),t.clip()),a||s||l){t.save(),t.translate(a,s);const g={...r};h||(g.height+=za+l),await vp(t,g,e,{...i,paddingLeft:za+l,paddingRight:za+l,paddingTop:l,paddingBottom:l+h?-1*s:e.fontSize,shapeExtendedProps:{color:c,blur:l}}),t.restore()}if(o){const g={...r};h||(g.height+=za+o),await vp(t,g,e,{...i,paddingLeft:za+o,paddingRight:za+o,paddingTop:o,paddingBottom:o+h?0:e.fontSize,shapeExtendedProps:{color:e.textOutlineColor,outline:o}})}return h&&t.restore(),await vp(t,r,p,{...i,paddingLeft:za,paddingRight:za,paddingTop:0,paddingBottom:h?0:e.fontSize}),[]};const vp=async(t,e,i,n)=>{const{willRequest:r,shapeExtendedProps:o,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,styleNonce:d}=n,u=await Iy(i.text,{...i,...o,...e,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,imageWidth:e.width,imageHeight:e.height,willRequest:r,styleNonce:d});t.drawImage(u,i.x-a,i.y-l,u.width,u.height)};var qx=async(t,e)=>new Promise(async i=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Sr(e.strokeColor):"none",t.globalAlpha=e.opacity;let n=es(e),r=is(e);t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),e.strokeWidth&&t.stroke(),i([])}),nh=async(t,e)=>new Promise((i,n)=>{if(e.bitmap&&e.points.length===1)return void Wh(t,{x:e.points[0].x,y:e.points[0].y,rx:.5*e.strokeWidth,ry:.5*e.strokeWidth,backgroundColor:e.strokeColor}).then(()=>i([]));t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Sr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Sr(e.backgroundColor):"none",t.globalAlpha=e.opacity;const{points:r}=e;t.lineCap=e.strokeCap,t.lineJoin=e.strokeJoin,t.setLineDash(e.strokeDash||[]),e.pathClose&&t.beginPath(),t.moveTo(r[0].x,r[0].y);const o=r.length;for(let a=1;a<o;a++)t.lineTo(r[a].x,r[a].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),i([])}),Vy=(t,e,i,n)=>((e||i)&&(t.translate(n.x,n.y),t.scale(e?-1:1,i?-1:1),t.translate(-n.x,-n.y)),t);const Kx=async(t,e,i)=>{t.globalCompositeOperation=e.drawMode==="subtract"?"destination-out":"source-over";const n=Wy(e);let r;if(Ah(t,e.rotation,n),Vy(t,e.flipX,e.flipY,n),Io(e)?r=Oh:nr(e)?r=Wh:lr(e)?r=qx:Nn(e)?r=nh:ir(e)&&(r=Yx),r){const o=await r(t,e,i);return o.length?[e,...await Ny(t,o,i)]:[]}return[]};var Ny=async(t,e,i)=>{let n=[];for(const r of e)t.save(),t.beginPath(),n=[...n,...await Kx(t,r,i)],t.restore();return n},_h=async(t,e={})=>{const{shapes:i=[],contextBounds:n=t,transform:r=fe,drawImage:o,willRequest:a,styleNonce:s,canvasMemoryLimit:l,computeShape:c=qi,preprocessShape:d=qi}=e;if(!i.length)return t;const u=yn("canvas");u.width=n.width,u.height=n.height;const p=u.getContext("2d",{willReadFrequently:!0});p.putImageData(t,n.x||0,n.y||0);const h=i.map(In).map(c).map(d).flat();r(p),await Ny(p,h,{drawImage:o,canvasMemoryLimit:l,willRequest:a,styleNonce:s});const g=p.getImageData(0,0,u.width,u.height);return or(u),g},Jx=async(t,e={})=>{const{backgroundColor:i,backgroundImage:n}=e,r=!(!i||i&&i[3]===0);if(!n&&!r)return t;const o=yn("canvas");o.width=t.width,o.height=t.height;const a=o.getContext("2d",{willReadFrequently:!0});if(a.putImageData(t,0,0),a.globalCompositeOperation="destination-over",r&&(a.fillStyle=Sr(i),a.fillRect(0,0,o.width,o.height)),n){let l;l=qc(n)?n:await Bh(n);const{srcRect:c,destRect:d}=Mu({x:0,y:0,width:t.width,height:t.height},"cover",{width:l.width,height:l.height});a.drawImage(l,c.x,c.y,c.width,c.height,d.x,d.y,d.width,d.height)}const s=a.getImageData(0,0,o.width,o.height);return or(o),s},Vh=t=>t.length?t.reduce((e,i)=>((n,r)=>{const o=new Array(20);return o[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],o[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],o[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],o[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],o[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],o[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],o[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],o[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],o[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],o[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],o[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],o[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],o[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],o[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],o[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],o[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],o[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],o[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],o[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],o[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],o})([...e],i),t.shift()):[],Hy=(t,e)=>{const i=t.width*t.height,n=e.reduce((o,a)=>(a.width>o.width&&a.height>o.height&&(o.width=a.width,o.height=a.height),o),{width:0,height:0}),r=n.width*n.height;return((o,a=2)=>Math.round(o*a)/a)(Math.max(.5,.5+(1-r/i)/2),5)};function Je(){}const jy=t=>t;function Cn(t,e){for(const i in e)t[i]=e[i];return t}function Uy(t){return t()}function Km(){return Object.create(null)}function ji(t){t.forEach(Uy)}function Gi(t){return typeof t=="function"}function oi(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Gr(t,...e){if(t==null)return Je;const i=t.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function Sa(t){let e;return Gr(t,i=>e=i)(),e}function L(t,e,i){t.$$.on_destroy.push(Gr(e,i))}function ur(t,e,i,n){if(t){const r=Gy(t,e,i,n);return t[0](r)}}function Gy(t,e,i,n){return t[1]&&n?Cn(i.ctx.slice(),t[1](n(e))):i.ctx}function pr(t,e,i,n){if(t[2]&&n){const r=t[2](n(i));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],a=Math.max(e.dirty.length,r.length);for(let s=0;s<a;s+=1)o[s]=e.dirty[s]|r[s];return o}return e.dirty|r}return e.dirty}function hr(t,e,i,n,r,o){if(r){const a=Gy(e,i,n,o);t.p(a,r)}}function mr(t){if(t.ctx.length>32){const e=[],i=t.ctx.length/32;for(let n=0;n<i;n++)e[n]=-1;return e}return-1}function Vc(t){const e={};for(const i in t)i[0]!=="$"&&(e[i]=t[i]);return e}function Jm(t,e){const i={};e=new Set(e);for(const n in t)e.has(n)||n[0]==="$"||(i[n]=t[n]);return i}function vt(t,e,i){return t.set(i),e}function Zi(t){return t&&Gi(t.destroy)?t.destroy:Je}const Zy=typeof window<"u";let Xy=Zy?()=>window.performance.now():()=>Date.now(),Nh=Zy?t=>requestAnimationFrame(t):Je;const Ol=new Set;function Yy(t){Ol.forEach(e=>{e.c(t)||(Ol.delete(e),e.f())}),Ol.size!==0&&Nh(Yy)}function Hh(t){let e;return Ol.size===0&&Nh(Yy),{promise:new Promise(i=>{Ol.add(e={c:t,f:i})}),abort(){Ol.delete(e)}}}function St(t,e){t.appendChild(e)}function qy(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Qx(t){const e=ut("style");return function(i,n){St(i.head||i,n),n.sheet}(qy(t),e),e.sheet}function it(t,e,i){t.insertBefore(e,i||null)}function Q(t){t.parentNode.removeChild(t)}function ut(t){return document.createElement(t)}function kr(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $n(t){return document.createTextNode(t)}function $e(){return $n(" ")}function Tn(){return $n("")}function Mt(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function tv(t){return function(e){return e.preventDefault(),t.call(this,e)}}function ev(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function v(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function Qm(t,e){const i=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:i[n]&&i[n].set?t[n]=e[n]:v(t,n,e[n])}function t$(t,e){Object.keys(e).forEach(i=>{(function(n,r,o){r in n?n[r]=typeof n[r]=="boolean"&&o===""||o:v(n,r,o)})(t,i,e[i])})}function Ln(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function e$(t,e){t.value=e??""}function Ky(t,e,{bubbles:i=!1,cancelable:n=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,i,n,e),r}class Ou{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,i,n=null){this.e||(this.is_svg?this.e=kr(i.nodeName):this.e=ut(i.nodeName),this.t=i,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let i=0;i<this.n.length;i+=1)it(this.t,this.n[i],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Q)}}function Pu(t,e){return new t(e)}const Ru=new Map;let Nc,mu=0;function i$(t,e,i,n,r,o,a,s=0){const l=16.666/n;let c=`{
`;for(let f=0;f<=1;f+=l){const x=e+(i-e)*o(f);c+=100*f+`%{${a(x,1-x)}}
`}const d=c+`100% {${a(i,1-i)}}
}`,u=`__svelte_${function(f){let x=5381,w=f.length;for(;w--;)x=(x<<5)-x^f.charCodeAt(w);return x>>>0}(d)}_${s}`,p=qy(t),{stylesheet:h,rules:g}=Ru.get(p)||function(f,x){const w={stylesheet:Qx(x),rules:{}};return Ru.set(f,w),w}(p,t);g[u]||(g[u]=!0,h.insertRule(`@keyframes ${u} ${d}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${u} ${n}ms linear ${r}ms 1 both`,mu+=1,u}function iv(t,e){const i=(t.style.animation||"").split(", "),n=i.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=i.length-n.length;r&&(t.style.animation=n.join(", "),mu-=r,mu||Nh(()=>{mu||(Ru.forEach(o=>{const{ownerNode:a}=o.stylesheet;a&&Q(a)}),Ru.clear())}))}function Fc(t){Nc=t}function dl(){if(!Nc)throw new Error("Function called outside component initialization");return Nc}function Ls(t){dl().$$.on_mount.push(t)}function nv(t){dl().$$.after_update.push(t)}function Uo(t){dl().$$.on_destroy.push(t)}function Ca(){const t=dl();return(e,i,{cancelable:n=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Ky(e,i,{cancelable:n});return r.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}function wo(t,e){return dl().$$.context.set(t,e),e}function un(t){return dl().$$.context.get(t)}function Xr(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach(n=>n.call(this,e))}const Pc=[],Wi=[],$u=[],rh=[],Jy=Promise.resolve();let oh=!1;function Qy(){oh||(oh=!0,Jy.then(R))}function t2(){return Qy(),Jy}function Hl(t){$u.push(t)}function Ao(t){rh.push(t)}const wp=new Set;let xc,qd=0;function R(){const t=Nc;do{for(;qd<Pc.length;){const e=Pc[qd];qd++,Fc(e),rv(e.$$)}for(Fc(null),Pc.length=0,qd=0;Wi.length;)Wi.pop()();for(let e=0;e<$u.length;e+=1){const i=$u[e];wp.has(i)||(wp.add(i),i())}$u.length=0}while(Pc.length);for(;rh.length;)rh.pop()();oh=!1,wp.clear(),Fc(t)}function rv(t){if(t.fragment!==null){t.update(),ji(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Hl)}}function Sp(t,e,i){t.dispatchEvent(Ky(`${e?"intro":"outro"}${i}`))}const gu=new Set;let ns;function Ie(){ns={r:0,c:[],p:ns}}function Ee(){ns.r||ji(ns.c),ns=ns.p}function M(t,e){t&&t.i&&(gu.delete(t),t.i(e))}function F(t,e,i,n){if(t&&t.o){if(gu.has(t))return;gu.add(t),ns.c.push(()=>{gu.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}const ov={duration:0};function n$(t,e,i,n){let r=e(t,i),o=n?0:1,a=null,s=null,l=null;function c(){l&&iv(t,l)}function d(p,h){const g=p.b-o;return h*=Math.abs(g),{a:o,b:p.b,d:g,duration:h,start:p.start,end:p.start+h,group:p.group}}function u(p){const{delay:h=0,duration:g=300,easing:m=jy,tick:f=Je,css:x}=r||ov,w={start:Xy()+h,b:p};p||(w.group=ns,ns.r+=1),a||s?s=w:(x&&(c(),l=i$(t,o,p,g,h,m,x)),p&&f(0,1),a=d(w,g),Hl(()=>Sp(t,p,"start")),Hh(S=>{if(s&&S>s.start&&(a=d(s,g),s=null,Sp(t,a.b,"start"),x&&(c(),l=i$(t,o,a.b,a.duration,0,m,r.css))),a){if(S>=a.end)f(o=a.b,1-o),Sp(t,a.b,"end"),s||(a.b?c():--a.group.r||ji(a.group.c)),a=null;else if(S>=a.start){const C=S-a.start;o=a.a+a.d*m(C/a.duration),f(o,1-o)}}return!(!a&&!s)}))}return{run(p){Gi(r)?(xc||(xc=Promise.resolve(),xc.then(()=>{xc=null})),xc).then(()=>{r=r(),u(p)}):u(p)},end(){c(),a=s=null}}}const e2=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function i2(t,e){t.d(1),e.delete(t.key)}function zs(t,e){F(t,1,1,()=>{e.delete(t.key)})}function Oa(t,e,i,n,r,o,a,s,l,c,d,u){let p=t.length,h=o.length,g=p;const m={};for(;g--;)m[t[g].key]=g;const f=[],x=new Map,w=new Map;for(g=h;g--;){const E=u(r,o,g),B=i(E);let T=a.get(B);T?T.p(E,e):(T=c(B,E),T.c()),x.set(B,f[g]=T),B in m&&w.set(B,Math.abs(g-m[B]))}const S=new Set,C=new Set;function I(E){M(E,1),E.m(s,d),a.set(E.key,E),d=E.first,h--}for(;p&&h;){const E=f[h-1],B=t[p-1],T=E.key,D=B.key;E===B?(d=E.first,p--,h--):x.has(D)?!a.has(T)||S.has(T)?I(E):C.has(D)?p--:w.get(T)>w.get(D)?(C.add(T),I(E)):(S.add(D),p--):(l(B,a),p--)}for(;p--;){const E=t[p];x.has(E.key)||l(E,a)}for(;h;)I(f[h-1]);return f}function Tr(t,e){const i={},n={},r={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const l in a)l in s||(n[l]=1);for(const l in s)r[l]||(i[l]=s[l],r[l]=1);t[o]=s}else for(const l in a)r[l]=1}for(const a in n)a in i||(i[a]=void 0);return i}function Br(t){return typeof t=="object"&&t!==null?t:{}}function ko(t,e,i){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=i,i(t.$$.ctx[n]))}function It(t){t&&t.c()}function Pt(t,e,i,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,i),n||Hl(()=>{const a=t.$$.on_mount.map(Uy).filter(Gi);t.$$.on_destroy?t.$$.on_destroy.push(...a):ji(a),t.$$.on_mount=[]}),o.forEach(Hl)}function Rt(t,e){const i=t.$$;i.fragment!==null&&(ji(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function si(t,e,i,n,r,o,a,s=[-1]){const l=Nc;Fc(t);const c=t.$$={fragment:null,ctx:[],props:o,update:Je,not_equal:r,bound:Km(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Km(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let d=!1;if(c.ctx=i?i(t,e.props||{},(u,p,...h)=>{const g=h.length?h[0]:p;return c.ctx&&r(c.ctx[u],c.ctx[u]=g)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](g),d&&function(m,f){m.$$.dirty[0]===-1&&(Pc.push(m),Qy(),m.$$.dirty.fill(0)),m.$$.dirty[f/31|0]|=1<<f%31}(t,u)),p}):[],c.update(),d=!0,ji(c.before_update),c.fragment=!!n&&n(c.ctx),e.target){if(e.hydrate){const u=function(p){return Array.from(p.childNodes)}(e.target);c.fragment&&c.fragment.l(u),u.forEach(Q)}else c.fragment&&c.fragment.c();e.intro&&M(t.$$.fragment),Pt(t,e.target,e.anchor,e.customElement),R()}Fc(l)}class li{$destroy(){Rt(this,1),this.$destroy=Je}$on(e,i){if(!Gi(i))return Je;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(e){var i;this.$$set&&(i=e,Object.keys(i).length!==0)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Il=[];function Ll(t,e){return{subscribe:ge(t,e).subscribe}}function ge(t,e=Je){let i;const n=new Set;function r(o){if(oi(t,o)&&(t=o,i)){const a=!Il.length;for(const s of n)s[1](),Il.push(s,t);if(a){for(let s=0;s<Il.length;s+=2)Il[s][0](Il[s+1]);Il.length=0}}}return{set:r,update:function(o){r(o(t))},subscribe:function(o,a=Je){const s=[o,a];return n.add(s),n.size===1&&(i=e(r)||Je),o(t),()=>{n.delete(s),n.size===0&&(i(),i=null)}}}}function Bi(t,e,i){const n=!Array.isArray(t),r=n?[t]:t,o=e.length<2;return Ll(i,a=>{let s=!1;const l=[];let c=0,d=Je;const u=()=>{if(c)return;d();const h=e(n?l[0]:l,a);o?a(h):d=Gi(h)?h:Je},p=r.map((h,g)=>Gr(h,m=>{l[g]=m,c&=~(1<<g),s&&u()},()=>{c|=1<<g}));return s=!0,u(),function(){ji(p),d()}})}var n2=t=>t.reduce((e,i)=>Object.assign(e,i),{});const El=t=>({updateValue:t}),_o=t=>({defaultValue:t}),r2=t=>({store:t}),Kd=t=>({store:(e,i)=>Bi(...t(i))}),Jd=t=>({store:(e,i)=>{const[n,r,o=()=>!1]=t(i);let a,s=!0;return Bi(n,(l,c)=>{r(l,d=>{!s&&o(a,d)||(a=d,s=!1,c(d))})})}}),vc=t=>({store:(e,i)=>{const[n,r={},o]=t(i);let a=[];const s={},l=h=>n(h,s),c=h=>{(a.length||h.length)&&(a=h,d())},d=()=>{const h=a.map(l);o&&h.sort(o),a=[...h],p(h)};Object.entries(r).map(([h,g])=>g.subscribe(m=>{s[h]=m,m&&d()}));const{subscribe:u,set:p}=ge(e||[]);return{set:c,update:h=>c(h(a)),subscribe:u}}});var r$=t=>{const e={},i={};return t.forEach(([n,...r])=>{const o=n2(r),a=e[n]=((l,c,d)=>{const{store:u=C=>ge(C),defaultValue:p=fe,updateValue:h}=d,g=u(p(),c,l),{subscribe:m,update:f=fe}=g;let x;const w=C=>{let I=!0;x&&x(),x=m(E=>{if(I)return I=!1;C(E),x(),x=void 0})},S=h?h(l):qi;return g.set=C=>f(I=>S(C,I,w)),g.defaultValue=p,g})(i,e,o),s={get:()=>Sa(a),set:a.set};Object.defineProperty(i,n,s)}),{stores:e,accessors:i}},av=[["src",r2(()=>{let t;const{subscribe:e,set:i}=ge(),n=r=>{t!==r&&(t=r,i(t))};return{set:n,subscribe:e,update:r=>n(r(t))}})],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",_o(()=>"pixelated")],["images",_o(()=>[])],["shapePreprocessor"],["willRequestResource"],["willRequest"],["csp"]],o2=t=>t.charAt(0).toUpperCase()+t.slice(1),Iu=(t,e)=>{Object.keys(e).forEach(i=>{const n=sn(e[i])?{value:e[i],writable:!1}:e[i];Object.defineProperty(t,i,n)})};const o$=(t,e)=>{let i,n,r,o,a,s,l,c,d,u;const p=e.length;for(i=0;i<p;i++)if(n=e[i],r=e[i+1>p-1?0:i+1],o=n.x-t.x,a=n.y-t.y,s=r.x-t.x,l=r.y-t.y,c=o-s,d=a-l,u=c*a-d*o,u<-1e-5)return!1;return!0};var a$=(t,e)=>{const i=my(e),n=an();Ro(t).forEach(o=>{Fn(o,n),o$(o,e)||i.forEach(a=>{const s=Math.atan2(a.start.y-a.end.y,a.start.x-a.end.x),l=1e4*Math.sin(Math.PI-s),c=1e4*Math.cos(Math.PI-s),d=at(o.x+l,o.y+c),u=Th(cy(a),1e4),p=Mh(As(o,d),u);p&&Fn(n,Dn(We(p),o))})});const r=Pi(t);return Fn(r,n),!!Ro(r).every(o=>o$(o,e))&&(zu(t,r),!0)},a2=(t,e)=>{const i=Ro(t),n=$y(e,5),r=Ri(t),o=[];i.forEach(l=>{const c=((u,p)=>{const h=at(u.start.x-u.end.x,u.start.y-u.end.y),g=ho(h),m=Dr(g,p);return u.end.x+=m.x,u.end.y+=m.y,u})(As(We(r),We(l)),1e6);let d=!1;n.map(cy).forEach(u=>{const p=Mh(c,u);p&&!d&&(o.push(p),d=!0)})});const a=So(o[0],o[2])<So(o[1],o[3])?[o[0],o[2]]:[o[1],o[3]],s=rr(a);return s.width<t.width&&(zu(t,s),!0)},s2=(t,e,i={x:0,y:0})=>{const n=Zr(t),r=Ri(n),o=uy(n,i,r).map(s=>Ur(s,e,r)),a=rr(o);return o.map(s=>Dn(s,a))},zl=(t,e=0,i=cr(t))=>{let n,r;if(e!==0){const o=Math.atan2(1,i),a=Math.sign(e)*e,s=a%Math.PI,l=a%jo;let c;c=s>ia&&s<jo+ia?l>ia?a:jo-l:l>ia?jo-l:a;const d=Math.min(Math.abs(t.height/Math.sin(o+c)),Math.abs(t.width/Math.cos(o-c)));n=Math.cos(o)*d,r=n/i}else n=t.width,r=n/i,r>t.height&&(r=t.height,n=r*i);return Un(n,r)},sv=(t,e,i,n,r,o,a,s)=>{const l=po(a),c=po(s),d=ai(Math.max(e.width/c.width,e.height/c.height)),u=ai(Math.min(e.width/l.width,e.height/l.height)),p=Pi(e);if(u<1||d>1){const h=Ri(t),g=Ri(e),m=u<1?u:d,f=(g.x+h.x)/2,x=(g.y+h.y)/2,w=p.width/m,S=p.height/m;dy(p,f-.5*w,x-.5*S,w,S)}return o?(((h,g,m=0,f=an(),x)=>{if(ui(m)&&m!==0||f.x||f.y){const w=cr(h),S=s2(g,m,f),C=zl(g,m,w);if(!(h.width<C.width&&h.height<C.height)){const I=.5*h.width-.5*C.width,E=.5*h.height-.5*C.height;h.width>C.width&&(h.width=C.width,h.x+=I),h.height>C.height&&(h.height=C.height,h.y+=E)}a$(h,S),a2(h,S)&&a$(h,S)}else{const w=cr(h);h.width=Math.min(h.width,g.width),h.height=Math.min(h.height,g.height),h.x=Math.max(h.x,0),h.x+h.width>g.width&&(h.x-=h.x+h.width-g.width),h.y=Math.max(h.y,0),h.y+h.height>g.height&&(h.y-=h.y+h.height-g.height);const S=Ri(h),C=to(h,w);C.width=Math.max(x.width,C.width),C.height=Math.max(x.height,C.height),C.x=S.x-.5*C.width,C.y=S.y-.5*C.height,zu(h,C)}})(p,i,n,r,l),{crop:p}):{crop:p}},jh=(t,e,i)=>{const n=Zr(t),r=Ri(n),o=wr(n,i,r),a=Ri(_c(rr(o))),s=Ri(e),l=Ur(s,-i,a),c=Dn(l,a),d=Eo(Fn(r,c),ai);return En(d.x-.5*e.width,d.y-.5*e.height,e.width,e.height)},tn=(t,e,i)=>Math.max(e,Math.min(t,i));const kp=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume","minDuration","maxDuration","currentTime"],ah=t=>An(t)?t.map(ah):Eh(t)||Yc(t)?t:cl(t)?{...t}:t,wc=t=>t.map(e=>Object.entries(e).reduce((i,[n,r])=>(n.startsWith("_")||(i[n]=r),i),{})),lv=(t,e)=>t===e;var ss=(t,e,i=lv)=>{if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1;return!0};const s$=(t,e,i)=>{const n=Eo(Ri(t),d=>ai(d,8)),r=Zr(e),o=Ri(r),a=wr(r,i,o),s=Eo(_l(rr(a)),d=>ai(d,8)),l=Math.abs(s.x-n.x),c=Math.abs(s.y-n.y);return l<1&&c<1},cv=(t,e,i,n,r)=>{if(!r)return[-1/0,1/0];const o=Math.max(i.width/n.width,i.height/n.height),a=Un(n.width*o,n.height*o),s=(l=a,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(s<Math.min(t.width,t.height))return[-1/0,1/0];const c=e?t.height:t.width,d=e?t.width:t.height,u=Math.acos(a.height/s),p=u-Math.acos(d/s),h=Math.asin(c/s)-u;if(Number.isNaN(p)&&Number.isNaN(h))return[-1/0,1/0];const g=Number.isNaN(p)?h:Number.isNaN(h)?p:Math.min(p,h);return[-g,g]},Rc=(t,e)=>{const{context:i,props:n}=e;return t._isFormatted||((t=Ly(t))._isFormatted=!0,Object.assign(t,n)),t._isDraft||!Bu(t)||t._context&&ra(i,t._context)||(By(t,i),t._context={...i}),t},dv=(t,e)=>(t._isFormatted||(t.disableMove=!0,t.disableSelect=!0,t.disableResize=!0,t.disableRotate=!0),Rc(t,e));var Uh=[["file"],["size"],["loadState"],["processState"],["aspectRatio",Kd(({size:t})=>[t,e=>e?cr(e):void 0])],["perspectiveX",_o(()=>0)],["perspectiveY",_o(()=>0)],["perspective",Kd(({perspectiveX:t,perspectiveY:e})=>[[t,e],([i,n])=>({x:i,y:n})])],["rotation",_o(()=>0),El(t=>(e,i,n)=>{if(e===i)return e;const{loadState:r,size:o,rotationRange:a,cropMinSize:s,cropMaxSize:l,crop:c,perspective:d,cropLimitToImage:u,cropOrigin:p}=t;if(!c||!r||!r.beforeComplete)return e;const h=u&&((f,x,w)=>{const S=zl(x,w,cr(f));return Wc(rs(S,Math.round),rs(po(f),Math.round))})(c,o,i),g=u&&s$(c,o,i),m=((f,x,w,S,C,I,E,B,T,D)=>{const U=po(T),P=po(D);E&&(P.width=Math.min(D.width,C.width),P.height=Math.min(D.height,C.height));let y=!1;const V=(N,tt)=>{const ct=jh(C,S,N),ot=Zr(C),mt=Ri(ot),Z=uy(ot,I,mt),gt=Dn(We(mt),km(Z)),xt=Ur(Ri(ct),tt,mt),dt=Dn(We(mt),xt);Z.forEach(rt=>Ur(rt,tt,mt));const wt=rr(Z),J=km(Z),q=Fn(Dn(Dn(J,dt),wt),gt),ft=En(q.x-.5*ct.width,q.y-.5*ct.height,ct.width,ct.height);if(B&&Fr(ft,B.width/ft.width),E){const rt=s2(C,tt,I);a2(ft,rt)}const Lt=ai(Math.min(ft.width/U.width,ft.height/U.height),8),_=ai(Math.max(ft.width/P.width,ft.height/P.height),8);return(Lt<1||_>1)&&ai(Math.abs(tt-N))===ai(Math.PI/2)&&!y?(y=!0,V(f,f+Math.sign(tt-N)*Math.PI)):{rotation:tt,crop:Ho(ft,rt=>ai(rt,8))}},nt=Math.sign(x)*Math.round(Math.abs(x)/jo)*jo,k=tn(x,nt+w[0],nt+w[1]);return V(f,k)})(i,e,a,c,o,d,u,p,s,l);if(h&&g){const f=zl(o,e,cr(m.crop));m.crop.x+=.5*m.crop.width,m.crop.y+=.5*m.crop.height,m.crop.x-=.5*f.width,m.crop.y-=.5*f.height,m.crop.width=f.width,m.crop.height=f.height}return n(()=>{t.crop=Ho(m.crop,f=>ai(f,8))}),m.rotation})],["flipX",_o(()=>!1)],["flipY",_o(()=>!1)],["flip",Kd(({flipX:t,flipY:e})=>[[t,e],([i,n])=>({x:i,y:n})])],["isRotatedSideways",Jd(({rotation:t})=>[[t],([e],i)=>i(La(e)),(e,i)=>e!==i])],["crop",El(t=>(e,i=e)=>{const{loadState:n,size:r,cropMinSize:o,cropMaxSize:a,cropLimitToImage:s,cropAspectRatio:l,rotation:c,perspective:d}=t;if(!e&&!i||!n||!n.beforeComplete)return e;e||(e=Zr(zl(r,c,l||cr(r))));const u=sv(i,e,r,c,d,s,o,a),p=Ho(u.crop,h=>ai(h,8));return ra(i,p)?i:p})],["cropAspectRatio",El(t=>(e,i)=>{const{loadState:n,crop:r,size:o,rotation:a,cropLimitToImage:s}=t,l=(d=>{if(d){if(/:/.test(d)){const[u,p]=d.split(":");return u/p}return parseFloat(d)}})(e);if(!l)return;if(!r||!n||!n.beforeComplete)return l;const c=i?Math.abs(e-i):1;if(s$(r,o,a)&&s&&c>=.1){const d=((u,p)=>{const h=u.width,g=u.height;return La(p)&&(u.width=g,u.height=h),u})(po(o),a);t.crop=Ho(to(Zr(d),e),ai)}else{const d={width:r.height*l,height:r.height},u=.5*(r.width-d.width),p=.5*(r.height-d.height);t.crop=Ho(En(r.x+u,r.y+p,d.width,d.height),ai)}return l})],["cropOrigin"],["cropMinSize",_o(()=>({width:1,height:1}))],["cropMaxSize",_o(()=>({width:32768,height:32768}))],["cropLimitToImage",_o(()=>!0),El(t=>(e,i,n)=>{const{crop:r}=t;return r&&!i&&e&&n(()=>t.crop=Pi(t.crop)),e})],["cropSize",Jd(({crop:t})=>[[t],([e],i)=>{e&&i(Un(e.width,e.height))},(e,i)=>Wc(e,i)])],["cropRectAspectRatio",Kd(({cropSize:t})=>[[t],([e],i)=>{e&&i(ai(cr(e),5))}])],["cropRange",Jd(({size:t,rotation:e,cropRectAspectRatio:i,cropMinSize:n,cropMaxSize:r,cropLimitToImage:o})=>[[t,e,i,n,r,o],([a,s,l,c,d,u],p)=>{a&&p(((h,g,m,f,x,w)=>{const S=po(f),C=po(x);return w?[S,rs(zl(h,g,m),Math.round)]:[S,C]})(a,s,l,c,d,u))},(a,s)=>ss(a,s)])],["rotationRange",Jd(({size:t,isRotatedSideways:e,cropMinSize:i,cropSize:n,cropLimitToImage:r})=>[[t,e,i,n,r],([o,a,s,l,c],d)=>{!o||!l||d(cv(o,a,s,l,c))},(o,a)=>ss(o,a)])],["backgroundColor",El(()=>t=>((e=[0,0,0,0],i=1)=>e.length===4?e:[...e,i])(t))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["currentTime"],["minDuration",_o(()=>1/24)],["maxDuration",_o(()=>1/0)],["volume",_o(()=>1)],["trim"],["redaction",vc(({size:t})=>[Rc,{context:t}])],["manipulation",vc(({size:t})=>[Rc,{context:t}])],["annotation",vc(({size:t})=>[Rc,{context:t}])],["decoration",vc(({crop:t})=>[Rc,{context:t}])],["selection",vc(({size:t})=>[dv,{context:t}])],["frame",El(()=>t=>{if(!t)return;const e={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return _e(t)?e.frameStyle=t:Object.assign(e,t),e})],["metadata"],["state",r2((t,e,i)=>{const n=kp.map(l=>e[l]);let r=!1;const o=ge({}),{subscribe:a}=Bi([...n,o],(l,c)=>{if(r)return;const d=kp.reduce((u,p,h)=>(u[p]=ah(l[h]),u),{});d.crop&&Ho(d.crop,Math.round),d.manipulation=d.manipulation&&wc(d.manipulation),d.redaction=d.redaction&&wc(d.redaction),d.annotation=d.annotation&&wc(d.annotation),d.decoration=d.decoration&&wc(d.decoration),d.selection=d.selection&&wc(d.selection),c(d)}),s=l=>{l&&(r=!0,i.cropOrigin=void 0,kp.filter(c=>Ae(l,c)).forEach(c=>{const d=l[c];i[c]=d===null?void 0:ah(d)}),r=!1,o.set({}))};return{set:s,update:l=>s(l(null)),subscribe:a}})]],l$=async(t,e,i={},n)=>{const{ontaskstart:r,ontaskprogress:o,ontaskend:a,token:s}=n;let l=!1;const c={cancel:fe};s.cancel=()=>{l=!0,c.cancel()};for(const[d,u]of e.entries()){if(l)return;const[p,h]=u;r(d,h);try{t=await p(t,{...i,taskCancelToken:c},g=>o(d,h,g))}catch(g){throw l=!0,g}a(d,h)}return t};const l2=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],uv=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],pv=Uh.map(([t])=>t).filter(t=>!uv.includes(t)),Cp=t=>"image"+o2(t),c$=t=>Ae(t,"crop");var c2=()=>{const{stores:t,accessors:e}=r$(av),{sub:i,pub:n}=os(),r=()=>e.images?e.images[0]:{};let o={};const a={};pv.forEach(m=>{Object.defineProperty(e,Cp(m),{get:()=>{const f=r();if(f)return f.accessors[m]},set:f=>{o[Cp(m)]=f,a[Cp(m)]=f;const x=r();x&&(x.accessors[m]=f)}})});const s=()=>e.images&&e.images[0],l=t.src.subscribe(m=>{if(!m)return e.images=[];e.imageReader&&(e.images.length&&(o={}),d(m))}),c=t.imageReader.subscribe(m=>{m&&(e.images.length||e.src&&d(e.src))}),d=m=>{Promise.resolve().then(()=>p(m,o)).catch(()=>{})};let u;const p=(m,f={})=>new Promise((x,w)=>{let S=s();const C=!(f.cropLimitToImage===!1||f.imageCropLimitToImage===!1||a.imageCropLmitedToImage===!1),I=f.cropMinSize||f.imageCropMinSize||a.imageCropMinSize,E=C?I:S&&S.accessors.cropMinSize,B=f.minDuration||f.imageMinDuration;S&&g(),S=(({minSize:U={width:1,height:1},minDuration:P=0}={})=>{const{stores:y,accessors:V}=r$(Uh),{pub:nt,sub:k}=os(),N=(tt,ct)=>{const ot=()=>V[tt]||{},mt=xt=>{V[tt]={...ot(),...xt,timeStamp:Date.now()}},Z=()=>ot().error,gt=xt=>{Z()||(mt({error:xt}),nt(ct+"error",{...ot()}))};return{start(){nt(ct+"start")},onabort(){mt({abort:!0}),nt(ct+"abort",{...ot()})},ontaskstart(xt,dt){Z()||(mt({index:xt,task:dt,taskProgress:void 0,taskLengthComputable:void 0}),nt(ct+"taskstart",{...ot()}))},ontaskprogress(xt,dt,wt){Z()||(mt({index:xt,task:dt,taskProgress:wt.loaded/wt.total,taskLengthComputable:wt.lengthComputable}),nt(ct+"taskprogress",{...ot()}),nt(ct+"progress",{...ot()}))},ontaskend(xt,dt){Z()||(mt({index:xt,task:dt}),nt(ct+"taskend",{...ot()}))},ontaskerror(xt){gt(xt)},error(xt){gt(xt)},beforeComplete(xt){Z()||(mt({beforeComplete:!0}),nt("before"+ct,xt))},complete(xt){Z()||(mt({complete:!0}),nt(ct,xt))}}};return Iu(V,{read:(tt,{reader:ct},ot={})=>{if(!ct)return;Object.assign(V,{file:void 0,size:void 0,loadState:void 0});let mt={cancel:fe},Z=!1;const gt=N("loadState","load"),xt={token:mt,...gt},dt={src:tt,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(async()=>{try{if(gt.start(),Z)return gt.onabort();const wt=await l$(dt,ct,ot,xt);if(Z)return gt.onabort();const{size:J,duration:q,dest:ft}=wt||{};if(!J||!J.width||!J.height)throw new zc("Image size missing","IMAGE_SIZE_MISSING",wt);if(q>0&&q<P)throw new zc("Video too short","VIDEO_TOO_SHORT",{...wt,minDuration:P});if(J.width<U.width||J.height<U.height)throw new zc("Image too small","IMAGE_TOO_SMALL",{...wt,minWidth:U.width,minHeight:U.height});Object.assign(V,{file:ft,size:J,duration:q}),gt.beforeComplete(wt),gt.complete(wt)}catch(wt){gt.error(wt)}finally{mt=void 0}}),()=>{Z=!0,mt&&mt.cancel(),gt.onabort()}},write:(tt,ct)=>{if(!V.loadState.complete)return;V.processState=void 0;const ot=N("processState","process"),mt={src:V.file,imageState:V.state,dest:void 0};if(sn(tt)&&(tt=tt(V.file,V.state)),!tt)return ot.start(),void ot.complete(mt);let Z={cancel:fe},gt=!1;const xt=ct,dt={token:Z,...ot};return Promise.resolve().then(async()=>{try{if(ot.start(),gt)return ot.onabort();const wt=await l$(mt,tt,xt,dt);if(gt)return ot.onabort();ot.complete(wt)}catch(wt){ot.error(wt)}finally{Z=void 0}}),()=>{gt=!0,Z&&Z.cancel()}},on:k}),{accessors:V,stores:y}})({minSize:E,minDuration:B}),l2.map(U=>{return S.accessors.on(U,(P=U,y=>n(P,y)));var P});const T=()=>{o={},D.forEach(U=>U())},D=[];D.push(S.accessors.on("loaderror",U=>{T(),w(U)})),D.push(S.accessors.on("loadabort",()=>{T(),w({name:"AbortError"})})),D.push(S.accessors.on("load",U=>{u=void 0,T(),x(U)})),D.push(S.accessors.on("beforeload",()=>((U,P)=>{if(c$(P))return void(e.imageState=P);if(!P.imageCrop){const nt=U.accessors.size,k=P.imageRotation||0,N=ly(po(nt),k),tt=Zr(N);tt.width=ai(Math.abs(tt.width),6),tt.height=ai(Math.abs(tt.height),6);const ct=P.imageCropAspectRatio||(P.imageCropLimitToImage?cr(nt):cr(tt));let ot;P.imageCropLimitToImage?ot=to(tt,ct):(ot=as(tt,ct),ot.x=(nt.width-ot.width)/2,ot.y=(nt.height-ot.height)/2),P.imageCrop=ot}if(U.accessors.duration&&!P.imageTrim&&P.imageMaxDuration){const{duration:nt}=U.accessors;P.imageTrim=[[0,Math.min(P.imageMaxDuration/nt,1)]]}const y=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];y.filter(nt=>Ae(P,nt)).forEach(nt=>{e[nt]=P[nt],delete P[nt]});const V=Object.keys(P).filter(nt=>!y.includes(nt)).reduce((nt,k)=>(nt[k]=P[k],nt),{});Object.assign(e,V)})(S,f))),e.images=[S],f.imageReader&&(e.imageReader=f.imageReader),f.imageWriter&&(e.imageWriter=f.imageWriter),u=S.accessors.read(m,{reader:e.imageReader},{willRequest:e.willRequest})});let h;const g=()=>{const m=s();m&&(u&&u(),m.accessors.loadState=void 0,e.images=[])};return Object.defineProperty(e,"stores",{get:()=>t}),Iu(e,{on:i,loadImage:p,abortLoadImage:()=>{u&&u(),e.images=[]},editImage:(m,f)=>new Promise((x,w)=>{p(m,f).then(()=>{const{images:S}=e,C=S[0],I=()=>{E(),B()},E=C.accessors.on("processerror",T=>{I(),w(T)}),B=C.accessors.on("process",T=>{I(),x(T)})}).catch(w)}),removeImage:g,processImage:(m,f)=>new Promise((x,w)=>{try{const S=[],C=()=>{h=void 0,S.forEach(I=>I())};(async()=>{if((E=>_e(E)||Nl(E)||Vl(E))(m))try{await p(m,f)}catch(E){w(E)}else m&&(c$(m)?e.imageState=m:Object.assign(e,m));const I=s();if(!I)return w("no image");S.push(I.accessors.on("processerror",E=>{C(),w(E)})),S.push(I.accessors.on("processabort",()=>{C(),w({name:"AbortError"})})),S.push(I.accessors.on("process",E=>{C(),x(E)})),h=I.accessors.write(e.imageWriter,{redactionRenderStyle:e.imageRedactionRendering,shapePreprocessor:e.shapePreprocessor||qi,imageScrambler:e.imageScrambler,willRequest:e.willRequest,csp:e.csp||{},willRequestResource:e.willRequestResource})})()}catch(S){w(S)}}),abortProcessImage:()=>{const m=s();m&&(h&&h(),m.accessors.processState=void 0)},destroy:()=>{l&&l(),c&&c()}}),e};const hv=(t,e)=>{const{processImage:i}=c2();return i(t,e)};var d2=()=>Fa()?sa()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,u2=(t,e)=>Object.keys(t).filter(i=>!e.includes(i)).reduce((i,n)=>(i[n]=t[n],i),{}),p2=t=>new Promise(e=>{if(t.duration===1/0)return t.ontimeupdate=()=>{t.ontimeupdate=void 0,e(t)},void(t.currentTime=Number.MAX_SAFE_INTEGER);e(t)});const mv=t=>new Promise(e=>{const i=new FileReader;i.onload=()=>e(i.result),i.readAsArrayBuffer(t)}),Tp=(t,e=0,i=t.byteLength)=>{const n=[],r=e+i;for(;e<r;){const o=t.getUint32(e);if(o<0)break;const a=t.getUint32(e+4);if(n.push({type:a,size:o,offset:e,bodyOffset:e+8,bodySize:o-8}),o<8)break;e+=o}return n},$v=(t,{limit:e=1024}={})=>{let i=0;if(i+=4,t.getUint32(i)!==1718909296)return 0;i+=4;const n=t.getUint32(i);return n===1836069938?((r,o,a)=>{let s=!1,l=-1;for(let h=o;h<a;h++)if(s||r.getUint32(h)!==1953653099||(s=!0,h+=4),s&&r.getUint8(h)==64){l=h;break}if(l<0)return 0;const c=r.getUint32(l-28),d=r.getUint32(l-20),u=r.getUint32(l-32),p=r.getUint32(l-16);return c===65536&&d===4294901760?90:u===4294901760&&p===4294901760?180:c===4294901760&&d===65536?270:0})(t,i,e):n===1903435808?(r=>{const o=Tp(r).find(c=>c.type===1836019574);if(!o)return 0;const a=Tp(r,o.bodyOffset,o.bodySize);a.filter(c=>c.type===1953653099).forEach(c=>{a.push(...Tp(r,c.bodyOffset,c.bodySize))});const s=[1836476516,1953196132],l=a.filter(c=>s.includes(c.type));for(const{type:c,bodyOffset:d}of l){const u=r.getUint8(d);let p=d+4;p+=c===1836476516?32:36,p+=u===1?12:0;const h=r.getInt32(p),g=r.getInt32(p+4);if(h===0&&g>0)return 90;if(h<0&&g===0)return 180;if(h===0&&g<0)return 270}return 0})(t):0};var h2=t=>new Promise((e,i)=>{(ka()?(async n=>{const r=await mv(n),o=new DataView(r);return $v(o)})(t):Promise.resolve(0)).then(n=>{const r=document.createElement("video");r.onerror=()=>i(r.error),r.playsInline=!0,r.preload="auto",r.onseeked=()=>{r.onseeked=void 0,e(r)},r.onloadeddata=()=>{r.onloadeddata=void 0,r.dataset.rotation=n?""+n:"0",p2(r).then(e),r.currentTime=0},r.src=URL.createObjectURL(t),(o=>{sa()&&(o.load(),o.play().catch(()=>{}),o.pause())})(r)})}),m2=(t,e)=>new Promise(i=>{if(t.currentTime===e)return i(t);let n=t.onseeked;t.onseeked=()=>{t.onseeked=n,i(t)},t.currentTime=tn(e,0,t.duration)}),$2=(t,e=0)=>new Promise((i,n)=>{h2(t).then(r=>{m2(r,e).then(o=>{const a=yn("canvas");yy(o).then(({width:s,height:l})=>{a.width=s,a.height=l;const c=a.getContext("2d",{willReadFrequently:!0}),d=()=>{c.drawImage(o,0,0,a.width,a.height);const u=c.getImageData(0,0,a.width,a.height);or(a),URL.revokeObjectURL(o.src),i(u)};Fa()?setTimeout(d,16):d()})})})}),Xl=t=>/video/.test(t.type);const Gh=({imageDataResizer:t,canvasMemoryLimit:e}={})=>async(i,n,r,o,a)=>{r.width=Math.max(r.width,1),r.height=Math.max(r.height,1),o.width=Math.max(o.width,1),o.height=Math.max(o.height,1);const{dest:s}=await hv(n,{imageReader:v2(),imageWriter:w2({format:"canvas",targetSize:{...o,upscale:!0},imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:r}),{feather:l=0}=a||{};if(l>0){const c=yn("canvas");c.width=s.width,c.height=s.height;const d=c.getContext("2d",{willReadFrequently:!0}),u=1/l;let p=0;for(p=0;p<l;p++){const g=p*u;d.strokeStyle=`rgba(0,0,0,${g*g})`,d.strokeRect(p+.5,p+.5,s.width-2*p-1,s.height-2*p-1)}d.fillStyle="#000",d.fillRect(p,p,s.width+.5-2*p,s.height+.5-2*p);const h=s.getContext("2d");h.globalCompositeOperation="destination-in",h.drawImage(c,0,0),or(c)}i.drawImage(s,o.x,o.y,o.width,o.height),or(s)},Sn=(t,e=(...n)=>n,i)=>async(n,r,o)=>{o(Al(0,!1));let a=!1;const s=await t(...e(n,r,l=>{a=!0,o(l)}));return i&&i(n,s),a||o(Al(1,!1)),n},gv=({willRequest:t,srcProp:e="src",destProp:i="dest"}={})=>[Sn(xx,(n,r,o)=>[n[e],o,{...r,willRequest:t}],(n,r)=>n[i]=r),"any-to-file"],fv=({srcProp:t="dest",destProp:e="dest"}={})=>[Sn(async i=>{if(/octet-stream/.test(i.type)){console.warn(`Pintura: File has unknown mime type "${i.type}", make sure your server sets the correct Content-Type header.`);let n="image";const r=await Ih(i);/video/i.test(r.nodeName)&&(n="video");const o={type:n+"/unknown"};return Yc(i)?new File([i],i.name,{...o,lastModified:i.lastModified}):new Blob([i],o)}return i},i=>[i[t]],(i,n)=>i[e]=n),"any-to-file"],g2=({srcProp:t="src",destProp:e="size"}={})=>[Sn(by,i=>[i[t]],(i,n)=>i[e]=n),"read-image-size"],yv=async t=>{const e=await Ih(t);if(Su(e))return await(i=>new Promise((n,r)=>{const o=()=>{p2(i).then(()=>{n(i.duration)})};if(i.readyState>=1)return o();i.onloadedmetadata=o,i.onerror=()=>r(i.error)}))(e)},bv=({srcProp:t="src",destProp:e="duration"}={})=>[Sn(yv,i=>[i[t]],(i,n)=>i[e]=n),"read-media-duration"],f2=({srcSize:t="size",srcOrientation:e="orientation",destSize:i="size"}={})=>[Sn(vx,n=>[n[t],n[e]],(n,r)=>n[i]=r),"image-size-match-orientation"],y2=({srcProp:t="src",destProp:e="head"}={})=>[Sn((i,n)=>wy(i)?Jf(i,n):void 0,i=>[i[t],[0,262144],onprogress],(i,n)=>i[e]=n),"read-image-head"],b2=({srcProp:t="head",destProp:e="orientation"}={})=>[Sn(vh,i=>[i[t],274],(i,n=1)=>i[e]=n),"read-exif-orientation-tag"],xv=({srcProp:t="head"}={})=>[Sn(vh,e=>[e[t],274,1]),"clear-exif-orientation-tag"],vv=({srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:i="imageState",destImageSize:n="size",destScalar:r="scalar"}={})=>[Sn((o,a)=>[Math.min(a.width/o.width,a.height/o.height),Ba(a)],o=>[o[t],o[e],o[i]],(o,[a,s])=>{o[r]=a,o[n]=s}),"calculate-canvas-scalar"],wv=({srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:i,srcImageState:n="imageState"}={})=>[Sn((r,o,a)=>Xl(r)?$2(r,a.currentTime):ry(r,o),r=>[r[t],i,r[n]],(r,o)=>r[e]=o),"blob-to-image-data"],Sv=({srcImageData:t="imageData",srcOrientation:e="orientation"}={})=>[Sn(ty,i=>[i[t],i[e]],(i,n)=>i.imageData=n),"image-data-match-orientation"],kv=({srcImageData:t="imageData",srcImageState:e="imageState"}={})=>[Sn(Jx,i=>[i[t],{backgroundColor:i[e].backgroundColor,backgroundImage:i[e].backgroundImage}],(i,n)=>i.imageData=n),"image-data-fill"],Cv=({srcImageData:t="imageData",srcImageState:e="imageState",destScalar:i="scalar"}={})=>[Sn(Sx,n=>{const r=n[i];let{crop:o}=n[e];return o&&r!==1&&(o=Fr(Pi(o),r,an())),[n[t],{crop:o,rotation:n[e].rotation,flipX:n[e].flipX,flipY:n[e].flipY}]},(n,r)=>n.imageData=r),"image-data-crop"],Tv=({targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:e,srcProp:i="imageData",srcImageState:n="imageState",destImageScaledSize:r="imageScaledSize"})=>[Sn(Cx,o=>{const a=Math.min(t.width||Number.MAX_SAFE_INTEGER,o[n].targetSize&&o[n].targetSize.width||Number.MAX_SAFE_INTEGER),s=Math.min(t.height||Number.MAX_SAFE_INTEGER,o[n].targetSize&&o[n].targetSize.height||Number.MAX_SAFE_INTEGER);return[o[i],{width:a,height:s,fit:t.fit||"contain",upscale:(l=o[n],!!(l.targetSize&&l.targetSize.width||l.targetSize&&l.targetSize.height)||t.upscale||!1)},e];var l},(o,a)=>{Wc(o.imageData,a)||(o[r]=Ba(a)),o.imageData=a}),"image-data-resize"],Mv=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData"}={})=>[Sn(Ix,n=>{const{colorMatrix:r}=n[e],o=r&&Object.keys(r).map(a=>r[a]).filter(Boolean);return[n[t],{colorMatrix:o&&Vh(o),convolutionMatrix:n[e].convolutionMatrix,gamma:n[e].gamma,noise:n[e].noise,vignette:n[e].vignette}]},(n,r)=>n[i]=r),"image-data-filter"],Pv=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData",destScalar:n="scalar"}={})=>[Sn(async(r,o,a,s,l,c)=>{if(!o||!s.length)return r;let d;try{const m={dataSizeScalar:Hy(r,s)};a&&a[3]>0&&(m.backgroundColor=[...a]),d=await o(r,m)}catch{}const u=yn("canvas");u.width=r.width,u.height=r.height;const p=u.getContext("2d",{willReadFrequently:!0});if(p.putImageData(r,0,0),c==="auto"){const m=Math.sqrt(r.width*r.height);p.filter=`blur(${Math.round(m/100)}px)`}const h=new Path2D;s.forEach(m=>{const f=En(m.x,m.y,m.width,m.height);Cs(f,l);const x=wr(Pi(f),m.rotation),w=new Path2D;x.forEach((S,C)=>{if(C===0)return w.moveTo(S.x,S.y);w.lineTo(S.x,S.y)}),h.addPath(w)}),p.clip(h,"nonzero"),p.imageSmoothingEnabled=!1,p.drawImage(d,0,0,u.width,u.height),or(d);const g=p.getImageData(0,0,u.width,u.height);return or(u),g},(r,{imageScrambler:o,redactionRenderStyle:a})=>[r[t],o,r[e].backgroundColor,r[e].redaction,r[n],a],(r,o)=>r[i]=o),"image-data-redact"],Mp=({srcImageData:t="imageData",srcSize:e="size",srcImageState:i="imageState",srcShapes:n="annotation",destImageData:r="imageData",destImageScaledSize:o="imageScaledSize",destScalar:a="scalar",imageDataResizer:s,canvasMemoryLimit:l,shapeFilter:c=qi,shapeClip:d=!0,destImageContext:u="imageContext"}={})=>[Sn(_h,(p,{shapePreprocessor:h,willRequestResource:g,csp:m,willRequest:f})=>{const x=p[i][n].filter(c);if(!x.length)return[p[t]];const w=p[a],{crop:S}=p[i],C=p[e];let I=w;const E=p[o];E&&(I=Math.min(E.width/S.width,E.height/S.height));const B={width:C.width/w,height:C.height/w};return[p[t],{shapes:x,computeShape:T=>(T=zn(T,B),T=u2(T,["left","right","top","bottom"]),T=Oy(T,I)),transform:T=>{const D=p[e],{rotation:U=0,flipX:P,flipY:y,cropLimitToImage:V}=p[i],nt=p[a],{crop:k=Zr(D)}=p[i],N=p[o],tt=N?Math.min(N.width/k.width,N.height/k.height):1,ct={width:D.width/nt*tt,height:D.height/nt*tt},ot=mx(ct,U),mt=ot.width,Z=ot.height,gt=.5*ct.width-.5*mt,xt=.5*ct.height-.5*Z,dt=_l(ct);T.translate(-gt,-xt),T.translate(-k.x*tt,-k.y*tt),T.translate(dt.x,dt.y),T.rotate(U),T.translate(-dt.x,-dt.y);const wt=p[u]||{x:0,y:0};T.translate(wt.x,wt.y),T.scale(P?-1:1,y?-1:1),T.translate(P?-ct.width*nt:0,y?-ct.height*nt:0),V&&d&&(T.rect(0,0,ct.width,ct.height),T.clip())},drawImage:Gh({imageDataResizer:s,canvasMemoryLimit:l}),preprocessShape:T=>h(T,{isPreview:!1,...p[i]}),canvasMemoryLimit:l,willRequest:f||g,styleNonce:m.styleNonce}]},(p,h)=>p[r]=h),"image-data-annotate"],d$=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:r,canvasMemoryLimit:o,destScalar:a="scalar",shapeFilter:s=qi,destImageContext:l="imageContext"}={})=>[Sn(_h,(c,{shapePreprocessor:d,willRequestResource:u,willRequest:p,csp:h})=>{let g=c[e].decoration.filter(s);if(typeof window<"u"&&(w=>{if(w&&w._5pn6ltx)return;const[S]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101,32]].map(B=>B.map(T=>String.fromCharCode(T)).join("")),{width:C,height:I}=c[e].crop,E=I/15;g=[...g,{x:.5*-E,y:.5*-E,width:1.5*C,height:1.25*I,text:Array(50).fill(S).join(""),fontWeight:900,lineHeight:E,fontSize:E,color:[1,1,1,.05]}]})(window),!g.length)return[c[t]];let m=c[a];const{crop:f}=c[e],x=c[n];return x&&(m=Math.min(x.width/f.width,x.height/f.height)),[c[t],{shapes:g,drawImage:Gh({imageDataResizer:r,canvasMemoryLimit:o}),computeShape:w=>(w=zn(w,f),w=u2(w,["left","right","top","bottom"]),w=Oy(w,m)),preprocessShape:w=>d(w,{isPreview:!1,...c[e]}),canvasMemoryLimit:o,willRequest:p||u,styleNonce:h.styleNonce,transform:w=>{const S=c[l]||{x:0,y:0};w.translate(S.x,S.y)}}]},(c,d)=>c[i]=d),"image-data-decorate"],Rv=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:i="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:r,canvasMemoryLimit:o,destScalar:a="scalar",destImageContext:s="imageContext"}={})=>[Sn((l,c)=>new Promise(d=>{if(!c)return d([l]);_h(l,c).then(u=>{d([u,c.contextBounds])})}),(l,{shapePreprocessor:c,willRequestResource:d,willRequest:u,csp:p})=>{const h=l[e].frame;if(!h)return[l[t]];const g=l[a];let{crop:m}=l[e];m&&g!==1&&(m=Fr(Pi(m),g,an()));const f={...m},x=Fy(Dy(h,f,c),f);f.x=Math.abs(x.left),f.y=Math.abs(x.top),f.width+=Math.abs(x.left)+Math.abs(x.right),f.height+=Math.abs(x.top)+Math.abs(x.bottom);const w=l[n],S=w?Math.min(w.width/m.width,w.height/m.height):1;return Cs(f,S),f.x=Math.floor(f.x),f.y=Math.floor(f.y),f.width=Math.floor(f.width),f.height=Math.floor(f.height),[l[t],{shapes:[h],contextBounds:f,computeShape:C=>zn(C,l[t]),transform:C=>{C.translate(f.x,f.y)},drawImage:Gh({imageDataResizer:r,canvasMemoryLimit:o}),preprocessShape:C=>c(C,{isPreview:!1,...l[e]}),canvasMemoryLimit:o,willRequest:u||d,styleNonce:p.styleNonce}]},(l,[c,d])=>{l[s]=d,l[i]=c}),"image-data-frame"],Iv=({mimeType:t,quality:e,srcImageData:i="imageData",srcFile:n="src",destBlob:r="blob"}={})=>[Sn(lx,o=>[o[i],t||Ch(o[n].name)||o[n].type,e],(o,a)=>o[r]=a),"image-data-to-blob"],Ev=({srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:i="dest"}={})=>[Sn(Gl,n=>[n[t],n[e]],(n,r)=>n[i]=r),"image-data-to-canvas"],Av=async(t,e)=>{if(!wy(t)||!e)return t;const i=new DataView(e),n=Kf(i);if(!n||!n.exif)return t;const r=["exif","mpf","xmp"].reduce((o,a)=>n[a]?Math.max(o,n[a].offset+n[a].size):o,0);return((o,a,s=[0,o.size])=>a?new Blob([a,o.slice(...s)],{type:o.type}):o)(t,e.slice(0,r+2),[20])},Lv=(t="blob",e="head",i="blob")=>[Sn(Av,n=>[n[t],n[e]],(n,r)=>n[i]=r),"blob-write-image-head"],zv=({renameFile:t,srcBlob:e="blob",srcFile:i="src",destFile:n="dest",defaultFilename:r}={})=>[Sn(Bc,o=>[o[e],t?t(o[i]):o[i].name||`${r}.${oy(o[e].type)}`],(o,a)=>o[n]=a),"blob-to-file"],u$=({url:t="./",dataset:e=o=>[["dest",o.dest,o.dest.name],["imageState",o.imageState]],destStore:i="store",credentials:n,headers:r={}})=>[Sn(async(o,a)=>await((s,l,c)=>new Promise((d,u)=>{const{token:p={},beforeSend:h=fe,onprogress:g=fe}=c;p.cancel=()=>m.abort();const m=new XMLHttpRequest;m.upload.onprogress=g,m.onload=()=>m.status>=200&&m.status<300?d(m):u(m),m.onerror=()=>u(m),m.ontimeout=()=>u(m),m.open("POST",encodeURI(s)),h(m),m.send(l instanceof FormData?l:l.reduce((f,x)=>(f.append(...x.map(wx)),f),new FormData))}))(t,o,{onprogress:a,beforeSend:s=>xy(s,{headers:r,credentials:n})}),(o,a,s)=>[e(o),s],(o,a)=>o[i]=a),"store"],x2=t=>[Sn(e=>(t&&t.length&&Object.keys(e).forEach(i=>{t.includes(i)||delete e[i]}),e)),"prop-filter"],v2=(t={})=>{const{orientImage:e=!0,outputProps:i=["src","dest","size","duration"],preprocessImageFile:n,request:r={}}=t;return[gv({willRequest:()=>r}),fv(),n&&[Sn(n,(o,a,s)=>[o.dest,a,s],(o,a)=>o.dest=a),"preprocess-image-file"],g2({srcProp:"dest"}),bv({srcProp:"dest"}),e&&y2({srcProp:"dest"}),e&&b2(),e&&f2(),x2(i)].filter(Boolean)},Fv=t=>t&&(_e(t)?u$({url:t}):sn(t)?[t,"store"]:u$(t)),w2=(t={})=>(e,i,n={})=>{let{canvasMemoryLimit:r=d2(),orientImage:o=!0,copyImageHead:a=!0,mimeType:s,quality:l,renameFile:c,targetSize:d,imageDataResizer:u,store:p,format:h="file",outputProps:g=["src","dest","imageState","store"],preprocessImageSource:m,preprocessImageState:f,postprocessImageData:x,postprocessImageBlob:w,testSrcSupport:S=!1}={...t,...n};if(!S||Fu(e))return h==="blob"&&(h="file"),[m&&[Sn(m,(C,I,E)=>[C.src,I,E,C.imageState],(C,I)=>C.src=I),"preprocess-image-source"],(o||a)&&y2(),o&&b2(),g2(),f&&[Sn(f,(C,I,E,B)=>[C.imageState,I,E,{size:C.size,orientation:C.orientation}],(C,I)=>C.imageState=I),"preprocess-image-state"],wv({canvasMemoryLimit:r}),o&&f2(),o&&Sv(),vv(),Pv(),Cv(),Tv({imageDataResizer:u,targetSize:d}),Mp({imageDataResizer:u,canvasMemoryLimit:r,srcShapes:"manipulation"}),Mv(),kv(),Mp({imageDataResizer:u,canvasMemoryLimit:r,srcShapes:"annotation",shapeFilter:C=>!C.aboveFrame}),d$({imageDataResizer:u,canvasMemoryLimit:r,shapeFilter:C=>!C.aboveFrame}),Rv({imageDataResizer:u,canvasMemoryLimit:r}),Mp({imageDataResizer:u,canvasMemoryLimit:r,srcShapes:"annotation",shapeFilter:C=>C.aboveFrame,shapeClip:!1}),d$({imageDataResizer:u,canvasMemoryLimit:r,shapeFilter:C=>C.aboveFrame}),x&&[Sn(x,(C,I,E)=>[C.imageData,I,E],(C,I)=>C.imageData=I),"postprocess-image-data"],h==="file"?Iv({mimeType:s,quality:l}):h==="canvas"?Ev():[C=>(C.dest=C.imageData,C)],h==="file"&&o&&xv(),h==="file"&&a&&Lv(),w&&[Sn(w,({blob:C,imageData:I,src:E},B,T)=>[{blob:C,imageData:I,src:E},B,T],(C,I)=>C.blob=I),"postprocess-image-file"],h==="file"&&zv({defaultFilename:"image",renameFile:c}),h==="file"?Fv(p):sn(p)&&[p,"store"],x2(g)].filter(Boolean)};var Dv=(t,e,i,n,r,o,a,s,l,c,d)=>{if(!(t&&e&&i&&n&&s))return;s*=o;const u=_c(Pi(e)),p=Ri(u),h=Ri(t),g=Zr(i),m=Ri(g),f=jh(i,n,l),x=Ri(f),w=Dn(We(m),x),S=Dn(We(h),p);w.x+=S.x,w.y+=S.y;const C=Fl(We(w));C.x+=S.x,C.y+=S.y;const I=Ri(na(na(Pi(r),a),t)),E=Dn(I,h);return Fn(w,E),{origin:C,translation:w,rotation:{x:d?Math.PI:0,y:c?Math.PI:0,z:l},scale:s}};let Sc=null;var Zh=()=>{if(Sc===null)if("WebGL2RenderingContext"in window){let t;try{t=yn("canvas"),Sc=!!t.getContext("webgl2")}catch{Sc=!1}t&&or(t),t=void 0}else Sc=!1;return Sc},p$=t=>(t&t-1)==0,Xh=(t,e={},i="",n="")=>Object.keys(e).filter(r=>!cl(e[r])).reduce((r,o)=>r.replace(new RegExp(i+o+n),e[o]),t);const Bv={head:`#version 300 es

in vec4 aPosition;uniform mat4 uMatrix;`,text:`
in vec2 aTexCoord;out vec2 vTexCoord;`,matrix:`
gl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);`},Ov={head:`#version 300 es
precision highp float;

out vec4 fragColor;`,mask:`
uniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}`,init:`
float a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);`,colorize:`
if(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}`,maskapply:`
float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);`,maskfeatherapply:`
float leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;`,rectaa:`
vec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);`,cornerradius:`
vec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);`,fragcolor:`
if(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));`},h$=(t,e,i)=>{const n=t.createShader(i),r=((o,a,s)=>(a=Xh(a,s===o.VERTEX_SHADER?Bv:Ov,"##").trim(),Zh()?a:(a=(a=a.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),s===o.VERTEX_SHADER&&(a=a.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),s===o.FRAGMENT_SHADER&&(a=a.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+a)))(t,e,i);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(n)),n},kc=(t,e,i,n,r)=>{const o=h$(t,e,t.VERTEX_SHADER),a=h$(t,i,t.FRAGMENT_SHADER),s=t.createProgram();t.attachShader(s,o),t.attachShader(s,a),t.linkProgram(s);const l={};return n.forEach(c=>{l[c]=t.getAttribLocation(s,c)}),r.forEach(c=>{l[c]=t.getUniformLocation(s,c)}),{program:s,locations:l,destroy(){t.detachShader(s,o),t.detachShader(s,a),t.deleteShader(o),t.deleteShader(a),t.deleteProgram(s)}}},m$=t=>t.nodeName!=="VIDEO"&&(!!Zh()||p$(t.width)&&p$(t.height)),Wv=(t,e,i,n)=>(t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),((r,o,a)=>{r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,m$(o)?r.LINEAR_MIPMAP_LINEAR:r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,a.filterParam),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,a.wrapParam),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,a.wrapParam),m$(o)&&r.generateMipmap(r.TEXTURE_2D)})(t,i,n),t.bindTexture(t.TEXTURE_2D,null),e),Js=(t,e=1)=>t?[t[0],t[1],t[2],ui(t[3])?e*t[3]:e]:[0,0,0,0],Pp=()=>{const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Rp=(t,e,i,n,r,o,a)=>{const s=1/(e-i),l=1/(n-r),c=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*s,t[13]=(r+n)*l,t[14]=(a+o)*c,t[15]=1},Qs=(t,e,i,n)=>{t[12]=t[0]*e+t[4]*i+t[8]*n+t[12],t[13]=t[1]*e+t[5]*i+t[9]*n+t[13],t[14]=t[2]*e+t[6]*i+t[10]*n+t[14],t[15]=t[3]*e+t[7]*i+t[11]*n+t[15]},$$=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},g$=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),r=t[4],o=t[5],a=t[6],s=t[7],l=t[8],c=t[9],d=t[10],u=t[11];t[4]=r*n+l*i,t[5]=o*n+c*i,t[6]=a*n+d*i,t[7]=s*n+u*i,t[8]=l*n-r*i,t[9]=c*n-o*i,t[10]=d*n-a*i,t[11]=u*n-s*i},f$=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),r=t[0],o=t[1],a=t[2],s=t[3],l=t[8],c=t[9],d=t[10],u=t[11];t[0]=r*n-l*i,t[1]=o*n-c*i,t[2]=a*n-d*i,t[3]=s*n-u*i,t[8]=r*i+l*n,t[9]=o*i+c*n,t[10]=a*i+d*n,t[11]=s*i+u*n},y$=(t,e)=>{const i=Math.sin(e),n=Math.cos(e),r=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],d=t[6],u=t[7];t[0]=r*n+l*i,t[1]=o*n+c*i,t[2]=a*n+d*i,t[3]=s*n+u*i,t[4]=l*n-r*i,t[5]=c*n-o*i,t[6]=d*n-a*i,t[7]=u*n-s*i};var _v=t=>t*Math.PI/180,Wu=(t,e)=>Zh()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const Ip=(t,e)=>{const i=t.length;return e>=i?t[e%i]:e<0?t[e%i+i]:t[e]},Vv=(t,e,i,n)=>{const r=at(i.x-e.x,i.y-e.y),o=at(n.x-i.x,n.y-i.y),a=at(e.x-n.x,e.y-n.y),s=at(t.x-e.x,t.y-e.y),l=at(t.x-i.x,t.y-i.y),c=at(t.x-n.x,t.y-n.y),d=du(r,s),u=du(o,l),p=du(a,c);return d<=0&&u<=0&&p<=0},Nv=t=>{if(t.length<3)return[];if((x=>{const w=x.length;for(let S=0;S<w;S++){const C=As(x[S],Ip(x,S+1));if(hy(C,x,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1})(t))return[];(x=>{let w,S,C,I,E,B=0;const T=x.length;for(w=0;w<T;w++)S=x[w],C=x[(w+1)%T],I=C.x-S.x,E=(C.y+S.y)/2,B+=I*E;return B})(t)<0&&t.reverse();const e=t.length,i=[...Array(e).keys()],n=[];let r,o,a,s,l,c,d,u,p,h,g,m,f=1024;for(;i.length>3;){if(f<=0)return[];for(f--,r=0;r<i.length;r++)if(a=i[r],s=Ip(i,r-1),l=Ip(i,r+1),c=t[a],d=t[s],u=t[l],p=at(d.x-c.x,d.y-c.y),h=at(u.x-c.x,u.y-c.y),!(du(p,h)<0)){for(g=!0,o=0;o<e;o++)if(o!==a&&o!==s&&o!==l&&(m=t[o],Vv(m,d,c,u))){g=!1;break}if(g){n.push([d,c,u]),i.splice(r,1);break}}}return n.push([t[i[0]],t[i[1]],t[i[2]]]),n},b$=(t,e,i,n,r)=>{const o=ho(at(n.x-i.x,n.y-i.y)),a=ho(at(r.x-n.x,r.y-n.y)),s=ho(at(o.x+a.x,o.y+a.y)),l=at(-s.y,s.x),c=at(-o.y,o.x),d=Math.min(1/cu(l,c),5);t[e]=n.x,t[e+1]=n.y,t[e+2]=l.x*d,t[e+3]=l.y*d,t[e+4]=-1,t[e+5]=n.x,t[e+6]=n.y,t[e+7]=l.x*d,t[e+8]=l.y*d,t[e+9]=1},x$=t=>{const e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},v$=(t,e=0,i,n)=>{const r=Ro(t),o=t.x+.5*t.width,a=t.y+.5*t.height;return(i||n)&&Dl(r,i,n,o,a),e!==0&&al(r,e,o,a),r},Qd=(t,e,i,n,r)=>{const o=Math.min(20,Math.max(4,Math.round(n/2)));let a=0,s=0,l=0,c=0,d=0;for(;d<o;d++)a=d/o,s=r*jo+a*jo,l=n*Math.cos(s),c=n*Math.sin(s),t.push(at(e+l,i+c))};let tu=null;var Yh=()=>{if(tu!==null)return tu;let t=yn("canvas");const e=Wu(t);return tu=e?e.getParameter(e.MAX_TEXTURE_SIZE):void 0,or(t),t=void 0,tu},qh=()=>Cr()&&!!window.chrome;const Ic=new Float32Array([0,1,0,0,1,1,1,0]),Hv=new Float32Array([1,0,0,0,1,1,0,1]),jv=Cr()&&ka(),w$=[0,0,0,0,1,0,0,0,0],Uv=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Ep=[0,0,0,0],Gv=[0,0,0,0],S$=(t,e,i,n,r)=>{if(!i||!n)return Ic;let o=n.x/i.width,a=n.y/i.height,s=t/i.width/r,l=e/i.height/r;return s-=o,l-=a,new Float32Array([-o,l,-o,-a,s,l,s,-a])};var Zv=(t,e={})=>{const{alpha:i=!1}=e,n={width:0,height:0},r={width:0,height:0},o=Yh()||1024;let a,s,l;const c=Pp(),d=Pp();let u,p,h,g,m,f,x,w,S,C=0,I=0,E=0,B=1;const T=new Map([]),D=()=>{y.stencilOp(y.KEEP,y.KEEP,y.KEEP),y.stencilFunc(y.ALWAYS,1,255),y.stencilMask(255)},U=_v(30),P=Math.tan(U/2),y=Wu(t,{alpha:i,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!y)return;y.getExtension("OES_standard_derivatives"),y.disable(y.DEPTH_TEST),y.enable(y.STENCIL_TEST),y.enable(y.BLEND),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!i&&ka())),D();const V=y.createTexture();y.bindTexture(y.TEXTURE_2D,V),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,new Uint8Array(Ep)),T.set(0,V);const nt=y.createTexture();T.set(2,nt);const k=y.createFramebuffer(),N=y.createTexture();T.set(1,N);const tt=y.createFramebuffer(),ct=kc(y,`
##head
##text
void main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}`,`
##head
in vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){return(c*m)+(o*c.a);}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}`,["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),ot=y.createBuffer(),mt=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,mt),y.bufferData(y.ARRAY_BUFFER,Ic,y.STATIC_DRAW);const Z=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,Z),y.bufferData(y.ARRAY_BUFFER,Hv,y.STATIC_DRAW);const gt=kc(y,`#version 300 es

in vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}`,`
##head
##mask
in vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),xt=y.createBuffer();qh()&&(y.bindBuffer(y.ARRAY_BUFFER,xt),y.bufferData(y.ARRAY_BUFFER,1,y.DYNAMIC_DRAW));const dt=(kt,ne,ue,Nt=!1)=>{const{program:xe,locations:Ht}=gt;y.useProgram(xe),y.enableVertexAttribArray(Ht.aPosition),y.enableVertexAttribArray(Ht.aNormal),y.enableVertexAttribArray(Ht.aMiter);const ze=((Xt,Be)=>{let Fe,Xe,yi,bt=0;const be=Xt.length,Ue=new Float32Array(10*(Be?be+1:be)),Le=Xt[0],Ve=Xt[be-1];for(bt=0;bt<be;bt++)Fe=Xt[bt-1],Xe=Xt[bt],yi=Xt[bt+1],Fe||(Fe=Be?Ve:at(Xe.x+(Xe.x-yi.x),Xe.y+(Xe.y-yi.y))),yi||(yi=Be?Le:at(Xe.x+(Xe.x-Fe.x),Xe.y+(Xe.y-Fe.y))),b$(Ue,10*bt,Fe,Xe,yi);return Be&&b$(Ue,10*be,Ve,Le,Xt[1]),Ue})(kt,Nt),W=5*Float32Array.BYTES_PER_ELEMENT,Re=2*Float32Array.BYTES_PER_ELEMENT,Se=4*Float32Array.BYTES_PER_ELEMENT;y.uniform1f(Ht.uWidth,ne),y.uniform1f(Ht.uSharpness,l),y.uniform4fv(Ht.uColor,ue),y.uniformMatrix4fv(Ht.uMatrix,!1,u),y.uniform4f(Ht.uCanvasColor,C,I,E,B),y.uniform1fv(Ht.uMaskBounds,x),y.uniform1f(Ht.uMaskOpacity,f),y.bindBuffer(y.ARRAY_BUFFER,xt),y.bufferData(y.ARRAY_BUFFER,ze,y.STATIC_DRAW),y.vertexAttribPointer(Ht.aPosition,2,y.FLOAT,!1,W,0),y.vertexAttribPointer(Ht.aNormal,2,y.FLOAT,!1,W,Re),y.vertexAttribPointer(Ht.aMiter,1,y.FLOAT,!1,W,Se),y.drawArrays(y.TRIANGLE_STRIP,0,ze.length/5),y.disableVertexAttribArray(Ht.aPosition),y.disableVertexAttribArray(Ht.aNormal),y.disableVertexAttribArray(Ht.aMiter)},wt=kc(y,`
##head
void main(){
##matrix
}`,`
##head
##mask
uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;
##maskapply
fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),J=y.createBuffer(),q=kc(y,`
##head
##text
in vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){
##init
##colorize
##rectaa
##cornerradius
##maskfeatherapply
if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),ft=y.createBuffer(),Lt=y.createBuffer(),_=y.createBuffer(),rt=kc(y,`
##head
##text
out vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){
##init
float ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),zt=y.createBuffer(),Zt=y.createBuffer(),Ot=new Map,Yt={2:{width:0,height:0},1:{width:0,height:0}},Ut=(kt,ne,ue,Nt=1)=>{const xe=Math.min(Math.min(4096,o)/ue.width,Math.min(4096,o)/ue.height,Nt),Ht=Math.floor(xe*ue.width),ze=Math.floor(xe*ue.height);Wc(ue,Yt[kt])?y.bindFramebuffer(y.FRAMEBUFFER,ne):(y.bindTexture(y.TEXTURE_2D,T.get(kt)),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,Ht,ze,0,y.RGBA,y.UNSIGNED_BYTE,null),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.bindFramebuffer(y.FRAMEBUFFER,ne),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,T.get(kt),0),Yt[kt]=ue);const W=ue.width*s,Re=ue.height*s;var Se,Xt;Rp(d,0,W,Re,0,-1,1),Qs(d,0,Re,0),Xt=1,(Se=d)[0]*=Xt,Se[1]*=Xt,Se[2]*=Xt,Se[3]*=Xt,((Be,Fe)=>{Be[4]*=Fe,Be[5]*=Fe,Be[6]*=Fe,Be[7]*=Fe})(d,-1),u=d,y.viewport(0,0,Ht,ze),y.colorMask(!0,!0,!0,!0),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),S=[1,0,1,0,1,Math.max(n.width,ue.width),1,Math.max(n.width,ue.width)]},ht=(kt,ne)=>{const{forceRelease:ue=!1}=ne||{},{src:Nt}=Ot.get(kt);Nt instanceof HTMLCanvasElement&&(ue||Nt.dataset.retain||or(Nt)),Ot.delete(kt),y.deleteTexture(kt)},G=kt=>Ot.get(kt).isRotatedVideo;return{drawPath:(kt,ne=0,ue=!1,Nt=!1,xe,Ht,ze,W,Re)=>{if(kt.length<2)return;const Se=kt.map(Xe=>({x:Xe.x*s,y:Xe.y*s})),Xt=xe*s;if(Xt>0&&dt(Se,Xt,Js(Ht,Re),ze),Se.length<3||!W||W[3]===0||!ze)return;const Be=Nv(Se),Fe=new Float32Array(6*Be.length);Be.forEach(([Xe,yi,bt],be)=>{const Ue=6*be;Fe[Ue+0]=Xe.x,Fe[Ue+1]=Xe.y,Fe[Ue+2]=yi.x,Fe[Ue+3]=yi.y,Fe[Ue+4]=bt.x,Fe[Ue+5]=bt.y}),((Xe,yi)=>{const{program:bt,locations:be}=wt;y.useProgram(bt),y.enableVertexAttribArray(be.aPosition),y.uniform4fv(be.uColor,yi),y.uniformMatrix4fv(be.uMatrix,!1,u),y.uniform1fv(be.uMaskBounds,x),y.uniform1f(be.uMaskOpacity,f),y.uniform4f(be.uCanvasColor,C,I,E,B),y.bindBuffer(y.ARRAY_BUFFER,J),y.bufferData(y.ARRAY_BUFFER,Xe,y.STATIC_DRAW),y.vertexAttribPointer(be.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLES,0,Xe.length/2),y.disableVertexAttribArray(be.aPosition)})(Fe,Js(W,Re))},drawRect:(kt,ne=0,ue=!1,Nt=!1,xe,Ht,ze,W,Re,Se=!1,Xt,Be,Fe,Xe,yi,bt=1/s,be,Ue)=>{const Le=Cs(Pi(kt),s),Ve=xe.map(Ge=>((Qe,vi)=>Math.floor(tn(Qe,0,Math.min(.5*(vi.width-1),.5*(vi.height-1)))))(Ge||0,kt)).map(Ge=>Ge*s);if(Ht||ze){const Ge=Pi(Le);Ge.x-=.5,Ge.y-=.5,Ge.width+=1,Ge.height+=1;const Qe=v$(Ge,ne,ue,Nt),vi=x$(Qe);let Si;be&&(Si=Js(be),Si[3]===0&&(Si[3]=.001));const Jt=W&&Se?[Ge.width/W.width,Ge.height/W.height]:[1,1];((Ci,X,Vt,H,ie,pe=V,we,ye=1,ee=Ep,qt=Ic,ei=S,Ze=1,lt)=>{const{program:Dt,locations:re}=q;y.useProgram(Dt),y.enableVertexAttribArray(re.aPosition),y.enableVertexAttribArray(re.aTexCoord),y.enableVertexAttribArray(re.aRectCoord),y.uniform4fv(re.uColor,ie),y.uniform2fv(re.uSize,[X,Vt]),y.uniform2fv(re.uPosition,[Ci[2],Ci[3]]),y.uniform2fv(re.uRepeat,we),y.uniform1i(re.uInverted,lt?1:0),y.uniform1fv(re.uCornerRadius,H),y.uniform4f(re.uCanvasColor,C,I,E,B),y.uniform1fv(re.uMaskFeather,ei.map((Te,Qt)=>Qt%2==0?Te:Te*s)),y.uniform1fv(re.uMaskBounds,x),y.uniform1f(re.uMaskOpacity,f),y.uniform1f(re.uEdgeFeather,Math.max(0,Ze)),y.uniformMatrix4fv(re.uMatrix,!1,u),y.uniform1i(re.uTexture,4),y.uniform4fv(re.uTextureColor,ee),y.uniform1f(re.uTextureOpacity,ye),y.activeTexture(y.TEXTURE0+4),y.bindTexture(y.TEXTURE_2D,pe),y.bindBuffer(y.ARRAY_BUFFER,Lt),y.bufferData(y.ARRAY_BUFFER,qt,y.STATIC_DRAW),y.vertexAttribPointer(re.aTexCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,_),y.bufferData(y.ARRAY_BUFFER,Ic,y.STATIC_DRAW),y.vertexAttribPointer(re.aRectCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,ft),y.bufferData(y.ARRAY_BUFFER,Ci,y.STATIC_DRAW),y.vertexAttribPointer(re.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLE_STRIP,0,Ci.length/2),y.disableVertexAttribArray(re.aPosition),y.disableVertexAttribArray(re.aTexCoord),y.disableVertexAttribArray(re.aRectCoord)})(vi,Ge.width,Ge.height,Ve,Js(Ht,Xe),ze,Jt,Xe,Si,Xt?new Float32Array(Xt):S$(Ge.width,Ge.height,W,Re,s),yi,bt*s,Ue)}Be&&(Be=Math.min(Be,Le.width,Le.height),dt(((Ge,Qe,vi,Si,Jt,Ci,X,Vt)=>{const H=[];if(Ci.every(ie=>ie===0))H.push(at(Ge,Qe),at(Ge+vi,Qe),at(Ge+vi,Qe+Si),at(Ge,Qe+Si));else{const[ie,pe,we,ye]=Ci,ee=Ge,qt=Ge+vi,ei=Qe,Ze=Qe+Si;H.push(at(ee+ie,ei)),Qd(H,qt-pe,ei+pe,pe,-1),H.push(at(qt,ei+pe)),Qd(H,qt-ye,Ze-ye,ye,0),H.push(at(qt-ye,Ze)),Qd(H,ee+we,Ze-we,we,1),H.push(at(ee,Ze-we)),Qd(H,ee+ie,ei+ie,ie,2)}return(X||Vt)&&Dl(H,X,Vt,Ge+.5*vi,Qe+.5*Si),Jt&&al(H,Jt,Ge+.5*vi,Qe+.5*Si),H})(Le.x,Le.y,Le.width,Le.height,ne,Ve,ue,Nt),Be*s,Js(Fe,Xe),!0))},drawEllipse:(kt,ne,ue,Nt,xe,Ht,ze,W,Re,Se,Xt,Be,Fe,Xe,yi)=>{const bt=Cs(En(kt.x-ne,kt.y-ue,2*ne,2*ue),s);if(ze||W){const be=Pi(bt);yi||(be.x-=.5,be.y-=.5,be.width+=1,be.height+=1);const Ue=v$(be,Nt,xe,Ht);((Le,Ve,Ge,Qe,vi=V,Si=Ic,Jt=1,Ci=!1)=>{const{program:X,locations:Vt}=rt;y.useProgram(X),y.enableVertexAttribArray(Vt.aPosition),y.enableVertexAttribArray(Vt.aTexCoord),y.uniformMatrix4fv(Vt.uMatrix,!1,u),y.uniform2fv(Vt.uRadius,[.5*Ve,.5*Ge]),y.uniform1i(Vt.uInverted,Ci?1:0),y.uniform4fv(Vt.uColor,Qe),y.uniform4f(Vt.uCanvasColor,C,I,E,B),y.uniform2fv(Vt.uRepeat,[1,1]),y.uniform1fv(Vt.uMaskBounds,x),y.uniform1f(Vt.uMaskOpacity,f),y.uniform1i(Vt.uTexture,4),y.uniform1f(Vt.uTextureOpacity,Jt),y.activeTexture(y.TEXTURE0+4),y.bindTexture(y.TEXTURE_2D,vi),y.bindBuffer(y.ARRAY_BUFFER,Zt),y.bufferData(y.ARRAY_BUFFER,Si,y.STATIC_DRAW),y.vertexAttribPointer(Vt.aTexCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,zt),y.bufferData(y.ARRAY_BUFFER,Le,y.STATIC_DRAW),y.vertexAttribPointer(Vt.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLE_STRIP,0,Le.length/2),y.disableVertexAttribArray(Vt.aPosition),y.disableVertexAttribArray(Vt.aTexCoord)})(x$(Ue),be.width,be.height,Js(ze,Xe),W,Xt?new Float32Array(Xt):S$(be.width,be.height,Re,Se,s),Xe,yi)}Be&&dt(((be,Ue,Le,Ve,Ge,Qe,vi)=>{const Si=.5*Math.abs(Le),Jt=.5*Math.abs(Ve),Ci=Math.abs(Le)+Math.abs(Ve),X=Math.max(20,Math.round(Ci/6));return vu(at(be+Si,Ue+Jt),Si,Jt,Ge,Qe,vi,X)})(bt.x,bt.y,bt.width,bt.height,Nt,xe,Ht),Be*s,Js(Fe,Xe),!0)},drawImage:(kt,ne,ue,Nt,xe,Ht,ze,W,Re,Se,Xt=Uv,Be=1,Fe,Xe=1,yi=0,bt=w,be=Gv,Ue=Ep,Le=!1,Ve=!1,Ge=!0)=>{const Qe=ne.width*s,vi=ne.height*s,Si=-.5*Qe,Jt=.5*vi,Ci=.5*Qe,X=-.5*vi,Vt=new Float32Array([Si,X,0,Si,Jt,0,Ci,X,0,Ci,Jt,0]);y.bindBuffer(y.ARRAY_BUFFER,ot),y.bufferData(y.ARRAY_BUFFER,Vt,y.STATIC_DRAW);const H=ne.height/2/P*(n.height/ne.height)*-1;xe*=s,Ht*=s,ue*=s,Nt*=s;const{program:ie,locations:pe}=ct,we=Pp();((Dt,re,Te,Qt,et)=>{const jt=1/Math.tan(re/2),Gt=1/(Qt-et);Dt[0]=jt/Te,Dt[1]=0,Dt[2]=0,Dt[3]=0,Dt[4]=0,Dt[5]=jt,Dt[6]=0,Dt[7]=0,Dt[8]=0,Dt[9]=0,Dt[10]=(et+Qt)*Gt,Dt[11]=-1,Dt[12]=0,Dt[13]=0,Dt[14]=2*et*Qt*Gt,Dt[15]=0})(we,U,a,1,2*-H),Qs(we,xe,-Ht,H),Qs(we,ue,-Nt,0),y$(we,-Re),$$(we,Se),Qs(we,-ue,Nt,0),f$(we,W),g$(we,ze),y.useProgram(ie),y.enableVertexAttribArray(pe.aPosition),y.enableVertexAttribArray(pe.aTexCoord),y.uniform1i(pe.uTexture,3),y.uniform2f(pe.uTextureSize,ne.width,ne.height),y.activeTexture(y.TEXTURE0+3),y.bindTexture(y.TEXTURE_2D,kt);const ye=Ve?1:0,ee=T.get(ye);y.uniform1i(pe.uTextureBlend,ye),y.activeTexture(y.TEXTURE0+ye),y.bindTexture(y.TEXTURE_2D,ee);const qt=Le?2:0,ei=T.get(qt);y.uniform1i(pe.uTextureOverlay,qt),y.activeTexture(y.TEXTURE0+qt),y.bindTexture(y.TEXTURE_2D,ei),y.bindBuffer(y.ARRAY_BUFFER,ot),y.vertexAttribPointer(pe.aPosition,3,y.FLOAT,!1,0,0);const Ze=jv&&G(kt);let lt;y.bindBuffer(y.ARRAY_BUFFER,Ze?Z:mt),y.vertexAttribPointer(pe.aTexCoord,2,y.FLOAT,!1,0,0),y.uniformMatrix4fv(pe.uMatrix,!1,we),y.uniform4fv(pe.uOverlayColor,Ue),!Fe||ss(Fe,w$)?(Fe=w$,lt=-1):(lt=Fe.reduce((Dt,re)=>Dt+re,0),lt=lt<=0?1:lt),y.uniform1fv(pe.uClarityKernel,Fe),y.uniform1f(pe.uClarityKernelWeight,lt),y.uniform1f(pe.uColorGamma,1/Xe),y.uniform1f(pe.uColorVignette,yi),y.uniform1i(pe.uAntialias,Ge?1:0),y.uniform4f(pe.uColorOffset,Xt[4],Xt[9],Xt[14],Xt[19]),y.uniformMatrix4fv(pe.uColorMatrix,!1,[Xt[0],Xt[1],Xt[2],Xt[3],Xt[5],Xt[6],Xt[7],Xt[8],Xt[10],Xt[11],Xt[12],Xt[13],Xt[15],Xt[16],Xt[17],Xt[18]]),y.uniform1f(pe.uOpacity,Be),y.uniform1f(pe.uMaskOpacity,f),y.uniform1fv(pe.uMaskBounds,x),y.uniform1fv(pe.uMaskCornerRadius,be.map(Dt=>Dt*s)),y.uniform1fv(pe.uMaskFeather,bt.map((Dt,re)=>re%2==0?Dt:Dt*s)),y.drawArrays(y.TRIANGLE_STRIP,0,4),y.disableVertexAttribArray(pe.aPosition),y.disableVertexAttribArray(pe.aTexCoord)},textureFilterNearest:y.NEAREST,textureFilterLinear:y.LINEAR,textureClamp:y.CLAMP_TO_EDGE,textureRepeat:y.REPEAT,textureCreate:()=>y.createTexture(),textureUpdate:(kt,ne,ue)=>(Ot.set(kt,{src:ne,options:ue,isRotatedVideo:ne.nodeName==="VIDEO"&&(ne.dataset&&ne.dataset.rotation==90||ne.dataset.rotation==270)}),Wv(y,kt,ne,ue)),textureGetSize:kt=>{const{src:ne,options:ue}=Ot.get(kt),Nt=Ba(ne);return ue.scalar?rs(Nt,xe=>xe/ue.scalar):Nt},textureDelete:ht,enablePreviewStencil:()=>{y.stencilOp(y.KEEP,y.KEEP,y.REPLACE),y.stencilFunc(y.ALWAYS,1,255),y.stencilMask(255)},applyPreviewStencil:()=>{y.stencilFunc(y.EQUAL,1,255),y.stencilMask(0)},disablePreviewStencil:D,setCanvasColor(kt){C=kt[0],I=kt[1],E=kt[2],B=i?kt[3]:1,y.clear(y.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{Rp(c,0,n.width,n.height,0,-1,1)},updateCanvasMatrix(kt,ne,ue,Nt,xe){const Ht=kt.width,ze=kt.height,W=n.width*(.5/s),Re=n.height*(.5/s),Se={x:W+(ue.x+ne.x),y:Re+(ue.y+ne.y)},Xt={x:Se.x-ne.x,y:Se.y-ne.y},Be=.5*Ht,Fe=.5*ze;Ur(Xt,xe.z,Se),ux(Xt,Nt,Se),Qs(c,(Xt.x-Be)*s,(Xt.y-Fe)*s,0),Qs(c,Be*s,Fe*s,0),y$(c,xe.z);const Xe=xe.x>Math.PI/2;g$(c,Xe?Math.PI:0);const yi=xe.y>Math.PI/2;f$(c,yi?Math.PI:0),$$(c,Nt),Qs(c,-Be*s,-Fe*s,0)},drawToCanvas(){y.bindFramebuffer(y.FRAMEBUFFER,null),u=c,y.viewport(0,0,y.drawingBufferWidth,y.drawingBufferHeight),y.colorMask(!0,!0,!0,!0),y.clearColor(C,I,E,B),y.clear(y.COLOR_BUFFER_BIT),S=[1,0,1,0,1,n.width,1,n.width]},drawToImageBlendBuffer(kt,ne){Ut(1,tt,kt,ne)},drawToImageOverlayBuffer(kt,ne){Ut(2,k,kt,ne)},enableMask(kt,ne){const ue=kt.x*s,Nt=kt.y*s,xe=kt.width*s,Ht=kt.height*s;m=ue,h=m+xe,p=n.height-Nt,g=n.height-(Nt+Ht),f=1-ne,x=[p,h,g,m]},disableMask(){m=0,h=n.width,p=n.height,g=0,f=1,x=[p,h,g,m]},resize:(kt,ne,ue)=>{s=Math.max(1,ue),l=s===1?.75:1,r.width=kt,r.height=ne,n.width=kt*s,n.height=ne*s,a=ea(n.width,n.height),t.width=n.width,t.height=n.height,Rp(c,0,n.width,n.height,0,-1,1),w=[1,0,1,0,1,r.width,1,r.width]},release(){Array.from(Ot.keys()).forEach(kt=>ht(kt,{forceRelease:!0})),Ot.clear(),T.forEach(kt=>{y.deleteTexture(kt)}),T.clear(),ct.destroy(),gt.destroy(),wt.destroy(),q.destroy(),rt.destroy(),t.width=1,t.height=1,t=void 0}}},Xv=(t,e)=>{const{imageData:i,amount:n=1}=t,r=Math.round(2*Math.max(1,n)),o=Math.round(.5*r),a=i.width,s=i.height,l=new Uint8ClampedArray(a*s*4),c=i.data;let d,u,p,h,g,m=0,f=0,x=0;const w=a*s*4-4;for(p=0;p<s;p++)for(d=crypto.getRandomValues(new Uint8ClampedArray(s)),u=0;u<a;u++)h=d[p]/255,f=0,x=0,h<.5&&(f=4*(-o+Math.round(Math.random()*r))),h>.5&&(x=(-o+Math.round(Math.random()*r))*(4*a)),g=Math.min(Math.max(0,m+f+x),w),l[m]=c[g],l[m+1]=c[g+1],l[m+2]=c[g+2],l[m+3]=c[g+3],m+=4;e(null,{data:l,width:i.width,height:i.height})};const Yv=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];function qv(t){return Math.sqrt(1- --t*t)}function k$(t){return Object.prototype.toString.call(t)==="[object Date]"}function sh(t,e){if(t===e||t!=t)return()=>t;const i=typeof t;if(i!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((r,o)=>sh(t[o],r));return r=>n.map(o=>o(r))}if(i==="object"){if(!t||!e)throw new Error("Object cannot be null");if(k$(t)&&k$(e)){t=t.getTime();const o=(e=e.getTime())-t;return a=>new Date(t+a*o)}const n=Object.keys(e),r={};return n.forEach(o=>{r[o]=sh(t[o],e[o])}),o=>{const a={};return n.forEach(s=>{a[s]=r[s](o)}),a}}if(i==="number"){const n=e-t;return r=>t+r*n}throw new Error(`Cannot interpolate ${i} values`)}function Kh(t,e={}){const i=ge(t);let n,r=t;function o(a,s){if(t==null)return i.set(t=a),Promise.resolve();r=a;let l=n,c=!1,{delay:d=0,duration:u=400,easing:p=jy,interpolate:h=sh}=Cn(Cn({},e),s);if(u===0)return l&&(l.abort(),l=null),i.set(t=r),Promise.resolve();const g=Xy()+d;let m;return n=Hh(f=>{if(f<g)return!0;c||(m=h(t,a),typeof u=="function"&&(u=u(t,a)),c=!0),l&&(l.abort(),l=null);const x=f-g;return x>u?(i.set(t=a),!1):(i.set(t=m(p(x/u))),!0)}),n.promise}return{set:o,update:(a,s)=>o(a(r,t),s),subscribe:i.subscribe}}function lh(t,e,i,n){if(typeof i=="number"){const r=n-i,o=(i-e)/(t.dt||1/60),a=(o+(t.opts.stiffness*r-t.opts.damping*o)*t.inv_mass)*t.dt;return Math.abs(a)<t.opts.precision&&Math.abs(r)<t.opts.precision?n:(t.settled=!1,i+a)}if(An(i))return i.map((r,o)=>lh(t,e[o],i[o],n[o]));if(typeof i=="object"){const r={};for(const o in i)r[o]=lh(t,e[o],i[o],n[o]);return r}throw new Error(`Cannot spring ${typeof i} values`)}function di(t,e={}){const i=ge(t),{stiffness:n=.15,damping:r=.8,precision:o=.01}=e;let a,s,l,c=t,d=t,u=1,p=0,h=!1;function g(f,x={}){d=f;const w=l={};if(t==null||x.hard||m.stiffness>=1&&m.damping>=1)return h=!0,a=null,c=f,i.set(t=d),Promise.resolve();if(x.soft&&(p=1/(60*(x.soft===!0?.5:+x.soft)),u=0),!s){a=null,h=!1;const S={inv_mass:void 0,opts:m,settled:!0,dt:void 0};s=Hh(C=>{if(a===null&&(a=C),h)return h=!1,s=null,!1;u=Math.min(u+p,1),S.inv_mass=u,S.opts=m,S.settled=!0,S.dt=60*(C-a)/1e3;const I=lh(S,c,t,d);return a=C,c=t,i.set(t=I),S.settled&&(s=null),!S.settled})}return new Promise(S=>{s.promise.then(()=>{w===l&&S()})})}const m={set:g,update:(f,x)=>g(f(d,t),x),subscribe:i.subscribe,stiffness:n,damping:r,precision:o};return m}var Kv=Ll(!1,t=>{const e=window.matchMedia("(prefers-reduced-motion:reduce)"),i=()=>t(e.matches);return i(),e.addListener(i),()=>e.removeListener(i)}),C$=()=>"ResizeObserver"in window;const Ap=ks(),S2=(t,e,i,n,r)=>{t.rect||(t.rect=ks());const o=t.rect;dy(Ap,e,i,n,r),ra(o,Ap)||(zu(o,Ap),t.dispatchEvent(new CustomEvent("measure",{detail:o})))},eu=Math.round,Jv=t=>{const e=t.getBoundingClientRect();va&&S2(t,eu(e.x),eu(e.y),eu(e.width),eu(e.height))},Lp=t=>{va&&S2(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)},Dc=[];let tl,ba,va;function ch(){Dc.length?(Dc.forEach(t=>t.measure(t)),va=requestAnimationFrame(ch)):va=void 0}let iu=new Map([]),Cc=0,zp=0;var Mr=(t,e={})=>{const{observePosition:i=!1,observeViewRect:n=!1,once:r=!1,disabled:o=!1,isMeasureRoot:a=!1}=e;if(C$()&&a&&(ba||(ba=new ResizeObserver(s=>{s.forEach(c=>{iu.set(c.target,c.contentRect)});const l=Array.from(iu.values()).some(({width:c,height:d})=>c>0&&d>0);l?l&&va===!1&&ch():(va&&cancelAnimationFrame(va),va=!1)})),ba.observe(t),Cc++),!o)return!C$()||i||n?(t.measure=n?Jv:Lp,Dc.push(t),va===void 0&&(va=requestAnimationFrame(ch)),t.measure(t),{destroy(){a&&ba&&(iu.delete(t),ba.unobserve(t),Cc--,Cc===0&&(ba.disconnect(),ba=void 0));const s=Dc.indexOf(t);Dc.splice(s,1),delete t.measure}}):(tl||(tl=new ResizeObserver(s=>{s.forEach(l=>{va&&Lp(l.target)})})),tl.observe(t),Lp(t),r?tl.unobserve(t):zp++,{destroy(){a&&ba&&(iu.delete(t),ba.unobserve(t),Cc--,Cc===0&&(ba.disconnect(),ba=void 0)),r||(tl.unobserve(t),zp--,zp===0&&(tl.disconnect(),tl=void 0))}})},Qv=t=>{let e=!1;const i={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:n=>{e&&(n.target.dataset.focusVisible="")},blur:n=>{delete n.target.dataset.focusVisible}};return Object.keys(i).forEach(n=>t.addEventListener(n,i[n],!0)),{destroy(){Object.keys(i).forEach(n=>t.removeEventListener(n,i[n],!0))}}};const t4=async t=>new Promise(e=>{if(t.kind==="file")return e(t.getAsFile());t.getAsString(e)});var k2=(t,e={})=>{const i=r=>{r.preventDefault()},n=async r=>{r.preventDefault(),r.stopPropagation();try{const o=await(a=>new Promise((s,l)=>{const{items:c}=a.dataTransfer;if(!c)return s([]);Promise.all(Array.from(c).map(t4)).then(d=>{s(d.filter(u=>Nl(u)&&Fu(u)||/^http/.test(u)))}).catch(l)}))(r);t.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:r,resources:o},...e}))}catch{}};return t.addEventListener("drop",n),t.addEventListener("dragover",i),{destroy(){t.removeEventListener("drop",n),t.removeEventListener("dragover",i)}}};let nu=null;var Jh=()=>{if(nu===null)if(Cr()){const t=yn("canvas");nu=!Wu(t,{failIfMajorPerformanceCaveat:!0}),or(t)}else nu=!1;return nu},Fp=t=>t instanceof WebGLTexture,T$=([t,e,i,n])=>[n.x,n.y,t.x,t.y,i.x,i.y,e.x,e.y];function e4(t){let e,i,n,r;return{c(){e=ut("div"),i=ut("canvas"),v(e,"class","PinturaCanvas")},m(o,a){it(o,e,a),St(e,i),t[37](i),n||(r=[Mt(i,"measure",t[38]),Zi(Mr.call(null,i))],n=!0)},p:Je,i:Je,o:Je,d(o){o&&Q(e),t[37](null),n=!1,ji(r)}}}function i4(t,e,i){let n,r,o,a,s,l,c;const d=[0,0,0,0],u=an(),p=Cr()&&(X=>{const Vt=.5*X,H=yn("canvas",{"data-retain":!0,width:X,height:X}),ie=H.getContext("2d");return ie.fillStyle="#f0f",ie.fillRect(0,0,Vt,Vt),ie.fillRect(Vt,Vt,Vt,Vt),H})(128),h=Ca();let g,{isAnimated:m}=e,{isTransparent:f}=e,{maskRect:x}=e,{maskOpacity:w=1}=e,{maskFrameOpacity:S=.95}=e,{maskMarkupOpacity:C=1}=e,{clipAnnotationsToImage:I=!0}=e,{pixelRatio:E=1}=e,{textPixelRatio:B=E}=e,{backgroundColor:T}=e,{willRender:D=qi}=e,{didRender:U=qi}=e,{willRequest:P}=e,{csp:y}=e,{loadImageData:V=qi}=e,{enableGrid:nt=!1}=e,{gridColors:k}=e,{gridSize:N}=e,{gridOpacity:tt=0}=e,{images:ct=[]}=e,{interfaceImages:ot=[]}=e,{selectionColor:mt}=e,Z=null,gt=null,xt=null;const dt=(X,Vt)=>X.set(Vt,{hard:!m}),wt={precision:1e-4*.01};let J=0;const q=Kh(void 0,{duration:0});L(t,q,X=>i(36,c=X));const ft=di(1,wt);L(t,ft,X=>i(35,s=X));const Lt=di(1,wt);L(t,Lt,X=>i(51,o=X));const _=ge();L(t,_,X=>i(53,l=X));const rt=ge();L(t,rt,X=>i(52,a=X));const zt={},Zt=(X,Vt)=>{let H=zt[X.id];const ie=Math.min(1,2048/Vt.width);let pe=H?H.element:yn("canvas",{width:Vt.width*ie,height:Vt.height*ie,"data-retain":!0});if(!H||((we,ye)=>{if(we.total!==ye.length)return!0;const ee=we.last,qt=ye[ye.length-1];return ee.drawMode!==qt.drawMode||!(!Io(ee)||Io(qt)&&ra(ee,qt))||!(!nr(ee)||nr(qt)&&ee.x===qt.x&&ee.y===qt.y&&ee.rx===qt.rx&&ee.ry===qt.ry)||!(!Nn(ee)||Nn(qt)&&qt.points.length===ee.points.length)})(H,X.actions)){pe=pe.cloneNode(),((ye,ee,qt)=>{const{selectionColor:ei=[1,1,1],scalar:Ze=1}=qt||{};let lt=!1;for(const Dt of ee){const re=Dt.drawMode==="subtract";if(re&&!lt)continue;ye.globalCompositeOperation=re?"destination-out":"source-over",ye.save(),ye.beginPath();const Te=Wy(Dt);Sy(ye,Ze,Ze),Ah(ye,Dt.rotation,Te),Vy(ye,Dt.flipX,Dt.flipY,Te),Dt.width?Oh(ye,{...Dt,backgroundColor:ei}):Dt.points?nh(ye,Object.assign({},Dt,Dt.pathClose?{backgroundColor:ei,strokeColor:[0,0,0,0]}:{strokeColor:ei,strokeJoin:"round",strokeCap:"round"})):Dt.rx&&Wh(ye,{...Dt,backgroundColor:ei,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"}),ye.restore(),lt=!0}})(pe.getContext("2d"),X.actions,{selectionColor:[1,0,1],scalar:ie});const we=X.actions.length;zt[X.id]={total:we,last:{...X.actions[we-1]},element:pe}}return{x:0,y:0,...Vt,fillColor:X.color||[1,1,1],backgroundImage:pe}};let Ot;const Yt=()=>{cancelAnimationFrame(Ot),Ot=requestAnimationFrame(()=>{yi=!0,Jt=0,r()})},Ut=new Map([]),ht=new Map([]),G=(X,Vt)=>({filterParam:X==="pixelated"?Z.textureFilterNearest:Z.textureFilterLinear,wrapParam:Vt==="repeat"?Z.textureRepeat:Z.textureClamp}),kt=(X,Vt,H)=>{if(!Ut.has(X)){Ut.set(X,X);const we=G(Vt,H);if(!_e(ie=X)&&(vy(ie)||Wl(ie)||qc(ie)||Su(ie))){const ye=Z.textureCreate();Z.textureUpdate(ye,X,we),Ut.set(X,ye)}else V(X).then(ye=>{if(!Z||!ye)return;const ee=Z.textureCreate();Z.textureUpdate(ee,ye,we),Ut.set(X,ee),Yt()}).catch(ye=>{Ut.set(X,ye)})}var ie,pe;if(Su(X)&&((pe=X).currentTime>0&&!pe.paused&&!pe.ended&&pe.readyState>2||X.dataset.redraw==="true")){const we=Ut.get(X),ye=G(Vt,H);return Z.textureUpdate(we,X,ye),X.dataset.redraw=!1,we}return Ut.get(X)},ne=(X,Vt={})=>{const H=Vt.id||X.id;if(X.width&&X.width<1||X.height&&X.height<1||!X.text.length)return void ht.delete(H);let{text:ie,textAlign:pe,fontFamily:we,fontSize:ye=16,fontWeight:ee,fontVariant:qt,fontStyle:ei,letterSpacing:Ze,lineHeight:lt=ye,width:Dt,height:re}=X,{outline:Te=0,blur:Qt=0,paddingTop:et=0,paddingRight:jt=0,paddingBottom:Gt=0,paddingLeft:ce=0}=Vt;Dt=ui(Dt)?Math.floor(Dt):Dt,re=ui(re)?Math.floor(re):re;const{textSize:Ne,signature:He}=((rn="",ve)=>{let{width:ii=0,height:Pe="auto",fontSize:ci,fontFamily:je,lineHeight:te,fontWeight:De,fontStyle:ki,fontVariant:bn,letterSpacing:Mn}=ve;const Hn=pu({text:rn,fontFamily:je,fontWeight:De,fontStyle:ki,fontVariant:bn,fontSize:ci,lineHeight:te,letterSpacing:Mn,width:ii,height:Pe});let Gn=Am.get(Hn);if(Gn)return Gn;let Ui=1;ci>1e3&&ka()&&(Ui=ci/1e3,ci=1e3,te*=Ui);const Zn=Rh(yn("pre",{contenteditable:"true",spellcheck:"false",style:`${Py}${zh({fontFamily:je,fontWeight:De,fontStyle:ki,fontVariant:bn,fontSize:ci,letterSpacing:Mn,lineHeight:te})};${Fh(rn,ve)}"`,innerHTML:rn})),yr=Zn.getBoundingClientRect();return Gn={signature:My(Zn).flat().map($r=>$r.text).join("_;_"),textSize:rs(Ba(yr),$r=>Math.ceil($r*Ui))},Am.set(Hn,Gn),Zn.remove(),Gn})(ie,{...X,width:Dt,height:void 0}),Me=pu({text:ie,textAlign:pe,fontFamily:we,fontSize:ye,fontWeight:ee,fontVariant:qt,fontStyle:ei,lineHeight:lt,letterSpacing:Ze,outline:Te,blur:Qt,signature:He});if(!Ut.has(Me)){Ut.set(Me,ie);const rn=Math.ceil(Ne.width),ve=Math.ceil(Ne.height);if(rn===0||ve===0)return;const ii=Yh(),Pe=Math.min(1,(ii-(ce+jt)*B)/(rn*B),(ii-(et+Gt)*B)/(ve*B));Iy(ie,{fontSize:ye,fontFamily:we,fontWeight:ee,fontVariant:qt,fontStyle:ei,letterSpacing:Ze,textAlign:pe,lineHeight:lt,width:Dt,height:re,imageWidth:rn,imageHeight:ve,paddingLeft:ce,paddingTop:et,paddingRight:jt,paddingBottom:Gt,pixelRatio:B*Pe,willRequest:P,outline:Te,blur:Qt,styleNonce:y.styleNonce,color:[1,0,1]}).then(ci=>{if(!Z)return;const je=Z.textureCreate();Z.textureUpdate(je,ci,{filterParam:Z.textureFilterLinear,wrapParam:Z.textureClamp,scalar:Pe}),Ut.set(Me,je),ht.set(H,je),Yt()}).catch(console.error)}const gn=Ut.get(Me);return Fp(gn)?gn:ht.get(H)},ue=new Map,Nt=X=>{let Vt;return X.backgroundImage?Vt=kt(X.backgroundImage,X.backgroundImageRendering,X.backgroundRepeat==="repeat"?"repeat":void 0):X.bitmap&&X.points&&(Vt=(H=>{const{id:ie,points:pe,strokeWidth:we,strokeCap:ye,strokeJoin:ee,strokeColor:qt}=H;let ei=Ut.get(ie),Ze=ue.get(ie);const lt=pu({points:pe.map(Ne=>`${Ne.x},${Ne.y}`).join(","),strokeWidth:we,strokeCap:ye,strokeJoin:ee,strokeColor:qt});if(Ze){const{hash:Ne}=Ze;if(Ut.has(ie)){if(lt===Ne)return Ut.get(ie)}else Ze=void 0}if(!Ze){const Ne=yn("canvas",{width:1,height:1});Ze={canvas:Ne,hash:void 0},ue.set(H.id,Ze),ei=Z.textureCreate(),Z.textureUpdate(ei,Ne,{filterParam:Z.textureFilterLinear,wrapParam:Z.textureClamp}),Ut.set(ie,ei)}const{canvas:Dt}=Ze,re=Math.ceil(H.strokeWidth),Te=rr(pe),Qt=Math.floor(Te.x)-.5*re,et=Math.floor(Te.y)-.5*re,jt=Math.ceil(Te.width+re),Gt=Math.ceil(Te.height+re);Dt.width=Math.max(jt,1),Dt.height=Math.max(Gt,1);const ce=Dt.getContext("2d");return ce.clearRect(0,0,Dt.width,Dt.height),jt>=1&&Gt>=1&&(ce.translate(-Qt,-et),nh(ce,H),ce.resetTransform()),Z.textureUpdate(ei,Dt,{filterParam:Z.textureFilterLinear,wrapParam:Z.textureClamp}),ue.set(ie,{canvas:Dt,hash:lt}),Ut.get(ie)})(X)),Vt},xe=({texture:X,size:Vt,origin:H,translation:ie,rotation:pe,scale:we,colorMatrix:ye,opacity:ee,convolutionMatrix:qt,gamma:ei,vignette:Ze,maskFeather:lt,maskCornerRadius:Dt,overlayColor:re,enableOverlay:Te,enableManipulation:Qt,enableAntialiasing:et})=>{let jt=0,Gt=0;if(E===1){const ce=Math.abs(1-we)<Number.EPSILON;jt=ce&&gt%2!=0?.5:0,Gt=ce&&xt%2!=0?.5:0}return Z.drawImage(X,Vt,H.x,H.y,ie.x+jt,ie.y+Gt,pe.x,pe.y,pe.z,we,ye,tn(ee,0,1),qt,ei,Ze,lt,Dt,re,Te,Qt,et),X},Ht=(X,Vt,H)=>{const ie=Ri(Vt),pe=Ri(X),we=ie.x-pe.x,ye=ie.y-pe.y,ee=Ur(ie,H,pe);return{x:ee.x-pe.x-we,y:ee.y-pe.y-ye}},ze=(X=[],Vt)=>{X.forEach(H=>{let ie=Nt(H);const pe=H.status!=="complete"&&(H.status==="loading"||H.backgroundImage&&ie===H.backgroundImage);pe&&Yt();const we=H.status==="error"||H.backgroundImage&&ie instanceof Error;let ye=Fp(ie)?ie:void 0;const ee=H._scale||1,qt=H._translate||u,ei=H.strokeWidth&&H.strokeWidth*ee,Ze=H.cornerRadius?((Qt,et)=>[Qt,Qt,Qt,Qt].map(jt=>jt*et))(H.cornerRadius,ee):d,lt=!!H.width,Dt=_e(H.text),re=An(H.points),Te=nr(H);if(re){const Qt=H.points.map(et=>at(et.x*ee+qt.x,et.y*ee+qt.y));if(H.bitmap){ie&&Vt.push(ie);const et=rr(Qt),jt=Math.ceil(H.strokeWidth*ee);Z.drawRect({x:Math.floor(et.x)-.5*jt,y:Math.floor(et.y)-.5*jt,width:Math.ceil(et.width+jt),height:Math.ceil(et.height+jt)},H.rotation,H.flipX,H.flipY,[0,0,0,0],void 0,ye,void 0,void 0,void 0,void 0,void 0,void 0,H.opacity,void 0,void 0,!1,!1)}else Z.drawPath(Qt,H.rotation,H.flipX,H.flipY,ei,H.strokeColor,H.pathClose,H.backgroundColor,H.opacity)}else if(Te){let Qt=H.x,et=H.y;Qt*=ee,et*=ee,Qt+=qt.x,et+=qt.y;const jt=at(Qt,et);Z.drawEllipse(jt,H.rx*ee,H.ry*ee,H.rotation,H.flipX,H.flipY,H.backgroundColor,ye,void 0,void 0,H.backgroundCorners&&T$(H.backgroundCorners),ei,H.strokeColor,H.opacity,H.inverted),ie&&Vt.push(ie),(pe||we)&&(H.backgroundColor||H.strokeColor&&H.strokeWidth||Z.drawEllipse(jt,H.rx*ee,H.ry*ee,H.rotation,H.flipX,H.flipY,we?[1,0,0,.25*H.opacity]:[0,0,0,.25*H.opacity]),we&&Fe(jt),pe&&Be(jt))}else if(Dt){const{fontSize:Qt=16}=H,et=Qt>1e3&&ka()?Qt/1e3:1,jt=Math.max(16,Math.ceil(Qt/et*.25)),Gt=Math.abs(H.rotation)>0,ce=Vo(H.text,H),Ne={x:H.x*ee+qt.x,y:H.y*ee+qt.y,width:ce.width*ee,height:ce.height*ee};(H.backgroundColor||H.strokeColor)&&Z.drawRect(Ne,H.rotation,H.flipX,H.flipY,Ze,H.backgroundColor,void 0,void 0,void 0,!1,void 0,ei,H.strokeColor,H.opacity,void 0,void 0,void 0,H.inverted);const{textShadowX:He,textShadowY:Me,textShadowBlur:gn}=H;if(He||Me||gn){const ve=Math.ceil(.5*gn),ii=Math.max(jt,ve),Pe=ne(H,{id:H.id+"shadow",blur:gn,paddingTop:ii,paddingRight:ii,paddingBottom:ii,paddingLeft:ii});if(Pe&&!H._prerender){Vt.push(Pe);const ci=Z.textureGetSize(Pe),je={x:0,y:0},te={width:ci.width/B*ee,height:ci.height/B*ee},De=jt*ee/et,ki={x:H.x*ee+qt.x-De,y:H.y*ee+qt.y-De,width:te.width,height:H.height?ce.height+De-Me:te.height};if(Gt){const bn=Ht(Ne,ki,H.rotation);ki.x+=bn.x,ki.y+=bn.y;const Mn=Ur(at(He,Me),H.rotation);ki.x+=Mn.x,ki.y+=Mn.y}else ki.x+=He,ki.y+=Me;Z.drawRect(ki,H.rotation,H.flipX,H.flipY,[0,0,0,0],void 0,Pe,te,je,!1,void 0,void 0,void 0,H.opacity,void 0,0,H.textShadowColor)}}if(H.textOutlineWidth){const ve=Math.ceil(.5*H.textOutlineWidth),ii=jt+ve,Pe=ne(H,{id:H.id+"outline",outline:H.textOutlineWidth,paddingTop:ii,paddingRight:ii,paddingBottom:ii,paddingLeft:ii});if(Pe&&!H._prerender){Vt.push(Pe);const ci=Z.textureGetSize(Pe),je={x:0,y:0},te={width:ci.width/B*ee,height:ci.height/B*ee},De=(jt+ve)*ee/et,ki={x:H.x*ee+qt.x-De,y:H.y*ee+qt.y-De,width:te.width,height:H.height?ce.height+De:te.height};if(Gt){const bn=Ht(Ne,ki,H.rotation);ki.x+=bn.x,ki.y+=bn.y}Z.drawRect(ki,H.rotation,H.flipX,H.flipY,[0,0,0,0],void 0,Pe,te,je,!1,void 0,void 0,void 0,H.opacity,void 0,0,H.textOutlineColor)}}const rn=ne(H,{id:H.id+"text",paddingTop:jt,paddingRight:jt,paddingBottom:jt,paddingLeft:jt});if(rn&&!H._prerender){Vt.push(rn);const ve=Z.textureGetSize(rn),ii={x:0,y:0},Pe={width:ve.width/B*ee,height:ve.height/B*ee},ci=jt*ee/et,je={x:H.x*ee+qt.x-ci,y:H.y*ee+qt.y-ci,width:Pe.width,height:H.height?ce.height+ci:Pe.height};if(Gt){const De=Ht(Ne,je,H.rotation);je.x+=De.x,je.y+=De.y}const te=H.color||[0,0,0];H._prerender&&(te[3]=0),Z.drawRect(je,H.rotation,H.flipX,H.flipY,d,!1,rn,Pe,ii,!1,!1,void 0,void 0,H.opacity,void 0,H.feather,te,H.inverted)}}else if(lt){ie&&Vt.push(ie);const Qt=xs(H);let et,jt;ee&&qt&&(Qt.x*=ee,Qt.y*=ee,Qt.x+=qt.x,Qt.y+=qt.y,Qt.width*=ee,Qt.height*=ee);const{backgroundRepeat:Gt="no-repeat"}=H,ce=ye&&Z.textureGetSize(ye);if(ce&&H.backgroundImage&&(H.backgroundSize||H.backgroundPosition||H.backgroundRepeat)){const Ne=ea(ce.width,ce.height);if(H.backgroundRepeat==="repeat"&&(et={...ce},jt={x:0,y:0}),H.backgroundSize==="contain"){const He=to(Qt,Ne,Qt);et=sl(He),jt=H.backgroundPosition?H.backgroundPosition:at(.5*(Qt.width-et.width),.5*(Qt.height-et.height))}else if(H.backgroundSize==="cover"){const He=as(Qt,Ne,Qt);et=sl(He),H.backgroundPosition?jt=H.backgroundPosition:(jt=at(He.x,He.y),jt=at(.5*(Qt.width-et.width),.5*(Qt.height-et.height)))}else H.backgroundSize?(et=H.backgroundSize,jt=H.backgroundPosition||{x:0,y:0}):H.backgroundPosition&&(et={...ce},jt=H.backgroundPosition)}if(Z.drawRect(Qt,H.rotation,H.flipX,H.flipY,Ze,H.backgroundColor,ye,et,jt,Gt==="repeat",H.backgroundCorners&&T$(H.backgroundCorners),ei,H.strokeColor,H.opacity,void 0,H.feather,H.fillColor,H.inverted),pe||we){H.backgroundColor&&H.backgroundColor[3]!==0||H.strokeColor&&H.strokeWidth||Z.drawRect(Qt,H.rotation,H.flipX,H.flipY,Ze,we?[1,.2549,.2118,.25*H.opacity]:[0,0,0,.25*H.opacity]);const Ne=Ri(Qt);we&&Fe(Ne),pe&&Be(Ne)}}else ie&&Vt.push(ie)})};let W=0;const Re=[{x:-5,y:-5},{x:5,y:5}],Se=[{x:5,y:-5},{x:-5,y:5}],Xt=vu({x:0,y:0},10,10,0,!1,!1,16);Xt.length=9;const Be=X=>{W=Date.now()/50,Z.drawEllipse(X,15,15,0,!1,!1,[0,0,0,.5]);const Vt=al(Xt.map(H=>({x:H.x+X.x,y:H.y+X.y})),W,X.x,X.y);Z.drawPath(Vt,0,!1,!1,2,[1,1,1])},Fe=X=>{Z.drawEllipse(X,13,13,0,!1,!1,[1,.2549,.2118,.75]);const Vt=Re.map(ie=>({x:ie.x+X.x,y:ie.y+X.y})),H=Se.map(ie=>({x:ie.x+X.x,y:ie.y+X.y}));Z.drawPath(Vt,0,!1,!1,3,[1,1,1]),Z.drawPath(H,0,!1,!1,3,[1,1,1])},Xe=(X,Vt,H,ie,pe,we)=>Z.drawRect(Vt,0,!1,!1,d,d,X,ie,H,!0,void 0,0,void 0,we,void 0,void 0,pe);let yi=!1,bt=!0,be=!1;const Ue=[],Le=[],Ve=[],Ge=X=>!X.aboveFrame,Qe=X=>X.aboveFrame,vi=()=>{Ve.length=0;const X=ct[0],{manipulationShapes:Vt,manipulationShapesDirty:H,annotationShapes:ie,annotationShapesDirty:pe,interfaceShapes:we,decorationShapes:ye,frameShapes:ee,selectionShapes:qt}=D({opacity:X.opacity,rotation:X.rotation,scale:X.scale,images:ct,size:Un(gt,xt),backgroundColor:[...c],selectionRect:l}),ei=[...c],Ze=l,lt=tn(s,0,1),Dt=a,re=Math.abs(X.rotation.x/Math.PI*2-1),Te=Math.abs(X.rotation.y/Math.PI*2-1),Qt=re<.99||Te<.99,et={...X.size},jt=X.backgroundColor,Gt=X.backgroundImage,ce=Vt.length>0,Ne=ie.length>0,He=ie.filter(Qe).length>0,Me=ye.filter(Qe).length>0,gn=jt[3]>0,rn=!!I&&C>=1;if(lt<1&&gn){const ve=ei[0],ii=ei[1],Pe=ei[2],ci=1-lt,je=jt[0]*ci,te=jt[1]*ci,De=jt[2]*ci,ki=1-ci;ei[0]=je+ve*ki,ei[1]=te+ii*ki,ei[2]=De+Pe*ki,ei[3]=1}if(Z.setCanvasColor(f?d:ei),ce&&(H||yi)?(Z.disableMask(),Z.drawToImageBlendBuffer(et),Ue.length=0,ze(Vt,Ue)):ce||(Ue.length=0),Ve.push(...Ue),bt&&(Z.drawToImageOverlayBuffer(et,B),bt=!1),Qt){if(Ne&&(pe||yi)||!be){Z.disableMask(),Z.drawToImageOverlayBuffer(et,B),Le.length=0;const ve=He?ie.filter(Ge):ie;ze(ve,Le)}else Ne||(Le.length=0);be=!0}else be=!1;if(Z.drawToCanvas(),Z.enableMask(Ze,lt),nt&&N>=1&&k.length===2&&tt&&((ve,ii,Pe,ci,je)=>{const te=Un(ii,ii),De=kt(p,"pixelated","repeat"),ki=at(-ve.x%ii,-ve.y%ii),bn=at(ki.x+.5*te.width,ki.y);Xe(De,ve,ki,te,Pe,je),Xe(De,ve,bn,te,ci,je)})(Ze,N,k[0],k[1],tt),gn&&Z.drawRect(Ze,0,!1,!1,d,jt),Gt){Z.enableMask(Ze,1);const ve=Math.max(x.width/Gt.width,x.height/Gt.height),ii=Gt.width*ve,Pe=Gt.height*ve,ci={x:x.x+.5*x.width-.5*ii,y:x.y+.5*x.height-.5*Pe,width:ii,height:Pe};Z.drawRect(ci,0,!1,!1,d,d,kt(Gt,"linear")),Z.enableMask(Ze,lt)}if(rn&&Z.enablePreviewStencil(),Ve.push(...[...ct].reverse().map(ve=>xe({...ve,texture:kt(ve.data),enableOverlay:Qt&&Ne,enableManipulation:ce,enableAntialiasing:!0,mask:Ze,maskOpacity:lt,overlayColor:Dt}))),Z.enableMask(Ze,C),!Qt){rn&&Z.applyPreviewStencil(),Z.resetCanvasMatrix(),Z.updateCanvasMatrix(et,X.origin,X.translation,X.scale,X.rotation),Le.length=0;const ve=He?ie.filter(Ge):ie;ze(ve,Le),rn&&Z.disablePreviewStencil()}if(Ve.push(...Le),Z.resetCanvasMatrix(),Z.enableMask(Ze,C),ze(Me?ye.filter(Ge):ye,Ve),ee.length){Z.enableMask(Ze,1);const ve=ee.filter(Pe=>!Pe.expandsCanvas),ii=ee.filter(Pe=>Pe.expandsCanvas);ve.length&&ze(ve,Ve),ii.length&&(Z.enableMask({x:Ze.x+.5,y:Ze.y+.5,width:Ze.width-1,height:Ze.height-1},o),ze(ii,Ve))}if(He&&(Z.resetCanvasMatrix(),Z.updateCanvasMatrix(et,X.origin,X.translation,X.scale,X.rotation),ze(ie.filter(Qe),Ve),Z.resetCanvasMatrix()),Me&&(Z.resetCanvasMatrix(),ze(ye.filter(Qe),Ve),Z.resetCanvasMatrix()),mt&&qt.length&&!Qt){Z.resetCanvasMatrix(),Z.updateCanvasMatrix(et,X.origin,X.translation,X.scale,X.rotation);const ve=[...mt];ve[3]=.5;const ii=[{id:"selection",color:ve,actions:[...qt]}].map(Pe=>Zt(Pe,et));ze(ii,Ve),Z.resetCanvasMatrix()}Z.disableMask(),ze(we,Ve),ot.forEach(ve=>{if(Z.enableMask(ve.mask,ve.maskOpacity),ve.backgroundColor){const Pe=Gt&&as({...ve.mask},Gt.width/Gt.height),ci=Gt&&kt(Gt,"linear");Z.drawRect(ve.mask,0,!1,!1,ve.maskCornerRadius,ve.backgroundColor,ci,Pe,Pe,void 0,void 0,void 0,void 0,ve.opacity,ve.maskFeather),ci&&Ve.push(ci)}const ii=xe({...ve,texture:kt(ve.data),enableAntialiasing:!1,translation:{x:ve.translation.x+ve.offset.x-.5*gt,y:ve.translation.y+ve.offset.y-.5*xt}});Ve.push(ii)}),Z.disableMask(),(ve=>{Ut.forEach((ii,Pe)=>{!ve.find(ci=>ci===ii)&&Fp(ii)&&(Array.from(ht.values()).includes(ii)||(Ut.delete(Pe),Z.textureDelete(ii)))})})(Ve),U(),yi=!1};let Si,Jt=0;const Ci=()=>{clearTimeout(Si);const X=Date.now();X-Jt<48?Si=setTimeout(Ci,48):(Jt=X,vi())};return nv(()=>r()),Ls(()=>i(31,Z=Zv(g,{alpha:f}))),Uo(()=>{Z&&(ue.forEach(({canvas:X})=>or(X)),ue.clear(),Z.release(),i(31,Z=void 0),i(0,g=void 0))}),t.$$set=X=>{"isAnimated"in X&&i(9,m=X.isAnimated),"isTransparent"in X&&i(10,f=X.isTransparent),"maskRect"in X&&i(11,x=X.maskRect),"maskOpacity"in X&&i(12,w=X.maskOpacity),"maskFrameOpacity"in X&&i(13,S=X.maskFrameOpacity),"maskMarkupOpacity"in X&&i(14,C=X.maskMarkupOpacity),"clipAnnotationsToImage"in X&&i(15,I=X.clipAnnotationsToImage),"pixelRatio"in X&&i(16,E=X.pixelRatio),"textPixelRatio"in X&&i(17,B=X.textPixelRatio),"backgroundColor"in X&&i(18,T=X.backgroundColor),"willRender"in X&&i(19,D=X.willRender),"didRender"in X&&i(20,U=X.didRender),"willRequest"in X&&i(21,P=X.willRequest),"csp"in X&&i(22,y=X.csp),"loadImageData"in X&&i(23,V=X.loadImageData),"enableGrid"in X&&i(24,nt=X.enableGrid),"gridColors"in X&&i(25,k=X.gridColors),"gridSize"in X&&i(26,N=X.gridSize),"gridOpacity"in X&&i(27,tt=X.gridOpacity),"images"in X&&i(28,ct=X.images),"interfaceImages"in X&&i(29,ot=X.interfaceImages),"selectionColor"in X&&i(30,mt=X.selectionColor)},t.$$.update=()=>{if(1&t.$$.dirty[0]&&g){const X=getComputedStyle(g).getPropertyValue("--color-transition-duration");i(32,J=(Vt=>{let H=parseFloat(Vt);return/^[0-9]+s$/.test(Vt)?1e3*H:H})(X))}262656&t.$$.dirty[0]|2&t.$$.dirty[1]&&T&&q.set(T,{duration:m?J:0}),4096&t.$$.dirty[0]&&dt(ft,ui(w)?w:1),8192&t.$$.dirty[0]&&dt(Lt,ui(S)?S:1),2048&t.$$.dirty[0]&&x&&_.set(x),48&t.$$.dirty[1]&&c&&rt.set([c[0],c[1],c[2],tn(s,0,1)]),268435462&t.$$.dirty[0]|1&t.$$.dirty[1]&&i(34,n=!!(Z&&gt&&xt&&ct.length)),65542&t.$$.dirty[0]|1&t.$$.dirty[1]&&gt&&xt&&Z&&(Jt=0,Z.resize(gt,xt,E)),8&t.$$.dirty[1]&&i(33,r=n?Jh()?Ci:vi:fe),12&t.$$.dirty[1]&&n&&r&&r()},[g,gt,xt,h,q,ft,Lt,_,rt,m,f,x,w,S,C,I,E,B,T,D,U,P,y,V,nt,k,N,tt,ct,ot,mt,Z,J,r,n,s,c,function(X){Wi[X?"unshift":"push"](()=>{g=X,i(0,g)})},X=>{i(1,gt=X.detail.width),i(2,xt=X.detail.height),h("measure",{width:gt,height:xt})}]}class n4 extends li{constructor(e){super(),si(this,e,i4,e4,oi,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,csp:22,loadImageData:23,enableGrid:24,gridColors:25,gridSize:26,gridOpacity:27,images:28,interfaceImages:29,selectionColor:30},null,[-1,-1,-1])}}var $i=(t,e=Boolean,i=" ")=>t.filter(e).join(i);function M$(t,e,i){const n=t.slice();return n[17]=e[i],n}const r4=t=>({tab:4&t}),P$=t=>({tab:t[17]});function R$(t){let e,i,n,r=[],o=new Map,a=t[2];const s=l=>l[17].id;for(let l=0;l<a.length;l+=1){let c=M$(t,a,l),d=s(c);o.set(d,r[l]=I$(d,c))}return{c(){e=ut("ul");for(let l=0;l<r.length;l+=1)r[l].c();v(e,"class",i=$i(["PinturaTabList",t[0]])),v(e,"role","tablist"),v(e,"data-layout",t[1])},m(l,c){it(l,e,c);for(let d=0;d<r.length;d+=1)r[d].m(e,null);t[14](e),n=!0},p(l,c){1124&c&&(a=l[2],Ie(),r=Oa(r,c,s,1,l,a,o,e,zs,I$,null,M$),Ee()),(!n||1&c&&i!==(i=$i(["PinturaTabList",l[0]])))&&v(e,"class",i),(!n||2&c)&&v(e,"data-layout",l[1])},i(l){if(!n){for(let c=0;c<a.length;c+=1)M(r[c]);n=!0}},o(l){for(let c=0;c<r.length;c+=1)F(r[c]);n=!1},d(l){l&&Q(e);for(let c=0;c<r.length;c+=1)r[c].d();t[14](null)}}}function I$(t,e){let i,n,r,o,a,s,l,c,d,u;const p=e[11].default,h=ur(p,e,e[10],P$);function g(...f){return e[12](e[17],...f)}function m(...f){return e[13](e[17],...f)}return{key:t,first:null,c(){i=ut("li"),n=ut("button"),h&&h.c(),o=$e(),v(n,"type","button"),n.disabled=r=e[17].disabled,v(i,"role","tab"),v(i,"aria-controls",a=e[17].href.substr(1)),v(i,"id",s=e[17].tabId),v(i,"aria-selected",l=e[17].selected),this.first=i},m(f,x){it(f,i,x),St(i,n),h&&h.m(n,null),St(i,o),c=!0,d||(u=[Mt(n,"keydown",g),Mt(n,"click",m)],d=!0)},p(f,x){e=f,h&&h.p&&(!c||1028&x)&&hr(h,p,e,e[10],c?pr(p,e[10],x,r4):mr(e[10]),P$),(!c||4&x&&r!==(r=e[17].disabled))&&(n.disabled=r),(!c||4&x&&a!==(a=e[17].href.substr(1)))&&v(i,"aria-controls",a),(!c||4&x&&s!==(s=e[17].tabId))&&v(i,"id",s),(!c||4&x&&l!==(l=e[17].selected))&&v(i,"aria-selected",l)},i(f){c||(M(h,f),c=!0)},o(f){F(h,f),c=!1},d(f){f&&Q(i),h&&h.d(f),d=!1,ji(u)}}}function o4(t){let e,i,n=t[4]&&R$(t);return{c(){n&&n.c(),e=Tn()},m(r,o){n&&n.m(r,o),it(r,e,o),i=!0},p(r,[o]){r[4]?n?(n.p(r,o),16&o&&M(n,1)):(n=R$(r),n.c(),M(n,1),n.m(e.parentNode,e)):n&&(Ie(),F(n,1,1,()=>{n=null}),Ee())},i(r){i||(M(n),i=!0)},o(r){F(n),i=!1},d(r){n&&n.d(r),r&&Q(e)}}}function a4(t,e,i){let n,r,o,{$$slots:a={},$$scope:s}=e,{class:l}=e,{name:c}=e,{selected:d}=e,{tabs:u=[]}=e,{layout:p}=e;const h=Ca(),g=x=>{const w=o.querySelectorAll('[role="tab"] button')[x];w&&w.focus()},m=(x,w)=>{x.preventDefault(),x.stopPropagation(),h("select",w)},f=({key:x},w)=>{if(!/arrow/i.test(x))return;const S=u.findIndex(C=>C.id===w);return/right|down/i.test(x)?g(S<u.length-1?S+1:0):/left|up/i.test(x)?g(S>0?S-1:u.length-1):void 0};return t.$$set=x=>{"class"in x&&i(0,l=x.class),"name"in x&&i(7,c=x.name),"selected"in x&&i(8,d=x.selected),"tabs"in x&&i(9,u=x.tabs),"layout"in x&&i(1,p=x.layout),"$$scope"in x&&i(10,s=x.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&i(2,n=u.map(x=>{const w=x.id===d;return{...x,tabId:`tab-${c}-${x.id}`,href:`#panel-${c}-${x.id}`,selected:w}})),4&t.$$.dirty&&i(4,r=n.length>1)},[l,p,n,o,r,m,f,c,d,u,s,a,(x,w)=>f(w,x.id),(x,w)=>m(w,x.id),function(x){Wi[x?"unshift":"push"](()=>{o=x,i(3,o)})}]}class _u extends li{constructor(e){super(),si(this,e,a4,o4,oi,{class:0,name:7,selected:8,tabs:9,layout:1})}}const s4=t=>({panel:16&t}),E$=t=>({panel:t[4][0].id,panelIsActive:!0});function A$(t,e,i){const n=t.slice();return n[14]=e[i].id,n[15]=e[i].shouldDraw,n[16]=e[i].panelId,n[17]=e[i].tabindex,n[18]=e[i].labelledBy,n[19]=e[i].isActive,n[20]=e[i].hidden,n[3]=e[i].visible,n}const l4=t=>({panel:16&t,panelIsActive:16&t}),L$=t=>({panel:t[14],panelIsActive:t[19]});function c4(t){let e,i,n,r,o,a;const s=t[11].default,l=ur(s,t,t[10],E$);return{c(){e=ut("div"),i=ut("div"),l&&l.c(),v(i,"class",n=$i([t[1]])),v(e,"class",t[0]),v(e,"style",t[2])},m(c,d){it(c,e,d),St(e,i),l&&l.m(i,null),r=!0,o||(a=[Mt(e,"measure",t[13]),Zi(Mr.call(null,e))],o=!0)},p(c,d){l&&l.p&&(!r||1040&d)&&hr(l,s,c,c[10],r?pr(s,c[10],d,s4):mr(c[10]),E$),(!r||2&d&&n!==(n=$i([c[1]])))&&v(i,"class",n),(!r||1&d)&&v(e,"class",c[0]),(!r||4&d)&&v(e,"style",c[2])},i(c){r||(M(l,c),r=!0)},o(c){F(l,c),r=!1},d(c){c&&Q(e),l&&l.d(c),o=!1,ji(a)}}}function d4(t){let e,i,n,r,o,a=[],s=new Map,l=t[4];const c=d=>d[14];for(let d=0;d<l.length;d+=1){let u=A$(t,l,d),p=c(u);s.set(p,a[d]=F$(p,u))}return{c(){e=ut("div");for(let d=0;d<a.length;d+=1)a[d].c();v(e,"class",i=$i(["PinturaTabPanels",t[0]])),v(e,"style",t[2])},m(d,u){it(d,e,u);for(let p=0;p<a.length;p+=1)a[p].m(e,null);n=!0,r||(o=[Mt(e,"measure",t[12]),Zi(Mr.call(null,e,{observePosition:!0}))],r=!0)},p(d,u){1042&u&&(l=d[4],Ie(),a=Oa(a,u,c,1,d,l,s,e,zs,F$,null,A$),Ee()),(!n||1&u&&i!==(i=$i(["PinturaTabPanels",d[0]])))&&v(e,"class",i),(!n||4&u)&&v(e,"style",d[2])},i(d){if(!n){for(let u=0;u<l.length;u+=1)M(a[u]);n=!0}},o(d){for(let u=0;u<a.length;u+=1)F(a[u]);n=!1},d(d){d&&Q(e);for(let u=0;u<a.length;u+=1)a[u].d();r=!1,ji(o)}}}function z$(t){let e;const i=t[11].default,n=ur(i,t,t[10],L$);return{c(){n&&n.c()},m(r,o){n&&n.m(r,o),e=!0},p(r,o){n&&n.p&&(!e||1040&o)&&hr(n,i,r,r[10],e?pr(i,r[10],o,l4):mr(r[10]),L$)},i(r){e||(M(n,r),e=!0)},o(r){F(n,r),e=!1},d(r){n&&n.d(r)}}}function F$(t,e){let i,n,r,o,a,s,l,c,d,u=e[15]&&z$(e);return{key:t,first:null,c(){i=ut("div"),u&&u.c(),n=$e(),v(i,"class",r=$i(["PinturaTabPanel",e[1]])),i.hidden=o=e[20],v(i,"id",a=e[16]),v(i,"tabindex",s=e[17]),v(i,"aria-labelledby",l=e[18]),v(i,"data-inert",c=!e[3]),this.first=i},m(p,h){it(p,i,h),u&&u.m(i,null),St(i,n),d=!0},p(p,h){(e=p)[15]?u?(u.p(e,h),16&h&&M(u,1)):(u=z$(e),u.c(),M(u,1),u.m(i,n)):u&&(Ie(),F(u,1,1,()=>{u=null}),Ee()),(!d||2&h&&r!==(r=$i(["PinturaTabPanel",e[1]])))&&v(i,"class",r),(!d||16&h&&o!==(o=e[20]))&&(i.hidden=o),(!d||16&h&&a!==(a=e[16]))&&v(i,"id",a),(!d||16&h&&s!==(s=e[17]))&&v(i,"tabindex",s),(!d||16&h&&l!==(l=e[18]))&&v(i,"aria-labelledby",l),(!d||16&h&&c!==(c=!e[3]))&&v(i,"data-inert",c)},i(p){d||(M(u),d=!0)},o(p){F(u),d=!1},d(p){p&&Q(i),u&&u.d()}}}function u4(t){let e,i,n,r;const o=[d4,c4],a=[];function s(l,c){return l[5]?0:1}return e=s(t),i=a[e]=o[e](t),{c(){i.c(),n=Tn()},m(l,c){a[e].m(l,c),it(l,n,c),r=!0},p(l,[c]){let d=e;e=s(l),e===d?a[e].p(l,c):(Ie(),F(a[d],1,1,()=>{a[d]=null}),Ee(),i=a[e],i?i.p(l,c):(i=a[e]=o[e](l),i.c()),M(i,1),i.m(n.parentNode,n))},i(l){r||(M(i),r=!0)},o(l){F(i),r=!1},d(l){a[e].d(l),l&&Q(n)}}}function p4(t,e,i){let n,r,{$$slots:o={},$$scope:a}=e,{class:s}=e,{name:l}=e,{selected:c}=e,{panelClass:d}=e,{panels:u=[]}=e,{visible:p}=e,{style:h}=e;const g={};return t.$$set=m=>{"class"in m&&i(0,s=m.class),"name"in m&&i(6,l=m.name),"selected"in m&&i(7,c=m.selected),"panelClass"in m&&i(1,d=m.panelClass),"panels"in m&&i(8,u=m.panels),"visible"in m&&i(3,p=m.visible),"style"in m&&i(2,h=m.style),"$$scope"in m&&i(10,a=m.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&i(4,n=u.map(m=>{const f=m===c;f&&i(9,g[m]=!0,g);const x=p?p.indexOf(m)!==-1:f;return{id:m,panelId:`panel-${l}-${m}`,labelledBy:`tab-${l}-${m}`,isActive:f,hidden:!f,visible:x,tabindex:f?0:-1,shouldDraw:f||g[m]}})),16&t.$$.dirty&&i(5,r=n.length>1)},[s,d,h,p,n,r,l,c,u,g,a,o,function(m){Xr.call(this,t,m)},function(m){Xr.call(this,t,m)}]}class Vu extends li{constructor(e){super(),si(this,e,p4,u4,oi,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var Qh=t=>{const e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter(i=>!!e[i].get)};function D$(t){let e,i,n,r;const o=[t[5],{locale:t[1]}];function a(c){t[22](c)}var s=t[10];function l(c){let d={};for(let u=0;u<o.length;u+=1)d=Cn(d,o[u]);return c[3]!==void 0&&(d.name=c[3]),{props:d}}return s&&(e=Pu(s,l(t)),Wi.push(()=>ko(e,"name",a)),t[23](e),e.$on("measure",t[11])),{c(){e&&It(e.$$.fragment),n=Tn()},m(c,d){e&&Pt(e,c,d),it(c,n,d),r=!0},p(c,d){const u=34&d[0]?Tr(o,[32&d[0]&&Br(c[5]),2&d[0]&&{locale:c[1]}]):{};if(!i&&8&d[0]&&(i=!0,u.name=c[3],Ao(()=>i=!1)),s!==(s=c[10])){if(e){Ie();const p=e;F(p.$$.fragment,1,0,()=>{Rt(p,1)}),Ee()}s?(e=Pu(s,l(c)),Wi.push(()=>ko(e,"name",a)),c[23](e),e.$on("measure",c[11]),It(e.$$.fragment),M(e.$$.fragment,1),Pt(e,n.parentNode,n)):e=null}else s&&e.$set(u)},i(c){r||(e&&M(e.$$.fragment,c),r=!0)},o(c){e&&F(e.$$.fragment,c),r=!1},d(c){t[23](null),c&&Q(n),e&&Rt(e,c)}}}function h4(t){let e,i,n,r=t[6]&&D$(t);return{c(){e=ut("div"),r&&r.c(),v(e,"data-util",t[3]),v(e,"class",i=$i(["PinturaUtilPanel",t[2]])),v(e,"style",t[7])},m(o,a){it(o,e,a),r&&r.m(e,null),t[24](e),n=!0},p(o,a){o[6]?r?(r.p(o,a),64&a[0]&&M(r,1)):(r=D$(o),r.c(),M(r,1),r.m(e,null)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee()),(!n||8&a[0])&&v(e,"data-util",o[3]),(!n||4&a[0]&&i!==(i=$i(["PinturaUtilPanel",o[2]])))&&v(e,"class",i),(!n||128&a[0])&&v(e,"style",o[7])},i(o){n||(M(r),n=!0)},o(o){F(r),n=!1},d(o){o&&Q(e),r&&r.d(),t[24](null)}}}function m4(t,e,i){let n,r,o,a,s;const l=Ca();let{isActive:c=!0}=e,{stores:d}=e,{view:u}=e,{props:p}=e,{component:h}=e,{locale:g}=e,{class:m}=e;const f=un("isAnimated");let x;L(t,f,N=>i(21,s=N));const w=di(0),S=Bi(w,N=>tn(N,0,1));L(t,S,N=>i(20,a=N));let C=!c;const I=ge(c),E={isActive:Bi(I,async(N,tt)=>{if(!N)return tt(N);await t2(),tt(N)},!1),isActiveFraction:Bi(S,N=>N),isVisible:Bi(S,N=>N>0)},B=u,T=Qh(B),D=Object.keys(p||{}).reduce((N,tt)=>(T.includes(tt)&&(N[tt]=p[tt]),N),{}),U=Object.keys(E).reduce((N,tt)=>(T.includes(tt)&&(N[tt]=E[tt]),N),{});let P,y;const V=N=>{i(17,x={...N.detail}),k&&c&&l("measure",{...x})};wo("measurable",Mr);const nt=dl().$$.context;let k=!1;return Ls(()=>{if(i(19,k=!0),o)return;i(0,h=new B({target:y,props:{...r,locale:g},context:nt})),i(3,P=h.name);const N=h.$on("measure",V);return()=>{N(),h.$destroy()}}),t.$$set=N=>{"isActive"in N&&i(12,c=N.isActive),"stores"in N&&i(13,d=N.stores),"view"in N&&i(14,u=N.view),"props"in N&&i(15,p=N.props),"component"in N&&i(0,h=N.component),"locale"in N&&i(1,g=N.locale),"class"in N&&i(2,m=N.class)},t.$$.update=()=>{135169&t.$$.dirty[0]&&x&&c&&h&&l("measure",x),2101248&t.$$.dirty[0]&&w.set(c?1:0,{hard:s===!1}),1310720&t.$$.dirty[0]&&(a<=0&&!C?i(18,C=!0):a>0&&C&&i(18,C=!1)),786432&t.$$.dirty[0]&&k&&l(C?"hide":"show"),1048576&t.$$.dirty[0]&&l("fade",a),1048576&t.$$.dirty[0]&&i(7,n=a<1?"opacity: "+a:void 0),4096&t.$$.dirty[0]&&I.set(c),8192&t.$$.dirty[0]&&i(5,r={...D,...U,stores:d})},i(6,o=!T.includes("external")),[h,g,m,P,y,r,o,n,f,S,B,V,c,d,u,p,w,x,C,k,a,s,function(N){P=N,i(3,P)},function(N){Wi[N?"unshift":"push"](()=>{h=N,i(0,h)})},function(N){Wi[N?"unshift":"push"](()=>{y=N,i(4,y)})}]}class C2 extends li{constructor(e){super(),si(this,e,m4,h4,oi,{isActive:12,stores:13,view:14,props:15,component:0,locale:1,class:2,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function $4(t){let e,i,n;const r=t[5].default,o=ur(r,t,t[4],null);return{c(){e=kr("svg"),o&&o.c(),v(e,"class",t[3]),v(e,"style",t[2]),v(e,"width",t[0]),v(e,"height",t[1]),v(e,"viewBox",i="0 0 "+t[0]+`
    `+t[1]),v(e,"xmlns","http://www.w3.org/2000/svg"),v(e,"aria-hidden","true"),v(e,"focusable","false"),v(e,"stroke-linecap","round"),v(e,"stroke-linejoin","round")},m(a,s){it(a,e,s),o&&o.m(e,null),n=!0},p(a,[s]){o&&o.p&&(!n||16&s)&&hr(o,r,a,a[4],n?pr(r,a[4],s,null):mr(a[4]),null),(!n||8&s)&&v(e,"class",a[3]),(!n||4&s)&&v(e,"style",a[2]),(!n||1&s)&&v(e,"width",a[0]),(!n||2&s)&&v(e,"height",a[1]),(!n||3&s&&i!==(i="0 0 "+a[0]+`
    `+a[1]))&&v(e,"viewBox",i)},i(a){n||(M(o,a),n=!0)},o(a){F(o,a),n=!1},d(a){a&&Q(e),o&&o.d(a)}}}function g4(t,e,i){let{$$slots:n={},$$scope:r}=e,{width:o=24}=e,{height:a=24}=e,{style:s}=e,{class:l}=e;return t.$$set=c=>{"width"in c&&i(0,o=c.width),"height"in c&&i(1,a=c.height),"style"in c&&i(2,s=c.style),"class"in c&&i(3,l=c.class),"$$scope"in c&&i(4,r=c.$$scope)},[o,a,s,l,r,n]}class Lo extends li{constructor(e){super(),si(this,e,g4,$4,oi,{width:0,height:1,style:2,class:3})}}var T2=(t,e)=>e===t.target||e.contains(t.target),B$=(t,e,i)=>{const n=_e(e)?e:t;return i?`${n} (${r=i,r.map(o=>o==="CMD"?Du()?"⌘":"Ctrl":o).join("+")})`:n;var r};function O$(t){let e,i;return e=new Lo({props:{class:"PinturaButtonIcon",$$slots:{default:[f4]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};536870920&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function f4(t){let e;return{c(){e=kr("g")},m(i,n){it(i,e,n),e.innerHTML=t[3]},p(i,n){8&n&&(e.innerHTML=i[3])},d(i){i&&Q(e)}}}function W$(t){let e;return{c(){e=ut("span"),v(e,"class",t[11])},m(i,n){it(i,e,n),e.innerHTML=t[0]},p(i,n){1&n&&(e.innerHTML=i[0]),2048&n&&v(e,"class",i[11])},d(i){i&&Q(e)}}}function y4(t){let e,i,n,r,o;const a=t[27].default,s=ur(a,t,t[29],null),l=s||function(c){let d,u,p,h=c[3]&&O$(c),g=c[0]&&W$(c);return{c(){d=ut("span"),h&&h.c(),u=$e(),g&&g.c(),v(d,"class",c[13])},m(m,f){it(m,d,f),h&&h.m(d,null),St(d,u),g&&g.m(d,null),p=!0},p(m,f){m[3]?h?(h.p(m,f),8&f&&M(h,1)):(h=O$(m),h.c(),M(h,1),h.m(d,u)):h&&(Ie(),F(h,1,1,()=>{h=null}),Ee()),m[0]?g?g.p(m,f):(g=W$(m),g.c(),g.m(d,null)):g&&(g.d(1),g=null),(!p||8192&f)&&v(d,"class",m[13])},i(m){p||(M(h),p=!0)},o(m){F(h),p=!1},d(m){m&&Q(d),h&&h.d(),g&&g.d()}}}(t);return{c(){e=ut("button"),l&&l.c(),v(e,"type",t[6]),v(e,"style",t[4]),e.disabled=t[5],v(e,"class",t[12]),v(e,"title",i=B$(t[0],t[1],t[2]))},m(c,d){it(c,e,d),l&&l.m(e,null),t[28](e),n=!0,r||(o=[Mt(e,"keydown",function(){Gi(t[8])&&t[8].apply(this,arguments)}),Mt(e,"click",function(){Gi(t[7])&&t[7].apply(this,arguments)}),Mt(e,"pointerdown",function(){Gi(t[14])&&t[14].apply(this,arguments)}),Zi(t[9].call(null,e))],r=!0)},p(c,[d]){t=c,s?s.p&&(!n||536870912&d)&&hr(s,a,t,t[29],n?pr(a,t[29],d,null):mr(t[29]),null):l&&l.p&&(!n||10249&d)&&l.p(t,n?d:-1),(!n||64&d)&&v(e,"type",t[6]),(!n||16&d)&&v(e,"style",t[4]),(!n||32&d)&&(e.disabled=t[5]),(!n||4096&d)&&v(e,"class",t[12]),(!n||7&d&&i!==(i=B$(t[0],t[1],t[2])))&&v(e,"title",i)},i(c){n||(M(l,c),n=!0)},o(c){F(l,c),n=!1},d(c){c&&Q(e),l&&l.d(c),t[28](null),r=!1,ji(o)}}}function b4(t,e,i){let n,r,o,a,s,l,{$$slots:c={},$$scope:d}=e,{class:u}=e,{label:p}=e,{title:h}=e,{shortcut:g}=e,{labelClass:m}=e,{innerClass:f}=e,{hideLabel:x=!1}=e,{icon:w}=e,{style:S}=e,{disabled:C}=e,{type:I="button"}=e,{onclick:E}=e,{onkeydown:B}=e,{onhold:T}=e,{action:D=()=>{}}=e,{holdThreshold:U=500}=e,{holdSpeedUpFactor:P=.5}=e,{holdSpeedMin:y=20}=e;const V=k=>{i(25,l=setTimeout(()=>{T(),V(Math.max(k*P,y))},k))};let nt;return t.$$set=k=>{"class"in k&&i(15,u=k.class),"label"in k&&i(0,p=k.label),"title"in k&&i(1,h=k.title),"shortcut"in k&&i(2,g=k.shortcut),"labelClass"in k&&i(16,m=k.labelClass),"innerClass"in k&&i(17,f=k.innerClass),"hideLabel"in k&&i(18,x=k.hideLabel),"icon"in k&&i(3,w=k.icon),"style"in k&&i(4,S=k.style),"disabled"in k&&i(5,C=k.disabled),"type"in k&&i(6,I=k.type),"onclick"in k&&i(7,E=k.onclick),"onkeydown"in k&&i(8,B=k.onkeydown),"onhold"in k&&i(19,T=k.onhold),"action"in k&&i(9,D=k.action),"holdThreshold"in k&&i(20,U=k.holdThreshold),"holdSpeedUpFactor"in k&&i(21,P=k.holdSpeedUpFactor),"holdSpeedMin"in k&&i(22,y=k.holdSpeedMin),"$$scope"in k&&i(29,d=k.$$scope)},t.$$.update=()=>{101187584&t.$$.dirty&&i(26,r=T?()=>{l&&(clearTimeout(l),i(25,l=void 0),document.documentElement.removeEventListener("pointerup",r))}:fe),68681728&t.$$.dirty&&i(14,n=T?()=>{document.documentElement.addEventListener("pointerup",r),V(U)}:fe),131072&t.$$.dirty&&i(13,o=$i(["PinturaButtonInner",f])),294912&t.$$.dirty&&i(12,a=$i(["PinturaButton",x&&"PinturaButtonIconOnly",u])),327680&t.$$.dirty&&i(11,s=$i([x?"implicit":"PinturaButtonLabel",m]))},[p,h,g,w,S,C,I,E,B,D,nt,s,a,o,n,u,m,f,x,T,U,P,y,k=>T2(k,nt),()=>nt,l,r,c,function(k){Wi[k?"unshift":"push"](()=>{nt=k,i(10,nt)})},d]}class ls extends li{constructor(e){super(),si(this,e,b4,y4,oi,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var M2=(t,e)=>{const i=t.findIndex(e);if(i>=0)return t.splice(i,1)};const x4=80;var Fs=(t,e={})=>{const{inertia:i=!1,inertiaDurationMultiplier:n=x4,shouldStartInteraction:r=()=>!0,pinch:o=!1,multiTouch:a,getEventPosition:s=dt=>at(dt.clientX,dt.clientY),observeKeys:l=!1}=e;function c(dt,wt){t.dispatchEvent(new CustomEvent(dt,{detail:wt}))}function d(){E&&E(),E=void 0}const u=[],p=dt=>dt.timeStamp===0?Date.now():dt.timeStamp,h=()=>{const dt=We(u[0].position);if(u[1]){const wt=.5*(u[1].position.x-dt.x),J=.5*(u[1].position.y-dt.y);dt.x+=wt,dt.y+=J}return dt},g=dt=>{dt.origin.x=dt.position.x,dt.origin.y=dt.position.y,dt.translation.x=0,dt.translation.y=0},m=dt=>{const wt=(J=>u.findIndex(q=>q.event.pointerId===J.pointerId))(dt);if(!(wt<0))return u[wt]},f=()=>u.length===1,x=()=>u.length===2,w=dt=>{const wt=No(dt.map(J=>J.position));return{center:wt,distance:((J,q)=>J.reduce((ft,Lt)=>ft+So(q,Lt.position),0)/J.length)(dt,wt),velocity:No(dt.map(J=>J.velocity)),translation:No(dt.map(J=>J.translation))}};let S,C,I,E,B,T,D,U,P=0,y;t.addEventListener("pointerdown",tt);const V=["Meta","Control","Alt","Shift"];function nt(dt){if(!V.includes(dt.key))return;const{metaKey:wt,ctrlKey:J,altKey:q,shiftKey:ft}=dt;N({metaKey:wt,ctrlKey:J,altKey:q,shiftKey:ft})}let k=Date.now();const N=dt=>{const wt=We(u[0].translation);let J=D;o&&x()&&(J*=So(u[0].position,u[1].position)/B,Fn(wt,u[1].translation)),Fn(wt,T);const q=Date.now();q-k<16||(k=q,c("interactionupdate",{position:h(),translation:wt,scalar:o?J:void 0,isMultiTouching:x(),...dt}))};function tt(dt){if(!x()&&!(wt=>ui(wt.button)&&wt.button!==0)(dt)&&r(dt,t)){if(d(),(wt=>{const J=p(wt),q={timeStamp:J,timeStampInitial:J,position:s(wt),origin:s(wt),velocity:an(),velocityHistory:[],velocityAverage:an(),translation:an(),interactionState:void 0,event:wt};u.push(q),q.interactionState=w(u)})(dt),l&&(window.addEventListener("keydown",nt),window.addEventListener("keyup",nt)),f())document.documentElement.addEventListener("pointermove",ct),document.documentElement.addEventListener("pointerup",ot),document.documentElement.addEventListener("pointercancel",ot),document.addEventListener("visibilitychange",Z),U=!1,D=1,T=an(),B=void 0,c("interactionstart",{origin:We(m(dt).origin)});else if(o)U=!0,B=So(u[0].position,u[1].position),T.x+=u[0].translation.x,T.y+=u[0].translation.y,g(u[0]);else if(a===!1)return u.length=0,xt(),c("interactioncancel")}}function ct(dt){dt.preventDefault(),(Lt=>{const _=m(Lt);if(!_)return;const rt=p(Lt),zt=s(Lt),Zt=Math.max(1,rt-_.timeStamp);_.velocity.x=(zt.x-_.position.x)/Zt,_.velocity.y=(zt.y-_.position.y)/Zt,_.velocityHistory.push(We(_.velocity)),_.velocityHistory=_.velocityHistory.slice(-3),_.velocityAverage=_.velocityHistory.reduce((Ot,Yt,Ut,ht)=>(Ot.x+=Yt.x/ht.length,Ot.y+=Yt.y/ht.length,Ot),an()),_.translation.x=zt.x-_.origin.x,_.translation.y=zt.y-_.origin.y,_.timeStamp=rt,_.position.x=zt.x,_.position.y=zt.y,_.event=Lt})(dt);const{metaKey:wt=!1,ctrlKey:J=!1,altKey:q=!1,shiftKey:ft=!1}=l?dt:{};N({metaKey:wt,ctrlKey:J,altKey:q,shiftKey:ft})}function ot(dt){if(!m(dt))return;const wt=h(),J=(Zt=>{const Ot=M2(u,Yt=>Yt.event.pointerId===Zt.pointerId);if(Ot)return Ot[0]})(dt);if(o&&f()){const Zt=So(u[0].position,J.position);D*=Zt/B,T.x+=u[0].translation.x+J.translation.x,T.y+=u[0].translation.y+J.translation.y,g(u[0])}let q=!1,ft=!1;if(!U&&J){const Zt=performance.now(),Ot=Zt-J.timeStampInitial;q=Po(J.translation)<64&&Ot<300,ft=!!(y&&q&&Zt-P<700&&Po(y,J.position)<128),q&&(y=We(J.position),P=Zt)}if(u.length>0)return;xt();const Lt=We(J.translation),_=We(J.velocityAverage);let rt=!1;c("interactionrelease",{isTap:q,isDoubleTap:ft,position:wt,translation:Lt,scalar:D,preventInertia:()=>rt=!0});const zt=So(_);if(rt||!i||zt<.25)return gt(Lt,{isTap:q,isDoubleTap:ft});C=We(wt),I=We(Lt),S=Kh(We(Lt),{easing:qv,duration:zt*n}),S.set({x:Lt.x+50*_.x,y:Lt.y+50*_.y}).then(()=>{E&&gt(Sa(S),{isTap:q,isDoubleTap:ft})}),E=S.subscribe(mt)}function mt(dt){dt&&c("interactionupdate",{position:at(C.x+(dt.x-I.x),C.y+(dt.y-I.y)),translation:dt,scalar:o?D:void 0})}function Z(dt){if(document.visibilityState==="visible"||!u.length)return;const wt=w(u);d(),c("interactionend",{...wt}),u.length=0,xt()}function gt(dt,wt){d(),c("interactionend",{...wt,translation:dt,scalar:o?D:void 0})}function xt(){l&&window.removeEventListener("keydown",nt),l&&window.removeEventListener("keyup",nt),document.documentElement.removeEventListener("pointermove",ct),document.documentElement.removeEventListener("pointerup",ot),document.documentElement.removeEventListener("pointercancel",ot),document.addEventListener("visibilitychange",Z)}return{destroy(){d(),t.removeEventListener("pointerdown",tt)}}},Ds=(t,e={})=>{const{direction:i,shiftMultiplier:n=10,bubbles:r=!1,preventDefault:o=!1,stopKeydownPropagation:a=!0}=e,s=i==="horizontal",l=i==="vertical",c=d=>{const{key:u}=d,p=d.shiftKey,h=/up|down/i.test(u),g=/left|right/i.test(u);if(!g&&!h||s&&h||l&&g)return;const m=p?n:1;a&&d.stopPropagation(),o&&d.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:r,detail:at((/left/i.test(u)?-1:/right/i.test(u)?1:0)*m,(/up/i.test(u)?-1:/down/i.test(u)?1:0)*m)}))};return t.addEventListener("keydown",c),{destroy(){t.removeEventListener("keydown",c)}}};function ws(t,e){return e?e*Math.sign(t)*Math.log10(1+Math.abs(t)/e):t}const _$=(t,e,i)=>{if(!e||!i)return{...t};const n=t.x+ws(e.x-t.x,i),r=t.x+t.width+ws(e.x+e.width-(t.x+t.width),i),o=t.y+ws(e.y-t.y,i);return{x:n,y:o,width:r-n,height:t.y+t.height+ws(e.y+e.height-(t.y+t.height),i)-o}},v4=(t,e,i)=>e&&i?at(t.x+ws(e.x-t.x,i),t.y+ws(e.y-t.y,i)):{...t};var P2=(t,e)=>{if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},Nu=(t,e)=>{let i=t.detail||0;const{deltaX:n,deltaY:r,wheelDelta:o,wheelDeltaX:a,wheelDeltaY:s}=t,{fixScrollDirection:l=!1}=e||{};return ui(a)&&Math.abs(a)>Math.abs(s)?i=a/-120:ui(n)&&Math.abs(n)>Math.abs(r)?i=n/20:(o||s)&&(i=(o||s)/-120),i||(i=r/20),(ka()||Fa())&&(i*=2),l&&Du()&&(i*=-1),i};function w4(t){let e,i,n,r,o,a,s;const l=t[37].default,c=ur(l,t,t[36],null);return{c(){e=ut("div"),i=ut("div"),c&&c.c(),v(i,"style",t[5]),v(e,"class",n=$i(["PinturaScrollable",t[0]])),v(e,"style",t[4]),v(e,"data-direction",t[1]),v(e,"data-state",t[6])},m(d,u){it(d,e,u),St(e,i),c&&c.m(i,null),t[39](e),o=!0,a||(s=[Mt(i,"interactionstart",t[9]),Mt(i,"interactionupdate",t[11]),Mt(i,"interactionend",t[12]),Mt(i,"interactionrelease",t[10]),Zi(Fs.call(null,i,{inertia:!0})),Mt(i,"measure",t[38]),Zi(Mr.call(null,i)),Mt(e,"wheel",t[14],{passive:!1}),Mt(e,"scroll",t[16]),Mt(e,"focusin",t[15]),Mt(e,"nudge",t[17]),Mt(e,"measure",t[13]),Zi(Mr.call(null,e,{observePosition:!0})),Zi(r=Ds.call(null,e,{direction:t[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1}))],a=!0)},p(d,u){c&&c.p&&(!o||32&u[1])&&hr(c,l,d,d[36],o?pr(l,d[36],u,null):mr(d[36]),null),(!o||32&u[0])&&v(i,"style",d[5]),(!o||1&u[0]&&n!==(n=$i(["PinturaScrollable",d[0]])))&&v(e,"class",n),(!o||16&u[0])&&v(e,"style",d[4]),(!o||2&u[0])&&v(e,"data-direction",d[1]),(!o||64&u[0])&&v(e,"data-state",d[6]),r&&Gi(r.update)&&2&u[0]&&r.update.call(null,{direction:d[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1})},i(d){o||(M(c,d),o=!0)},o(d){F(c,d),o=!1},d(d){d&&Q(e),c&&c.d(d),t[39](null),a=!1,ji(s)}}}function S4(t,e,i){let n,r,o,a,s,l,c,d,u,{$$slots:p={},$$scope:h}=e;const g=Ca();let m,f,x,w,S="idle",C=di(0);L(t,C,q=>i(35,d=q));let{class:I}=e,{scrollBlockInteractionDist:E=5}=e,{scrollStep:B=10}=e,{scrollFocusMargin:T=64}=e,{scrollDirection:D="x"}=e,{scrollAutoCancel:U=!1}=e,{elasticity:P=0}=e,{onscroll:y=fe}=e,{maskFeatherSize:V}=e,{maskFeatherStartOpacity:nt}=e,{maskFeatherEndOpacity:k}=e,{scroll:N}=e;const tt=un("fixScrollDirection");let ct;L(t,tt,q=>i(46,u=q));let ot="",mt=!0;const Z=C.subscribe(q=>{const ft=an();ft[D]=q,y(ft)}),gt=q=>Math.max(Math.min(0,q),x[n]-f[n]);let xt,dt,wt;const J=(q,ft={})=>{const{elastic:Lt=!1,animate:_=!1,preventScrollState:rt=!1}=ft;Math.abs(q-m)>E&&S==="idle"&&!w&&!rt&&i(28,S="scrolling");const zt=gt(q),Zt=Lt&&P&&!w?zt+ws(q-zt,P):zt;let Ot=!0;_?Ot=!1:mt||(Ot=!w),mt=!1,C.set(Zt,{hard:Ot}).then(Yt=>{w&&(mt=!0)})};return Uo(()=>{Z()}),t.$$set=q=>{"class"in q&&i(0,I=q.class),"scrollBlockInteractionDist"in q&&i(21,E=q.scrollBlockInteractionDist),"scrollStep"in q&&i(22,B=q.scrollStep),"scrollFocusMargin"in q&&i(23,T=q.scrollFocusMargin),"scrollDirection"in q&&i(1,D=q.scrollDirection),"scrollAutoCancel"in q&&i(24,U=q.scrollAutoCancel),"elasticity"in q&&i(25,P=q.elasticity),"onscroll"in q&&i(26,y=q.onscroll),"maskFeatherSize"in q&&i(20,V=q.maskFeatherSize),"maskFeatherStartOpacity"in q&&i(18,nt=q.maskFeatherStartOpacity),"maskFeatherEndOpacity"in q&&i(19,k=q.maskFeatherEndOpacity),"scroll"in q&&i(27,N=q.scroll),"$$scope"in q&&i(36,h=q.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&i(32,n=D==="x"?"width":"height"),2&t.$$.dirty[0]&&i(30,r=D.toUpperCase()),8&t.$$.dirty[0]&&i(34,o=ct&&getComputedStyle(ct)),8&t.$$.dirty[0]|8&t.$$.dirty[1]&&i(33,a=o&&P2(o.getPropertyValue("--scrollable-feather-size"))),537657348&t.$$.dirty[0]|22&t.$$.dirty[1]&&d!=null&&x&&a!=null&&f){const q=-1*d/a,ft=-(x[n]-f[n]-d)/a;i(18,nt=tn(1-q,0,1)),i(19,k=tn(1-ft,0,1)),i(20,V=a),i(4,ot=`--scrollable-feather-start-opacity: ${nt};--scrollable-feather-end-opacity: ${k}`)}134217736&t.$$.dirty[0]&&ct&&N!==void 0&&(ui(N)?J(N):J(N.scrollOffset,N)),536870916&t.$$.dirty[0]|2&t.$$.dirty[1]&&i(31,s=x&&f?f[n]>x[n]:void 0),268435456&t.$$.dirty[0]|1&t.$$.dirty[1]&&i(6,l=$i([S,s?"overflows":void 0])),1073741824&t.$$.dirty[0]|17&t.$$.dirty[1]&&i(5,c=s?`transform: translate${r}(${d}px)`:void 0)},[I,D,f,ct,ot,c,l,C,tt,()=>{s&&(dt=!1,xt=!0,wt=at(0,0),w=!1,i(28,S="idle"),m=Sa(C))},({detail:q})=>{s&&(w=!0,i(28,S="idle"))},({detail:q})=>{s&&(dt||xt&&(xt=!1,Po(q.translation)<.1)||(!U||D!=="x"||(ft=>{const Lt=Eo(at(ft.x-wt.x,ft.y-wt.y),Math.abs);wt=We(ft);const _=Po(Lt),rt=Lt.x-Lt.y;return!(_>1&&rt<-.5)})(q.translation)?J(m+q.translation[D],{elastic:!0}):dt=!0))},({detail:q})=>{if(!s||dt)return;const ft=m+q.translation[D],Lt=gt(ft);mt=!1,C.set(Lt).then(_=>{w&&(mt=!0)})},({detail:q})=>{i(29,x=q),g("measure",{x:q.x,y:q.y,width:q.width,height:q.height})},q=>{if(!s)return;q.preventDefault(),q.stopPropagation();const ft=q.shiftKey,Lt=Nu(q,{fixScrollDirection:u})*(ft?-1:1),_=Sa(C);J(_+Lt*B,{animate:!0})},q=>{if(!s||!w)return;let ft=q.target;q.target.classList.contains("implicit")&&(ft=ft.parentNode);const Lt=ft[D==="x"?"offsetLeft":"offsetTop"],_=Lt+ft[D==="x"?"offsetWidth":"offsetHeight"],rt=Sa(C),zt=T+V;rt+Lt<zt?J(-Lt+zt):rt+_>x[n]-zt&&J(x[n]-_-zt,{animate:!0})},()=>{i(3,ct[D==="x"?"scrollLeft":"scrollTop"]=0,ct)},({detail:q})=>{if(ct.querySelector("[data-focus-visible]"))return;const ft=-2*q[D],Lt=Sa(C);J(Lt+ft*B,{animate:!0,preventScrollState:!0})},nt,k,V,E,B,T,U,P,y,N,S,x,r,s,n,a,o,d,h,p,q=>i(2,f=q.detail),function(q){Wi[q?"unshift":"push"](()=>{ct=q,i(3,ct)})}]}class Ta extends li{constructor(e){super(),si(this,e,S4,w4,oi,{class:0,scrollBlockInteractionDist:21,scrollStep:22,scrollFocusMargin:23,scrollDirection:1,scrollAutoCancel:24,elasticity:25,onscroll:26,maskFeatherSize:20,maskFeatherStartOpacity:18,maskFeatherEndOpacity:19,scroll:27},null,[-1,-1])}}function k4(t){let e,i,n,r,o;return{c(){e=ut("span"),v(e,"class","PinturaStatusMessage")},m(a,s){it(a,e,s),e.innerHTML=t[0],n=!0,r||(o=[Mt(e,"measure",function(){Gi(t[1])&&t[1].apply(this,arguments)}),Zi(Mr.call(null,e))],r=!0)},p(a,[s]){t=a,(!n||1&s)&&(e.innerHTML=t[0])},i(a){n||(Hl(()=>{i||(i=n$(e,t[4],{duration:t[2]},!0)),i.run(1)}),n=!0)},o(a){i||(i=n$(e,t[4],{duration:t[2]},!1)),i.run(0),n=!1},d(a){a&&Q(e),a&&i&&i.end(),r=!1,ji(o)}}}function C4(t,e,i){let n,r,{text:o}=e,{onmeasure:a=fe}=e;const s=un("isAnimated");return L(t,s,l=>i(5,r=l)),t.$$set=l=>{"text"in l&&i(0,o=l.text),"onmeasure"in l&&i(1,a=l.onmeasure)},t.$$.update=()=>{32&t.$$.dirty&&i(2,n=r?500:0)},[o,a,n,s,function(l,{duration:c}){return{duration:c,tick:d=>{l.style.opacity=d}}},r]}class R2 extends li{constructor(e){super(),si(this,e,C4,k4,oi,{text:0,onmeasure:1})}}function T4(t){let e,i,n,r,o,a,s,l,c;return{c(){e=ut("span"),i=kr("svg"),n=kr("g"),r=kr("circle"),o=kr("circle"),a=$e(),s=ut("span"),l=$n(t[3]),v(r,"class","PinturaProgressIndicatorBar"),v(r,"r","8.5"),v(r,"cx","10"),v(r,"cy","10"),v(r,"stroke-linecap","round"),v(r,"opacity",".25"),v(o,"class","PinturaProgressIndicatorFill"),v(o,"r","8.5"),v(o,"stroke-dasharray",t[2]),v(o,"cx","10"),v(o,"cy","10"),v(o,"transform","rotate(-90) translate(-20)"),v(n,"fill","none"),v(n,"stroke","currentColor"),v(n,"stroke-width","2.5"),v(n,"stroke-linecap","round"),v(n,"opacity",t[1]),v(i,"width","20"),v(i,"height","20"),v(i,"viewBox","0 0 20 20"),v(i,"xmlns","http://www.w3.org/2000/svg"),v(i,"aria-hidden","true"),v(i,"focusable","false"),v(s,"class","implicit"),v(e,"class","PinturaProgressIndicator"),v(e,"data-status",t[0]),v(e,"style",c="opacity:"+t[4])},m(d,u){it(d,e,u),St(e,i),St(i,n),St(n,r),St(n,o),St(e,a),St(e,s),St(s,l)},p(d,[u]){4&u&&v(o,"stroke-dasharray",d[2]),2&u&&v(n,"opacity",d[1]),8&u&&Ln(l,d[3]),1&u&&v(e,"data-status",d[0]),16&u&&c!==(c="opacity:"+d[4])&&v(e,"style",c)},i:Je,o:Je,d(d){d&&Q(e)}}}function M4(t,e,i){let n,r,o,a,s,l,c,d;const u=Ca();let{progress:p}=e,{min:h=0}=e,{max:g=100}=e,{labelBusy:m="Busy"}=e,{opacity:f}=e;const x=un("isAnimated");L(t,x,B=>i(14,s=B));const w=di(f,{precision:.01});L(t,w,B=>i(4,d=B));const S=di(0,{precision:.01}),C=di(0,{precision:.01});L(t,C,B=>i(15,l=B));const I=Bi([S],B=>tn(B,h,g));L(t,I,B=>i(16,c=B));const E=I.subscribe(B=>{p===1&&Math.round(B)>=100&&u("complete")});return Ls(()=>{C.set(1,{hard:!s})}),Uo(()=>{E()}),t.$$set=B=>{"progress"in B&&i(9,p=B.progress),"min"in B&&i(10,h=B.min),"max"in B&&i(11,g=B.max),"labelBusy"in B&&i(12,m=B.labelBusy),"opacity"in B&&i(13,f=B.opacity)},t.$$.update=()=>{24576&t.$$.dirty&&ui(f)&&w.set(f,{hard:!s}),16896&t.$$.dirty&&p&&p!==1/0&&S.set(100*p,{hard:!s}),70144&t.$$.dirty&&i(3,n=p===1/0?m:Math.round(c)+"%"),66048&t.$$.dirty&&i(2,r=p===1/0?"26.5 53":c/100*53+" 53"),32768&t.$$.dirty&&i(1,o=l),512&t.$$.dirty&&i(0,a=p===1/0?"busy":"loading")},[a,o,r,n,d,x,w,C,I,p,h,g,m,f,s,l,c]}class I2 extends li{constructor(e){super(),si(this,e,M4,T4,oi,{progress:9,min:10,max:11,labelBusy:12,opacity:13})}}function P4(t){let e,i,n;const r=t[5].default,o=ur(r,t,t[4],null);return{c(){e=ut("span"),o&&o.c(),v(e,"class",i="PinturaStatusAside "+t[0]),v(e,"style",t[1])},m(a,s){it(a,e,s),o&&o.m(e,null),n=!0},p(a,[s]){o&&o.p&&(!n||16&s)&&hr(o,r,a,a[4],n?pr(r,a[4],s,null):mr(a[4]),null),(!n||1&s&&i!==(i="PinturaStatusAside "+a[0]))&&v(e,"class",i),(!n||2&s)&&v(e,"style",a[1])},i(a){n||(M(o,a),n=!0)},o(a){F(o,a),n=!1},d(a){a&&Q(e),o&&o.d(a)}}}function R4(t,e,i){let n,{$$slots:r={},$$scope:o}=e,{offset:a=0}=e,{opacity:s=0}=e,{class:l}=e;return t.$$set=c=>{"offset"in c&&i(2,a=c.offset),"opacity"in c&&i(3,s=c.opacity),"class"in c&&i(0,l=c.class),"$$scope"in c&&i(4,o=c.$$scope)},t.$$.update=()=>{12&t.$$.dirty&&i(1,n=`transform:translateX(${a}px);opacity:${s}`)},[l,n,a,s,o,r]}class E2 extends li{constructor(e){super(),si(this,e,R4,P4,oi,{offset:2,opacity:3,class:0})}}const{document:V$}=e2;function I4(t){let e,i,n,r;return{c(){e=$e(),i=ut("button"),v(i,"class","PinturaImageButton"),v(i,"type","button"),v(i,"title",t[1]),i.disabled=t[2]},m(o,a){it(o,e,a),it(o,i,a),i.innerHTML=t[0],t[11](i),n||(r=[Mt(V$.body,"load",t[5],!0),Mt(V$.body,"error",t[6],!0),Mt(i,"pointerdown",t[4])],n=!0)},p(o,[a]){1&a&&(i.innerHTML=o[0]),2&a&&v(i,"title",o[1]),4&a&&(i.disabled=o[2])},i:Je,o:Je,d(o){o&&Q(e),o&&Q(i),t[11](null),n=!1,ji(r)}}}function E4(t,e,i){let n,{html:r}=e,{title:o}=e,{onclick:a}=e,{disabled:s=!1}=e,{ongrab:l=fe}=e,{ondrag:c=fe}=e,{ondrop:d=fe}=e;const u=f=>Po(p,at(f.pageX,f.pageY))<256;let p;const h=f=>{document.documentElement.removeEventListener("pointermove",g),document.documentElement.removeEventListener("pointerup",h);const x=at(f.pageX,f.pageY);if(Po(p,x)<32)return a(f);u(f)||d(f)},g=f=>{u(f)||c(f)},m=f=>n&&n.contains(f)&&f.nodeName==="IMG";return t.$$set=f=>{"html"in f&&i(0,r=f.html),"title"in f&&i(1,o=f.title),"onclick"in f&&i(7,a=f.onclick),"disabled"in f&&i(2,s=f.disabled),"ongrab"in f&&i(8,l=f.ongrab),"ondrag"in f&&i(9,c=f.ondrag),"ondrop"in f&&i(10,d=f.ondrop)},t.$$.update=()=>{8&t.$$.dirty&&n&&n.querySelector("img")&&i(3,n.dataset.loader=!0,n)},[r,o,s,n,f=>{p=at(f.pageX,f.pageY),l(f),document.documentElement.addEventListener("pointermove",g),document.documentElement.addEventListener("pointerup",h)},({target:f})=>{m(f)&&i(3,n.dataset.load=!0,n)},({target:f})=>{m(f)&&i(3,n.dataset.error=!0,n)},a,l,c,d,function(f){Wi[f?"unshift":"push"](()=>{n=f,i(3,n)})}]}class A2 extends li{constructor(e){super(),si(this,e,E4,I4,oi,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function N$(t,e,i){const n=t.slice();return n[14]=e[i],n}function H$(t,e){let i,n,r,o,a,s,l;function c(){return e[10](e[14])}function d(...h){return e[11](e[14],...h)}function u(...h){return e[12](e[14],...h)}function p(...h){return e[13](e[14],...h)}return n=new A2({props:{onclick:c,ongrab:d,ondrag:u,ondrop:p,disabled:e[1]||e[14].disabled,title:e[14].title,html:e[14].thumb}}),{key:t,first:null,c(){i=ut("li"),It(n.$$.fragment),r=$e(),v(i,"style",e[6]),this.first=i},m(h,g){it(h,i,g),Pt(n,i,null),St(i,r),a=!0,s||(l=Zi(o=e[8].call(null,i,e[14])),s=!0)},p(h,g){e=h;const m={};5&g&&(m.onclick=c),9&g&&(m.ongrab=d),17&g&&(m.ondrag=u),33&g&&(m.ondrop=p),3&g&&(m.disabled=e[1]||e[14].disabled),1&g&&(m.title=e[14].title),1&g&&(m.html=e[14].thumb),n.$set(m),(!a||64&g)&&v(i,"style",e[6]),o&&Gi(o.update)&&1&g&&o.update.call(null,e[14])},i(h){a||(M(n.$$.fragment,h),a=!0)},o(h){F(n.$$.fragment,h),a=!1},d(h){h&&Q(i),Rt(n),s=!1,l()}}}function A4(t){let e,i,n=[],r=new Map,o=t[0];const a=s=>s[14].id;for(let s=0;s<o.length;s+=1){let l=N$(t,o,s),c=a(l);r.set(c,n[s]=H$(c,l))}return{c(){e=ut("ul");for(let s=0;s<n.length;s+=1)n[s].c();v(e,"class","PinturaImageButtonList")},m(s,l){it(s,e,l);for(let c=0;c<n.length;c+=1)n[c].m(e,null);i=!0},p(s,[l]){127&l&&(o=s[0],Ie(),n=Oa(n,l,a,1,s,o,r,e,zs,H$,null,N$),Ee())},i(s){if(!i){for(let l=0;l<o.length;l+=1)M(n[l]);i=!0}},o(s){for(let l=0;l<n.length;l+=1)F(n[l]);i=!1},d(s){s&&Q(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function L4(t,e,i){let n,r,{items:o}=e,{disabled:a}=e,{onclickitem:s}=e,{ongrabitem:l}=e,{ondragitem:c}=e,{ondropitem:d}=e;const u=di(0,{stiffness:.25,damping:.9});return L(t,u,p=>i(9,r=p)),Ls(()=>u.set(1)),t.$$set=p=>{"items"in p&&i(0,o=p.items),"disabled"in p&&i(1,a=p.disabled),"onclickitem"in p&&i(2,s=p.onclickitem),"ongrabitem"in p&&i(3,l=p.ongrabitem),"ondragitem"in p&&i(4,c=p.ondragitem),"ondropitem"in p&&i(5,d=p.ondropitem)},t.$$.update=()=>{512&t.$$.dirty&&i(6,n="opacity:"+r)},[o,a,s,l,c,d,n,u,(p,h)=>h.mount&&h.mount(p.firstChild,h),r,p=>s(p.id),(p,h)=>l&&l(p.id,h),(p,h)=>c&&c(p.id,h),(p,h)=>d&&d(p.id,h)]}class t0 extends li{constructor(e){super(),si(this,e,L4,A4,oi,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var Ec=()=>Cr()&&window.devicePixelRatio||1;let Dp=null;var Hc=t=>(Dp===null&&(Dp=Ec()===1?Math.round:e=>e),Dp(t)),dh=(t,e={})=>{if(t){if(e.preventScroll&&Fa()){const i=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=i)}t.focus(e)}},L2=t=>/date|email|number|search|text|url/.test(t.type),jc=t=>(e=>/textarea/i.test(e.nodeName))(t)||L2(t)||t.isContentEditable;const z4=t=>({}),j$=t=>({}),F4=t=>({}),U$=t=>({});function D4(t){let e,i;const n=[t[7]];let r={$$slots:{default:[O4]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ls({props:r}),t[46](e),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=128&a[0]?Tr(n,[Br(o[7])]):{};524288&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){t[46](null),Rt(e,o)}}}function B4(t){let e,i;const n=[t[7]];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ls({props:r}),t[45](e),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=128&a[0]?Tr(n,[Br(o[7])]):{};e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){t[45](null),Rt(e,o)}}}function O4(t){let e;const i=t[44].label,n=ur(i,t,t[50],U$);return{c(){n&&n.c()},m(r,o){n&&n.m(r,o),e=!0},p(r,o){n&&n.p&&(!e||524288&o[1])&&hr(n,i,r,r[50],e?pr(i,r[50],o,F4):mr(r[50]),U$)},i(r){e||(M(n,r),e=!0)},o(r){F(n,r),e=!1},d(r){n&&n.d(r)}}}function G$(t){let e,i,n,r,o,a,s;const l=t[44].details,c=ur(l,t,t[50],j$);return{c(){e=ut("div"),c&&c.c(),i=$e(),n=ut("span"),v(n,"class","PinturaPanelTip"),v(n,"style",t[10]),v(e,"class",r=$i(["PinturaPanel","pintura-editor-panel",t[2]])),v(e,"tabindex","-1"),v(e,"style",t[11])},m(d,u){it(d,e,u),c&&c.m(e,null),St(e,i),St(e,n),t[47](e),o=!0,a||(s=[Mt(e,"close",t[48]),Mt(e,"keydown",t[18]),Mt(e,"measure",t[49]),Zi(Mr.call(null,e))],a=!0)},p(d,u){c&&c.p&&(!o||524288&u[1])&&hr(c,l,d,d[50],o?pr(l,d[50],u,z4):mr(d[50]),j$),(!o||1024&u[0])&&v(n,"style",d[10]),(!o||4&u[0]&&r!==(r=$i(["PinturaPanel","pintura-editor-panel",d[2]])))&&v(e,"class",r),(!o||2048&u[0])&&v(e,"style",d[11])},i(d){o||(M(c,d),o=!0)},o(d){F(c,d),o=!1},d(d){d&&Q(e),c&&c.d(d),t[47](null),a=!1,ji(s)}}}function W4(t){let e,i,n,r,o,a,s,l,c;const d=[B4,D4],u=[];function p(g,m){return g[1]?0:1}i=p(t),n=u[i]=d[i](t);let h=t[6]&&G$(t);return{c(){e=$e(),n.c(),r=$e(),h&&h.c(),o=$e(),a=Tn()},m(g,m){it(g,e,m),u[i].m(g,m),it(g,r,m),h&&h.m(g,m),it(g,o,m),it(g,a,m),s=!0,l||(c=[Mt(document.body,"pointerdown",function(){Gi(t[9])&&t[9].apply(this,arguments)}),Mt(document.body,"pointerup",function(){Gi(t[8])&&t[8].apply(this,arguments)})],l=!0)},p(g,m){let f=i;i=p(t=g),i===f?u[i].p(t,m):(Ie(),F(u[f],1,1,()=>{u[f]=null}),Ee(),n=u[i],n?n.p(t,m):(n=u[i]=d[i](t),n.c()),M(n,1),n.m(r.parentNode,r)),t[6]?h?(h.p(t,m),64&m[0]&&M(h,1)):(h=G$(t),h.c(),M(h,1),h.m(o.parentNode,o)):h&&(Ie(),F(h,1,1,()=>{h=null}),Ee())},i(g){s||(M(n),M(h),M(!1),s=!0)},o(g){F(n),F(h),F(!1),s=!1},d(g){g&&Q(e),u[i].d(g),g&&Q(r),h&&h.d(g),g&&Q(o),g&&Q(a),l=!1,ji(c)}}}function _4(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,w,S,C,I,{$$slots:E={},$$scope:B}=e,{buttonClass:T}=e,{buttonLabel:D}=e,{buttonLabelClass:U}=e,{buttonHideLabel:P}=e,{buttonIcon:y}=e,{buttonTitle:V}=e,{panelClass:nt}=e,{isActive:k=!1}=e,{onshow:N=({panel:ht})=>dh(ht,{preventScroll:!0})}=e,{onhide:tt=fe}=e;const ct=un("isAnimated");L(t,ct,ht=>i(43,I=ht));const ot=un("rootPortal");L(t,ot,ht=>i(38,f=ht));const mt=un("rootRect");let Z,gt,xt;L(t,mt,ht=>i(41,S=ht));const dt=()=>i(26,xt=n&&n.getBoundingClientRect());let wt=an(),J=di(0);L(t,J,ht=>i(40,w=ht));let q=an();const ft=ge({x:0,y:0});L(t,ft,ht=>i(39,x=ht));const Lt=di(-5,{stiffness:.1,damping:.35,precision:.001});L(t,Lt,ht=>i(42,C=ht));let _=!0;const rt=ht=>T2(ht,f)||gt.isEventTarget(ht);let zt,Zt,Ot=!1;const Yt=ht=>{jc(ht.target)||(k||dt(),i(31,Zt=ht),i(0,k=!k))},Ut=ht=>{/down/i.test(ht.key)&&(i(0,k=!0),i(31,Zt=ht))};return Uo(()=>{if(!f||!zt)return;const ht=zt;t2().then(()=>{ht.parentNode&&ht.remove()})}),t.$$set=ht=>{"buttonClass"in ht&&i(19,T=ht.buttonClass),"buttonLabel"in ht&&i(1,D=ht.buttonLabel),"buttonLabelClass"in ht&&i(20,U=ht.buttonLabelClass),"buttonHideLabel"in ht&&i(21,P=ht.buttonHideLabel),"buttonIcon"in ht&&i(22,y=ht.buttonIcon),"buttonTitle"in ht&&i(23,V=ht.buttonTitle),"panelClass"in ht&&i(2,nt=ht.panelClass),"isActive"in ht&&i(0,k=ht.isActive),"onshow"in ht&&i(24,N=ht.onshow),"onhide"in ht&&i(25,tt=ht.onhide),"$$scope"in ht&&i(50,B=ht.$$scope)},t.$$.update=()=>{if(16&t.$$.dirty[0]&&(n=gt&&gt.getElement()),1073741825&t.$$.dirty[0]&&i(8,g=k?ht=>{Ot&&(i(30,Ot=!1),rt(ht)||i(0,k=!1))}:void 0),1&t.$$.dirty[0]|4096&t.$$.dirty[1]&&J.set(k?1:0,{hard:I===!1}),1&t.$$.dirty[0]|4096&t.$$.dirty[1]&&Lt.set(k?0:-5,{hard:I===!1}),2048&t.$$.dirty[1]&&i(34,r=1-C/-5),1&t.$$.dirty[0]|1024&t.$$.dirty[1]&&S&&k&&dt(),67108873&t.$$.dirty[0]|1024&t.$$.dirty[1]&&S&&Z&&xt&&k){i(29,_=!0);let ht=xt.x-S.x+.5*xt.width-.5*Z.width,G=xt.y-S.y+xt.height;const kt=12,ne=12,ue=S.width-12,Nt=S.height-12,xe=ht,Ht=G,ze=xe+Z.width,W=Ht+Z.height;xe<kt&&(i(28,q.x=xe-kt,q),ht=kt),ze>ue&&(i(28,q.x=ze-ue,q),ht=ue-Z.width),W>Nt?(i(27,wt.y=-1,wt),ne<G-Z.height-xt.height?(i(28,q.y=0,q),G-=Z.height+xt.height):(i(28,q.y=G-(W-Nt),q),G-=W-Nt-12,i(29,_=!1))):i(27,wt.y=1,wt),vt(ft,x=Eo(at(ht,G),Hc),x)}512&t.$$.dirty[1]&&i(6,o=w>0),512&t.$$.dirty[1]&&i(37,a=w<1),134217728&t.$$.dirty[0]|2304&t.$$.dirty[1]&&i(36,s=`translateX(${Math.round(x.x)+12*wt.x}px) translateY(${Math.round(x.y)+12*wt.y+wt.y*C}px)`),1024&t.$$.dirty[1]&&i(35,l=`--panel-max-height:${S.height-24}px`),624&t.$$.dirty[1]&&i(11,c=a?`opacity: ${w}; pointer-events: ${w<1?"none":"all"}; transform: ${s};${l}`:`transform: ${s};${l}`),8&t.$$.dirty[1]&&i(32,d=.5+.5*r),8&t.$$.dirty[1]&&i(33,u=r),939524104&t.$$.dirty[0]|262&t.$$.dirty[1]&&i(10,p=x&&Z&&`opacity:${_?u:0};transform:scaleX(${d})rotate(45deg);top:${wt.y<0?q.y+Z.height:0}px;left:${q.x+.5*Z.width}px`),1&t.$$.dirty[0]&&i(9,h=k?ht=>{rt(ht)||i(30,Ot=!0)}:void 0),96&t.$$.dirty[0]|128&t.$$.dirty[1]&&o&&f&&zt&&zt.parentNode!==f&&f.append(zt),1&t.$$.dirty[0]&&(k||i(31,Zt=void 0)),16777313&t.$$.dirty[0]|1&t.$$.dirty[1]&&k&&o&&zt&&N({e:Zt,panel:zt}),33554497&t.$$.dirty[0]&&o&&!k&&tt(),16252930&t.$$.dirty[0]&&i(7,m={label:D,icon:y,class:$i(["PinturaPanelButton",T]),onkeydown:Ut,onclick:Yt,hideLabel:P,labelClass:U,title:V})},[k,D,nt,Z,gt,zt,o,m,g,h,p,c,ct,ot,mt,J,ft,Lt,ht=>{/esc/i.test(ht.key)&&(i(0,k=!1),n.focus())},T,U,P,y,V,N,tt,xt,wt,q,_,Ot,Zt,d,u,r,l,s,a,f,x,w,S,C,I,E,function(ht){Wi[ht?"unshift":"push"](()=>{gt=ht,i(4,gt)})},function(ht){Wi[ht?"unshift":"push"](()=>{gt=ht,i(4,gt)})},function(ht){Wi[ht?"unshift":"push"](()=>{zt=ht,i(5,zt)})},ht=>{ht.stopPropagation(),i(0,k=!1)},ht=>i(3,Z=Ba(ht.detail)),B]}class Hu extends li{constructor(e){super(),si(this,e,_4,W4,oi,{buttonClass:19,buttonLabel:1,buttonLabelClass:20,buttonHideLabel:21,buttonIcon:22,buttonTitle:23,panelClass:2,isActive:0,onshow:24,onhide:25},null,[-1,-1])}}var V4={Up:38,Down:40,Left:37,Right:39};function N4(t){let e,i,n,r,o,a,s,l;const c=t[15].default,d=ur(c,t,t[14],null);return{c(){e=ut("li"),i=ut("input"),n=$e(),r=ut("label"),d&&d.c(),v(i,"type","radio"),v(i,"class","implicit"),v(i,"id",t[7]),v(i,"name",t[0]),i.value=t[3],i.disabled=t[6],i.hidden=t[5],i.checked=t[4],v(r,"for",t[7]),v(r,"title",t[2]),v(e,"class",o=$i(["PinturaRadioGroupOption",t[1]])),v(e,"data-hidden",t[5]),v(e,"data-disabled",t[6]),v(e,"data-selected",t[4])},m(u,p){it(u,e,p),St(e,i),St(e,n),St(e,r),d&&d.m(r,null),a=!0,s||(l=[Mt(i,"change",ev(t[16])),Mt(i,"keydown",t[9]),Mt(i,"click",t[10])],s=!0)},p(u,[p]){(!a||128&p)&&v(i,"id",u[7]),(!a||1&p)&&v(i,"name",u[0]),(!a||8&p)&&(i.value=u[3]),(!a||64&p)&&(i.disabled=u[6]),(!a||32&p)&&(i.hidden=u[5]),(!a||16&p)&&(i.checked=u[4]),d&&d.p&&(!a||16384&p)&&hr(d,c,u,u[14],a?pr(c,u[14],p,null):mr(u[14]),null),(!a||128&p)&&v(r,"for",u[7]),(!a||4&p)&&v(r,"title",u[2]),(!a||2&p&&o!==(o=$i(["PinturaRadioGroupOption",u[1]])))&&v(e,"class",o),(!a||32&p)&&v(e,"data-hidden",u[5]),(!a||64&p)&&v(e,"data-disabled",u[6]),(!a||16&p)&&v(e,"data-selected",u[4])},i(u){a||(M(d,u),a=!0)},o(u){F(d,u),a=!1},d(u){u&&Q(e),d&&d.d(u),s=!1,ji(l)}}}function H4(t,e,i){let n,r,{$$slots:o={},$$scope:a}=e,{name:s}=e,{class:l}=e,{label:c}=e,{id:d}=e,{value:u}=e,{checked:p}=e,{onkeydown:h}=e,{onclick:g}=e,{hidden:m=!1}=e,{disabled:f=!1}=e;const x=Object.values(V4),w=un("keysPressed");return L(t,w,S=>i(17,r=S)),t.$$set=S=>{"name"in S&&i(0,s=S.name),"class"in S&&i(1,l=S.class),"label"in S&&i(2,c=S.label),"id"in S&&i(11,d=S.id),"value"in S&&i(3,u=S.value),"checked"in S&&i(4,p=S.checked),"onkeydown"in S&&i(12,h=S.onkeydown),"onclick"in S&&i(13,g=S.onclick),"hidden"in S&&i(5,m=S.hidden),"disabled"in S&&i(6,f=S.disabled),"$$scope"in S&&i(14,a=S.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&i(7,n=`${s}-${d}`)},[s,l,c,u,p,m,f,n,w,S=>{h(S)},S=>{r.some(C=>x.includes(C))||g(S)},d,h,g,a,o,function(S){Xr.call(this,t,S)}]}class z2 extends li{constructor(e){super(),si(this,e,H4,N4,oi,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var Ts=(t=[])=>t.reduce((e,i)=>(An(i)?An(i[1]):i.options)?e.concat(An(i)?i[1]:i.options):(e.push(i),e),[]);const ru=(t,e,i)=>{let n;return An(t)?n={id:e,value:t[0],label:t[1],...t[2]||{}}:(n=t,n.id=n.id!=null?n.id:e),i?i(n):n};var dr=(t,e,i)=>sn(t)?t(e,i):t;const F2=(t,e)=>t.map(([i,n,r])=>{if(An(n))return[dr(i,e),F2(n,e)];{const o=[i,dr(n,e)];if(r){let a={...r};r.icon&&(a.icon=dr(r.icon,e)),o.push(a)}return o}});var D2=(t,e)=>F2(t,e),B2=(t,e)=>Array.isArray(t)&&Array.isArray(e)?ss(t,e):t===e;function Z$(t,e,i){const n=t.slice();return n[27]=e[i],n}const j4=t=>({option:1024&t[0]}),X$=t=>({option:t[27]});function Y$(t,e,i){const n=t.slice();return n[27]=e[i],n}const U4=t=>({option:1024&t[0]}),q$=t=>({option:t[27]}),G4=t=>({option:1024&t[0]}),K$=t=>({option:t[27]});function J$(t){let e,i,n,r,o,a=[],s=new Map,l=t[1]&&Q$(t),c=t[10];const d=u=>u[27].id;for(let u=0;u<c.length;u+=1){let p=Z$(t,c,u),h=d(p);s.set(h,a[u]=og(h,p))}return{c(){e=ut("fieldset"),l&&l.c(),i=$e(),n=ut("ul");for(let u=0;u<a.length;u+=1)a[u].c();v(n,"class","PinturaRadioGroupOptions"),v(e,"class",r=$i(["PinturaRadioGroup",t[3]])),v(e,"data-layout",t[5]),v(e,"title",t[7])},m(u,p){it(u,e,p),l&&l.m(e,null),St(e,i),St(e,n);for(let h=0;h<a.length;h+=1)a[h].m(n,null);o=!0},p(u,p){u[1]?l?l.p(u,p):(l=Q$(u),l.c(),l.m(e,i)):l&&(l.d(1),l=null),8419153&p[0]&&(c=u[10],Ie(),a=Oa(a,p,d,1,u,c,s,n,zs,og,null,Z$),Ee()),(!o||8&p[0]&&r!==(r=$i(["PinturaRadioGroup",u[3]])))&&v(e,"class",r),(!o||32&p[0])&&v(e,"data-layout",u[5]),(!o||128&p[0])&&v(e,"title",u[7])},i(u){if(!o){for(let p=0;p<c.length;p+=1)M(a[p]);o=!0}},o(u){for(let p=0;p<a.length;p+=1)F(a[p]);o=!1},d(u){u&&Q(e),l&&l.d();for(let p=0;p<a.length;p+=1)a[p].d()}}}function Q$(t){let e,i,n;return{c(){e=ut("legend"),i=$n(t[1]),v(e,"class",n=t[2]&&"implicit")},m(r,o){it(r,e,o),St(e,i)},p(r,o){2&o[0]&&Ln(i,r[1]),4&o[0]&&n!==(n=r[2]&&"implicit")&&v(e,"class",n)},d(r){r&&Q(e)}}}function Z4(t){let e,i;return e=new z2({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[q4]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.name=n[4]),1024&r[0]&&(o.label=n[27].label),1024&r[0]&&(o.id=n[27].id),1024&r[0]&&(o.value=n[27].value),1024&r[0]&&(o.disabled=n[27].disabled),1024&r[0]&&(o.hidden=n[27].hidden),256&r[0]&&(o.class=n[8]),1025&r[0]&&(o.checked=n[12](n[27])===n[0]),1024&r[0]&&(o.onkeydown=n[13](n[27])),1024&r[0]&&(o.onclick=n[14](n[27])),8389696&r[0]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function X4(t){let e,i,n,r,o,a,s=[],l=new Map;const c=t[22].group,d=ur(c,t,t[23],K$),u=d||function(g){let m,f,x=g[27].label+"";return{c(){m=ut("span"),f=$n(x),v(m,"class","PinturaRadioGroupOptionGroupLabel")},m(w,S){it(w,m,S),St(m,f)},p(w,S){1024&S[0]&&x!==(x=w[27].label+"")&&Ln(f,x)},d(w){w&&Q(m)}}}(t);let p=t[27].options;const h=g=>g[27].id;for(let g=0;g<p.length;g+=1){let m=Y$(t,p,g),f=h(m);l.set(f,s[g]=rg(f,m))}return{c(){e=ut("li"),u&&u.c(),i=$e(),n=ut("ul");for(let g=0;g<s.length;g+=1)s[g].c();r=$e(),v(n,"class","PinturaRadioGroupOptions"),v(e,"class",o=$i(["PinturaRadioGroupOptionGroup",t[9]]))},m(g,m){it(g,e,m),u&&u.m(e,null),St(e,i),St(e,n);for(let f=0;f<s.length;f+=1)s[f].m(n,null);St(e,r),a=!0},p(g,m){d?d.p&&(!a||8389632&m[0])&&hr(d,c,g,g[23],a?pr(c,g[23],m,G4):mr(g[23]),K$):u&&u.p&&(!a||1024&m[0])&&u.p(g,a?m:[-1,-1]),8418641&m[0]&&(p=g[27].options,Ie(),s=Oa(s,m,h,1,g,p,l,n,zs,rg,null,Y$),Ee()),(!a||512&m[0]&&o!==(o=$i(["PinturaRadioGroupOptionGroup",g[9]])))&&v(e,"class",o)},i(g){if(!a){M(u,g);for(let m=0;m<p.length;m+=1)M(s[m]);a=!0}},o(g){F(u,g);for(let m=0;m<s.length;m+=1)F(s[m]);a=!1},d(g){g&&Q(e),u&&u.d(g);for(let m=0;m<s.length;m+=1)s[m].d()}}}function tg(t){let e,i;return e=new Lo({props:{$$slots:{default:[Y4]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};8389632&r[0]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function Y4(t){let e,i=t[27].icon+"";return{c(){e=kr("g")},m(n,r){it(n,e,r),e.innerHTML=i},p(n,r){1024&r[0]&&i!==(i=n[27].icon+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function eg(t){let e,i,n=t[27].label+"";return{c(){e=ut("span"),i=$n(n),v(e,"class",t[6])},m(r,o){it(r,e,o),St(e,i)},p(r,o){1024&o[0]&&n!==(n=r[27].label+"")&&Ln(i,n),64&o[0]&&v(e,"class",r[6])},d(r){r&&Q(e)}}}function q4(t){let e;const i=t[22].option,n=ur(i,t,t[23],X$),r=n||function(o){let a,s,l,c=o[27].icon&&tg(o),d=!o[27].hideLabel&&eg(o);return{c(){c&&c.c(),a=$e(),d&&d.c(),s=$e()},m(u,p){c&&c.m(u,p),it(u,a,p),d&&d.m(u,p),it(u,s,p),l=!0},p(u,p){u[27].icon?c?(c.p(u,p),1024&p[0]&&M(c,1)):(c=tg(u),c.c(),M(c,1),c.m(a.parentNode,a)):c&&(Ie(),F(c,1,1,()=>{c=null}),Ee()),u[27].hideLabel?d&&(d.d(1),d=null):d?d.p(u,p):(d=eg(u),d.c(),d.m(s.parentNode,s))},i(u){l||(M(c),l=!0)},o(u){F(c),l=!1},d(u){c&&c.d(u),u&&Q(a),d&&d.d(u),u&&Q(s)}}}(t);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),e=!0},p(o,a){n?n.p&&(!e||8389632&a[0])&&hr(n,i,o,o[23],e?pr(i,o[23],a,j4):mr(o[23]),X$):r&&r.p&&(!e||1088&a[0])&&r.p(o,e?a:[-1,-1])},i(o){e||(M(r,o),e=!0)},o(o){F(r,o),e=!1},d(o){r&&r.d(o)}}}function ig(t){let e,i;return e=new Lo({props:{$$slots:{default:[K4]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};8389632&r[0]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function K4(t){let e,i=t[27].icon+"";return{c(){e=kr("g")},m(n,r){it(n,e,r),e.innerHTML=i},p(n,r){1024&r[0]&&i!==(i=n[27].icon+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function ng(t){let e,i,n=t[27].label+"";return{c(){e=ut("span"),i=$n(n),v(e,"class",t[6])},m(r,o){it(r,e,o),St(e,i)},p(r,o){1024&o[0]&&n!==(n=r[27].label+"")&&Ln(i,n),64&o[0]&&v(e,"class",r[6])},d(r){r&&Q(e)}}}function J4(t){let e;const i=t[22].option,n=ur(i,t,t[23],q$),r=n||function(o){let a,s,l,c=o[27].icon&&ig(o),d=!o[27].hideLabel&&ng(o);return{c(){c&&c.c(),a=$e(),d&&d.c(),s=$e()},m(u,p){c&&c.m(u,p),it(u,a,p),d&&d.m(u,p),it(u,s,p),l=!0},p(u,p){u[27].icon?c?(c.p(u,p),1024&p[0]&&M(c,1)):(c=ig(u),c.c(),M(c,1),c.m(a.parentNode,a)):c&&(Ie(),F(c,1,1,()=>{c=null}),Ee()),u[27].hideLabel?d&&(d.d(1),d=null):d?d.p(u,p):(d=ng(u),d.c(),d.m(s.parentNode,s))},i(u){l||(M(c),l=!0)},o(u){F(c),l=!1},d(u){c&&c.d(u),u&&Q(a),d&&d.d(u),u&&Q(s)}}}(t);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),e=!0},p(o,a){n?n.p&&(!e||8389632&a[0])&&hr(n,i,o,o[23],e?pr(i,o[23],a,U4):mr(o[23]),q$):r&&r.p&&(!e||1088&a[0])&&r.p(o,e?a:[-1,-1])},i(o){e||(M(r,o),e=!0)},o(o){F(r,o),e=!1},d(o){r&&r.d(o)}}}function rg(t,e){let i,n,r;return n=new z2({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[J4]},$$scope:{ctx:e}}}),{key:t,first:null,c(){i=Tn(),It(n.$$.fragment),this.first=i},m(o,a){it(o,i,a),Pt(n,o,a),r=!0},p(o,a){e=o;const s={};16&a[0]&&(s.name=e[4]),1024&a[0]&&(s.label=e[27].label),1024&a[0]&&(s.id=e[27].id),1024&a[0]&&(s.value=e[27].value),1024&a[0]&&(s.disabled=e[27].disabled),1024&a[0]&&(s.hidden=e[27].hidden),256&a[0]&&(s.class=e[8]),1025&a[0]&&(s.checked=e[12](e[27])===e[0]),1024&a[0]&&(s.onkeydown=e[13](e[27])),1024&a[0]&&(s.onclick=e[14](e[27])),8389696&a[0]&&(s.$$scope={dirty:a,ctx:e}),n.$set(s)},i(o){r||(M(n.$$.fragment,o),r=!0)},o(o){F(n.$$.fragment,o),r=!1},d(o){o&&Q(i),Rt(n,o)}}}function og(t,e){let i,n,r,o,a;const s=[X4,Z4],l=[];function c(d,u){return d[27].options?0:1}return n=c(e),r=l[n]=s[n](e),{key:t,first:null,c(){i=Tn(),r.c(),o=Tn(),this.first=i},m(d,u){it(d,i,u),l[n].m(d,u),it(d,o,u),a=!0},p(d,u){let p=n;n=c(e=d),n===p?l[n].p(e,u):(Ie(),F(l[p],1,1,()=>{l[p]=null}),Ee(),r=l[n],r?r.p(e,u):(r=l[n]=s[n](e),r.c()),M(r,1),r.m(o.parentNode,o))},i(d){a||(M(r),a=!0)},o(d){F(r),a=!1},d(d){d&&Q(i),l[n].d(d),d&&Q(o)}}}function Q4(t){let e,i,n,r=t[11].length&&J$(t);return{c(){r&&r.c(),e=$e(),i=Tn()},m(o,a){r&&r.m(o,a),it(o,e,a),it(o,i,a),n=!0},p(o,a){o[11].length?r?(r.p(o,a),2048&a[0]&&M(r,1)):(r=J$(o),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee())},i(o){n||(M(r),M(!1),n=!0)},o(o){F(r),F(!1),n=!1},d(o){r&&r.d(o),o&&Q(e),o&&Q(i)}}}function t5(t,e,i){let n,r,o,{$$slots:a={},$$scope:s}=e;const l=Ca();let{label:c}=e,{hideLabel:d=!0}=e,{class:u}=e,{name:p="radio-group-"+aa()}=e,{selectedIndex:h=-1}=e,{options:g=[]}=e,{onchange:m}=e,{layout:f}=e,{optionMapper:x}=e,{optionFilter:w}=e,{value:S}=e,{optionLabelClass:C}=e,{title:I}=e,{locale:E}=e,{optionClass:B}=e,{optionGroupClass:T}=e;const D=P=>o.findIndex(y=>y.id===P.id),U=(P,y)=>{i(0,h=D(P));const V={index:h,...P};((nt,...k)=>{nt&&nt(...k)})(m,V,y),l("change",V)};return t.$$set=P=>{"label"in P&&i(1,c=P.label),"hideLabel"in P&&i(2,d=P.hideLabel),"class"in P&&i(3,u=P.class),"name"in P&&i(4,p=P.name),"selectedIndex"in P&&i(0,h=P.selectedIndex),"options"in P&&i(15,g=P.options),"onchange"in P&&i(16,m=P.onchange),"layout"in P&&i(5,f=P.layout),"optionMapper"in P&&i(17,x=P.optionMapper),"optionFilter"in P&&i(18,w=P.optionFilter),"value"in P&&i(19,S=P.value),"optionLabelClass"in P&&i(6,C=P.optionLabelClass),"title"in P&&i(7,I=P.title),"locale"in P&&i(20,E=P.locale),"optionClass"in P&&i(8,B=P.optionClass),"optionGroupClass"in P&&i(9,T=P.optionGroupClass),"$$scope"in P&&i(23,s=P.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&i(11,n=D2(w?g.filter(w):g,E)),133120&t.$$.dirty[0]&&i(10,r=((P=[],y)=>{let V=0;return P.map(nt=>(V++,An(nt)?An(nt[1])?{id:V,label:nt[0],options:nt[1].map(k=>ru(k,++V,y))}:ru(nt,V,y):nt.options?{id:nt.id||V,label:nt.label,options:nt.options.map(k=>ru(k,++V,y))}:ru(nt,V,y)))})(n,x)),1024&t.$$.dirty[0]&&i(21,o=Ts(r)),2654209&t.$$.dirty[0]&&h<0&&(i(0,h=o.findIndex(P=>B2(P.value,S))),h<0&&i(0,h=(P=>P.findIndex(y=>y[0]===void 0))(g)))},[h,c,d,u,p,f,C,I,B,T,r,n,D,P=>y=>{var V;V=y.key,/enter| /i.test(V)&&U(P,y)},P=>y=>{U(P,y)},g,m,x,w,S,E,o,a,s]}class cs extends li{constructor(e){super(),si(this,e,t5,Q4,oi,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function ag(t){let e,i,n,r,o,a,s,l,c,d;return{c(){e=ut("div"),i=ut("button"),n=$n("▲"),o=$e(),a=ut("button"),s=$n("▼"),v(i,"type","button"),v(i,"tabindex","-1"),v(i,"aria-label",r="increase "+t[7]),v(a,"type","button"),v(a,"tabindex","-1"),v(a,"aria-label",l="decrease "+t[7]),v(e,"class","PinturaInputSpinners")},m(u,p){it(u,e,p),St(e,i),St(i,n),St(e,o),St(e,a),St(a,s),c||(d=[Mt(i,"click",t[17]),Mt(a,"click",t[18])],c=!0)},p(u,p){128&p&&r!==(r="increase "+u[7])&&v(i,"aria-label",r),128&p&&l!==(l="decrease "+u[7])&&v(a,"aria-label",l)},d(u){u&&Q(e),c=!1,ji(d)}}}function e5(t){let e,i,n,r,o,a,s=t[1]==="number"&&t[9]&&ag(t);return{c(){e=ut("div"),i=ut("input"),r=$e(),s&&s.c(),v(i,"class","PinturaInputField"),v(i,"title",t[7]),v(i,"type",t[1]),v(i,"min",t[4]),v(i,"max",t[5]),v(i,"step",t[6]),v(i,"inputmode",t[3]),i.value=n=t[14]?t[13]:t[0],v(i,"style",t[11]),v(i,"placeholder",t[8]),v(i,"maxlength",t[12]),i.disabled=t[2],v(i,"spellcheck","false"),v(i,"autocorrect","off"),v(i,"autocapitalize","off"),v(e,"class","PinturaInput")},m(l,c){it(l,e,c),St(e,i),t[27](i),St(e,r),s&&s.m(e,null),o||(a=[Mt(i,"input",t[16]),Mt(i,"blur",function(){Gi(t[14]&&t[15])&&(t[14]&&t[15]).apply(this,arguments)}),Mt(i,"keydown",t[19]),Mt(i,"keyup",t[20])],o=!0)},p(l,[c]){t=l,128&c&&v(i,"title",t[7]),2&c&&v(i,"type",t[1]),16&c&&v(i,"min",t[4]),32&c&&v(i,"max",t[5]),64&c&&v(i,"step",t[6]),8&c&&v(i,"inputmode",t[3]),24577&c&&n!==(n=t[14]?t[13]:t[0])&&i.value!==n&&(i.value=n),2048&c&&v(i,"style",t[11]),256&c&&v(i,"placeholder",t[8]),4096&c&&v(i,"maxlength",t[12]),4&c&&(i.disabled=t[2]),t[1]==="number"&&t[9]?s?s.p(t,c):(s=ag(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Je,o:Je,d(l){l&&Q(e),t[27](null),s&&s.d(),o=!1,ji(a)}}}function i5(t,e,i){let n,r,o,a,s,l,c,{value:d}=e,{type:u="text"}=e,{disabled:p=!1}=e,{inputmode:h}=e,{min:g}=e,{max:m}=e,{step:f}=e,{onchange:x=fe}=e,{onkeydown:w=fe}=e,{title:S}=e,{stepMultiplier:C=10}=e,{placeholder:I}=e,{enableSpinButtons:E=!0}=e,{enableStopPropagation:B=!1}=e;const T=()=>{let y=l.value;return u==="number"&&(y=h==="numeric"?parseInt(y,10):parseFloat(y),!ui(y)||Number.isNaN(y)?y=g||0:n&&(y=tn(y,g,m))),y};let D=d;const U=()=>{const y=tn(T()+(c?f*C:f),g,m);y!==d&&(i(25,D=y),i(0,d=y),x(d))},P=()=>{const y=tn(T()-(c?f*C:f),g,m);y!==d&&(i(25,D=y),i(0,d=y),x(d))};return t.$$set=y=>{"value"in y&&i(0,d=y.value),"type"in y&&i(1,u=y.type),"disabled"in y&&i(2,p=y.disabled),"inputmode"in y&&i(3,h=y.inputmode),"min"in y&&i(4,g=y.min),"max"in y&&i(5,m=y.max),"step"in y&&i(6,f=y.step),"onchange"in y&&i(21,x=y.onchange),"onkeydown"in y&&i(22,w=y.onkeydown),"title"in y&&i(7,S=y.title),"stepMultiplier"in y&&i(23,C=y.stepMultiplier),"placeholder"in y&&i(8,I=y.placeholder),"enableSpinButtons"in y&&i(9,E=y.enableSpinButtons),"enableStopPropagation"in y&&i(24,B=y.enableStopPropagation)},t.$$.update=()=>{48&t.$$.dirty&&i(14,n=ui(g)&&ui(m)),33555457&t.$$.dirty&&i(13,r=l===document.activeElement?D:d),32&t.$$.dirty&&i(26,o=m?(m+"").length:void 0),67108872&t.$$.dirty&&i(12,a=h==="numeric"&&o?o:void 0),67108864&t.$$.dirty&&i(11,s=o?`min-width:${o}em`:void 0)},[d,u,p,h,g,m,f,S,I,E,l,s,a,r,n,()=>{i(25,D=T()),x(d)},()=>{i(25,D=l.value),x(T())},U,P,y=>{c=y.shiftKey,w(y);const{key:V}=y;B&&y.stopPropagation(),/up|down/i.test(V)&&(/up/i.test(V)&&U(),/down/i.test(V)&&P(),y.preventDefault(),y.stopPropagation())},y=>{const{key:V}=y;/up|down/i.test(V)&&(y.preventDefault(),y.stopPropagation())},x,w,C,B,D,o,function(y){Wi[y?"unshift":"push"](()=>{l=y,i(10,l)})}]}class O2 extends li{constructor(e){super(),si(this,e,i5,e5,oi,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:21,onkeydown:22,title:7,stepMultiplier:23,placeholder:8,enableSpinButtons:9,enableStopPropagation:24})}}const n5=t=>({}),sg=t=>({});function r5(t){let e,i,n,r,o=(t[2]||t[21])+"",a=t[6]&&lg(t);return{c(){a&&a.c(),e=$e(),i=ut("span"),v(i,"class",n=$i(["PinturaButtonLabel",t[3],t[5]&&"implicit"]))},m(s,l){a&&a.m(s,l),it(s,e,l),it(s,i,l),i.innerHTML=o,r=!0},p(s,l){s[6]?a?(a.p(s,l),64&l[0]&&M(a,1)):(a=lg(s),a.c(),M(a,1),a.m(e.parentNode,e)):a&&(Ie(),F(a,1,1,()=>{a=null}),Ee()),(!r||2097156&l[0])&&o!==(o=(s[2]||s[21])+"")&&(i.innerHTML=o),(!r||40&l[0]&&n!==(n=$i(["PinturaButtonLabel",s[3],s[5]&&"implicit"])))&&v(i,"class",n)},i(s){r||(M(a),r=!0)},o(s){F(a),r=!1},d(s){a&&a.d(s),s&&Q(e),s&&Q(i)}}}function o5(t){let e,i;return e=new O2({props:{value:t[10],onchange:t[17],enableStopPropagation:!0,type:"number",inputmode:"numeric",min:t[8].reduce(pg,1/0),max:t[8].reduce(hg,-1/0),enableSpinButtons:!1}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};1024&r[0]&&(o.value=n[10]),131072&r[0]&&(o.onchange=n[17]),256&r[0]&&(o.min=n[8].reduce(pg,1/0)),256&r[0]&&(o.max=n[8].reduce(hg,-1/0)),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function lg(t){let e,i;return e=new Lo({props:{class:"PinturaButtonIcon",$$slots:{default:[a5]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};536870976&r[0]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function a5(t){let e;return{c(){e=kr("g")},m(i,n){it(i,e,n),e.innerHTML=t[6]},p(i,n){64&n[0]&&(e.innerHTML=i[6])},d(i){i&&Q(e)}}}function s5(t){let e,i,n,r,o,a;const s=[o5,r5],l=[];function c(d,u){return d[18]?0:1}return i=c(t),n=l[i]=s[i](t),{c(){e=ut("span"),n.c(),v(e,"slot","label"),v(e,"title",r=dr(t[1],t[16])),v(e,"class",o=$i(["PinturaButtonInner",t[18]&&"PinturaComboBox",t[4]]))},m(d,u){it(d,e,u),l[i].m(e,null),a=!0},p(d,u){let p=i;i=c(d),i===p?l[i].p(d,u):(Ie(),F(l[p],1,1,()=>{l[p]=null}),Ee(),n=l[i],n?n.p(d,u):(n=l[i]=s[i](d),n.c()),M(n,1),n.m(e,null)),(!a||65538&u[0]&&r!==(r=dr(d[1],d[16])))&&v(e,"title",r),(!a||262160&u[0]&&o!==(o=$i(["PinturaButtonInner",d[18]&&"PinturaComboBox",d[4]])))&&v(e,"class",o)},i(d){a||(M(n),a=!0)},o(d){F(n),a=!1},d(d){d&&Q(e),l[i].d()}}}function l5(t){let e,i,n=t[31].label+"";return{c(){e=ut("span"),i=$n(n),v(e,"slot","group")},m(r,o){it(r,e,o),St(e,i)},p(r,o){1&o[1]&&n!==(n=r[31].label+"")&&Ln(i,n)},d(r){r&&Q(e)}}}function cg(t){let e,i;return e=new Lo({props:{style:sn(t[14])?t[14](t[31].value):t[14],$$slots:{default:[c5]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16384&r[0]|1&r[1]&&(o.style=sn(n[14])?n[14](n[31].value):n[14]),536870912&r[0]|1&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function c5(t){let e,i=t[31].icon+"";return{c(){e=kr("g")},m(n,r){it(n,e,r),e.innerHTML=i},p(n,r){1&r[1]&&i!==(i=n[31].icon+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function dg(t){let e,i,n,r,o,a=t[31].label+"",s=t[31].sublabel&&ug(t);return{c(){e=ut("span"),i=new Ou(!1),n=$e(),s&&s.c(),i.a=n,v(e,"style",r=sn(t[15])?t[15](t[31].value):t[15]),v(e,"class",o=$i(["PinturaDropdownOptionLabel",t[11]]))},m(l,c){it(l,e,c),i.m(a,e),St(e,n),s&&s.m(e,null)},p(l,c){1&c[1]&&a!==(a=l[31].label+"")&&i.p(a),l[31].sublabel?s?s.p(l,c):(s=ug(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null),32768&c[0]|1&c[1]&&r!==(r=sn(l[15])?l[15](l[31].value):l[15])&&v(e,"style",r),2048&c[0]&&o!==(o=$i(["PinturaDropdownOptionLabel",l[11]]))&&v(e,"class",o)},d(l){l&&Q(e),s&&s.d()}}}function ug(t){let e,i=t[31].sublabel+"";return{c(){e=ut("span"),v(e,"class","PinturaDropdownOptionSublabel")},m(n,r){it(n,e,r),e.innerHTML=i},p(n,r){1&r[1]&&i!==(i=n[31].sublabel+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function d5(t){let e,i,n,r=t[31].icon&&cg(t),o=!t[31].hideLabel&&dg(t);return{c(){e=ut("span"),r&&r.c(),i=$e(),o&&o.c(),v(e,"slot","option")},m(a,s){it(a,e,s),r&&r.m(e,null),St(e,i),o&&o.m(e,null),n=!0},p(a,s){a[31].icon?r?(r.p(a,s),1&s[1]&&M(r,1)):(r=cg(a),r.c(),M(r,1),r.m(e,i)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee()),a[31].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=dg(a),o.c(),o.m(e,null))},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){a&&Q(e),r&&r.d(),o&&o.d()}}}function u5(t){let e,i,n,r,o,a;const s=t[27].controls,l=ur(s,t,t[29],sg);return n=new cs({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[10],selectedIndex:t[9],optionFilter:t[12],optionMapper:t[13],optionLabelClass:$i(["PinturaDropdownOptionLabel",t[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[19],onchange:t[22],$$slots:{option:[d5,({option:c})=>({31:c}),({option:c})=>[0,c?1:0]],group:[l5,({option:c})=>({31:c}),({option:c})=>[0,c?1:0]]},$$scope:{ctx:t}}}),{c(){e=ut("div"),l&&l.c(),i=$e(),It(n.$$.fragment),v(e,"slot","details"),v(e,"class","PinturaOptionsListWrapper")},m(c,d){it(c,e,d),l&&l.m(e,null),St(e,i),Pt(n,e,null),r=!0,o||(a=Mt(e,"keydown",t[24]),o=!0)},p(c,d){l&&l.p&&(!r||536870912&d[0])&&hr(l,s,c,c[29],r?pr(s,c[29],d,n5):mr(c[29]),sg);const u={};128&d[0]&&(u.name=c[7]),1024&d[0]&&(u.value=c[10]),512&d[0]&&(u.selectedIndex=c[9]),4096&d[0]&&(u.optionFilter=c[12]),8192&d[0]&&(u.optionMapper=c[13]),2048&d[0]&&(u.optionLabelClass=$i(["PinturaDropdownOptionLabel",c[11]])),524288&d[0]&&(u.options=c[19]),536922112&d[0]|1&d[1]&&(u.$$scope={dirty:d,ctx:c}),n.$set(u)},i(c){r||(M(l,c),M(n.$$.fragment,c),r=!0)},o(c){F(l,c),F(n.$$.fragment,c),r=!1},d(c){c&&Q(e),l&&l.d(c),Rt(n),o=!1,a()}}}function p5(t){let e,i,n;function r(a){t[28](a)}let o={onshow:t[23],buttonClass:$i(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[u5],label:[s5]},$$scope:{ctx:t}};return t[20]!==void 0&&(o.isActive=t[20]),e=new Hu({props:o}),Wi.push(()=>ko(e,"isActive",r)),{c(){It(e.$$.fragment)},m(a,s){Pt(e,a,s),n=!0},p(a,s){const l={};33&s[0]&&(l.buttonClass=$i(["PinturaDropdownButton",a[0],a[5]&&"PinturaDropdownIconOnly"])),540016638&s[0]&&(l.$$scope={dirty:s,ctx:a}),!i&&1048576&s[0]&&(i=!0,l.isActive=a[20],Ao(()=>i=!1)),e.$set(l)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){Rt(e,a)}}}const pg=(t,[e])=>e<t?e:t,hg=(t,[e])=>e>t?e:t;function h5(t,e,i){let n,r,{$$slots:o={},$$scope:a}=e,{class:s}=e,{title:l}=e,{label:c}=e,{labelClass:d}=e,{innerClass:u}=e,{hideLabel:p=!1}=e,{icon:h}=e,{name:g}=e,{options:m=[]}=e,{selectedIndex:f=-1}=e,{value:x}=e,{optionLabelClass:w}=e,{optionFilter:S}=e,{optionMapper:C}=e,{optionIconStyle:I}=e,{optionLabelStyle:E}=e,{locale:B}=e,{onchange:T=fe}=e,{onload:D=fe}=e,{ondestroy:U=fe}=e,{enableInput:P=!1}=e,y;return Ls(()=>D({options:m})),Uo(()=>U({options:m})),t.$$set=V=>{"class"in V&&i(0,s=V.class),"title"in V&&i(1,l=V.title),"label"in V&&i(2,c=V.label),"labelClass"in V&&i(3,d=V.labelClass),"innerClass"in V&&i(4,u=V.innerClass),"hideLabel"in V&&i(5,p=V.hideLabel),"icon"in V&&i(6,h=V.icon),"name"in V&&i(7,g=V.name),"options"in V&&i(8,m=V.options),"selectedIndex"in V&&i(9,f=V.selectedIndex),"value"in V&&i(10,x=V.value),"optionLabelClass"in V&&i(11,w=V.optionLabelClass),"optionFilter"in V&&i(12,S=V.optionFilter),"optionMapper"in V&&i(13,C=V.optionMapper),"optionIconStyle"in V&&i(14,I=V.optionIconStyle),"optionLabelStyle"in V&&i(15,E=V.optionLabelStyle),"locale"in V&&i(16,B=V.locale),"onchange"in V&&i(17,T=V.onchange),"onload"in V&&i(25,D=V.onload),"ondestroy"in V&&i(26,U=V.ondestroy),"enableInput"in V&&i(18,P=V.enableInput),"$$scope"in V&&i(29,a=V.$$scope)},t.$$.update=()=>{65792&t.$$.dirty[0]&&i(19,n=B?D2(m,B):m),525312&t.$$.dirty[0]&&i(21,r=n.reduce((V,nt)=>{if(V)return V;const k=Array.isArray(nt)?nt:[nt,nt],[N,tt]=k;return B2(N,x)?tt:void 0},void 0)||(V=>{const nt=V.find(k=>k[0]===void 0);if(nt)return nt[1]})(n)||x)},[s,l,c,d,u,p,h,g,m,f,x,w,S,C,I,E,B,T,P,n,y,r,V=>{i(21,r=V.value),T(V),i(20,y=!1)},({e:V,panel:nt})=>{if(V&&V.key&&/up|down/i.test(V.key))return dh(nt.querySelector("input:not([disabled])"));dh(nt.querySelector("fieldset"))},V=>{/tab/i.test(V.key)&&V.preventDefault()},D,U,o,function(V){y=V,i(20,y)},a]}class e0 extends li{constructor(e){super(),si(this,e,h5,p5,oi,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:16,onchange:17,onload:25,ondestroy:26,enableInput:18},null,[-1,-1])}}function m5(t){let e;return{c(){e=ut("div"),v(e,"slot","details")},m(i,n){it(i,e,n),t[14](e)},p:Je,d(i){i&&Q(e),t[14](null)}}}function $5(t){let e,i,n;function r(a){t[15](a)}let o={buttonLabel:t[0],buttonClass:t[1],buttonIcon:t[2],buttonHideLabel:t[3],buttonTitle:t[4],buttonLabelClass:t[5],onshow:t[6],onhide:t[7],$$slots:{details:[m5]},$$scope:{ctx:t}};return t[9]!==void 0&&(o.isActive=t[9]),e=new Hu({props:o}),Wi.push(()=>ko(e,"isActive",r)),{c(){It(e.$$.fragment)},m(a,s){Pt(e,a,s),n=!0},p(a,[s]){const l={};1&s&&(l.buttonLabel=a[0]),2&s&&(l.buttonClass=a[1]),4&s&&(l.buttonIcon=a[2]),8&s&&(l.buttonHideLabel=a[3]),16&s&&(l.buttonTitle=a[4]),32&s&&(l.buttonLabelClass=a[5]),64&s&&(l.onshow=a[6]),128&s&&(l.onhide=a[7]),65792&s&&(l.$$scope={dirty:s,ctx:a}),!i&&512&s&&(i=!0,l.isActive=a[9],Ao(()=>i=!1)),e.$set(l)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){Rt(e,a)}}}function g5(t,e,i){let{buttonLabel:n}=e,{buttonClass:r}=e,{buttonIcon:o}=e,{buttonHideLabel:a}=e,{buttonTitle:s}=e,{buttonLabelClass:l}=e,{root:c}=e,{ondestroy:d=fe}=e,{onshow:u=fe}=e,{onhide:p=fe}=e,h,g=!1;return Uo(d),t.$$set=m=>{"buttonLabel"in m&&i(0,n=m.buttonLabel),"buttonClass"in m&&i(1,r=m.buttonClass),"buttonIcon"in m&&i(2,o=m.buttonIcon),"buttonHideLabel"in m&&i(3,a=m.buttonHideLabel),"buttonTitle"in m&&i(4,s=m.buttonTitle),"buttonLabelClass"in m&&i(5,l=m.buttonLabelClass),"root"in m&&i(10,c=m.root),"ondestroy"in m&&i(11,d=m.ondestroy),"onshow"in m&&i(6,u=m.onshow),"onhide"in m&&i(7,p=m.onhide)},t.$$.update=()=>{1280&t.$$.dirty&&h&&c&&h.firstChild!==c&&(h.hasChildNodes()?h.replaceChild(c,h.firstChild):h.append(c))},[n,r,o,a,s,l,u,p,h,g,c,d,()=>i(9,g=!1),()=>i(9,g=!0),function(m){Wi[m?"unshift":"push"](()=>{h=m,i(8,h)})},function(m){g=m,i(9,g)}]}class f5 extends li{constructor(e){super(),si(this,e,g5,$5,oi,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}}var Ac=(t,e,i)=>(t-e)/(i-e);const y5=t=>({}),mg=t=>({});function $g(t){let e,i,n,r,o,a,s,l;return i=new Lo({props:{$$slots:{default:[b5]},$$scope:{ctx:t}}}),o=new Lo({props:{$$slots:{default:[x5]},$$scope:{ctx:t}}}),{c(){e=ut("button"),It(i.$$.fragment),n=$e(),r=ut("button"),It(o.$$.fragment),v(e,"type","button"),v(e,"aria-label","Increase"),v(r,"type","button"),v(r,"aria-label","Decrease")},m(c,d){it(c,e,d),Pt(i,e,null),it(c,n,d),it(c,r,d),Pt(o,r,null),a=!0,s||(l=[Mt(e,"pointerdown",t[20](1)),Mt(r,"pointerdown",t[20](-1))],s=!0)},p(c,d){const u={};128&d[1]&&(u.$$scope={dirty:d,ctx:c}),i.$set(u);const p={};128&d[1]&&(p.$$scope={dirty:d,ctx:c}),o.$set(p)},i(c){a||(M(i.$$.fragment,c),M(o.$$.fragment,c),a=!0)},o(c){F(i.$$.fragment,c),F(o.$$.fragment,c),a=!1},d(c){c&&Q(e),Rt(i),c&&Q(n),c&&Q(r),Rt(o),s=!1,ji(l)}}}function b5(t){let e;return{c(){e=kr("path"),v(e,"d","M8 12 h8 M12 8 v8")},m(i,n){it(i,e,n)},p:Je,d(i){i&&Q(e)}}}function x5(t){let e;return{c(){e=kr("path"),v(e,"d","M9 12 h6")},m(i,n){it(i,e,n)},p:Je,d(i){i&&Q(e)}}}function v5(t){let e,i,n,r,o,a,s,l,c,d,u,p,h,g,m,f,x;const w=t[36].default,S=ur(w,t,t[38],null),C=t[36].knob,I=ur(C,t,t[38],mg);let E=t[9]&&$g(t);return{c(){e=ut("div"),i=ut("div"),n=ut("input"),o=$e(),a=ut("div"),S&&S.c(),l=$e(),c=ut("div"),d=ut("div"),I&&I.c(),h=$e(),E&&E.c(),v(n,"type","range"),v(n,"id",t[3]),v(n,"min",t[0]),v(n,"max",t[1]),v(n,"step",t[2]),n.value=t[14],v(n,"style",r=t[10]?"pointer-events:none":""),v(a,"class",s=$i(["PinturaSliderTrack",t[5]])),v(a,"style",t[4]),v(d,"class",u=$i(["PinturaSliderKnob",t[7]])),v(d,"style",t[6]),v(c,"class","PinturaSliderKnobController"),v(c,"style",t[17]),v(i,"class","PinturaSliderControl"),v(i,"style",p="--slider-position:"+Math.round(t[15])),v(e,"class",g=$i(["PinturaSlider",t[12]])),v(e,"data-direction",t[8])},m(B,T){it(B,e,T),St(e,i),St(i,n),t[37](n),St(i,o),St(i,a),S&&S.m(a,null),St(i,l),St(i,c),St(c,d),I&&I.m(d,null),St(e,h),E&&E.m(e,null),m=!0,f||(x=[Mt(n,"input",t[18]),Mt(n,"nudge",t[19]),Zi(Ds.call(null,n)),Mt(i,"pointerdown",function(){Gi(t[11]&&t[13])&&(t[11]&&t[13]).apply(this,arguments)})],f=!0)},p(B,T){t=B,(!m||8&T[0])&&v(n,"id",t[3]),(!m||1&T[0])&&v(n,"min",t[0]),(!m||2&T[0])&&v(n,"max",t[1]),(!m||4&T[0])&&v(n,"step",t[2]),(!m||16384&T[0])&&(n.value=t[14]),(!m||1024&T[0]&&r!==(r=t[10]?"pointer-events:none":""))&&v(n,"style",r),S&&S.p&&(!m||128&T[1])&&hr(S,w,t,t[38],m?pr(w,t[38],T,null):mr(t[38]),null),(!m||32&T[0]&&s!==(s=$i(["PinturaSliderTrack",t[5]])))&&v(a,"class",s),(!m||16&T[0])&&v(a,"style",t[4]),I&&I.p&&(!m||128&T[1])&&hr(I,C,t,t[38],m?pr(C,t[38],T,y5):mr(t[38]),mg),(!m||128&T[0]&&u!==(u=$i(["PinturaSliderKnob",t[7]])))&&v(d,"class",u),(!m||64&T[0])&&v(d,"style",t[6]),(!m||131072&T[0])&&v(c,"style",t[17]),(!m||32768&T[0]&&p!==(p="--slider-position:"+Math.round(t[15])))&&v(i,"style",p),t[9]?E?(E.p(t,T),512&T[0]&&M(E,1)):(E=$g(t),E.c(),M(E,1),E.m(e,null)):E&&(Ie(),F(E,1,1,()=>{E=null}),Ee()),(!m||4096&T[0]&&g!==(g=$i(["PinturaSlider",t[12]])))&&v(e,"class",g),(!m||256&T[0])&&v(e,"data-direction",t[8])},i(B){m||(M(S,B),M(I,B),M(E),m=!0)},o(B){F(S,B),F(I,B),F(E),m=!1},d(B){B&&Q(e),t[37](null),S&&S.d(B),I&&I.d(B),E&&E.d(),f=!1,ji(x)}}}function w5(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,{$$slots:w={},$$scope:S}=e,{min:C=0}=e,{max:I=100}=e,{step:E=1}=e,{id:B}=e,{value:T=0}=e,{valueMin:D}=e,{valueMax:U}=e,{trackStyle:P}=e,{trackClass:y}=e,{knobStyle:V}=e,{knobClass:nt}=e,{ongrab:k=fe}=e,{onchange:N=fe}=e,{onrelease:tt=fe}=e,{onexceed:ct=fe}=e,{direction:ot="x"}=e,{getValue:mt=qi}=e,{setValue:Z=qi}=e,{enableSpinButtons:gt=!0}=e,{enableForceUseKnob:xt=!1}=e,{enableStopPropagation:dt=!0}=e,{enablePointerdownListener:wt=!0}=e,{maxInteractionDistance:J=6}=e,{class:q}=e;const ft=G=>Z(((kt,ne)=>(ne=1/ne,Math.round(kt*ne)/ne))(tn(G,C,I),E),T),Lt=(G,kt,ne={})=>{const{grabbed:ue=!1,released:Nt=!1}=ne,xe=ft(C+G/kt*r),Ht=D||C,ze=U||I;i(21,T=_e(xe)?xe:tn(xe,Ht,ze)),x!==xe&&(x=xe,!_e(xe)&&(xe<Ht||xe>ze)&&ct(T,xe),T!==f&&(f=T,ue&&k(T),N(T),Nt&&tt(T)))};let _;const rt=G=>{const kt=G[d]-m;Lt(g+kt,h)},zt=G=>{h=void 0,document.documentElement.removeEventListener("pointermove",rt),document.documentElement.removeEventListener("pointerup",zt),N(T),tt(T)},Zt=()=>{i(21,T=ft(n+Yt*E)),N(T)};let Ot,Yt=1,Ut=!1;const ht=G=>{clearTimeout(Ot),Ut||Zt(),tt(T),document.removeEventListener("pointerup",ht)};return t.$$set=G=>{"min"in G&&i(0,C=G.min),"max"in G&&i(1,I=G.max),"step"in G&&i(2,E=G.step),"id"in G&&i(3,B=G.id),"value"in G&&i(21,T=G.value),"valueMin"in G&&i(22,D=G.valueMin),"valueMax"in G&&i(23,U=G.valueMax),"trackStyle"in G&&i(4,P=G.trackStyle),"trackClass"in G&&i(5,y=G.trackClass),"knobStyle"in G&&i(6,V=G.knobStyle),"knobClass"in G&&i(7,nt=G.knobClass),"ongrab"in G&&i(24,k=G.ongrab),"onchange"in G&&i(25,N=G.onchange),"onrelease"in G&&i(26,tt=G.onrelease),"onexceed"in G&&i(27,ct=G.onexceed),"direction"in G&&i(8,ot=G.direction),"getValue"in G&&i(28,mt=G.getValue),"setValue"in G&&i(29,Z=G.setValue),"enableSpinButtons"in G&&i(9,gt=G.enableSpinButtons),"enableForceUseKnob"in G&&i(10,xt=G.enableForceUseKnob),"enableStopPropagation"in G&&i(30,dt=G.enableStopPropagation),"enablePointerdownListener"in G&&i(11,wt=G.enablePointerdownListener),"maxInteractionDistance"in G&&i(31,J=G.maxInteractionDistance),"class"in G&&i(12,q=G.class),"$$scope"in G&&i(38,S=G.$$scope)},t.$$.update=()=>{270532608&t.$$.dirty[0]&&i(14,n=T!==void 0?mt(T):0),3&t.$$.dirty[0]&&(r=I-C),16387&t.$$.dirty[0]&&i(33,o=Ac(n,C,I)),4&t.$$.dirty[1]&&i(15,a=100*o),256&t.$$.dirty[0]&&i(34,s=ot.toUpperCase()),256&t.$$.dirty[0]&&i(35,l=ot==="x"?"Width":"Height"),16&t.$$.dirty[1]&&(c="offset"+l),t.$$.dirty[1],8&t.$$.dirty[1]&&(d="page"+s),32768&t.$$.dirty[0]|8&t.$$.dirty[1]&&i(17,u=`transform: translate${s}(${a}%)`)},[C,I,E,B,P,y,V,nt,ot,gt,xt,wt,q,G=>{let kt=!1;dt&&G.stopPropagation(),clearTimeout(_);const ne=p.getBoundingClientRect();if(h=p[c],m=G[d],g=m-ne[ot],xt){if(Math.abs(g-o*h)>J)return;kt=!0,G.stopPropagation()}return document.activeElement!==p&&p.focus(),Lt(g,h,{grabbed:!0}),document.documentElement.addEventListener("pointermove",rt),document.documentElement.addEventListener("pointerup",zt),kt},n,a,p,u,G=>{h||(i(21,T=Z(parseFloat(G.target.value))),T!==f&&(f=T,N(T)))},G=>{const kt=p[c];Lt(n/r*kt+G.detail[ot],kt),clearTimeout(_),_=setTimeout(()=>{tt(T)},250)},G=>kt=>{clearTimeout(_),Yt=G,Ut=!1,Ot=setInterval(()=>{Ut=!0,Zt()},100),document.addEventListener("pointercancel",ht),document.addEventListener("pointerup",ht)},T,D,U,k,N,tt,ct,mt,Z,dt,J,G=>{const kt=p.getBoundingClientRect(),ne=G[d]-kt[ot],ue=p[c];return Math.abs(ne-o*ue)},o,s,l,w,function(G){Wi[G?"unshift":"push"](()=>{p=G,i(16,p)})},S]}class i0 extends li{constructor(e){super(),si(this,e,w5,v5,oi,{min:0,max:1,step:2,id:3,value:21,valueMin:22,valueMax:23,trackStyle:4,trackClass:5,knobStyle:6,knobClass:7,ongrab:24,onchange:25,onrelease:26,onexceed:27,direction:8,getValue:28,setValue:29,enableSpinButtons:9,enableForceUseKnob:10,enableStopPropagation:30,enablePointerdownListener:11,maxInteractionDistance:31,class:12,eventDistanceToKnob:32,handlePointerDown:13},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[32]}get handlePointerDown(){return this.$$.ctx[13]}}function gg(t){let e,i;return e=new Lo({props:{class:"PinturaButtonIcon",$$slots:{default:[S5]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};1048580&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function S5(t){let e;return{c(){e=kr("g")},m(i,n){it(i,e,n),e.innerHTML=t[2]},p(i,n){4&n&&(e.innerHTML=i[2])},d(i){i&&Q(e)}}}function fg(t){let e,i,n=dr(t[8],t[6])+"";return{c(){e=ut("span"),i=$n(n),v(e,"class","PinturaButtonLabelPrefix")},m(r,o){it(r,e,o),St(e,i)},p(r,o){320&o&&n!==(n=dr(r[8],r[6])+"")&&Ln(i,n)},d(r){r&&Q(e)}}}function k5(t){let e,i,n,r,o,a,s,l,c,d=t[2]&&gg(t),u=t[8]&&fg(t);return{c(){e=ut("span"),d&&d.c(),i=$e(),u&&u.c(),n=$e(),r=ut("span"),o=$n(t[9]),v(r,"class",a=$i(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),v(e,"slot","label"),v(e,"title",s=dr(t[1],t[6])),v(e,"class",l=$i(["PinturaButtonInner",t[4]]))},m(p,h){it(p,e,h),d&&d.m(e,null),St(e,i),u&&u.m(e,null),St(e,n),St(e,r),St(r,o),c=!0},p(p,h){p[2]?d?(d.p(p,h),4&h&&M(d,1)):(d=gg(p),d.c(),M(d,1),d.m(e,i)):d&&(Ie(),F(d,1,1,()=>{d=null}),Ee()),p[8]?u?u.p(p,h):(u=fg(p),u.c(),u.m(e,n)):u&&(u.d(1),u=null),(!c||512&h)&&Ln(o,p[9]),(!c||40&h&&a!==(a=$i(["PinturaButtonLabel",p[3],p[5]&&"implicit"])))&&v(r,"class",a),(!c||66&h&&s!==(s=dr(p[1],p[6])))&&v(e,"title",s),(!c||16&h&&l!==(l=$i(["PinturaButtonInner",p[4]])))&&v(e,"class",l)},i(p){c||(M(d),c=!0)},o(p){F(d),c=!1},d(p){p&&Q(e),d&&d.d(),u&&u.d()}}}function C5(t){let e,i,n,r,o;const a=[t[12],{value:t[7]},{onchange:t[11]}];let s={};for(let l=0;l<a.length;l+=1)s=Cn(s,a[l]);return i=new i0({props:s}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"slot","details")},m(l,c){it(l,e,c),Pt(i,e,null),n=!0,r||(o=Mt(e,"keydown",t[10]),r=!0)},p(l,c){const d=6272&c?Tr(a,[4096&c&&Br(l[12]),128&c&&{value:l[7]},2048&c&&{onchange:l[11]}]):{};i.$set(d)},i(l){n||(M(i.$$.fragment,l),n=!0)},o(l){F(i.$$.fragment,l),n=!1},d(l){l&&Q(e),Rt(i),r=!1,o()}}}function T5(t){let e,i;return e=new Hu({props:{panelClass:"PinturaSliderPanel",buttonClass:$i(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[C5],label:[k5]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,[r]){const o={};33&r&&(o.buttonClass=$i(["PinturaSliderButton",n[0],n[5]&&"PinturaSliderIconOnly"])),1053694&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function M5(t,e,i){const n=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"];let r=Jm(e,n),{class:o}=e,{title:a}=e,{label:s=Math.round}=e,{icon:l}=e,{labelClass:c}=e,{innerClass:d}=e,{hideLabel:u=!1}=e,{locale:p}=e,{value:h}=e,{onchange:g=fe}=e,{labelPrefix:m}=e;const{min:f,max:x,getValue:w=qi}=r;let S;const C=I=>i(9,S=(E=>sn(s)?s(w(E),f,x,E):s)(I));return t.$$set=I=>{e=Cn(Cn({},e),Vc(I)),i(12,r=Jm(e,n)),"class"in I&&i(0,o=I.class),"title"in I&&i(1,a=I.title),"label"in I&&i(13,s=I.label),"icon"in I&&i(2,l=I.icon),"labelClass"in I&&i(3,c=I.labelClass),"innerClass"in I&&i(4,d=I.innerClass),"hideLabel"in I&&i(5,u=I.hideLabel),"locale"in I&&i(6,p=I.locale),"value"in I&&i(7,h=I.value),"onchange"in I&&i(14,g=I.onchange),"labelPrefix"in I&&i(8,m=I.labelPrefix)},t.$$.update=()=>{8320&t.$$.dirty&&C(h)},[o,a,l,c,d,u,p,h,m,S,I=>{/tab/i.test(I.key)&&I.preventDefault()},I=>{C(I),g(I)},r,s,g]}class P5 extends li{constructor(e){super(),si(this,e,M5,T5,oi,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function yg(t){let e,i,n=dr(t[0],t[1])+"";return{c(){e=ut("span"),i=$n(n),v(e,"class",t[3])},m(r,o){it(r,e,o),St(e,i)},p(r,o){3&o&&n!==(n=dr(r[0],r[1])+"")&&Ln(i,n),8&o&&v(e,"class",r[3])},d(r){r&&Q(e)}}}function R5(t){let e,i,n,r,o=t[0]&&yg(t);return n=new mo({props:{items:t[2]}}),{c(){e=ut("li"),o&&o.c(),i=$e(),It(n.$$.fragment),v(e,"class","PinturaShapeStyle")},m(a,s){it(a,e,s),o&&o.m(e,null),St(e,i),Pt(n,e,null),r=!0},p(a,[s]){a[0]?o?o.p(a,s):(o=yg(a),o.c(),o.m(e,i)):o&&(o.d(1),o=null);const l={};4&s&&(l.items=a[2]),n.$set(l)},i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){F(n.$$.fragment,a),r=!1},d(a){a&&Q(e),o&&o.d(),Rt(n)}}}function I5(t,e,i){let n,{title:r}=e,{locale:o}=e,{items:a}=e,{hideTitle:s=!1}=e;return t.$$set=l=>{"title"in l&&i(0,r=l.title),"locale"in l&&i(1,o=l.locale),"items"in l&&i(2,a=l.items),"hideTitle"in l&&i(4,s=l.hideTitle)},t.$$.update=()=>{16&t.$$.dirty&&i(3,n="PinturaShapeStyleLabel"+(s?" implicit":""))},[r,o,a,n,s]}class E5 extends li{constructor(e){super(),si(this,e,I5,R5,oi,{title:0,locale:1,items:2,hideTitle:4})}}var bg=(t,e,i)=>{let n,r,o;const a=Math.floor(6*t),s=6*t-a,l=i*(1-e),c=i*(1-s*e),d=i*(1-(1-s)*e);switch(a%6){case 0:n=i,r=d,o=l;break;case 1:n=c,r=i,o=l;break;case 2:n=l,r=i,o=d;break;case 3:n=l,r=c,o=i;break;case 4:n=d,r=l,o=i;break;case 5:n=i,r=l,o=c}return[n,r,o]};function A5(t){let e,i,n;return{c(){e=ut("div"),i=ut("span"),v(e,"class","PinturaColorPreview"),v(e,"title",t[0]),v(e,"style",n="--color:"+t[1])},m(r,o){it(r,e,o),St(e,i)},p(r,[o]){1&o&&v(e,"title",r[0]),2&o&&n!==(n="--color:"+r[1])&&v(e,"style",n)},i:Je,o:Je,d(r){r&&Q(e)}}}function L5(t,e,i){let n,{color:r}=e,{title:o}=e;return t.$$set=a=>{"color"in a&&i(2,r=a.color),"title"in a&&i(0,o=a.title)},t.$$.update=()=>{4&t.$$.dirty&&i(1,n=r?Sr(r):"transparent")},[o,n,r]}class n0 extends li{constructor(e){super(),si(this,e,L5,A5,oi,{color:2,title:0})}}var uh=t=>(t=t.trim(),/^rgba/.test(t)?t.substr(5).split(",").map(parseFloat).map((e,i)=>e/(i===3?1:255)):/^rgb/.test(t)?t.substr(4).split(",").map(parseFloat).map(e=>e/255):/^#/.test(t)?(e=>{const[,i,n,r,o]=e.split("");e=e.length>=4&&e.length<=5?`#${i}${i}${n}${n}${r}${r}${o?`${o}${o}`:""}`:e;const[a,s,l,c,d]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(a)return[s,l,c,d].filter(u=>u!==void 0).map(u=>parseInt(u,16)/255)})(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map(e=>parseInt(e,10)).map(e=>e/255):void 0);let Bp=null;function xg(t){let e,i;return{c(){e=ut("span"),i=$n(t[0])},m(n,r){it(n,e,r),St(e,i)},p(n,r){1&r[0]&&Ln(i,n[0])},d(n){n&&Q(e)}}}function z5(t){let e,i,n,r;i=new n0({props:{color:t[4],title:dr(t[8],t[10])}});let o=!t[9]&&xg(t);return{c(){e=ut("span"),It(i.$$.fragment),n=$e(),o&&o.c(),v(e,"slot","label"),v(e,"class","PinturaButtonLabel")},m(a,s){it(a,e,s),Pt(i,e,null),St(e,n),o&&o.m(e,null),r=!0},p(a,s){const l={};16&s[0]&&(l.color=a[4]),1280&s[0]&&(l.title=dr(a[8],a[10])),i.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=xg(a),o.c(),o.m(e,null))},i(a){r||(M(i.$$.fragment,a),r=!0)},o(a){F(i.$$.fragment,a),r=!1},d(a){a&&Q(e),Rt(i),o&&o.d()}}}function vg(t){let e,i,n,r,o,a,s,l,c,d,u,p,h,g;c=new i0({props:{class:"PinturaHuePicker",knobStyle:"background-color:"+t[21],onchange:t[27],value:t[16],min:0,max:1,step:.01}});let m=t[11]&&wg(t),f=(t[14]||t[15])&&Sg(t);return{c(){e=ut("div"),i=ut("div"),n=ut("div"),r=ut("div"),l=$e(),It(c.$$.fragment),d=$e(),m&&m.c(),u=$e(),f&&f.c(),v(r,"role","button"),v(r,"aria-label","Saturation slider"),v(r,"class","PinturaPickerKnob"),v(r,"tabindex","0"),v(r,"style",o=`background-color:${t[20]};`),v(n,"class","PinturaPickerKnobController"),v(n,"style",a=`transform:translate(${t[25]}%,${t[24]}%)`),v(i,"class","PinturaSaturationPicker"),v(i,"style",s="background-color: "+t[21]),v(e,"class","PinturaPicker")},m(x,w){it(x,e,w),St(e,i),St(i,n),St(n,r),t[41](i),St(e,l),Pt(c,e,null),St(e,d),m&&m.m(e,null),St(e,u),f&&f.m(e,null),p=!0,h||(g=[Mt(r,"nudge",t[30]),Zi(Ds.call(null,r,{preventDefault:!0})),Mt(i,"pointerdown",t[29])],h=!0)},p(x,w){(!p||1048576&w[0]&&o!==(o=`background-color:${x[20]};`))&&v(r,"style",o),(!p||50331648&w[0]&&a!==(a=`transform:translate(${x[25]}%,${x[24]}%)`))&&v(n,"style",a),(!p||2097152&w[0]&&s!==(s="background-color: "+x[21]))&&v(i,"style",s);const S={};2097152&w[0]&&(S.knobStyle="background-color:"+x[21]),65536&w[0]&&(S.value=x[16]),c.$set(S),x[11]?m?(m.p(x,w),2048&w[0]&&M(m,1)):(m=wg(x),m.c(),M(m,1),m.m(e,u)):m&&(Ie(),F(m,1,1,()=>{m=null}),Ee()),x[14]||x[15]?f?(f.p(x,w),49152&w[0]&&M(f,1)):(f=Sg(x),f.c(),M(f,1),f.m(e,null)):f&&(Ie(),F(f,1,1,()=>{f=null}),Ee())},i(x){p||(M(c.$$.fragment,x),M(m),M(f),p=!0)},o(x){F(c.$$.fragment,x),F(m),F(f),p=!1},d(x){x&&Q(e),t[41](null),Rt(c),m&&m.d(),f&&f.d(),h=!1,ji(g)}}}function wg(t){let e,i;return e=new i0({props:{class:"PinturaOpacityPicker",knobStyle:"background-color:"+t[18],trackStyle:`background-image:linear-gradient(to right,${t[19]},${t[20]})`,onchange:t[28],value:t[17],min:0,max:1,step:.01}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};262144&r[0]&&(o.knobStyle="background-color:"+n[18]),1572864&r[0]&&(o.trackStyle=`background-image:linear-gradient(to right,${n[19]},${n[20]})`),131072&r[0]&&(o.value=n[17]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function Sg(t){let e,i,n,r,o,a,s,l=t[15]&&kg(t);return{c(){e=ut("div"),i=ut("input"),r=$e(),l&&l.c(),v(i,"class","PinturaColorPickerInput"),v(i,"type","text"),i.disabled=n=!t[14],i.value=t[23],v(e,"class","PinturColorPickerInputGroup")},m(c,d){it(c,e,d),St(e,i),St(e,r),l&&l.m(e,null),o=!0,a||(s=[Mt(i,"keydown",t[32]),Mt(i,"input",t[31])],a=!0)},p(c,d){(!o||16384&d[0]&&n!==(n=!c[14]))&&(i.disabled=n),(!o||8388608&d[0]&&i.value!==c[23])&&(i.value=c[23]),c[15]?l?(l.p(c,d),32768&d[0]&&M(l,1)):(l=kg(c),l.c(),M(l,1),l.m(e,null)):l&&(Ie(),F(l,1,1,()=>{l=null}),Ee())},i(c){o||(M(l),o=!0)},o(c){F(l),o=!1},d(c){c&&Q(e),l&&l.d(),a=!1,ji(s)}}}function kg(t){let e,i;return e=new ls({props:{icon:'<path stroke="currentColor" stroke-linecap="square" d="m13 14-7 7a2.704 2.704 0 0 1-3 0 2.704 2.704 0 0 1 0-3l7-7"/><path fill="currentColor" d="M9.475 9.475 14.5 14.5c.263.263.69.265.955.005l.783-.767a4.209 4.209 0 0 0 1.262-3.006V10l4-4c.5-.5.375-2.125-.5-3s-2.5-1-3-.5l-4 4h-.732a4.329 4.329 0 0 0-3.03 1.238l-.758.742a.7.7 0 0 0-.005.995Z"/>',hideLabel:!0,label:"Pick a color",class:"PinturaEyeDropper",onclick:t[33]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p:Je,i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function Cg(t){let e,i;return e=new cs({props:{label:dr(t[10].labelColorPalette,t[10]),class:$i(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[42]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[43],$$slots:{option:[D5,({option:n})=>({55:n}),({option:n})=>[0,n?16777216:0]],group:[F5,({option:n})=>({55:n}),({option:n})=>[0,n?16777216:0]]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};1024&r[0]&&(o.label=dr(n[10].labelColorPalette,n[10])),512&r[0]&&(o.class=$i(["PinturaColorPresets",n[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&r[0]&&(o.name=n[1]),16&r[0]&&(o.value=n[4]),1028&r[0]&&(o.options=n[2].map(n[42])),8&r[0]&&(o.selectedIndex=n[3]),128&r[0]&&(o.optionMapper=n[7]),64&r[0]&&(o.optionLabelClass=n[6]),512&r[0]|50331648&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function F5(t){let e,i,n=t[55].label+"";return{c(){e=ut("span"),i=$n(n),v(e,"slot","group")},m(r,o){it(r,e,o),St(e,i)},p(r,o){16777216&o[1]&&n!==(n=r[55].label+"")&&Ln(i,n)},d(r){r&&Q(e)}}}function Tg(t){let e,i,n=t[55].label+"";return{c(){e=ut("span"),i=$n(n),v(e,"class","PinturaButtonLabel")},m(r,o){it(r,e,o),St(e,i)},p(r,o){16777216&o[1]&&n!==(n=r[55].label+"")&&Ln(i,n)},d(r){r&&Q(e)}}}function D5(t){let e,i,n,r;i=new n0({props:{title:t[55].label,color:t[55].value}});let o=!t[9]&&Tg(t);return{c(){e=ut("span"),It(i.$$.fragment),n=$e(),o&&o.c(),v(e,"slot","option")},m(a,s){it(a,e,s),Pt(i,e,null),St(e,n),o&&o.m(e,null),r=!0},p(a,s){const l={};16777216&s[1]&&(l.title=a[55].label),16777216&s[1]&&(l.color=a[55].value),i.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=Tg(a),o.c(),o.m(e,null))},i(a){r||(M(i.$$.fragment,a),r=!0)},o(a){F(i.$$.fragment,a),r=!1},d(a){a&&Q(e),Rt(i),o&&o.d()}}}function B5(t){let e,i,n,r=t[13]&&vg(t),o=t[12]&&Cg(t);return{c(){e=ut("div"),r&&r.c(),i=$e(),o&&o.c(),v(e,"slot","details"),v(e,"class","PinturaColorPickerPanel")},m(a,s){it(a,e,s),r&&r.m(e,null),St(e,i),o&&o.m(e,null),n=!0},p(a,s){a[13]?r?(r.p(a,s),8192&s[0]&&M(r,1)):(r=vg(a),r.c(),M(r,1),r.m(e,i)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee()),a[12]?o?(o.p(a,s),4096&s[0]&&M(o,1)):(o=Cg(a),o.c(),M(o,1),o.m(e,null)):o&&(Ie(),F(o,1,1,()=>{o=null}),Ee())},i(a){n||(M(r),M(o),n=!0)},o(a){F(r),F(o),n=!1},d(a){a&&Q(e),r&&r.d(),o&&o.d()}}}function O5(t){let e,i;return e=new Hu({props:{buttonClass:$i(["PinturaColorPickerButton",t[5]]),$$slots:{details:[B5],label:[z5]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};32&r[0]&&(o.buttonClass=$i(["PinturaColorPickerButton",n[5]])),67108831&r[0]|33554432&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function W5(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,{label:w}=e,{name:S}=e,{options:C=[]}=e,{selectedIndex:I=-1}=e,{value:E}=e,{buttonClass:B}=e,{optionLabelClass:T}=e,{optionMapper:D}=e,{onchange:U}=e,{title:P}=e,{hidePresetLabel:y=!0}=e,{locale:V}=e,{enableOpacity:nt=!0}=e,{enablePresets:k=!0}=e,{enablePicker:N=!0}=e,{enableInput:tt=!1}=e,{enableEyeDropper:ct=!1}=e;const ot=(_,rt)=>{if(p=[_[0],_[1],_[2]],rt){let zt=((Zt,Ot,Yt)=>{let Ut=Math.max(Zt,Ot,Yt),ht=Ut-Math.min(Zt,Ot,Yt),G=ht&&(Ut==Zt?(Ot-Yt)/ht:Ut==Ot?2+(Yt-Zt)/ht:4+(Zt-Ot)/ht);return[60*(G<0?G+6:G)/360,Ut&&ht/Ut,Ut]})(...p);i(16,l=zt[0]),i(36,c=zt[1]),i(37,d=zt[2]),i(17,u=ui(_[3])?_[3]:1)}i(18,h=Sr(_)),i(19,g=Sr([...p,0])),i(20,m=Sr([...p,1])),i(21,f=Sr(bg(l,1,1)))},mt=()=>{const _=[...bg(l,c,d),u];ot(_),U(_)},Z=_=>{const rt=_.length===3?[..._,1]:_;ot(rt,!0),U(rt)},gt=(_,rt)=>{const zt=tn(_.x/rt.width,0,1),Zt=tn(_.y/rt.height,0,1);var Ot;Ot=1-Zt,i(36,c=zt),i(37,d=Ot),u===0&&i(17,u=1),mt()};let xt,dt,wt,J;const q=_=>{const rt=Dn(bm(_),J);gt(Fn(We(wt),rt),dt)},ft=_=>{dt=void 0,document.documentElement.removeEventListener("pointermove",q),document.documentElement.removeEventListener("pointerup",ft)};let Lt;return t.$$set=_=>{"label"in _&&i(0,w=_.label),"name"in _&&i(1,S=_.name),"options"in _&&i(2,C=_.options),"selectedIndex"in _&&i(3,I=_.selectedIndex),"value"in _&&i(4,E=_.value),"buttonClass"in _&&i(5,B=_.buttonClass),"optionLabelClass"in _&&i(6,T=_.optionLabelClass),"optionMapper"in _&&i(7,D=_.optionMapper),"onchange"in _&&i(34,U=_.onchange),"title"in _&&i(8,P=_.title),"hidePresetLabel"in _&&i(9,y=_.hidePresetLabel),"locale"in _&&i(10,V=_.locale),"enableOpacity"in _&&i(11,nt=_.enableOpacity),"enablePresets"in _&&i(12,k=_.enablePresets),"enablePicker"in _&&i(13,N=_.enablePicker),"enableInput"in _&&i(14,tt=_.enableInput),"enableEyeDropper"in _&&i(35,ct=_.enableEyeDropper)},t.$$.update=()=>{16&t.$$.dirty[1]&&i(15,n=ct&&(Bp===null&&(Bp=Cr()&&"EyeDropper"in window),Bp)),16&t.$$.dirty[0]|128&t.$$.dirty[1]&&(!E||x&&ss(E,x)||(i(38,x=[...E]),ot(E,!0))),32&t.$$.dirty[1]&&i(25,r=100*c),64&t.$$.dirty[1]&&i(24,o=100-100*d),256&t.$$.dirty[1]&&i(40,a=!!Lt&&Lt.length>=4&&Lt.length<=5),51216&t.$$.dirty[0]|512&t.$$.dirty[1]&&i(23,s=(tt||n)&&E?((_,rt,zt)=>{let Zt=_.map(Ot=>Math.round(255*Ot).toString(16).toLowerCase().padStart(2,"0"));return(!rt&&Zt.length>3||Zt[3]==="ff")&&Zt.pop(),zt&&(Zt=Zt.map(Ot=>Ot.substring(0,1))),"#"+Zt.join("")})(E,nt,a):void 0)},[w,S,C,I,E,B,T,D,P,y,V,nt,k,N,tt,n,l,u,h,g,m,f,xt,s,o,r,Z,_=>{i(16,l=_),u===0&&i(17,u=1),mt()},_=>{i(17,u=_),mt()},_=>{_.stopPropagation(),dt=Un(xt.offsetWidth,xt.offsetHeight),wt=(rt=>at(rt.offsetX,rt.offsetY))(_),J=bm(_),gt(wt,dt),document.documentElement.addEventListener("pointermove",q),document.documentElement.addEventListener("pointerup",ft)},_=>{dt=Un(xt.offsetWidth,xt.offsetHeight);const rt=r/100*dt.width,zt=o/100*dt.height;gt({x:rt+_.detail.x,y:zt+_.detail.y},dt)},_=>{const{value:rt}=_.target,zt=rt.length;if(!rt.startsWith("#")||zt<4||zt===6||zt===8||zt>9||!nt&&zt>7)return;const Zt=uh(rt);Zt&&(i(39,Lt=rt),ot(Zt),U(Zt))},_=>{_.stopPropagation()},_=>{new EyeDropper().open().then(({sRGBHex:rt})=>{const zt=uh(rt);zt&&(i(39,Lt=E),ot(zt),U(zt))}).catch(rt=>{})},U,ct,c,d,x,Lt,a,function(_){Wi[_?"unshift":"push"](()=>{xt=_,i(22,xt)})},([_,rt])=>[_,sn(rt)?rt(V):rt],_=>Z(_.value)]}class _5 extends li{constructor(e){super(),si(this,e,W5,O5,oi,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:34,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14,enableEyeDropper:35},null,[-1,-1])}}function V5(t){let e,i,n;return i=new mo({props:{items:t[0]}}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"class","PinturaShorthandControl PinturaShapeStyle")},m(r,o){it(r,e,o),Pt(i,e,null),n=!0},p(r,[o]){const a={};1&o&&(a.items=r[0]),i.$set(a)},i(r){n||(M(i.$$.fragment,r),n=!0)},o(r){F(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Rt(i)}}}function N5(t,e,i){let n,r,{value:o}=e,{onchange:a}=e,{controls:s=[]}=e;return t.$$set=l=>{i(6,e=Cn(Cn({},e),Vc(l))),"value"in l&&i(1,o=l.value),"onchange"in l&&i(2,a=l.onchange),"controls"in l&&i(3,s=l.controls)},t.$$.update=()=>{i(4,n=(l=>{const{controls:c,...d}=l;return d})(e)),30&t.$$.dirty&&i(0,r=s.map((l,c)=>{const[d,u,p]=l;return[d,u,{...n,...p,value:o[c],onchange:h=>{const g=[...o];g[c]=h,a(g)}}]}))},e=Vc(e),[r,o,a,s,n]}class H5 extends li{constructor(e){super(),si(this,e,N5,V5,oi,{value:1,onchange:2,controls:3})}}function j5(t){let e,i;return e=new e0({props:{label:t[4],options:t[1],title:t[2],selectedIndex:t[5],onchange:t[10]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,[r]){const o={};16&r&&(o.label=n[4]),2&r&&(o.options=n[1]),4&r&&(o.title=n[2]),32&r&&(o.selectedIndex=n[5]),9&r&&(o.onchange=n[10]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function U5(t,e,i){let n,r,o,a,{options:s}=e,{title:l}=e,{onchange:c}=e,{selectedIndex:d=-1}=e,{value:u}=e,{label:p}=e;return t.$$set=h=>{"options"in h&&i(1,s=h.options),"title"in h&&i(2,l=h.title),"onchange"in h&&i(3,c=h.onchange),"selectedIndex"in h&&i(0,d=h.selectedIndex),"value"in h&&i(6,u=h.value),"label"in h&&i(7,p=h.label)},t.$$.update=()=>{67&t.$$.dirty&&i(9,n=((h,g,m)=>{if(h)return g>-1?h[g]:m!==void 0?h.find(f=>f[0]===m):h[0]})(s,d,u)),514&t.$$.dirty&&i(5,r=s&&s.findIndex(h=>h===n)),512&t.$$.dirty&&i(8,o=n&&n[1]),384&t.$$.dirty&&i(4,a=p||o)},[d,s,l,c,a,r,u,p,o,n,h=>{i(0,d=h.index),c&&c(h)}]}class G5 extends li{constructor(e){super(),si(this,e,U5,j5,oi,{options:1,title:2,onchange:3,selectedIndex:0,value:6,label:7})}}function Mg(t,e,i){const n=t.slice();return n[9]=e[i][0],n[0]=e[i][1],n[10]=e[i][2],n[2]=e[i][3],n}function Z5(t){let e,i,n;const r=[t[10]];var o=t[3][t[9]]||t[9];function a(s){let l={};for(let c=0;c<r.length;c+=1)l=Cn(l,r[c]);return{props:l}}return o&&(e=Pu(o,a())),{c(){e&&It(e.$$.fragment),i=Tn()},m(s,l){e&&Pt(e,s,l),it(s,i,l),n=!0},p(s,l){const c=4&l?Tr(r,[Br(s[10])]):{};if(o!==(o=s[3][s[9]]||s[9])){if(e){Ie();const d=e;F(d.$$.fragment,1,0,()=>{Rt(d,1)}),Ee()}o?(e=Pu(o,a()),It(e.$$.fragment),M(e.$$.fragment,1),Pt(e,i.parentNode,i)):e=null}else o&&e.$set(c)},i(s){n||(e&&M(e.$$.fragment,s),n=!0)},o(s){e&&F(e.$$.fragment,s),n=!1},d(s){s&&Q(i),e&&Rt(e,s)}}}function X5(t){let e,i=t[9],n=t[9]&&Op(t);return{c(){n&&n.c(),e=Tn()},m(r,o){n&&n.m(r,o),it(r,e,o)},p(r,o){r[9]?i?oi(i,r[9])?(n.d(1),n=Op(r),n.c(),n.m(e.parentNode,e)):n.p(r,o):(n=Op(r),n.c(),n.m(e.parentNode,e)):i&&(n.d(1),n=null),i=r[9]},i:Je,o(r){F(n)},d(r){r&&Q(e),n&&n.d(r)}}}function Y5(t){let e,i,n=t[10].innerHTML+"";return{c(){e=new Ou(!1),i=Tn(),e.a=i},m(r,o){e.m(n,r,o),it(r,i,o)},p(r,o){4&o&&n!==(n=r[10].innerHTML+"")&&e.p(n)},i:Je,o:Je,d(r){r&&Q(i),r&&e.d()}}}function q5(t){let e,i=t[10].textContent+"";return{c(){e=$n(i)},m(n,r){it(n,e,r)},p(n,r){4&r&&i!==(i=n[10].textContent+"")&&Ln(e,i)},i:Je,o:Je,d(n){n&&Q(e)}}}function K5(t){let e,i;return e=new mo({props:{items:t[2],discardEmptyItems:!0}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};4&r&&(o.items=n[2]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function Op(t){let e,i,n,r,o;const a=[K5,q5,Y5],s=[];function l(u,p){return u[2]&&u[2].length?0:u[10].textContent?1:u[10].innerHTML?2:-1}~(i=l(t))&&(n=s[i]=a[i](t));let c=[t[4](t[10])],d={};for(let u=0;u<c.length;u+=1)d=Cn(d,c[u]);return{c(){e=ut(t[9]),n&&n.c(),r=$e(),/-/.test(t[9])?t$(e,d):Qm(e,d)},m(u,p){it(u,e,p),~i&&s[i].m(e,null),St(e,r),o=!0},p(u,p){let h=i;i=l(u),i===h?~i&&s[i].p(u,p):(n&&(Ie(),F(s[h],1,1,()=>{s[h]=null}),Ee()),~i?(n=s[i],n?n.p(u,p):(n=s[i]=a[i](u),n.c()),M(n,1),n.m(e,r)):n=null),d=Tr(c,[4&p&&u[4](u[10])]),/-/.test(u[9])?t$(e,d):Qm(e,d)},i(u){o||(M(n),o=!0)},o(u){F(n),o=!1},d(u){u&&Q(e),~i&&s[i].d()}}}function Pg(t,e){let i,n,r,o,a,s;const l=[X5,Z5],c=[];function d(u,p){return 4&p&&(n=null),n==null&&(n=!u[5](u[9])),n?0:1}return r=d(e,-1),o=c[r]=l[r](e),{key:t,first:null,c(){i=Tn(),o.c(),a=Tn(),this.first=i},m(u,p){it(u,i,p),c[r].m(u,p),it(u,a,p),s=!0},p(u,p){let h=r;r=d(e=u,p),r===h?c[r].p(e,p):(Ie(),F(c[h],1,1,()=>{c[h]=null}),Ee(),o=c[r],o?o.p(e,p):(o=c[r]=l[r](e),o.c()),M(o,1),o.m(a.parentNode,a))},i(u){s||(M(o),s=!0)},o(u){F(o),s=!1},d(u){u&&Q(i),c[r].d(u),u&&Q(a)}}}function J5(t){let e,i,n=[],r=new Map,o=t[2];const a=s=>s[0]+s[1];for(let s=0;s<o.length;s+=1){let l=Mg(t,o,s),c=a(l);r.set(c,n[s]=Pg(c,l))}return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Tn()},m(s,l){for(let c=0;c<n.length;c+=1)n[c].m(s,l);it(s,e,l),i=!0},p(s,[l]){62&l&&(o=s[2],Ie(),n=Oa(n,l,a,1,s,o,r,e.parentNode,zs,Pg,e,Mg),Ee())},i(s){if(!i){for(let l=0;l<o.length;l+=1)M(n[l]);i=!0}},o(s){for(let l=0;l<n.length;l+=1)F(n[l]);i=!1},d(s){for(let l=0;l<n.length;l+=1)n[l].d(s);s&&Q(e)}}}function Q5(t,e,i){let n,r,{items:o}=e,{discardEmptyItems:a=!0}=e,{key:s=""}=e;const l={Button:ls,ImageButton:A2,ImageButtonList:t0,Dropdown:e0,Select:G5,RadioGroup:cs,Input:O2,Panel:f5,ProgressIndicator:I2,ShapeStyle:E5,ToggleSlider:P5,ColorPicker:_5,ShorthandControl:H5},c=u=>!_e(u)||!!l[u],d=u=>{if(!u)return!1;const[p,,h,g=[]]=u;return!!c(p)||g.some(d)||h.textContent||h.innerHTML};return t.$$set=u=>{"items"in u&&i(6,o=u.items),"discardEmptyItems"in u&&i(7,a=u.discardEmptyItems),"key"in u&&i(0,s=u.key)},t.$$.update=()=>{1&t.$$.dirty&&i(1,n=s),192&t.$$.dirty&&i(2,r=(o&&a?o.filter(d):o)||[])},[s,n,r,l,(u={})=>{const{textContent:p,innerHTML:h,...g}=u;return g},c,o,a]}class mo extends li{constructor(e){super(),si(this,e,Q5,J5,oi,{items:6,discardEmptyItems:7,key:0})}get items(){return this.$$.ctx[6]}set items(e){this.$$set({items:e}),R()}get discardEmptyItems(){return this.$$.ctx[7]}set discardEmptyItems(e){this.$$set({discardEmptyItems:e}),R()}get key(){return this.$$.ctx[0]}set key(e){this.$$set({key:e}),R()}}let Wp=null;var t3=t=>{if(Wp===null&&(Wp=Cr()&&"visualViewport"in window),!Wp)return!1;const e=visualViewport.height,i=()=>{t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",i),()=>visualViewport.removeEventListener("resize",i)};function Rg(t){let e,i;const n=[{onclick:t[1]},t[3]];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ls({props:r}),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=10&a[0]?Tr(n,[2&a[0]&&{onclick:o[1]},8&a[0]&&Br(o[3])]):{};e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){Rt(e,o)}}}function Ig(t){let e,i;const n=[{onclick:t[0]},{class:"PinturaInputFormButtonConfirm"},t[2]];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ls({props:r}),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=5&a[0]?Tr(n,[1&a[0]&&{onclick:o[0]},n[1],4&a[0]&&Br(o[2])]):{};e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){Rt(e,o)}}}function e3(t){let e,i,n,r,o,a,s,l,c=t[3]&&Rg(t);const d=t[24].default,u=ur(d,t,t[23],null);let p=t[2]&&Ig(t);return{c(){e=ut("div"),i=ut("div"),c&&c.c(),n=$e(),r=ut("div"),u&&u.c(),o=$e(),p&&p.c(),v(r,"class","PinturaInputFormFields"),v(i,"class","PinturaInputFormInner"),v(e,"class","PinturaInputForm"),v(e,"data-layout",t[4]),v(e,"style",t[6])},m(h,g){it(h,e,g),St(e,i),c&&c.m(i,null),St(i,n),St(i,r),u&&u.m(r,null),St(i,o),p&&p.m(i,null),t[25](e),a=!0,s||(l=[Mt(r,"keydown",t[10]),Mt(e,"focusin",t[7]),Mt(e,"focusout",t[8]),Mt(e,"measure",t[9]),Zi(Mr.call(null,e))],s=!0)},p(h,g){h[3]?c?(c.p(h,g),8&g[0]&&M(c,1)):(c=Rg(h),c.c(),M(c,1),c.m(i,n)):c&&(Ie(),F(c,1,1,()=>{c=null}),Ee()),u&&u.p&&(!a||8388608&g[0])&&hr(u,d,h,h[23],a?pr(d,h[23],g,null):mr(h[23]),null),h[2]?p?(p.p(h,g),4&g[0]&&M(p,1)):(p=Ig(h),p.c(),M(p,1),p.m(i,null)):p&&(Ie(),F(p,1,1,()=>{p=null}),Ee()),(!a||16&g[0])&&v(e,"data-layout",h[4]),(!a||64&g[0])&&v(e,"style",h[6])},i(h){a||(M(c),M(u,h),M(p),a=!0)},o(h){F(c),F(u,h),F(p),a=!1},d(h){h&&Q(e),c&&c.d(),u&&u.d(h),p&&p.d(),t[25](null),s=!1,ji(l)}}}function i3(t,e,i){let n,r,o,a,s,{$$slots:l={},$$scope:c}=e,{onconfirm:d}=e,{oncancel:u}=e,{autoFocus:p=!0}=e,{autoPositionCursor:h=!0}=e,{buttonConfirm:g}=e,{buttonCancel:m}=e,{layout:f="stack"}=e,{parentRect:x}=e,{align:w}=e,{justify:S}=e,{parentMargin:C=16}=e,{panelOffset:I=an()}=e,E=!1,B,T,D="",U=0;const P=()=>{const k=s.querySelector("input, textarea");k.focus(),U>=1||k.select()},y=()=>{E=!0,nt||!sa()&&!Lu()||i(19,D="top:1em;bottom:auto;"),sa()&&(k=>{let N;const tt=ot=>N=ot.touches[0].screenY,ct=ot=>{const mt=ot.touches[0].screenY,Z=ot.target;/textarea/i.test(Z.nodeName)?(mt>N?Z.scrollTop==0&&ot.preventDefault():mt<N?Z.scrollTop+Z.offsetHeight==Z.scrollHeight&&ot.preventDefault():ot.preventDefault(),N=mt):ot.preventDefault()};k.addEventListener("touchstart",tt),k.addEventListener("touchmove",ct)})(s),i(20,U=1)};let V;const nt=t3(k=>{o?k!=="hidden"||E?(clearTimeout(T),T=void 0,i(19,D=`top:${visualViewport.height-B.height-I.y}px`),k==="visible"?(i(5,s.dataset.stick=!0,s),P(),y()):(E=!1,i(20,U=0))):P():i(19,D="top: 4.5em; bottom: auto")});return Ls(()=>{p&&P()}),Uo(()=>{nt&&nt()}),t.$$set=k=>{"onconfirm"in k&&i(0,d=k.onconfirm),"oncancel"in k&&i(1,u=k.oncancel),"autoFocus"in k&&i(11,p=k.autoFocus),"autoPositionCursor"in k&&i(12,h=k.autoPositionCursor),"buttonConfirm"in k&&i(2,g=k.buttonConfirm),"buttonCancel"in k&&i(3,m=k.buttonCancel),"layout"in k&&i(4,f=k.layout),"parentRect"in k&&i(13,x=k.parentRect),"align"in k&&i(14,w=k.align),"justify"in k&&i(15,S=k.justify),"parentMargin"in k&&i(16,C=k.parentMargin),"panelOffset"in k&&i(17,I=k.panelOffset),"$$scope"in k&&i(23,c=k.$$scope)},t.$$.update=()=>{385024&t.$$.dirty[0]&&i(21,n=x&&B?((k,N,tt,ct,ot)=>{let mt,Z;return mt=ct==="center"?k.x+.5*k.width-.5*N.width:ct==="right"?k.x+k.width-N.width-ot:k.x+ot,Z=tt==="center"?k.y+.5*k.height-.5*N.height:tt==="bottom"?k.y+k.height-N.height-ot:k.y+ot,`left:${mt}px;top:${Z}px;right:auto;bottom:auto;`})(x,B,w,S,C):void 0),32&t.$$.dirty[0]&&i(22,r=s&&getComputedStyle(s)),4194304&t.$$.dirty[0]&&(o=r&&r.getPropertyValue("--editor-modal")==="1"),3670016&t.$$.dirty[0]&&i(6,a=`opacity:${U};${n||D}`)},[d,u,g,m,f,s,a,k=>{var N;((tt=>/textarea/i.test(tt))(k.target)||L2(k.target))&&(V=Date.now(),h&&((N=k.target).selectionStart=N.selectionEnd=N.value.length),clearTimeout(T),T=setTimeout(y,200))},k=>{Date.now()-V>50||(k.stopPropagation(),P())},({detail:k})=>{i(18,B={width:k.width,height:k.height})},k=>k.key==="Enter"?d():k.key==="Escape"?u():void 0,p,h,x,w,S,C,I,B,D,U,n,r,c,l,function(k){Wi[k?"unshift":"push"](()=>{s=k,i(5,s)})}]}class W2 extends li{constructor(e){super(),si(this,e,i3,e3,oi,{onconfirm:0,oncancel:1,autoFocus:11,autoPositionCursor:12,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:13,align:14,justify:15,parentMargin:16,panelOffset:17},null,[-1,-1])}}var Eg=(t,e)=>{t.fastSeek&&t.fastSeek(e),t.currentTime=e};const n3=["aspectRatio","isRotatedSideways","flip","cropSize"],Ag=Uh.map(([t])=>t).filter(t=>!n3.includes(t));var bs=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),_2=(t,e)=>(e?Xh(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),Lg=(t,e=qi)=>{const{subscribe:i,set:n}=ge(void 0);return{subscribe:i,destroy:((r,o)=>{const a=matchMedia(r);return a.addListener(o),o(a),{get matches(){return a.matches},destroy:()=>a.removeListener(o)}})(t,({matches:r})=>n(e(r))).destroy}},zg=(t,e,i)=>new Promise((n,r)=>{(async()=>{Xl(t)&&n(await $2(t));const o=await e.read(t),a=l=>ry(l,i).then(c=>e.apply(c,o)).then(n).catch(r);if(ny(t)||!iy()||Fa()||sa())return a(t);let s;try{s=await Xc((l,c)=>createImageBitmap(l).then(d=>c(null,d)).catch(c),[t])}catch{}s&&s.width?await Au()?qh()&&o>1?n(await(async l=>Zc(await Gl(l)))(s)):n(s):n(e.apply(s,o)):a(t)})()}),Fg=(t,e)=>new Promise(async i=>{if(t.width<e.width&&t.height<e.height)return i(t);const n=Math.min(e.width/t.width,e.height/t.height),r=n*t.width,o=n*t.height,a=yn("canvas",{width:r,height:o}),s=a.getContext("2d",{willReadFrequently:!0}),l=Wl(t)?await Gl(t):t;s.drawImage(l,0,0,r,o),i(Zc(a))});let _p=null;var r3=()=>{if(_p===null){let t=yn("canvas");_p=!!Wu(t),or(t),t=void 0}return _p};const Dg=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],nl={precision:1e-4},ou={precision:.01*nl.precision};var o3=()=>{const t=[],e=[],i=[],n=()=>{e.forEach(o=>o(i))},r=o=>{o.unsub=o.subscribe(a=>((s,l)=>{const c=t.indexOf(s);c<0||(i[c]=l,n())})(o,a)),n()};return{get length(){return t.length},clear:()=>{t.forEach(o=>o.unsub()),t.length=0,i.length=0},unshift:o=>{t.unshift(o),r(o)},get:o=>t[o],push:o=>{t.push(o),r(o)},remove:o=>{o.unsub();const a=t.indexOf(o);t.splice(a,1),i.splice(a,1)},forEach:o=>t.forEach(o),filter:o=>t.filter(o),subscribe:o=>(e.push(o),o(i),()=>{e.splice(e.indexOf(o),1)})}},Vp=t=>t[0]<.25&&t[1]<.25&&t[2]<.25,V2=(t={})=>new Promise(e=>{const{accept:i="image/*"}=t,n=yn("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:i}),r=()=>{const[o]=n.files;n.parentNode&&n.remove(),n.removeEventListener("change",r),e(o)};n.addEventListener("change",r),sa()&&document.body.append(n),n.click()}),Uc=t=>{try{return t()}catch(e){console.error(e)}},a3=([t,e])=>t+.5*(e-t),Ms=t=>Math.round(100*t),r0=t=>at(t.clientX,t.clientY),ph=(t,e,i)=>{const n=r0(t);return Dn(Dn(n,e),i)};function s3(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,w,S,C,I,E,B,{root:T}=e,{locale:D}=e,{stores:U}=e,{allowPan:P=!0}=e,{allowZoom:y=!0}=e,{enablePan:V=!0}=e,{enableZoom:nt=!0}=e,{enableZoomControls:k=nt}=e,{enableZoomInput:N=!0}=e,{enablePanInput:tt=!0}=e,{enablePanLimit:ct=!0}=e,{panLimitGutterScalar:ot=0}=e,{zoomOptions:mt=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:Z=.25}=e,{zoomAdjustFactor:gt=.1}=e,{zoomAdjustWheelFactor:xt=1}=e,{elasticity:dt=5}=e,{imageSelectionRectCentered:wt}=e,{imageSelectionRectScalar:J}=e,{zoomLevel:q=null}=e,{zoomControls:ft}=e,{zoomMultiTouching:Lt=!1}=e;const{isAnimated:_,isInteracting:rt,rootRect:zt,stageRect:Zt,stageScalar:Ot,imageSelectionPan:Yt,imageSelectionZoom:Ut,imageSelectionStageFitScalar:ht,imageSelectionRect:G,imageSelectionStoredState:kt,imagePreviewUpscale:ne}=U;L(t,_,et=>i(70,E=et)),L(t,rt,et=>i(69,C=et)),L(t,zt,et=>i(66,x=et)),L(t,Zt,et=>i(65,f=et)),L(t,Ot,et=>i(46,I=et)),L(t,Yt,et=>i(64,h=et)),L(t,Ut,et=>i(43,p=et)),L(t,ht,et=>i(44,g=et)),L(t,G,et=>i(67,w=et)),L(t,kt,et=>i(71,B=et)),L(t,ne,et=>i(45,m=et));const ue=un("fixScrollDirection");L(t,ue,et=>i(68,S=et));let Nt=!1,xe,Ht,ze,W;const Re=et=>{const jt=T.querySelector(".PinturaMain > .PinturaUtilMain")||T.querySelector('div[tabindex="0"] .PinturaUtilMain');return!!jt&&!!jt.contains(et.target)&&!jc(et.target)},Se=(et={})=>{const{pan:jt=h,zoom:Gt=p}=et;vt(kt,B={translation:jt,zoom:Gt},B)},Xt=()=>h&&h.x===0&&h.y===0,Be=()=>{vt(Ut,p=void 0,p),Xt()||vt(Yt,h=an(),h),Xe.set(void 0,{hard:!0})},Fe=()=>{Be(),Se()},Xe=di(void 0,{precision:.01});Xe.subscribe(et=>{if(et===void 0)return vt(Ut,p=void 0,p),void(Xt()||vt(Yt,h=an(),h));const jt=p;et<=1?Xt()||vt(Yt,h=an(),h):et<=jt&&vt(Yt,h=Dr(h,.8),h),vt(Ut,p=et,p)});const yi=et=>{Xe.update(jt=>{const Gt=et(jt||g);return Se({zoom:Gt}),Gt})},bt=et=>{et?Xe.set(et,{hard:E===!1}):(et=void 0,Xe.set(void 0,{hard:!0})),vt(Ut,p=et,p),Se({zoom:et})},be=(et,jt)=>{const Gt=J*jt,ce={...wt},Ne=1-tn(ot,0,1);Fr(ce,Gt<Ne?Gt:Ne);const He={...wt};Fr(He,Gt),na(He,et);const Me={...He};return He.x>ce.x&&(Me.x=ce.x),He.y>ce.y&&(Me.y=ce.y),He.x+He.width<ce.x+ce.width&&(Me.x=ce.x+ce.width-He.width),He.y+He.height<ce.y+ce.height&&(Me.y=ce.y+ce.height-He.height),Dn(Ri(Me),Ri(ce))},Ue=({translation:et,zoom:jt=1,elastify:Gt=!0})=>{if(!xe)return;let ce=et;const Ne=at(xe.x+ce.x,xe.y+ce.y);if(!ct)return Ne;const He=be(Ne,jt);return Gt?v4(He,Ne,dt):He};let Le,Ve;const Ge=()=>{Ve=void 0,vt(rt,C=!0,C),i(34,Nt=tt),Le=!1,ze=!1,xe={...h},Ht=m?p||g:o?p||1:p||g},Qe=et=>{const{scalar:jt,translation:Gt,isMultiTouching:ce}=et.detail;if(!xe||!ce&&!tt)return;ce&&Dr(Gt,.5),(tt||ce)&&(Le=!0),Lt||i(13,Lt=ce);const Ne=n?tn(Ht*jt,s,l):1,He=Ue({translation:Gt,zoom:Ne,elastify:!0}),Me=Ss(He);W=Ss(h),ze=Me<W,n&&Ut.set(Ne),Yt.set(He),Ve=Lt&&{translation:et.detail.translation,scalar:jt}},vi=et=>{vt(rt,C=!1,C),i(34,Nt=!1),i(13,Lt=!1),ze&&W<50&&(xe=void 0,Ht=void 0,Yt.set(an()))},Si=et=>{vt(rt,C=!1,C),i(34,Nt=!1),i(13,Lt=!1),Promise.resolve().then(()=>{if(Le&&xe){const jt=Ve||et.detail,Gt=n?tn(Ht*jt.scalar,s,l):1,ce=Ue({elastify:!1,translation:jt.translation,zoom:Gt});Yt.set(ce)}xe=void 0,Ht=void 0,tt&&et.detail.isDoubleTap&&Fe(),Se()})};let Jt,Ci=Date.now(),X=0,Vt=!1,H=!1;const ie=et=>{if(!Re(et)||(et.preventDefault(),et.stopPropagation(),H))return;clearTimeout(Jt);const jt=Nu(et,{fixScrollDirection:S}),Gt=Date.now(),ce=Gt-Ci;Ci=Gt;const Ne=Math.abs(jt/ce)>.2;X=Ne?X+1:0;const He=1+-1*jt*xt/(Ne?50:100),Me=ph(et,x,f);pe(Me,He,{isZoomingFast:Ne})},pe=(et,jt,{isZoomingFast:Gt})=>{const ce=m?p||g:o?p||1:p||g,Ne=ce*jt,He=an(),Me=h,gn=m?g:o?1:g,rn=Math.abs(Ne-gn),ve=Ne<ce,ii=ce>gn&&ve||ce<gn&&Ne>ce,Pe=X>=5;if(Gt||(Vt=!1),X>0&&!Vt&&(Vt=ii),Pe&&Vt)return Fe(),H=!0,void setTimeout(()=>{H=!1},100);if(Pe)return;!Gt&&ii&&rn<=.05&&(Jt=setTimeout(()=>{Fe()},250)),vt(Ut,p=tn(Ne,s,l),p);const ci=Pi(w);Fr(ci,ce),na(ci,Me);const je=Ri(ci),te=Pi(ci);Fr(te,p-ce+1,et);const De=Ri(te),ki=xm(Dn(De,je),ce);((bn,Mn,Hn)=>{bn.x=Mn,bn.y=Hn})(He,Me.x+ki.x,Me.y+ki.y),vt(Yt,h=ve&&Gt?Dr(We(h),.85):be(He,ce),h),Se()},we=et=>(et?"add":"remove")+"EventListener";let ye,ee,qt,ei;const Ze=et=>{et.preventDefault(),ee={...h},ei=Pi(w),qt=ph(et,x,f),ye=m?p||g:o?p||1:p||g},lt=et=>{et.preventDefault(),vt(Ut,p=tn(et.scale*ye,s,l),p);const jt=Pi(ei);Fr(jt,ye),na(jt,ee);const Gt=Ri(jt),ce=Pi(jt);Fr(ce,p-ye+1,qt);const Ne=Ri(ce),He=xm(Dn(Ne,Gt),ye),Me={x:ee.x+He.x,y:ee.y+He.y};vt(Yt,h=be(Me,p),h)},Dt=et=>{et.preventDefault()},re=et=>{T[we(et)]("wheel",ie),sa()||(T[we(et)]("gesturestart",Ze),T[we(et)]("gesturechange",lt),T[we(et)]("gestureend",Dt))},Te=et=>{const jt=we(et);T[jt]("interactionstart",Ge),T[jt]("interactionupdate",Qe),T[jt]("interactionrelease",vi),T[jt]("interactionend",Si)};let Qt;return Ls(()=>{Qt=Fs(T,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:Re})}),Uo(()=>{re(!1),Te(!1),Qt.destroy(),Qt=void 0}),t.$$set=et=>{"root"in et&&i(14,T=et.root),"locale"in et&&i(15,D=et.locale),"stores"in et&&i(16,U=et.stores),"allowPan"in et&&i(17,P=et.allowPan),"allowZoom"in et&&i(18,y=et.allowZoom),"enablePan"in et&&i(19,V=et.enablePan),"enableZoom"in et&&i(20,nt=et.enableZoom),"enableZoomControls"in et&&i(21,k=et.enableZoomControls),"enableZoomInput"in et&&i(22,N=et.enableZoomInput),"enablePanInput"in et&&i(23,tt=et.enablePanInput),"enablePanLimit"in et&&i(24,ct=et.enablePanLimit),"panLimitGutterScalar"in et&&i(25,ot=et.panLimitGutterScalar),"zoomOptions"in et&&i(26,mt=et.zoomOptions),"zoomAdjustStep"in et&&i(27,Z=et.zoomAdjustStep),"zoomAdjustFactor"in et&&i(28,gt=et.zoomAdjustFactor),"zoomAdjustWheelFactor"in et&&i(29,xt=et.zoomAdjustWheelFactor),"elasticity"in et&&i(30,dt=et.elasticity),"imageSelectionRectCentered"in et&&i(31,wt=et.imageSelectionRectCentered),"imageSelectionRectScalar"in et&&i(32,J=et.imageSelectionRectScalar),"zoomLevel"in et&&i(33,q=et.zoomLevel),"zoomControls"in et&&i(12,ft=et.zoomControls),"zoomMultiTouching"in et&&i(13,Lt=et.zoomMultiTouching)},t.$$.update=()=>{var et,jt;5505024&t.$$.dirty[0]&&i(36,n=y&&nt&&N),655360&t.$$.dirty[0]&&i(35,r=P&&V),393216&t.$$.dirty[0]&&(P||y?(vt(Ut,p=nt?B.zoom:void 0,p),vt(Yt,h=V?We(B.translation):Xt()?h:an(),h),Xe.set(p)):Be()),32768&t.$$.dirty[1]&&(o=I>=1),67141632&t.$$.dirty[0]|57344&t.$$.dirty[1]&&i(40,a=[(m||I<1)&&[g,Ms(g)+"%",{sublabel:D.labelZoomFit}],...mt.map(Gt=>[Gt,Ms(Gt)+"%"])].filter(Boolean).map(Gt=>(Gt[0]===1&&(Gt[2]={sublabel:D.labelZoomActual}),Gt)).sort((Gt,ce)=>{const Ne=Gt[0]||g,He=ce[0]||g;return Ne<He?-1:He<Ne?1:0})),8704&t.$$.dirty[1]&&i(38,s=Math.min(a.reduce((Gt,[ce])=>ce<Gt?ce:Gt,Number.MAX_SAFE_INTEGER),g)),512&t.$$.dirty[1]&&i(37,l=a.reduce((Gt,[ce])=>ce>Gt?ce:Gt,Number.MIN_SAFE_INTEGER)),4&t.$$.dirty[1]&&q!==null&&bt(q),61440&t.$$.dirty[1]&&i(42,d=p||(m||I<1?g:1)),2560&t.$$.dirty[1]&&i(39,(et=a.map(([Gt])=>Gt),jt=d,c=et.findIndex(Gt=>Gt===jt))),2048&t.$$.dirty[1]&&i(41,u=Ms(d)+"%"),405045248&t.$$.dirty[0]|6080&t.$$.dirty[1]&&i(12,ft=(y||y)&&k?[["Button","zoom-out",{hideLabel:!0,label:D.labelZoomOut,icon:D.iconZoomOut,disabled:p===s,onclick:()=>yi(Gt=>Math.max(s,Gt-Z)),onhold:()=>yi(Gt=>Math.max(s,Gt*(1-gt)))}],["Dropdown","zoom-level",{label:u,labelClass:"PinturaFixedWidthCharacters",options:a,selectedIndex:c,onchange:Gt=>bt(Gt.value)}],["Button","zoom-in",{hideLabel:!0,label:D.labelZoomIn,icon:D.iconZoomIn,disabled:p===l,onclick:()=>yi(Gt=>Math.min(l,Gt+Z)),onhold:()=>yi(Gt=>Math.min(l,Gt*(1+gt)))}]]:[]),16384&t.$$.dirty[0]|32&t.$$.dirty[1]&&T&&re(n),16384&t.$$.dirty[0]|16&t.$$.dirty[1]&&T&&Te(r),8404992&t.$$.dirty[0]|24&t.$$.dirty[1]&&T&&T.style.setProperty("--cursor",r&&tt?Nt?"grabbing":"grab":"")},[_,rt,zt,Zt,Ot,Yt,Ut,ht,G,kt,ne,ue,ft,Lt,T,D,U,P,y,V,nt,k,N,tt,ct,ot,mt,Z,gt,xt,dt,wt,J,q,Nt,r,n,l,s,c,a,u,d,p,g,m,I]}class l3 extends li{constructor(e){super(),si(this,e,s3,null,oi,{root:14,locale:15,stores:16,allowPan:17,allowZoom:18,enablePan:19,enableZoom:20,enableZoomControls:21,enableZoomInput:22,enablePanInput:23,enablePanLimit:24,panLimitGutterScalar:25,zoomOptions:26,zoomAdjustStep:27,zoomAdjustFactor:28,zoomAdjustWheelFactor:29,elasticity:30,imageSelectionRectCentered:31,imageSelectionRectScalar:32,zoomLevel:33,zoomControls:12,zoomMultiTouching:13},null,[-1,-1,-1,-1])}}const{window:rl}=e2;function Bg(t){let e,i,n,r=t[41]&&Og(t),o=t[38]&&Ng(t);return{c(){r&&r.c(),e=$e(),o&&o.c(),i=Tn()},m(a,s){r&&r.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,i,s),n=!0},p(a,s){a[41]?r?(r.p(a,s),1024&s[1]&&M(r,1)):(r=Og(a),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee()),a[38]?o?(o.p(a,s),128&s[1]&&M(o,1)):(o=Ng(a),o.c(),M(o,1),o.m(i.parentNode,i)):o&&(Ie(),F(o,1,1,()=>{o=null}),Ee())},i(a){n||(M(r),M(o),n=!0)},o(a){F(r),F(o),n=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(i)}}}function Og(t){let e,i,n,r,o,a;const s=[d3,c3],l=[];function c(d,u){return d[39]?0:d[35]?1:-1}return~(n=c(t))&&(r=l[n]=s[n](t)),{c(){e=ut("div"),i=ut("p"),r&&r.c(),v(i,"style",t[72]),v(e,"class","PinturaStatus"),v(e,"style",o="opacity: "+t[54])},m(d,u){it(d,e,u),St(e,i),~n&&l[n].m(i,null),a=!0},p(d,u){let p=n;n=c(d),n===p?~n&&l[n].p(d,u):(r&&(Ie(),F(l[p],1,1,()=>{l[p]=null}),Ee()),~n?(r=l[n],r?r.p(d,u):(r=l[n]=s[n](d),r.c()),M(r,1),r.m(i,null)):r=null),(!a||1024&u[2])&&v(i,"style",d[72]),(!a||8388608&u[1]&&o!==(o="opacity: "+d[54]))&&v(e,"style",o)},i(d){a||(M(r),a=!0)},o(d){F(r),a=!1},d(d){d&&Q(e),~n&&l[n].d()}}}function c3(t){let e,i,n,r;e=new R2({props:{text:t[35].text||"",onmeasure:t[221]}});let o=t[35].aside&&Wg(t);return{c(){It(e.$$.fragment),i=$e(),o&&o.c(),n=Tn()},m(a,s){Pt(e,a,s),it(a,i,s),o&&o.m(a,s),it(a,n,s),r=!0},p(a,s){const l={};16&s[1]&&(l.text=a[35].text||""),e.$set(l),a[35].aside?o?(o.p(a,s),16&s[1]&&M(o,1)):(o=Wg(a),o.c(),M(o,1),o.m(n.parentNode,n)):o&&(Ie(),F(o,1,1,()=>{o=null}),Ee())},i(a){r||(M(e.$$.fragment,a),M(o),r=!0)},o(a){F(e.$$.fragment,a),F(o),r=!1},d(a){Rt(e,a),a&&Q(i),o&&o.d(a),a&&Q(n)}}}function d3(t){let e,i,n,r;return e=new R2({props:{text:t[39],onmeasure:t[221]}}),n=new E2({props:{class:"PinturaStatusIcon",offset:t[82],opacity:t[83],$$slots:{default:[h3]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment),i=$e(),It(n.$$.fragment)},m(o,a){Pt(e,o,a),it(o,i,a),Pt(n,o,a),r=!0},p(o,a){const s={};256&a[1]&&(s.text=o[39]),e.$set(s);const l={};1048576&a[2]&&(l.offset=o[82]),2097152&a[2]&&(l.opacity=o[83]),8&a[0]|16384&a[19]&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){r||(M(e.$$.fragment,o),M(n.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),F(n.$$.fragment,o),r=!1},d(o){Rt(e,o),o&&Q(i),Rt(n,o)}}}function Wg(t){let e,i;return e=new E2({props:{class:"PinturaStatusButton",offset:t[82],opacity:t[83],$$slots:{default:[u3]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};1048576&r[2]&&(o.offset=n[82]),2097152&r[2]&&(o.opacity=n[83]),16&r[1]|16384&r[19]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function _g(t){let e,i;return e=new I2({props:{progress:t[35].progressIndicator.progress}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16&r[1]&&(o.progress=n[35].progressIndicator.progress),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function Vg(t){let e,i;const n=[t[35].closeButton,{hideLabel:!0}];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new ls({props:r}),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=16&a[1]?Tr(n,[Br(o[35].closeButton),n[1]]):{};e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){Rt(e,o)}}}function u3(t){let e,i,n,r=t[35].progressIndicator.visible&&_g(t),o=t[35].closeButton&&t[35].text&&Vg(t);return{c(){r&&r.c(),e=$e(),o&&o.c(),i=Tn()},m(a,s){r&&r.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,i,s),n=!0},p(a,s){a[35].progressIndicator.visible?r?(r.p(a,s),16&s[1]&&M(r,1)):(r=_g(a),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee()),a[35].closeButton&&a[35].text?o?(o.p(a,s),16&s[1]&&M(o,1)):(o=Vg(a),o.c(),M(o,1),o.m(i.parentNode,i)):o&&(Ie(),F(o,1,1,()=>{o=null}),Ee())},i(a){n||(M(r),M(o),n=!0)},o(a){F(r),F(o),n=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(i)}}}function p3(t){let e,i=t[3].iconSupportError+"";return{c(){e=kr("g")},m(n,r){it(n,e,r),e.innerHTML=i},p(n,r){8&r[0]&&i!==(i=n[3].iconSupportError+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function h3(t){let e,i;return e=new Lo({props:{$$slots:{default:[p3]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};8&r[0]|16384&r[19]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function Ng(t){let e,i,n,r,o,a,s,l,c,d,u,p,h,g,m=t[10]&&Hg(t),f=t[46]&&t[45]&&jg(t);const x=[x3,b3],w=[];function S(T,D){return T[46]?0:1}function C(T){t[438](T)}function I(T){t[439](T)}function E(T){t[440](T)}n=S(t),r=w[n]=x[n](t),a=new n4({props:{isAnimated:t[53],isTransparent:t[20],pixelRatio:t[57],textPixelRatio:t[6],backgroundColor:t[56],maskRect:t[58],maskOpacity:t[73]?t[73].maskOpacity:1,maskMarkupOpacity:t[7],maskFrameOpacity:t[5],clipAnnotationsToImage:t[85],images:t[55],interfaceImages:t[86],loadImageData:t[28],enableGrid:t[11],gridSize:t[87],gridColors:[t[88],t[89]],gridOpacity:t[90],selectionColor:t[91],csp:t[92]||{},willRequest:t[81]||t[93],willRender:t[435],didRender:t[436]}});let B={root:t[2],locale:t[3],stores:t[202],allowPan:t[95],enablePan:t[17],enablePanLimit:t[21],panLimitGutterScalar:t[22],enablePanInput:t[96],allowZoom:t[97],enableZoom:t[18],enableZoomInput:t[19]!==void 0?t[19]:t[98],enableZoomControls:t[99],zoomOptions:t[13]||t[23],zoomAdjustStep:t[14]||t[24],zoomAdjustFactor:t[15]||t[25],zoomAdjustWheelFactor:t[16]||t[26],imageSelectionRectCentered:t[100],imageSelectionRectScalar:t[101],elasticity:hh*t[8]};return t[0]!==void 0&&(B.zoomLevel=t[0]),t[33]!==void 0&&(B.zoomControls=t[33]),t[34]!==void 0&&(B.zoomMultiTouching=t[34]),d=new l3({props:B}),Wi.push(()=>ko(d,"zoomLevel",C)),Wi.push(()=>ko(d,"zoomControls",I)),Wi.push(()=>ko(d,"zoomMultiTouching",E)),{c(){m&&m.c(),e=$e(),f&&f.c(),i=$e(),r.c(),o=$e(),It(a.$$.fragment),s=$e(),l=ut("div"),c=$e(),It(d.$$.fragment),v(l,"class","PinturaRootPortal")},m(T,D){m&&m.m(T,D),it(T,e,D),f&&f.m(T,D),it(T,i,D),w[n].m(T,D),it(T,o,D),Pt(a,T,D),it(T,s,D),it(T,l,D),t[437](l),it(T,c,D),Pt(d,T,D),g=!0},p(T,D){T[10]?m?(m.p(T,D),1024&D[0]&&M(m,1)):(m=Hg(T),m.c(),M(m,1),m.m(e.parentNode,e)):m&&(Ie(),F(m,1,1,()=>{m=null}),Ee()),T[46]&&T[45]?f?(f.p(T,D),49152&D[1]&&M(f,1)):(f=jg(T),f.c(),M(f,1),f.m(i.parentNode,i)):f&&(Ie(),F(f,1,1,()=>{f=null}),Ee());let U=n;n=S(T),n===U?w[n].p(T,D):(Ie(),F(w[U],1,1,()=>{w[U]=null}),Ee(),r=w[n],r?r.p(T,D):(r=w[n]=x[n](T),r.c()),M(r,1),r.m(o.parentNode,o));const P={};4194304&D[1]&&(P.isAnimated=T[53]),1048576&D[0]&&(P.isTransparent=T[20]),67108864&D[1]&&(P.pixelRatio=T[57]),64&D[0]&&(P.textPixelRatio=T[6]),33554432&D[1]&&(P.backgroundColor=T[56]),134217728&D[1]&&(P.maskRect=T[58]),2048&D[2]&&(P.maskOpacity=T[73]?T[73].maskOpacity:1),128&D[0]&&(P.maskMarkupOpacity=T[7]),32&D[0]&&(P.maskFrameOpacity=T[5]),8388608&D[2]&&(P.clipAnnotationsToImage=T[85]),16777216&D[1]&&(P.images=T[55]),16777216&D[2]&&(P.interfaceImages=T[86]),268435456&D[0]&&(P.loadImageData=T[28]),2048&D[0]&&(P.enableGrid=T[11]),33554432&D[2]&&(P.gridSize=T[87]),201326592&D[2]&&(P.gridColors=[T[88],T[89]]),268435456&D[2]&&(P.gridOpacity=T[90]),536870912&D[2]&&(P.selectionColor=T[91]),1073741824&D[2]&&(P.csp=T[92]||{}),524288&D[2]|1&D[3]&&(P.willRequest=T[81]||T[93]),512&D[0]|270991424&D[1]|2&D[3]&&(P.willRender=T[435]),62&D[2]&&(P.didRender=T[436]),a.$set(P);const y={};4&D[0]&&(y.root=T[2]),8&D[0]&&(y.locale=T[3]),4&D[3]&&(y.allowPan=T[95]),131072&D[0]&&(y.enablePan=T[17]),2097152&D[0]&&(y.enablePanLimit=T[21]),4194304&D[0]&&(y.panLimitGutterScalar=T[22]),8&D[3]&&(y.enablePanInput=T[96]),16&D[3]&&(y.allowZoom=T[97]),262144&D[0]&&(y.enableZoom=T[18]),524288&D[0]|32&D[3]&&(y.enableZoomInput=T[19]!==void 0?T[19]:T[98]),64&D[3]&&(y.enableZoomControls=T[99]),8396800&D[0]&&(y.zoomOptions=T[13]||T[23]),16793600&D[0]&&(y.zoomAdjustStep=T[14]||T[24]),33587200&D[0]&&(y.zoomAdjustFactor=T[15]||T[25]),67174400&D[0]&&(y.zoomAdjustWheelFactor=T[16]||T[26]),128&D[3]&&(y.imageSelectionRectCentered=T[100]),256&D[3]&&(y.imageSelectionRectScalar=T[101]),256&D[0]&&(y.elasticity=hh*T[8]),!u&&1&D[0]&&(u=!0,y.zoomLevel=T[0],Ao(()=>u=!1)),!p&&4&D[1]&&(p=!0,y.zoomControls=T[33],Ao(()=>p=!1)),!h&&8&D[1]&&(h=!0,y.zoomMultiTouching=T[34],Ao(()=>h=!1)),d.$set(y)},i(T){g||(M(m),M(f),M(r),M(a.$$.fragment,T),M(d.$$.fragment,T),g=!0)},o(T){F(m),F(f),F(r),F(a.$$.fragment,T),F(d.$$.fragment,T),g=!1},d(T){m&&m.d(T),T&&Q(e),f&&f.d(T),T&&Q(i),w[n].d(T),T&&Q(o),Rt(a,T),T&&Q(s),T&&Q(l),t[437](null),T&&Q(c),Rt(d,T)}}}function Hg(t){let e,i,n,r,o;return i=new mo({props:{items:t[69]}}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"class","PinturaNav PinturaNavTools")},m(a,s){it(a,e,s),Pt(i,e,null),n=!0,r||(o=[Mt(e,"measure",t[424]),Zi(Mr.call(null,e))],r=!0)},p(a,s){const l={};128&s[2]&&(l.items=a[69]),i.$set(l)},i(a){n||(M(i.$$.fragment,a),n=!0)},o(a){F(i.$$.fragment,a),n=!1},d(a){a&&Q(e),Rt(i),r=!1,ji(o)}}}function jg(t){let e,i,n;return i=new Ta({props:{elasticity:t[8]*mh,scrollDirection:t[76]?"y":"x",$$slots:{default:[y3]},$$scope:{ctx:t}}}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"class","PinturaNav PinturaNavMain")},m(r,o){it(r,e,o),Pt(i,e,null),n=!0},p(r,o){const a={};256&o[0]&&(a.elasticity=r[8]*mh),16384&o[2]&&(a.scrollDirection=r[76]?"y":"x"),12288&o[1]|135168&o[2]|16384&o[19]&&(a.$$scope={dirty:o,ctx:r}),i.$set(a)},i(r){n||(M(i.$$.fragment,r),n=!0)},o(r){F(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Rt(i)}}}function m3(t){let e,i;const n=[t[79],{tabs:t[44]}];let r={$$slots:{default:[f3,({tab:o})=>({602:o}),({tab:o})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o?8192:0]]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new _u({props:r}),e.$on("select",t[425]),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=8192&a[1]|131072&a[2]?Tr(n,[131072&a[2]&&Br(o[79]),8192&a[1]&&{tabs:o[44]}]):{};24576&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){Rt(e,o)}}}function $3(t){let e,i;return e=new mo({props:{items:t[44]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};8192&r[1]&&(o.items=n[44]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function g3(t){let e,i=t[602].icon+"";return{c(){e=kr("g")},m(n,r){it(n,e,r),e.innerHTML=i},p(n,r){8192&r[19]&&i!==(i=n[602].icon+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function f3(t){let e,i,n,r,o,a=t[602].label+"";return e=new Lo({props:{$$slots:{default:[g3]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment),i=$e(),n=ut("span"),r=$n(a)},m(s,l){Pt(e,s,l),it(s,i,l),it(s,n,l),St(n,r),o=!0},p(s,l){const c={};24576&l[19]&&(c.$$scope={dirty:l,ctx:s}),e.$set(c),(!o||8192&l[19])&&a!==(a=s[602].label+"")&&Ln(r,a)},i(s){o||(M(e.$$.fragment,s),o=!0)},o(s){F(e.$$.fragment,s),o=!1},d(s){Rt(e,s),s&&Q(i),s&&Q(n)}}}function y3(t){let e,i,n,r;const o=[$3,m3],a=[];function s(l,c){return l[74]?0:1}return e=s(t),i=a[e]=o[e](t),{c(){i.c(),n=Tn()},m(l,c){a[e].m(l,c),it(l,n,c),r=!0},p(l,c){let d=e;e=s(l),e===d?a[e].p(l,c):(Ie(),F(a[d],1,1,()=>{a[d]=null}),Ee(),i=a[e],i?i.p(l,c):(i=a[e]=o[e](l),i.c()),M(i,1),i.m(n.parentNode,n))},i(l){r||(M(i),r=!0)},o(l){F(i),r=!1},d(l){a[e].d(l),l&&Q(n)}}}function b3(t){let e,i,n;function r(a){t[431](a)}let o={locale:t[3],class:"PinturaMain",view:t[207](t[43]),props:t[206](t[43],t[27]),stores:t[202]};return t[1][t[43]]!==void 0&&(o.component=t[1][t[43]]),e=new C2({props:o}),Wi.push(()=>ko(e,"component",r)),e.$on("measure",t[233]),e.$on("show",t[432]),e.$on("hide",t[433]),e.$on("fade",t[434]),{c(){It(e.$$.fragment)},m(a,s){Pt(e,a,s),n=!0},p(a,s){const l={};8&s[0]&&(l.locale=a[3]),4096&s[1]&&(l.view=a[207](a[43])),134217728&s[0]|4096&s[1]&&(l.props=a[206](a[43],a[27])),!i&&2&s[0]|4096&s[1]&&(i=!0,l.component=a[1][a[43]],Ao(()=>i=!1)),e.$set(l)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){Rt(e,a)}}}function x3(t){let e,i;const n=[{class:"PinturaMain"},{visible:t[62]},t[79],{panels:t[78]}];let r={$$slots:{default:[v3,({panel:o,panelIsActive:a})=>({600:o,601:a}),({panel:o,panelIsActive:a})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(o?2048:0)|(a?4096:0)]]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new Vu({props:r}),e.$on("measure",t[430]),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=196609&a[2]?Tr(n,[n[0],1&a[2]&&{visible:o[62]},131072&a[2]&&Br(o[79]),65536&a[2]&&{panels:o[78]}]):{};134217738&a[0]|22528&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){Rt(e,o)}}}function v3(t){let e,i,n;function r(a){t[426](a,t[600])}let o={locale:t[3],view:t[207](t[600]),props:t[206](t[600],t[27]),isActive:t[601],stores:t[202]};return t[1][t[600]]!==void 0&&(o.component=t[1][t[600]]),e=new C2({props:o}),Wi.push(()=>ko(e,"component",r)),e.$on("measure",t[233]),e.$on("show",function(){return t[427](t[600])}),e.$on("hide",function(){return t[428](t[600])}),e.$on("fade",function(...a){return t[429](t[600],...a)}),{c(){It(e.$$.fragment)},m(a,s){Pt(e,a,s),n=!0},p(a,s){t=a;const l={};8&s[0]&&(l.locale=t[3]),2048&s[19]&&(l.view=t[207](t[600])),134217728&s[0]|2048&s[19]&&(l.props=t[206](t[600],t[27])),4096&s[19]&&(l.isActive=t[601]),!i&&2&s[0]|2048&s[19]&&(i=!0,l.component=t[1][t[600]],Ao(()=>i=!1)),e.$set(l)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){Rt(e,a)}}}function Ug(t){let e,i;return{c(){e=ut("span"),v(e,"class","PinturaEditorOverlay"),v(e,"style",i="opacity:"+t[102])},m(n,r){it(n,e,r)},p(n,r){512&r[3]&&i!==(i="opacity:"+n[102])&&v(e,"style",i)},d(n){n&&Q(e)}}}function Gg(t){let e,i;const n=[{layout:"row"},{parentRect:t[50]},t[60]];let r={$$slots:{default:[w3]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new W2({props:r}),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=537395200&a[1]?Tr(n,[n[0],524288&a[1]&&{parentRect:o[50]},536870912&a[1]&&Br(o[60])]):{};1610612736&a[1]|16384&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){Rt(e,o)}}}function w3(t){let e,i,n;return{c(){e=ut("input"),e.value=i=t[60].text,v(e,"placeholder",n=t[60].placeholder),v(e,"type","text"),v(e,"spellcheck","false"),v(e,"autocorrect","off"),v(e,"autocapitalize","off")},m(r,o){it(r,e,o),t[441](e)},p(r,o){536870912&o[1]&&i!==(i=r[60].text)&&e.value!==i&&(e.value=i),536870912&o[1]&&n!==(n=r[60].placeholder)&&v(e,"placeholder",n)},d(r){r&&Q(e),t[441](null)}}}function S3(t){let e,i,n,r,o,a;Hl(t[423]);let s=t[40]&&Bg(t),l=t[102]>0&&Ug(t),c=t[60]&&Gg(t);return{c(){e=ut("div"),s&&s.c(),i=$e(),l&&l.c(),n=$e(),c&&c.c(),v(e,"id",t[4]),v(e,"class",t[77]),v(e,"data-env",t[75]),v(e,"dir",t[12])},m(d,u){it(d,e,u),s&&s.m(e,null),St(e,i),l&&l.m(e,null),St(e,n),c&&c.m(e,null),t[442](e),r=!0,o||(a=[Mt(rl,"keydown",t[224]),Mt(rl,"keyup",t[225]),Mt(rl,"blur",t[226]),Mt(rl,"paste",t[230]),Mt(rl,"resize",t[423]),Mt(e,"ping",function(){Gi(t[68])&&t[68].apply(this,arguments)}),Mt(e,"contextmenu",t[227]),Mt(e,"touchstart",t[222],{passive:!1}),Mt(e,"touchmove",function(){Gi(t[71])&&t[71].apply(this,arguments)}),Mt(e,"pointermove",function(){Gi(t[70])&&t[70].apply(this,arguments)}),Mt(e,"transitionend",t[212]),Mt(e,"dropfiles",t[228]),Mt(e,"measure",t[443]),Mt(e,"click",function(){Gi(t[42]?t[229]:fe)&&(t[42]?t[229]:fe).apply(this,arguments)}),Zi(Mr.call(null,e,{observeViewRect:!0,isMeasureRoot:!0})),Zi(Qv.call(null,e)),Zi(k2.call(null,e))],o=!0)},p(d,u){(t=d)[40]?s?(s.p(t,u),512&u[1]&&M(s,1)):(s=Bg(t),s.c(),M(s,1),s.m(e,i)):s&&(Ie(),F(s,1,1,()=>{s=null}),Ee()),t[102]>0?l?l.p(t,u):(l=Ug(t),l.c(),l.m(e,n)):l&&(l.d(1),l=null),t[60]?c?(c.p(t,u),536870912&u[1]&&M(c,1)):(c=Gg(t),c.c(),M(c,1),c.m(e,null)):c&&(Ie(),F(c,1,1,()=>{c=null}),Ee()),(!r||16&u[0])&&v(e,"id",t[4]),(!r||32768&u[2])&&v(e,"class",t[77]),(!r||8192&u[2])&&v(e,"data-env",t[75]),(!r||4096&u[0])&&v(e,"dir",t[12])},i(d){r||(M(s),M(c),r=!0)},o(d){F(s),F(c),r=!1},d(d){d&&Q(e),s&&s.d(),l&&l.d(),c&&c.d(),t[442](null),o=!1,ji(a)}}}const hh=1,mh=10;function k3(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,w,S,C,I,E,B,T,D,U,P,y,V,nt,k,N,tt,ct,ot,mt,Z,gt,xt,dt,wt,J,q,ft,Lt,_,rt,zt,Zt,Ot,Yt,Ut,ht,G,kt,ne,ue,Nt,xe,Ht,ze,W,Re,Se,Xt,Be,Fe,Xe,yi,bt,be,Ue,Le,Ve,Ge,Qe,vi,Si,Jt,Ci,X,Vt,H,ie,pe,we,ye,ee,qt,ei,Ze,lt,Dt,re,Te,Qt,et,jt,Gt,ce,Ne,He,Me,gn,rn,ve,ii,Pe,ci,je,te,De,ki,bn,Mn,Hn,Gn,Ui,Zn,yr,$r,Pr,Go,ln,$o,en,pn,gi,ar,eo,zo,go,Fo,Or,Xn,cn,Yr,io,Wr,qr,br,no,Rr,_r,ro,Vr,Co,fo,Ir,Er,Ar,Nr,Yn,Li,jn,Bn,mn,Pn,Jn,Zo,ha,yo,On,Wn,Do,oo,_n,gr,Vn,Qn,Kr,bo,ao,O,se,pi,ti,he,de,Ti,oe,on,_i,Ii,xr,tr,xo,ma,Ma,z,ae,Oe,wi,Ei,zi,Ke,fi,Fi,bi,Hi,Rn,fn,vn,Ai,vr,Xo,Bs,Wa,_a,Pa,Va,ds,Na,$a,Ha,xn,so=Je,lo=Je;L(t,Kv,$=>i(411,ti=$)),t.$$.on_destroy.push(()=>so()),t.$$.on_destroy.push(()=>lo());const Lr=os(),Ki=Ca();let{class:To}=e,{layout:Ra}=e,{stores:Jr}=e,{locale:Ji}=e,{id:Kc}=e,{util:us}=e,{utils:Yl}=e,{animations:ps="auto"}=e,{disabled:Os=!1}=e,{status:Mo}=e,{previewUpscale:pl=!1}=e,{previewPad:ql=!1}=e,{previewMaskOpacity:Jc=.95}=e,{previewImageDataMaxSize:hl}=e,{previewImageTextPixelRatio:Kl}=e,{markupMaskOpacity:ml=1}=e,{zoomMaskOpacity:hs=.85}=e,{elasticityMultiplier:ja=10}=e,{willRevert:Jl=()=>Promise.resolve(!0)}=e,{willProcessImage:Ws=()=>Promise.resolve(!0)}=e,{willRenderCanvas:$l=qi}=e,{willRenderToolbar:Ua=qi}=e,{willRenderUtilTabs:gl=qi}=e,{willSetHistoryInitialState:Ga=qi}=e,{enableButtonExport:b=!0}=e,{enableButtonRevert:j=!0}=e,{enableNavigateHistory:A=!0}=e,{enableToolbar:K=!0}=e,{enableUtils:st=!0}=e,{enableButtonClose:Tt=!1}=e,{enableDropImage:Et=!1}=e,{enablePasteImage:Ft=!1}=e,{enableBrowseImage:At=!1}=e,{enableTransparencyGrid:Bt=!1}=e,{layoutDirectionPreference:Wt="auto"}=e,{layoutHorizontalUtilsPreference:Kt="left"}=e,{layoutVerticalUtilsPreference:ni="bottom"}=e,{layoutVerticalToolbarPreference:me="top"}=e,{layoutVerticalControlGroupsPreference:le="bottom"}=e,{layoutVerticalControlTabsPreference:ke="bottom"}=e,{textDirection:Ce}=e,{markupEditorZoomLevel:Ye=null}=e,{markupEditorZoomLevels:ri}=e,{markupEditorZoomAdjustStep:Mi}=e,{markupEditorZoomAdjustFactor:hi}=e,{markupEditorZoomAdjustWheelFactor:Di}=e,{markupEditorInteractionMode:hn=!1}=e,{muteAudio:Ni=!0}=e,{willSetMediaInitialTimeOffset:Oi=($,Y)=>$*a3(Y[0])}=e,{enablePan:wn=!0}=e,{enableZoom:nn=!0}=e,{enableZoomControls:qn=!0}=e,{enableZoomInput:dn}=e,{enablePanInput:Hr}=e,{enableCanvasAlpha:zr=!1}=e,{enablePanLimit:co}=e,{panLimitGutterScalar:Za}=e,{zoomPresetOptions:Xa=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:_s=.25}=e,{zoomAdjustFactor:Vs=.1}=e,{zoomAdjustWheelFactor:Ia=1}=e,{zoomLevel:Qr=null}=e,{fixScrollDirection:vo=!1}=e;const ms=ge(vo);let Bo,Ya;wo("fixScrollDirection",ms);let{imagePreviewSrc:Oo}=e,{imageOrienter:ga={read:()=>1,apply:$=>$}}=e,{pluginComponents:Yo}=e,{pluginOptions:qo={}}=e;const Qc=Lr.sub,fr={};let{root:kn}=e;const er=()=>{Me.setAttribute("data-redraw","true"),Hs.set({})},Ko=ge(!0);L(t,Ko,$=>i(476,Go=$));const Ql=ge(void 0);L(t,Ql,$=>i(421,Ei=$));const qa=ge(0);L(t,qa,$=>i(418,ae=$));const u0=ge(!1),td=$=>{u0.set($.type==="play"),Lr.pub($.type)};let p0,Zu,h0,Xu,Yu=!1;const qu=()=>{if(!o||!fl())return;Xu=u,vt(Ql,Ei=void 0,Ei);const $=Me;Yu=!1;const Y=1/24,$t=Ka();(Math.abs(c*$t-ae*$t)<=Y||$t-$t*ae<=Y)&&vt(qa,ae=l,ae),ed(ae*Ka()),$.play().catch(()=>{});let Ct=ec();const pt=()=>{if(fl())return;h0=requestAnimationFrame(pt);let yt=ec();yt-Ct<=0&&(yt=Ct+.01),Ct=yt,vt(qa,ae=yt/Ka(),ae),Xu>=0&&ae>=c&&(vt(qa,ae=c,ae),Ns()),u>-1&&(Yu=!0),Yu&&u===-1&&p>0&&(vt(qa,ae=s[p][0],ae),ed(ae*Ka())),vt(nd,xo=ae*Ka(),xo),er()};pt()},Ns=()=>{o&&!fl()&&(vt(Ql,Ei=void 0,Ei),Xu=void 0,Me.pause(),cancelAnimationFrame(h0),er())},fl=()=>Me&&Me.paused,Ku=()=>{if(o)return fl()?qu():Ns()},Ju=()=>{o&&(Me.muted=!0)},Qu=()=>{o&&(Me.muted=!1)},m0=()=>{o&&vt(tc,wi=!wi,wi)},tc=ge(Ni);L(t,tc,$=>i(420,wi=$));const Ka=()=>{if(o)return Me.duration},ec=()=>{if(o)return Me.currentTime},ed=$=>{o&&(Eg(Me,$),vt(qa,ae=$/Oe,ae))},Hs=ge({});L(t,Hs,$=>i(52,en=$)),wo("redrawTrigger",Hs);const id=ge(ja);L(t,id,$=>i(493,Ma=$)),wo("elasticityMultiplier",id);let ic=[];const t1=di();L(t,t1,$=>i(102,xn=$));const $0=Yh()||1024,g0=Un($0,$0),f0=d2(),sb=$=>Promise.resolve(ma&&ma($,{resourceType:"image"})).then(Y=>{if(Y===!1)return;const{headers:$t,credentials:Ct}=Y||{};return fetch($,{headers:$t,credentials:Ct}).then(pt=>{if(pt.status!==200)throw`${pt.status} (${pt.statusText})`;return pt.blob()}).then(pt=>zg(pt,ga,f0)).then(pt=>Fg(pt,m))});let{imageSourceToImageData:e1=$=>_e($)?sb($):Vl($)?new Promise(Y=>Y(Zc($))):Eh($)||Yc($)?zg($,ga,f0).then(Y=>Fg(Y,m)):void 0}=e;const i1=(()=>{let $,Y;const $t=Ag.reduce((Ct,pt)=>(Ct[pt]=function(yt,_t,qe){let mi=[];return{set:_t,update:qe,publish:Vi=>{mi.forEach(Xi=>Xi(Vi))},subscribe:Vi=>(mi.push(Vi),yt(Vi),()=>{mi=mi.filter(Xi=>Xi!==Vi)})}}(yt=>{if(!Y)return yt();Y.stores[pt].subscribe(yt)()},yt=>{Y&&Y.stores[pt].set(yt)},yt=>{Y&&Y.stores[pt].update(yt)}),Ct),{});return{update:Ct=>{if(Y=Ct,$&&($.forEach(pt=>pt()),$=void 0),!Ct)return $t.file.publish(void 0),void $t.loadState.publish(void 0);$=Ag.map(pt=>Ct.stores[pt].subscribe(yt=>{$t[pt].publish(yt)}))},stores:$t,destroy:()=>{$&&$.forEach(Ct=>Ct())}}})(),{file:n1,size:js,duration:r1,currentTime:nd,trim:o1,volume:y0,minDuration:lb,maxDuration:a1,loadState:rd,processState:s1,cropAspectRatio:od,cropLimitToImage:l1,crop:fa,cropMinSize:cb,cropMaxSize:db,cropRange:ub,cropOrigin:pb,cropRectAspectRatio:hb,rotation:yl,rotationRange:mb,targetSize:$b,flipX:ad,flipY:sd,backgroundColor:ld,backgroundImage:b0,colorMatrix:x0,convolutionMatrix:v0,gamma:w0,vignette:S0,noise:k0,decoration:cd,annotation:dd,manipulation:ud,redaction:pd,frame:Us,selection:c1,state:hd}=i1.stores;L(t,n1,$=>i(395,Vr=$)),L(t,js,$=>i(368,ve=$)),L(t,r1,$=>i(419,Oe=$)),L(t,nd,$=>i(492,xo=$)),L(t,o1,$=>i(416,tr=$)),L(t,y0,$=>i(417,z=$)),L(t,a1,$=>i(422,zi=$)),L(t,rd,$=>i(387,cn=$)),L(t,s1,$=>i(386,Xn=$)),L(t,od,$=>i(489,de=$)),L(t,l1,$=>i(85,bi=$)),L(t,fa,$=>i(406,Wn=$)),L(t,yl,$=>i(371,ci=$)),L(t,ad,$=>i(370,Pe=$)),L(t,sd,$=>i(369,ii=$)),L(t,ld,$=>i(377,yr=$)),L(t,cd,$=>i(48,rn=$)),L(t,dd,$=>i(49,je=$)),L(t,ud,$=>i(374,Gn=$)),L(t,pd,$=>i(375,Ui=$)),L(t,Us,$=>i(47,gn=$)),L(t,c1,$=>i(59,_i=$)),L(t,hd,$=>i(478,Ir=$)),wo("components",{DynamicComponentTree:mo}),wo("previewcontrols",{play:qu,pause:Ns,togglePlayPause:Ku,mute:Ju,unmute:Qu,toggleMute:m0,setCurrentTime:ed,getCurrentTime:ec,getDuration:Ka,frameOffset:qa,framePeekOffset:Ql,isPlaying:u0,isMuted:tc});const C0=($,Y,$t=0)=>new Promise((Ct,pt)=>{if(Xl($))return void h2($).then(mi=>{const Vi=ui(xo)?xo:Oi(mi.duration,tr||[[0,1]]);m2(mi,Vi).then(Ct)});let yt,_t=!1;Y.cancel=()=>_t=!0;const qe=Date.now();e1($).then(mi=>{const Vi=Date.now()-qe;clearTimeout(yt),yt=setTimeout(()=>{_t||Ct(mi)},Math.max(0,$t-Vi))}).catch(pt)}),{images:T0,shapePreprocessor:M0,imageScrambler:P0,imageRedactionRendering:R0,willRequest:I0,willRequestResource:E0,csp:A0}=Jr;let nc;L(t,T0,$=>i(415,xr=$)),L(t,M0,$=>i(414,Ii=$)),L(t,P0,$=>i(378,$r=$)),L(t,R0,$=>i(376,Zn=$)),L(t,I0,$=>i(81,ma=$)),L(t,E0,$=>i(93,Bs=$)),L(t,A0,$=>i(92,Xo=$));const gb=Bi(b0,($,Y)=>{if(!$)return Y(void 0);nc&&(nc.cancel(),nc=void 0),nc={cancel:fe},C0($,nc).then(Y).catch($t=>{})}),fb=hd.subscribe($=>Lr.pub("update",$)),yb=ge();wo("ui",ge({})),wo("selection",c1);const d1=ge(!0);L(t,d1,$=>i(95,_a=$));const u1=ge(!0);L(t,u1,$=>i(97,Va=$));const p1=ge(!0);L(t,p1,$=>i(413,on=$));const md=ge(!0);L(t,md,$=>i(490,Ti=$));const h1=ge(!0);L(t,h1,$=>i(98,ds=$));const m1=ge();L(t,m1,$=>i(99,Na=$));const $d=ge();L(t,$d,$=>i(491,oe=$));const $1=Bi([$d,md],()=>oe!==void 0?oe:Ti);L(t,$1,$=>i(96,Pa=$));const rc=ge([0,0,0]);L(t,rc,$=>i(56,Li=$));const gd=ge([1,1,1]);L(t,gd,$=>i(474,Hn=$));const oc=di([1,1,1]);L(t,oc,$=>i(473,Mn=$));const g1=ge();L(t,g1,$=>i(91,vr=$));const L0=ge(),f1=ge();L(t,f1,$=>i(51,ln=$));const bl=ge();L(t,bl,$=>i(372,De=$));const xl=ge(ks());L(t,xl,$=>i(80,Er=$));const y1=ge(0);L(t,y1,$=>i(412,he=$));const ac=ge(ks());L(t,ac,$=>i(84,Fi=$));const Gs=ge();L(t,Gs,$=>i(471,He=$));const fd=Lg("(pointer: fine)",$=>$?"pointer-fine":"pointer-coarse");L(t,fd,$=>i(393,_r=$));const yd=Lg("(hover: hover)",$=>$?"pointer-hover":"pointer-no-hover");L(t,yd,$=>i(392,Rr=$));const z0=ge(!1),sc=ge(!1);L(t,sc,$=>i(373,bn=$));const b1=Ll(void 0,$=>{const Y=di(0),$t=[sc.subscribe(Ct=>{Y.set(Ct?1:0,{hard:!gi})}),Y.subscribe($)];return()=>$t.forEach(Ct=>Ct())});L(t,b1,$=>i(472,ki=$));const bd=ge();L(t,bd,$=>i(477,qr=$));const xd=ge();let x1;L(t,xd,$=>i(53,gi=$)),wo("isAnimated",xd);const vd=ge(pl);L(t,vd,$=>i(396,Co=$));const Zs=ge(!1);L(t,Zs,$=>i(483,_n=$)),wo("imageIsStatic",Zs);const lc=ge();L(t,lc,$=>i(484,gr=$));const v1=ge();L(t,v1,$=>i(481,Do=$));const F0=Ll(void 0,$=>{const Y=ge(void 0),$t=[fa.subscribe(()=>{if(!Wn)return;if(_n)return Y.set(Pi(Wn));const Ct=_$(Wn,Do,5*ja);Y.set(Ct)}),Y.subscribe($)];return()=>$t.forEach(Ct=>Ct())}),Jo=ge();L(t,Jo,$=>i(480,On=$));const wd=ge();L(t,wd,$=>i(482,oo=$));const w1=ge(void 0);L(t,w1,$=>i(487,O=$));const D0=ge(an());L(t,D0,$=>i(488,se=$));const B0=($,Y)=>{if(!Y||!$)return{top:0,right:0,bottom:0,left:0};const $t=Dy(Y,$,f),Ct=Fy($t,$);return{top:Math.abs(Ct.top),right:Math.abs(Ct.right),bottom:Math.abs(Ct.bottom),left:Math.abs(Ct.left)}},O0=ge({}),S1=Bi([Gs,xl,ac,O0],([$,Y,$t,Ct],pt)=>{if(!$)return pt(void 0);let yt=0;N.length!==1||h||me==="bottom"||(yt=$t.y+$t.height),pt(En($.x+Y.x,$.y+Y.y+yt,$.width,$.height))});let cc={left:0,right:0,top:0,bottom:0};const Sd=ge(!1),vl=Bi([Sd,Us,S1,sc],([$,Y,$t,Ct],pt)=>{if(!$t)return pt({left:0,right:0,top:0,bottom:0});if(!$)return;const yt=Math.min($t.width,$t.height),_t=B0({width:yt,height:yt},Y);ai(cc.top,4)===ai(_t.top,4)&&ai(cc.bottom,4)===ai(_t.bottom,4)&&ai(cc.right,4)===ai(_t.right,4)&&ai(cc.left,4)===ai(_t.left,4)||(cc=_t,pt(_t))});L(t,vl,$=>i(404,Zo=$));const wl=Bi([Sd,vl],([$,Y],$t)=>{if(!$)return $t(!1);$t(Object.values(Y).some(Ct=>Ct>0))});L(t,wl,$=>i(405,ha=$));const bb=Bi([Sd,Gs,wl,vl],([$,Y,$t,Ct],pt)=>{if(Y)return $&&$t?void pt(En(Y.x+Ct.left,Y.y+Ct.top,Y.width-Ct.left-Ct.right,Y.height-Ct.top-Ct.bottom)):pt({...Y})}),Ea=Bi([S1,wl,vl],([$,Y,$t],Ct)=>$?Y?void Ct(En($.x+$t.left,$.y+$t.top,$.width-$t.left-$t.right,$.height-$t.top-$t.bottom)):Ct($):Ct(void 0));L(t,Ea,$=>i(50,te=$));const xb=Bi([Zs,js,yl],([$,Y,$t],Ct)=>{if(!$||!Y)return Ct(void 0);const pt=Zr(Y);Ct(wr(pt,$t))}),k1=Bi([xb],([$],Y)=>{if(!$)return Y(void 0);const $t=rr($);Y(_c($t))});L(t,k1,$=>i(408,Kr=$));const Ja=Bi([Ea,fa,k1,vd],([$,Y,$t,Ct],pt)=>{if(!$||!Y||!(!gr&&!Do))return;const{width:yt,height:_t}=$t||Y,qe=Math.min($.width/yt,$.height/_t);pt(Ct?qe:Math.min(1,qe))});L(t,Ja,$=>i(407,Qn=$)),wo("imageStaticVisualCorners",Bi([Zs,js,yl,Ea,Gs,Ja],([$,Y,$t,Ct,pt,yt],_t)=>{if(!($&&Ct&&pt&&Y))return _t(void 0);const qe=Zr(Y),mi=_c(Fr(qe,yt)),Vi=uu(Ct,mi);mi.x=Vi.x,mi.y=Vi.y,_t(wr(mi,$t))}));const Sl=ge(void 0);L(t,Sl,$=>i(410,pi=$));const W0=Bi([fa,Ea],([$,Y])=>{if(Y&&$)return Math.min(Y.width/$.width,Y.height/$.height)}),C1=Bi([fa,Jo],([$,Y])=>$&&Y?Math.min($.width/Y.width,$.height/Y.height):1);L(t,C1,$=>i(101,Ha=$));const dc=Bi([Sl,C1],([$,Y])=>$&&Y?Y*$:1);L(t,dc,$=>i(486,bo=$));const kl=ge(an());L(t,kl,$=>i(409,ao=$));const _0=ge({scalar:bo,translation:ao}),V0=()=>{_0.set({scalar:void 0,translation:an()})},kd=Ll(void 0,$=>{const Y=di(void 0,{precision:1e-4}),$t=Ec()===1?yt=>Ho(yt,Math.round):qi,Ct=()=>{if(!On)return;const yt=bn||!qr;if(_n){const qe=Pi(On);return na(qe,se),na(qe,te),Y.set(qe,{hard:yt})}const _t=_$(On,O,hh*ja);_t.width<0&&(_t.width=0,_t.x=On.x),_t.height<0&&(_t.height=0,_t.y=On.y),na(_t,te),na(_t,ao),Fr(_t,bo),!yt&&$t(_t),Y.set(_t,{hard:yt})},pt=[Ea.subscribe(Ct),Jo.subscribe(Ct),dc.subscribe(Ct),kl.subscribe(Ct),Us.subscribe(Ct),Y.subscribe($)];return()=>pt.forEach(yt=>yt())});L(t,kd,$=>i(58,Jn=$));const T1=ge(1);L(t,T1,$=>i(479,yo=$));const M1=()=>{if(!Wn||!te)return;let $=Cs(Pi(Wn),Qn||1);const Y=uu(te,Cs(Pi(Kr),Qn));na($,Y);const $t=He.width/$.width,Ct=He.height/$.height,pt=Math.min(1,$t,Ct);T1.set(pt),Fr($,pt),((yt,_t)=>{const[qe,mi,Vi,Xi]=ll(yt);qe<_t.y&&(yt.y=Math.max(_t.y,yt.y)),mi>_t.width&&(yt.x=_t.width-yt.width),Vi>_t.height&&(yt.y=_t.height-yt.height),Xi<_t.x&&(yt.x=Math.max(_t.x,yt.x))})($,{...He,x:0,y:0}),Jo.set($)},N0=Bi([Ea,Ja,fa,js],([$,Y,$t,Ct],pt)=>{$&&($t||Ct)&&pt(H0($,Y||1,$t||Ct))});L(t,N0,$=>i(100,$a=$));const H0=($,Y,$t)=>$t.width<=$.width&&$t.height<=$.height?uu($,Cs(Pi($t),Y)):to($,cr($t));let P1,j0;const R1=$=>{if(h&&P1&&ra(P1,$)&&j0===Qn)return;if(_n)return M1();P1=$,j0=Qn;const Y=H0($,Qn,Wn||ve);Jo.set(Y)};let U0=!1;const vb=Ja.subscribe($=>{!U0&&$!==void 0&&Wn&&(R1(te),U0=!0)}),wb=Ea.subscribe($=>{$&&Qn!==void 0&&Wn&&R1($)}),Sb=Zs.subscribe($=>{!$&&te&&R1(te)});let I1;const kb=wd.subscribe($=>{if(!$)return I1=void 0,void vt(lc,gr=void 0,gr);I1=Vn;const Y=Pi(Wn);lc.set(Y)}),Cb=Jo.subscribe($=>{if(!$||!oo)return;const Y=($t=Pi($),Ct=oo,$t.x-=Ct.x,$t.y-=Ct.y,$t.width-=Ct.width,$t.height-=Ct.height,$t);var $t,Ct;((yt,_t)=>{yt.x/=_t,yt.y/=_t,yt.width/=_t,yt.height/=_t})(Y,I1);const pt=((yt,_t)=>(yt.x+=_t.x,yt.y+=_t.y,yt.width+=_t.width,yt.height+=_t.height,yt))(Pi(gr),Y);fa.set(pt)}),Tb=fa.subscribe($=>{if(!$||!On)return;if(_n)return void(oo||M1());if(bn||oo||Do)return;const Y=cr(On),$t=cr($);if(ai(Y,6)===ai($t,6))return;const{width:Ct,height:pt}=Wn,yt=Math.min(te.width/Ct,te.height/pt),_t=Un($.width*yt,$.height*yt),qe=.5*(On.width-_t.width),mi=.5*(On.height-_t.height),Vi=En(Math.max(0,Math.min(te.width-_t.width,On.x+qe)),Math.max(0,Math.min(te.height-_t.height,On.y+mi)),_t.width,_t.height);Jo.set(Vi)}),G0=Bi([Ja,fa,Jo,Zs],([$,Y,$t,Ct],pt)=>{if(!$||!Y||!$t)return;if(Ct)return pt(yo);const yt=$t.width/Y.width,_t=$t.height/Y.height;pt(Math.max(yt,_t)/$)}),Cd=Bi([Ja,G0],([$,Y],$t)=>{Y&&$t($*Y)});L(t,Cd,$=>i(485,Vn=$));let Cl={left:0,right:0,top:0,bottom:0};const Z0=Bi([Us,Jo],([$,Y],$t)=>{if(!Y)return $t(Cl);const Ct=B0(Y,$);ai(Cl.top,4)===ai(Ct.top,4)&&ai(Cl.bottom,4)===ai(Ct.bottom,4)&&ai(Cl.right,4)===ai(Ct.right,4)&&ai(Cl.left,4)===ai(Ct.left,4)||(Cl=Ct,$t(Ct))}),Mb=Bi([Z0],([$],Y)=>{Y(Object.values($).some($t=>$t>0))}),E1=di(.075,{stiffness:.03,damping:.4,precision:.001}),Pb=Bi([oc,rc,E1,kd,dc,Us,Mb,Z0,wl],([$,Y,$t,Ct,pt,yt,_t,qe,mi],Vi)=>{if(!Ct||h)return Vi([]);let{x:Xi,y:xi,width:Kn,height:Qi}=Ct;Xi+=.5,xi+=.5,Kn-=.5,Qi-=.5;const sr=[];if(yt){if(_t){let{left:Yi,right:ta,top:qs,bottom:Ml}=qe;Yi*=pt,ta*=pt,qs*=pt,Ml*=pt;const rp=Vp(Y)?[1,1,1,.125]:[0,0,0,.075];sr.push({x:Xi-Yi-.5,y:xi-qs-.5,width:Kn+Yi+ta+1,height:Qi+qs+Ml+1,strokeWidth:1,strokeColor:rp,opacity:mi?1:.5})}const Wo=Vp($);yt&&yt.frameColor&&Vp(yt.frameColor)||Wo||(sr.push({x:Xi-1,y:xi-1,width:Kn+2,height:Qi+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:$t}),sr.push({x:Xi+1,y:xi+1,width:Kn-2,height:Qi-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:$t}))}Vi([...sr,{x:Xi,y:xi,width:Kn,height:Qi,strokeWidth:1,strokeColor:$,opacity:$t}])}),uc=ge([]);L(t,uc,$=>i(398,Ar=$));const X0=Bi([Pb,uc],([$,Y],$t)=>{$t([...$,...Y])});L(t,X0,$=>i(94,Wa=$));const A1=di(0,{precision:.001});L(t,A1,$=>i(400,Yn=$));const L1=di();L(t,L1,$=>i(403,mn=$));const z1=di();L(t,z1,$=>i(402,Bn=$));const F1=di();L(t,F1,$=>i(401,jn=$));const D1=di();L(t,D1,$=>i(399,Nr=$));const pc=ge(!1);L(t,pc,$=>i(385,Or=$));const hc=ge();let $s;L(t,hc,$=>i(388,Yr=$));const B1=Bi([pc,hc],([$,Y],$t)=>{if(!$||!Y)return void $t(void 0);if($s&&($s.cancel(),i(291,$s=void 0)),qc(Y))return $t(Qf(Y));const Ct=Qo.length?0:gi?250:0;i(291,$s={cancel:fe}),C0(Y,$s,Ct).then($t).catch(pt=>{vt(rd,cn.error=pt,cn)}).finally(()=>{i(291,$s=void 0)})});so(),so=Gr(B1,$=>i(367,Me=$));let{imagePreviewCurrent:mc}=e;const O1=ge({});L(t,O1,$=>i(390,br=$));const Td=ge([]);L(t,Td,$=>i(86,Hi=$));const Md=Bi([Ea,bl,js,F0,Jo,Cd,yl,ad,sd,dc,kl,z0],([$,Y,$t,Ct,pt,yt,_t,qe,mi,Vi,Xi,xi],Kn)=>{if(!$||!pt)return;const Qi=Dv($,Y,$t,Ct,pt,Vi,Xi,yt,_t,qe,mi);!xi&&y(Qi),Kn(Qi)});L(t,Md,$=>i(391,no=$));const Y0=Bi([x0,v0,w0,S0,k0],([$,Y,$t,Ct,pt],yt)=>{const _t=$&&Object.keys($).map(qe=>$[qe]).filter(Boolean);yt({gamma:$t||void 0,vignette:Ct||void 0,noise:pt||void 0,convolutionMatrix:Y||void 0,colorMatrix:_t&&_t.length&&Vh(_t)})});let Pd,W1;const q0=(()=>{if(!sa())return!1;const $=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,Y,$t]=$.map(Ct=>parseInt(Ct,10)||0);return Y>13||Y===13&&$t>=4})(),$c=ge({});L(t,$c,$=>i(379,$o=$)),wo("env",$c);const K0=Ec(),_1=Ll(K0,$=>{const Y=()=>$(Ec()),$t=matchMedia(`(resolution: ${K0}dppx)`);return $t.addListener(Y),()=>$t.removeListener(Y)});L(t,_1,$=>i(57,Pn=$));const Aa=(($,Y,$t)=>{const{sub:Ct,pub:pt}=os(),{willUndo:yt=()=>!0}=$t||{},_t=[],qe=ge(0),mi=[],Vi=()=>mi.forEach(xi=>xi({index:Sa(qe),length:_t.length})),Xi={get index(){return Sa(qe)},set index(xi){xi=Number.isInteger(xi)?xi:0,xi=tn(xi,0,_t.length-1),qe.set(xi),Y(_t[Xi.index]),Vi()},get state(){return _t[_t.length-1]},length:()=>_t.length,undo(){if(yt()===!1)return;const xi=Xi.index--;return pt("undo",xi),xi},redo(){const xi=Xi.index++;return pt("redo",Xi.index),xi},revert(){_t.length=1,Xi.index=0,pt("revert")},write(xi){xi&&Y({...$(),...xi});const Kn=$(),Qi=_t[_t.length-1];JSON.stringify(Kn)!==JSON.stringify(Qi)&&(_t.length=Xi.index+1,_t.push(Kn),qe.set(_t.length-1),Vi(),pt("writehistory"))},set(xi={}){_t.length=0,Xi.index=0;const Kn=Array.isArray(xi)?xi:[xi];_t.push(...Kn),Xi.index=_t.length-1},get:()=>[..._t],subscribe:xi=>(mi.push(xi),xi({index:Xi.index,length:_t.length}),()=>mi.splice(mi.indexOf(xi),1)),on:Ct};return Xi})(()=>Ir,$=>{vt(hd,Ir=$,Ir),xl.set(Er)},{willUndo:()=>!Lb()||(Ab(),!1)});lo(),lo=Gr(Aa,$=>i(397,fo=$));const J0=()=>{const $={x:0,y:0,...ve},Y=Ho(to($,Ir.cropAspectRatio),Math.round),$t=Ga({...Ir,rotation:0,crop:Y},Ir),Ct=[$t];JSON.stringify($t)!==JSON.stringify(Ir)&&Ct.push({...Ir}),Aa.set(Ct)},Rb=rd.subscribe($=>{$&&$.complete&&J0()}),Ib=()=>Jl().then($=>$&&Aa.revert()),Eb=[dd,cd,pd,ud],Ab=()=>{Eb.forEach($=>{$.update(Y=>Y.length&&uo(Y[Y.length-1])?Y.slice(0,-1):Y)})},Lb=()=>k.filter($=>$.length).some($=>uo($[$.length-1])),gs=ge(!1);L(t,gs,$=>i(380,pn=$));const zb=()=>{vt(gs,pn=!0,pn),Ws().then($=>{if(!$)return void vt(gs,pn=!1,pn);let Y;Y=fc.subscribe($t=>{$t===1&&(Y&&Y(),Ki("processImage"))})})},Fb=s1.subscribe($=>{if(!$)return void vt(gs,pn=!1,pn);vt(gs,pn=!0,pn);const{complete:Y,abort:$t}=$;(Y||$t)&&vt(gs,pn=!1,pn)}),Qo=o3();L(t,Qo,$=>i(55,io=$));const Db=Bi([Qo],([$],Y)=>{if(!$.length)return Y();const{origin:$t,translation:Ct,rotation:pt,scale:yt}=$[0];Y({origin:$t,translation:Ct,rotation:pt,scale:yt})}),Rd=ge();L(t,Rd,$=>i(394,ro=$));let Id,Ed=[];const Q0=ge(),V1=ge(),Bb=Bi([Sl,V1,Ja,W0],([$,Y,$t,Ct])=>$||(Y||$t<1?Ct:1)),tm={...Jr,imageFile:n1,imageSize:js,mediaDuration:r1,mediaMinDuration:lb,mediaMaxDuration:a1,mediaTrim:o1,imageBackgroundColor:ld,imageBackgroundImage:b0,imageCropAspectRatio:od,imageCropMinSize:cb,imageCropMaxSize:db,imageCropLimitToImage:l1,imageCropRect:fa,imageCropRectOrigin:pb,imageCropRectSnapshot:lc,imageCropRectAspectRatio:hb,imageCropRange:ub,imageRotation:yl,imageRotationRange:mb,imageFlipX:ad,imageFlipY:sd,imageOutputSize:$b,imageColorMatrix:x0,imageConvolutionMatrix:v0,imageGamma:w0,imageVignette:S0,imageNoise:k0,imageManipulation:ud,imageDecoration:cd,imageAnnotation:dd,imageRedaction:pd,imageFrame:Us,imagePreview:B1,imagePreviewSource:hc,imageTransforms:Md,imagePreviewModifiers:O1,history:Aa,animation:bd,pixelRatio:_1,elasticityMultiplier:ja,scrollElasticity:mh,rangeInputElasticity:5,redrawTrigger:Hs,pointerAccuracy:fd,pointerHoverable:yd,env:$c,rootRect:bl,stageRect:Ea,stageRectBase:S1,stageRecenter:O0,stageScalar:Ja,stagePadding:vl,stagePadded:wl,presentationScalar:Cd,imagePreviewUpscale:V1,utilRect:Gs,utilRectPadded:bb,allowPlayPause:Ko,allowPan:d1,allowZoom:u1,allowZoomControls:p1,enableZoomInput:h1,enablePanInput:md,enablePanInputStatus:$1,imageSelectionMultiTouching:Q0,rootBackgroundColor:rc,rootForegroundColor:gd,rootLineColor:oc,rootColorSecondary:L0,imageOutlineOpacity:E1,utilTools:Rd,imageSelectionPan:kl,imageSelectionZoom:Sl,imageSelectionZoomCurrent:Bb,imageSelectionStageFitScalar:W0,imageSelectionStoredState:_0,imageOverlayMarkup:uc,interfaceImages:Td,isInteracting:sc,isTransformingImage:z0,isInteractingFraction:b1,imageCropRectIntent:v1,imageCropRectPresentation:F0,imageSelectionRect:Jo,imageSelectionRectIntent:w1,imageSelectionRectPresentation:kd,imageSelectionRectSnapshot:wd,imageScalar:G0,imageTransformsInterpolated:Db,imageEffects:Y0};delete tm.image;const Ob="util-"+aa();let N1=[];const em=$=>tt.find(([Y])=>$===Y);let gc=[];const H1=$=>{i(62,gc=gc.concat($))},j1=$=>{i(62,gc=gc.filter(Y=>Y!==$))},U1=($,Y)=>{i(297,Z[$]=Y,Z)};let im=sa();const nm=($,Y,$t)=>{let Ct=Re.getPropertyValue($);Ct=$t?$t(Ct):/^[0-9]+$/.test(Ct)?parseFloat(Ct):void 0,Y.set(Ct,{hard:!gi})},Xs=($,Y,$t=!1)=>{const Ct=(pt=>{const yt=Re.getPropertyValue(pt);return uh(yt)})($);Ct&&Ct[3]!==0&&($t||(Ct.length=3),Y.set(Ct,{hard:!gi}))},G1=ge();L(t,G1,$=>i(87,Rn=$));const Z1=ge();L(t,Z1,$=>i(88,fn=$));const X1=ge();L(t,X1,$=>i(89,vn=$));const Ad=di(0,{damping:.9});L(t,Ad,$=>i(90,Ai=$));const rm=()=>{Xs("color",gd),Xs(zr?"--color-background":"background-color",rc),Xs("outline-color",oc),Xs("--color-primary",g1),Xs("--color-secondary",L0),Xs("--grid-color-even",Z1,!0),Xs("--grid-color-odd",X1,!0),nm("--grid-size",G1),nm("--editor-inset-top",y1,$=>parseInt($,10))},om=Bi([Md,Y0,ld,gb],([$,Y,$t,Ct])=>$&&{...$,...Y,backgroundColor:$t,backgroundImage:Ct});L(t,om,$=>i(389,Wr=$));const Wb=()=>{const $=Qo.length?void 0:{resize:1.05},Y=(($t,Ct,pt={})=>{const{resize:yt=1,opacity:_t=0}=pt,qe={opacity:[di(_t,{...nl,stiffness:.1}),qi],resize:[di(yt,{...nl,stiffness:.1}),qi],translation:[di(void 0,nl),qi],rotation:[di(void 0,ou),qi],origin:[di(void 0,nl),qi],scale:[di(void 0,ou),qi],gamma:[di(void 0,ou),Qi=>Qi||1],vignette:[di(void 0,ou),Qi=>Qi||0],colorMatrix:[di([...Dg],nl),Qi=>Qi||[...Dg]],convolutionMatrix:[ge(void 0),Qi=>Qi&&Qi.clarity||void 0],backgroundColor:[di(void 0,nl),(Qi,sr,Wo)=>{if(Array.isArray(Qi)){if(Array.isArray(sr)){const Yi=[...Qi];sr[3]===0?(Yi[3]=0,Wo(Yi)):Yi[3]===0&&((Qi=[...sr])[3]=0)}return Qi}}],backgroundImage:[ge(void 0),qi]},mi=Object.entries(qe).map(([Qi,sr])=>[Qi,sr[0]]),Vi=mi.map(([,Qi])=>Qi),Xi=Object.entries(qe).reduce((Qi,[sr,Wo])=>{const[Yi,ta]=Wo;return Qi[sr]=(qs,Ml)=>Yi.set(ta(qs,xi[sr],rp=>{Yi.set(rp,{hard:!0})}),Ml),Qi},{});let xi;const Kn=Bi(Vi,Qi=>(xi=Qi.reduce((sr,Wo,Yi)=>(sr[mi[Yi][0]]=Wo,sr),{}),xi.data=$t,xi.size=Ct,xi.scale*=Qi[1],xi));return Kn.get=()=>xi,Kn.set=(Qi,sr)=>{const Wo={hard:!sr};Object.entries(Qi).forEach(([Yi,ta])=>{Xi[Yi]&&Xi[Yi](ta,Wo)})},Kn})(Me,ve,$);Qo.unshift(Y),am(Wr)},am=$=>{Qo.forEach((Y,$t)=>{const Ct=$t===0?1:0;Y.set({...$,opacity:Ct,resize:1},qr)})};let Ld;const fc=Kh(void 0,{duration:500});let Y1;L(t,fc,$=>i(54,go=$));const zd=ge(!1);let Qa;L(t,zd,$=>i(384,Fo=$));const Fd=di(void 0,{stiffness:.1,damping:.7,precision:.25});L(t,Fd,$=>i(82,Ke=$));const Dd=di(0,{stiffness:.1,precision:.05});L(t,Dd,$=>i(83,fi=$));const yc=di(0,{stiffness:.02,damping:.5,precision:.25});L(t,yc,$=>i(382,eo=$));const q1=di(void 0,{stiffness:.02,damping:.5,precision:.25});L(t,q1,$=>i(383,zo=$));const Bd=di(void 0,{stiffness:.02,damping:.5,precision:.25});let Od;L(t,Bd,$=>i(381,ar=$));const _b=()=>{Ki("abortLoadImage")},Vb=()=>{Ki("abortProcessImage"),vt(gs,pn=!1,pn)},sm=$=>{$.target&&$.target.dataset.touchScroll==="true"||$.preventDefault()},Nb=q0?$=>{const Y=$.touches?$.touches[0]:$;Y.pageX>20&&Y.pageX<window.innerWidth-20||sm($)}:fe,Ys=ge([]);L(t,Ys,$=>i(475,Pr=$)),wo("keysPressed",Ys);const K1=$=>{!$||Nl($)&&!(Y=>/^image/.test(Y.type)&&!/svg/.test(Y.type))($)||!Nl($)&&!/^http/.test($)||Ki("loadImage",$)},Hb=$=>{$&&K1($)};let Tl,bc,J1=[];const lm=ge();wo("rootPortal",lm),wo("rootRect",bl);const cm=()=>({foregroundColor:[...Hn],lineColor:[...Mn],utilVisibility:{...Z},isInteracting:bn,isInteractingFraction:ki,rootRect:Pi(De),stageRect:Pi(te),manipulationShapesDirty:jd,annotationShapesDirty:_d,decorationShapesDirty:Nd,frameShapesDirty:Hd}),dm=($,Y,$t)=>zn($,Un(Math.round(Y.width/$t),Math.round(Y.height/$t))),um=($,Y,$t)=>{var Ct;return $._translate=at((Ct=Y).x,Ct.y),$._scale=$t,$},Wd=$=>{const Y=[];return $.forEach($t=>Y.push(jb($t))),Y.filter(Boolean)},jb=$=>lr($)?($.points=[at($.x1,$.y1),at($.x2,$.y2)],$):(!(Y=>ir(Y)&&!Y.text.length)($)||$.backgroundColor&&$.backgroundColor[3]!==0||(Cu($)&&($.width=5,$.height=$.lineHeight),$.strokeWidth=1,$.strokeColor=[1,1,1,.5],$.backgroundColor=[0,0,0,.1]),$);let pm,Q1=[],tp=[],ep=[],ip=[],np=[],hm={};const mm=($,Y,$t,Ct,pt,yt,_t)=>{const{manipulationShapesDirty:qe,annotationShapesDirty:mi,decorationShapesDirty:Vi,frameShapesDirty:Xi,selectionRect:xi,scale:Kn}=$,Qi=pm!==Kn,sr=Qi||!ra(hm,xi);sr&&(pm=Kn,hm=xi),qe&&(ep=Y.filter(Yd).map(In).map(Yi=>zn(Yi,ve))),(mi||$t!==je)&&(Q1=$t.filter(Yd).map(In).sort((Yi,ta)=>Yi.alwaysOnTop?1:ta.alwaysOnTop?-1:0).map(Yi=>zn(Yi,ve))),(Qi||Vd||mi||$t!==je)&&(tp=Wd(Q1.map(Yi=>f(Yi,{flipX:Pe,flipY:ii,rotation:ci,scale:Kn,context:Zr(ve)})).flat())),(Vi||Ct!==rn||sr)&&(ip=Wd(Ct.filter(Yd).map(In).sort((Yi,ta)=>Yi.alwaysOnTop?1:ta.alwaysOnTop?-1:0).map(Yi=>dm(Yi,xi,Kn)).map(Yi=>f(Yi,{context:xi})).flat().map(Yi=>um(Yi,xi,Kn)))),(Xi||yt!==gn||sr)&&(np=yt?Wd([yt].map(In).map(Yi=>dm(Yi,xi,Kn)).map(f).flat().map(Yi=>um(Yi,xi,Kn))):[]);let Wo=Wd(pt.filter(Yd));return typeof window<"u"&&(Yi=>{if(Yi&&Yi._5pn6ltx)return;const[ta]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101]].map(qs=>qs.map(Ml=>String.fromCharCode(Ml)).join(""));Wo=[...Wo,{x:xi.x+.5*xi.width-82,y:xi.y+xi.height-16-12,width:164,height:16,text:ta,fontWeight:900,fontSize:12,color:[1,1,1,.25]}]})(window),{manipulationShapesDirty:qe,manipulationShapes:ep,annotationShapesDirty:mi,annotationShapes:tp,decorationShapesDirty:Vi,decorationShapes:ip,frameShapesDirty:Xi,frameShapes:np,interfaceShapes:Wo,selectionShapes:_t.map(In).map(Yi=>zn(Yi,ve))}};let _d=!0,Vd=!0,Nd=!0,Hd=!0,jd=!0;return Uo(()=>{Ns(),Me&&_e(Me.src)&&/^blob:/.test(Me.src)&&URL.revokeObjectURL(Me.src),fb(),wb(),vb(),Sb(),kb(),Cb(),Tb(),Rb(),Fb(),fd.destroy(),yd.destroy(),i1.destroy(),Qo.clear(),Q1.length=0,tp.length=0,ep.length=0,ip.length=0,np.length=0;try{i(235,mc=void 0),i(292,Ld=void 0)}catch{}}),t.$$set=$=>{"class"in $&&i(236,To=$.class),"layout"in $&&i(237,Ra=$.layout),"stores"in $&&i(238,Jr=$.stores),"locale"in $&&i(3,Ji=$.locale),"id"in $&&i(4,Kc=$.id),"util"in $&&i(239,us=$.util),"utils"in $&&i(240,Yl=$.utils),"animations"in $&&i(241,ps=$.animations),"disabled"in $&&i(242,Os=$.disabled),"status"in $&&i(234,Mo=$.status),"previewUpscale"in $&&i(243,pl=$.previewUpscale),"previewPad"in $&&i(244,ql=$.previewPad),"previewMaskOpacity"in $&&i(5,Jc=$.previewMaskOpacity),"previewImageDataMaxSize"in $&&i(245,hl=$.previewImageDataMaxSize),"previewImageTextPixelRatio"in $&&i(6,Kl=$.previewImageTextPixelRatio),"markupMaskOpacity"in $&&i(7,ml=$.markupMaskOpacity),"zoomMaskOpacity"in $&&i(246,hs=$.zoomMaskOpacity),"elasticityMultiplier"in $&&i(8,ja=$.elasticityMultiplier),"willRevert"in $&&i(247,Jl=$.willRevert),"willProcessImage"in $&&i(248,Ws=$.willProcessImage),"willRenderCanvas"in $&&i(9,$l=$.willRenderCanvas),"willRenderToolbar"in $&&i(249,Ua=$.willRenderToolbar),"willRenderUtilTabs"in $&&i(250,gl=$.willRenderUtilTabs),"willSetHistoryInitialState"in $&&i(251,Ga=$.willSetHistoryInitialState),"enableButtonExport"in $&&i(252,b=$.enableButtonExport),"enableButtonRevert"in $&&i(253,j=$.enableButtonRevert),"enableNavigateHistory"in $&&i(254,A=$.enableNavigateHistory),"enableToolbar"in $&&i(10,K=$.enableToolbar),"enableUtils"in $&&i(255,st=$.enableUtils),"enableButtonClose"in $&&i(256,Tt=$.enableButtonClose),"enableDropImage"in $&&i(257,Et=$.enableDropImage),"enablePasteImage"in $&&i(258,Ft=$.enablePasteImage),"enableBrowseImage"in $&&i(259,At=$.enableBrowseImage),"enableTransparencyGrid"in $&&i(11,Bt=$.enableTransparencyGrid),"layoutDirectionPreference"in $&&i(260,Wt=$.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in $&&i(261,Kt=$.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in $&&i(262,ni=$.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in $&&i(263,me=$.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in $&&i(264,le=$.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in $&&i(265,ke=$.layoutVerticalControlTabsPreference),"textDirection"in $&&i(12,Ce=$.textDirection),"markupEditorZoomLevel"in $&&i(266,Ye=$.markupEditorZoomLevel),"markupEditorZoomLevels"in $&&i(13,ri=$.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in $&&i(14,Mi=$.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in $&&i(15,hi=$.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in $&&i(16,Di=$.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in $&&i(267,hn=$.markupEditorInteractionMode),"muteAudio"in $&&i(268,Ni=$.muteAudio),"willSetMediaInitialTimeOffset"in $&&i(269,Oi=$.willSetMediaInitialTimeOffset),"enablePan"in $&&i(17,wn=$.enablePan),"enableZoom"in $&&i(18,nn=$.enableZoom),"enableZoomControls"in $&&i(270,qn=$.enableZoomControls),"enableZoomInput"in $&&i(19,dn=$.enableZoomInput),"enablePanInput"in $&&i(271,Hr=$.enablePanInput),"enableCanvasAlpha"in $&&i(20,zr=$.enableCanvasAlpha),"enablePanLimit"in $&&i(21,co=$.enablePanLimit),"panLimitGutterScalar"in $&&i(22,Za=$.panLimitGutterScalar),"zoomPresetOptions"in $&&i(23,Xa=$.zoomPresetOptions),"zoomAdjustStep"in $&&i(24,_s=$.zoomAdjustStep),"zoomAdjustFactor"in $&&i(25,Vs=$.zoomAdjustFactor),"zoomAdjustWheelFactor"in $&&i(26,Ia=$.zoomAdjustWheelFactor),"zoomLevel"in $&&i(0,Qr=$.zoomLevel),"fixScrollDirection"in $&&i(272,vo=$.fixScrollDirection),"imagePreviewSrc"in $&&i(275,Oo=$.imagePreviewSrc),"imageOrienter"in $&&i(276,ga=$.imageOrienter),"pluginComponents"in $&&i(277,Yo=$.pluginComponents),"pluginOptions"in $&&i(27,qo=$.pluginOptions),"root"in $&&i(2,kn=$.root),"imageSourceToImageData"in $&&i(28,e1=$.imageSourceToImageData),"imagePreviewCurrent"in $&&i(235,mc=$.imagePreviewCurrent)},t.$$.update=()=>{if(16777216&t.$$.dirty[8]&&ms.set(vo),8&t.$$.dirty[0]&&i(349,n=!!Ji),1&t.$$.dirty[0]|262144&t.$$.dirty[8]&&i(0,Qr=Qr===null?Ye:Qr),2&t.$$.dirty[0]|536870912&t.$$.dirty[8]){let pt=!1;Yo.forEach(([yt])=>{fr[yt]||(i(1,fr[yt]={},fr),pt=!0)}),pt&&i(289,ic=[...Yo])}var $,Y,$t,Ct;if(8388608&t.$$.dirty[7]|1024&t.$$.dirty[9]|256&t.$$.dirty[11]&&i(347,N=n&&ic.length?Yl||ic.map(([pt])=>pt):[]),134217728&t.$$.dirty[0]|1024&t.$$.dirty[9]|64&t.$$.dirty[11]|8388608&t.$$.dirty[12]&&i(348,tt=((pt,yt,_t,qe)=>{const mi=yt.filter(([Vi])=>pt.includes(Vi)).filter(([Vi,{isSupported:Xi}])=>Xi({...qe,..._t[Vi]})).map(([Vi,Xi])=>[Vi,Xi.Component]);return ss(mi,N1,(Vi,Xi)=>Vi[0]===Xi[0]&&Vi[1]===Xi[1])?N1:(N1=mi,mi)})(N,ic,qo,{src:Vr})),128&t.$$.dirty[11]&&i(301,ct=tt.length),8&t.$$.dirty[0]|4194304&t.$$.dirty[9]|64&t.$$.dirty[11]&&i(346,ot=ct&&N.map(pt=>{const yt=em(pt);if(yt)return{id:pt,view:yt[1],tabIcon:Ji[pt+"Icon"],tabLabel:Ji[pt+"Label"]}}).filter(Boolean)||[]),32&t.$$.dirty[11]&&i(366,r=!!ot.find(pt=>pt.id==="trim")),100663296&t.$$.dirty[11]|65536&t.$$.dirty[13]&&i(300,o=!!(Oe&&Me&&r)),4194304&t.$$.dirty[7]|4194304&t.$$.dirty[9]&&i(43,mt=ct&&us&&typeof us=="string"&&em(us)?us:ct>0?tt[0][0]:void 0),4096&t.$$.dirty[1]|2097152&t.$$.dirty[9]&&o&&mt&&Ns(),2097152&t.$$.dirty[9]|67108864&t.$$.dirty[11]&&(o?(Me.addEventListener("play",td),Me.addEventListener("pause",td)):Me&&Me.nodeName==="video"&&(Me.removeEventListener("play",td),Me.removeEventListener("pause",td))),2097152&t.$$.dirty[9]&&o&&qa.set(ec()/Ka()),294912&t.$$.dirty[13]&&(pt=>{if(!fl())return;const yt=Date.now();if(Zu&&yt-Zu<16)return;Zu=yt;const _t=Oe*pt;if(_t.toFixed(1)===p0)return;p0=_t.toFixed(1);const qe=Me,mi=()=>{qe.removeEventListener("seeked",mi),er()};qe.addEventListener("seeked",mi),Eg(qe,_t)})(Ei||ae),32768&t.$$.dirty[13]&&i(364,a=ae&&ai(ae,6)),598016&t.$$.dirty[13]&&i(362,s=tr||[[0,Math.min(Oe,zi)/Oe]]),2097152&t.$$.dirty[11]&&(l=s[0][0]),2097152&t.$$.dirty[11]&&(c=s[s.length-1][1]),2097152&t.$$.dirty[11]&&i(365,d=s.map(([pt,yt])=>[ai(pt,6),ai(yt,6)])),25165824&t.$$.dirty[11]&&i(363,u=d.findIndex(([pt,yt])=>a>=pt&&a<=yt)),29360128&t.$$.dirty[11]&&(p=u===-1&&d.findIndex((pt,yt,_t)=>{const qe=_t[yt-1];return qe?a<=pt[0]&&a>=qe[1]:a<=pt[0]})),1048576&t.$$.dirty[8]&&tc.set(Ni),67108864&t.$$.dirty[11]|131072&t.$$.dirty[13]&&(Me&&wi?Ju():Qu()),2097152&t.$$.dirty[9]|32768&t.$$.dirty[13]&&o&&nd.set(Ka()*ae),67108864&t.$$.dirty[11]|16384&t.$$.dirty[13]&&Me&&(pt=>{o&&(Me.volume=Math.min(1,pt))})(z),256&t.$$.dirty[0]&&vt(id,Ma=ja,Ma),1048576&t.$$.dirty[7]&&i(358,h=Ra==="overlay"),128&t.$$.dirty[8]|131072&t.$$.dirty[11]&&i(45,g=st&&!h),134217730&t.$$.dirty[0]&&qo&&Object.entries(qo).forEach(([pt,yt])=>{Object.entries(yt).forEach(([_t,qe])=>{fr[pt]&&i(1,fr[pt][_t]=qe,fr)})}),256&t.$$.dirty[13]&&i(359,S=!ti),16777216&t.$$.dirty[7]|786432&t.$$.dirty[11]&&vt(xd,gi=ps==="always"?x:ps!=="never"&&x&&S,gi),4194304&t.$$.dirty[1]|33554432&t.$$.dirty[7]&&t1.set(Os?1:0,{hard:!gi}),268435456&t.$$.dirty[7]&&(m=hl?($=hl,Y=g0,Un(Math.min($.width,Y.width),Math.min($.height,Y.height))):g0),4096&t.$$.dirty[13]&&i1.update(xr[0]),2048&t.$$.dirty[13]&&(f=Ii?(pt,yt)=>Ii(pt,{flipX:void 0,flipY:void 0,rotation:void 0,...yt,isPreview:!0}):qi),268435456&t.$$.dirty[1]&&Array.isArray(_i)&&Ki("selectionchange",[..._i]),4194304&t.$$.dirty[8]|1024&t.$$.dirty[13]&&m1.set(on&&qn),8912896&t.$$.dirty[8]&&$d.set(hn==="pan"||Hr),1048576&t.$$.dirty[1]&&ln&&bl.set(En(ln.x,ln.y,ln.width,ln.height)),131072&t.$$.dirty[11]|32769&t.$$.dirty[12]&&De&&h&&cn&&cn.complete&&(()=>{const pt=de,yt=cr(De);pt&&pt===yt||(od.set(cr(De)),J0())})(),64&t.$$.dirty[11]&&i(46,wt=N.length>1),32768&t.$$.dirty[1]&&(wt||xl.set(ks())),1024&t.$$.dirty[0]|512&t.$$.dirty[13]&&(K||ac.set(En(0,he,0,0))),524288&t.$$.dirty[11]|2&t.$$.dirty[12]&&i(361,w=!bn&&x),1048576&t.$$.dirty[1]&&i(302,Te=ln&&ln.width>0&&ln.height>0),8&t.$$.dirty[0]|12582912&t.$$.dirty[9]&&i(40,Qt=Te&&Ji&&!!ct),512&t.$$.dirty[1]&&setTimeout(()=>i(290,x1=Qt),1),16777216&t.$$.dirty[7]|2048&t.$$.dirty[9]|1310720&t.$$.dirty[11]&&vt(bd,qr=ps==="always"?w:ps!=="never"&&w&&x1&&S,qr),67108864&t.$$.dirty[7]|131072&t.$$.dirty[11]&&vd.set(pl||h),134217728&t.$$.dirty[7]&&Sd.set(ql),4&t.$$.dirty[0]|144&t.$$.dirty[13]&&kn&&(kn.dispatchEvent(bs("markupzoom",pi)),kn.dispatchEvent(bs("zoom",ui(pi)?pi:Qn))),4&t.$$.dirty[0]|64&t.$$.dirty[13]&&kn&&(kn.dispatchEvent(bs("markuppan",ao)),kn.dispatchEvent(bs("pan",ao))),8&t.$$.dirty[13]&&Wn&&V0(),32&t.$$.dirty[13]&&Kr&&M1(),4198400&t.$$.dirty[1]&&mt&&E1.set(.075,{hard:!gi}),536870912&t.$$.dirty[7]&&i(356,C=hs),6&t.$$.dirty[13]&&i(357,I=ha?-Math.max(...Object.values(Zo)):0),138936320&t.$$.dirty[1]|98304&t.$$.dirty[11]&&Jn){let pt=Jn.x-te.x,yt=te.x+te.width-(Jn.x+Jn.width),_t=Jn.y-te.y,qe=te.y+te.height-(Jn.y+Jn.height),mi=Math.min(pt,_t,yt,qe);A1.set(mi>I?0:Math.min(C,Math.abs(mi/64)),{hard:!gi})}if(67108864&t.$$.dirty[1]&&i(355,E=.55/Pn),4718592&t.$$.dirty[1]|16384&t.$$.dirty[11]&&te&&L1.set({x:0,y:te.y,width:te.x<64?0:te.x,height:te.height+E},{hard:!gi}),4718592&t.$$.dirty[1]|16384&t.$$.dirty[11]|1&t.$$.dirty[12]&&te&&z1.set({x:0,y:0,width:De.width,height:te.y+E},{hard:!gi}),4718592&t.$$.dirty[1]|16384&t.$$.dirty[11]|1&t.$$.dirty[12]&&te){let pt=te.x+te.width,yt=De.width-(te.x+te.width);yt<64&&(pt+=yt,yt=0),F1.set({x:pt,y:te.y,width:yt,height:te.height+E},{hard:!gi})}if(4718592&t.$$.dirty[1]|1&t.$$.dirty[12]&&te&&D1.set({x:0,y:te.y+te.height,width:De.width,height:De.height-(te.y+te.height)},{hard:!gi}),33554432&t.$$.dirty[1]|268435456&t.$$.dirty[12]|1&t.$$.dirty[13]&&i(351,B=mn&&{id:"stage-overlay",backgroundColor:Li,opacity:Yn,...mn}),33554432&t.$$.dirty[1]|1342177280&t.$$.dirty[12]&&i(354,T=Bn&&{id:"stage-overlay",backgroundColor:Li,opacity:Yn,...Bn}),33554432&t.$$.dirty[1]|805306368&t.$$.dirty[12]&&i(353,D=jn&&{id:"stage-overlay",backgroundColor:Li,opacity:Yn,...jn}),33554432&t.$$.dirty[1]|402653184&t.$$.dirty[12]&&i(352,U=Nr&&{id:"stage-overlay",backgroundColor:Li,opacity:Yn,...Nr}),15360&t.$$.dirty[11]&&i(350,P=[T,D,U,B].filter(Boolean)),512&t.$$.dirty[11]|67108864&t.$$.dirty[12]&&P&&Ar&&uc.update(pt=>[...pt.filter(yt=>yt.id!=="stage-overlay"),...P]),134217728&t.$$.dirty[8]|8388608&t.$$.dirty[12]&&hc.set(Oo||Vr||void 0),4&t.$$.dirty[0]|262144&t.$$.dirty[7]|67108864&t.$$.dirty[11]&&(i(235,mc=Me),Me&&kn.dispatchEvent(bs("loadpreview",mc))),65536&t.$$.dirty[12]&&Yr&&(kl.set(an()),Sl.set(void 0),V0(),Td.set([])),33554432&t.$$.dirty[12]&&i(306,V=fo.index>0),33554432&t.$$.dirty[12]&&i(305,nt=fo.index<fo.length-1),393216&t.$$.dirty[1]|12&t.$$.dirty[12]&&(k=[je,rn,Ui,Gn]),8&t.$$.dirty[1]&&Q0.set(Id),16777216&t.$$.dirty[12]&&V1.set(Co),4096&t.$$.dirty[1]&&yb.set(mt),262144&t.$$.dirty[9]|32&t.$$.dirty[11]&&i(297,Z=ot.reduce((pt,yt)=>(pt[yt.id]=Z&&Z[yt.id]||0,pt),{})),4096&t.$$.dirty[1]&&i(79,gt={name:Ob,selected:mt}),32&t.$$.dirty[11]&&i(328,xt=ot.map(pt=>({id:pt.id,icon:pt.tabIcon,label:pt.tabLabel}))),32&t.$$.dirty[11]&&i(78,dt=ot.map(pt=>pt.id)),524288&t.$$.dirty[7]&&i(77,J=$i(["PinturaRoot","PinturaRootComponent",To])),1&t.$$.dirty[12]&&i(342,q=De&&(De.width>1e3?"wide":De.width<600?"narrow":void 0)),1&t.$$.dirty[12]&&i(329,ft=De&&(De.width<=320||De.height<=460)),1&t.$$.dirty[12]&&i(341,Lt=De&&(De.height>1e3?"tall":De.height<600?"short":void 0)),4&t.$$.dirty[0]&&i(308,_=kn&&kn.parentNode&&kn.parentNode.classList.contains("PinturaModal")),1&t.$$.dirty[1]|536870912&t.$$.dirty[9]|1&t.$$.dirty[12]&&i(334,rt=_&&De&&Pd>De.width),2&t.$$.dirty[1]|536870912&t.$$.dirty[9]|1&t.$$.dirty[12]&&i(333,zt=_&&De&&W1>De.height),25165824&t.$$.dirty[10]&&i(335,Zt=rt&&zt),1048576&t.$$.dirty[0]&&i(332,Ot=zr),2&t.$$.dirty[11]&&i(303,Yt=q==="narrow"),4096&t.$$.dirty[8]|1&t.$$.dirty[12]&&i(343,($t=De,Ct=Wt,Ut=De?Ct==="auto"?$t.width>$t.height?"landscape":"portrait":Ct==="horizontal"?$t.width<500?"portrait":"landscape":Ct==="vertical"?$t.height<400?"landscape":"portrait":void 0:"landscape")),4&t.$$.dirty[11]&&i(76,ht=Ut==="landscape"),16777216&t.$$.dirty[9]|1&t.$$.dirty[11]&&i(331,G=Yt||Lt==="short"),1&t.$$.dirty[1]|1&t.$$.dirty[12]&&i(330,kt=im&&De&&Pd===De.width&&!q0),4&t.$$.dirty[1]|4194304&t.$$.dirty[12]&&i(304,ne=[...ro||[],...Ed].filter(Boolean)),8192&t.$$.dirty[8]&&i(340,ue="has-navigation-preference-"+Kt),16384&t.$$.dirty[8]&&i(339,Nt="has-navigation-preference-"+ni),32768&t.$$.dirty[8]&&i(336,xe="has-toolbar-preference-"+me),65536&t.$$.dirty[8]&&i(338,Ht="has-controlgroups-preference-"+le),131072&t.$$.dirty[8]&&i(337,ze="has-controltabs-preference-"+ke),1&t.$$.dirty[12]&&i(345,W=De!==void 0&&De.width>0&&De.height>0),4&t.$$.dirty[0]|16&t.$$.dirty[11]&&i(344,Re=W&&kn&&getComputedStyle(kn)),8&t.$$.dirty[11]&&Re&&rm(),1024&t.$$.dirty[0]|4243456&t.$$.dirty[1]|34603008&t.$$.dirty[7]|536870912&t.$$.dirty[9]|2146959360&t.$$.dirty[10]|7&t.$$.dirty[11]|3145856&t.$$.dirty[12]&&$c.set({...$o,layoutMode:Ra,orientation:Ut,horizontalSpace:q,verticalSpace:Lt,navigationHorizontalPreference:ue,navigationVerticalPreference:Nt,controlGroupsVerticalPreference:Ht,controlTabsVerticalpreference:ze,toolbarVerticalPreference:xe,isModal:_,isDisabled:Os,isCentered:Zt,isCenteredHorizontally:rt,isCenteredVertically:zt,isAnimated:gi,isTransparent:Ot,pointerAccuracy:_r,pointerHoverable:Rr,isCompact:G,hasSwipeNavigation:kt,hasLimitedSpace:ft,hasToolbar:K,hasNavigation:wt&&g,isIOS:im,browserVersion:qh()?"chrome-"+(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]:void 0}),128&t.$$.dirty[12]&&i(75,Se=Object.entries($o).map(([pt,yt])=>/^is|has/.test(pt)?yt?_2(pt):void 0:yt).filter(Boolean).join(" ")),4096&t.$$.dirty[1]&&mt&&Rd.set([]),4096&t.$$.dirty[1]|4&t.$$.dirty[8]|262144&t.$$.dirty[10]|128&t.$$.dirty[12]&&i(44,Xt=gl(xt.map(pt=>({...pt,selected:mt===pt.id})),{...$o},()=>Hs.set({}))),8192&t.$$.dirty[1]&&i(74,Be=!!Xt.find(pt=>Array.isArray(pt))),786432&t.$$.dirty[12]&&i(73,Fe=no&&Object.entries(br).filter(([,pt])=>pt!=null).reduce((pt,[,yt])=>pt={...pt,...yt},{})),32768&t.$$.dirty[12]&&i(325,be=cn&&cn.task==="any-to-file"),32768&t.$$.dirty[10]&&be&&Qo&&Qo.clear(),131072&t.$$.dirty[12]&&i(327,Xe=!!Wr&&!!Wr.translation),8192&t.$$.dirty[9]|131072&t.$$.dirty[10]|67108864&t.$$.dirty[11]&&Xe&&Me&&Me!==Ld&&(i(292,Ld=Me),Wb()),131072&t.$$.dirty[10]|131072&t.$$.dirty[12]&&Xe&&am(Wr),16777216&t.$$.dirty[1]&&io&&io.length>1){let pt=[];Qo.forEach((yt,_t)=>{_t!==0&&yt.get().opacity<=0&&pt.push(yt)}),pt.forEach(yt=>Qo.remove(yt))}if(8&t.$$.dirty[0]|65536&t.$$.dirty[10]&&i(39,bt=Ji&&yi.length&&Ji.labelSupportError(yi)),32768&t.$$.dirty[12]&&i(317,Ue=cn&&!!cn.error),32768&t.$$.dirty[12]&&i(42,Le=!cn||!cn.complete&&cn.task===void 0),32768&t.$$.dirty[12]&&i(318,Ve=cn&&(cn.taskLengthComputable?cn.taskProgress:1/0)),32768&t.$$.dirty[10]&&be&&vt(pc,Or=!1,Or),4194304&t.$$.dirty[1]|16384&t.$$.dirty[9]|32768&t.$$.dirty[12]&&cn&&cn.complete){const pt=gi?250:0;clearTimeout(Y1),i(293,Y1=setTimeout(()=>{vt(pc,Or=!0,Or)},pt))}if(2048&t.$$.dirty[1]|128&t.$$.dirty[10]|40960&t.$$.dirty[12]&&i(322,Ge=cn&&!Ue&&!Le&&!Or),4096&t.$$.dirty[9]|67108864&t.$$.dirty[11]|65536&t.$$.dirty[12]&&i(321,Qe=!(!Yr||Me&&!$s)),4194304&t.$$.dirty[1]|8192&t.$$.dirty[12]&&(Or?setTimeout(()=>Ad.set(1,{hard:!gi}),gi?500:0):Ad.set(0,{hard:!gi})),16640&t.$$.dirty[12]&&i(316,vi=!!(pn||Xn&&Xn.progress!==void 0&&!Xn.complete)),64&t.$$.dirty[10]&&vi&&Ns(),2048&t.$$.dirty[1]|32768&t.$$.dirty[12]&&i(319,Si=cn&&!(cn.error||Le)),8&t.$$.dirty[0]|32768&t.$$.dirty[12]&&i(320,Jt=Ji&&(cn?!cn.complete||cn.error?Xh(Ji.statusLabelLoadImage(cn),cn.error&&cn.error.metadata,"{","}"):Ji.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):Ji.statusLabelLoadImage(cn))),8&t.$$.dirty[0]|16384&t.$$.dirty[12]&&i(315,Ci=Xn&&Ji&&Ji.statusLabelProcessImage(Xn)),16384&t.$$.dirty[12]&&i(313,X=Xn&&(Xn.taskLengthComputable?Xn.taskProgress:1/0)),16384&t.$$.dirty[12]&&i(314,Vt=Xn&&!Xn.error),16384&t.$$.dirty[12]&&i(312,H=!(!Xn||!Xn.error)),8&t.$$.dirty[0]|2048&t.$$.dirty[1]|131072&t.$$.dirty[7]|8188&t.$$.dirty[10])if(Mo){let pt,yt,_t,qe,mi;_e(Mo)&&(pt=Mo),ui(Mo)?yt=Mo:Array.isArray(Mo)&&([pt,yt,mi]=Mo,yt===!1&&(qe=!0),ui(yt)&&(_t=!0)),i(35,Qa=(pt||yt)&&{text:pt,aside:qe||_t,progressIndicator:{visible:_t,progress:yt},closeButton:qe&&{label:Ji.statusLabelButtonClose,icon:Ji.statusIconButtonClose,onclick:mi||(()=>i(234,Mo=void 0))}})}else i(35,Qa=Ji&&Le||Ue||Ge||Qe?{text:Jt,aside:Ue||Si,progressIndicator:{visible:Si,progress:Ve},closeButton:Ue&&{label:Ji.statusLabelButtonClose,icon:Ji.statusIconButtonClose,onclick:_b}}:Ji&&vi&&Ci?{text:Ci,aside:H||Vt,progressIndicator:{visible:Vt,progress:X},closeButton:H&&{label:Ji.statusLabelButtonClose,icon:Ji.statusIconButtonClose,onclick:Vb}}:void 0);if(131072&t.$$.dirty[7]&&i(324,ie=Mo!==void 0),4194304&t.$$.dirty[1]|536870912&t.$$.dirty[9]|16384&t.$$.dirty[12]&&_&&Xn&&Xn.complete&&(zd.set(!0),setTimeout(()=>zd.set(!1),gi?100:0)),4&t.$$.dirty[0]|4096&t.$$.dirty[1]|8192&t.$$.dirty[12]&&Or&&kn&&kn.dispatchEvent(bs("selectutil",mt)),2304&t.$$.dirty[1]|22720&t.$$.dirty[10]|4096&t.$$.dirty[12]&&i(323,pe=Fo||bt||Le||Ue||Ge||Qe||vi||ie),8192&t.$$.dirty[10]&&vt(fc,go=pe?1:0,go),4194304&t.$$.dirty[1]|8192&t.$$.dirty[10]&&fc.set(pe?1:0,{duration:gi?500:1}),8388608&t.$$.dirty[1]&&i(41,we=go>0),16&t.$$.dirty[1]&&i(311,ye=!(!Qa||!Qa.aside)),4195344&t.$$.dirty[1]|32768&t.$$.dirty[9]|2&t.$$.dirty[10]|2048&t.$$.dirty[12]&&we&&Qa){clearTimeout(Od);const pt={hard:gi===!1};if(ye){const yt=!!Qa.error||!gi;Dd.set(1,pt),Fd.set(zo,{hard:yt}),i(294,Od=setTimeout(()=>{yc.set(16,pt)},1))}else Dd.set(0,pt),i(294,Od=setTimeout(()=>{yc.set(0,pt)},1))}if(1024&t.$$.dirty[1]&&(we||(Bd.set(void 0,{hard:!0}),Fd.set(void 0,{hard:!0}),yc.set(0,{hard:!0}))),1024&t.$$.dirty[12]&&i(310,ee=.5*eo),1&t.$$.dirty[10]|512&t.$$.dirty[12]&&i(72,qt=`transform: translateX(${ar-ee}px)`),256&t.$$.dirty[1]|201326592&t.$$.dirty[11]&&i(38,Ne=Me&&ve&&!bt),128&t.$$.dirty[1]|1610612736&t.$$.dirty[9]&&i(307,Ze=ei&&(Ne||_)?sm:fe),268435456&t.$$.dirty[9]&&i(71,lt=Ze),268435456&t.$$.dirty[9]&&i(70,Dt=Ze),8&t.$$.dirty[0]|2097152&t.$$.dirty[1]|370&t.$$.dirty[8]|251658240&t.$$.dirty[9]|128&t.$$.dirty[12]&&i(69,re=Ji&&en&&Uc(()=>Ua([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[Tt&&["Button","close",{label:Ji.labelClose,icon:Ji.iconButtonClose,onclick:()=>Ki("close"),hideLabel:!0}],j&&["Button","revert",{label:Ji.labelButtonRevert,icon:Ji.iconButtonRevert,disabled:!V,onclick:Ib,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[A&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:Ji.labelButtonUndo,icon:Ji.iconButtonUndo,disabled:!V,onclick:Aa.undo,hideLabel:!0}],["Button","redo",{label:Ji.labelButtonRedo,icon:Ji.iconButtonRedo,disabled:!nt,onclick:Aa.redo,hideLabel:!0}]]],ne.length&&["div","plugin-tools",{class:"PinturaNavSet"},ne.filter(Boolean).map(([pt,yt,_t])=>[pt,yt,{..._t}])]]],["div","gamma",{class:"PinturaNavGroup"},[b&&["Button","export",{label:Ji.labelButtonExport,icon:Yt&&Ji.iconButtonExport,class:"PinturaButtonExport",onclick:zb,hideLabel:Yt}]]]],{...$o},()=>Hs.set({})))),8&t.$$.dirty[12]&&i(299,et=Ui&&!!Ui.length),1048576&t.$$.dirty[9]|134217728&t.$$.dirty[11]|8&t.$$.dirty[12]&&i(298,jt=et&&Hy(ve,Ui)),1572864&t.$$.dirty[9]|67108864&t.$$.dirty[11]|96&t.$$.dirty[12]&&et&&((pt,yt,_t,qe)=>{if(!yt)return;const mi={dataSizeScalar:_t};qe&&qe[3]>0&&(mi.backgroundColor=[...qe]),yt(pt,mi).then(Vi=>{Tl&&or(Tl),i(295,Tl=Vi)})})(Me,$r,jt,yr),65536&t.$$.dirty[9]|134217728&t.$$.dirty[11]|24&t.$$.dirty[12]&&Ui&&Tl&&ve){const{width:pt,height:yt}=ve,_t=Fa()?"pixelated":Zn==="auto"?"auto":"pixelated";i(296,J1=Ui.map(qe=>{const mi=En(qe.x,qe.y,qe.width,qe.height),Vi=wr(Pi(mi),qe.rotation).map(Xi=>at(Xi.x/pt,Xi.y/yt));return{...qe,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:Tl,backgroundImageRendering:_t,backgroundCorners:Vi}}))}131072&t.$$.dirty[9]|4&t.$$.dirty[12]&&i(37,Gt=[...J1,...Gn||[]]),32&t.$$.dirty[1]&&bc&&lm.set(bc),4&t.$$.dirty[0]|128&t.$$.dirty[1]&&Ne&&kn&&kn.dispatchEvent(bs("ready")),262144&t.$$.dirty[1]&&i(63,_d=!0),2013265920&t.$$.dirty[11]&&i(64,Vd=!0),131072&t.$$.dirty[1]&&i(65,Nd=!0),65536&t.$$.dirty[1]&&i(66,Hd=!0),64&t.$$.dirty[1]&&i(67,jd=!0)},i(360,x=!Jh()),y=Ec()===1?$=>{$&&(Eo($.origin,Math.round),Eo($.translation,Math.round))}:qi,i(326,yi=[!r3()&&"WebGL"].filter(Boolean)),i(309,ei=sa()||Lu()&&ka()),i(68,ce=(($,Y=!0)=>$t=>{$t.type==="ping"&&(Y&&$t.stopPropagation(),$($t.detail.type,$t.detail.data))})(Lr.pub)),[Qr,fr,kn,Ji,Kc,Jc,Kl,ml,ja,$l,K,Bt,Ce,ri,Mi,hi,Di,wn,nn,dn,zr,co,Za,Xa,_s,Vs,Ia,qo,e1,B1,Aa,Pd,W1,Ed,Id,Qa,bc,Gt,Ne,bt,Qt,we,Le,mt,Xt,g,wt,gn,rn,je,te,ln,en,gi,go,io,Li,Pn,Jn,_i,Bo,Ya,gc,_d,Vd,Nd,Hd,jd,ce,re,Dt,lt,qt,Fe,Be,Se,ht,J,dt,gt,Er,ma,Ke,fi,Fi,bi,Hi,Rn,fn,vn,Ai,vr,Xo,Bs,Wa,_a,Pa,Va,ds,Na,$a,Ha,xn,Ko,Ql,qa,tc,Hs,id,t1,n1,js,r1,nd,o1,y0,a1,rd,s1,od,l1,fa,yl,ad,sd,ld,cd,dd,ud,pd,Us,c1,hd,T0,M0,P0,R0,I0,E0,A0,d1,u1,p1,md,h1,m1,$d,$1,rc,gd,oc,g1,f1,bl,xl,y1,ac,Gs,fd,yd,sc,b1,bd,xd,vd,Zs,lc,v1,Jo,wd,w1,D0,vl,wl,Ea,k1,Ja,Sl,C1,dc,kl,kd,T1,N0,Cd,uc,X0,A1,L1,z1,F1,D1,pc,hc,O1,Td,Md,$c,_1,gs,Qo,Rd,tm,H1,j1,U1,($,Y)=>Y[$],$=>ot.find(Y=>Y.id===$).view,G1,Z1,X1,Ad,({target:$,propertyName:Y})=>{$===kn&&/background|outline/.test(Y)&&Re&&rm()},om,fc,zd,Fd,Dd,yc,q1,Bd,$=>{const Y=!(!Qa||!Qa.closeButton)||!gi;q1.set($.detail.width,{hard:Y}),Bd.set(Math.round(.5*-$.detail.width),{hard:Y})},Nb,Ys,$=>{const{keyCode:Y,metaKey:$t,ctrlKey:Ct,shiftKey:pt}=$;if(Y===9&&Os)return void $.preventDefault();if($.target&&Y===32&&kn.contains($.target)&&!jc($.target)&&(Go&&o&&Ku(),$.preventDefault()),Y===90&&($t||Ct))return void(pt&&$t?Aa.redo():Aa.undo());if(Y===89&&Ct)return void Aa.redo();if(Y===229)return;const yt=new Set([...Pr,Y]);Ys.set(Array.from(yt))},({key:$,keyCode:Y})=>{if($==="Meta")return Ys.set([]);Ys.set(Pr.filter($t=>$t!==Y))},()=>{Ys.set([])},$=>{jc($.target)||$.preventDefault()},$=>{Et&&K1($.detail.resources[0])},()=>{At&&V2().then(Hb)},$=>{if(!Ft)return;const Y=tn((window.innerWidth-Math.abs(De.x))/De.width,0,1),$t=tn((window.innerHeight-Math.abs(De.y))/De.height,0,1);Y<.75&&$t<.75||K1(($.clipboardData||window.clipboardData).files[0])},cm,mm,$=>{He&&ra($.detail,He)||vt(Gs,He=$.detail,He)},Mo,mc,To,Ra,Jr,us,Yl,ps,Os,pl,ql,hl,hs,Jl,Ws,Ua,gl,Ga,b,j,A,st,Tt,Et,Ft,At,Wt,Kt,ni,me,le,ke,Ye,hn,Ni,Oi,qn,Hr,vo,()=>i(60,Bo=void 0),($,Y,$t)=>{const{text:Ct="",placeholder:pt="",autoClose:yt=!0,align:_t="top",justify:qe="center",buttonConfirm:mi,buttonCancel:Vi}=$t;i(60,Bo={align:_t,justify:qe,text:Ct,placeholder:pt,buttonConfirm:mi,buttonCancel:Vi,onconfirm:()=>{$(Ya.value),yt&&i(60,Bo=void 0)},oncancel:()=>{Y(void 0),i(60,Bo=void 0)}})},Oo,ga,Yo,Qc,qu,Ns,fl,Ku,Ju,Qu,m0,Ka,ec,ed,ic,x1,$s,Ld,Y1,Od,Tl,J1,Z,jt,et,o,ct,Te,Yt,ne,nt,V,Ze,_,ei,ee,ye,H,X,Vt,Ci,vi,Ue,Ve,Si,Jt,Qe,Ge,pe,ie,be,yi,Xe,xt,ft,kt,G,Ot,zt,rt,Zt,xe,ze,Ht,Nt,ue,Lt,q,Ut,Re,W,ot,N,tt,n,P,B,U,D,T,E,C,I,h,S,x,w,s,u,a,d,r,Me,ve,ii,Pe,ci,De,bn,Gn,Ui,Zn,yr,$r,$o,pn,ar,eo,zo,Fo,Or,Xn,cn,Yr,Wr,br,no,Rr,_r,ro,Vr,Co,fo,Ar,Nr,Yn,jn,Bn,mn,Zo,ha,Wn,Qn,Kr,ao,pi,ti,he,on,Ii,xr,tr,z,ae,Oe,wi,Ei,zi,function(){i(31,Pd=rl.innerWidth),i(32,W1=rl.innerHeight)},$=>vt(ac,Fi=$.detail,Fi),({detail:$})=>i(43,mt=$),function($,Y){t.$$.not_equal(fr[Y],$)&&(fr[Y]=$,i(1,fr),i(277,Yo),i(27,qo))},$=>H1($),$=>j1($),($,{detail:Y})=>U1($,Y),$=>vt(xl,Er=$.detail,Er),function($){t.$$.not_equal(fr[mt],$)&&(fr[mt]=$,i(1,fr),i(277,Yo),i(27,qo))},()=>H1(mt),()=>j1(mt),({detail:$})=>U1(mt,$),$=>{const Y={...$,...cm()},{annotationShapes:$t,decorationShapes:Ct,interfaceShapes:pt,frameShapes:yt,selectionShapes:_t}=$l({annotationShapes:je,decorationShapes:rn,interfaceShapes:Wa,frameShapes:gn,selectionShapes:_i},Y);return mm(Y,Gt,$t,Ct,pt,yt,_t)},()=>{i(63,_d=!1),i(64,Vd=!1),i(65,Nd=!1),i(66,Hd=!1),i(67,jd=!1)},function($){Wi[$?"unshift":"push"](()=>{bc=$,i(36,bc)})},function($){Qr=$,i(0,Qr),i(266,Ye)},function($){Ed=$,i(33,Ed)},function($){Id=$,i(34,Id)},function($){Wi[$?"unshift":"push"](()=>{Ya=$,i(61,Ya)})},function($){Wi[$?"unshift":"push"](()=>{kn=$,i(2,kn)})},$=>vt(f1,ln=$.detail,ln)]}class Zg extends li{constructor(e){super(),si(this,e,k3,S3,oi,{class:236,layout:237,stores:238,locale:3,id:4,util:239,utils:240,animations:241,disabled:242,status:234,previewUpscale:243,previewPad:244,previewMaskOpacity:5,previewImageDataMaxSize:245,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:246,elasticityMultiplier:8,willRevert:247,willProcessImage:248,willRenderCanvas:9,willRenderToolbar:249,willRenderUtilTabs:250,willSetHistoryInitialState:251,enableButtonExport:252,enableButtonRevert:253,enableNavigateHistory:254,enableToolbar:10,enableUtils:255,enableButtonClose:256,enableDropImage:257,enablePasteImage:258,enableBrowseImage:259,enableTransparencyGrid:11,layoutDirectionPreference:260,layoutHorizontalUtilsPreference:261,layoutVerticalUtilsPreference:262,layoutVerticalToolbarPreference:263,layoutVerticalControlGroupsPreference:264,layoutVerticalControlTabsPreference:265,textDirection:12,markupEditorZoomLevel:266,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:267,muteAudio:268,willSetMediaInitialTimeOffset:269,enablePan:17,enableZoom:18,enableZoomControls:270,enableZoomInput:19,enablePanInput:271,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,fixScrollDirection:272,hideTextInput:273,showTextInput:274,imagePreviewSrc:275,imageOrienter:276,pluginComponents:277,pluginOptions:27,sub:278,pluginInterface:1,root:2,play:279,pause:280,isPaused:281,togglePlayPause:282,mute:283,unmute:284,toggleMute:285,getDuration:286,getCurrentTime:287,setCurrentTime:288,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:235,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[236]}set class(e){this.$$set({class:e}),R()}get layout(){return this.$$.ctx[237]}set layout(e){this.$$set({layout:e}),R()}get stores(){return this.$$.ctx[238]}set stores(e){this.$$set({stores:e}),R()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),R()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),R()}get util(){return this.$$.ctx[239]}set util(e){this.$$set({util:e}),R()}get utils(){return this.$$.ctx[240]}set utils(e){this.$$set({utils:e}),R()}get animations(){return this.$$.ctx[241]}set animations(e){this.$$set({animations:e}),R()}get disabled(){return this.$$.ctx[242]}set disabled(e){this.$$set({disabled:e}),R()}get status(){return this.$$.ctx[234]}set status(e){this.$$set({status:e}),R()}get previewUpscale(){return this.$$.ctx[243]}set previewUpscale(e){this.$$set({previewUpscale:e}),R()}get previewPad(){return this.$$.ctx[244]}set previewPad(e){this.$$set({previewPad:e}),R()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),R()}get previewImageDataMaxSize(){return this.$$.ctx[245]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),R()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),R()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),R()}get zoomMaskOpacity(){return this.$$.ctx[246]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),R()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),R()}get willRevert(){return this.$$.ctx[247]}set willRevert(e){this.$$set({willRevert:e}),R()}get willProcessImage(){return this.$$.ctx[248]}set willProcessImage(e){this.$$set({willProcessImage:e}),R()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),R()}get willRenderToolbar(){return this.$$.ctx[249]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),R()}get willRenderUtilTabs(){return this.$$.ctx[250]}set willRenderUtilTabs(e){this.$$set({willRenderUtilTabs:e}),R()}get willSetHistoryInitialState(){return this.$$.ctx[251]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),R()}get enableButtonExport(){return this.$$.ctx[252]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),R()}get enableButtonRevert(){return this.$$.ctx[253]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),R()}get enableNavigateHistory(){return this.$$.ctx[254]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),R()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),R()}get enableUtils(){return this.$$.ctx[255]}set enableUtils(e){this.$$set({enableUtils:e}),R()}get enableButtonClose(){return this.$$.ctx[256]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),R()}get enableDropImage(){return this.$$.ctx[257]}set enableDropImage(e){this.$$set({enableDropImage:e}),R()}get enablePasteImage(){return this.$$.ctx[258]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),R()}get enableBrowseImage(){return this.$$.ctx[259]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),R()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),R()}get layoutDirectionPreference(){return this.$$.ctx[260]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),R()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[261]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),R()}get layoutVerticalUtilsPreference(){return this.$$.ctx[262]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),R()}get layoutVerticalToolbarPreference(){return this.$$.ctx[263]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),R()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[264]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),R()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[265]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),R()}get textDirection(){return this.$$.ctx[12]}set textDirection(e){this.$$set({textDirection:e}),R()}get markupEditorZoomLevel(){return this.$$.ctx[266]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),R()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),R()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),R()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),R()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),R()}get markupEditorInteractionMode(){return this.$$.ctx[267]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),R()}get muteAudio(){return this.$$.ctx[268]}set muteAudio(e){this.$$set({muteAudio:e}),R()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[269]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),R()}get enablePan(){return this.$$.ctx[17]}set enablePan(e){this.$$set({enablePan:e}),R()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(e){this.$$set({enableZoom:e}),R()}get enableZoomControls(){return this.$$.ctx[270]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),R()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),R()}get enablePanInput(){return this.$$.ctx[271]}set enablePanInput(e){this.$$set({enablePanInput:e}),R()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),R()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),R()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),R()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),R()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),R()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),R()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),R()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),R()}get fixScrollDirection(){return this.$$.ctx[272]}set fixScrollDirection(e){this.$$set({fixScrollDirection:e}),R()}get hideTextInput(){return this.$$.ctx[273]}get showTextInput(){return this.$$.ctx[274]}get imagePreviewSrc(){return this.$$.ctx[275]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),R()}get imageOrienter(){return this.$$.ctx[276]}set imageOrienter(e){this.$$set({imageOrienter:e}),R()}get pluginComponents(){return this.$$.ctx[277]}set pluginComponents(e){this.$$set({pluginComponents:e}),R()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(e){this.$$set({pluginOptions:e}),R()}get sub(){return this.$$.ctx[278]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),R()}get play(){return this.$$.ctx[279]}get pause(){return this.$$.ctx[280]}get isPaused(){return this.$$.ctx[281]}get togglePlayPause(){return this.$$.ctx[282]}get mute(){return this.$$.ctx[283]}get unmute(){return this.$$.ctx[284]}get toggleMute(){return this.$$.ctx[285]}get getDuration(){return this.$$.ctx[286]}get getCurrentTime(){return this.$$.ctx[287]}get setCurrentTime(){return this.$$.ctx[288]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),R()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[235]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),R()}get history(){return this.$$.ctx[30]}}typeof window<"u"&&(t=>{if(t&&t._5pn6ltx)return;const[e,i,n]=[[99,111,110,115,111,108,101],[108,111,103],[84,104,105,115,32,118,101,114,115,105,111,110,32,111,102,32,80,105,110,116,117,114,97,32,105,115,32,102,111,114,32,116,101,115,116,105,110,103,32,112,117,114,112,111,115,101,115,32,111,110,108,121,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,32,116,111,32,112,117,114,99,104,97,115,101,32,97,32,108,105,99,101,110,115,101,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,47,99,104,97,116,32,105,102,32,121,111,117,32,104,97,118,101,32,97,110,121,32,113,117,101,115,116,105,111,110,115,46]].map(r=>r.map(o=>String.fromCharCode(o)).join(""));t&&t[e]&&t[e][i](n)})(window);const C3=["klass","stores","isVisible","isActive","isActiveFraction","locale"],T3=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],M3=["locale"];let Np;const N2=new Set([]),fu={},$h=new Map,P3=(...t)=>{t.filter(e=>!!e.util).forEach(e=>{const[i,n,r=()=>!0]=e.util;$h.has(i)||($h.set(i,{Component:n,isSupported:r}),Qh(n).filter(o=>!C3.includes(o)).forEach(o=>{N2.add(o),fu[o]?fu[o].push(i):fu[o]=[i]}))})};var H2=[...l2,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"],j2=(t,e,i={})=>{const{prefix:n="pintura:"}=i;return H2.map(r=>t.on(r,o=>Vl(e)?((a,s,l)=>a.dispatchEvent(new CustomEvent(s,{detail:l,bubbles:!0,cancelable:!0})))(e,`${n}${r}`,o):e(r,o)))};const R3=t=>_e(t[0]),I3=t=>!R3(t),U2=t=>t[1],gh=t=>t[3]||[],E3=(t,e)=>{const i=fh(t,e);return M2(i,n=>U2(n)===t),i},fh=(t,e)=>{if(I3(e)){if(e.find(n=>U2(n)===t))return e;const i=e.find(n=>fh(t,gh(n)));return i&&i[3]}return fh(t,gh(e))},A3=()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],L3=()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],z3=()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],F3=()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],D3=()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],B3=()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],O3=()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],W3=()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],_3=()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],V3=()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],N3=()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],H3=()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],j3=()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0],U3={chrome:L3,fade:z3,pastel:A3,cold:D3,warm:F3,monoDefault:B3,monoWash:W3,monoNoir:O3,monoStark:_3,sepiaDefault:V3,sepiaRust:H3,sepiaBlues:N3,sepiaColor:j3};var G3={filterFunctions:U3,filterOptions:[["Default",[[void 0,t=>t.labelDefault]]],["Classic",[["chrome",t=>t.filterLabelChrome],["fade",t=>t.filterLabelFade],["cold",t=>t.filterLabelCold],["warm",t=>t.filterLabelWarm],["pastel",t=>t.filterLabelPastel]]],["Monochrome",[["monoDefault",t=>t.filterLabelMonoDefault],["monoNoir",t=>t.filterLabelMonoNoir],["monoStark",t=>t.filterLabelMonoStark],["monoWash",t=>t.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",t=>t.filterLabelSepiaDefault],["sepiaRust",t=>t.filterLabelSepiaRust],["sepiaBlues",t=>t.filterLabelSepiaBlues],["sepiaColor",t=>t.filterLabelSepiaColor]]]]};const Z3={base:0,min:-.25,max:.25,getLabel:t=>Ms(t/.25),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update(i=>({...i,brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]}))},X3={base:1,min:.5,max:1.5,getLabel:t=>Ms(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update(i=>({...i,contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]}))},Y3={base:1,min:0,max:2,getLabel:t=>Ms(t-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update(i=>({...i,saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]}))},q3={base:1,min:.5,max:1.5,getLabel:t=>Ms(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update(i=>({...i,exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]}))},K3={base:1,min:.15,max:4,getLabel:t=>Ms(t<1?(t-.15)/.85-1:(t-1)/3),getStore:({imageGamma:t})=>t},J3={base:0,min:-1,max:1,getStore:({imageVignette:t})=>t},Q3={base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:t})=>t,getValue:t=>{if(t.clarity)return t.clarity[0]===0?t.clarity[1]/-1:t.clarity[1]/-2},setValue:(t,e)=>{t.update(i=>({...i,clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]}))}},tw={base:0,min:-1,max:1,getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(!t.temperature)return;const e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15},setValue:(t,e)=>t.update(i=>({...i,temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]}))};var ew={finetuneControlConfiguration:{gamma:K3,brightness:Z3,contrast:X3,saturation:Y3,exposure:q3,temperature:tw,clarity:Q3,vignette:J3},finetuneOptions:[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!Jh()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean)};const iw={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},nw={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},rw={shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:'<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},ow={shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:'<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>'},aw={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:'<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>'},sw={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:'<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},lw={shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:'<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>'},cw={shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:'<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>'},dw={shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'};var uw={frameStyles:{solidSharp:iw,solidRound:nw,lineSingle:rw,lineMultiple:ow,edgeSeparate:aw,edgeCross:sw,edgeOverlap:lw,hook:cw,polaroid:dw},frameOptions:[[void 0,t=>t.labelNone],["solidSharp",t=>t.frameLabelMatSharp],["solidRound",t=>t.frameLabelMatRound],["lineSingle",t=>t.frameLabelLineSingle],["lineMultiple",t=>t.frameLabelLineMultiple],["edgeCross",t=>t.frameLabelEdgeCross],["edgeSeparate",t=>t.frameLabelEdgeSeparate],["edgeOverlap",t=>t.frameLabelEdgeOverlap],["hook",t=>t.frameLabelCornerHooks],["polaroid",t=>t.frameLabelPolaroid]]},jl=t=>t.charAt(0).toUpperCase()+t.slice(1);let Tc=null;var Hp=()=>{if(Tc===null)if(Cr())try{Tc=document.fonts.check("16px TestNonExistingFont")===!1}catch{Tc=!1}else Tc=!1;return Tc};const Gc=(t,e)=>i=>i[e?`${e}${jl(t)}`:t],pw=t=>[t,""+t],ju=(t,e)=>i=>[t[i],Gc(i,e)],G2=t=>Array.isArray(t)&&t.every(ui)?t.map(pw):t,el=[1,.2549,.2118],Xg=[1,1,1,0],hw=t=>{const{hideLabel:e=!0}=t||{};return Pw(["new","add","subtract"].map(i=>[i,Gc(i,"shapeLabelSelectionMode"),{icon:Gc(i,"shapeIconSelectionMode"),hideLabel:e}]),{title:i=>i.shapeTitleSelectionMode,layout:"radio"})},mw=t=>X2(t,{title:e=>e.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(e,i)=>`<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="${2+8*i}"/>`}),Yg={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[],disableAddPoints:!1}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},fs=(t,e={},i)=>{if(!Yg[t])return;const{position:n="relative",inputMode:r="drag",isSelection:o=!1}=i||{};return[{...Yg[t](),...e},{position:n,inputMode:r,isSelection:o}]},$w=t=>({sharpie:fs("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:"0.5%",strokeColor:[...el],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0}),eraser:fs("eraser"),path:fs("path",{pathClose:void 0,strokeWidth:"0.5%",strokeColor:[...el],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:fs("line",{strokeColor:[...el],strokeWidth:"0.5%"}),arrow:fs("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...el],strokeWidth:"0.5%"}),rectangle:fs("rectangle",{strokeColor:[...Xg],backgroundColor:[...el]}),ellipse:fs("ellipse",{strokeColor:[...Xg],backgroundColor:[...el]}),text:fs("text",{color:[...el],fontSize:"2%"}),...t}),jp=(t,e,i)=>[t,e||Gc(t,"shapeLabelTool"),{icon:Gc(t,"shapeIconTool"),...i}],gw=(t=["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"])=>t.map(e=>_e(e)?jp(e):Array.isArray(e)?cl(e[1])?jp(e[0],void 0,e[1]):jp(e[0],e[1],e[2]):void 0).filter(Boolean),fw=t=>Object.keys(t).map(ju(t,"shapeTitleColor")),yw=t=>Object.keys(t).map(ju(t,"labelSize")),bw=t=>Object.keys(t).map(ju(t,"labelSize")),qg=t=>Object.keys(t).map(ju(t,"labelSize")),xw=t=>[...t],vw=t=>t.map(e=>[e,i=>i["shapeLabelFontStyle"+e.filter(n=>n!=="normal").map(jl).join("")]]),ww=t=>t.map(e=>[_2(e),i=>i["shapeTitleLineDecoration"+jl(e)],{icon:i=>i["shapeIconLineDecoration"+jl(e)]}]),Da=(t,e)=>{const{defaultKey:i,defaultValue:n,defaultOptions:r}=e||{},o=[];return i&&(o[0]=[n,a=>a[i],{...r}]),[...o,...t]},Kg=t=>t.split(",").map(e=>e.trim()).some(e=>document.fonts.check("16px "+e)),Jg=(t={})=>["ToggleSlider",{...t}],Sw=(t,e={defaultKey:"labelDefault"})=>["Dropdown",{title:i=>i.shapeTitleFontFamily,onload:({options:i=[]})=>{Hp()&&i.map(([n])=>n).filter(Boolean).filter(n=>!Kg(n)).forEach(n=>{const r="PinturaFontTest-"+n.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(r)||document.body.append(yn("span",{textContent:" ",id:r,class:"PinturaFontTest",style:`font-family:${n};font-size:0;color:transparent;`}))})},ondestroy:()=>{Hp()&&document.querySelectorAll(".PinturaFontTest").forEach(i=>i.remove())},optionLabelStyle:i=>"font-family: "+i,options:Da(t,e),optionFilter:i=>{if(!Hp())return!0;const[n]=i;return n?Kg(n):!0}}],o0=(t,e={})=>["ColorPicker",{options:Da(t),...e}],kw=(t,e={})=>o0(t,{title:i=>i.labelColor,...e}),Z2=t=>(e,i={})=>o0(e,{title:n=>n[t],...i}),Cw=Z2("shapeTitleBackgroundColor"),Tw=Z2("shapeTitleTextColor"),Mw=(t,e={})=>o0(t,{title:i=>i.shapeTitleStrokeColor,options:Da(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(i,n)=>{const r=n.strokeWidth;(ui(r)||_e(r)?parseFloat(r):0)>0||(n.strokeWidth=e&&e.defaultStrokeWidth||"0.5%")},...e}),X2=(t,e)=>{const{title:i,optionHideLabel:n=!1,layout:r,optionIcon:o=!1}=e||{},a=G2(t),s=t.map(([u])=>_e(u)?parseFloat(u):u),l=Math.max(...s),c=Math.min(...s),d=l-c;return[r==="radio"?"RadioGroup":"Dropdown",{title:i===!1?void 0:i||(u=>u.shapeTitleStrokeWidth),options:u=>{const p=e?a.map(h=>{const[g,m,f={}]=h,x=_e(g)?parseFloat(g):g,w=(x-c)/d;let S;return o==="line"?S=`<path stroke="currentColor" stroke-linecap="square" stroke-width="${.1+.875*w}em" d="M3,12 H20"/>`:o==="dot"?S=`<circle fill="currentColor" cx="12" cy="12" r="${2+8*w}"/>`:_e(o)?S=o:sn(o)&&(S=o(x,w)),[g,m,{icon:S,hideLabel:n,...f}]}):a;return Ae(u,"backgroundColor")?Da(p,{defaultKey:"shapeLabelStrokeNone"}):Da(p)},onchange:(u,p)=>{if(!u)return;const h=p.strokeColor||[];if(h[3])return;const g=[...h];g[3]=1,p.strokeColor=g}}]},Pw=(t,e)=>{const{title:i,layout:n}=e||{};return[n==="radio"?"RadioGroup":"Dropdown",{title:i,options:Da(t)}]},Y2=(t,e,i)=>["Dropdown",{title:n=>n[e],options:Da(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:i}],Rw=t=>Y2(t,"shapeTitleLineStart","transform: scaleX(-1)"),Iw=t=>Y2(t,"shapeTitleLineEnd"),Ew=t=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&`font-style:${e[0]};font-weight:${e[1]}`,options:Da(t,{defaultKey:"shapeLabelFontStyleNormal"})}],q2=t=>["ShorthandControl",t],K2=(t,e,i,n)=>{n||t.find(([o])=>o===i)||(n={defaultKey:"labelAuto",defaultValue:i});const r=G2(t);return["Dropdown",{title:e,options:Da(r,n),...n}]},Aw=(t,e)=>K2(t,i=>i.shapeTitleFontSize,"4%",e),Lw=(t,e)=>K2(t,i=>i.shapeTitleLineHeight,"120%",e),zw=t=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:Da(t)}],Up={colorOptions:()=>fw({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),lineEndStyleOptions:()=>ww(["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"]),fontFamilyOptions:()=>xw([["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]]),fontStyleOptions:()=>vw([["normal","bold"],["italic","normal"],["italic","bold"]]),textAlignOptions:()=>["left","center","right"].map(t=>[t,e=>e["shapeTitleTextAlign"+jl(t)],{hideLabel:!0,icon:e=>e["shapeIconTextAlign"+jl(t)]}]),strokeWidthOptions:()=>qg({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),brushSizeOptions:()=>qg(Object.entries({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}).reduce((t,[e,i])=>(t[e]=2*parseFloat(i)+"%",t),{})),fontSizeOptions:()=>yw({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),lineHeightOptions:()=>bw({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"})},Fw=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),J2=(t,e)=>_e(e)?t+"%":t,Q2=(t,e,i,n)=>_e(n)?Math.round(t/i*100)+"%":""+Fw.format(t),Gp={getValue:t=>parseFloat(t),setValue:J2,label:Q2,step:.05,labelClass:"PinturaPercentageLabel"},Dw={factory:q2,options:{title:"Text shadow",controls:[["ToggleSlider","x",{...Gp,min:-100,max:100,labelPrefix:"X"}],["ToggleSlider","y",{...Gp,min:-100,max:100,labelPrefix:"Y"}],["ToggleSlider","blur",{...Gp,min:0,max:25,labelPrefix:t=>t.shapeTitleTextShadowBlur}],["ColorPicker","color",{enablePresets:!1}]]}},au={defaultColor:{factory:kw,items:"colorOptions"},defaultNumber:{factory:Jg},defaultPercentage:{factory:Jg,options:{getValue:t=>parseFloat(t),setValue:t=>t+"%",step:.05,label:(t,e,i)=>Math.round(t/i*100)+"%",labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:Cw},strokeColor:{items:"colorOptions",factory:Mw},strokeWidth:{items:"strokeWidthOptions",factory:X2},brushSize:{items:"brushSizeOptions",factory:mw},drawMode:{factory:hw},lineStart:{items:"lineEndStyleOptions",factory:Rw},lineEnd:{items:"lineEndStyleOptions",factory:Iw},color:{items:"colorOptions",factory:Tw},fontFamily:{items:"fontFamilyOptions",factory:Sw},fontStyle_fontWeight:{items:"fontStyleOptions",factory:Ew},fontSize:{items:"fontSizeOptions",factory:Aw},lineHeight:{items:"lineHeightOptions",factory:Lw},textAlign:{items:"textAlignOptions",factory:zw},textShadowX_textShadowY_textShadowBlur_textShadowColor:Dw,textOutlineWidth_textOutlineColor:{factory:q2,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:t=>parseFloat(t),setValue:J2,label:Q2,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:t=>t.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:t=>t.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:t=>t.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:t=>t.labelAmount}}},tb=(t={})=>{const e={...au,...t},i={};return Object.entries(e).forEach(([n,r])=>{if(!/Options$/.test(n))if(au[n]&&cl(r)&&!An(r)){const{component:o,factory:a,items:s,options:l={}}=e[n];if(_e(a))i[n]=[a,l];else{const c=au[n].items;let d=_e(c)?e[c]||Up[c]():void 0;_e(s)&&Up[s]?d=e[s]?e[s].every(p=>!Array.isArray(p))?e[s].map(p=>[p,p]):e[s]:Up[s]():(s||l.items)&&(d=s||l.items);let u=a||au[n].factory;sn(u)?i[n]=d?u(d,l):u(l):o&&(i[n]=[o,{...l,items:s}])}}else i[n]=r}),i};function Bw(t){let e,i,n,r,o;const a=t[7].default,s=ur(a,t,t[6],null);return{c(){e=ut("div"),i=ut("div"),s&&s.c(),v(i,"class","PinturaToolbarInner"),v(e,"class","PinturaToolbar"),v(e,"data-layout",t[1]),v(e,"data-overflow",t[0])},m(l,c){it(l,e,c),St(e,i),s&&s.m(i,null),n=!0,r||(o=[Mt(i,"measure",t[3]),Zi(Mr.call(null,i)),Mt(e,"measure",t[2]),Zi(Mr.call(null,e))],r=!0)},p(l,[c]){s&&s.p&&(!n||64&c)&&hr(s,a,l,l[6],n?pr(a,l[6],c,null):mr(l[6]),null),(!n||2&c)&&v(e,"data-layout",l[1]),(!n||1&c)&&v(e,"data-overflow",l[0])},i(l){n||(M(s,l),n=!0)},o(l){F(s,l),n=!1},d(l){l&&Q(e),s&&s.d(l),r=!1,ji(o)}}}function Ow(t,e,i){let n,r,{$$slots:o={},$$scope:a}=e,s=0,l=0,c=0;const d=()=>{i(0,r=n==="compact"&&s>c?"overflow":void 0)};return t.$$set=u=>{"$$scope"in u&&i(6,a=u.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&i(1,n=l>c?"compact":"default")},[r,n,({detail:u})=>{const{width:p}=u;i(5,c=p),d()},({detail:u})=>{const{width:p}=u;p>l&&i(4,l=p),s=p,r||d()},l,c,a,o]}class eb extends li{constructor(e){super(),si(this,e,Ow,Bw,oi,{})}}function Ww(t){let e,i,n,r;const o=t[5].default,a=ur(o,t,t[4],null);return{c(){e=ut("div"),a&&a.c(),v(e,"class",t[0])},m(s,l){it(s,e,l),a&&a.m(e,null),i=!0,n||(r=[Mt(e,"measure",function(){Gi(t[1]&&t[3])&&(t[1]&&t[3]).apply(this,arguments)}),Zi(t[2].call(null,e))],n=!0)},p(s,[l]){t=s,a&&a.p&&(!i||16&l)&&hr(a,o,t,t[4],i?pr(o,t[4],l,null):mr(t[4]),null),(!i||1&l)&&v(e,"class",t[0])},i(s){i||(M(a,s),i=!0)},o(s){F(a,s),i=!1},d(s){s&&Q(e),a&&a.d(s),n=!1,ji(r)}}}function _w(t,e,i){let{$$slots:n={},$$scope:r}=e;const o=Ca();let{class:a=null}=e;const s=un("measurable");let l=!1;return Ls(()=>i(1,l=!0)),t.$$set=c=>{"class"in c&&i(0,a=c.class),"$$scope"in c&&i(4,r=c.$$scope)},[a,l,s,({detail:c})=>o("measure",c),r,n]}class Vw extends li{constructor(e){super(),si(this,e,_w,Ww,oi,{class:0})}}const Nw=t=>({}),Qg=t=>({}),Hw=t=>({}),tf=t=>({}),jw=t=>({}),ef=t=>({});function nf(t){let e,i;const n=t[4].header,r=ur(n,t,t[3],ef);return{c(){e=ut("div"),r&&r.c(),v(e,"class","PinturaUtilHeader")},m(o,a){it(o,e,a),r&&r.m(e,null),i=!0},p(o,a){r&&r.p&&(!i||8&a)&&hr(r,n,o,o[3],i?pr(n,o[3],a,jw):mr(o[3]),ef)},i(o){i||(M(r,o),i=!0)},o(o){F(r,o),i=!1},d(o){o&&Q(e),r&&r.d(o)}}}function rf(t){let e,i;const n=t[4].footer,r=ur(n,t,t[3],Qg);return{c(){e=ut("div"),r&&r.c(),v(e,"class","PinturaUtilFooter")},m(o,a){it(o,e,a),r&&r.m(e,null),i=!0},p(o,a){r&&r.p&&(!i||8&a)&&hr(r,n,o,o[3],i?pr(n,o[3],a,Nw):mr(o[3]),Qg)},i(o){i||(M(r,o),i=!0)},o(o){F(r,o),i=!1},d(o){o&&Q(e),r&&r.d(o)}}}function Uw(t){let e,i,n,r,o,a,s=t[1]&&nf(t);const l=t[4].main,c=ur(l,t,t[3],tf),d=c||function(p){let h,g;return h=new Vw({props:{class:"PinturaStage"}}),h.$on("measure",p[5]),{c(){It(h.$$.fragment)},m(m,f){Pt(h,m,f),g=!0},p:Je,i(m){g||(M(h.$$.fragment,m),g=!0)},o(m){F(h.$$.fragment,m),g=!1},d(m){Rt(h,m)}}}(t);let u=t[2]&&rf(t);return{c(){s&&s.c(),e=$e(),i=ut("div"),d&&d.c(),n=$e(),u&&u.c(),r=$e(),o=Tn(),v(i,"class","PinturaUtilMain")},m(p,h){s&&s.m(p,h),it(p,e,h),it(p,i,h),d&&d.m(i,null),t[6](i),it(p,n,h),u&&u.m(p,h),it(p,r,h),it(p,o,h),a=!0},p(p,[h]){p[1]?s?(s.p(p,h),2&h&&M(s,1)):(s=nf(p),s.c(),M(s,1),s.m(e.parentNode,e)):s&&(Ie(),F(s,1,1,()=>{s=null}),Ee()),c&&c.p&&(!a||8&h)&&hr(c,l,p,p[3],a?pr(l,p[3],h,Hw):mr(p[3]),tf),p[2]?u?(u.p(p,h),4&h&&M(u,1)):(u=rf(p),u.c(),M(u,1),u.m(r.parentNode,r)):u&&(Ie(),F(u,1,1,()=>{u=null}),Ee())},i(p){a||(M(s),M(d,p),M(u),M(!1),a=!0)},o(p){F(s),F(d,p),F(u),F(!1),a=!1},d(p){s&&s.d(p),p&&Q(e),p&&Q(i),d&&d.d(p),t[6](null),p&&Q(n),u&&u.d(p),p&&Q(r),p&&Q(o)}}}function Gw(t,e,i){let{$$slots:n={},$$scope:r}=e,{hasHeader:o=!!e.$$slots.header}=e,{hasFooter:a=!!e.$$slots.footer}=e,{root:s}=e;return t.$$set=l=>{i(7,e=Cn(Cn({},e),Vc(l))),"hasHeader"in l&&i(1,o=l.hasHeader),"hasFooter"in l&&i(2,a=l.hasFooter),"root"in l&&i(0,s=l.root),"$$scope"in l&&i(3,r=l.$$scope)},e=Vc(e),[s,o,a,r,n,function(l){Xr.call(this,t,l)},function(l){Wi[l?"unshift":"push"](()=>{s=l,i(0,s)})}]}class ul extends li{constructor(e){super(),si(this,e,Gw,Uw,oi,{hasHeader:1,hasFooter:2,root:0})}}function of(t){let e,i;return{c(){e=ut("div"),v(e,"class","PinturaRangeInputMeter"),v(e,"style",i=`transform: translateX(${t[9].x-t[12].x}px) translateY(${t[9].y-t[12].y}px)`)},m(n,r){it(n,e,r),e.innerHTML=t[7]},p(n,r){128&r[0]&&(e.innerHTML=n[7]),512&r[0]&&i!==(i=`transform: translateX(${n[9].x-n[12].x}px) translateY(${n[9].y-n[12].y}px)`)&&v(e,"style",i)},d(n){n&&Q(e)}}}function Zw(t){let e,i,n,r,o,a,s,l,c,d,u,p=t[9]&&of(t);return{c(){e=ut("div"),i=ut("span"),n=$e(),r=ut("button"),o=$n(t[1]),s=$e(),l=ut("div"),p&&p.c(),v(i,"class","PinturaRangeInputValue"),v(r,"class","PinturaRangeInputReset"),v(r,"type","button"),r.disabled=a=t[0]===t[2],v(l,"class","PinturaRangeInputInner"),v(l,"style",t[8]),v(l,"data-value-limited",t[5]),v(e,"class","PinturaRangeInput"),v(e,"tabindex","0")},m(h,g){it(h,e,g),St(e,i),i.innerHTML=t[3],St(e,n),St(e,r),St(r,o),St(e,s),St(e,l),p&&p.m(l,null),d||(u=[Mt(r,"click",t[17]),Mt(l,"interactionstart",t[13]),Mt(l,"interactionupdate",t[15]),Mt(l,"interactionend",t[16]),Mt(l,"interactionrelease",t[14]),Zi(c=Fs.call(null,l,{inertia:t[6]})),Mt(l,"measure",t[37]),Zi(Mr.call(null,l)),Mt(e,"wheel",t[19],{passive:!1}),Mt(e,"nudge",t[20]),Zi(Ds.call(null,e,{direction:"horizontal",preventDefault:!0}))],d=!0)},p(h,g){8&g[0]&&(i.innerHTML=h[3]),2&g[0]&&Ln(o,h[1]),5&g[0]&&a!==(a=h[0]===h[2])&&(r.disabled=a),h[9]?p?p.p(h,g):(p=of(h),p.c(),p.m(l,null)):p&&(p.d(1),p=null),256&g[0]&&v(l,"style",h[8]),32&g[0]&&v(l,"data-value-limited",h[5]),c&&Gi(c.update)&&64&g[0]&&c.update.call(null,{inertia:h[6]})},i:Je,o:Je,d(h){h&&Q(e),p&&p.d(),d=!1,ji(u)}}}function Xw(t,e,i){let n,r,o,a,s,l,c,d,u,p,{labelReset:h="Reset"}=e,{direction:g="x"}=e,{min:m=0}=e,{max:f=1}=e,{base:x=m}=e,{value:w=0}=e,{valueLabel:S=0}=e,{valueMin:C}=e,{valueMax:I}=e,{oninputstart:E=fe}=e,{oninputmove:B=fe}=e,{oninputend:T=fe}=e,{elasticity:D=0}=e,{nudgeMultiplier:U}=e,{step:P=8}=e;const y=un("isAnimated");L(t,y,_=>i(6,d=_));const V=un("fixScrollDirection");L(t,V,_=>i(43,u=_));const nt=(_,rt,zt)=>Math.ceil((_-zt)/rt)*rt+zt;let k,N,tt;const ct={x:2,y:0},ot=(_,rt,zt)=>`M ${_-zt} ${rt} a ${zt} ${zt} 0 1 0 0 -1`;let mt,Z,gt=!1,xt={snap:!1,elastic:!1};const dt=(_,rt,zt)=>{const Zt=_[g]+rt[g],Ot=tn(Zt,mt[1][g],mt[0][g]),Yt=D?Ot+ws(Zt-Ot,D):Ot,Ut=zt.elastic?Yt:Ot,ht=at(0,0);return ht[g]=Ut,wt.set(ht,{hard:zt.snap}),tn(q(ht,g),m,f)},wt=di();L(t,wt,_=>i(9,p=_));const J=(_,rt)=>{const zt=.5*(k[rt]-a[rt])-(Ac(_,m,f)*a[rt]-.5*a[rt]);return{x:rt==="x"?zt:0,y:rt==="y"?zt:0}},q=(_,rt)=>{const zt=-(_[rt]-.5*k[rt])/a[rt];return m+zt*n},ft=wt.subscribe(_=>{_&&Z&&B(tn(q(_,g),m,f))}),Lt=_=>{const rt=[J(C??m,g),J(I??f,g)],zt={x:g==="x"?p.x+_:0,y:g==="y"?p.y+_:0},Zt=tn(zt[g],rt[1][g],rt[0][g]),Ot={...p,[g]:Zt};vt(wt,p=Ot,p);const Yt=tn(q(Ot,g),m,f);E(),B(Yt),T(Yt)};return Uo(()=>{ft()}),t.$$set=_=>{"labelReset"in _&&i(1,h=_.labelReset),"direction"in _&&i(21,g=_.direction),"min"in _&&i(22,m=_.min),"max"in _&&i(23,f=_.max),"base"in _&&i(2,x=_.base),"value"in _&&i(0,w=_.value),"valueLabel"in _&&i(3,S=_.valueLabel),"valueMin"in _&&i(24,C=_.valueMin),"valueMax"in _&&i(25,I=_.valueMax),"oninputstart"in _&&i(26,E=_.oninputstart),"oninputmove"in _&&i(27,B=_.oninputmove),"oninputend"in _&&i(28,T=_.oninputend),"elasticity"in _&&i(29,D=_.elasticity),"nudgeMultiplier"in _&&i(30,U=_.nudgeMultiplier),"step"in _&&i(31,P=_.step)},t.$$.update=()=>{if(12582912&t.$$.dirty[0]&&i(33,n=f-m),20971520&t.$$.dirty[0]&&i(35,r=C!=null?Math.max(C,m):m),41943040&t.$$.dirty[0]&&i(34,o=I!=null?Math.min(I,f):f),12582916&t.$$.dirty[0]&&i(36,s=Ac(x,m,f)),16&t.$$.dirty[0]|32&t.$$.dirty[1]&&k){const _=.5*k.y;let rt,zt=40*s,Zt="",Ot=k.y,Yt="";for(let Ut=0;Ut<=40;Ut++){const ht=ct.x+10*Ut,G=_;Zt+=ot(ht,G,Ut%5==0?2:.75)+" ",rt=ht+ct.x,Ut===zt&&(Yt=`<path d="M${ht} ${G-4} l2 3 l-2 -1 l-2 1 z"/>`)}i(7,N=`<svg width="${rt}" height="${Ot}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${rt} ${Ot}" aria-hidden="true" focusable="false">
        ${Yt}
        <rect rx="4" ry="4" y="${_-4}"" height="8"/>
        <path fill-rule="evenodd" d="${Zt.trim()}"/></svg>`),i(32,tt={x:rt-2*ct.x,y:Ot})}16&t.$$.dirty[0]|2&t.$$.dirty[1]&&(a=k&&tt),12582912&t.$$.dirty[0]|24&t.$$.dirty[1]&&i(5,l=r!==m||o!==f),32&t.$$.dirty[0]|24&t.$$.dirty[1]&&i(8,c=l?function(_,rt){const Zt=Ac(_,m,f),Ot=Ac(rt,m,f);return`--range-mask-from:${100*ai(nt(Zt,.025,0)-.0125)}%;--range-mask-to:${100*ai(nt(Ot,.025,0)-.0125)}%`}(r,o):""),2097233&t.$$.dirty[0]|4&t.$$.dirty[1]&&n&&k&&k.x&&k.y&&wt.set(J(w,g),{hard:d===!1})},[w,h,x,S,k,l,d,N,c,p,y,V,ct,()=>{gt=!1,Z=Sa(wt),mt=[J(C??m,g),J(I??f,g)],E()},()=>{gt=!0},({detail:_})=>{xt.snap=!gt,xt.elastic=!gt,dt(Z,_.translation,xt)},({detail:_})=>{xt.snap=!1,xt.elastic=!1;const rt=dt(Z,_.translation,xt);if(Z=void 0,mt=void 0,Math.abs(rt-x)<.01)return T(x);T(rt)},()=>{i(0,w=tn(x,r,o)),E(),T(w)},wt,_=>{_.preventDefault(),_.stopPropagation();const rt=Nu(_,{fixScrollDirection:u})*P;Lt(rt)},({detail:_})=>{Lt(_[g]*Math.abs(U||8))},g,m,f,C,I,E,B,T,D,U,P,tt,n,o,r,s,_=>i(4,k=(rt=>at(rt.width,rt.height))(_.detail))]}class a0 extends li{constructor(e){super(),si(this,e,Xw,Zw,oi,{labelReset:1,direction:21,min:22,max:23,base:2,value:0,valueLabel:3,valueMin:24,valueMax:25,oninputstart:26,oninputmove:27,oninputend:28,elasticity:29,nudgeMultiplier:30,step:31},null,[-1,-1])}}var Yw={[Ps]:t=>({x:t.x,y:t.y}),[ca]:t=>({x:t.x+t.width,y:t.y}),[Rs]:t=>({x:t.x+t.width,y:t.y}),[da]:t=>({x:t.x+t.width,y:t.y+t.height}),[Is]:t=>({x:t.x,y:t.y+t.height}),[ua]:t=>({x:t.x,y:t.y+t.height}),[Es]:t=>({x:t.x,y:t.y}),[la]:t=>({x:t.x,y:t.y})};function af(t,e,i){const n=t.slice();return n[14]=e[i].key,n[15]=e[i].translate,n[16]=e[i].scale,n[17]=e[i].type,n[18]=e[i].opacity,n}function sf(t,e){let i,n,r,o,a,s,l,c;return{key:t,first:null,c(){i=ut("div"),v(i,"role","button"),v(i,"aria-label",n=`Drag ${e[17]} ${e[14]}`),v(i,"tabindex",r=e[17]==="edge"?-1:0),v(i,"class","PinturaRectManipulator"),v(i,"data-direction",o=e[14]),v(i,"data-shape",a=e[17]==="edge"?"edge":""+e[0]),v(i,"style",s=`--tx:${e[15].x};--ty:${e[15].y};--sx:${e[16].x};--sy:${e[16].y};opacity:${e[18]}`),this.first=i},m(d,u){it(d,i,u),l||(c=[Mt(i,"nudge",function(){Gi(e[6](e[14]))&&e[6](e[14]).apply(this,arguments)}),Zi(Ds.call(null,i,{preventDefault:!0})),Mt(i,"interactionstart",function(){Gi(e[5]("resizestart",e[14]))&&e[5]("resizestart",e[14]).apply(this,arguments)}),Mt(i,"interactionupdate",function(){Gi(e[5]("resizemove",e[14]))&&e[5]("resizemove",e[14]).apply(this,arguments)}),Mt(i,"interactionend",function(){Gi(e[5]("resizeend",e[14]))&&e[5]("resizeend",e[14]).apply(this,arguments)}),Zi(Fs.call(null,i))],l=!0)},p(d,u){e=d,2&u&&n!==(n=`Drag ${e[17]} ${e[14]}`)&&v(i,"aria-label",n),2&u&&r!==(r=e[17]==="edge"?-1:0)&&v(i,"tabindex",r),2&u&&o!==(o=e[14])&&v(i,"data-direction",o),3&u&&a!==(a=e[17]==="edge"?"edge":""+e[0])&&v(i,"data-shape",a),2&u&&s!==(s=`--tx:${e[15].x};--ty:${e[15].y};--sx:${e[16].x};--sy:${e[16].y};opacity:${e[18]}`)&&v(i,"style",s)},d(d){d&&Q(i),l=!1,ji(c)}}}function qw(t){let e,i=[],n=new Map,r=t[1];const o=a=>a[14];for(let a=0;a<r.length;a+=1){let s=af(t,r,a),l=o(s);n.set(l,i[a]=sf(l,s))}return{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=Tn()},m(a,s){for(let l=0;l<i.length;l+=1)i[l].m(a,s);it(a,e,s)},p(a,[s]){99&s&&(r=a[1],i=Oa(i,s,o,1,a,r,n,e.parentNode,i2,sf,e,af))},i:Je,o:Je,d(a){for(let s=0;s<i.length;s+=1)i[s].d(a);a&&Q(e)}}}function Kw(t,e,i){let n,r,o,a,{rect:s=null}=e,{visible:l=!1}=e,{style:c}=e;const d=un("isAnimated");L(t,d,m=>i(11,a=m));const u=di(void 0,{precision:1e-4,stiffness:.2,damping:.4});L(t,u,m=>i(10,o=m));const p=di(0,{precision:.001});let h;L(t,p,m=>i(9,r=m));const g=Ca();return t.$$set=m=>{"rect"in m&&i(7,s=m.rect),"visible"in m&&i(8,l=m.visible),"style"in m&&i(0,c=m.style)},t.$$.update=()=>{2304&t.$$.dirty&&u.set(l?1:.5,{hard:a===!1}),2304&t.$$.dirty&&p.set(l?1:0,{hard:a===!1}),1664&t.$$.dirty&&i(1,n=Object.keys(Xp).map((m,f)=>{const x=Xp[m],w=Yw[x](s),S=x.length===1?"edge":"corner",C=S==="corner";return{key:x,type:S,scale:{x:/^(t|b)$/.test(x)?s.width:C?tn(o,.5,1.25):1,y:/^(r|l)$/.test(x)?s.height:C?tn(o,.5,1.25):1},translate:{x:w.x,y:w.y},opacity:r}}))},[c,n,d,u,p,(m,f)=>({detail:x})=>{h&&f!==h||m!=="resizestart"&&h===void 0||(m==="resizestart"&&(h=f),m==="resizeend"&&(h=void 0),g(m,{direction:f,translation:x&&x.translation}))},m=>({detail:f})=>{g("resizestart",{direction:m,translation:{x:0,y:0}}),g("resizemove",{direction:m,translation:f}),g("resizeend",{direction:m,translation:{x:0,y:0}})},s,l,r,o,a]}class Jw extends li{constructor(e){super(),si(this,e,Kw,qw,oi,{rect:7,visible:8,style:0})}}var Qw=t=>{function e(a,s){t.dispatchEvent(new CustomEvent(a,{detail:s}))}const i=a=>{a.preventDefault(),t.addEventListener("gesturechange",n),t.addEventListener("gestureend",r),e("gesturedown")},n=a=>{a.preventDefault(),e("gestureupdate",a.scale)},r=a=>{e("gestureup",a.scale),a.preventDefault(),o()},o=()=>{t.removeEventListener("gesturechange",n),t.removeEventListener("gestureend",r)};return t.addEventListener("gesturestart",i),{destroy:()=>{o(),t.removeEventListener("gesturestart",i)}}},s0={[Ps]:Is,[Rs]:Es,[Is]:Ps,[Es]:Rs,[la]:da,[ca]:ua,[da]:la,[ua]:ca},l0=t=>{const e=t===Es||t===Rs,i=t===Ps||t===Is;return[t===Rs||t===ca||t===da,t===Es||t===ua||t===la,t===Ps||t===ca||t===la,t===Is||t===da||t===ua,e,i,e||i]},lf=(t,e,i,n={})=>{const{target:r,translate:o}=e,{aspectRatio:a,minSize:s,maxSize:l}=n,c=Oc[s0[r]],d=Fn(at(t.x,t.y),at(c[0]*t.width,c[1]*t.height)),u=Oc[r],p=Fn(Pi(t),at(u[0]*t.width,u[1]*t.height)),[h,g,m,f,x,w,S]=l0(r);let C=o.x,I=o.y;x?I=0:w&&(C=0);const{inner:E,outer:B}=tS(d,r,i,{aspectRatio:a,minSize:s,maxSize:l});let[T,D,U,P]=ll(t);if(h?P=d.x:g&&(D=d.x),f?T=d.y:m&&(U=d.y),h){const y=E.x+E.width,V=B.x+B.width;D=tn(p.x+C,y,V)}else if(g){const y=B.x,V=E.x;P=tn(p.x+C,y,V)}if(f){const y=E.y+E.height,V=B.y+B.height;U=tn(p.y+I,y,V)}else if(m){const y=B.y,V=E.y;T=tn(p.y+I,y,V)}if(P>E.x&&(P=E.x),D<E.x+E.width&&(D=E.x+E.width),T>E.y&&(T=E.y),U<E.y+E.height&&(U=E.y+E.height),P<B.x){const y=B.x-P;P=B.x,D+=y}if(D>B.x+B.width){const y=D-(B.x+B.width);D=B.x+B.width,P-=y}if(T<B.y){const y=B.y-T;T=B.y,U+=y}if(U>B.y+B.height){const y=U-(B.y+B.height);U=B.y+B.height,T-=y}if(a)if(S){let y=D-P,V=U-T;x?(V=y/a,T=d.y-.5*V,U=d.y+.5*V):w&&(y=V*a,P=d.x-.5*y,D=d.x+.5*y)}else{const y=at(p.x+C-d.x,p.y+I-d.y);r===ca?(y.x=Math.max(0,y.x),y.y=Math.min(0,y.y)):r===da?(y.x=Math.max(0,y.x),y.y=Math.max(0,y.y)):r===ua?(y.x=Math.min(0,y.x),y.y=Math.max(0,y.y)):r===la&&(y.x=Math.min(0,y.x),y.y=Math.min(0,y.y));const V=Ss(y),nt=Ss(at(E.width,E.height)),k=Ss(at(B.width,B.height)),N=tn(V,nt,k),tt=at(a,1),ct=Dr(ho(tt),N);r===ca?(D=d.x+ct.x,T=d.y-ct.y):r===da?(D=d.x+ct.x,U=d.y+ct.y):r===ua?(P=d.x-ct.x,U=d.y+ct.y):r===la&&(P=d.x-ct.x,T=d.y-ct.y)}return En(P,T,D-P,U-T)};const tS=(t,e,i,n)=>{const{aspectRatio:r,minSize:o,maxSize:a}=n,s=e===Rs||e===ca||e===da,l=e===Es||e===ua||e===la,c=e===Ps||e===ca||e===la,d=e===Is||e===da||e===ua,u=e===Es||e===Rs,p=e===Ps||e===Is,h=Pi(i);s?(h.x=t.x,h.width-=t.x):l&&(h.width=t.x),d?(h.y=t.y,h.height-=t.y):c&&(h.height=t.y);const g=((E,B)=>pa(0,0,E,B))(Math.min(h.width,a.width),Math.min(h.height,a.height));if(r){if(u){const E=Math.min(t.y,i.height-t.y);g.height=Math.min(2*E,g.height)}else if(p){const E=Math.min(t.x,i.width-t.x);g.width=Math.min(2*E,g.width)}}const m=r?sl(as(Zr(o),r)):o,f=r?sl(to(g,r)):g;let x,w,S,C;s?x=t.x:l&&(w=t.x),d?S=t.y:c&&(C=t.y),s?w=x+m.width:l&&(x=w-m.width),d?C=S+m.height:c&&(S=C-m.height),u?(S=t.y-.5*m.height,C=t.y+.5*m.height):p&&(x=t.x-.5*m.width,w=t.x+.5*m.width);const I=rr([at(x,S),at(w,C)]);return s?w=x+f.width:l&&(x=w-f.width),d?C=S+f.height:c&&(S=C-f.height),u?(S=t.y-.5*f.height,C=t.y+.5*f.height):p&&(x=t.x-.5*f.width,w=t.x+.5*f.width),x=Math.max(i.x,x),w=Math.min(i.x+i.width,w),S=Math.max(i.y,S),C=Math.min(i.y+i.height,C),{inner:I,outer:rr([at(x,S),at(w,C)])}};var cf=t=>180*t/Math.PI;function eS(t){let e,i,n;return i=new a0({props:{elasticity:t[5],min:t[9],max:t[10],value:t[11],valueMin:Math.max(t[9],t[0]),valueMax:Math.min(t[10],t[1]),labelReset:t[6],base:t[12],valueLabel:Math.round(cf(t[11]))+"&deg;",oninputstart:t[2],oninputmove:t[17],oninputend:t[18]}}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"class","PinturaImageRotator")},m(r,o){it(r,e,o),Pt(i,e,null),n=!0},p(r,[o]){const a={};32&o&&(a.elasticity=r[5]),512&o&&(a.min=r[9]),1024&o&&(a.max=r[10]),2048&o&&(a.value=r[11]),513&o&&(a.valueMin=Math.max(r[9],r[0])),1026&o&&(a.valueMax=Math.min(r[10],r[1])),64&o&&(a.labelReset=r[6]),4096&o&&(a.base=r[12]),2048&o&&(a.valueLabel=Math.round(cf(r[11]))+"&deg;"),4&o&&(a.oninputstart=r[2]),392&o&&(a.oninputmove=r[17]),400&o&&(a.oninputend=r[18]),i.$set(a)},i(r){n||(M(i.$$.fragment,r),n=!0)},o(r){F(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Rt(i)}}}function iS(t,e,i){let n,r,o,a,s,l,c,{rotation:d}=e,{valueMin:u}=e,{valueMax:p}=e,{oninputstart:h=fe}=e,{oninputmove:g=fe}=e,{oninputend:m=fe}=e,{elasticity:f=0}=e,{labelReset:x}=e,{rotationMin:w}=e,{rotationMax:S}=e;return t.$$set=C=>{"rotation"in C&&i(13,d=C.rotation),"valueMin"in C&&i(0,u=C.valueMin),"valueMax"in C&&i(1,p=C.valueMax),"oninputstart"in C&&i(2,h=C.oninputstart),"oninputmove"in C&&i(3,g=C.oninputmove),"oninputend"in C&&i(4,m=C.oninputend),"elasticity"in C&&i(5,f=C.elasticity),"labelReset"in C&&i(6,x=C.labelReset),"rotationMin"in C&&i(14,w=C.rotationMin),"rotationMax"in C&&i(15,S=C.rotationMax)},t.$$.update=()=>{16384&t.$$.dirty&&i(9,n=w+1e-9),32768&t.$$.dirty&&i(10,r=S-1e-9),1536&t.$$.dirty&&i(12,o=n+.5*(r-n)),32768&t.$$.dirty&&i(16,a=2*S),8192&t.$$.dirty&&i(8,s=Math.sign(d)),73728&t.$$.dirty&&i(7,l=Math.round(Math.abs(d)/a)*a),8576&t.$$.dirty&&i(11,c=d-s*l)},[u,p,h,g,m,f,x,l,s,n,r,c,o,d,w,S,a,C=>g(s*l+C),C=>m(s*l+C)]}class nS extends li{constructor(e){super(),si(this,e,iS,eS,oi,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function rS(t){let e,i,n,r,o;return{c(){e=ut("div"),i=ut("p"),n=$n(t[0]),r=$n(" × "),o=$n(t[1]),v(e,"class","PinturaImageInfo")},m(a,s){it(a,e,s),St(e,i),St(i,n),St(i,r),St(i,o)},p(a,[s]){1&s&&Ln(n,a[0]),2&s&&Ln(o,a[1])},i:Je,o:Je,d(a){a&&Q(e)}}}function oS(t,e,i){let{width:n}=e,{height:r}=e;return t.$$set=o=>{"width"in o&&i(0,n=o.width),"height"in o&&i(1,r=o.height)},[n,r]}class aS extends li{constructor(e){super(),si(this,e,oS,rS,oi,{width:0,height:1})}}function sS(t){let e,i;return e=new cs({props:{class:"PinturaPresetListFilter",layout:"row",options:t[8],selectedIndex:t[7],onchange:t[10]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};256&r&&(o.options=n[8]),128&r&&(o.selectedIndex=n[7]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function lS(t){let e,i;return e=new e0({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[9],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[sS]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,[r]){const o={};1&r&&(o.icon=n[0]),2&r&&(o.label=n[1]),4&r&&(o.labelClass=n[2]),8&r&&(o.hideLabel=n[3]),512&r&&(o.options=n[9]),16&r&&(o.selectedIndex=n[4]),32&r&&(o.onchange=n[5]),64&r&&(o.optionMapper=n[6]),262528&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}const df='fill="none" stroke="currentColor"';function cS(t,e,i){let n,r,o,{icon:a}=e,{label:s}=e,{labelClass:l}=e,{hideLabel:c}=e,{options:d}=e,{selectedIndex:u}=e,{onchange:p}=e,{optionMapper:h}=e,{filter:g="landscape"}=e,{onfilterchange:m=fe}=e;const f=(w,S,C,I,E)=>`
    <rect ${df} x="${w}" y="${S}" width="${C}" height="${I}" rx="${E}"/>`,x=(w,S)=>`<path ${df} d="M${w} ${S} l2 2 l3 -4"/>`;return t.$$set=w=>{"icon"in w&&i(0,a=w.icon),"label"in w&&i(1,s=w.label),"labelClass"in w&&i(2,l=w.labelClass),"hideLabel"in w&&i(3,c=w.hideLabel),"options"in w&&i(12,d=w.options),"selectedIndex"in w&&i(4,u=w.selectedIndex),"onchange"in w&&i(5,p=w.onchange),"optionMapper"in w&&i(6,h=w.optionMapper),"filter"in w&&i(11,g=w.filter),"onfilterchange"in w&&i(13,m=w.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&i(9,n=((w,S)=>(w||[]).map(C=>_e(C[0])?(C[1]=C[1].map(S),C):S(C)))(d,(w=>S=>{const[C,I,E={}]=S;return ui(C)&&(E.hidden=w==="landscape"?C<1:C>1),[C,I,E]})(g))),2048&t.$$.dirty&&i(7,r=g==="landscape"?0:1),128&t.$$.dirty&&i(8,o=[["landscape","Landscape",{hideLabel:!0,icon:f(2,6,19,12,2)+(r===0?x(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:f(5,3,13,18,2)+(r===1?x(9,12):"")}]])},[a,s,l,c,u,p,h,r,o,n,w=>{i(11,g=w.value),m(w.value)},g,d,m]}class dS extends li{constructor(e){super(),si(this,e,cS,lS,oi,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}const uf=t=>Eo(t,e=>ai(e,6)),pf=t=>Ho(t,e=>ai(e,6)),ys=(t,e,i=1e-4)=>Math.abs(t-e)<i;var uS=(t,e,i,n,r={})=>{const{aspectRatio:o}=r;t=pf(t),n=n.map(uf);const a=Sm(t,s0[i.target]),s=Eo(a,x=>ai(x,6)),l=o?as(r.minSize,o):r.minSize,c=o?to(r.maxSize,o):r.maxSize,d=Sm(e,i.target);if(So(d,a)<1){e=Pi(t);const x=Math.min(l.width/t.width,l.height/t.height);Fr(e,x,a)}e=wm(Pi(e),l,c,a);let u=Pi(e);e=pf(e);const p=$y(n,1),h=Ro(t),g=Ro(e),m=h.findIndex(x=>vs(Eo(x,w=>ai(w,6)),s)),f=x=>p.map(w=>Mh(w,x)).filter(Boolean).pop();if(o){const x=g.map((w,S)=>{if(S===m)return;const C=at(a.x-w.x,a.y-w.y);ho(C),Dr(C,.5);const I=at(a.x-C.x,a.y-C.y),E=As(I,uf(w)),B=f(E);if(!B)return;const T=h[S];return{intersection:B,cornerDist:So(a,T),intersectionDist:So(a,B)}}).filter(Boolean);if(x.length){const w=x.reduce((S,C)=>{const I=C.intersectionDist/C.cornerDist;return I<S?I:S},Number.MAX_SAFE_INTEGER);u=Pi(t),Fr(u,w,a)}}else{const x=i.target.length===1,w=!(n[0].y===n[1].y||n[0].x===n[1].x),S=h.map((C,I)=>{if(I===m)return;const E=g[I],B=!ys(E.x,s.x)&&!ys(E.y,s.y);if(!x&&!w&&B||x&&(ys(E.x,s.x)||ys(E.y,s.y)))return;const T=We(x?C:a),D=Dn(We(T),E);ho(D),Dr(D,.5),x?Fn(T,D):Dn(T,D);const U=As(T,E);return f(U)||void 0}).filter(Boolean);if(S.length){const[C,I,E,B]=l0(i.target);let[T,D,U,P]=ll(e);S.forEach(({x:y,y:V})=>{const nt=ai(y,6),k=ai(V,6);E&&!ys(k,s.y)&&(T=Math.max(T,V)),C&&!ys(nt,s.x)&&(D=Math.min(D,y)),B&&!ys(k,s.y)&&(U=Math.min(U,V)),I&&!ys(nt,s.x)&&(P=Math.max(P,y))}),u=hx([T,D,U,P]),Fr(u,.9999,a)}}return wm(u,l,c,a),u};function pS(t){let e,i;return e=new mo({props:{items:t[11]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};2048&r[0]&&(o.items=n[11]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function hS(t){let e,i,n;return i=new eb({props:{$$slots:{default:[pS]},$$scope:{ctx:t}}}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"slot","header")},m(r,o){it(r,e,o),Pt(i,e,null),n=!0},p(r,o){const a={};2048&o[0]|4&o[7]&&(a.$$scope={dirty:o,ctx:r}),i.$set(a)},i(r){n||(M(i.$$.fragment,r),n=!0)},o(r){F(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Rt(i)}}}function hf(t){let e,i;return e=new ls({props:{onclick:t[88],label:t[4].cropLabelButtonRecenter,icon:t[4].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!t[9],hideLabel:!0,style:`opacity: ${t[29]}; transform: translate3d(${t[30].x}px, ${t[30].y}px, 0)`}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.label=n[4].cropLabelButtonRecenter),16&r[0]&&(o.icon=n[4].cropIconButtonRecenter),512&r[0]&&(o.disabled=!n[9]),1610612736&r[0]&&(o.style=`opacity: ${n[29]}; transform: translate3d(${n[30].x}px, ${n[30].y}px, 0)`),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function mf(t){let e,i;return e=new Jw({props:{rect:t[8],visible:t[12],style:t[1]}}),e.$on("resizestart",t[68]),e.$on("resizemove",t[69]),e.$on("resizeend",t[70]),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};256&r[0]&&(o.rect=n[8]),4096&r[0]&&(o.visible=n[12]),2&r[0]&&(o.style=n[1]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function $f(t){let e,i;return e=new aS({props:{width:Math.round(t[13].width),height:Math.round(t[13].height)}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};8192&r[0]&&(o.width=Math.round(n[13].width)),8192&r[0]&&(o.height=Math.round(n[13].height)),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function mS(t){let e,i,n,r,o,a,s,l,c=t[21]&&t[10]&&hf(t),d=t[21]&&mf(t),u=t[22]&&$f(t);return{c(){e=ut("div"),i=ut("div"),c&&c.c(),n=$e(),d&&d.c(),o=$e(),u&&u.c(),v(i,"class","PinturaStage"),v(e,"slot","main")},m(p,h){it(p,e,h),St(e,i),c&&c.m(i,null),St(i,n),d&&d.m(i,null),t[162](i),St(e,o),u&&u.m(e,null),a=!0,s||(l=[Zi(Mr.call(null,i)),Mt(i,"measure",t[160]),Mt(i,"wheel",function(){Gi(t[2]&&t[87])&&(t[2]&&t[87]).apply(this,arguments)},{passive:!1}),Mt(i,"interactionstart",t[74]),Mt(i,"interactionupdate",t[75]),Mt(i,"interactionrelease",t[77]),Mt(i,"interactionend",t[76]),Zi(r=Fs.call(null,i,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:ff,getEventPosition:t[163]})),Mt(i,"gesturedown",t[84]),Mt(i,"gestureupdate",t[85]),Mt(i,"gestureup",t[86]),Zi(Qw.call(null,i))],s=!0)},p(p,h){(t=p)[21]&&t[10]?c?(c.p(t,h),2098176&h[0]&&M(c,1)):(c=hf(t),c.c(),M(c,1),c.m(i,n)):c&&(Ie(),F(c,1,1,()=>{c=null}),Ee()),t[21]?d?(d.p(t,h),2097152&h[0]&&M(d,1)):(d=mf(t),d.c(),M(d,1),d.m(i,null)):d&&(Ie(),F(d,1,1,()=>{d=null}),Ee()),r&&Gi(r.update)&&16777220&h[0]&&r.update.call(null,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:ff,getEventPosition:t[163]}),t[22]?u?(u.p(t,h),4194304&h[0]&&M(u,1)):(u=$f(t),u.c(),M(u,1),u.m(e,null)):u&&(Ie(),F(u,1,1,()=>{u=null}),Ee())},i(p){a||(M(c),M(d),M(u),a=!0)},o(p){F(c),F(d),F(u),a=!1},d(p){p&&Q(e),c&&c.d(),d&&d.d(),t[162](null),u&&u.d(),s=!1,ji(l)}}}function gf(t){let e,i,n,r;const o=[{class:"PinturaControlList"},{tabs:t[7]},t[18]];let a={$$slots:{default:[$S,({tab:c})=>({218:c}),({tab:c})=>[0,0,0,0,0,0,0,c?2:0]]},$$scope:{ctx:t}};for(let c=0;c<o.length;c+=1)a=Cn(a,o[c]);e=new _u({props:a}),e.$on("select",t[161]);const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[17]},t[18]];let l={$$slots:{default:[yS,({panel:c})=>({217:c}),({panel:c})=>[0,0,0,0,0,0,0,c?1:0]]},$$scope:{ctx:t}};for(let c=0;c<s.length;c+=1)l=Cn(l,s[c]);return n=new Vu({props:l}),{c(){It(e.$$.fragment),i=$e(),It(n.$$.fragment)},m(c,d){Pt(e,c,d),it(c,i,d),Pt(n,c,d),r=!0},p(c,d){const u=262272&d[0]?Tr(o,[o[0],128&d[0]&&{tabs:c[7]},262144&d[0]&&Br(c[18])]):{};6&d[7]&&(u.$$scope={dirty:d,ctx:c}),e.$set(u);const p=393216&d[0]?Tr(s,[s[0],s[1],131072&d[0]&&{panels:c[17]},262144&d[0]&&Br(c[18])]):{};511721496&d[0]|5&d[7]&&(p.$$scope={dirty:d,ctx:c}),n.$set(p)},i(c){r||(M(e.$$.fragment,c),M(n.$$.fragment,c),r=!0)},o(c){F(e.$$.fragment,c),F(n.$$.fragment,c),r=!1},d(c){Rt(e,c),c&&Q(i),Rt(n,c)}}}function $S(t){let e,i,n=t[218].label+"";return{c(){e=ut("span"),i=$n(n)},m(r,o){it(r,e,o),St(e,i)},p(r,o){2&o[7]&&n!==(n=r[218].label+"")&&Ln(i,n)},d(r){r&&Q(e)}}}function gS(t){let e,i;return e=new a0({props:{elasticity:t[25]*t[44],base:wS,min:t[23],max:vS,valueMin:t[27][0],valueMax:t[27][1],value:t[28],labelReset:t[4].labelReset,valueLabel:Math.round(100*t[28])+"%",oninputstart:t[81],oninputmove:t[82],oninputend:t[83]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};33554432&r[0]&&(o.elasticity=n[25]*n[44]),8388608&r[0]&&(o.min=n[23]),134217728&r[0]&&(o.valueMin=n[27][0]),134217728&r[0]&&(o.valueMax=n[27][1]),268435456&r[0]&&(o.value=n[28]),16&r[0]&&(o.labelReset=n[4].labelReset),268435456&r[0]&&(o.valueLabel=Math.round(100*n[28])+"%"),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function fS(t){let e,i;return e=new nS({props:{elasticity:t[25]*t[44],rotation:t[14],labelReset:t[4].labelReset,valueMin:t[26][0],valueMax:t[26][1],rotationMin:-t[3],rotationMax:t[3],oninputstart:t[71],oninputmove:t[72],oninputend:t[73]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};33554432&r[0]&&(o.elasticity=n[25]*n[44]),16384&r[0]&&(o.rotation=n[14]),16&r[0]&&(o.labelReset=n[4].labelReset),67108864&r[0]&&(o.valueMin=n[26][0]),67108864&r[0]&&(o.valueMax=n[26][1]),8&r[0]&&(o.rotationMin=-n[3]),8&r[0]&&(o.rotationMax=n[3]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function yS(t){let e,i,n,r;const o=[fS,gS],a=[];function s(l,c){return l[217]===l[93]+"-rotation"?0:l[217]===l[93]+"-zoom"?1:-1}return~(e=s(t))&&(i=a[e]=o[e](t)),{c(){i&&i.c(),n=Tn()},m(l,c){~e&&a[e].m(l,c),it(l,n,c),r=!0},p(l,c){let d=e;e=s(l),e===d?~e&&a[e].p(l,c):(i&&(Ie(),F(a[d],1,1,()=>{a[d]=null}),Ee()),~e?(i=a[e],i?i.p(l,c):(i=a[e]=o[e](l),i.c()),M(i,1),i.m(n.parentNode,n)):i=null)},i(l){r||(M(i),r=!0)},o(l){F(i),r=!1},d(l){~e&&a[e].d(l),l&&Q(n)}}}function bS(t){let e,i,n=t[19]&&gf(t);return{c(){e=ut("div"),n&&n.c(),v(e,"slot","footer"),v(e,"style",t[16])},m(r,o){it(r,e,o),n&&n.m(e,null),i=!0},p(r,o){r[19]?n?(n.p(r,o),524288&o[0]&&M(n,1)):(n=gf(r),n.c(),M(n,1),n.m(e,null)):n&&(Ie(),F(n,1,1,()=>{n=null}),Ee()),(!i||65536&o[0])&&v(e,"style",r[16])},i(r){i||(M(n),i=!0)},o(r){F(n),i=!1},d(r){r&&Q(e),n&&n.d()}}}function xS(t){let e,i,n;function r(a){t[164](a)}let o={hasHeader:t[20],$$slots:{footer:[bS],main:[mS],header:[hS]},$$scope:{ctx:t}};return t[15]!==void 0&&(o.root=t[15]),e=new ul({props:o}),Wi.push(()=>ko(e,"root",r)),e.$on("measure",t[165]),{c(){It(e.$$.fragment)},m(a,s){Pt(e,a,s),n=!0},p(a,s){const l={};1048576&s[0]&&(l.hasHeader=a[20]),2146402302&s[0]|4&s[7]&&(l.$$scope={dirty:s,ctx:a}),!i&&32768&s[0]&&(i=!0,l.root=a[15],Ao(()=>i=!1)),e.$set(l)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){Rt(e,a)}}}const vS=1,wS=0,ff=(t,e)=>t.target===e;function SS(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,w,S,C,I,E,B,T,D,U,P,y,V,nt,k,N,tt,ct,ot,mt,Z,gt,xt,dt,wt,J,q,ft,Lt,_,rt,zt,Zt,Ot,Yt,Ut,ht,G,kt,ne,ue,Nt,xe,Ht,ze,W,Re,Se,Xt,Be,Fe,Xe,yi,bt,be,Ue,Le,Ve,Ge=Je,Qe=()=>(Ge(),Ge=Gr(vi,z=>i(12,k=z)),vi);t.$$.on_destroy.push(()=>Ge());let{isActive:vi}=e;Qe();let{stores:Si}=e,{cropImageSelectionCornerStyle:Jt="circle"}=e,{cropWillRenderImageSelectionGuides:Ci=(z,ae)=>{const Oe=z=="rotate";return{rows:Oe?5:3,cols:Oe?5:3,opacity:.25*ae}}}=e,{cropAutoCenterImageSelectionTimeout:X}=e,{cropEnableZoomMatchImageAspectRatio:Vt=!0}=e,{cropEnableRotateMatchImageAspectRatio:H="never"}=e,{cropEnableRotationInput:ie=!0}=e,{cropEnableZoom:pe=!0}=e,{cropEnableZoomInput:we=!0}=e,{cropEnableZoomAutoHide:ye=!0}=e,{cropEnableImageSelection:ee=!0}=e,{cropEnableInfoIndicator:qt=!1}=e,{cropEnableZoomTowardsWheelPosition:ei=!0}=e,{cropEnableLimitWheelInputToCropSelection:Ze=!0}=e,{cropEnableCenterImageSelection:lt=!0}=e,{cropEnableButtonRotateLeft:Dt=!0}=e,{cropEnableButtonRotateRight:re=!1}=e,{cropEnableButtonFlipHorizontal:Te=!0}=e,{cropEnableButtonFlipVertical:Qt=!1}=e,{cropSelectPresetOptions:et}=e,{cropEnableSelectPreset:jt=!0}=e,{cropEnableFilterMatchAspectRatio:Gt=!0}=e,{cropSelectPresetFilter:ce=!1}=e,{cropEnableButtonToggleCropLimit:Ne=!1}=e,{cropWillRenderTools:He=qi}=e,{cropActiveTransformTool:Me="rotation"}=e,{cropMinimizeToolbar:gn="auto"}=e,{cropInteractionFocus:rn="image"}=e,{cropRotationRange:ve=ia}=e,{cropMaskOpacity:ii=.85}=e,{locale:Pe={}}=e;const ci=un("isAnimated");L(t,ci,z=>i(139,N=z));const je=un("elasticityMultiplier");L(t,je,z=>i(25,yi=z));const te=un("redrawTrigger");L(t,te,z=>i(159,Xe=z));const De=un("imageIsStatic");L(t,De,z=>i(145,xt=z));const ki=un("imageStaticVisualCorners");L(t,ki,z=>i(181,Ht=z));const bn=un("fixScrollDirection");L(t,bn,z=>i(175,ht=z));let Mn="idle";const Hn=ge();L(t,Hn,z=>i(156,Xt=z));const Gn=()=>Nt===void 0,Ui=z=>1/z,Zn=z=>{Gt&&ce!==z&&(i(95,ce=z),Nt&&Nt!==1&&yr()&&vt(mn,Nt=Ui(Nt),Nt))},yr=()=>{if(Nt===1||!n)return!1;const z=Ui(Nt);return!!Ts(Xt).find(([ae])=>ae===z)},$r=(z,ae,Oe)=>La(Oe)?ae.width===Math.round(z.height)||ae.height===Math.round(z.width):ae.width===Math.round(z.width)||ae.height===Math.round(z.height),Pr=()=>(Gn()||H==="always"&&yr())&&((z,ae,Oe)=>{const wi=rs(ly(po(ae),Oe),Ke=>Math.abs(Math.round(Ke))),Ei=_l(wi),zi=Ri(z);return vs(Ei,zi)})(dt,Zt,Ot)&&$r(dt,Zt,Ot),Go=z=>{if(H!=="never"&&Pr()){vt(_r,Ot+=z,Ot);const ae=La(Ot),Oe=ae?Zt.height:Zt.width,wi=ae?Zt.width:Zt.height;vt(Yn,dt=En(0,0,Oe,wi),dt),Gn()||vt(mn,Nt=ea(Oe,wi),Nt)}else vt(_r,Ot+=z,Ot)},{history:ln,env:$o,isInteracting:en,isInteractingFraction:pn,isTransformingImage:gi,rootRect:ar,stageRect:eo,utilRect:zo,utilRectPadded:go,rootLineColor:Fo,allowPan:Or,allowZoom:Xn,allowPlayPause:cn,rangeInputElasticity:Yr,presentationScalar:io,utilTools:Wr,imagePreviewModifiers:qr,imageOutlineOpacity:br,imageFlipX:no,imageFlipY:Rr,imageRotation:_r,imageRotationRange:ro,imageOutputSize:Vr,imageSelectionRect:Co,imageSelectionRectSnapshot:fo,imageSelectionRectIntent:Ir,imageSelectionRectPresentation:Er,imageCropRectIntent:Ar,imageCropRectOrigin:Nr,imageCropRect:Yn,imageCropMinSize:Li,imageCropMaxSize:jn,imageCropRange:Bn,imageCropAspectRatio:mn,imageCropLimitToImage:Pn,imageSize:Jn,imageScalar:Zo,imageOverlayMarkup:ha,stagePadded:yo,stageRecenter:On}=Si;let Wn;L(t,$o,z=>i(140,tt=z)),L(t,en,z=>i(144,gt=z)),L(t,gi,z=>i(173,rt=z)),L(t,ar,z=>i(24,G=z)),L(t,eo,z=>i(151,_=z)),L(t,go,z=>i(148,q=z)),L(t,io,z=>i(147,J=z)),L(t,Wr,z=>i(183,W=z)),L(t,qr,z=>i(172,mt=z)),L(t,no,z=>i(158,Fe=z)),L(t,Rr,z=>i(157,Be=z)),L(t,_r,z=>i(14,Ot=z)),L(t,ro,z=>i(26,bt=z)),L(t,Vr,z=>i(184,Re=z)),L(t,Co,z=>i(150,Lt=z)),L(t,fo,z=>i(149,ft=z)),L(t,Ir,z=>i(182,ze=z)),L(t,Er,z=>i(143,Z=z)),L(t,Ar,z=>i(176,kt=z)),L(t,Nr,z=>i(178,ue=z)),L(t,Yn,z=>i(13,dt=z)),L(t,Li,z=>i(154,Ut=z)),L(t,jn,z=>i(180,xe=z)),L(t,Bn,z=>i(177,ne=z)),L(t,mn,z=>i(179,Nt=z)),L(t,Pn,z=>i(153,Yt=z)),L(t,Jn,z=>i(152,Zt=z)),L(t,Zo,z=>i(146,wt=z)),L(t,yo,z=>i(142,ot=z));const Do=(z,ae)=>{const Oe={target:z,translate:ae},wi=Zd(po(Ut),J),Ei=Zd(po(xe),J);let zi=lf(ft,Oe,{...q,x:0,y:0},{aspectRatio:Nt,minSize:wi,maxSize:Ei});if(zi=((fi,Fi,bi)=>{const[Hi,Rn,fn,vn]=ll(fi),Ai={...fi};if(Hi<Fi.y&&(fi.height=fi.height-(Fi.y-Hi),fi.y=Fi.y),Rn>Fi.x+Fi.width&&(fi.width=Fi.x+Fi.width-fi.x),fn>Fi.y+Fi.height&&(fi.height=Fi.y+Fi.height-fi.y),vn<Fi.x&&(fi.width=fi.width-(Fi.x-vn),fi.x=Fi.x),bi){const vr=Math.min(1,Ai.width/fi.width,Ai.height/fi.height);return Cs(Ai,vr)}return fi})(zi,{...q,x:0,y:0},Nt),!Yt)return{boundsLimited:zi,boundsIntent:zi};let Ke=uS(ft,zi,Oe,Ht,{aspectRatio:Nt,minSize:wi,maxSize:Ei});return{boundsLimited:Ke,boundsIntent:Ke}},oo=(z,ae)=>{const Oe={target:z,translate:ae},wi=Zd(po(Ut),J),Ei=Zd(po(xe),J),zi=((Ke,fi,Fi={})=>{const{target:bi,translate:Hi}=fi,{aspectRatio:Rn,minSize:fn}=Fi,vn=Oc[s0[bi]],Ai=Fn(Pi(Ke),at(vn[0]*Ke.width,vn[1]*Ke.height)),vr=Oc[bi],Xo=Fn(Pi(Ke),at(vr[0]*Ke.width,vr[1]*Ke.height)),[Bs,Wa,_a,Pa,Va,ds,Na]=l0(bi);let $a=Hi.x,Ha=Hi.y;Va?Ha=0:ds&&($a=0);let[xn,so,lo,Lr]=ll(Ke);if(Bs?Lr=Ai.x:Wa&&(so=Ai.x),Pa?xn=Ai.y:_a&&(lo=Ai.y),Bs?so=Xo.x+$a:Wa&&(Lr=Xo.x+$a),Pa?lo=Xo.y+Ha:_a&&(xn=Xo.y+Ha),fn&&Va&&lo-xn<fn.height){const Ki=fn.height-(lo-xn);xn-=.5*Ki,lo+=.5*Ki}if(fn&&ds&&so-Lr<fn.width){const Ki=fn.width-(so-Lr);Lr-=.5*Ki,so+=.5*Ki}if(Rn)if(Na){let Ki=so-Lr,To=lo-xn;Va?(To=Ki/Rn,xn=Ai.y-.5*To,lo=Ai.y+.5*To):ds&&(Ki=To*Rn,Lr=Ai.x-.5*Ki,so=Ai.x+.5*Ki)}else{const Ki=at(Xo.x+$a-Ai.x,Xo.y+Ha-Ai.y);bi===ca?(Ki.x=Math.max(0,Ki.x),Ki.y=Math.min(0,Ki.y)):bi===da?(Ki.x=Math.max(0,Ki.x),Ki.y=Math.max(0,Ki.y)):bi===ua?(Ki.x=Math.min(0,Ki.x),Ki.y=Math.max(0,Ki.y)):bi===la&&(Ki.x=Math.min(0,Ki.x),Ki.y=Math.min(0,Ki.y));const To=Ss(Ki),Ra=at(Rn,1),Jr=Dr(ho(Ra),To);bi===ca?(so=Ai.x+Jr.x,xn=Ai.y-Jr.y):bi===da?(so=Ai.x+Jr.x,lo=Ai.y+Jr.y):bi===ua?(Lr=Ai.x-Jr.x,lo=Ai.y+Jr.y):bi===la&&(Lr=Ai.x-Jr.x,xn=Ai.y-Jr.y)}return En(Lr,xn,so-Lr,lo-xn)})(ft,Oe,{aspectRatio:Nt,minSize:wi});return{boundsLimited:lf(ft,Oe,{...q,x:0,y:0},{aspectRatio:Nt,minSize:wi,maxSize:Ei}),boundsIntent:zi}};let _n,gr;const Vn=({translation:z,scalar:ae})=>{xt&&(ae=1,z=Fl(We(z)));const Oe=Math.min(Lt.width/dt.width,Lt.height/dt.height),wi=Dr(We(z),1/Oe);let Ei;if(gr){const zi=Dn(We(gr),z);gr=z,Ei=na(Pi(dt),zi)}else Ei=na(Pi(_n),Fl(We(wi))),ae!==void 0&&Fr(Ei,1/ae);vt(Ar,kt=Ei,kt),vt(Yn,dt=Ei,dt)},Qn=Bi([Bn,Yn],([z,ae],Oe)=>{if(!ae)return;const[wi,Ei]=z,zi=cr(ae);Oe([sl(Ho(as(wi,zi),ai)),sl(Ho(to(Ei,zi),ai))])});L(t,Qn,z=>i(174,zt=z));const Kr=Bi([Jn,Pn,Li,jn,Bn,_r],([z,ae,Oe,wi,Ei,zi],Ke)=>{if(!z)return;const fi=Ei[0],Fi=Ei[1];let bi,Hi;ae?(bi=((Rn,fn,vn)=>La(vn)?1-1/Math.min(Rn.height/fn.width,Rn.width/fn.height):1-1/Math.min(Rn.width/fn.width,Rn.height/fn.height))(z,Fi,zi),Hi=Math.min(fi.width/Oe.width,fi.height/Oe.height)):(bi=-1,Hi=1),Ke([bi,Hi].map(Rn=>ai(Rn)))});L(t,Kr,z=>i(27,be=z));const bo=Bi([Jn,Yn,Bn,_r],([z,ae,Oe,wi],Ei)=>{if(!z||!ae)return Ei(0);let zi;const Ke=Oe[0],fi=Oe[1],Fi=ae.width,bi=ae.height,Hi=cr(ae),Rn=La(wi)?Un(z.height,z.width):z,fn=to(Rn,Hi);if(Fi<=fn.width||bi<=fn.height){const vn=fn.width-Ke.width,Ai=fn.height-Ke.height;zi=vn===0||Ai===0?1:1-Math.min((Fi-Ke.width)/vn,(bi-Ke.height)/Ai)}else{const vn=fi.width-fn.width,Ai=fi.height-fn.height,vr=to({width:vn,height:Ai},Hi);zi=-Math.min((Fi-fn.width)/vr.width,(bi-fn.height)/vr.height)}Ei(zi)});L(t,bo,z=>i(28,Ue=z));const ao=z=>{const ae=cr(_n);let Oe,wi,Ei;const zi=La(Ot)?Un(Zt.height,Zt.width):Zt,Ke=to(zi,ae);if(z>=0){const bi=Ke.width-ne[0].width,Hi=Ke.height-ne[0].height;Oe=Ke.width-bi*z,wi=Ke.height-Hi*z,Ei=as({width:Oe,height:wi},ae)}else{const bi=ne[1].width-Ke.width,Hi=ne[1].height-Ke.height;Oe=Ke.width+bi*-z,wi=Ke.height+Hi*-z,Ei=to({width:Oe,height:wi},ae)}Oe=Ei.width,wi=Ei.height;const fi=_n.x+.5*_n.width-.5*Oe,Fi=_n.y+.5*_n.height-.5*wi;vt(Yn,dt={x:fi,y:Fi,width:Oe,height:wi},dt)};let O;const se=z=>{const ae=Fr(Pi(O),1/z);vt(Ar,kt=ae,kt),vt(Yn,dt=ae,dt)};let pi;const ti=()=>{On.set({})};let he;const de=di(0,{precision:1e-4});L(t,de,z=>i(29,Le=z));const Ti=di();L(t,Ti,z=>i(30,Ve=z));const oe=Bi([mn,Vr,Hn],([z,ae,Oe],wi)=>{if(!n)return;const Ei=Ts(Oe),zi=[...Ei].map(Ke=>Ke[0]).sort((Ke,fi)=>An(Ke[0])&&!An(fi[0])?1:-1).find(Ke=>{if(An(Ke)&&ae){const[fi,Fi]=Ke,bi=ae.width===fi&&ae.height===Fi,Hi=z===ea(fi,Fi);return bi&&Hi}return Ke===z});if(!zi)return wi(void 0);wi(Ei.map(Ke=>Ke[0]).findIndex(Ke=>An(Ke)?ss(Ke,zi):Ke===zi))});L(t,oe,z=>i(155,Se=z));const on=(z,ae)=>{if(!n||z===-1||z===void 0)return;const Oe=Ts(ae)[z][0];return Oe?An(Oe)?ea(Oe[0],Oe[1]):Oe:void 0},_i=Bi([Fo,Er,pn],([z,ae,Oe],wi)=>{const{rows:Ei,cols:zi,opacity:Ke}=Ci(Mn,Oe);if(!ae||Ke<=0)return wi([]);const{x:fi,y:Fi,width:bi,height:Hi}=ae,Rn=bi/zi,fn=Hi/Ei,vn=[];for(let Ai=1;Ai<=Ei-1;Ai++){const vr=Fi+fn*Ai;vn.push({id:"image-selection-guide-row-"+Ai,points:[at(fi,vr),at(fi+bi,vr)],opacity:Ke,strokeWidth:1,strokeColor:z})}for(let Ai=1;Ai<=zi-1;Ai++){const vr=fi+Rn*Ai;vn.push({id:"image-selection-guide-col-"+Ai,points:[at(vr,Fi),at(vr,Fi+Hi)],opacity:Ke,strokeWidth:1,strokeColor:z})}wi(vn)});L(t,_i,z=>i(141,ct=z));const Ii="crop-"+aa();let xr,tr=Ii+"-"+(ie?Me:"zoom"),xo=tr,ma;const Ma=di(N?20:0);return L(t,Ma,z=>i(138,nt=z)),t.$$set=z=>{"isActive"in z&&Qe(i(0,vi=z.isActive)),"stores"in z&&i(97,Si=z.stores),"cropImageSelectionCornerStyle"in z&&i(1,Jt=z.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in z&&i(98,Ci=z.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in z&&i(99,X=z.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in z&&i(100,Vt=z.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in z&&i(101,H=z.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in z&&i(102,ie=z.cropEnableRotationInput),"cropEnableZoom"in z&&i(2,pe=z.cropEnableZoom),"cropEnableZoomInput"in z&&i(103,we=z.cropEnableZoomInput),"cropEnableZoomAutoHide"in z&&i(104,ye=z.cropEnableZoomAutoHide),"cropEnableImageSelection"in z&&i(105,ee=z.cropEnableImageSelection),"cropEnableInfoIndicator"in z&&i(106,qt=z.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in z&&i(107,ei=z.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in z&&i(108,Ze=z.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in z&&i(109,lt=z.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in z&&i(110,Dt=z.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in z&&i(111,re=z.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in z&&i(112,Te=z.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in z&&i(113,Qt=z.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in z&&i(114,et=z.cropSelectPresetOptions),"cropEnableSelectPreset"in z&&i(115,jt=z.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in z&&i(116,Gt=z.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in z&&i(95,ce=z.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in z&&i(117,Ne=z.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in z&&i(118,He=z.cropWillRenderTools),"cropActiveTransformTool"in z&&i(119,Me=z.cropActiveTransformTool),"cropMinimizeToolbar"in z&&i(120,gn=z.cropMinimizeToolbar),"cropInteractionFocus"in z&&i(121,rn=z.cropInteractionFocus),"cropRotationRange"in z&&i(3,ve=z.cropRotationRange),"cropMaskOpacity"in z&&i(122,ii=z.cropMaskOpacity),"locale"in z&&i(4,Pe=z.locale)},t.$$.update=()=>{4096&t.$$.dirty[0]|268435456&t.$$.dirty[3]&&De.set(rn==="selection"&&k),2097152&t.$$.dirty[3]&&i(129,n=et&&Array.isArray(et)&&et.length),2097152&t.$$.dirty[3]|32&t.$$.dirty[4]&&Hn.set(n?et:[]),4096&t.$$.dirty[0]|32768&t.$$.dirty[4]&&k&&br.set(1,{hard:!N}),4096&t.$$.dirty[0]&&Or.set(!k),4096&t.$$.dirty[0]&&Xn.set(!k),4096&t.$$.dirty[0]&&k&&cn.set(!0),65536&t.$$.dirty[4]&&i(124,h=tt.layoutMode==="overlay"),4194304&t.$$.dirty[3]|1&t.$$.dirty[4]&&i(128,I=jt&&!h),83886080&t.$$.dirty[4]&&i(137,l=q&&Lt&&uu(q,Lt)),67117056&t.$$.dirty[4]&&i(135,c=!(!Lt||!l)),67119104&t.$$.dirty[4]&&i(133,d=c&&ra(Lt,l,z=>ai(z,5))),16400&t.$$.dirty[0]|52297732&t.$$.dirty[3]|1879114288&t.$$.dirty[4]|31&t.$$.dirty[5]&&i(11,r=Xe&&He([Dt&&["Button","rotate-left",{label:Pe.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:Pe.cropIconButtonRotateLeft,onclick:()=>{Go(-Math.PI/2),ln.write()}}],re&&["Button","rotate-right",{label:Pe.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:Pe.cropIconButtonRotateRight,onclick:()=>{Go(Math.PI/2),ln.write()}}],Te&&["Button","flip-horizontal",{label:Pe.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:Pe.cropIconButtonFlipHorizontal,onclick:()=>{La(Ot)?vt(Rr,Be=!Be,Be):vt(no,Fe=!Fe,Fe),ln.write()}}],Qt&&["Button","flip-vertical",{label:Pe.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:Pe.cropIconButtonFlipVertical,onclick:()=>{La(Ot)?vt(no,Fe=!Fe,Fe):vt(Rr,Be=!Be,Be),ln.write()}}],I&&n&&[ce===!1?"Dropdown":dS,"select-preset",{icon:dr(Pe.cropIconSelectPreset,Pe,on(Se,Xt)),label:dr(Pe.cropLabelSelectPreset,Pe,on(Se,Xt)),labelClass:"PinturaToolbarContentWide",options:Xt,filter:ce,onfilterchange:Zn,selectedIndex:Se,onchange:({value:z})=>{An(z)?(vt(mn,Nt=ea(z[0],z[1]),Nt),vt(Vr,Re=sy(z),Re)):vt(mn,Nt=z,Nt),d&&ti(),ln.write()},optionMapper:z=>{let ae=!1;const Oe=An(z.value)?z.value[0]/z.value[1]:z.value;if(Oe){const wi=zl(Zt,Ot,Oe);ae=wi.width<Ut.width||wi.height<Ut.height}return z.icon=((wi,Ei={})=>{const{width:zi=24,height:Ke=24,bounds:fi=16,radius:Fi=3}=Ei;let bi,Hi,Rn,fn,vn=An(wi)?ea(wi[0],wi[1]):wi,Ai=!!vn;return vn=Ai?vn:1,Rn=vn>1?fi:vn*fi,fn=Rn/vn,bi=Math.round(.5*(zi-Rn)),Hi=Math.round(.5*(Ke-fn)),`<rect fill="${Ai?"currentColor":"none"}" stroke="${Ai?"none":"currentColor"}" stroke-width="${zi/16}" stroke-dasharray="${[zi/12,zi/6].join(" ")}" x="${bi}" y="${Hi}" width="${Rn}" height="${fn}" rx="${Fi}"/>`})(z.value,{bounds:14}),{...z,disabled:ae}}}],Ne&&["Dropdown","select-crop-limit",{icon:dr(Pe.cropIconCropBoundary,Pe,Yt),label:Pe.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:z})=>{vt(Pn,Yt=z,Yt),ln.write()},options:[[!0,Pe.cropLabelCropBoundaryEdge,{icon:dr(Pe.cropIconCropBoundary,Pe,!0)}],[!1,Pe.cropLabelCropBoundaryNone,{icon:dr(Pe.cropIconCropBoundary,Pe,!1)}]]}]].filter(Boolean),tt,()=>te.set({})).filter(Boolean)),6144&t.$$.dirty[0]|134217728&t.$$.dirty[3]|65537&t.$$.dirty[4]&&vt(Wr,W=k&&gn!=="never"&&(gn==="always"||tt.verticalSpace==="short"||h)?r.map(([z,ae,Oe])=>Array.isArray(Oe)?[z,ae,Oe]:[z,ae,{...Oe,hideLabel:!0}]):[],W),536870912&t.$$.dirty[4]&&i(23,o=Yt?0:-1),150994944&t.$$.dirty[4]&&i(130,a=q&&at(-(_.x-q.x),-(_.y-q.y))),524352&t.$$.dirty[4]&&i(131,s=Z&&a&&at(Hc(Z.x+.5*Z.width+a.x),Hc(Z.y+.5*Z.height+a.y))),33554432&t.$$.dirty[4]&&i(134,u=ft!=null),16785408&t.$$.dirty[4]&&i(136,p=q&&l&&(l.height===q.height||l.width===q.width)),12587008&t.$$.dirty[4]&&i(132,g=!p&&J<1&&wt<1),3840&t.$$.dirty[4]&&i(9,m=c&&!u&&(!d||g)),8192&t.$$.dirty[0]|8192&t.$$.dirty[3]|1&t.$$.dirty[4]&&i(22,f=qt&&!!dt&&!h),524352&t.$$.dirty[4]&&i(8,S=Z&&a&&{x:Z.x+a.x,y:Z.y+a.y,width:Z.width,height:Z.height}),256&t.$$.dirty[0]|4096&t.$$.dirty[3]|1&t.$$.dirty[4]&&i(21,x=ee&&!!S&&!h),65600&t.$$.dirty[3]|2097280&t.$$.dirty[4]&&i(10,w=lt&&!!s&&!X&&!xt),512&t.$$.dirty[0]|1073741888&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&m&&X&&!gt&&(clearTimeout(he),i(123,he=setTimeout(ti,X))),1073741824&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&gt&&clearTimeout(he),1536&t.$$.dirty[0]|32768&t.$$.dirty[4]&&de.set(w&&m?1:0,{hard:N===!1}),32896&t.$$.dirty[4]&&Ti.set(s,{hard:N===!1}),4096&t.$$.dirty[0]|262144&t.$$.dirty[4]&&(k&&!ot?(vt(qr,mt.crop={maskOpacity:ii,maskMarkupOpacity:ii},mt),qr.set(mt)):(delete mt.crop,qr.set(mt))),131072&t.$$.dirty[4]&&ct&&ha.update(z=>{const ae=z.filter(Oe=>!/^image\-selection\-guide/.test(Oe.id));return k?[...ae,...ct]:ae}),65536&t.$$.dirty[4]&&i(127,C=tt.verticalSpace!=="short"),134217728&t.$$.dirty[3]|9&t.$$.dirty[4]&&i(20,E=gn==="never"&&!h||C&&gn!=="always"),4&t.$$.dirty[0]|1024&t.$$.dirty[3]&&i(126,B=pe&&we),2048&t.$$.dirty[3]|12&t.$$.dirty[4]&&i(125,T=ye?C&&B:B),512&t.$$.dirty[3]|2&t.$$.dirty[4]&&i(19,D=ie||T),2&t.$$.dirty[4]&&(T||i(5,xo=tr)),32&t.$$.dirty[0]&&i(18,U={name:Ii,selected:xo}),16&t.$$.dirty[0]|512&t.$$.dirty[3]|2&t.$$.dirty[4]&&i(7,P=[ie&&{id:Ii+"-rotation",label:Pe.cropLabelTabRotation},T&&{id:Ii+"-zoom",label:Pe.cropLabelTabZoom}].filter(Boolean)),128&t.$$.dirty[0]&&i(17,y=P.map(z=>z.id)),64&t.$$.dirty[0]|1&t.$$.dirty[4]&&xr&&!xr.children.length&&h&&xr.dispatchEvent(new CustomEvent("measure",{detail:xr.rect})),4096&t.$$.dirty[0]|32768&t.$$.dirty[4]&&N&&Ma.set(k?0:20),16384&t.$$.dirty[4]&&i(16,V=nt?`transform: translateY(${nt}px)`:void 0)},[vi,Jt,pe,ve,Pe,xo,xr,P,S,m,w,r,k,dt,Ot,ma,V,y,U,D,E,x,f,o,G,yi,bt,be,Ue,Le,Ve,ci,je,te,De,ki,bn,Hn,$o,en,gi,ar,eo,go,Yr,io,Wr,qr,no,Rr,_r,ro,Vr,Co,fo,Ir,Er,Ar,Nr,Yn,Li,jn,Bn,mn,Pn,Jn,Zo,yo,()=>{Mn="select",vt(en,gt=!0,gt),vt(fo,ft=Pi(Lt),ft),Wn=xt?Do:oo},({detail:z})=>{const{boundsLimited:ae,boundsIntent:Oe}=Wn(z.direction,z.translation);vt(gi,rt=!0,rt),vt(Ir,ze=Oe,ze),vt(Co,Lt=ae,Lt)},({detail:z})=>{const{boundsLimited:ae}=Wn(z.direction,z.translation);vt(gi,rt=!1,rt),vt(en,gt=!1,gt),vt(Ir,ze=void 0,ze),Ss(z.translation)&&(vt(Co,Lt=ae,Lt),ln.write()),vt(fo,ft=void 0,ft),Mn=void 0},()=>{Mn="rotate",vt(en,gt=!0,gt),vt(Nr,ue=Pi(dt),ue)},z=>{vt(gi,rt=!0,rt),vt(_r,Ot=z,Ot)},z=>{vt(gi,rt=!1,rt),vt(en,gt=!1,gt),vt(_r,Ot=z,Ot),ln.write(),vt(Nr,ue=void 0,ue)},()=>{Mn="pan",gr=void 0,vt(en,gt=!0,gt),_n=Pi(dt)},({detail:z})=>{vt(gi,rt=!0,rt),Vn(z)},({detail:z})=>{vt(gi,rt=!1,rt),vt(en,gt=!1,gt),(Ss(z.translation)>0||z.scalar!==0)&&(Vn(z),ln.write()),vt(Ar,kt=void 0,kt),_n=void 0},({detail:{translation:z}})=>{xt&&(z=Fl(We(z))),gr=z,vt(en,gt=!1,gt)},Qn,Kr,bo,()=>{Mn="zoom",vt(en,gt=!0,gt),_n=Pi(dt)},z=>{vt(gi,rt=!1,rt),ao(z)},z=>{ao(z),ln.write(),vt(gi,rt=!1,rt),vt(en,gt=!1,gt),_n=void 0},()=>{Mn="zoom",_n||(O=Pi(dt),vt(en,gt=!0,gt))},({detail:z})=>{O&&(vt(gi,rt=!0,rt),se(z))},({detail:z})=>{O&&(vt(gi,rt=!1,rt),vt(en,gt=!1,gt),se(z),vt(Ar,kt=void 0,kt),O=void 0,ln.write())},z=>{const ae=ph(z,G,_);if(Ze&&!xu(Lt,ae))return;Mn="zoom",vt(en,gt=!0,gt),vt(gi,rt=!0,rt),z.preventDefault(),z.stopPropagation();const Oe=Nu(z,{fixScrollDirection:ht}),wi=1+Oe/100,Ei=Pi(dt),zi=Math.min(dt.width/Ut.width,dt.height/Ut.height)===1;if(Vt&&Yt){const Fi=$r(dt,Zt,Ot);if(Gn()&&Fi&&Oe>0&&d){vt(en,gt=!1,gt),vt(gi,rt=!1,rt);const bi=La(Ot)?Zr({height:Zt.width,width:Zt.height}):Zr(Zt);return ra(Ei,bi)||(clearTimeout(pi),ra(ln.state.crop,bi))?void 0:(vt(Yn,dt=bi,dt),void ln.write())}}let Ke=Ri(dt);if(ei&&rn!=="selection"&&Oe<0&&!zi){const Fi=Dn(We(ae),Lt),bi=Math.min(Lt.width/dt.width,Lt.height/dt.height),Hi=Fr(Pi(Lt),1.1);Ke=xu(Hi,ae)?Fn(Pi(dt),Dr(Fi,1/bi)):Ke}let fi=Fr(Pi(dt),wi,Ke);if(bu(zt[1],fi)||(fi=vm(Ri(fi),zt[1])),bu(fi,zt[0])||(fi=vm(Ri(fi),zt[0])),ra(Ei,fi,ai))return vt(en,gt=!1,gt),void vt(gi,rt=!1,rt);vt(Yn,dt=Ho(fi,Fi=>ai(Fi,5)),dt),vt(en,gt=!1,gt),vt(gi,rt=!1,rt),clearTimeout(pi),pi=setTimeout(()=>{ln.write()},500)},ti,de,Ti,oe,_i,Ii,Ma,ce,"crop",Si,Ci,X,Vt,H,ie,we,ye,ee,qt,ei,Ze,lt,Dt,re,Te,Qt,et,jt,Gt,Ne,He,Me,gn,rn,ii,he,h,T,B,C,I,n,a,s,g,d,u,c,p,l,nt,N,tt,ct,ot,Z,gt,xt,wt,J,q,ft,Lt,_,Zt,Yt,Ut,Se,Xt,Be,Fe,Xe,function(z){Xr.call(this,t,z)},({detail:z})=>i(5,xo=z),function(z){Wi[z?"unshift":"push"](()=>{xr=z,i(6,xr)})},z=>r0(z),function(z){ma=z,i(15,ma)},function(z){Xr.call(this,t,z)}]}var kS={util:["crop",class extends li{constructor(t){super(),si(this,t,SS,xS,oi,{name:96,isActive:0,stores:97,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:98,cropAutoCenterImageSelectionTimeout:99,cropEnableZoomMatchImageAspectRatio:100,cropEnableRotateMatchImageAspectRatio:101,cropEnableRotationInput:102,cropEnableZoom:2,cropEnableZoomInput:103,cropEnableZoomAutoHide:104,cropEnableImageSelection:105,cropEnableInfoIndicator:106,cropEnableZoomTowardsWheelPosition:107,cropEnableLimitWheelInputToCropSelection:108,cropEnableCenterImageSelection:109,cropEnableButtonRotateLeft:110,cropEnableButtonRotateRight:111,cropEnableButtonFlipHorizontal:112,cropEnableButtonFlipVertical:113,cropSelectPresetOptions:114,cropEnableSelectPreset:115,cropEnableFilterMatchAspectRatio:116,cropSelectPresetFilter:95,cropEnableButtonToggleCropLimit:117,cropWillRenderTools:118,cropActiveTransformTool:119,cropMinimizeToolbar:120,cropInteractionFocus:121,cropRotationRange:3,cropMaskOpacity:122,locale:4},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[96]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),R()}get stores(){return this.$$.ctx[97]}set stores(t){this.$$set({stores:t}),R()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$$set({cropImageSelectionCornerStyle:t}),R()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[98]}set cropWillRenderImageSelectionGuides(t){this.$$set({cropWillRenderImageSelectionGuides:t}),R()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[99]}set cropAutoCenterImageSelectionTimeout(t){this.$$set({cropAutoCenterImageSelectionTimeout:t}),R()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableZoomMatchImageAspectRatio(t){this.$$set({cropEnableZoomMatchImageAspectRatio:t}),R()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[101]}set cropEnableRotateMatchImageAspectRatio(t){this.$$set({cropEnableRotateMatchImageAspectRatio:t}),R()}get cropEnableRotationInput(){return this.$$.ctx[102]}set cropEnableRotationInput(t){this.$$set({cropEnableRotationInput:t}),R()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$$set({cropEnableZoom:t}),R()}get cropEnableZoomInput(){return this.$$.ctx[103]}set cropEnableZoomInput(t){this.$$set({cropEnableZoomInput:t}),R()}get cropEnableZoomAutoHide(){return this.$$.ctx[104]}set cropEnableZoomAutoHide(t){this.$$set({cropEnableZoomAutoHide:t}),R()}get cropEnableImageSelection(){return this.$$.ctx[105]}set cropEnableImageSelection(t){this.$$set({cropEnableImageSelection:t}),R()}get cropEnableInfoIndicator(){return this.$$.ctx[106]}set cropEnableInfoIndicator(t){this.$$set({cropEnableInfoIndicator:t}),R()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[107]}set cropEnableZoomTowardsWheelPosition(t){this.$$set({cropEnableZoomTowardsWheelPosition:t}),R()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[108]}set cropEnableLimitWheelInputToCropSelection(t){this.$$set({cropEnableLimitWheelInputToCropSelection:t}),R()}get cropEnableCenterImageSelection(){return this.$$.ctx[109]}set cropEnableCenterImageSelection(t){this.$$set({cropEnableCenterImageSelection:t}),R()}get cropEnableButtonRotateLeft(){return this.$$.ctx[110]}set cropEnableButtonRotateLeft(t){this.$$set({cropEnableButtonRotateLeft:t}),R()}get cropEnableButtonRotateRight(){return this.$$.ctx[111]}set cropEnableButtonRotateRight(t){this.$$set({cropEnableButtonRotateRight:t}),R()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[112]}set cropEnableButtonFlipHorizontal(t){this.$$set({cropEnableButtonFlipHorizontal:t}),R()}get cropEnableButtonFlipVertical(){return this.$$.ctx[113]}set cropEnableButtonFlipVertical(t){this.$$set({cropEnableButtonFlipVertical:t}),R()}get cropSelectPresetOptions(){return this.$$.ctx[114]}set cropSelectPresetOptions(t){this.$$set({cropSelectPresetOptions:t}),R()}get cropEnableSelectPreset(){return this.$$.ctx[115]}set cropEnableSelectPreset(t){this.$$set({cropEnableSelectPreset:t}),R()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[116]}set cropEnableFilterMatchAspectRatio(t){this.$$set({cropEnableFilterMatchAspectRatio:t}),R()}get cropSelectPresetFilter(){return this.$$.ctx[95]}set cropSelectPresetFilter(t){this.$$set({cropSelectPresetFilter:t}),R()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[117]}set cropEnableButtonToggleCropLimit(t){this.$$set({cropEnableButtonToggleCropLimit:t}),R()}get cropWillRenderTools(){return this.$$.ctx[118]}set cropWillRenderTools(t){this.$$set({cropWillRenderTools:t}),R()}get cropActiveTransformTool(){return this.$$.ctx[119]}set cropActiveTransformTool(t){this.$$set({cropActiveTransformTool:t}),R()}get cropMinimizeToolbar(){return this.$$.ctx[120]}set cropMinimizeToolbar(t){this.$$set({cropMinimizeToolbar:t}),R()}get cropInteractionFocus(){return this.$$.ctx[121]}set cropInteractionFocus(t){this.$$set({cropInteractionFocus:t}),R()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(t){this.$$set({cropRotationRange:t}),R()}get cropMaskOpacity(){return this.$$.ctx[122]}set cropMaskOpacity(t){this.$$set({cropMaskOpacity:t}),R()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),R()}}]};function CS(t){let e,i,n,r,o,a,s,l=t[77],c=(sn(t[77].label)?t[77].label(t[2]):t[77].label)+"";function d(...h){return t[51](t[77],...h)}const u=()=>t[52](i,l),p=()=>t[52](null,l);return{c(){e=ut("div"),i=ut("div"),n=$e(),r=ut("span"),o=$n(c),v(i,"class",ib),v(e,"slot","option"),v(e,"class","PinturaFilterOption")},m(h,g){it(h,e,g),St(e,i),u(),St(e,n),St(e,r),St(r,o),a||(s=[Mt(i,"measure",d),Zi(Mr.call(null,i))],a=!0)},p(h,g){l!==(t=h)[77]&&(p(),l=t[77],u()),4&g[0]|32768&g[2]&&c!==(c=(sn(t[77].label)?t[77].label(t[2]):t[77].label)+"")&&Ln(o,c)},d(h){h&&Q(e),p(),a=!1,ji(s)}}}function TS(t){let e,i;return e=new cs({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[12],onchange:t[32],$$slots:{option:[CS,({option:n})=>({77:n}),({option:n})=>[0,0,n?32768:0]]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};4&r[0]&&(o.locale=n[2]),8&r[0]&&(o.options=n[3]),4096&r[0]&&(o.selectedIndex=n[12]),1028&r[0]|98304&r[2]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function MS(t){let e,i,n,r,o,a,s,l;function c(h){t[54](h)}function d(h){t[55](h)}function u(h){t[56](h)}let p={elasticity:t[13]*t[19],onscroll:t[53],$$slots:{default:[TS]},$$scope:{ctx:t}};return t[4]!==void 0&&(p.maskFeatherStartOpacity=t[4]),t[5]!==void 0&&(p.maskFeatherEndOpacity=t[5]),t[6]!==void 0&&(p.maskFeatherSize=t[6]),i=new Ta({props:p}),Wi.push(()=>ko(i,"maskFeatherStartOpacity",c)),Wi.push(()=>ko(i,"maskFeatherEndOpacity",d)),Wi.push(()=>ko(i,"maskFeatherSize",u)),i.$on("measure",t[57]),{c(){e=ut("div"),It(i.$$.fragment),v(e,"slot","footer"),v(e,"style",t[11])},m(h,g){it(h,e,g),Pt(i,e,null),a=!0,s||(l=[Mt(e,"transitionend",t[30]),Mt(e,"measure",t[58]),Zi(Mr.call(null,e,{observePosition:!0}))],s=!0)},p(h,g){const m={};8192&g[0]&&(m.elasticity=h[13]*h[19]),128&g[0]&&(m.onscroll=h[53]),5132&g[0]|65536&g[2]&&(m.$$scope={dirty:g,ctx:h}),!n&&16&g[0]&&(n=!0,m.maskFeatherStartOpacity=h[4],Ao(()=>n=!1)),!r&&32&g[0]&&(r=!0,m.maskFeatherEndOpacity=h[5],Ao(()=>r=!1)),!o&&64&g[0]&&(o=!0,m.maskFeatherSize=h[6],Ao(()=>o=!1)),i.$set(m),(!a||2048&g[0])&&v(e,"style",h[11])},i(h){a||(M(i.$$.fragment,h),a=!0)},o(h){F(i.$$.fragment,h),a=!1},d(h){h&&Q(e),Rt(i),s=!1,ji(l)}}}function PS(t){let e,i;return e=new ul({props:{$$slots:{footer:[MS]},$$scope:{ctx:t}}}),e.$on("measure",t[59]),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16380&r[0]|65536&r[2]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}let ib="PinturaFilterPreview";function RS(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,w,S,C,I,E,B=Je,T=()=>(B(),B=Gr(y,bt=>i(43,d=bt)),y),D=Je,U=()=>(D(),D=Gr(P,bt=>i(49,S=bt)),P);t.$$.on_destroy.push(()=>B()),t.$$.on_destroy.push(()=>D());let{isActive:P}=e;U();let{isActiveFraction:y}=e;T();let{stores:V}=e,{locale:nt}=e,{filterFunctions:k}=e,{filterOptions:N}=e;const tt=un("elasticityMultiplier");L(t,tt,bt=>i(13,E=bt));const{history:ct,interfaceImages:ot,stageRectBase:mt,utilRect:Z,animation:gt,scrollElasticity:xt,imageSize:dt,imagePreview:wt,imageCropRect:J,imageRotation:q,imageFlipX:ft,imageFlipY:Lt,imageBackgroundColor:_,imageGamma:rt,imageColorMatrix:zt,allowPan:Zt,allowZoom:Ot,allowZoomControls:Yt,allowPlayPause:Ut}=V;L(t,ot,bt=>i(60,u=bt)),L(t,mt,bt=>i(48,w=bt)),L(t,Z,bt=>i(47,x=bt)),L(t,gt,bt=>i(50,C=bt)),L(t,dt,bt=>i(62,h=bt)),L(t,wt,bt=>i(42,c=bt)),L(t,_,bt=>i(61,p=bt)),L(t,rt,bt=>i(44,g=bt)),L(t,zt,bt=>i(40,s=bt));const ht=ge({});L(t,ht,bt=>i(46,f=bt));const G=(bt,be)=>vt(ht,f[bt.value]=be,f),kt=Bi(ht,bt=>{if(!bt[void 0])return;const be=bt[void 0];return I&&Wc(I,be)?I:po(be)});L(t,kt,bt=>i(63,I=bt));const ne=Bi([P,kt,J,dt,q,ft,Lt],([bt,be,Ue,Le,Ve,Ge,Qe],vi)=>{if(!bt||!be||!Le)return m;const Si=Zr(Le),Jt=Ri(Si),Ci=jh(Le,Ue,Ve),X=Ri(Ci),Vt=Dn(We(Jt),X),H=Fl(We(Vt)),ie=Math.max(be.width/Ue.width,be.height/Ue.height);vi({origin:H,translation:Vt,rotation:{x:Qe?Math.PI:0,y:Ge?Math.PI:0,z:Ve},scale:ie})});L(t,ne,bt=>i(45,m=bt));const ue=di(C?20:0);let Nt;L(t,ue,bt=>i(39,a=bt));const xe={};let Ht,ze,W,Re,Se,Xt,Be={x:0,y:0};const Fe=ge([]);L(t,Fe,bt=>i(41,l=bt));const Xe=bt=>{const be={...bt,data:c,size:h,offset:{...bt.offset},mask:{...bt.mask},backgroundColor:p};return be.opacity=d,be.offset.y+=a,be.mask.y+=a,be.id="filter",be},yi=()=>u.filter(bt=>bt.id!=="filter");return Uo(()=>{ot.set([])}),t.$$set=bt=>{"isActive"in bt&&U(i(0,P=bt.isActive)),"isActiveFraction"in bt&&T(i(1,y=bt.isActiveFraction)),"stores"in bt&&i(34,V=bt.stores),"locale"in bt&&i(2,nt=bt.locale),"filterFunctions"in bt&&i(35,k=bt.filterFunctions),"filterOptions"in bt&&i(3,N=bt.filterOptions)},t.$$.update=()=>{if(262144&t.$$.dirty[1]&&Zt.set(S),262144&t.$$.dirty[1]&&Ot.set(S),262144&t.$$.dirty[1]&&Yt.set(S),262144&t.$$.dirty[1]&&S&&Ut.set(!1),8&t.$$.dirty[0]&&i(38,n=Ts(N)),640&t.$$.dirty[1]&&i(12,r=((bt,be)=>{if(!bt||!bt.filter||!be)return 0;const Ue=bt.filter;return be.findIndex(([Le])=>{if(!k[Le])return!1;const Ve=k[Le]();return ss(Ve,Ue)})})(s,n)),786432&t.$$.dirty[1]&&C&&ue.set(S?0:20),512&t.$$.dirty[0]|458752&t.$$.dirty[1]&&S&&x&&w&&Xt&&i(37,Se={x:w.x-x.x,y:w.y-x.y+Xt.y}),496&t.$$.dirty[0]|58096&t.$$.dirty[1]&&m&&Se&&Be&&Re&&Nt){const bt=Se.x+Re.x+Be.x,be=Se.y,Ue=Re.x+Se.x,Le=Ue+Re.width;Fe.set(n.map(([Ve],Ge)=>{const Qe=f[Ve],vi=Be.x+Qe.x,Si=vi+Qe.width;if(Si<0||vi>Re.width)return!1;const Jt=bt+Qe.x,Ci=be+Qe.y,X=(H=>({origin:We(H.origin),translation:We(H.translation),rotation:{...H.rotation},scale:H.scale}))(m);X.offset=at(.5*Qe.width+Jt,.5*Qe.height+Ci),X.maskOpacity=1,X.mask=En(Jt+0,Ci,Qe.width+0,Qe.height),X.maskFeather=[1,0,1,0,1,Le,1,Le],vi<W&&Ht<1&&(X.maskFeather[0]=Ht,X.maskFeather[1]=Ue,X.maskFeather[2]=1,X.maskFeather[3]=Ue+W),Si>Re.width-W&&ze<1&&(X.maskFeather[4]=ze,X.maskFeather[5]=Le-W,X.maskFeather[6]=1,X.maskFeather[7]=Le),X.maskCornerRadius=Nt[Ve];let Vt=s&&Object.keys(s).filter(H=>H!="filter").map(H=>s[H])||[];return sn(k[Ve])&&Vt.push(k[Ve]()),X.colorMatrix=Vt.length?Vh(Vt):void 0,X.gamma=g,X}).filter(Boolean))}if(7424&t.$$.dirty[1])if(d>0&&l){const bt=[...yi(),...l.map(Xe)];ot.set(bt)}else ot.set(yi());256&t.$$.dirty[1]&&i(11,o=a?`transform: translateY(${a}px)`:void 0)},[P,y,nt,N,Ht,ze,W,Be,Re,Xt,xe,o,r,E,tt,ot,mt,Z,gt,xt,dt,wt,_,rt,zt,ht,G,kt,ne,ue,bt=>{bt.target.className===ib&&i(36,Nt=Object.keys(xe).reduce((be,Ue)=>{const Le=xe[Ue],Ve=getComputedStyle(Le),Ge=["top-left","top-right","bottom-left","bottom-right"].map(Qe=>Ve.getPropertyValue(`border-${Qe}-radius`)).map(P2).map(Qe=>1.25*Qe);return be[Ue]=Ge,be},{}))},Fe,({value:bt})=>{vt(zt,s={...s,filter:sn(k[bt])?k[bt]():void 0},s),ct.write()},"filter",V,k,Nt,Se,n,a,s,l,c,d,g,m,f,x,w,S,C,(bt,be)=>G(bt,be.detail),function(bt,be){Wi[bt?"unshift":"push"](()=>{xe[be.value]=bt,i(10,xe)})},bt=>i(7,Be=bt),function(bt){Ht=bt,i(4,Ht)},function(bt){ze=bt,i(5,ze)},function(bt){W=bt,i(6,W)},bt=>i(8,Re=bt.detail),bt=>i(9,Xt=bt.detail),function(bt){Xr.call(this,t,bt)}]}var IS={util:["filter",class extends li{constructor(t){super(),si(this,t,RS,PS,oi,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),R()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),R()}get stores(){return this.$$.ctx[34]}set stores(t){this.$$set({stores:t}),R()}get locale(){return this.$$.ctx[2]}set locale(t){this.$$set({locale:t}),R()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(t){this.$$set({filterFunctions:t}),R()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(t){this.$$set({filterOptions:t}),R()}}]};function yf(t){let e,i,n,r;e=new Ta({props:{elasticity:t[6]*t[9],class:"PinturaControlListScroller",$$slots:{default:[AS]},$$scope:{ctx:t}}});const o=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[5]];let a={$$slots:{default:[LS,({panel:s})=>({42:s}),({panel:s})=>[0,s?2048:0]]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)a=Cn(a,o[s]);return n=new Vu({props:a}),{c(){It(e.$$.fragment),i=$e(),It(n.$$.fragment)},m(s,l){Pt(e,s,l),it(s,i,l),Pt(n,s,l),r=!0},p(s,l){const c={};64&l[0]&&(c.elasticity=s[6]*s[9]),38&l[0]|8192&l[1]&&(c.$$scope={dirty:l,ctx:s}),e.$set(c);const d=48&l[0]?Tr(o,[o[0],o[1],16&l[0]&&{panels:s[4]},32&l[0]&&Br(s[5])]):{};128&l[0]|10240&l[1]&&(d.$$scope={dirty:l,ctx:s}),n.$set(d)},i(s){r||(M(e.$$.fragment,s),M(n.$$.fragment,s),r=!0)},o(s){F(e.$$.fragment,s),F(n.$$.fragment,s),r=!1},d(s){Rt(e,s),s&&Q(i),Rt(n,s)}}}function ES(t){let e,i,n=t[43].label+"";return{c(){e=ut("span"),i=$n(n)},m(r,o){it(r,e,o),St(e,i)},p(r,o){4096&o[1]&&n!==(n=r[43].label+"")&&Ln(i,n)},d(r){r&&Q(e)}}}function AS(t){let e,i;const n=[{class:"PinturaControlList"},{tabs:t[1]},t[5]];let r={$$slots:{default:[ES,({tab:o})=>({43:o}),({tab:o})=>[0,o?4096:0]]},$$scope:{ctx:t}};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new _u({props:r}),e.$on("select",t[24]),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=34&a[0]?Tr(n,[n[0],2&a[0]&&{tabs:o[1]},32&a[0]&&Br(o[5])]):{};12288&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){Rt(e,o)}}}function LS(t){let e,i;const n=[t[7][t[42]]];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new a0({props:r}),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=128&a[0]|2048&a[1]?Tr(n,[Br(o[7][o[42]])]):{};e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){Rt(e,o)}}}function zS(t){let e,i,n=t[5]&&yf(t);return{c(){e=ut("div"),n&&n.c(),v(e,"slot","footer"),v(e,"style",t[3])},m(r,o){it(r,e,o),n&&n.m(e,null),i=!0},p(r,o){r[5]?n?(n.p(r,o),32&o[0]&&M(n,1)):(n=yf(r),n.c(),M(n,1),n.m(e,null)):n&&(Ie(),F(n,1,1,()=>{n=null}),Ee()),(!i||8&o[0])&&v(e,"style",r[3])},i(r){i||(M(n),i=!0)},o(r){F(n),i=!1},d(r){r&&Q(e),n&&n.d()}}}function FS(t){let e,i;return e=new ul({props:{$$slots:{footer:[zS]},$$scope:{ctx:t}}}),e.$on("measure",t[25]),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};254&r[0]|8192&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function DS(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g=Je,m=()=>(g(),g=Gr(x,J=>i(21,c=J)),x);t.$$.on_destroy.push(()=>g());let{stores:f}=e,{isActive:x}=e;m();let{locale:w={}}=e,{finetuneControlConfiguration:S}=e,{finetuneOptions:C}=e,{finetuneNudgePrecision:I}=e;const{history:E,animation:B,scrollElasticity:T,rangeInputElasticity:D,imageColorMatrix:U,imageConvolutionMatrix:P,imageGamma:y,imageVignette:V,imageNoise:nt,allowPan:k,allowZoom:N,allowZoomControls:tt,allowPlayPause:ct}=f;L(t,B,J=>i(22,d=J));const ot={imageColorMatrix:U,imageConvolutionMatrix:P,imageGamma:y,imageVignette:V,imageNoise:nt},mt=un("elasticityMultiplier");L(t,mt,J=>i(6,p=J));const Z="finetune-"+aa(),gt=ge({});L(t,gt,J=>i(23,u=J));const xt=ge({});L(t,xt,J=>i(7,h=J));let dt=[];const wt=di(d?20:0);return L(t,wt,J=>i(20,l=J)),t.$$set=J=>{"stores"in J&&i(15,f=J.stores),"isActive"in J&&m(i(0,x=J.isActive)),"locale"in J&&i(16,w=J.locale),"finetuneControlConfiguration"in J&&i(17,S=J.finetuneControlConfiguration),"finetuneOptions"in J&&i(18,C=J.finetuneOptions),"finetuneNudgePrecision"in J&&i(19,I=J.finetuneNudgePrecision)},t.$$.update=()=>{var J;2097152&t.$$.dirty[0]&&k.set(c),2097152&t.$$.dirty[0]&&N.set(c),2097152&t.$$.dirty[0]&&tt.set(c),2097152&t.$$.dirty[0]&&c&&ct.set(!0),327680&t.$$.dirty[0]&&i(1,n=C?C.map(([q,ft])=>({id:q,label:sn(ft)?ft(w):ft})):[]),2&t.$$.dirty[0]&&i(2,r=n.length?n[0].id:void 0),4&t.$$.dirty[0]&&i(5,o=r&&{name:Z,selected:r}),2&t.$$.dirty[0]&&i(4,a=n.map(q=>q.id)),131072&t.$$.dirty[0]&&S&&(J=S,dt&&dt.forEach(q=>q()),dt=a.map(q=>{const{getStore:ft,getValue:Lt=qi}=J[q];return ft(ot).subscribe(_=>{const rt=_!=null?Lt(_):_;vt(gt,u={...u,[q]:rt},u)})})),8519680&t.$$.dirty[0]&&S&&u&&vt(xt,h=Object.keys(u).reduce((q,ft)=>{const{base:Lt,min:_,max:rt,getLabel:zt,getStore:Zt,setValue:Ot=(ht,G)=>ht.set(G)}=S[ft],Yt=Zt(ot),Ut=u[ft]!=null?u[ft]:Lt;return q[ft]={base:Lt,min:_,max:rt,value:Ut,valueLabel:zt?zt(Ut,_,rt,rt-_):Math.round(100*Ut),oninputmove:ht=>{Ot(Yt,ht)},oninputend:ht=>{Ot(Yt,ht),E.write()},elasticity:p*D,labelReset:w.labelReset,nudgeMultiplier:I},q},{}),h),6291456&t.$$.dirty[0]&&d&&wt.set(c?0:20),1048576&t.$$.dirty[0]&&i(3,s=l?`transform: translateY(${l}px)`:void 0)},[x,n,r,s,a,o,p,h,B,T,mt,gt,xt,wt,"finetune",f,w,S,C,I,l,c,d,u,({detail:J})=>i(2,r=J),function(J){Xr.call(this,t,J)}]}var BS={util:["finetune",class extends li{constructor(t){super(),si(this,t,DS,FS,oi,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(t){this.$$set({stores:t}),R()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),R()}get locale(){return this.$$.ctx[16]}set locale(t){this.$$set({locale:t}),R()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(t){this.$$set({finetuneControlConfiguration:t}),R()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(t){this.$$set({finetuneOptions:t}),R()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(t){this.$$set({finetuneNudgePrecision:t}),R()}}]},Eu=(t,e)=>{const i=e.length;return t<0?t%i+i:t>=i?t%i:t};function bf(t,e,i){const n=t.slice();return n[46]=e[i].key,n[47]=e[i].index,n[48]=e[i].translate,n[49]=e[i].scale,n[50]=e[i].selected,n[12]=e[i].rotate,n[51]=e[i].dir,n[52]=e[i].center,n[53]=e[i].type,n[2]=e[i].visible,n}function xf(t){let e,i;return{c(){e=ut("div"),v(e,"class","PinturaShapeManipulator"),v(e,"data-control","point"),v(e,"style",i=`pointer-events:none;transform: translate3d(${t[52].x}px, ${t[52].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[4]}`)},m(n,r){it(n,e,r)},p(n,r){56&r[0]&&i!==(i=`pointer-events:none;transform: translate3d(${n[52].x}px, ${n[52].y}px, 0) scale(${n[5]}, ${n[5]}); opacity: ${n[4]}`)&&v(e,"style",i)},d(n){n&&Q(e)}}}function vf(t,e){let i,n,r,o,a,s,l,c,d,u;function p(...g){return e[18](e[47],...g)}let h=e[53]==="edge"&&e[2]&&xf(e);return{key:t,first:null,c(){i=ut("div"),l=$e(),h&&h.c(),c=Tn(),v(i,"role","button"),v(i,"aria-label",n=`Drag ${e[53]} ${e[46]}`),v(i,"tabindex",r=e[53]==="edge"?-1:0),v(i,"class","PinturaShapeManipulator"),v(i,"data-control",o=e[53]),v(i,"data-selected",a=e[50]),v(i,"style",s=`cursor:${e[51]?e[51]+"-resize":"move"};opacity:${e[4]};--tx:${e[48].x};--ty:${e[48].y};--r:${e[53]==="edge"?e[12]:0}rad;--sx:${e[53]==="point"?e[5]:e[49].x};--sy:${e[53]==="point"?e[5]:e[49].y};`),this.first=i},m(g,m){it(g,i,m),it(g,l,m),h&&h.m(g,m),it(g,c,m),d||(u=[Mt(i,"nudge",p),Zi(Ds.call(null,i,{preventDefault:!0})),Mt(i,"interactionstart",function(){Gi(e[9]("start",e[47]))&&e[9]("start",e[47]).apply(this,arguments)}),Mt(i,"interactionupdate",function(){Gi(e[9]("move",e[47]))&&e[9]("move",e[47]).apply(this,arguments)}),Mt(i,"interactionend",function(){Gi(e[9]("end",e[47]))&&e[9]("end",e[47]).apply(this,arguments)}),Zi(Fs.call(null,i,{observeKeys:!0}))],d=!0)},p(g,m){e=g,8&m[0]&&n!==(n=`Drag ${e[53]} ${e[46]}`)&&v(i,"aria-label",n),8&m[0]&&r!==(r=e[53]==="edge"?-1:0)&&v(i,"tabindex",r),8&m[0]&&o!==(o=e[53])&&v(i,"data-control",o),8&m[0]&&a!==(a=e[50])&&v(i,"data-selected",a),56&m[0]&&s!==(s=`cursor:${e[51]?e[51]+"-resize":"move"};opacity:${e[4]};--tx:${e[48].x};--ty:${e[48].y};--r:${e[53]==="edge"?e[12]:0}rad;--sx:${e[53]==="point"?e[5]:e[49].x};--sy:${e[53]==="point"?e[5]:e[49].y};`)&&v(i,"style",s),e[53]==="edge"&&e[2]?h?h.p(e,m):(h=xf(e),h.c(),h.m(c.parentNode,c)):h&&(h.d(1),h=null)},d(g){g&&Q(i),g&&Q(l),h&&h.d(g),g&&Q(c),d=!1,ji(u)}}}function wf(t){let e,i,n,r;return{c(){e=ut("div"),v(e,"role","button"),v(e,"aria-label","Drag rotator"),v(e,"tabindex","0"),v(e,"class","PinturaShapeManipulator"),v(e,"data-control","rotate"),v(e,"style",i=`transform: translate3d(${t[0].x}px, ${t[0].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[4]}`)},m(o,a){it(o,e,a),n||(r=[Mt(e,"nudge",t[11]),Zi(Ds.call(null,e,{preventDefault:!0})),Mt(e,"interactionstart",t[12]("start")),Mt(e,"interactionupdate",t[12]("move")),Mt(e,"interactionend",t[12]("end")),Zi(Fs.call(null,e,{observeKeys:!0}))],n=!0)},p(o,a){49&a[0]&&i!==(i=`transform: translate3d(${o[0].x}px, ${o[0].y}px, 0) scale(${o[5]}, ${o[5]}); opacity: ${o[4]}`)&&v(e,"style",i)},d(o){o&&Q(e),n=!1,ji(r)}}}function OS(t){let e,i,n=[],r=new Map,o=t[3];const a=l=>l[46];for(let l=0;l<o.length;l+=1){let c=bf(t,o,l),d=a(c);r.set(d,n[l]=vf(d,c))}let s=t[1]&&wf(t);return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=$e(),s&&s.c(),i=Tn()},m(l,c){for(let d=0;d<n.length;d+=1)n[d].m(l,c);it(l,e,c),s&&s.m(l,c),it(l,i,c)},p(l,c){1592&c[0]&&(o=l[3],n=Oa(n,c,a,1,l,o,r,e.parentNode,i2,vf,e,bf)),l[1]?s?s.p(l,c):(s=wf(l),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},i:Je,o:Je,d(l){for(let c=0;c<n.length;c+=1)n[c].d(l);l&&Q(e),s&&s.d(l),l&&Q(i)}}}function WS(t,e,i){let n,r,o,a;const s=Ca(),l=.5*ia,c=jo-l,d=jo+l,u=-jo,p=u-l,h=u+l,g=dp-l,m=-dp+l,f=l,x=-l,w=jo-ia,S=w-l,C=w+l,I=dp-ia,E=I-l,B=I+l,T=u-ia,D=T+l,U=T-l,P=u+ia,y=P+l,V=P-l;let{visible:nt=!1}=e,{points:k=[]}=e,{rotatorPoint:N}=e,{selectedPoint:tt}=e,{enableDragEdges:ct=!0}=e,{enableDragPoints:ot=!0}=e,{enableRotatePoints:mt=!0}=e;const Z=un("isAnimated");L(t,Z,J=>i(17,r=J));const gt=di(.5,{precision:1e-4,stiffness:.3,damping:.7});L(t,gt,J=>i(5,a=J));const xt=di(0,{precision:.001,stiffness:.3,damping:.7});L(t,xt,J=>i(4,o=J));const dt=J=>{let q="";return(J<=d&&J>=c||J>=p&&J<=h)&&(q="ns"),(J<=m||J>=g||J>=x&&J<=f)&&(q="ew"),(J>=E&&J<=B||J<=y&&J>=V)&&(q="nesw"),(J>=S&&J<=C||J<=D&&J>=U)&&(q="nwse"),q},wt=(J,q)=>{s("resizestart",{indexes:J,translation:an(),isNudge:!0}),s("resizemove",{indexes:J,translation:q,isNudge:!0}),s("resizeend",{indexes:J,translation:an(),isNudge:!0})};return t.$$set=J=>{"visible"in J&&i(2,nt=J.visible),"points"in J&&i(13,k=J.points),"rotatorPoint"in J&&i(0,N=J.rotatorPoint),"selectedPoint"in J&&i(14,tt=J.selectedPoint),"enableDragEdges"in J&&i(15,ct=J.enableDragEdges),"enableDragPoints"in J&&i(16,ot=J.enableDragPoints),"enableRotatePoints"in J&&i(1,mt=J.enableRotatePoints)},t.$$.update=()=>{131076&t.$$.dirty[0]&&gt.set(nt?1:.5,{hard:r===!1}),131076&t.$$.dirty[0]&&xt.set(nt?1:0,{hard:r===!1}),8192&t.$$.dirty[0]&&i(3,n=((J,q)=>{let ft=0;const Lt=No(J),_=[],rt=J.length;for(;ft<rt;ft++){const zt=Eu(ft-1,J),Zt=Eu(ft+1,J),Ot=J[zt],Yt=J[ft],Ut=J[Zt],ht=Math.atan2(Ut.y-Yt.y,Ut.x-Yt.x);if(ot){const kt=ho(at(Ot.x-Yt.x,Ot.y-Yt.y)),ne=ho(at(Ut.x-Yt.x,Ut.y-Yt.y)),ue=at(kt.x+ne.x,kt.y+ne.y),Nt=ct?ot&&dt(Math.atan2(ue.y,ue.x)):void 0;_.push({index:[ft],key:"point-"+ft,type:"point",selected:tt===ft,scale:{x:1,y:1},translate:{x:Yt.x,y:Yt.y},angle:void 0,rotate:mt,center:Yt,dir:Nt})}if(!ct||Array.isArray(ct)&&!ct.some(([kt,ne])=>ft===kt&&Zt===ne))continue;const G=at(Yt.x+.5*(Ut.x-Yt.x),Yt.y+.5*(Ut.y-Yt.y));_.push({index:[ft,Zt],key:"edge-"+ft,type:"edge",scale:{x:So(Yt,Ut),y:1},translate:{x:Yt.x,y:Yt.y},angle:ht,rotate:ht,center:G,visible:Array.isArray(ct),dir:dt(Math.atan2(Lt.y-G.y,Lt.x-G.x))})}return _})(k))},[N,mt,nt,n,o,a,Z,gt,xt,(J,q)=>({detail:ft})=>{const Lt=ft&&ft.translation?ft.translation:at(0,0);s("resize"+J,{...ft,indexes:q,translation:Lt})},wt,({detail:J})=>{s("rotatestart",{translation:an(),isNudge:!0}),s("rotatemove",{translation:J,isNudge:!0}),s("rotateend",{translation:an(),isNudge:!0})},J=>({detail:q})=>{const ft=q&&q.translation?q.translation:at(0,0);s("rotate"+J,{...q,translation:ft})},k,tt,ct,ot,r,(J,{detail:q})=>wt(J,q)]}class _S extends li{constructor(e){super(),si(this,e,WS,OS,oi,{visible:2,points:13,rotatorPoint:0,selectedPoint:14,enableDragEdges:15,enableDragPoints:16,enableRotatePoints:1},null,[-1,-1])}}var yh=(t,e)=>{const i=r0(t);return Dn(i,e)},su=t=>document.createTextNode(t),nb=t=>(Fa()&&t.endsWith("<div><br></div>")?t.replace(/<div><br><\/div>$/,"<br><br>"):t).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function Sf(t){let e,i;return{c(){e=ut("pre"),v(e,"class","PinturaContentEditable"),v(e,"style",i=t[7]+";position:absolute;z-index:-1;pointer-events:none;")},m(n,r){it(n,e,r),e.innerHTML=t[0]},p(n,r){1&r[0]&&(e.innerHTML=n[0]),128&r[0]&&i!==(i=n[7]+";position:absolute;z-index:-1;pointer-events:none;")&&v(e,"style",i)},d(n){n&&Q(e)}}}function VS(t){let e,i,n,r,o,a,s=t[8]&&Sf(t);return{c(){s&&s.c(),e=$e(),i=ut("pre"),v(i,"class","PinturaContentEditable"),v(i,"data-wrap-content",n=t[4]||t[5]?"wrap":"nowrap"),v(i,"contenteditable",""),v(i,"spellcheck",t[1]),v(i,"autocorrect",t[2]),v(i,"autocapitalize",t[3]),v(i,"style",r=t[8]?t[15](t[7]):t[7])},m(l,c){s&&s.m(l,c),it(l,e,c),it(l,i,c),t[26](i),o||(a=[Mt(i,"input",t[13]),Mt(i,"compositionend",t[12]),Mt(i,"paste",t[14]),Mt(i,"keydown",t[10]),Mt(i,"keyup",t[11]),Mt(i,"blur",t[9])],o=!0)},p(l,c){l[8]?s?s.p(l,c):(s=Sf(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),48&c[0]&&n!==(n=l[4]||l[5]?"wrap":"nowrap")&&v(i,"data-wrap-content",n),2&c[0]&&v(i,"spellcheck",l[1]),4&c[0]&&v(i,"autocorrect",l[2]),8&c[0]&&v(i,"autocapitalize",l[3]),384&c[0]&&r!==(r=l[8]?l[15](l[7]):l[7])&&v(i,"style",r)},i:Je,o:Je,d(l){s&&s.d(l),l&&Q(e),l&&Q(i),t[26](null),o=!1,ji(a)}}}function NS(t,e,i){let n,r,{spellcheck:o="false"}=e,{autocorrect:a="off"}=e,{autocapitalize:s="off"}=e,{wrapLines:l=!0}=e,{allowNewline:c=!0}=e,{textFormat:d="text"}=e,{formatInput:u=qi}=e,{formatPaste:p=qi}=e,{style:h}=e,{innerHTML:g}=e,{oninput:m=fe}=e,{enableTextStyleShortcuts:f=!1}=e;const x=()=>{if(!S)return;const k=document.createRange();k.selectNodeContents(S);const N=U();N.removeAllRanges(),N.addRange(k)},w=Ca();let S;document.execCommand("defaultParagraphSeparator",!1,"br");const C=k=>k.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),I=()=>{i(0,g=S.innerHTML);const k=nb(g);w("input",k),m(k),requestAnimationFrame(()=>S&&S.scrollTo(0,0))},E=()=>{P(S);const k=d==="html"?S.innerHTML:C(S.innerHTML);i(6,S.innerHTML=u(k),S),y(S),I()},B={b:"bold",i:"italic",u:"underline",s:"strikethrough"},T=k=>{const N=yn("span");return N.dataset.bookmark=k,N},D=(k,N,tt)=>{const ct=T(tt);if(k.nodeType===Node.TEXT_NODE){const ot=k.textContent;if(tt==="start"){const mt=su(ot.substr(0,N)),Z=su(ot.substr(N));k.replaceWith(mt,ct,Z)}else{const mt=su(ot.substr(0,N)),Z=su(ot.substr(N));k.replaceWith(mt,ct,Z)}}else k.nodeType===Node.ELEMENT_NODE&&k.insertBefore(ct,k.childNodes[N])},U=()=>{const k=S.getRootNode();return"getSelection"in k?k.getSelection():document.getSelection()},P=k=>{const N=U();if(!N.getRangeAt||!N.rangeCount)return;const tt=N.getRangeAt(0),{startOffset:ct,endOffset:ot,startContainer:mt,endContainer:Z}=tt;if(k.contains(tt.startContainer)&&k.contains(tt.endContainer))if(mt.nodeType===Node.TEXT_NODE&&mt===Z){const gt=mt.textContent,xt=gt.substr(0,ct),dt=T("start"),wt=ot-ct>0?gt.substr(ct,ot):"",J=T("end"),q=gt.substr(ot);mt.replaceWith(xt,dt,wt,J,q)}else D(mt,ct,"start"),D(Z,ot+(mt===Z?1:0),"end")},y=k=>{const N=V(k,"start"),tt=V(k,"end");if(!N||!tt)return;const ct=document.createRange();ct.setStart(N,0),ct.setEnd(tt,0);const ot=U();ot.removeAllRanges(),ot.addRange(ct),N.remove(),tt.remove()},V=(k,N)=>{const tt=k.children;for(let ct=0;ct<tt.length;ct++){const ot=tt[ct];if(ot.dataset.bookmark===N)return ot;if(ot.children.length){const mt=V(ot,N);if(mt)return mt}}};let nt;return t.$$set=k=>{"spellcheck"in k&&i(1,o=k.spellcheck),"autocorrect"in k&&i(2,a=k.autocorrect),"autocapitalize"in k&&i(3,s=k.autocapitalize),"wrapLines"in k&&i(4,l=k.wrapLines),"allowNewline"in k&&i(5,c=k.allowNewline),"textFormat"in k&&i(16,d=k.textFormat),"formatInput"in k&&i(17,u=k.formatInput),"formatPaste"in k&&i(18,p=k.formatPaste),"style"in k&&i(19,h=k.style),"innerHTML"in k&&i(0,g=k.innerHTML),"oninput"in k&&i(20,m=k.oninput),"enableTextStyleShortcuts"in k&&i(21,f=k.enableTextStyleShortcuts)},t.$$.update=()=>{var k;if(64&t.$$.dirty[0]&&i(25,n=!!S),33554433&t.$$.dirty[0]&&n&&g&&(k=g)!==S.innerHTML&&(i(6,S.innerHTML=k,S),S===document.activeElement&&x()),524336&t.$$.dirty[0])if(!l&&c){const N=h.includes(":right")?"text-indent:-100px!important":h.includes(":center")?"":"min-width:calc(100% + 100px)!important";i(7,nt=h+";overflow:visible;"+N)}else i(7,nt=h);524288&t.$$.dirty[0]&&i(8,r=h.includes("text-stroke"))},[g,o,a,s,l,c,S,nt,r,()=>{w("blur")},k=>{if(/escape/i.test(k.code))return k.stopPropagation(),void w("cancel");const N=k.ctrlKey||k.metaKey;if(d==="html"&&N&&/b|i|u|s/.test(k.key))return f&&(tt=>{const ct=B[tt];ct&&document.execCommand(ct)})(k.key),void k.preventDefault();/enter/i.test(k.code)&&(k.stopPropagation(),k.isComposing||(N?w("confirm"):(c||k.preventDefault(),document.execCommand("insertLineBreak"),k.preventDefault())))},()=>{},k=>{k.data!==""&&E()},k=>{const{inputType:N}=k;N!=="insertCompositionText"&&N!=="deleteCompositionText"&&E()},k=>{k.preventDefault();const N=k.clipboardData.getData("text/plain"),tt=d==="html"?N:C(N),ct=p(tt);if(!ct.length)return;const ot=U().getRangeAt(0);ot.deleteContents(),ot.insertNode(document.createTextNode(ct)),I()},k=>k.replace("-webkit-text-stroke","--text-stroke").replace("text-shadow","--text-shadow"),d,u,p,h,m,f,()=>E(),()=>S&&S.focus(),x,n,function(k){Wi[k?"unshift":"push"](()=>{S=k,i(6,S)})}]}class HS extends li{constructor(e){super(),si(this,e,NS,VS,oi,{spellcheck:1,autocorrect:2,autocapitalize:3,wrapLines:4,allowNewline:5,textFormat:16,formatInput:17,formatPaste:18,style:19,innerHTML:0,oninput:20,enableTextStyleShortcuts:21,confirm:22,focus:23,select:24},null,[-1,-1])}get spellcheck(){return this.$$.ctx[1]}set spellcheck(e){this.$$set({spellcheck:e}),R()}get autocorrect(){return this.$$.ctx[2]}set autocorrect(e){this.$$set({autocorrect:e}),R()}get autocapitalize(){return this.$$.ctx[3]}set autocapitalize(e){this.$$set({autocapitalize:e}),R()}get wrapLines(){return this.$$.ctx[4]}set wrapLines(e){this.$$set({wrapLines:e}),R()}get allowNewline(){return this.$$.ctx[5]}set allowNewline(e){this.$$set({allowNewline:e}),R()}get textFormat(){return this.$$.ctx[16]}set textFormat(e){this.$$set({textFormat:e}),R()}get formatInput(){return this.$$.ctx[17]}set formatInput(e){this.$$set({formatInput:e}),R()}get formatPaste(){return this.$$.ctx[18]}set formatPaste(e){this.$$set({formatPaste:e}),R()}get style(){return this.$$.ctx[19]}set style(e){this.$$set({style:e}),R()}get innerHTML(){return this.$$.ctx[0]}set innerHTML(e){this.$$set({innerHTML:e}),R()}get oninput(){return this.$$.ctx[20]}set oninput(e){this.$$set({oninput:e}),R()}get enableTextStyleShortcuts(){return this.$$.ctx[21]}set enableTextStyleShortcuts(e){this.$$set({enableTextStyleShortcuts:e}),R()}get confirm(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}get select(){return this.$$.ctx[24]}}const kf=["i","b","u","strike"].map(t=>({tag:t,tagOpen:new RegExp(`<${t}>`,"g"),tagClose:new RegExp(`</${t}>`,"g"),placeholderOpen:new RegExp(`___${t}O___`,"g"),placeholderClose:new RegExp(`___${t}C___`,"g")}));var jS=t=>t=((e,i=kf)=>(i.forEach(({tag:n,placeholderOpen:r,placeholderClose:o})=>{e=e.replace(r,`<${n}>`).replace(o,`</${n}>`)}),e))(t=(t=((e,i=kf)=>(i.forEach(({tag:n,tagOpen:r,tagClose:o})=>{e=e.replace(r,`___${n}O___`).replace(o,`___${n}C___`)}),e))(t)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split(`
`).join("<br>")),lu=(t,e)=>_e(t)?parseFloat(t)/100*e:t,Mc=(t,e)=>({x:jr(t.x,e.width),y:jr(t.y,e.height)});function Cf(t,e,i){const n=t.slice();return n[299]=e[i],n[301]=i,n}function Tf(t,e){let i,n,r,o,a,s,l,c,d,u,p,h=e[299].name+"";function g(){return e[189](e[301])}return r=new n0({props:{color:e[299].color}}),{key:t,first:null,c(){i=ut("li"),n=ut("button"),It(r.$$.fragment),o=$e(),a=ut("span"),s=$n(h),c=$e(),v(n,"class","PinturaShapeListItem"),v(n,"type","button"),v(n,"aria-label",l="Select shape "+e[299].name),this.first=i},m(m,f){it(m,i,f),St(i,n),Pt(r,n,null),St(n,o),St(n,a),St(a,s),St(i,c),d=!0,u||(p=Mt(n,"click",g),u=!0)},p(m,f){e=m;const x={};2097152&f[0]&&(x.color=e[299].color),r.$set(x),(!d||2097152&f[0])&&h!==(h=e[299].name+"")&&Ln(s,h),(!d||2097152&f[0]&&l!==(l="Select shape "+e[299].name))&&v(n,"aria-label",l)},i(m){d||(M(r.$$.fragment,m),d=!0)},o(m){F(r.$$.fragment,m),d=!1},d(m){m&&Q(i),Rt(r),u=!1,p()}}}function Mf(t){let e,i;return e=new _S({props:{visible:!0,points:t[12],rotatorPoint:t[27],selectedPoint:t[16],enableDragEdges:t[17],enableDragPoints:t[29],enableRotatePoints:t[14]}}),e.$on("resizestart",t[38]),e.$on("resizemove",t[39]),e.$on("resizeend",t[40]),e.$on("rotatestart",t[41]),e.$on("rotatemove",t[42]),e.$on("rotateend",t[43]),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};4096&r[0]&&(o.points=n[12]),134217728&r[0]&&(o.rotatorPoint=n[27]),65536&r[0]&&(o.selectedPoint=n[16]),131072&r[0]&&(o.enableDragEdges=n[17]),536870912&r[0]&&(o.enableDragPoints=n[29]),16384&r[0]&&(o.enableRotatePoints=n[14]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function Pf(t){let e,i,n,r;const o=[GS,US],a=[];function s(l,c){return l[4]==="modal"?0:l[4]==="inline"?1:-1}return~(e=s(t))&&(i=a[e]=o[e](t)),{c(){i&&i.c(),n=Tn()},m(l,c){~e&&a[e].m(l,c),it(l,n,c),r=!0},p(l,c){let d=e;e=s(l),e===d?~e&&a[e].p(l,c):(i&&(Ie(),F(a[d],1,1,()=>{a[d]=null}),Ee()),~e?(i=a[e],i?i.p(l,c):(i=a[e]=o[e](l),i.c()),M(i,1),i.m(n.parentNode,n)):i=null)},i(l){r||(M(i),r=!0)},o(l){F(i),r=!1},d(l){~e&&a[e].d(l),l&&Q(n)}}}function US(t){let e,i,n,r,o,a={formatInput:t[45],wrapLines:!!t[13].width,textFormat:t[13].format,enableTextStyleShortcuts:t[5],allowNewline:t[28],style:t[26]};return i=new HS({props:a}),t[192](i),i.$on("input",t[46]),i.$on("keyup",t[49]),i.$on("cancel",t[51]),i.$on("confirm",t[50]),{c(){e=ut("div"),It(i.$$.fragment),v(e,"class","PinturaInlineInput"),v(e,"style",t[25])},m(s,l){it(s,e,l),Pt(i,e,null),n=!0,r||(o=Mt(e,"focusout",t[193]),r=!0)},p(s,l){const c={};8192&l[0]&&(c.wrapLines=!!s[13].width),8192&l[0]&&(c.textFormat=s[13].format),32&l[0]&&(c.enableTextStyleShortcuts=s[5]),268435456&l[0]&&(c.allowNewline=s[28]),67108864&l[0]&&(c.style=s[26]),i.$set(c),(!n||33554432&l[0])&&v(e,"style",s[25])},i(s){n||(M(i.$$.fragment,s),n=!0)},o(s){F(i.$$.fragment,s),n=!1},d(s){s&&Q(e),t[192](null),Rt(i),r=!1,o()}}}function GS(t){let e,i;return e=new W2({props:{panelOffset:t[2],onconfirm:t[50],oncancel:t[51],buttonCancel:{icon:t[6].shapeIconInputCancel,label:t[6].shapeLabelInputCancel},buttonConfirm:{icon:t[6].shapeIconInputConfirm,label:t[6].shapeLabelInputConfirm,hideLabel:!0},$$slots:{default:[ZS]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};4&r[0]&&(o.panelOffset=n[2]),64&r[0]&&(o.buttonCancel={icon:n[6].shapeIconInputCancel,label:n[6].shapeLabelInputCancel}),64&r[0]&&(o.buttonConfirm={icon:n[6].shapeIconInputConfirm,label:n[6].shapeLabelInputConfirm,hideLabel:!0}),83886336&r[0]|8388608&r[9]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function ZS(t){let e,i,n;return{c(){e=ut("textarea"),v(e,"spellcheck","false"),v(e,"autocorrect","off"),v(e,"autocapitalize","off"),v(e,"style",t[26])},m(r,o){it(r,e,o),t[190](e),e$(e,t[24]),i||(n=[Mt(e,"keydown",t[48]),Mt(e,"keypress",t[47]),Mt(e,"keyup",t[49]),Mt(e,"input",t[46]),Mt(e,"input",t[191])],i=!0)},p(r,o){67108864&o[0]&&v(e,"style",r[26]),16777216&o[0]&&e$(e,r[24])},d(r){r&&Q(e),t[190](null),i=!1,ji(n)}}}function Rf(t){let e,i,n,r,o;return i=new mo({props:{items:t[22],key:t[10]}}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"class","PinturaShapeControls"),v(e,"style",t[23])},m(a,s){it(a,e,s),Pt(i,e,null),n=!0,r||(o=[Mt(e,"measure",t[194]),Zi(Mr.call(null,e))],r=!0)},p(a,s){const l={};4194304&s[0]&&(l.items=a[22]),1024&s[0]&&(l.key=a[10]),i.$set(l),(!n||8388608&s[0])&&v(e,"style",a[23])},i(a){n||(M(i.$$.fragment,a),n=!0)},o(a){F(i.$$.fragment,a),n=!1},d(a){a&&Q(e),Rt(i),r=!1,ji(o)}}}function XS(t){let e,i,n,r,o,a,s,l,c,d,u=[],p=new Map,h=t[21];const g=w=>w[299].id;for(let w=0;w<h.length;w+=1){let S=Cf(t,h,w),C=g(S);p.set(C,u[w]=Tf(C,S))}let m=t[15]&&Mf(t),f=t[11]&&Pf(t),x=t[18]>0&&Rf(t);return{c(){e=ut("div"),i=ut("nav"),n=ut("ul");for(let w=0;w<u.length;w+=1)u[w].c();r=$e(),m&&m.c(),o=$e(),f&&f.c(),a=$e(),x&&x.c(),v(i,"class","PinturaShapeList"),v(i,"data-visible",t[19]),v(e,"class","PinturaShapeEditor"),v(e,"tabindex","0")},m(w,S){it(w,e,S),St(e,i),St(i,n);for(let C=0;C<u.length;C+=1)u[C].m(n,null);St(e,r),m&&m.m(e,null),St(e,o),f&&f.m(e,null),St(e,a),x&&x.m(e,null),t[195](e),l=!0,c||(d=[Mt(i,"focusin",t[54]),Mt(i,"focusout",t[55]),Mt(e,"keydown",function(){Gi(t[0]?fe:t[44])&&(t[0]?fe:t[44]).apply(this,arguments)}),Mt(e,"nudge",function(){Gi(t[0]?fe:t[53])&&(t[0]?fe:t[53]).apply(this,arguments)}),Mt(e,"measure",t[188]),Mt(e,"pointermove",function(){Gi(t[0]?fe:t[56])&&(t[0]?fe:t[56]).apply(this,arguments)}),Mt(e,"pointerleave",function(){Gi(t[0]?fe:t[57])&&(t[0]?fe:t[57]).apply(this,arguments)}),Mt(e,"interactionstart",function(){Gi(t[0]?fe:t[32])&&(t[0]?fe:t[32]).apply(this,arguments)}),Mt(e,"interactionupdate",function(){Gi(t[0]?fe:t[34])&&(t[0]?fe:t[34]).apply(this,arguments)}),Mt(e,"interactioncancel",function(){Gi(t[0]?fe:t[33])&&(t[0]?fe:t[33]).apply(this,arguments)}),Mt(e,"interactionrelease",function(){Gi(t[0]?fe:t[35])&&(t[0]?fe:t[35]).apply(this,arguments)}),Mt(e,"interactionend",function(){Gi(t[0]?fe:t[36])&&(t[0]?fe:t[36]).apply(this,arguments)}),Zi(Mr.call(null,e)),Zi(Ds.call(null,e)),Zi(s=Fs.call(null,e,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:If,getEventPosition:t[196]}))],c=!0)},p(w,S){t=w,2097282&S[0]&&(h=t[21],Ie(),u=Oa(u,S,g,1,t,h,p,n,zs,Tf,null,Cf),Ee()),(!l||524288&S[0])&&v(i,"data-visible",t[19]),t[15]?m?(m.p(t,S),32768&S[0]&&M(m,1)):(m=Mf(t),m.c(),M(m,1),m.m(e,o)):m&&(Ie(),F(m,1,1,()=>{m=null}),Ee()),t[11]?f?(f.p(t,S),2048&S[0]&&M(f,1)):(f=Pf(t),f.c(),M(f,1),f.m(e,a)):f&&(Ie(),F(f,1,1,()=>{f=null}),Ee()),t[18]>0?x?(x.p(t,S),262144&S[0]&&M(x,1)):(x=Rf(t),x.c(),M(x,1),x.m(e,null)):x&&(Ie(),F(x,1,1,()=>{x=null}),Ee()),s&&Gi(s.update)&&8&S[0]&&s.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:If,getEventPosition:t[196]})},i(w){if(!l){for(let S=0;S<h.length;S+=1)M(u[S]);M(m),M(f),M(x),l=!0}},o(w){for(let S=0;S<u.length;S+=1)F(u[S]);F(m),F(f),F(x),l=!1},d(w){w&&Q(e);for(let S=0;S<u.length;S+=1)u[S].d();m&&m.d(),f&&f.d(),x&&x.d(),t[195](null),c=!1,ji(d)}}}const If=(t,e)=>t.target===e;function YS(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,w,S,C,I,E,B,T,D,U,P,y,V,nt,k,N,tt,ct,ot,mt,Z,gt,xt,dt,wt,J,q,ft,Lt,_,rt,zt,Zt,Ot,Yt,Ut,ht,G,kt,ne,ue,Nt,xe,Ht,ze,W,Re,Se,Xt=Je,Be=()=>(Xt(),Xt=Gr(bt,b=>i(184,Ht=b)),bt);t.$$.on_destroy.push(()=>Xt());let{uid:Fe=aa()}=e,{ui:Xe}=e,{disabled:yi=!1}=e,{shapes:bt}=e;Be();let{selection:be}=e,{offset:Ue}=e,{contextRotation:Le=0}=e,{contextFlipX:Ve=!1}=e,{contextFlipY:Ge=!1}=e,{contextZoom:Qe=1}=e,{active:vi=!1}=e,{opacity:Si=1}=e,{parentRect:Jt}=e,{rootRect:Ci}=e,{utilRect:X}=e,{hoverColor:Vt}=e,{caretColor:H}=e,{gridColor:ie}=e,{snapColor:pe}=e,{textInputMode:we="inline"}=e,{oninteractionstart:ye=fe}=e,{oninteractionupdate:ee=fe}=e,{oninteractionrelease:qt=fe}=e,{oninteractionend:ei=fe}=e,{oninteractioncancel:Ze=fe}=e,{onaddshape:lt=fe}=e,{onupdateshape:Dt=fe}=e,{onselectshape:re=fe}=e,{onblurshape:Te=fe}=e,{onremoveshape:Qt=fe}=e,{ontapshape:et=fe}=e,{onhovershape:jt=fe}=e,{ontriggerhistorywrite:Gt=fe}=e,{onhovercanvas:ce=fe}=e,{ontapcanvas:Ne=fe}=e,{onleavecanvas:He=fe}=e,{beforeSelectShape:Me=()=>!0}=e,{beforeDeselectShape:gn=()=>!0}=e,{beforeRemoveShape:rn=()=>!0}=e,{beforeUpdateShape:ve=(b,j,A)=>j}=e,{willRenderShapeControls:ii=qi}=e,{willRenderShapeTextControls:Pe=qi}=e,{willStartInteraction:ci=(b,j)=>!0}=e,{mapEditorPointToImagePoint:je}=e,{mapImagePointToEditorPoint:te}=e,{eraseRadius:De}=e,{selectRadius:ki}=e,{enableButtonFlipVertical:bn=!1}=e,{enableTapToAddText:Mn=!0}=e,{enableMultiSelect:Hn=!1}=e,{enableTextStyleControls:Gn=!0}=e,{locale:Ui}=e,{snapThreshold:Zn=0}=e,{snapPointer:yr=!0}=e,{enableSnapToContext:$r=!0}=e,{gridSize:Pr=0}=e;const Go=b=>{if(Zn===0)return[];let j;return $r&&(j={...Jt,x:0,y:0}),[...Ht.filter(A=>A!==b).filter(A=>!uo(A)).filter(A=>(K=>K.disableAcceptSnap!==!0)(A)).map(A=>zn({...A},Jt)),j].filter(Boolean)},ln=(b,j,A,K)=>b===0?{snapTargets:[]}:{snapThreshold:b,gridSize:j,gridRect:A,snapTargets:Go(K)},$o=un("isAnimated");L(t,$o,b=>i(185,W=b));const en=b=>b.set(Sa(b)),pn=b=>Sa(b).find(uo),gi=(b,j)=>{if(!pn(j))return Kp(b),go(b,j)},ar=b=>{pn(b)&&b.update(j=>j.filter(A=>!uo(A)))},eo=b=>{const j=pn(b);if(j)return Nm(j),en(b),j},zo=(b,j,A=(K,st)=>({...K,...st}))=>{pn(j)&&j.update(K=>K.map(st=>uo(st)?A(st,b):st))},go=(b,j=bt)=>(j.update(A=>[...A,b]),b),Fo=(b,j,A)=>{const K=ve({...b},j,{...A});return wa(b,K,A),b},Or=(b,j)=>{const A=So(b,j),K=Gd(b,j),st=Math.PI/8,Tt=st*Math.round(K/st)-Le%st;j.x=b.x+A*Math.cos(Tt),j.y=b.y+A*Math.sin(Tt)},Xn=un("keysPressed");L(t,Xn,b=>i(186,Re=b));const cn=(b,j,A)=>b===0||j&&A?b:j||A?-b:b,Yr=b=>{if(b.x===null&&b.y===null)return io();b.x&&i(140,Wr=je({x:b.x,y:0}).x),b.y&&i(141,qr=je({x:0,y:b.y}).y)},io=()=>{i(140,Wr=null),i(141,qr=null)};let Wr=null,qr=null;const br=(b,j)=>{const A=te(b);return je(Fn(A,j))},no=(b,j,A)=>{const K=(A-j)/b+1;return Array.from({length:K},(st,Tt)=>j+Tt*b)},Rr=b=>{let j=[],A=[],K=b.points;if(b.x1!==void 0&&(K=[{x:b.x1,y:b.y1},{x:b.x2,y:b.y2}]),K){const st=K.map(te),Tt=rr(st),Et=st[0],Ft=st[st.length-1];j=[Tt.x,Tt.x+.5*Tt.width,Tt.x+Tt.width,Et.x,Ft.x],A=[Tt.y,Tt.y+.5*Tt.height,Tt.y+Tt.height,Et.y,Ft.y]}else if(b.text||b.width!==void 0||b.rx!==void 0){let st;if(b.text&&b.height===void 0){const Kt=Vo(b.text,b);st=En(b.x,b.y,Kt.width,Kt.height)}else st=b.width!==void 0?xs(b):xs({x:b.x-b.rx,y:b.y-b.ry,width:2*b.rx,height:2*b.ry});const Tt=Ro(st).map(te),Et=Math.abs(b.rotation)>0?wr(st,b.rotation).map(te):Tt,Ft=rr(Et),At=Ri(Ft),Bt=.5*Ft.width,Wt=.5*Ft.height;j=[At.x-Bt,At.x,At.x+Bt],A=[At.y-Wt,At.y,At.y+Wt]}else if(b.x!==void 0){const st=te(b);j=[st.x],A=[st.y]}return{x:j,y:A}},_r=(b,j,A)=>{let K,st,Tt,Et=Number.Infinity,Ft=null,At=null;for(let Bt=0;Bt<b.length;Bt++){st=b[Bt];for(let Wt=0;Wt<j.length;Wt++)Tt=j[Wt],K=Math.abs(st-Tt),K<A&&(At===null||K<Et)&&(Et=K,Ft=st,At=Tt)}return{origin:Ft,target:At}},ro=(b,j,A,K,st)=>{const Tt={x:null,y:null},Et={x:null,y:null},Ft=j.map(Rr);if(K>0){const At=te({x:0,y:0}),Bt=te({x:K,y:K}),Wt=te({x:st.width,y:st.height}),Kt=Bt.x-At.x,ni=no(Kt,At.x,Wt.x),me=no(Kt,At.y,Wt.y);Ft.push({x:ni,y:me})}return Ft.forEach(At=>{const{snapTranslation:Bt,snapLine:Wt}=((Kt,ni,me)=>{const le={x:null,y:null},ke={x:null,y:null},Ce=_r(Kt.x,ni.x,me);Ce.target!==null&&(le.x=Ce.target,ke.x=Ce.target-Ce.origin);const Ye=_r(Kt.y,ni.y,me);return Ye.target!==null&&(le.y=Ye.target,ke.y=Ye.target-Ye.origin),{snapTranslation:ke,snapLine:le}})(b,At,A);Bt.x!==null&&(Et.x===null||Math.abs(Bt.x)<Math.abs(Et.x))&&(Et.x=Bt.x||0,Tt.x=Wt.x),Bt.y!==null&&(Et.y===null||Math.abs(Bt.y)<Math.abs(Et.y))&&(Et.y=Bt.y||0,Tt.y=Wt.y)}),{snapTranslation:Et,snapLines:Tt}},Vr=(b,j)=>(j.x!==null&&(b.x+=j.x),j.y!==null&&(b.y+=j.y),b),Co=(b,j,A,K)=>{const{snapThreshold:st=0,gridSize:Tt=0,gridRect:Et,snapTargets:Ft=[]}=K||{};let At=null;if(lr(b)){if(st){const Kt=zn({...b},Jt),ni=br(es(j),A),me=br(is(j),A),le=Rr({...Kt,x1:ni.x,y1:ni.y,x2:me.x,y2:me.y}),{snapTranslation:ke,snapLines:Ce}=ro(le,Ft,st,Tt,Et);Vr(A,ke),Yr(Ce)}const Bt=br(es(j),A),Wt=br(is(j),A);At={x1:Bt.x,y1:Bt.y,x2:Wt.x,y2:Wt.y}}else if(b.points){if(bp(oe)&&Pn(oe,{selectedPoint:void 0}),st){const Bt=zn({...b},Jt),Wt=Rr({...Bt,points:j.points.map(me=>br(me,A))}),{snapTranslation:Kt,snapLines:ni}=ro(Wt,Ft,st,Tt,Et);Vr(A,Kt),Yr(ni)}At={points:j.points.map(Bt=>br(Bt,A))}}else if(Io(b)||ir(b)||nr(b)){if(st){const Bt=zn({...b},Jt),Wt=br(j,A),Kt=Rr({...Bt,...Wt}),{snapTranslation:ni,snapLines:me}=ro(Kt,Ft,st,Tt,Et);Vr(A,ni),Yr(me)}At=br(j,A)}At&&(Fo(b,At,Jt),Bn())},fo={0:1,1:0,2:3,3:2},Ir={0:3,1:2,2:1,3:0};let Er;const Ar=(b,j)=>{const A=b.points.filter((K,st)=>st!==j);Pn(b,{points:A,selectedPoint:void 0})},Nr=()=>{if(Ht.length)return Ht.find(uo)},Yn=()=>{if(Ht.length)return Ht.findIndex(uo)},Li=()=>{const b=Nr();if(b)return Nm(b),Bn(),b},jn=()=>{if(!Nr())return;const b=[...Ht];b.splice(Yn(),1),bt.set(b)},Bn=()=>{bt.set(Ht)},mn=(b,j=[],A=!0)=>{j.filter(Boolean).forEach(K=>delete b[K]),A&&Bn()},Pn=(b,j,A=!0)=>{b=Object.assign(b,j),A&&Bn()},Jn=(b,j,A,K=!0)=>{b[j]=A,K&&Bn()},Zo=(b,j=!0)=>{Ht.forEach(A=>Pn(A,b,!1)),j&&Bn()},ha=()=>[...Ht].reverse().filter(xa),yo=()=>[...Ht].reverse().find(xa),On=()=>!!yo(),Wn=(b,j=!0,A=!1)=>{const K=Ht.filter(Et=>yp(Et)&&ya(Et)),st=K.findIndex(Et=>Et===b);if(((Et,Ft=!1)=>{if(!rn(Et))return!1;bt.set(Ht.filter(At=>At!==Et)),Ft||Qt(Et)})(b,A)===!1)return;if(oo=b,K.length-1<=0)return _n();if(!j)return!0;const Tt=st-1<0?K.length-1:st-1;return Vn(K[Tt]),!0},Do=()=>{if(a){const j=[];return o.forEach((A,K)=>{yp(A)&&Wn(A,K===o.length-1,!0)&&j.push(A)}),void(j.length&&Gt())}const b=yo();b&&Wn(b)};let oo;const _n=(b={})=>{const{storePrevious:j=!0}=b;Object.keys(Ji).forEach(K=>Ji[K]={});const A=gr();j&&(oo=A),Zo({isSelected:!1,isEditing:!1,_prerender:!1}),A&&Te(A)},gr=()=>Ht.find(xa),Vn=(b,j=!0,A=!1)=>{if(uo(b))return;const K=gr()||oo,st=xa(b);oo=void 0,Me(K,b)&&(A||_n(),(Tt=>{Tt.isSelected=!0})(b),!st&&re(b),j&&Bn())},Qn=b=>{xn&&xn.confirm&&b.isEditing&&xn.confirm();const j={isSelected:!1,isEditing:!1,_prerender:!1};b.selectedPoint>-1&&(j.selectedPoint=void 0),Pn(b,j),Te(b)},Kr=b=>{Pn(b,{isSelected:!0,isEditing:!0,_prerender:we==="inline"})},bo=b=>{Pn(b,{isSelected:!0,isEditing:!1,_prerender:!1})},ao=b=>{if(!b.length)return[];const j=b.filter(rn);return bt.set(Ht.filter(A=>!j.includes(A))),j},O=b=>{const j=Vo(b.text,b);return En(b.x,b.y,b.width?Math.min(b.width,j.width):j.width,b.height?Math.min(b.height,j.height):j.height)},se=b=>{if(il(b))return xs(b);if(nr(b))return up(b);const j=O(b);return j.width=Math.max(10,b.width||j.width),j},pi=(b,j,A=0,K=()=>!0)=>[...b].reverse().filter(K).map(st=>({shape:st,priority:1})).filter(st=>{const{shape:Tt}=st,Et=zn(In(Tt),Jt),Ft=A+.5*(Et.strokeWidth||0);if(Io(Et))return pp(j,Ft,Et,Tt.rotation);if(ir(Et)){const At=se(Et),Bt=pp(j,Ft,At,Tt.rotation);let Wt=!1;if(Bt&&!xa(Tt)){const Kt=O(Et);Tt.textAlign!=="right"||Tt.flipX||(Kt.x=At.x+At.width-Kt.width),Tt.textAlign==="center"&&(Kt.x=At.x+.5*At.width-.5*Kt.width),Wt=pp(j,Ft,Kt,Tt.rotation,Ri(At)),Wt||(st.priority=-1)}return Bt}return nr(Et)?((At,Bt,Wt,Kt,ni,me)=>{const le=vu(at(Wt.x,Wt.y),Wt.rx,Wt.ry,Kt,ni,me,12);return qp(At,Bt,le)})(j,Ft,Et,Tt.rotation,Tt.flipX,Tt.flipY):lr(Et)?wu(j,Math.max(16,Ft),es(Et),is(Et)):Nn(Et)&&Et.pathClose?qp(j,Ft,Et.points):!!Nn(Et)&&(Et.points.length===1?Po(j,Et.points[0])<Ft*Ft:gy(j,Math.max(16,Ft),Et.points))}).sort((st,Tt)=>st.priority<Tt.priority?1:st.priority>Tt.priority?-1:0).map(st=>st.shape),ti=(b,j,A,K=0)=>{const st=Math.abs(K),Tt=As(j,A),Et=Th(Tt,st),Ft=(({start:At,end:Bt},Wt)=>{if(Wt===0)return[at(At.x,At.y),at(At.x,At.y),at(Bt.x,Bt.y),at(Bt.x,Bt.y)];const Kt=Math.atan2(Bt.y-At.y,Bt.x-At.x),ni=Math.sin(Kt)*Wt,me=Math.cos(Kt)*Wt;return[at(ni+At.x,-me+At.y),at(-ni+At.x,me+At.y),at(-ni+Bt.x,me+Bt.y),at(ni+Bt.x,-me+Bt.y)]})(Et,st);return b.filter(At=>{const Bt=zn(In(At),Jt);if(lr(Bt)||Nn(Bt)){const Wt=Bt.points?[...Bt.points]:[es(Bt),is(Bt)];return!!hy(Et,Wt)}return((Wt,Kt)=>!!Wt.find(ni=>Yp(ni,Kt))||!!Kt.find(ni=>Yp(ni,Wt)))(Ft,((Wt,Kt=12)=>{if(Io(Wt))return wr(Wt,Wt.rotation,Ri(Wt));if(ir(Wt)){const ni=se(Wt);return wr(ni,Wt.rotation,Ri(ni))}return nr(Wt)?vu(at(Wt.x,Wt.y),Wt.rx,Wt.ry,Wt.rotation,Wt.flipX,Wt.flipY,Kt):[]})(Bt))})};let he,de,Ti,oe,on,_i,Ii=!1,xr=!1,tr=!1,xo;const ma=b=>{xo=b.map(j=>({shape:j,shapeOrigin:In(j),shapeOriginComputed:zn(In(j),Jt)}))},Ma=()=>{clearTimeout(de),de=void 0,i(143,tr=!1),io()};let z=null;const ae=b=>{const j=ui(b.rotation)&&b.rotation!==0;if(Io(b)){if(b.width<1&&b.height<1)return;const A=Ri(b),K=Ro(b);return(b.flipX||b.flipY)&&Dl(K,b.flipX,b.flipY,A.x,A.y),j?al(K,b.rotation,A.x,A.y):K}if(nr(b)){if(b.rx<1&&b.ry<1)return;const A=b,K=Ro(up(b));return(b.flipX||b.flipY)&&Dl(K,b.flipX,b.flipY,A.x,A.y),j?al(K,b.rotation,A.x,A.y):K}if(lr(b))return[es(b),is(b)];if(Nn(b)){if(b.bitmap&&!b.pathClose){const A=rr(b.points);return A.x-=.5*b.strokeWidth,A.y-=.5*b.strokeWidth,A.width+=b.strokeWidth,A.height+=b.strokeWidth,ae({...b,...A})}return[...b.points]}if(ir(b)){if(b.width<5&&b.height<5)return;const A=se(b);A.width=Math.max(10,A.width);const K=Ri(A),st=Ro(A);return(b.flipX||b.flipY)&&Dl(st,b.flipX,b.flipY,K.x,K.y),j?al(st,b.rotation,K.x,K.y):st}return[]},Oe=b=>{const j=ae(b);let A,K;return b.flipY?(A=No([j[0],j[1]]),K=ho(at(j[1].x-j[2].x,j[1].y-j[2].y))):(A=No([j[2],j[3]]),K=ho(at(j[2].x-j[1].x,j[2].y-j[1].y))),Dr(K,20/Qe),{origin:A,dir:K}},wi=b=>j=>j.id===b,Ei=b=>{const j=wi(b);return A=>A.filter((K=>st=>!K(st))(j))},zi=b=>{const j=wi(b),A=Ei(b);return()=>Xe.update(K=>K.some(j)?A(K):K)},Ke=b=>{const j=Ei(b);return(...A)=>{Xe.update(K=>[...j(K),...A.filter(Boolean)])}},fi=zi("markup-hover"),Fi=Ke("markup-hover");let bi;const Hi="markup-manipulator-segment-"+Fe,Rn=zi(Hi),fn=Ke(Hi),vn=(b,j)=>{const A=b[j],K=j-1<0?b[b.length-1]:b[j-1],st=j+1<b.length?b[j+1]:b[0],Tt=Dn(We(K),A);ho(Tt);const Et=Fn(Dr(Tt,10),A),Ft=Dn(We(st),A);return ho(Ft),[Et,A,Fn(Dr(Ft,10),A)]},Ai=()=>{i(144,bi=void 0),fi()},vr="markup-multi-selection-segment-"+Fe,Xo=zi(vr),Bs=Ke(vr),Wa=(b,j)=>{if(Zn<=0)return b;if(j)return io(),b;const A=je(b),K=Go(),{snapTranslation:st,snapLines:Tt}=ro(Rr(A),K,Zn,Pr,n);return Yr(Tt),Vr(b,st),b},_a=di(0);L(t,_a,b=>i(187,Se=b));const Pa="markup-grid-line-"+Fe,Va=zi(Pa),ds=Ke(Pa),Na="markup-snap-line",$a=zi(Na),Ha=Ke(Na);let xn;const so=b=>{i(8,xn.innerHTML=jS(b),xn)},lo=b=>{const j=b.value===void 0?b.innerHTML:b.value,A=r.format==="text"?nb(j).split(/<br>|<br\/>/g).join(`
`).replace(/&nbsp;/g," ").replace(/&amp;/g,"&"):j;return Cu(r)&&r.disableNewline!==!1?(K=>{const st=K.split(/[\n\r]/g);return st.length>1?st.map(Tt=>Tt.trim()).filter(Tt=>Tt.length).join(" "):st[0]})(A):A},Lr=()=>{const b=lo(xn),j=Rl(r,b),A=j===!0?b:j;let K=mt.x,st=mt.y;if(!r.height){const Tt=wr({...gt},r.rotation),Et=Vo(A,u),Ft=wr({x:K,y:st,...Et},r.rotation),[At,,Bt]=Tt,[Wt,,Kt]=Ft;let ni=At,me=Wt;r.flipX&&(ni=Bt,me=Kt);const le=Dn(We(ni),me);K+=le.x,st+=le.y}Pn(r,{x:_e(ot.x)?jr(K,Jt.width):K,y:_e(ot.y)?jr(st,Jt.height):st,text:A})},Ki=()=>{c&&Li(),xn&&xn.confirm&&xn.confirm(),Lr(),bo(r),Dt(r)},To=()=>{c?jn():(Pn(r,{text:ot.text,x:ot.x,y:ot.y}),bo(r))},Ra=(b,j,{flipX:A,flipY:K,rotation:st},Tt="top left")=>{let Et,Ft;const[At,Bt,Wt,Kt]=wr(b,st),[ni,me,le,ke]=wr(j,st);return Tt==="top center"?(Et=No(K?[Kt,Wt]:[At,Bt]),Ft=No(K?[ke,le]:[ni,me])):Tt==="top right"&&!A||Tt==="top left"&&A?(Et=K?Wt:Bt,Ft=K?le:me):(Et=K?Kt:At,Ft=K?ke:ni),Dn(We(Et),Ft)},Jr=(b,j,A)=>at(_e(b.x)?jr(j.x+A.x,Jt.width):j.x+A.x,_e(b.y)?jr(j.y+A.y,Jt.height):j.y+A.y),Ji={},Kc=()=>Ar(r,r.selectedPoint),us=()=>Kr(r),Yl=()=>{const b=rs(Vo(r.text,u),At=>Math.ceil(At)),j=Ae(r,"height"),A=!j&&Ae(r,"width"),K=r.id;let st=Ji[K];st||(Ji[K]={},st=Ji[K]);const Tt=At=>{const{width:Bt,...Wt}=u,Kt=Vo(r.text,Wt),ni=Ra(En(u.x,u.y,At.width,At.height),En(u.x,u.y,Kt.width,Kt.height),u,"top "+r.textAlign),me=u.disableNewline!==!1;mn(r,["width","height",me&&"textAlign"]),Pn(r,{...Jr(r,u,ni)})},Et=At=>{const Bt=Un(st.width||u.width||b.width,b.height),Wt=st.textAlign||"left",Kt=Ra(En(u.x,u.y,At.width,At.height),En(u.x,u.y,Bt.width,Bt.height),u,"top "+Wt);mn(r,["height"]),Pn(r,{...Jr(r,u,Kt),width:_e(r.width)?jr(Bt.width,Jt.width):Bt.width,textAlign:Wt})},Ft=At=>{const Bt=Un(st.width||b.width,st.height||b.height),Wt=st.textAlign||"left",Kt=Ra(En(u.x,u.y,At.width,At.height),En(u.x,u.y,Bt.width,Bt.height),u,"top "+Wt);Pn(r,{...Jr(r,u,Kt),width:_e(r.width)?jr(Bt.width,Jt.width):Bt.width,height:_e(r.width)?jr(Bt.height,Jt.height):Bt.height,textAlign:Wt})};if(j){st.textAlign=r.textAlign,st.width=u.width,st.height=u.height;const At=Un(u.width,u.height);Ks(r,"auto-height")?Et(At):Ks(r,"auto-width")&&Tt(At)}else if(A){st.textAlign=r.textAlign,st.width=u.width;const At=Un(u.width,b.height);Ks(r,"auto-width")?Tt(At):Ks(r,"fixed-size")&&Ft(At)}else{st.textAlign=r.textAlign;const At=Un(Math.ceil(b.width),Math.ceil(b.height));Ks(r,"fixed-size")?Ft(At):Ks(r,"auto-height")&&Et(At)}},ps=b=>{b.stopPropagation();const j=r.flipX||!1;Jn(r,"flipX",!j),Dt(r)},Os=b=>{b.stopPropagation();const j=r.flipY||!1;Jn(r,"flipY",!j),Dt(r)},Mo=b=>{Jn(r,"opacity",b)},pl=b=>{Mo(b),Dt(r)},ql=b=>{b.stopPropagation(),b.target.blur(),Do()},Jc=b=>{b.stopPropagation(),Ht.findIndex(j=>j===r)!==Ht.length-1&&(bt.set(Ht.filter(j=>j!==r).concat([r])),Dt(r))},hl=b=>{b.stopPropagation(),Kl()},Kl=()=>{const b=(a?o:[r]).filter(Hm).map(j=>{const A=In(j);A.id=aa();const K=at(50,-50);if(Ae(A,"points")){const st=Bl(A,["points"],Jt);st.points.forEach(Tt=>{Tt.x+=K.x,Tt.y+=K.y}),wa(A,st,Jt)}else if(lr(A)){const st=Bl(A,["x1","y1","x2","y2"],Jt);st.x1+=K.x,st.y1+=K.y,st.x2+=K.x,st.y2+=K.y,wa(A,st,Jt)}else{const st=Bl(A,["x","y"],Jt);st.x+=50,st.y-=50,wa(A,st,Jt)}return bt.set([...Ht,A]),lt(A),A});if(b.length>1)return _n(),void b.forEach(j=>{Vn(j,!0,!0)});Vn(b[0])},ml=di(0,{stiffness:.2,damping:.7});L(t,ml,b=>i(18,ze=b));let hs;const ja=(b,j)=>{const{disableTextLayout:A=[]}=j;return"height"in j?A.includes("auto-height")?b.shapeIconButtonTextLayoutAutoWidth:b.shapeIconButtonTextLayoutAutoHeight:"width"in j?A.includes("auto-width")?b.shapeIconButtonTextLayoutFixedSize:b.shapeIconButtonTextLayoutAutoWidth:A.includes("fixed-size")?b.shapeIconButtonTextLayoutAutoHeight:b.shapeIconButtonTextLayoutFixedSize},Jl=(b,j)=>{const{disableTextLayout:A=[]}=j;return"height"in j?A.includes("auto-height")?b.shapeTitleButtonTextLayoutAutoWidth:b.shapeTitleButtonTextLayoutAutoHeight:"width"in j?A.includes("auto-width")?b.shapeTitleButtonTextLayoutFixedSize:b.shapeTitleButtonTextLayoutAutoWidth:A.includes("fixed-size")?b.shapeTitleButtonTextLayoutAutoHeight:b.shapeTitleButtonTextLayoutFixedSize};let Ws=!1,$l=an(),Ua;const gl=b=>{jt(b),i(144,bi=b)};let Ga;return Uo(()=>{$a(),Va(),Rn(),fi()}),t.$$set=b=>{"uid"in b&&i(58,Fe=b.uid),"ui"in b&&i(59,Xe=b.ui),"disabled"in b&&i(0,yi=b.disabled),"shapes"in b&&Be(i(1,bt=b.shapes)),"selection"in b&&i(60,be=b.selection),"offset"in b&&i(2,Ue=b.offset),"contextRotation"in b&&i(61,Le=b.contextRotation),"contextFlipX"in b&&i(62,Ve=b.contextFlipX),"contextFlipY"in b&&i(63,Ge=b.contextFlipY),"contextZoom"in b&&i(64,Qe=b.contextZoom),"active"in b&&i(65,vi=b.active),"opacity"in b&&i(66,Si=b.opacity),"parentRect"in b&&i(67,Jt=b.parentRect),"rootRect"in b&&i(3,Ci=b.rootRect),"utilRect"in b&&i(68,X=b.utilRect),"hoverColor"in b&&i(69,Vt=b.hoverColor),"caretColor"in b&&i(70,H=b.caretColor),"gridColor"in b&&i(71,ie=b.gridColor),"snapColor"in b&&i(72,pe=b.snapColor),"textInputMode"in b&&i(4,we=b.textInputMode),"oninteractionstart"in b&&i(73,ye=b.oninteractionstart),"oninteractionupdate"in b&&i(74,ee=b.oninteractionupdate),"oninteractionrelease"in b&&i(75,qt=b.oninteractionrelease),"oninteractionend"in b&&i(76,ei=b.oninteractionend),"oninteractioncancel"in b&&i(77,Ze=b.oninteractioncancel),"onaddshape"in b&&i(78,lt=b.onaddshape),"onupdateshape"in b&&i(79,Dt=b.onupdateshape),"onselectshape"in b&&i(80,re=b.onselectshape),"onblurshape"in b&&i(81,Te=b.onblurshape),"onremoveshape"in b&&i(82,Qt=b.onremoveshape),"ontapshape"in b&&i(83,et=b.ontapshape),"onhovershape"in b&&i(84,jt=b.onhovershape),"ontriggerhistorywrite"in b&&i(85,Gt=b.ontriggerhistorywrite),"onhovercanvas"in b&&i(86,ce=b.onhovercanvas),"ontapcanvas"in b&&i(87,Ne=b.ontapcanvas),"onleavecanvas"in b&&i(88,He=b.onleavecanvas),"beforeSelectShape"in b&&i(89,Me=b.beforeSelectShape),"beforeDeselectShape"in b&&i(90,gn=b.beforeDeselectShape),"beforeRemoveShape"in b&&i(91,rn=b.beforeRemoveShape),"beforeUpdateShape"in b&&i(92,ve=b.beforeUpdateShape),"willRenderShapeControls"in b&&i(93,ii=b.willRenderShapeControls),"willRenderShapeTextControls"in b&&i(94,Pe=b.willRenderShapeTextControls),"willStartInteraction"in b&&i(95,ci=b.willStartInteraction),"mapEditorPointToImagePoint"in b&&i(96,je=b.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in b&&i(97,te=b.mapImagePointToEditorPoint),"eraseRadius"in b&&i(98,De=b.eraseRadius),"selectRadius"in b&&i(99,ki=b.selectRadius),"enableButtonFlipVertical"in b&&i(100,bn=b.enableButtonFlipVertical),"enableTapToAddText"in b&&i(101,Mn=b.enableTapToAddText),"enableMultiSelect"in b&&i(102,Hn=b.enableMultiSelect),"enableTextStyleControls"in b&&i(5,Gn=b.enableTextStyleControls),"locale"in b&&i(6,Ui=b.locale),"snapThreshold"in b&&i(103,Zn=b.snapThreshold),"snapPointer"in b&&i(104,yr=b.snapPointer),"enableSnapToContext"in b&&i(105,$r=b.enableSnapToContext),"gridSize"in b&&i(106,Pr=b.gridSize)},t.$$.update=()=>{var b,j;if(32&t.$$.dirty[2]|8192&t.$$.dirty[3]&&i(172,n=Pr>0?{x:0,y:0,...Jt}:void 0),1&t.$$.dirty[0]|536870912&t.$$.dirty[5]&&i(148,r=!yi&&Ht&&(Nr()||yo())),512&t.$$.dirty[3]|536870912&t.$$.dirty[5]&&i(164,o=Hn?Ht.filter(xa):[]),512&t.$$.dirty[5]&&i(163,a=o.length>1),32&t.$$.dirty[2]|768&t.$$.dirty[5]&&i(183,s=a?o.map(A=>zn(In(A),Jt)):[]),16777216&t.$$.dirty[4]&&i(180,l=!!r),16777216&t.$$.dirty[4]&&i(166,c=r&&uo(r)),16777216&t.$$.dirty[4]|2048&t.$$.dirty[5]&&i(10,d=r&&!c?r.id:void 0),8&t.$$.dirty[0]|32&t.$$.dirty[2]|16777216&t.$$.dirty[4]&&i(13,u=Ci&&r&&zn(In(r),Jt)),16777216&t.$$.dirty[4]|2048&t.$$.dirty[5]&&i(146,p=!(!r||!c)),8192&t.$$.dirty[0]|16&t.$$.dirty[2]|16777216&t.$$.dirty[4]&&i(179,h=r&&Si&&ae(u)||[]),268435712&t.$$.dirty[5]&&i(176,g=a?s.map(ae):[]),16777216&t.$$.dirty[4]|256&t.$$.dirty[5]&&i(182,m=!a&&r&&Qp(b=r)&&ol(b)&&b.disableResize!==!0&&(il(b)||hu(b)||nr(b)||lr(b)||Nn(b)&&Ae(b,"pathClose"))&&!ts(r)),16777216&t.$$.dirty[4]|256&t.$$.dirty[5]&&i(14,f=!a&&r&&(A=>Qp(A)&&A.disableRotate!==!0&&(il(A)||Ae(A,"text")||nr(A)))(r)&&!ts(r)),16777216&t.$$.dirty[4]|134217728&t.$$.dirty[5]&&i(17,x=m&&Ae(r,"text")&&!r.height?[[1,2],[3,0]]:(!r||!lr(r)&&!Nn(r))&&m),131072&t.$$.dirty[0]|16777216&t.$$.dirty[4]|134217728&t.$$.dirty[5]&&i(29,w=!!r&&!Array.isArray(x)&&m),768&t.$$.dirty[5]&&i(181,S=a?(A=>{const K=A.map(Tt=>ae(zn(Tt,Jt))).flat(),st=rr(K);return Ro(st)})(o):[]),16777216&t.$$.dirty[4]|16777472&t.$$.dirty[5]&&i(15,C=r&&h.length>1||a),16&t.$$.dirty[3]|83886336&t.$$.dirty[5]&&i(177,I=a?S.map(te):h.map(te)),4&t.$$.dirty[0]|4194304&t.$$.dirty[5]&&i(12,E=I.map(A=>at(A.x-Ue.x,A.y-Ue.y))),16777216&t.$$.dirty[4]&&i(16,B=r&&r.points&&ui(r.selectedPoint)?r.selectedPoint:-1),65536&t.$$.dirty[0]&&i(156,T=B>=0),69632&t.$$.dirty[0]|2&t.$$.dirty[5]&&i(161,D=T?E[B]:void 0),16777216&t.$$.dirty[4]|33554432&t.$$.dirty[5]&&i(28,U=l&&(hu(r)?!Ae(r,"disableNewline")||!r.disableNewline:r.disableNewline===!1)),16&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&(bi&&te&&!xa(bi)&&ya(bi)?(A=>{const K=ae(zn(In(A),Jt));if(!K)return;const st=K.map(te),Tt=!!A.pathClose||!(!A.bitmap&&(Nn(A)||lr(A))),Et=A.selectionStyle==="hook",Ft=Et?st.map((Bt,Wt,Kt)=>({id:"markup-hover",points:vn(Kt,Wt),strokeColor:[0,0,0,.1],strokeWidth:2})):[{id:"markup-hover",points:st.map(Bt=>at(Bt.x+1,Bt.y+1)),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:Tt}],At=Et?st.map((Bt,Wt,Kt)=>({id:"markup-hover",points:vn(Kt,Wt),strokeColor:Vt,strokeWidth:2})):[{id:"markup-hover",points:st,strokeColor:Vt,strokeWidth:2,pathClose:Tt}];Fi(...Ft,...At)})(bi):fi()),61440&t.$$.dirty[0]|16&t.$$.dirty[2]&&i(178,P=C&&f&&Si&&E?(A=>{const K=Oe(A),st=te({x:K.origin.x+K.dir.x,y:K.origin.y+K.dir.y});return{origin:te(K.origin),position:st}})(u):void 0),4&t.$$.dirty[0]|8388608&t.$$.dirty[5]&&i(27,y=P&&at(P.position.x-Ue.x,P.position.y-Ue.y)),1&t.$$.dirty[6]&&i(171,N=!!(Re||[]).find(A=>[91,93,17].includes(A))),2048&t.$$.dirty[3]|65536&t.$$.dirty[5]&&i(173,V=!(N||!yr)),16&t.$$.dirty[2]|18874368&t.$$.dirty[4]|4458496&t.$$.dirty[5]&&r&&I&&Si>0&&(r===bi&&Ai(),((A,K,st)=>{if(!ya(K))return;const Tt=Nn(K),Et=Tt&&Ae(K,"pathClose"),Ft=Et&&(dn=>dn.strokeWidth&&((Hr,zr)=>{const co=Hr.strokeColor;return!!co&&(co.length===3||co[3]>0)})(dn))(K),At=uo(K),Bt=ts(K),Wt=K.selectionStyle==="hook",Kt=K.disableShowPoints!==!0,{selectionOpacity:ni=1}=K;if(At&&Tt&&!Et)return;const me=[],le=[...I],ke=le[le.length-1],Ce=le[0],Ye=(Bt?.05:.1)*A*ni,ri=Ye>0,Mi=(Bt?.5:1)*A*ni,hi=Mi>0,Di=[0,0,0],hn=[1,1,1],Ni=Bt?1:1.5;Re.includes(16)&&ke&&st&&Or(ke,st);const Oi=(le.length&&Et&&At&&st?Po(Ce,st):1/0)<=256,wn=(le.length&&Et&&At&&st?Po(ke,st):1/0)<=256;!Oi&&st&&le.push(st);const nn=le.length>1,qn=!!K.pathClose||!(!K.bitmap&&(Nn(K)||lr(K)))||le.length>2&&Oi;nn&&ri&&(Wt?me.push(...le.map((dn,Hr,zr)=>({id:Hi,points:vn(zr,Hr),strokeColor:Di,opacity:Ye}))):me.push({id:Hi,points:le.map(dn=>at(dn.x+1,dn.y+1)),pathClose:qn,strokeColor:Di,strokeWidth:2,opacity:Ye})),Et&&ri&&Kt&&me.push(...le.map(dn=>({id:Hi,...dn,rx:2*Ni,ry:2*Ni,backgroundColor:Di,opacity:Ye}))),P&&ri&&me.push({id:Hi,points:[at(P.origin.x+1,P.origin.y+1),at(P.position.x+1,P.position.y+1)],strokeColor:Di,strokeWidth:2,opacity:Ye}),nn&&hi&&(Wt?me.push(...le.map((dn,Hr,zr)=>({id:Hi,points:vn(zr,Hr),strokeColor:hn,strokeWidth:Ni,opacity:Mi}))):me.push({id:Hi,points:le,pathClose:qn,strokeColor:hn,strokeWidth:Ni,backgroundColor:At&&Et&&K.backgroundColor&&K.backgroundColor[3]>0?K.backgroundColor:[0,0,0,0],opacity:Mi})),Et&&Kt&&me.push(...le.map(dn=>({id:Hi,...dn,rx:3*Ni,ry:3*Ni,backgroundColor:[.5,.5,.5],strokeWidth:Ni,strokeColor:hn}))),Et&&At&&Kt&&I.length>=3&&me.push({...Ce,id:Hi,rx:Ni*(Oi?5:4),ry:Ni*(Oi?5:4),backgroundColor:Oi?Vt:[.5,.5,.5],strokeWidth:Ni,strokeColor:hn}),Et&&At&&Ft&&Kt&&!Oi&&h.length>=2&&me.push({...ke,id:Hi,rx:Ni*(wn?5:4),ry:Ni*(wn?5:4),backgroundColor:wn?Vt:[.5,.5,.5],strokeWidth:Ni,strokeColor:hn}),P&&hi&&!Wt&&me.push({id:Hi,points:[{x:P.origin.x,y:P.origin.y},{x:P.position.x,y:P.position.y}],strokeColor:hn,strokeWidth:Ni,opacity:Mi}),fn(...me)})(Si,r,c&&Nn(r)?Wa({...Ua},!V):void 0)),16777216&t.$$.dirty[4]&&(r||(Ai(),Rn())),16&t.$$.dirty[3]|2097152&t.$$.dirty[5])if(g.length){Xo();const A=g.map(K=>({id:vr,points:K.map(te),strokeWidth:1,strokeColor:[1,1,1,.5],pathClose:!0}));Bs(...A)}else Xo();1048576&t.$$.dirty[4]&&i(174,nt=!!bi),262144&t.$$.dirty[4]&&i(175,k=!!oe),2097152&t.$$.dirty[4]|1835008&t.$$.dirty[5]&&(!Ua||k||nt||Wa({...Ua},!V)),512&t.$$.dirty[2]|8208&t.$$.dirty[3]|131072&t.$$.dirty[5]|2&t.$$.dirty[6]&&Pr>0&&n&&te&&((A,K,st,Tt)=>{const Et=te({x:0,y:0}),Ft=te({x:A,y:A}),At=te({x:K.width,y:K.height}),Bt=Ft.x-Et.x;if(_a.set(Bt>6?1:0),Tt<=0)return Va();const Wt=no(Bt,Et.x,At.x).map(ni=>({id:Pa,opacity:Tt,points:[{x:ni,y:Et.y},{x:ni,y:At.y}],strokeWidth:1,strokeColor:st})),Kt=no(Bt,Et.y,At.y).map(ni=>({id:Pa,opacity:Tt,points:[{x:Et.x,y:ni},{x:At.x,y:ni}],strokeWidth:1,strokeColor:st}));ds(...Kt,...Wt)})(Pr,n,ie,Se),1024&t.$$.dirty[2]|16&t.$$.dirty[3]|196608&t.$$.dirty[4]|65536&t.$$.dirty[5]&&te&&(N?$a():((A,K,st)=>{if(A===null&&K===null)return $a();let Tt,Et;A!==null&&(Tt={id:Na,strokeColor:st,strokeWidth:1.5,points:[te({x:A,y:0}),te({x:A,y:Jt.height})]}),K!==null&&(Et={id:Na,strokeColor:st,strokeWidth:1.5,points:[te({x:0,y:K}),te({x:Jt.width,y:K})]}),Ha(Tt,Et)})(Wr,qr,pe)),8&t.$$.dirty[2]&&(A=>{if(!A)return Zo({_prerender:!1});const K=Ht.find(st=>st.isEditing);K&&Pn(K,{_prerender:we==="inline"})})(vi),1&t.$$.dirty[6]&&Re&&Re.length&&(()=>{const[A]=Re;A!==8&&A!==46||On()&&(r.isEditing||(Nn(r)&&ui(r.selectedPoint)?setTimeout(()=>Ar(r,r.selectedPoint),0):setTimeout(()=>Do(),0)))})(),272&t.$$.dirty[0]&&xn&&we==="inline"&&xn.focus(),16777216&t.$$.dirty[4]&&i(170,tt=r&&ir(r)),16777216&t.$$.dirty[4]|32768&t.$$.dirty[5]&&i(11,ct=tt&&Rl(r)!==!1&&ts(r)),2048&t.$$.dirty[0]&&i(165,ot=ct?{...r}:void 0),32&t.$$.dirty[2]|1024&t.$$.dirty[5]&&i(167,mt=ot&&zn({...ot},Jt)),4096&t.$$.dirty[5]&&i(169,Z=mt&&Vo(mt.text,mt)),20480&t.$$.dirty[5]&&(gt=mt&&En(mt.x,mt.y,Z.width,Z.height)),2048&t.$$.dirty[0]|16777216&t.$$.dirty[4]&&i(24,xt=ct?r.text:""),2056&t.$$.dirty[0]|32&t.$$.dirty[2]|16777216&t.$$.dirty[4]&&i(168,dt=Ci&&r&&ct&&zn({...In(r),width:ui(r.width)?Math.floor(r.width):void 0,height:ui(r.height)?Math.floor(r.height):void 0},Jt)),2064&t.$$.dirty[0]|8192&t.$$.dirty[5]&&i(26,wt=ct&&((A,K)=>{const{textAlign:st="left",fontFamily:Tt="sans-serif",fontWeight:Et="normal",fontStyle:Ft="normal",letterSpacing:At="normal",textShadowX:Bt=0,textShadowY:Wt=0,textShadowBlur:Kt=0,textShadowColor:ni,textOutlineWidth:me=0,textOutlineColor:le}=A,ke="!important",Ce=`caret-color:${q};text-align:${st}${ke};font-family:${Tt}${ke};font-weight:${Et}${ke};font-style:${Ft}${ke};letter-spacing:${ui(At)?At+"px":"normal"}${ke}`;if(K==="modal")return Ce;const Ye=me?`;-webkit-text-stroke:${2*me}px ${Sr(le)} ${ke}`:"",ri=Kt||Bt||Wt?`;text-shadow:${Bt}px ${Wt}px ${Kt}px ${Sr(ni)} ${ke}`:"";let Mi=A.fontSize,hi=1,Di="";Mi>1e3&&ka()&&(hi=Mi/1e3,Di=`transform-origin:0 0;transform:scale(${hi})`,Mi=1e3);let hn=A.lineHeight/hi;const Ni=Sr(A.color),Oi=.5*Math.max(0,Mi-hn);return`--font-scalar:${hi};--bottom-inset:${Oi}px;padding:${Oi}px 0 0${ke};color:${Ni}${ke};font-size:${Mi}px${ke};line-height:${hn}px${ke};${Ce};${Di}${Ye}${ri}`})(dt,we)),2052&t.$$.dirty[0]|1073741824&t.$$.dirty[1]|4&t.$$.dirty[2]|8192&t.$$.dirty[5]&&i(25,J=ct&&((A,K,st,Tt)=>{let Et,Ft;A.width&&A.height?(Et=Ri(A),Ft=Ba(A)):(Ft=Vo(r.text,u),Ft.width=u.width||Ft.width,Et=at(A.x+.5*Ft.width,A.y+.5*Ft.height));const At=Math.max(0,A.fontSize-A.lineHeight)+A.lineHeight,Bt=te(Et);let Wt=Bt.x-K.x-.5*Ft.width,Kt=Bt.y-K.y-.5*Ft.height,ni=A.flipX,me=A.flipY,le=A.rotation;Ve&&Ge?(ni=!ni,me=!me):Ve?(ni=!ni,le=-le):Ge&&(me=!me,le=-le),le+=Tt;const ke=st*(ni?-1:1),Ce=st*(me?-1:1);return`--line-height:${At}px;width:${Ft.width}px;height:${Ft.height}px;transform:translate(${Wt}px,${Kt}px) rotate(${le}rad) scale(${ke}, ${Ce})`})(dt,Ue,Qe,Le)),256&t.$$.dirty[2]&&(q=H?Sr(H):"auto"),2320&t.$$.dirty[0]&&ct&&xn&&we==="inline"&&so(xt),289406976&t.$$.dirty[4]&&i(152,ft=r&&!p?r:ft),268435456&t.$$.dirty[4]&&i(154,Lt=ft&&Ox(ft)),268435456&t.$$.dirty[4]&&i(149,_=ft&&Ks(ft)),268435456&t.$$.dirty[4]&&i(151,rt=ft&&Hm(ft)),268435456&t.$$.dirty[4]&&i(150,zt=ft&&yp(ft)),268435456&t.$$.dirty[4]|256&t.$$.dirty[5]&&i(153,Zt=!a&&ft&&(A=>A.disableReorder!==!0)(ft)),268435456&t.$$.dirty[4]&&i(147,Ot=ft&&Rl(ft)!==!1),268435456&t.$$.dirty[4]&&i(155,Yt=ft&&Ae(ft,"backgroundImage")&&Jp(ft,"opacity")),16777216&t.$$.dirty[4]&&i(158,Ut=r&&r.format==="html"),20971520&t.$$.dirty[4]|8&t.$$.dirty[5]&&i(162,ht=r&&(!p||Ut)),524288&t.$$.dirty[4]|1073741952&t.$$.dirty[5]&&ml.set(ht&&!tr?1:0,{hard:W===!1}),4096&t.$$.dirty[0]|160&t.$$.dirty[5]&&i(160,G=ht&&E.length?(j=rr(E),Eo(at(j.x+.5*j.width,j.y),Hc)):G),512&t.$$.dirty[0]|64&t.$$.dirty[2]|96&t.$$.dirty[5]&&i(159,kt=(D||G)&&hs&&X&&((A,K,st,Tt)=>{const Et=A.x,Ft=A.y,At=Et+A.width;let Bt=Math.max(K.x-.5*st.width,Et),Wt=Math.max(K.y-st.height+Tt,Ft);return Bt+st.width>At&&(Bt=At-st.width),at(Bt,Wt)})(X,D||G,hs,-16)),262144&t.$$.dirty[0]|16&t.$$.dirty[5]&&i(23,ne=kt&&`transform: translate(${kt.x}px, ${kt.y}px);opacity:${ze}`),2048&t.$$.dirty[0]&&i(157,ue=ct?"text":"shape"),1088&t.$$.dirty[0]|131&t.$$.dirty[3]|2139095040&t.$$.dirty[4]|536870927&t.$$.dirty[5]&&i(22,Nt=ue==="text"&&Pe&&Ut?Uc(()=>Pe([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map(([A,K])=>["Button","style-"+A,{onclick:()=>document.execCommand(A),...K,style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+K.style}])]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400;",label:'<span style="font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline;">T</span><span style="position:relative;top:.175rem;">&times;</span>',title:"Remove styles"}]]]],d)):ue==="shape"&&ii&&d?Uc(()=>ii(T?[["div","epsilon",{class:"PinturaShapeControlsGroup"},[["Button","remove-point",{onclick:Kc,label:Ui.shapeTitleButtonRemove,icon:Ui.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]]]]:[Yt&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:pl,onchange:Mo,step:.01,value:Ae(r,"opacity")?r.opacity:1,label:(A,K,st)=>Math.round(A/st*100)+"%",min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[Lt&&["Button","flip-horizontal",{onclick:ps,label:Ui.shapeTitleButtonFlipHorizontal,icon:Ui.shapeIconButtonFlipHorizontal,hideLabel:!0}],Lt&&bn&&["Button","flip-vertical",{onclick:Os,label:Ui.shapeTitleButtonFlipVertical,icon:Ui.shapeIconButtonFlipVertical,hideLabel:!0}],Zt&&["Button","to-front",{onclick:Jc,label:Ui.shapeTitleButtonMoveToFront,icon:Ui.shapeIconButtonMoveToFront,hideLabel:!0,disabled:Ht[Ht.length-1]===ft}],rt&&["Button","duplicate",{onclick:hl,label:Ui.shapeTitleButtonDuplicate,icon:Ui.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],zt&&["Button","remove",{onclick:ql,label:Ui.shapeTitleButtonRemove,icon:Ui.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],Ot&&_&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:Yl,label:dr(Jl,Ui,r),icon:dr(ja,Ui,r),hideLabel:!0}]]],Ot&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:Ui.shapeLabelInputText,onclick:us}]]]].filter(Boolean),d)):[]),64&t.$$.dirty[0]|536870912&t.$$.dirty[5]&&i(21,xe=Ht.filter(ya).filter(A=>A.id).filter(A=>!uo(A)).map(A=>({id:A.id,color:ir(A)?A.color:lr(A)?A.strokeColor:A.backgroundColor,name:A.name||Ui["shapeLabelTool"+o2(Nx(A))]})))},[yi,bt,Ue,Ci,we,Gn,Ui,Vn,xn,hs,d,ct,E,u,f,C,B,x,ze,Ws,Ga,xe,Nt,ne,xt,J,wt,y,U,w,$o,Xn,b=>{const{origin:j}=b.detail,A=Hn&&Re.includes(16);xo=void 0,i(142,oe=void 0),on=void 0,_i=void 0,Ii=!1,Ti=void 0,xr=!1,io(),clearTimeout(de),de=setTimeout(()=>i(143,tr=!0),250);const K=Nr();if(!K||Nn(K)&&Ae(K,"pathClose")||Li(),he=je(We(j)),K&&Nn(K)&&Ae(K,"pathClose"))return ye(b);const st=pi(Ht,he,ki,Et=>ya(Et)),Tt=st.length&&st.shift();if(r&&ts(r)&&(Ki(),Mn&&(xr=!0)),!Tt&&r&&ts(r)&&Qn(r),!!ci(j)){if(Tt&&xa(Tt))return Ii=!0,i(142,oe=Tt),a?(A&&Qn(Tt),void ma(o)):(on=In(oe),void(_i=zn(In(oe),Jt)));if(Ti=Tt||void 0,!ye(b)&&Tt){if(Vn(Tt,!0,A),i(142,oe=Tt),a)return ma(o);on=In(oe),_i=zn(In(oe),Jt)}}},b=>{Ma(),Ze(b)},b=>{const{translation:j,ctrlKey:A,metaKey:K,shiftKey:st,position:Tt}=b.detail;if(oe){if(!ol(oe)||ts(oe))return;if(st){let Ft=Math.abs(j.x),At=Math.abs(j.y);z==="x"&&(At-=64),z==="y"&&(Ft-=64),Ft>At?(j.y=0,z="x"):At>Ft&&(j.x=0,z="y")}else z=null;const Et=A||K;return xo?o.every(ol)?void xo.forEach(({shape:Ft,shapeOriginComputed:At})=>{Co(Ft,At,j,{...ln(0,Pr,n,Ft)})}):void 0:Co(oe,_i,j,{...ln(Et?0:Zn,Pr,n,oe)})}ee(b)},b=>{if(Ma(),oe){if(a)return;if(ts(oe)&&To(),b.detail.isTap&&Nn(oe)&&Ay(oe)){const{position:j}=b.detail,A=je(We(j));return void((K,st)=>{const Tt=K.points,Et=[];for(let Wt=0;Wt<Tt.length-1;Wt++)Et.push([Tt[Wt],Tt[Wt+1]]);Et.push([Tt[Tt.length-1],Tt[0]]);const Ft=Et.findIndex(([Wt,Kt])=>wu(st,6,Wt,Kt));let At;const Bt=[];for(let Wt=0;Wt<Et.length;Wt++)Bt.push(Et[Wt][0]),Wt===Ft&&(At=Wt+1,Bt.push(st));Pn(K,{points:Bt,selectedPoint:At})})(oe,A)}b.detail.isTap&&Ii&&ir(oe)&&Rl(oe)!==!1&&Kr(oe)}else qt(b)},b=>{const j=Ti&&b.detail.isTap,A=Hn&&Re.includes(16);if(b.detail.isTap&&setTimeout(()=>{Ne({target:oe||Ti,position:he},0)}),oe)return et(oe),K=oe,st=on,JSON.stringify(K)!==JSON.stringify(st)&&Dt(oe),void i(142,oe=void 0);var K,st;let Tt=!0;if(!A){const Et=gr();Tt=!Et||gn(Et,Ti||void 0),Tt&&_n({storePrevious:!1})}ei(b),Tt&&j&&Vn(Ti,!0,A)},_a,b=>{i(143,tr=!0),i(142,oe=r),_i=u},b=>{if(!oe)return void i(143,tr=!1);const{translation:j,indexes:A,shiftKey:K,ctrlKey:st,metaKey:Tt,isNudge:Et}=b.detail;((Ft,At,Bt,Wt,Kt)=>{const{shiftKey:ni,snapThreshold:me=0,gridSize:le=0,gridRect:ke,snapTargets:Ce=[]}=Kt||{},Ye=me?(ri,Mi,hi)=>{const{snapTranslation:Di,snapLines:hn}=ro(Rr(ri),Ce,me,le,ke);Vr(Mi,Di),Yr(hn);const Ni=br(hi(),Mi);ri.x=Ni.x,ri.y=Ni.y}:fe;if(lr(Ft)||Nn(Ft)&&Ae(Ft,"pathClose")){const[ri]=Bt,Mi=ni?Or:(Oi,wn)=>wn;let hi,Di,hn;if(lr(Ft))ri===0?(hi=()=>es(At),Di=Oi=>Mi(is(At),Oi),hn=(Oi,wn)=>{Oi.x1=wn.x,Oi.y1=wn.y}):ri===1&&(hi=()=>is(At),Di=Oi=>Mi(es(At),Oi),hn=(Oi,wn)=>{Oi.x2=wn.x,Oi.y2=wn.y});else{const Oi=At.points;hi=()=>({...Oi[ri]}),Di=wn=>{const nn=Oi[Eu(ri-1,Oi)],qn=Oi[Eu(ri+1,Oi)];Mi(nn,wn),Mi(qn,wn)},hn=(wn,nn)=>wn.points=wn.points.map((qn,dn)=>ri===dn?nn:qn)}const Ni=br(hi(),Wt);Ye(Ni,Wt,hi),Di(Ni),hn(Ft,Ni)}else if(il(Ft)||nr(Ft)||hu(Ft)){let ri,Mi,hi=!1;if(nr(Ft))ri=up(At);else if(il(Ft))ri=xs(At);else{hi=!0,ri=xs(At);const nn=Vo(At.text,At);ri.height=nn.height}Ft.aspectRatio?Mi=Ft.aspectRatio:Kt.shiftKey&&!hi&&(Mi=ri.width/ri.height);const Di=xs(ri),hn=Ri(Di),Ni=Ft.rotation,Oi=Ro(Di),wn=wr(Di,Ni);if(Bt.length===1){let nn=Bt[0];Ft.flipX&&(nn=fo[nn]),Ft.flipY&&(nn=Ir[nn]);const[qn,dn,Hr,zr]=Oi,co=te(wn[nn]),Za=Fn({...co},Wt),Xa=je(Za);Ye(Xa,Wt,()=>je(co));const _s=at(Xa.x-wn[nn].x,Xa.y-wn[nn].y),Vs=Ur(We(_s),-Ni),Ia=at(Oi[nn].x+Vs.x,Oi[nn].y+Vs.y);let Qr;nn===0&&(Qr=Hr),nn===1&&(Qr=zr),nn===2&&(Qr=qn),nn===3&&(Qr=dn);const vo=rr([Qr,Ia]);if(Mi){const{width:Yo,height:qo}=to(vo,Mi),[Qc,fr,kn,er]=ll(vo);vo.width=Yo,vo.height=qo,Ia.y<Qr.y&&(vo.y=kn-qo),Ia.x<Qr.x&&(vo.x=fr-Yo)}const ms=wr(vo,Ni,hn),Bo=No(ms),Ya=Ur(ms[0],-Ni,Bo),Oo=Ur(ms[2],-Ni,Bo),ga=rr([Ya,Oo]);Fo(Ft,nr(Ft)?ym(ga):ga,Jt)}else{Bt=Bt.map(er=>(Ft.flipX&&(er=fo[er]),Ft.flipY&&(er=Ir[er]),er));const[nn,qn]=Bt.map(er=>wn[er]),dn={x:nn.x+.5*(qn.x-nn.x),y:nn.y+.5*(qn.y-nn.y)},[Hr,zr]=Bt.map(er=>Oi[er]),[co,Za]=Bt.map(er=>{const Ko=er+2;return Ko<4?Oi[Ko]:Oi[Ko-4]}),Xa={x:co.x+.5*(Za.x-co.x),y:co.y+.5*(Za.y-co.y)},_s=te(dn),Vs=Fn({..._s},Wt),Ia=je(Vs);Ye(Ia,Wt,()=>je(_s));const Qr=at(Ia.x-dn.x,Ia.y-dn.y),vo=Ur(We(Qr),-Ni),ms=Dn(We(Hr),zr),Bo=Eo(ms,er=>1-Math.abs(Math.sign(er))),Ya=at(vo.x*Bo.x,vo.y*Bo.y);Fn(Hr,Ya),Fn(zr,Ya);const Oo=rr(Oi);if(Mi){let er=Oo.width,Ko=Oo.height;Bo.y===0?Ko=er/Mi:er=Ko*Mi,Oo.width=er,Oo.height=Ko,Bo.y===0?Oo.y=Xa.y-.5*Ko:Oo.x=Xa.x-.5*er}const ga=wr(Oo,Ni,hn),Yo=No(ga),qo=Ur(ga[0],-Ni,Yo),Qc=Ur(ga[2],-Ni,Yo),fr=rr([qo,Qc]);let kn;nr(Ft)?kn=ym(fr):il(Ft)?kn=fr:hi&&(kn={x:fr.x,y:fr.y,width:fr.width}),Fo(Ft,kn,Jt)}}Bn()})(oe,_i,A,j,{shiftKey:!Et&&K,...ln(st||Tt?0:Zn,Pr,n,oe)}),bp(oe)&&Po(j)>16&&Pn(oe,{selectedPoint:void 0})},b=>{if(!oe)return void i(143,tr=!1);Vn(oe);const{isTap:j,translation:A,indexes:K}=b.detail;j&&(bp(oe)&&Pn(oe,{selectedPoint:oe.selectedPoint===K[0]?void 0:K[0]}),et(oe)),i(142,oe=void 0),i(143,tr=!1),Dt(r)},b=>{Er=Oe(u).origin,i(143,tr=!0),i(142,oe=r),_i=u},b=>{if(!oe)return void i(143,tr=!1);const{translation:j,shiftKey:A}=b.detail;((K,st,Tt,Et)=>{const Ft=se(zn(In(K),Jt)),At=Ri(Ft),Bt=br(Er,Tt);let Wt=Gd(Bt,At)+Math.PI/2;if(Et.shiftKey){const Kt=Math.PI/16;Wt=Kt*Math.round(Wt/Kt)-Le%Kt}Fo(K,{rotation:Wt},Jt),Bn()})(oe,0,j,{shiftKey:A})},()=>{oe?(Vn(oe),i(142,oe=void 0),i(143,tr=!1),Dt(r)):i(143,tr=!1)},b=>{const{key:j}=b,A=/escape/i.test(j);if(On())return A?(b.preventDefault(),b.stopPropagation(),Qn(r)):void(rt&&j==="d"&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),b.stopPropagation(),Kl()))},b=>{const j=Rl(r,b);return j===!0?b:j},Lr,b=>{const{target:j,key:A}=b,K=j.value||j.innerText,st=j.selectionStart||0,Tt=j.selectionEnd||K.length,Et=K.substring(0,st)+A+K.substring(Tt);if(Rl(r,Et)!==Et)return b.preventDefault()},b=>Cu(r)&&/enter/i.test(b.code)&&r.disableNewline!==!1?b.preventDefault():/arrow/i.test(b.code)?b.stopPropagation():/escape/i.test(b.key)?To():void 0,b=>{const{key:j,ctrlKey:A,altKey:K}=b;if(/enter/i.test(j)&&(A||K))return Ki()},Ki,To,ml,b=>{const j=ha();j&&(j.find(ts)||j.find(A=>!ol(A))||j.forEach(A=>{i(142,oe=A),_i=zn(In(oe),Jt),Co(oe,_i,b.detail)}))},b=>{i(19,Ws=!0)},({relatedTarget:b})=>{b&&b.classList.contains("shape-selector__button")||i(19,Ws=!1)},b=>{if(b.pointerType==="touch"||b.target.className!=="PinturaShapeEditor")return void He();(tr||de)&&gl(void 0);const j=yh(b,Ci);i(145,Ua=We(j));const A=Eo(je(j),st=>Math.round(st));if(vs(A,$l)||($l=We(A),ce(tr,j,A),tr||de)||p)return;const[K]=pi(Ht,A,0,ya);K&&uo(K)||gl(K)},b=>{b.pointerType!=="touch"&&He()},Fe,Xe,be,Le,Ve,Ge,Qe,vi,Si,Jt,X,Vt,H,ie,pe,ye,ee,qt,ei,Ze,lt,Dt,re,Te,Qt,et,jt,Gt,ce,Ne,He,Me,gn,rn,ve,ii,Pe,ci,je,te,De,ki,bn,Mn,Hn,Zn,yr,$r,Pr,en,pn,gi,ar,eo,zo,go,(b,j={})=>{let A,K,st,Tt=nr(b),Et=ir(b),Ft=j.position==="relative";const At=Go(),Bt=me=>{if(!Zn)return me;const le=je(me),{snapTranslation:ke,snapLines:Ce}=ro(Rr(le),At,Zn,Pr,n);return Vr(me,ke),Yr(Ce),me},Wt=!!gr(),Kt=j.isSelection?be:bt,ni=j.inputMode==="step";if(Nn(b)){if(ni){let me=!1;const le=(ke,Ce)=>{const Ye=pn(Kt),ri=ke&&at(lu(ke.x,Jt.width),lu(ke.y,Jt.height)),Mi=ri&&te(ri);Re.includes(16)&&Mi&&Or(Mi,Ce);const hi=je(Ce),Di=Ye.points.length?Ye.points[0]:hi,hn=at(lu(Di.x,Jt.width),lu(Di.y,Jt.height)),Ni=te(hn),Oi=Po(Ni,Ce);if(!me&&Ye.points.length===1&&Oi<36)return ar(Kt);if(Ye.points.length>2&&Oi<=256){Ye.pathClose=!0,ya(Ye)&&Vn(Ye);const qn=eo(Kt);return void lt(qn)}const wn=Ye.strokeWidth&&Ye.strokeColor&&(Ye.strokeColor[3]===void 0||Ye.strokeColor[3]>0),nn=Po(Mi,Ce);if(wn&&Ye.points.length>1&&nn<256){Ye.pathClose=!1,Ye.backgroundColor=[0,0,0,0],ya(Ye)&&Vn(Ye);const qn=eo(Kt);lt(qn)}else if(!(Ye.points.length>0&&nn<100))return Ft?Mc(hi,Jt):hi};return{start:ke=>{const Ce=pn(Kt),{origin:Ye}=ke.detail;if(K=4,A=Bt(We(Ye)),st=We(A),Ce){const ri=Ce.points[Ce.points.length-1],Mi=le(ri,A);return Mi&&(Ce.points=[...Ce.points,Mi]),void zo({points:Ce.points},Kt)}me=!0},update:ke=>{if(!me)return;const Ce=pn(Kt);if(!Ce)return;const Ye=Ce.points[0],ri=le(Ye,at(A.x+ke.detail.translation.x,A.y+ke.detail.translation.y));ri&&(Ce.points[1]=ri,zo({points:Ce.points},Kt))},release:ke=>ke.detail.preventInertia(),cancel:()=>{ar(Kt)},end:ke=>{if(!me)return;const Ce=je(A),Ye=Ft?Mc(Ce,Jt):Ce,{isTap:ri}=ke.detail;if(ri&&pi(Ht,Ce,0,ya).length)return ar(Kt);gi({...b,points:[Ye]},Kt)}}}return{start:me=>{const{origin:le}=me.detail;K=4,A=We(le),st=We(A);const ke=je(A),Ce=Ft?Mc(ke,Jt):ke;gi({...b,points:[Ce]},Kt)},update:me=>{const le=pn(Kt);if(!le)return;const{translation:ke}=me.detail,Ce=at(A.x+ke.x,A.y+ke.y),Ye=So(st,Ce);if(ai(Ye,5)<=K)return;const ri=Gd(Ce,st),Mi=K-Ye;st.x+=Mi*Math.cos(ri),st.y+=Mi*Math.sin(ri);const hi=je(st),Di=Ft?Mc(hi,Jt):hi;zo({points:le.points.concat(Di)},Kt)},release:me=>me.detail.preventInertia(),cancel:()=>{ar(Kt)},end:me=>{const le=pn(Kt);if(!le)return;if(me.detail.isTap){let Ce=!1;if(le.bitmap?(Ti&&(Ce=!0),Wt&&(Ce=!0)):Ce=!0,Ce)return ar(Kt)}const ke=eo(Kt);lt(ke)}}}return Tt||Et||Io(b)?{start:me=>{const{origin:le}=me.detail;A=Bt(We(le));const ke=je(A),Ce=Ft?Mc(ke,Jt):ke,Ye=-1*cn(Le,Ve,Ge),ri={...b,rotation:Ye,...Ce};ri.flipX=Ve,ri.flipY=Ge,delete ri.position,ri.opacity=0,(Tt?["rx","ry"]:["width","height"]).forEach(Mi=>{ri[Mi]=Ft?"0%":0}),gi(ri,Kt)},update:me=>{const le=pn(Kt);if(!le)return;le.opacity=1;let{aspectRatio:ke}=le,{translation:Ce,shiftKey:Ye,ctrlKey:ri}=me.detail;!ke&&Ye&&(ke=1);const Mi=Bt(at(A.x+Ce.x,A.y+Ce.y)),hi=je(A),Di=je(Mi);if(ke){const Hr=rr([hi,Di]),zr=to(Hr,ke),co=Di.x<hi.x?-1:1,Za=Di.y<hi.y?-1:1;Di.x=hi.x+zr.width*co,Di.y=hi.y+zr.height*Za}const hn={x:hi.x+.5*(Di.x-hi.x),y:hi.y+.5*(Di.y-hi.y)},Ni=cn(Le,Ve,Ge);Ur(hi,Ni,hn),Ur(Di,Ni,hn);const Oi=Math.min(hi.x,Di.x),wn=Math.min(hi.y,Di.y);let nn=Math.max(hi.x,Di.x)-Oi,qn=Math.max(hi.y,Di.y)-wn,dn={};Tt?(ri?(dn.x=hi.x,dn.y=hi.y):(dn.x=Oi+.5*nn,dn.y=wn+.5*qn),dn.rx=.5*nn,dn.ry=.5*qn):(ri?(dn.x=hi.x-.5*nn,dn.y=hi.y-.5*qn):(dn.x=Oi,dn.y=wn),dn.width=nn,dn.height=qn),zo(dn,Kt,(Hr,zr)=>Fo(Hr,zr,Jt))},release:me=>{me.detail.preventInertia()},cancel:()=>{ar(Kt)},end:me=>{const le=pn(Kt);if(le){if(me.detail.isTap){if(ir(le)&&Mn&&xr||!ir(le)||!Mn||Ti)return ar(Kt);delete le.width,delete le.height,le.disableNewline!==!1&&delete le.textAlign;const ke=zn({...le},Jt),Ce=Vo(le.text,ke),Ye=je({x:A.x,y:A.y-.5*Ce.height}),ri=je({x:A.x+Ce.width,y:A.y+.5*Ce.height}),Mi={x:Ye.x+.5*(ri.x-Ye.x),y:Ye.y+.5*(ri.y-Ye.y)},hi=cn(Le,Ve,Ge);Ur(Ye,hi,Mi),Ur(ri,hi,Mi);let Di=Math.min(Ye.x,ri.x),hn=Math.min(Ye.y,ri.y);Di<0&&(Di=0),hn<0&&(hn=0),Di+Ce.width>Jt.width&&(Di=Jt.width-Ce.width),hn+Ce.height>Jt.height&&(hn=Jt.height-Ce.height),le.x=_e(le.x)?jr(Di,Jt.width):Di,le.y=_e(le.y)?jr(hn,Jt.height):hn}if(le.opacity=1,ir(le))lt(le);else{const ke=eo(Kt);lt(ke)}ya(le)&&Vn(le),ir(le)&&Kr(le)}}}:lr(b)?{start:me=>{const{origin:le}=me.detail,ke=je(Bt(le)),Ce=Eo(ke,Hc);A=We(le),gi({...b,x1:Ft?jr(Ce.x,Jt.width):Ce.x,y1:Ft?jr(Ce.y,Jt.height):Ce.y,x2:Ft?jr(Ce.x,Jt.width):Ce.x,y2:Ft?jr(Ce.y,Jt.height):Ce.y,opacity:0},Kt)},update:me=>{if(!pn(Kt))return;const{translation:le}=me.detail,ke=Bt(Fn(We(A),le));if(Re.includes(16)){const Ye=So(A,ke),ri=Gd(A,ke),Mi=Math.PI/4,hi=Mi*Math.round(ri/Mi);ke.x=A.x+Ye*Math.cos(hi),ke.y=A.y+Ye*Math.sin(hi)}const Ce=je(ke);zo({x2:Ft?jr(Ce.x,Jt.width):Ce.x,y2:Ft?jr(Ce.y,Jt.height):Ce.y,opacity:1},Kt)},release:me=>me.detail.preventInertia(),cancel:()=>{ar(Kt)},end:me=>{const le=pn(Kt);if(!le)return;if(me.detail.isTap)return ar(Kt);le.opacity=1;const ke=eo(Kt);lt(ke),ya(le)&&Vn(ke)}}:void 0},()=>{let b,j;const A=De*De,K=(st,Tt,Et=!1)=>{const Ft=Po(st,Tt);if(!Et&&Ft<2)return!1;const At=Ht.filter(Wt=>!Wt.disableErase);let Bt;return Bt=Ft<A?pi(Ht,je(Tt),De):ti(At,je(st),je(Tt),De),ao(Bt).forEach(Qt),!0};return{start:st=>{b=at(Math.round(st.detail.origin.x),Math.round(st.detail.origin.y)),K(b,b,!0),j=b},update:st=>{const{translation:Tt}=st.detail,Et=at(Math.round(b.x+Tt.x),Math.round(b.y+Tt.y));K(j,Et)&&(j=We(Et))},release:st=>st.detail.preventInertia(),cancel:()=>{ar(collection)},end:()=>{}}},Nr,Yn,b=>{if(!Nr())return Kp(b),go(b)},Li,jn,(b={})=>({id:aa(),...b}),Bn,mn,Pn,Jn,(b,j,A=!0)=>{Ht.forEach(K=>Jn(K,b,j,!1)),A&&Bn()},Zo,ha,yo,On,_n,Qn,Kr,bo,ao,O,se,pi,ti,Wr,qr,oe,tr,bi,Ua,p,Ot,r,_,zt,rt,ft,Zt,Lt,Yt,T,ue,Ut,kt,G,D,ht,a,o,ot,c,mt,dt,Z,tt,N,n,V,nt,k,g,I,P,h,l,S,m,s,Ht,W,Re,Se,function(b){Xr.call(this,t,b)},b=>Vn(bt[b]),function(b){Wi[b?"unshift":"push"](()=>{xn=b,i(8,xn)})},function(){xt=this.value,i(24,xt),i(11,ct),i(148,r),i(170,tt),i(0,yi),i(184,Ht)},function(b){Wi[b?"unshift":"push"](()=>{xn=b,i(8,xn)})},()=>{Ga&&Ga.focus()},b=>i(9,hs=b.detail),function(b){Wi[b?"unshift":"push"](()=>{Ga=b,i(20,Ga)})},b=>yh(b,Ci)]}class qS extends li{constructor(e){super(),si(this,e,YS,XS,oi,{uid:58,ui:59,disabled:0,shapes:1,selection:60,offset:2,contextRotation:61,contextFlipX:62,contextFlipY:63,contextZoom:64,active:65,opacity:66,parentRect:67,rootRect:3,utilRect:68,hoverColor:69,caretColor:70,gridColor:71,snapColor:72,textInputMode:4,oninteractionstart:73,oninteractionupdate:74,oninteractionrelease:75,oninteractionend:76,oninteractioncancel:77,onaddshape:78,onupdateshape:79,onselectshape:80,onblurshape:81,onremoveshape:82,ontapshape:83,onhovershape:84,ontriggerhistorywrite:85,onhovercanvas:86,ontapcanvas:87,onleavecanvas:88,beforeSelectShape:89,beforeDeselectShape:90,beforeRemoveShape:91,beforeUpdateShape:92,willRenderShapeControls:93,willRenderShapeTextControls:94,willStartInteraction:95,mapEditorPointToImagePoint:96,mapImagePointToEditorPoint:97,eraseRadius:98,selectRadius:99,enableButtonFlipVertical:100,enableTapToAddText:101,enableMultiSelect:102,enableTextStyleControls:5,locale:6,snapThreshold:103,snapPointer:104,enableSnapToContext:105,gridSize:106,syncShapeCollection:107,getShapeDraft:108,addShapeDraft:109,discardShapeDraft:110,confirmShapeDraft:111,updateShapeDraft:112,addShape:113,createShape:114,eraseShape:115,getMarkupItemDraft:116,getMarkupItemDraftIndex:117,addMarkupItemDraft:118,confirmMarkupItemDraft:119,discardMarkupItemDraft:120,createMarkupItem:121,syncShapes:122,removeMarkupShapeProps:123,updateMarkupShape:124,updateMarkupShapeProperty:125,updateMarkupItemsShapeProperty:126,updateMarkupShapeItems:127,getActiveMarkupItems:128,getActiveMarkupItem:129,hasActiveMarkupItem:130,blurShapes:131,selectShape:7,deselectMarkupItem:132,editMarkupItem:133,finishEditMarkupItem:134,removeMarkupItems:135,getTextShapeRect:136,getMarkupShapeRect:137,getShapesNearPosition:138,getShapesBetweenPoints:139},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get syncShapeCollection(){return this.$$.ctx[107]}get getShapeDraft(){return this.$$.ctx[108]}get addShapeDraft(){return this.$$.ctx[109]}get discardShapeDraft(){return this.$$.ctx[110]}get confirmShapeDraft(){return this.$$.ctx[111]}get updateShapeDraft(){return this.$$.ctx[112]}get addShape(){return this.$$.ctx[113]}get createShape(){return this.$$.ctx[114]}get eraseShape(){return this.$$.ctx[115]}get getMarkupItemDraft(){return this.$$.ctx[116]}get getMarkupItemDraftIndex(){return this.$$.ctx[117]}get addMarkupItemDraft(){return this.$$.ctx[118]}get confirmMarkupItemDraft(){return this.$$.ctx[119]}get discardMarkupItemDraft(){return this.$$.ctx[120]}get createMarkupItem(){return this.$$.ctx[121]}get syncShapes(){return this.$$.ctx[122]}get removeMarkupShapeProps(){return this.$$.ctx[123]}get updateMarkupShape(){return this.$$.ctx[124]}get updateMarkupShapeProperty(){return this.$$.ctx[125]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[126]}get updateMarkupShapeItems(){return this.$$.ctx[127]}get getActiveMarkupItems(){return this.$$.ctx[128]}get getActiveMarkupItem(){return this.$$.ctx[129]}get hasActiveMarkupItem(){return this.$$.ctx[130]}get blurShapes(){return this.$$.ctx[131]}get selectShape(){return this.$$.ctx[7]}get deselectMarkupItem(){return this.$$.ctx[132]}get editMarkupItem(){return this.$$.ctx[133]}get finishEditMarkupItem(){return this.$$.ctx[134]}get removeMarkupItems(){return this.$$.ctx[135]}get getTextShapeRect(){return this.$$.ctx[136]}get getMarkupShapeRect(){return this.$$.ctx[137]}get getShapesNearPosition(){return this.$$.ctx[138]}get getShapesBetweenPoints(){return this.$$.ctx[139]}}function KS(t){let e,i,n;return i=new mo({props:{items:t[2]}}),{c(){e=ut("ul"),It(i.$$.fragment),v(e,"class","PinturaShapeStyleList")},m(r,o){it(r,e,o),Pt(i,e,null),n=!0},p(r,o){const a={};4&o&&(a.items=r[2]),i.$set(a)},i(r){n||(M(i.$$.fragment,r),n=!0)},o(r){F(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Rt(i)}}}function JS(t){let e,i;return e=new Ta({props:{class:"PinturaShapeStyles",elasticity:t[0],$$slots:{default:[QS]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};1&r&&(o.elasticity=n[0]),131076&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function QS(t){let e,i,n;return i=new mo({props:{items:t[2]}}),{c(){e=ut("ul"),It(i.$$.fragment),v(e,"class","PinturaShapeStyleList")},m(r,o){it(r,e,o),Pt(i,e,null),n=!0},p(r,o){const a={};4&o&&(a.items=r[2]),i.$set(a)},i(r){n||(M(i.$$.fragment,r),n=!0)},o(r){F(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Rt(i)}}}function t6(t){let e,i,n,r;const o=[JS,KS],a=[];function s(l,c){return l[1]?0:1}return i=s(t),n=a[i]=o[i](t),{c(){e=ut("div"),n.c(),v(e,"style",t[3])},m(l,c){it(l,e,c),a[i].m(e,null),r=!0},p(l,[c]){let d=i;i=s(l),i===d?a[i].p(l,c):(Ie(),F(a[d],1,1,()=>{a[d]=null}),Ee(),n=a[i],n?n.p(l,c):(n=a[i]=o[i](l),n.c()),M(n,1),n.m(e,null)),(!r||8&c)&&v(e,"style",l[3])},i(l){r||(M(n),r=!0)},o(l){F(n),r=!1},d(l){l&&Q(e),a[i].d()}}}function e6(t,e,i){let n,r,o,a,s,l,{isActive:c=!1}=e,{controls:d=[]}=e,{locale:u}=e,{scrollElasticity:p}=e,{scrollEnable:h=!0}=e,{hideTitles:g=!1}=e,{willRenderControls:m=qi}=e;const f=un("redrawTrigger");L(t,f,C=>i(14,a=C));const x=un("env");L(t,x,C=>i(13,o=C));const w=un("isAnimated");L(t,w,C=>i(16,l=C));const S=di(0,{stiffness:.25,damping:.9});return L(t,S,C=>i(15,s=C)),t.$$set=C=>{"isActive"in C&&i(8,c=C.isActive),"controls"in C&&i(9,d=C.controls),"locale"in C&&i(10,u=C.locale),"scrollElasticity"in C&&i(0,p=C.scrollElasticity),"scrollEnable"in C&&i(1,h=C.scrollEnable),"hideTitles"in C&&i(11,g=C.hideTitles),"willRenderControls"in C&&i(12,m=C.willRenderControls)},t.$$.update=()=>{65792&t.$$.dirty&&S.set(c?1:0,{hard:l===!1}),33024&t.$$.dirty&&i(3,n=`opacity:${s};${c?"":"pointer-events:none;"}${s<=0?"visibility:hidden":""}`),32256&t.$$.dirty&&i(2,r=a&&m(d.map(C=>["ShapeStyle",C.id,{title:C.componentProps.title,locale:u,hideTitle:g,items:[[C.component,C.id,C.componentProps]]}]),o,()=>f.set({})))},[p,h,r,n,f,x,w,S,c,d,u,g,m,o,a,s,l]}class i6 extends li{constructor(e){super(),si(this,e,e6,t6,oi,{isActive:8,controls:9,locale:10,scrollElasticity:0,scrollEnable:1,hideTitles:11,willRenderControls:12})}}function Ef(t,e,i){const n=t.slice();return n[15]=e[i].key,n[6]=e[i].controls,n[16]=e[i].isActive,n}function Af(t,e){let i,n,r;return n=new i6({props:{isActive:e[16],controls:e[6],locale:e[1],scrollElasticity:e[2],scrollEnable:e[3],hideTitles:e[4],willRenderControls:e[5]}}),{key:t,first:null,c(){i=Tn(),It(n.$$.fragment),this.first=i},m(o,a){it(o,i,a),Pt(n,o,a),r=!0},p(o,a){e=o;const s={};128&a&&(s.isActive=e[16]),128&a&&(s.controls=e[6]),2&a&&(s.locale=e[1]),4&a&&(s.scrollElasticity=e[2]),8&a&&(s.scrollEnable=e[3]),16&a&&(s.hideTitles=e[4]),32&a&&(s.willRenderControls=e[5]),n.$set(s)},i(o){r||(M(n.$$.fragment,o),r=!0)},o(o){F(n.$$.fragment,o),r=!1},d(o){o&&Q(i),Rt(n,o)}}}function n6(t){let e,i,n,r=[],o=new Map,a=t[7];const s=l=>l[15];for(let l=0;l<a.length;l+=1){let c=Ef(t,a,l),d=s(c);o.set(d,r[l]=Af(d,c))}return{c(){e=ut("div");for(let l=0;l<r.length;l+=1)r[l].c();v(e,"class",i=$i(["PinturaShapeStyleEditor",!t[3]&&"PinturaShapeStyleEditorOverflow",t[0]]))},m(l,c){it(l,e,c);for(let d=0;d<r.length;d+=1)r[d].m(e,null);n=!0},p(l,[c]){190&c&&(a=l[7],Ie(),r=Oa(r,c,s,1,l,a,o,e,zs,Af,null,Ef),Ee()),(!n||9&c&&i!==(i=$i(["PinturaShapeStyleEditor",!l[3]&&"PinturaShapeStyleEditorOverflow",l[0]])))&&v(e,"class",i)},i(l){if(!n){for(let c=0;c<a.length;c+=1)M(r[c]);n=!0}},o(l){for(let c=0;c<r.length;c+=1)F(r[c]);n=!1},d(l){l&&Q(e);for(let c=0;c<r.length;c+=1)r[c].d()}}}function r6(t,e,i){let n,r,o,{class:a}=e,{controls:s={}}=e,{shapeProps:l}=e,{onchange:c}=e,{locale:d}=e,{scrollElasticity:u}=e,{scrollEnable:p=!0}=e,{hideTitles:h=!1}=e,{willRenderControls:g}=e;const m=[];return t.$$set=f=>{"class"in f&&i(0,a=f.class),"controls"in f&&i(6,s=f.controls),"shapeProps"in f&&i(8,l=f.shapeProps),"onchange"in f&&i(9,c=f.onchange),"locale"in f&&i(1,d=f.locale),"scrollElasticity"in f&&i(2,u=f.scrollElasticity),"scrollEnable"in f&&i(3,p=f.scrollEnable),"hideTitles"in f&&i(4,h=f.hideTitles),"willRenderControls"in f&&i(5,g=f.willRenderControls)},t.$$.update=()=>{64&t.$$.dirty&&i(11,n=Object.keys(s).filter(f=>s[f])),2304&t.$$.dirty&&i(10,r=l&&Object.keys(l).length&&n&&Jp(l)?(f=>n.filter(x=>x.split("_").every(w=>Ae(f,w)&&Jp(f,w))).map(x=>{const w=(f.settings&&f.settings[x]||{}).control||x,S=x.split("_"),C=S.length>1?S.map(T=>f[T]):f[x];if(sn(s[w])){const{title:T,component:D}=s[w](C,U=>{c({[x]:U})},{selectedShapeId:f.id});return{id:w,component:mo,componentProps:{title:T,items:D}}}let[I,E]=s[w];if(_e(I)&&s[I]){const T={...E};[I,E]=s[I],E={...E,...T}}const B=sn(E.options)?E.options(f):E.options;return I==="RadioGroup"&&(E.selectedIndex=-1),{id:w,component:I,componentProps:{...E,options:B,locale:d,value:C,optionLabelClass:"PinturaButtonLabel",onchange:T=>{const D=cl(T)&&!An(T)?T.value:T;E.onchange&&E.onchange(D,f);const U=S.length>1?S.reduce((P,y,V)=>({...P,[y]:Array.isArray(D)?D[V]:D}),{}):{[x]:D};c(U)}}}}).filter(Boolean))(l):[]),1280&t.$$.dirty&&i(7,o=((f,x)=>{let w=m.find(S=>S.key===f);return w||(w={key:f,controls:x},m.push(w)),m.forEach(S=>S.isActive=!1),w.controls=x,w.isActive=!0,m})(l&&Object.keys(l).length?Object.keys(l).join("_"):"none",r||[]))},[a,d,u,p,h,g,s,o,l,c,r,n]}class Uu extends li{constructor(e){super(),si(this,e,r6,n6,oi,{class:0,controls:6,shapeProps:8,onchange:9,locale:1,scrollElasticity:2,scrollEnable:3,hideTitles:4,willRenderControls:5})}}var rb=t=>/<svg /.test(t);function o6(t){let e,i;return e=new mo({props:{items:t[10]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};1024&r&&(o.items=n[10]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function a6(t){let e,i,n,r;const o=[l6,s6],a=[];function s(l,c){return l[8]?0:1}return e=s(t),i=a[e]=o[e](t),{c(){i.c(),n=Tn()},m(l,c){a[e].m(l,c),it(l,n,c),r=!0},p(l,c){let d=e;e=s(l),e===d?a[e].p(l,c):(Ie(),F(a[d],1,1,()=>{a[d]=null}),Ee(),i=a[e],i?i.p(l,c):(i=a[e]=o[e](l),i.c()),M(i,1),i.m(n.parentNode,n))},i(l){r||(M(i),r=!0)},o(l){F(i),r=!1},d(l){a[e].d(l),l&&Q(n)}}}function s6(t){let e,i,n,r,o=t[10]&&Lf(t);return n=new Ta({props:{scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[c6]},$$scope:{ctx:t}}}),{c(){e=ut("div"),o&&o.c(),i=$e(),It(n.$$.fragment),v(e,"class","PinturaShapePresetsFlat")},m(a,s){it(a,e,s),o&&o.m(e,null),St(e,i),Pt(n,e,null),r=!0},p(a,s){a[10]?o?(o.p(a,s),1024&s&&M(o,1)):(o=Lf(a),o.c(),M(o,1),o.m(e,i)):o&&(Ie(),F(o,1,1,()=>{o=null}),Ee());const l={};512&s&&(l.scrollAutoCancel=a[9]),1&s&&(l.elasticity=a[0]),536871070&s&&(l.$$scope={dirty:s,ctx:a}),n.$set(l)},i(a){r||(M(o),M(n.$$.fragment,a),r=!0)},o(a){F(o),F(n.$$.fragment,a),r=!1},d(a){a&&Q(e),o&&o.d(),Rt(n)}}}function l6(t){let e,i,n,r,o;i=new Ta({props:{elasticity:t[0],class:"PinturaShapePresetsGroups",$$slots:{default:[p6]},$$scope:{ctx:t}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[11]},t[12]];let s={$$slots:{default:[m6,({panel:l,panelIsActive:c})=>({26:l,27:c}),({panel:l,panelIsActive:c})=>(l?67108864:0)|(c?134217728:0)]},$$scope:{ctx:t}};for(let l=0;l<a.length;l+=1)s=Cn(s,a[l]);return r=new Vu({props:s}),{c(){e=ut("div"),It(i.$$.fragment),n=$e(),It(r.$$.fragment),v(e,"class","PinturaShapePresetsGrouped")},m(l,c){it(l,e,c),Pt(i,e,null),St(e,n),Pt(r,e,null),o=!0},p(l,c){const d={};1&c&&(d.elasticity=l[0]),536876128&c&&(d.$$scope={dirty:c,ctx:l}),i.$set(d);const u=6144&c?Tr(a,[a[0],a[1],2048&c&&{panels:l[11]},4096&c&&Br(l[12])]):{};738206239&c&&(u.$$scope={dirty:c,ctx:l}),r.$set(u)},i(l){o||(M(i.$$.fragment,l),M(r.$$.fragment,l),o=!0)},o(l){F(i.$$.fragment,l),F(r.$$.fragment,l),o=!1},d(l){l&&Q(e),Rt(i),Rt(r)}}}function Lf(t){let e,i;return e=new mo({props:{items:t[10]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};1024&r&&(o.items=n[10]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function c6(t){let e,i;return e=new t0({props:{items:t[7],onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};128&r&&(o.items=n[7]),2&r&&(o.onclickitem=n[1]),4&r&&(o.ongrabitem=n[2]),8&r&&(o.ondragitem=n[3]),16&r&&(o.ondropitem=n[4]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function zf(t){let e,i;return e=new mo({props:{items:t[10]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};1024&r&&(o.items=n[10]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function Ff(t){let e,i;return e=new Lo({props:{$$slots:{default:[d6]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};805306368&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function d6(t){let e,i=t[28].icon+"";return{c(){e=kr("g")},m(n,r){it(n,e,r),e.innerHTML=i},p(n,r){268435456&r&&i!==(i=n[28].icon+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function Df(t){let e,i,n=t[28].label+"";return{c(){e=ut("span"),i=$n(n)},m(r,o){it(r,e,o),St(e,i)},p(r,o){268435456&o&&n!==(n=r[28].label+"")&&Ln(i,n)},d(r){r&&Q(e)}}}function u6(t){let e,i,n,r=t[28].icon&&Ff(t),o=!t[28].hideLabel&&Df(t);return{c(){r&&r.c(),e=$e(),o&&o.c(),i=Tn()},m(a,s){r&&r.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,i,s),n=!0},p(a,s){a[28].icon?r?(r.p(a,s),268435456&s&&M(r,1)):(r=Ff(a),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee()),a[28].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=Df(a),o.c(),o.m(i.parentNode,i))},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(i)}}}function p6(t){let e,i,n,r=t[10]&&zf(t);const o=[{class:"PinturaControlList"},{tabs:t[5]},t[12],{layout:"compact"}];let a={$$slots:{default:[u6,({tab:s})=>({28:s}),({tab:s})=>s?268435456:0]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)a=Cn(a,o[s]);return i=new _u({props:a}),i.$on("select",t[18]),{c(){r&&r.c(),e=$e(),It(i.$$.fragment)},m(s,l){r&&r.m(s,l),it(s,e,l),Pt(i,s,l),n=!0},p(s,l){s[10]?r?(r.p(s,l),1024&l&&M(r,1)):(r=zf(s),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee());const c=4128&l?Tr(o,[o[0],32&l&&{tabs:s[5]},4096&l&&Br(s[12]),o[3]]):{};805306368&l&&(c.$$scope={dirty:l,ctx:s}),i.$set(c)},i(s){n||(M(r),M(i.$$.fragment,s),n=!0)},o(s){F(r),F(i.$$.fragment,s),n=!1},d(s){r&&r.d(s),s&&Q(e),Rt(i,s)}}}function h6(t){let e,i;return e=new t0({props:{items:t[13][t[26]].items,disabled:t[13][t[26]].disabled,onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};67117056&r&&(o.items=n[13][n[26]].items),67117056&r&&(o.disabled=n[13][n[26]].disabled),2&r&&(o.onclickitem=n[1]),4&r&&(o.ongrabitem=n[2]),8&r&&(o.ondragitem=n[3]),16&r&&(o.ondropitem=n[4]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function m6(t){let e,i;return e=new Ta({props:{scroll:t[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[h6]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};134217728&r&&(o.scroll=n[27]?{scrollOffset:0,animate:!1}:void 0),512&r&&(o.scrollAutoCancel=n[9]),1&r&&(o.elasticity=n[0]),603987998&r&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function $6(t){let e,i,n,r;const o=[a6,o6],a=[];function s(l,c){return l[9]?0:l[10]?1:-1}return~(i=s(t))&&(n=a[i]=o[i](t)),{c(){e=ut("div"),n&&n.c(),v(e,"class","PinturaShapePresetsPalette")},m(l,c){it(l,e,c),~i&&a[i].m(e,null),r=!0},p(l,[c]){let d=i;i=s(l),i===d?~i&&a[i].p(l,c):(n&&(Ie(),F(a[d],1,1,()=>{a[d]=null}),Ee()),~i?(n=a[i],n?n.p(l,c):(n=a[i]=o[i](l),n.c()),M(n,1),n.m(e,null)):n=null)},i(l){r||(M(n),r=!0)},o(l){F(n),r=!1},d(l){l&&Q(e),~i&&a[i].d()}}}function g6(t,e,i){let n,r,o,a,s,l,c,d,u,{locale:p}=e,{presets:h}=e,{scrollElasticity:g}=e,{enableSelectImage:m=!0}=e,{willRenderPresetToolbar:f=qi}=e,{onaddpreset:x=fe}=e,{ongrabpreset:w}=e,{ondragpreset:S}=e,{ondroppreset:C}=e;const I="presets-"+aa(),E=(U,P="")=>rb(U)?U:ku(U)?Cy(U,P):`<img src="${U}" alt="${P}"/>`,B=U=>ay(Ph(U)),T=["src","alt","thumb","shape","id","mount","disabled"],D=U=>U.map(P=>(y=>An(y)&&_e(y[0])&&An(y[1]))(P)?{...P[2],id:`${I}-${P[0].toLowerCase()}`,label:P[0],items:D(P[1])}:(y=>{let V,nt,k,N,tt,ct,ot,mt=y;return _e(y)?ku(y)?(V=y,tt=y,N=E(V,tt)):(V=y,tt=B(V),N=E(V,tt)):(V=y.src,tt=y.alt||(_e(V)?B(V):_e(y.thumb)?B(y.thumb):void 0),N=E(y.thumb||V,tt),nt=y.shape,ct=y.mount,ot=y.disabled,k=Object.keys(y).reduce((Z,gt)=>(T.includes(gt)||(Z[gt]=y[gt]),Z),{})),{id:mt,src:V,thumb:N,shape:nt,shapeProps:k,alt:tt,title:tt,mount:ct,disabled:ot}})(P));return t.$$set=U=>{"locale"in U&&i(14,p=U.locale),"presets"in U&&i(15,h=U.presets),"scrollElasticity"in U&&i(0,g=U.scrollElasticity),"enableSelectImage"in U&&i(16,m=U.enableSelectImage),"willRenderPresetToolbar"in U&&i(17,f=U.willRenderPresetToolbar),"onaddpreset"in U&&i(1,x=U.onaddpreset),"ongrabpreset"in U&&i(2,w=U.ongrabpreset),"ondragpreset"in U&&i(3,S=U.ondragpreset),"ondroppreset"in U&&i(4,C=U.ondroppreset)},t.$$.update=()=>{32768&t.$$.dirty&&i(7,n=D(h)),128&t.$$.dirty&&i(9,r=n.length),640&t.$$.dirty&&i(8,o=r&&n.some(U=>!!U.items)),384&t.$$.dirty&&i(5,a=o&&n),384&t.$$.dirty&&i(13,s=o&&n.reduce((U,P)=>(U[P.id]=P,U),{})),96&t.$$.dirty&&i(6,l=l||a&&(a.find(U=>!U.disabled)||{}).id),64&t.$$.dirty&&i(12,c={name:I,selected:l}),32&t.$$.dirty&&i(11,d=a&&a.map(U=>U.id)),212994&t.$$.dirty&&i(10,u=p&&f([m&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{V2().then(U=>{U&&x(U)})}}]]))},[g,x,w,S,C,a,l,n,o,r,u,d,c,s,p,h,m,f,({detail:U})=>i(6,l=U)]}class ob extends li{constructor(e){super(),si(this,e,g6,$6,oi,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}function f6(t){let e,i,n,r;return e=new mo({props:{items:t[30]}}),n=new Uu({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[165]}}),{c(){It(e.$$.fragment),i=$e(),It(n.$$.fragment)},m(o,a){Pt(e,o,a),it(o,i,a),Pt(n,o,a),r=!0},p(o,a){const s={};1073741824&a[0]&&(s.items=o[30]),e.$set(s);const l={};16&a[0]&&(l.locale=o[4]),262144&a[1]&&(l.shapeProps=o[49]),512&a[0]&&(l.controls=o[9]),n.$set(l)},i(o){r||(M(e.$$.fragment,o),M(n.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),F(n.$$.fragment,o),r=!1},d(o){Rt(e,o),o&&Q(i),Rt(n,o)}}}function y6(t){let e,i,n;return i=new eb({props:{$$slots:{default:[f6]},$$scope:{ctx:t}}}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"slot","header")},m(r,o){it(r,e,o),Pt(i,e,null),n=!0},p(r,o){const a={};1073742352&o[0]|262144&o[1]|67108864&o[6]&&(a.$$scope={dirty:o,ctx:r}),i.$set(a)},i(r){n||(M(i.$$.fragment,r),n=!0)},o(r){F(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Rt(i)}}}function Bf(t){let e,i;const n=[{locale:t[4]},{ui:t[69]},{shapes:t[5]},{selection:t[58]},{uid:t[20]},{parentRect:t[37]},{rootRect:t[55]},{utilRect:t[39]},{offset:t[50]},{disabled:t[38]},{contextRotation:t[23]},{contextFlipX:t[24]},{contextFlipY:t[25]},{contextZoom:t[36]?t[36].scale:void 0},{active:t[35]},{opacity:t[56]},{hoverColor:t[57]},{caretColor:t[57]},{snapColor:t[57]},{gridColor:[1,1,1,.125]},{eraseRadius:t[47]},{selectRadius:t[6]},{enableButtonFlipVertical:t[10]},{enableMultiSelect:t[14]},{mapEditorPointToImagePoint:t[21]},{mapImagePointToEditorPoint:t[22]},{enableTapToAddText:t[13]},{textInputMode:t[8]},{snapThreshold:t[16]},{snapPointer:!t[48]},{enableSnapToContext:t[17]},{gridSize:t[15]},{willStartInteraction:t[95]},{oninteractionstart:t[79]},{oninteractionupdate:t[80]},{oninteractionrelease:t[81]},{oninteractionend:t[83]},{oninteractioncancel:t[82]},{onleavecanvas:t[87]},{onhovercanvas:t[86]},{onhovershape:t[89]},{ontapcanvas:t[88]},{onaddshape:t[156]},{onselectshape:t[157]},{onblurshape:t[158]},{ontapshape:t[159]},{onupdateshape:t[160]},{onremoveshape:t[161]},{ontriggerhistorywrite:t[162]},t[42]];let r={};for(let o=0;o<n.length;o+=1)r=Cn(r,n[o]);return e=new qS({props:r}),t[163](e),{c(){It(e.$$.fragment)},m(o,a){Pt(e,o,a),i=!0},p(o,a){const s=66315632&a[0]|252381681&a[1]|255721600&a[2]|12&a[3]?Tr(n,[16&a[0]&&{locale:o[4]},128&a[2]&&{ui:o[69]},32&a[0]&&{shapes:o[5]},134217728&a[1]&&{selection:o[58]},1048576&a[0]&&{uid:o[20]},64&a[1]&&{parentRect:o[37]},16777216&a[1]&&{rootRect:o[55]},256&a[1]&&{utilRect:o[39]},524288&a[1]&&{offset:o[50]},128&a[1]&&{disabled:o[38]},8388608&a[0]&&{contextRotation:o[23]},16777216&a[0]&&{contextFlipX:o[24]},33554432&a[0]&&{contextFlipY:o[25]},32&a[1]&&{contextZoom:o[36]?o[36].scale:void 0},16&a[1]&&{active:o[35]},33554432&a[1]&&{opacity:o[56]},67108864&a[1]&&{hoverColor:o[57]},67108864&a[1]&&{caretColor:o[57]},67108864&a[1]&&{snapColor:o[57]},n[19],65536&a[1]&&{eraseRadius:o[47]},64&a[0]&&{selectRadius:o[6]},1024&a[0]&&{enableButtonFlipVertical:o[10]},16384&a[0]&&{enableMultiSelect:o[14]},2097152&a[0]&&{mapEditorPointToImagePoint:o[21]},4194304&a[0]&&{mapImagePointToEditorPoint:o[22]},8192&a[0]&&{enableTapToAddText:o[13]},256&a[0]&&{textInputMode:o[8]},65536&a[0]&&{snapThreshold:o[16]},131072&a[1]&&{snapPointer:!o[48]},131072&a[0]&&{enableSnapToContext:o[17]},32768&a[0]&&{gridSize:o[15]},4&a[3]&&{willStartInteraction:o[95]},131072&a[2]&&{oninteractionstart:o[79]},262144&a[2]&&{oninteractionupdate:o[80]},524288&a[2]&&{oninteractionrelease:o[81]},2097152&a[2]&&{oninteractionend:o[83]},1048576&a[2]&&{oninteractioncancel:o[82]},33554432&a[2]&&{onleavecanvas:o[87]},16777216&a[2]&&{onhovercanvas:o[86]},134217728&a[2]&&{onhovershape:o[89]},67108864&a[2]&&{ontapcanvas:o[88]},1&a[1]|8&a[3]&&{onaddshape:o[156]},1&a[1]&&{onselectshape:o[157]},1&a[1]&&{onblurshape:o[158]},1&a[1]&&{ontapshape:o[159]},1&a[1]|8&a[3]&&{onupdateshape:o[160]},1&a[1]|8&a[3]&&{onremoveshape:o[161]},8&a[3]&&{ontriggerhistorywrite:o[162]},2048&a[1]&&Br(o[42])]):{};e.$set(s)},i(o){i||(M(e.$$.fragment,o),i=!0)},o(o){F(e.$$.fragment,o),i=!1},d(o){t[163](null),Rt(e,o)}}}function b6(t){let e,i,n,r,o,a=t[51]&&Bf(t);return{c(){e=ut("div"),a&&a.c(),v(e,"slot","main"),v(e,"style",i="cursor:"+t[46])},m(s,l){it(s,e,l),a&&a.m(e,null),t[164](e),n=!0,r||(o=[Mt(e,"keydown",t[84]),Zi(k2.call(null,e)),Mt(e,"dropfiles",function(){Gi(t[12]?t[94]:fe)&&(t[12]?t[94]:fe).apply(this,arguments)}),Zi(Mr.call(null,e)),Mt(e,"measure",t[152])],r=!0)},p(s,l){(t=s)[51]?a?(a.p(t,l),1048576&l[1]&&M(a,1)):(a=Bf(t),a.c(),M(a,1),a.m(e,null)):a&&(Ie(),F(a,1,1,()=>{a=null}),Ee()),(!n||32768&l[1]&&i!==(i="cursor:"+t[46]))&&v(e,"style",i)},i(s){n||(M(a),n=!0)},o(s){F(a),n=!1},d(s){s&&Q(e),a&&a.d(),t[164](null),r=!1,ji(o)}}}function x6(t){let e,i;return e=new ob({props:{locale:t[4],presets:t[19],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[93],ongrabpreset:t[90],ondragpreset:t[91],ondroppreset:t[92],scrollElasticity:t[44]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.locale=n[4]),524288&r[0]&&(o.presets=n[19]),2048&r[0]&&(o.enableSelectImage=n[11]),4096&r[1]&&(o.willRenderPresetToolbar=n[43]),8192&r[1]&&(o.scrollElasticity=n[44]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function v6(t){let e,i,n,r=t[7]==="stack"&&Of(t),o=(t[53]&&t[34]||t[7]==="row")&&Wf(t);return{c(){r&&r.c(),e=$e(),o&&o.c(),i=Tn()},m(a,s){r&&r.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,i,s),n=!0},p(a,s){a[7]==="stack"?r?(r.p(a,s),128&s[0]&&M(r,1)):(r=Of(a),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee()),a[53]&&a[34]||a[7]==="row"?o?(o.p(a,s),128&s[0]|4194312&s[1]&&M(o,1)):(o=Wf(a),o.c(),M(o,1),o.m(i.parentNode,i)):o&&(Ie(),F(o,1,1,()=>{o=null}),Ee())},i(a){n||(M(r),M(o),n=!0)},o(a){F(r),F(o),n=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(i)}}}function Of(t){let e,i,n,r;const o=[S6,w6],a=[];function s(l,c){return l[45]?0:1}return i=s(t),n=a[i]=o[i](t),{c(){e=ut("div"),n.c(),v(e,"class","PinturaControlPanels")},m(l,c){it(l,e,c),a[i].m(e,null),r=!0},p(l,c){let d=i;i=s(l),i===d?a[i].p(l,c):(Ie(),F(a[d],1,1,()=>{a[d]=null}),Ee(),n=a[i],n?n.p(l,c):(n=a[i]=o[i](l),n.c()),M(n,1),n.m(e,null))},i(l){r||(M(n),r=!0)},o(l){F(n),r=!1},d(l){l&&Q(e),a[i].d()}}}function w6(t){let e,i,n;return i=new Uu({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollElasticity:t[44],willRenderControls:t[18]}}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"class","PinturaControlPanel")},m(r,o){it(r,e,o),Pt(i,e,null),n=!0},p(r,o){const a={};16&o[0]&&(a.locale=r[4]),262144&o[1]&&(a.shapeProps=r[49]),512&o[0]&&(a.controls=r[9]),8192&o[1]&&(a.scrollElasticity=r[44]),262144&o[0]&&(a.willRenderControls=r[18]),i.$set(a)},i(r){n||(M(i.$$.fragment,r),n=!0)},o(r){F(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Rt(i)}}}function S6(t){let e,i,n;return i=new ob({props:{locale:t[4],presets:t[19],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[93],ongrabpreset:t[90],ondragpreset:t[91],ondroppreset:t[92],scrollElasticity:t[44]}}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"class","PinturaControlPanel")},m(r,o){it(r,e,o),Pt(i,e,null),n=!0},p(r,o){const a={};16&o[0]&&(a.locale=r[4]),524288&o[0]&&(a.presets=r[19]),2048&o[0]&&(a.enableSelectImage=r[11]),4096&o[1]&&(a.willRenderPresetToolbar=r[43]),8192&o[1]&&(a.scrollElasticity=r[44]),i.$set(a)},i(r){n||(M(i.$$.fragment,r),n=!0)},o(r){F(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Rt(i)}}}function Wf(t){let e,i;return e=new Ta({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[T6]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};8192&r[1]&&(o.elasticity=n[44]),262801&r[0]|262154&r[1]|67108864&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function _f(t){let e,i;return e=new cs({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[32],selectedIndex:t[32].findIndex(t[153]),onchange:t[78],$$slots:{option:[C6,({option:n})=>({211:n}),({option:n})=>[0,0,0,0,0,0,n?33554432:0]]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.locale=n[4]),2&r[1]&&(o.options=n[32]),1&r[0]|2&r[1]&&(o.selectedIndex=n[32].findIndex(n[153])),16&r[0]|100663296&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function Vf(t){let e,i;return e=new Lo({props:{$$slots:{default:[k6]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16&r[0]|100663296&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function k6(t){let e,i=(sn(t[211].icon)?t[211].icon(t[4]):t[211].icon)+"";return{c(){e=kr("g")},m(n,r){it(n,e,r),e.innerHTML=i},p(n,r){16&r[0]|33554432&r[6]&&i!==(i=(sn(n[211].icon)?n[211].icon(n[4]):n[211].icon)+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function Nf(t){let e,i,n=(sn(t[211].label)?t[211].label(t[4]):t[211].label)+"";return{c(){e=ut("span"),i=$n(n)},m(r,o){it(r,e,o),St(e,i)},p(r,o){16&o[0]|33554432&o[6]&&n!==(n=(sn(r[211].label)?r[211].label(r[4]):r[211].label)+"")&&Ln(i,n)},d(r){r&&Q(e)}}}function C6(t){let e,i,n,r=t[211].icon&&Vf(t),o=!t[211].hideLabel&&Nf(t);return{c(){e=ut("div"),r&&r.c(),i=$e(),o&&o.c(),v(e,"slot","option")},m(a,s){it(a,e,s),r&&r.m(e,null),St(e,i),o&&o.m(e,null),n=!0},p(a,s){a[211].icon?r?(r.p(a,s),33554432&s[6]&&M(r,1)):(r=Vf(a),r.c(),M(r,1),r.m(e,i)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee()),a[211].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=Nf(a),o.c(),o.m(e,null))},i(a){n||(M(r),n=!0)},o(a){F(r),n=!1},d(a){a&&Q(e),r&&r.d(),o&&o.d()}}}function Hf(t){let e,i;return e=new Uu({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[154]}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.locale=n[4]),262144&r[1]&&(o.shapeProps=n[49]),512&r[0]&&(o.controls=n[9]),262144&r[0]&&(o.willRenderControls=n[154]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function T6(t){let e,i,n,r=t[34]&&_f(t),o=t[7]==="row"&&Hf(t);return{c(){r&&r.c(),e=$e(),o&&o.c(),i=Tn()},m(a,s){r&&r.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,i,s),n=!0},p(a,s){a[34]?r?(r.p(a,s),8&s[1]&&M(r,1)):(r=_f(a),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(Ie(),F(r,1,1,()=>{r=null}),Ee()),a[7]==="row"?o?(o.p(a,s),128&s[0]&&M(o,1)):(o=Hf(a),o.c(),M(o,1),o.m(i.parentNode,i)):o&&(Ie(),F(o,1,1,()=>{o=null}),Ee())},i(a){n||(M(r),M(o),n=!0)},o(a){F(r),F(o),n=!1},d(a){r&&r.d(a),a&&Q(e),o&&o.d(a),a&&Q(i)}}}function jf(t){let e,i;return e=new Ta({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[R6]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};8192&r[1]&&(o.elasticity=n[44]),134217744&r[0]|8388608&r[1]|67108864&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function Uf(t){let e,i;return e=new Lo({props:{$$slots:{default:[M6]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16&r[0]|100663296&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function M6(t){let e,i=(sn(t[211].icon)?t[211].icon(t[4]):t[211].icon)+"";return{c(){e=kr("g")},m(n,r){it(n,e,r),e.innerHTML=i},p(n,r){16&r[0]|33554432&r[6]&&i!==(i=(sn(n[211].icon)?n[211].icon(n[4]):n[211].icon)+"")&&(e.innerHTML=i)},d(n){n&&Q(e)}}}function P6(t){let e,i,n,r,o,a=(sn(t[211].label)?t[211].label(t[4]):t[211].label)+"",s=t[211].icon&&Uf(t);return{c(){e=ut("div"),s&&s.c(),i=$e(),n=ut("span"),r=$n(a),v(e,"slot","option")},m(l,c){it(l,e,c),s&&s.m(e,null),St(e,i),St(e,n),St(n,r),o=!0},p(l,c){l[211].icon?s?(s.p(l,c),33554432&c[6]&&M(s,1)):(s=Uf(l),s.c(),M(s,1),s.m(e,i)):s&&(Ie(),F(s,1,1,()=>{s=null}),Ee()),(!o||16&c[0]|33554432&c[6])&&a!==(a=(sn(l[211].label)?l[211].label(l[4]):l[211].label)+"")&&Ln(r,a)},i(l){o||(M(s),o=!0)},o(l){F(s),o=!1},d(l){l&&Q(e),s&&s.d()}}}function R6(t){let e,i;return e=new cs({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[54],selectedIndex:t[54].findIndex(t[155]),onchange:t[77],$$slots:{option:[P6,({option:n})=>({211:n}),({option:n})=>[0,0,0,0,0,0,n?33554432:0]]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};16&r[0]&&(o.locale=n[4]),8388608&r[1]&&(o.options=n[54]),134217728&r[0]|8388608&r[1]&&(o.selectedIndex=n[54].findIndex(n[155])),16&r[0]|100663296&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function I6(t){let e,i,n,r,o;const a=[v6,x6],s=[];function l(d,u){return d[52]?0:d[45]?1:-1}~(i=l(t))&&(n=s[i]=a[i](t));let c=t[33]&&jf(t);return{c(){e=ut("div"),n&&n.c(),r=$e(),c&&c.c(),v(e,"slot","footer"),v(e,"style",t[40])},m(d,u){it(d,e,u),~i&&s[i].m(e,null),St(e,r),c&&c.m(e,null),o=!0},p(d,u){let p=i;i=l(d),i===p?~i&&s[i].p(d,u):(n&&(Ie(),F(s[p],1,1,()=>{s[p]=null}),Ee()),~i?(n=s[i],n?n.p(d,u):(n=s[i]=a[i](d),n.c()),M(n,1),n.m(e,r)):n=null),d[33]?c?(c.p(d,u),4&u[1]&&M(c,1)):(c=jf(d),c.c(),M(c,1),c.m(e,null)):c&&(Ie(),F(c,1,1,()=>{c=null}),Ee()),(!o||512&u[1])&&v(e,"style",d[40])},i(d){o||(M(n),M(c),o=!0)},o(d){F(n),F(c),o=!1},d(d){d&&Q(e),~i&&s[i].d(),c&&c.d()}}}function E6(t){let e,i;return e=new ul({props:{hasHeader:t[41],$$slots:{footer:[I6],main:[b6],header:[y6]},$$scope:{ctx:t}}}),e.$on("measure",t[166]),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};1024&r[1]&&(o.hasHeader=n[41]),2080374769&r[0]|134216703&r[1]|67108864&r[6]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function A6(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,w,S,C,I,E,B,T,D,U,P,y,V,nt,k,N,tt,ct,ot,mt,Z,gt,xt,dt,wt,J,q,ft,Lt,_,rt,zt,Zt,Ot,Yt,Ut,ht,G,kt,ne,ue,Nt,xe,Ht,ze,W,Re,Se,Xt,Be,Fe,Xe,yi,bt,be=Je,Ue=()=>(be(),be=Gr(X,O=>i(35,rt=O)),X),Le=Je,Ve=()=>(Le(),Le=Gr(we,O=>i(145,Yt=O)),we),Ge=Je,Qe=()=>(Ge(),Ge=Gr(Zn,O=>i(37,Nt=O)),Zn),vi=Je,Si=()=>(vi(),vi=Gr(H,O=>i(151,Be=O)),H),Jt=Je,Ci=()=>(Jt(),Jt=Gr(Vt,O=>i(56,yi=O)),Vt);t.$$.on_destroy.push(()=>be()),t.$$.on_destroy.push(()=>Le()),t.$$.on_destroy.push(()=>Ge()),t.$$.on_destroy.push(()=>vi()),t.$$.on_destroy.push(()=>Jt());let{isActive:X}=e;Ue();let{isActiveFraction:Vt}=e;Ci();let{isVisible:H}=e;Si();let{stores:ie}=e,{locale:pe={}}=e,{shapes:we}=e;Ve();let{toolbar:ye=[]}=e,{toolShapes:ee={}}=e,{toolActive:qt}=e,{toolSelectRadius:ei}=e,{toolRetainStyles:Ze=!1}=e,{toolbarLayout:lt="stack"}=e,{textInputMode:Dt}=e,{shapeControls:re={}}=e,{enableButtonFlipVertical:Te=!1}=e,{enablePresetSelectImage:Qt=!0}=e,{enablePresetDropImage:et=!0}=e,{enableSelectToolToAddShape:jt=!1}=e,{enableAutoSelectMoveTool:Gt=["line","arrow","path","rectangle","ellipse","text"]}=e,{enableTapToAddText:ce=!1}=e,{enableMoveTool:Ne=!1}=e,{enableViewTool:He=!1}=e,{enableToolShareStyles:Me=!0}=e,{enableMultiSelect:gn=!1}=e,{gridSize:rn=0}=e,{snapThreshold:ve=0}=e,{enableSnapToContext:ii=!0}=e,{willRenderHeaderTools:Pe=qi}=e,{willRenderPresetToolbar:ci}=e,{willRenderShapeStyleControls:je}=e,{willStartInteraction:te}=e,{shapePresets:De=[]}=e,{utilKey:ki}=e,{mapScreenPointToImagePoint:bn}=e,{mapImagePointToScreenPoint:Mn}=e,{imageRotation:Hn=0}=e,{imageFlipX:Gn=!1}=e,{imageFlipY:Ui=!1}=e,{parentRect:Zn}=e;Qe();let{hooks:yr={}}=e;const $r=un("selection");L(t,$r,O=>i(150,Re=O));const Pr=un("isAnimated");L(t,Pr,O=>i(142,zt=O));const Go=un("elasticityMultiplier");L(t,Go,O=>i(146,Ut=O));const ln=un("ui");L(t,ln,O=>i(176,Se=O));const $o=un("keysPressed");let en;L(t,$o,O=>i(149,W=O));const{env:pn,history:gi,rootRect:ar,rootColorSecondary:eo,enablePanInput:zo,enablePanInputStatus:go,enableZoomInput:Fo,stageRect:Or,utilRectPadded:Xn,scrollElasticity:cn,imageOverlayMarkup:Yr,imagePreviewModifiers:io,imageCropRect:Wr,shapePreprocessor:qr,stageScalar:br,imageSelectionRect:no,imageTransformsInterpolated:Rr,imageSelectionPan:_r,imageSize:ro,allowPan:Vr,allowZoom:Co,allowZoomControls:fo,allowPlayPause:Ir}=ie;L(t,pn,O=>i(143,Zt=O)),L(t,ar,O=>i(55,Xe=O)),L(t,eo,O=>i(57,bt=O)),L(t,go,O=>i(38,Ht=O)),L(t,Or,O=>i(147,ht=O)),L(t,Xn,O=>i(39,Xt=O)),L(t,io,O=>i(177,Fe=O)),L(t,Wr,O=>i(175,xe=O)),L(t,br,O=>i(173,ne=O)),L(t,no,O=>i(174,ue=O)),L(t,Rr,O=>i(36,G=O)),L(t,_r,O=>i(172,kt=O)),L(t,ro,O=>i(148,ze=O));let Er=0,Ar={};const Nr=O=>{const[se,pi]=en[O];let ti,he,de=pi.position==="relative";const Ti=de?"0%":0,oe=de?"0%":0;Io(se)||ir(se)?(he=de?"20%":.2*Nt.width,ti=In(se),ti.x=Ti,ti.y=oe,wa(ti,{width:he,height:he},Nt)):nr(se)?(he=de?"10%":.1*Nt.width,ti=In(se),ti.x=Ti,ti.y=oe,wa(ti,{rx:he,ry:he},Nt)):lr(se)&&(he=de?"10%":.1*Nt.width,ti=In(se),ti.x1=Ti,ti.y1=oe,ti.x2=Ti,ti.y2=oe),ti&&Promise.resolve().then(()=>{_n(Do(ti,void 0,he))})},Yn=O=>bn(yh(O,Xe));let Li,jn={},Bn,mn;const Pn=O=>{if(!(Nn(O)&&Ae(O,"pathClose")))return;const se=[...O.strokeColor];se[3]=1,Li.updateMarkupShape(O,{pathClose:!1,strokeColor:se},!1),Li.removeMarkupShapeProps(O,["backgroundColor"],!1),Li.confirmMarkupItemDraft(),Li.selectShape(O),xt("addshape",O),gi.write()};let Jn;const Zo=(O,se)=>{const pi={};return Object.entries(O).forEach(([ti,he])=>{Ae(se,ti)&&(pi[ti]=he)}),pi},ha=(O,se)=>{if(ui(O))return O;if(O.endsWith("%"))return parseFloat(O)/100*se.width};let yo,On,Wn;const Do=(O,se,pi)=>{let ti=!1;se||(ti=!0,se=gt?bn(Ri(ht)):Ri(xe)),se.x-=Nt.x||0,se.y-=Nt.y||0,(Gn||Ui)&&(O.flipX=Gn,O.flipY=Ui);const he=Li.getShapesNearPosition(Yt,se);if(ti&&he.length){const de=.1*Math.min(xe.width,xe.height);se.x+=Math.round(-de+Math.random()*de*2),se.y+=Math.round(-de+Math.random()*de*2)}if(Hn!==0&&(O.rotation=Gn&&Ui?-Hn:Gn||Ui?Hn:-Hn),Ae(O,"width")&&Ae(O,"height")){const{width:de,height:Ti}=Bl(O,["width","height"],Nt);wa(O,{x:se.x-.5*de,y:se.y-.5*Ti},Nt)}else if(nr(O))wa(O,{x:se.x,y:se.y},Nt);else if(lr(O)){const{x1:de,y1:Ti,x2:oe,y2:on}=Bl(O,["x1","y1","x2","y2"],Nt),_i=So(at(de,Ti),at(oe,on)),Ii=_e(pi)?Tu(pi,Nt.width):_i;wa(O,{x1:se.x-Ii,y1:se.y+Ii,x2:se.x+Ii,y2:se.y-Ii},Nt)}else if(Nn(O)){const{points:de}=Bl(O,["points"],Nt),Ti=No(de);wa(O,{points:de.map(oe=>({x:oe.x+se.x-Ti.x,y:oe.y+se.y-Ti.y}))},Nt)}return O},oo=(O,se)=>{const pi=Do(Vm(O,xe),se);return O.shape&&(Ae(O.shape,"x")&&(pi.x=O.shape.x),Ae(O.shape,"y")&&(pi.y=O.shape.y)),_n(pi)},_n=O=>{const{beforeAddShape:se=()=>!0}=yr;if(se(O))return Li.addShape(O),Li.selectShape(O),xt("addshape",O),gi.write(),O};let gr=!1;const Vn=()=>{gi.write()};let Qn;const Kr=un("redrawTrigger");L(t,Kr,O=>i(144,Ot=O));const bo=[],ao=di(zt?20:0);return L(t,ao,O=>i(141,_=O)),t.$$set=O=>{"isActive"in O&&Ue(i(1,X=O.isActive)),"isActiveFraction"in O&&Ci(i(2,Vt=O.isActiveFraction)),"isVisible"in O&&Si(i(3,H=O.isVisible)),"stores"in O&&i(100,ie=O.stores),"locale"in O&&i(4,pe=O.locale),"shapes"in O&&Ve(i(5,we=O.shapes)),"toolbar"in O&&i(101,ye=O.toolbar),"toolShapes"in O&&i(102,ee=O.toolShapes),"toolActive"in O&&i(0,qt=O.toolActive),"toolSelectRadius"in O&&i(6,ei=O.toolSelectRadius),"toolRetainStyles"in O&&i(103,Ze=O.toolRetainStyles),"toolbarLayout"in O&&i(7,lt=O.toolbarLayout),"textInputMode"in O&&i(8,Dt=O.textInputMode),"shapeControls"in O&&i(9,re=O.shapeControls),"enableButtonFlipVertical"in O&&i(10,Te=O.enableButtonFlipVertical),"enablePresetSelectImage"in O&&i(11,Qt=O.enablePresetSelectImage),"enablePresetDropImage"in O&&i(12,et=O.enablePresetDropImage),"enableSelectToolToAddShape"in O&&i(104,jt=O.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in O&&i(105,Gt=O.enableAutoSelectMoveTool),"enableTapToAddText"in O&&i(13,ce=O.enableTapToAddText),"enableMoveTool"in O&&i(106,Ne=O.enableMoveTool),"enableViewTool"in O&&i(107,He=O.enableViewTool),"enableToolShareStyles"in O&&i(108,Me=O.enableToolShareStyles),"enableMultiSelect"in O&&i(14,gn=O.enableMultiSelect),"gridSize"in O&&i(15,rn=O.gridSize),"snapThreshold"in O&&i(16,ve=O.snapThreshold),"enableSnapToContext"in O&&i(17,ii=O.enableSnapToContext),"willRenderHeaderTools"in O&&i(109,Pe=O.willRenderHeaderTools),"willRenderPresetToolbar"in O&&i(110,ci=O.willRenderPresetToolbar),"willRenderShapeStyleControls"in O&&i(18,je=O.willRenderShapeStyleControls),"willStartInteraction"in O&&i(111,te=O.willStartInteraction),"shapePresets"in O&&i(19,De=O.shapePresets),"utilKey"in O&&i(20,ki=O.utilKey),"mapScreenPointToImagePoint"in O&&i(21,bn=O.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in O&&i(22,Mn=O.mapImagePointToScreenPoint),"imageRotation"in O&&i(23,Hn=O.imageRotation),"imageFlipX"in O&&i(24,Gn=O.imageFlipX),"imageFlipY"in O&&i(25,Ui=O.imageFlipY),"parentRect"in O&&Qe(i(26,Zn=O.parentRect)),"hooks"in O&&i(112,yr=O.hooks)},t.$$.update=()=>{var O,se,pi,ti;if(33554432&t.$$.dirty[4]&&i(124,n=W.includes(18)),1049088&t.$$.dirty[3]&&(en&&ee===en||i(113,en=ee)),16&t.$$.dirty[1]&&Vr.set(rt),16&t.$$.dirty[1]&&Co.set(rt),16&t.$$.dirty[1]&&fo.set(rt),256&t.$$.dirty[3]&&i(33,r=Array.isArray(ye)&&ye.length>1&&Array.isArray(ye[0][1])),4&t.$$.dirty[1]|256&t.$$.dirty[3]&&i(54,o=r?ye.map((he,de)=>[de,he[0]]):[]),134217728&t.$$.dirty[0]|4&t.$$.dirty[1]|256&t.$$.dirty[3]&&i(140,a=r?ye[Er][1]:ye),524288&t.$$.dirty[0]|155648&t.$$.dirty[3]|65536&t.$$.dirty[4]&&i(32,s=((he,{willRenderPresetToolbar:de,shapePresets:Ti,enableViewTool:oe,enableMoveTool:on})=>{let _i=Ti.length!==0||de?he:he.filter(Ii=>Ii[0]!=="preset");return r&&(_i=[["move",Ii=>Ii.shapeLabelToolMove,{icon:Ii=>Ii.shapeIconToolMove}],["view",Ii=>Ii.shapeLabelToolView,{icon:Ii=>Ii.shapeIconToolView}],..._i]),_i=on?_i:_i.filter(Ii=>Ii[0]!=="move"),oe?_i:_i.filter(Ii=>Ii[0]!=="view")})(a,{willRenderPresetToolbar:ci,shapePresets:De,enableMoveTool:Ne,enableViewTool:He})),2&t.$$.dirty[1]&&i(138,d=!!s.length),1&t.$$.dirty[0]|2&t.$$.dirty[1]|16384&t.$$.dirty[4]&&d&&qt===void 0&&i(0,qt=s[0][0]),134217729&t.$$.dirty[0]|4&t.$$.dirty[1]|2097152&t.$$.dirty[3]|65536&t.$$.dirty[4]&&r&&i(114,Ar={...Ar,[Er]:a.map(([he])=>he).includes(qt)?qt:Ar[Er]||a[0][0]}),512&t.$$.dirty[0]&&i(137,l=!!Object.keys(re).length),2&t.$$.dirty[1]&&i(34,c=s.length>1),12&t.$$.dirty[1]&&i(53,u=c||r),1&t.$$.dirty[0]&&i(139,p=qt!==void 0),57344&t.$$.dirty[4]&&i(52,h=(!p||d)&&l),536870912&t.$$.dirty[0]&&i(31,xt=Qn&&(O=Qn,(he,de)=>{O.dispatchEvent(bs(he,de))})),1&t.$$.dirty[0]|17&t.$$.dirty[1]&&rt&&xt&&xt("selectcontrol",qt),16&t.$$.dirty[1]&&(rt?vt(io,Fe[ki]={maskMarkupOpacity:.85},Fe):delete Fe[ki]),1&t.$$.dirty[0]|1048576&t.$$.dirty[3]&&i(136,g=qt&&en[qt]?en[qt][1]:void 0),4096&t.$$.dirty[4]&&i(125,m=g&&g.isSelection?"selection":"shapes"),3&t.$$.dirty[4]&&(he=>{if(!Li)return;const de=Li.getShapeDraft($r);de&&(he&&(Bn=de.drawMode),Li.updateShapeDraft({drawMode:he?"subtract":Bn},$r))})(m==="selection"&&n),268435457&t.$$.dirty[0]&&qt&&Li){const he=Li.getMarkupItemDraft();he&&Pn(he)}if(1&t.$$.dirty[0]&&qt&&Li&&qt!=="move"&&Li.blurShapes(),16&t.$$.dirty[1]|134217728&t.$$.dirty[4]&&i(51,f=Be&&rt),256&t.$$.dirty[1]|8388608&t.$$.dirty[4]&&i(50,x=Xt&&at(ht.x-Xt.x,ht.y-Xt.y)),512&t.$$.dirty[0]&&i(135,w=Object.keys(re)),16384&t.$$.dirty[0]|16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&i(122,S=gn?rt&&Yt.filter(xa):[]),536870912&t.$$.dirty[3]&&i(123,C=S.length>1),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&i(119,I=rt&&Yt.filter(xa)[0]),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&i(130,E=rt&&Yt.find(he=>fp(he))),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&i(133,B=rt&&Yt.find(he=>uo(he))),1&t.$$.dirty[0]|16&t.$$.dirty[1]|1048576&t.$$.dirty[3]&&i(127,T=rt&&en[qt]?Ly(In({...en[qt][0],...Se[ki]?Se[ki][qt]:{}})):{}),1048576&t.$$.dirty[3]&&en&&i(115,jn={}),1&t.$$.dirty[0]|4227072&t.$$.dirty[3]|2056&t.$$.dirty[4]&&i(126,D=T&&Object.keys(T).reduce((he,de)=>{const Ti=de==="disableStyle",oe=de==="settings",on=!!w.find(xr=>xr.split("_").includes(de));if(!Ti&&!oe&&!on||T[de]===void 0||T.disableStyle===!0||T.disableStyle&&T.disableStyle.includes(de))return he;if(de==="strokeWidth"&&Object.keys(jn).includes("strokeWidth")&&jn[de]===void 0&&Ae(T,"points"))return he[de]=T[de],he;const{share:_i=!0}=T.settings&&T.settings[de]||{},Ii=Me&&_i?jn:jn[qt]||{};return he[de]=Ae(Ii,de)?Ii[de]:T[de],he},{})),1048577&t.$$.dirty[0]|1024&t.$$.dirty[3]|4&t.$$.dirty[4]&&(Ze?((he,de,Ti)=>{const oe=Se[he],on=oe?oe[de]:{};ln.set({...Se,[he]:{...oe,[de]:{...on,...Ti}}})})(ki,qt,D):(se=ki,ln.set({[se]:{}}))),16&t.$$.dirty[1]|67108864&t.$$.dirty[3]|67108868&t.$$.dirty[4]&&i(134,U=Re&&rt?I||D:void 0),1610612736&t.$$.dirty[3]|1536&t.$$.dirty[4]&&i(49,P=C?function(he){const de={};return he.forEach(Ti=>{Object.entries(Ti).filter(([oe])=>!oe.startsWith("_")).forEach(([oe,on])=>{Ae(de,oe)?oe==="disableStyle"&&de[oe].push(...on):de[oe]=on})}),de}(S):U||B),1&t.$$.dirty[0]|8&t.$$.dirty[4]&&i(48,y=Ae(T,"eraseRadius")||Ae(T,"points")&&!Ae(T,"pathClose")||qt==="move"||qt==="view"),64&t.$$.dirty[1]|8&t.$$.dirty[4]&&i(47,V=T&&T.eraseRadius!==void 0?ha(T.eraseRadius,Nt):void 0),16&t.$$.dirty[1]|33554432&t.$$.dirty[4]&&i(131,nt=rt&&W.includes(32)),1&t.$$.dirty[0]|16&t.$$.dirty[1]&&i(132,k=rt&&qt==="view"),384&t.$$.dirty[4]&&i(129,N=k||nt),96&t.$$.dirty[4]&&i(128,tt=!!N&&(!!E||jc(document.activeElement))),16&t.$$.dirty[1]|48&t.$$.dirty[4]&&zo.set(!rt||N&&!tt),16&t.$$.dirty[1]|16&t.$$.dirty[4]&&Fo.set(!rt||!tt),64&t.$$.dirty[1]|12&t.$$.dirty[4]&&i(120,ct=T.cursorStyle?(({cursorStyle:he,cursorSize:de},Ti,oe)=>{let on;const _i=Ti[de];if(_i===void 0?on=ha(de,oe):ui(_i)?on=_i:_e(_i)&&(on=Ux(de,Ti[de],oe),de==="strokeWidth"&&(on*=.5)),!(on<=0||on===void 0))return{size:on,style:he}})(T,{...T,...D},Nt):void 0),33554432&t.$$.dirty[3]|16777216&t.$$.dirty[4]&&i(121,ot=Wn&&(ti=ze,(pi=Wn).x>=0&&pi.y>=0&&pi.x<=ti.width&&pi.y<=ti.height)),1048576&t.$$.dirty[0]|160&t.$$.dirty[1]|427819008&t.$$.dirty[3]|3&t.$$.dirty[4])if(ot&&!yo&&ct&&!Ht){const he=ct.size*G.scale,de={id:"cursor-"+ki,x:On.x,y:On.y,strokeWidth:.5,strokeColor:[0,0,0]};ct.style==="ellipse"&&(de.rx=he,de.ry=he);const Ti={strokeWidth:2.5,strokeColor:[1,1,1],opacity:.75},oe=[{...de,...Ti},de];if(m==="selection"&&n){const on=he,_i=On.x+on,Ii=On.y+on+4,xr={id:"cursor-"+ki,strokeWidth:.75,strokeColor:[0,0,0],points:[{x:_i,y:Ii},{x:_i+4,y:Ii}]};oe.push({...xr,...Ti,strokeWidth:2,points:[{x:_i-.5,y:Ii},{x:_i+4.5,y:Ii}]},xr)}(on=>{Yr.update(_i=>[..._i.filter(Ii=>Ii.id!=="cursor-"+ki),...on])})(oe)}else Yr.update(he=>he.filter(de=>de.id!=="cursor-"+ki));1&t.$$.dirty[0]|128&t.$$.dirty[1]|478150656&t.$$.dirty[3]&&i(46,mt=ot?((he,de,Ti,oe,on,_i)=>{if(oe)return on?"grabbing":"grab";if(he&&!de)return"none";if(!de)return _i==="move"?"default":"crosshair";let Ii=de||Ti;return xa(Ii)?fp(Ii)?Dt==="modal"?"default":"text":!ol(Ii)||C&&!S.every(ol)?"default":"move":"default"})(ct,yo,I,Ht,!1,qt):"default"),526337&t.$$.dirty[0]|131072&t.$$.dirty[3]&&i(45,Z=qt==="preset"&&(De.length>0||Qt||ci)),64&t.$$.dirty[1]&&(gt=!Ae(Nt,"x")&&!Ae(Nt,"y")),4194304&t.$$.dirty[4]&&i(44,dt=Ut*cn),131072&t.$$.dirty[3]|1572864&t.$$.dirty[4]&&i(43,wt=Ot&&ci?he=>Uc(()=>ci(he,oo,{...Zt},()=>Kr.set({}))):qi),524288&t.$$.dirty[3]&&i(42,J=Object.keys(yr).reduce((he,de)=>(de==="beforeAddShape"||yr[de]===void 0||(he[de]=yr[de]),he),{})),16&t.$$.dirty[1]&&(he=>{Yt&&we.update(de=>de.map(Ti=>(Ti._prerender=!!he&&fp(Ti),Ti)))})(rt),65536&t.$$.dirty[3]|1572864&t.$$.dirty[4]&&i(30,q=Ot&&Pe([],Zt,()=>Kr.set({}))),1073742336&t.$$.dirty[0]&&i(41,ft=!!q.length||!!Object.keys(re).some(he=>bo.includes(he))),16&t.$$.dirty[1]|262144&t.$$.dirty[4]&&zt&&ao.set(rt?0:20),131072&t.$$.dirty[4]&&i(40,Lt=_?`transform: translateY(${_}px)`:void 0)},Ir.set(!1),[qt,X,Vt,H,pe,we,ei,lt,Dt,re,Te,Qt,et,ce,gn,rn,ve,ii,je,De,ki,bn,Mn,Hn,Gn,Ui,Zn,Er,Li,Qn,q,xt,s,r,c,rt,G,Nt,Ht,Xt,Lt,ft,J,wt,dt,Z,mt,V,y,P,x,f,h,u,o,Xe,yi,bt,$r,Pr,Go,ln,$o,pn,ar,eo,go,Or,Xn,Yr,io,Wr,br,no,Rr,_r,ro,({index:O},se)=>{i(27,Er=O),i(0,qt=Ar[O])},({value:O},se)=>{i(0,qt=O),(jt||/enter/i.test(se.key))&&Nr(O)},O=>{if(qt==="eraser")mn=Li.eraseShape();else if(qt&&en[qt]){const[se,pi={}]=en[qt],{drawMode:ti}=U;m==="selection"&&ti==="new"&&$r.set([]);let he={};m==="selection"&&(xt("selectiondown",[...Re]),n&&(Bn=se.drawMode,he.drawMode="subtract")),mn=Li.createShape({...se,...D,...he},pi)}else mn=void 0;return!!mn&&(mn.start(O),!0)},O=>!!mn&&(mn.update(O),!0),O=>!!mn&&(mn.release(O),!0),O=>!!mn&&(mn.cancel(O),mn=void 0,!0),O=>{if(!mn)return!1;if(mn.end(O),mn=void 0,m==="selection"){if(O.detail.isTap){const[ti]=en[qt];ti.bitmap||$r.set([])}xt("selectionup",[...Re])}const se=Li.getMarkupItemDraft(),pi=Ne&&(Gt===!0||Array.isArray(Gt)&&Gt.includes(qt));return se&&!se.isEditing||!pi||i(0,qt="move"),!0},O=>{const{key:se}=O,pi=Li.getMarkupItemDraft();/escape/i.test(se)&&pi&&(O.preventDefault(),O.stopPropagation(),Li.discardMarkupItemDraft(),mn=void 0),/enter/i.test(se)&&pi&&(O.preventDefault(),O.stopPropagation(),Pn(pi),mn=void 0)},function(O){Object.keys(O).forEach(se=>{const{retain:pi=!0,share:ti=!0}=T.settings&&T.settings[se]||{};pi&&(Me&&ti?i(115,jn[se]=O[se],jn):(jn[qt]||i(115,jn[qt]={},jn),i(115,jn[qt][se]=O[se],jn)))}),xt("selectstyle",O),I&&(C?S.forEach(se=>{Li.updateMarkupShape(se,Zo(O,se))}):Li.updateMarkupShape(I,O),clearTimeout(Jn),Jn=setTimeout(()=>{Vn()},200))},(O,se,pi)=>{i(117,On=se),i(118,Wn=pi)},()=>{i(118,Wn=void 0),i(117,On=void 0)},O=>{xt("markuptap",O)},O=>i(116,yo=O),()=>{gr=!1},(O,se)=>{if(gr)return;const{beforeAddShape:pi=()=>!0}=yr,ti=Yn(se),he=Li.getMarkupItemDraft(),de=xu(xe,{x:ti.x+(Nt.x||0),y:ti.y+(Nt.y||0)});if(he&&!de&&Li.discardMarkupItemDraft(),de){if(!he){const Ti=Vm(O,xe),oe=Do(Ti,ti);return pi(oe)?(Kp(oe),void Li.addShape(oe)):(gr=!0,void se.preventDefault())}Io(he)&&(ti.x-=.5*he.width,ti.y-=.5*he.height),O.shape&&(Ae(O.shape,"x")&&(ti.x=O.shape.x),Ae(O.shape,"y")&&(ti.y=O.shape.y)),Li.updateMarkupShape(he,ti)}},(O,se)=>{if(gr)return;const pi=Yn(se);if(!xu(xe,{x:pi.x+(Nt.x||0),y:pi.y+(Nt.y||0)}))return void Li.discardMarkupItemDraft();const ti=Li.confirmMarkupItemDraft();Li.selectShape(ti),xt("addshape",ti),gi.write()},O=>oo(O),O=>{return se=O.detail.resources,pi=Yn(O.detail.event),se.forEach(ti=>oo(ti,pi));var se,pi},O=>{if(!te)return!0;const se=rectClone(ue);return rectScale(se,1/ne),rectTranslate(se,kt),rectScale(se,G.scale),te(O,{...se,x:se.x+ht.x,y:se.y+ht.y})},Vn,Kr,bo,ao,ie,ye,ee,Ze,jt,Gt,Ne,He,Me,Pe,ci,te,yr,en,Ar,jn,yo,On,Wn,I,ct,ot,S,C,n,m,D,T,tt,N,E,nt,k,B,U,w,g,l,d,p,a,_,zt,Zt,Ot,Yt,Ut,ht,ze,W,Re,Be,function(O){Xr.call(this,t,O)},O=>O[0]===qt,(O,se,pi)=>{const ti=O.filter(([,he])=>!bo.includes(he));return je?je(ti,se,pi):ti},O=>O[0]===Er,O=>{Promise.resolve().then(()=>{xt("addshape",O),Vn()})},O=>{xt("selectshape",O)},O=>{Promise.resolve().then(()=>{xt("blurshape",O)})},O=>{xt("tapshape",O)},O=>{xt("updateshape",O),Vn()},O=>{xt("removeshape",O),Vn()},()=>{Vn()},function(O){Wi[O?"unshift":"push"](()=>{Li=O,i(28,Li)})},function(O){Wi[O?"unshift":"push"](()=>{Qn=O,i(29,Qn)})},O=>O.filter(([,se])=>bo.includes(se)),function(O){Xr.call(this,t,O)}]}class Gu extends li{constructor(e){super(),si(this,e,A6,E6,oi,{isActive:1,isActiveFraction:2,isVisible:3,stores:100,locale:4,shapes:5,toolbar:101,toolShapes:102,toolActive:0,toolSelectRadius:6,toolRetainStyles:103,toolbarLayout:7,textInputMode:8,shapeControls:9,enableButtonFlipVertical:10,enablePresetSelectImage:11,enablePresetDropImage:12,enableSelectToolToAddShape:104,enableAutoSelectMoveTool:105,enableTapToAddText:13,enableMoveTool:106,enableViewTool:107,enableToolShareStyles:108,enableMultiSelect:14,gridSize:15,snapThreshold:16,enableSnapToContext:17,willRenderHeaderTools:109,willRenderPresetToolbar:110,willRenderShapeStyleControls:18,willStartInteraction:111,shapePresets:19,utilKey:20,mapScreenPointToImagePoint:21,mapImagePointToScreenPoint:22,imageRotation:23,imageFlipX:24,imageFlipY:25,parentRect:26,hooks:112},null,[-1,-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),R()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),R()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),R()}get stores(){return this.$$.ctx[100]}set stores(e){this.$$set({stores:e}),R()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),R()}get shapes(){return this.$$.ctx[5]}set shapes(e){this.$$set({shapes:e}),R()}get toolbar(){return this.$$.ctx[101]}set toolbar(e){this.$$set({toolbar:e}),R()}get toolShapes(){return this.$$.ctx[102]}set toolShapes(e){this.$$set({toolShapes:e}),R()}get toolActive(){return this.$$.ctx[0]}set toolActive(e){this.$$set({toolActive:e}),R()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(e){this.$$set({toolSelectRadius:e}),R()}get toolRetainStyles(){return this.$$.ctx[103]}set toolRetainStyles(e){this.$$set({toolRetainStyles:e}),R()}get toolbarLayout(){return this.$$.ctx[7]}set toolbarLayout(e){this.$$set({toolbarLayout:e}),R()}get textInputMode(){return this.$$.ctx[8]}set textInputMode(e){this.$$set({textInputMode:e}),R()}get shapeControls(){return this.$$.ctx[9]}set shapeControls(e){this.$$set({shapeControls:e}),R()}get enableButtonFlipVertical(){return this.$$.ctx[10]}set enableButtonFlipVertical(e){this.$$set({enableButtonFlipVertical:e}),R()}get enablePresetSelectImage(){return this.$$.ctx[11]}set enablePresetSelectImage(e){this.$$set({enablePresetSelectImage:e}),R()}get enablePresetDropImage(){return this.$$.ctx[12]}set enablePresetDropImage(e){this.$$set({enablePresetDropImage:e}),R()}get enableSelectToolToAddShape(){return this.$$.ctx[104]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),R()}get enableAutoSelectMoveTool(){return this.$$.ctx[105]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),R()}get enableTapToAddText(){return this.$$.ctx[13]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),R()}get enableMoveTool(){return this.$$.ctx[106]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),R()}get enableViewTool(){return this.$$.ctx[107]}set enableViewTool(e){this.$$set({enableViewTool:e}),R()}get enableToolShareStyles(){return this.$$.ctx[108]}set enableToolShareStyles(e){this.$$set({enableToolShareStyles:e}),R()}get enableMultiSelect(){return this.$$.ctx[14]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),R()}get gridSize(){return this.$$.ctx[15]}set gridSize(e){this.$$set({gridSize:e}),R()}get snapThreshold(){return this.$$.ctx[16]}set snapThreshold(e){this.$$set({snapThreshold:e}),R()}get enableSnapToContext(){return this.$$.ctx[17]}set enableSnapToContext(e){this.$$set({enableSnapToContext:e}),R()}get willRenderHeaderTools(){return this.$$.ctx[109]}set willRenderHeaderTools(e){this.$$set({willRenderHeaderTools:e}),R()}get willRenderPresetToolbar(){return this.$$.ctx[110]}set willRenderPresetToolbar(e){this.$$set({willRenderPresetToolbar:e}),R()}get willRenderShapeStyleControls(){return this.$$.ctx[18]}set willRenderShapeStyleControls(e){this.$$set({willRenderShapeStyleControls:e}),R()}get willStartInteraction(){return this.$$.ctx[111]}set willStartInteraction(e){this.$$set({willStartInteraction:e}),R()}get shapePresets(){return this.$$.ctx[19]}set shapePresets(e){this.$$set({shapePresets:e}),R()}get utilKey(){return this.$$.ctx[20]}set utilKey(e){this.$$set({utilKey:e}),R()}get mapScreenPointToImagePoint(){return this.$$.ctx[21]}set mapScreenPointToImagePoint(e){this.$$set({mapScreenPointToImagePoint:e}),R()}get mapImagePointToScreenPoint(){return this.$$.ctx[22]}set mapImagePointToScreenPoint(e){this.$$set({mapImagePointToScreenPoint:e}),R()}get imageRotation(){return this.$$.ctx[23]}set imageRotation(e){this.$$set({imageRotation:e}),R()}get imageFlipX(){return this.$$.ctx[24]}set imageFlipX(e){this.$$set({imageFlipX:e}),R()}get imageFlipY(){return this.$$.ctx[25]}set imageFlipY(e){this.$$set({imageFlipY:e}),R()}get parentRect(){return this.$$.ctx[26]}set parentRect(e){this.$$set({parentRect:e}),R()}get hooks(){return this.$$.ctx[112]}set hooks(e){this.$$set({hooks:e}),R()}}var c0=(t,e,i,n,r,o,a,s,l)=>{const c=We(t),d=.5*i.width,u=.5*i.height,p=.5*e.width,h=.5*e.height,g=r.x+n.x,m=r.y+n.y;s&&(c.x=i.width-c.x),l&&(c.y=i.height-c.y);const f=Math.cos(o),x=Math.sin(o);c.x-=d,c.y-=u;const w=c.x*f-c.y*x,S=c.x*x+c.y*f;c.x=d+w,c.y=u+S,c.x*=a,c.y*=a,c.x+=p,c.y+=h,c.x+=g,c.y+=m,c.x-=d*a,c.y-=u*a;const C=(r.x-g)*a,I=(r.y-m)*a,E=C*f-I*x,B=C*x+I*f;return c.x+=E,c.y+=B,c},d0=(t,e,i,n,r,o,a,s,l)=>{const c=We(t),d=_l(i),u=_l(e),p=at(r.x+n.x,r.y+n.y),h=Math.cos(o),g=Math.sin(o);c.x-=u.x,c.y-=u.y;const m=(r.x-p.x)*a,f=(r.y-p.y)*a,x=m*h-f*g,w=m*g+f*h;c.x-=x,c.y-=w,c.x-=p.x,c.y-=p.y,c.x/=a,c.y/=a;const S=c.x*h+c.y*g,C=c.x*g-c.y*h;return c.x=S,c.y=-C,c.x+=d.x,c.y+=d.y,s&&(c.x=i.width-c.x),l&&(c.y=i.height-c.y),c},Ul=t=>typeof t=="boolean";function L6(t){let e,i,n;function r(a){t[60](a)}let o={utilKey:t[1],stores:t[5],locale:t[6],isActive:t[2],isActiveFraction:t[3],isVisible:t[4],mapScreenPointToImagePoint:t[46],mapImagePointToScreenPoint:t[45],imageRotation:t[47],imageFlipX:t[44],imageFlipY:t[43],shapes:t[49],toolbar:t[21]||t[7],toolShapes:t[22]||t[8],toolRetainStyles:t[9],enableSelectToolToAddShape:t[31],enableTapToAddText:t[32],enableViewTool:t[30],enableMoveTool:t[34],enableAutoSelectMoveTool:t[33],enableMultiSelect:t[35],snapThreshold:t[16],gridSize:ui(t[18])?t[18]:t[15],enableSnapToContext:Ul(t[19])?t[19]:t[17],enableToolShareStyles:t[13],shapeControls:t[23]||t[10],shapePresets:t[27],enableButtonFlipVertical:t[24],parentRect:t[50],enablePresetDropImage:t[26],enablePresetSelectImage:t[25],toolSelectRadius:t[11],textInputMode:t[12],willStartInteraction:t[14],willRenderPresetToolbar:t[28]||t[20],willRenderShapeStyleControls:t[29],hooks:{willRenderShapeControls:t[36],willRenderShapeTextControls:t[37],beforeAddShape:t[38],beforeRemoveShape:t[39],beforeDeselectShape:t[40],beforeSelectShape:t[41],beforeUpdateShape:t[42]}};return t[0]!==void 0&&(o.toolActive=t[0]),e=new Gu({props:o}),Wi.push(()=>ko(e,"toolActive",r)),e.$on("measure",t[61]),{c(){It(e.$$.fragment)},m(a,s){Pt(e,a,s),n=!0},p(a,s){const l={};32&s[0]&&(l.stores=a[5]),64&s[0]&&(l.locale=a[6]),4&s[0]&&(l.isActive=a[2]),8&s[0]&&(l.isActiveFraction=a[3]),16&s[0]&&(l.isVisible=a[4]),32768&s[1]&&(l.mapScreenPointToImagePoint=a[46]),16384&s[1]&&(l.mapImagePointToScreenPoint=a[45]),65536&s[1]&&(l.imageRotation=a[47]),8192&s[1]&&(l.imageFlipX=a[44]),4096&s[1]&&(l.imageFlipY=a[43]),2097280&s[0]&&(l.toolbar=a[21]||a[7]),4194560&s[0]&&(l.toolShapes=a[22]||a[8]),512&s[0]&&(l.toolRetainStyles=a[9]),1&s[1]&&(l.enableSelectToolToAddShape=a[31]),2&s[1]&&(l.enableTapToAddText=a[32]),1073741824&s[0]&&(l.enableViewTool=a[30]),8&s[1]&&(l.enableMoveTool=a[34]),4&s[1]&&(l.enableAutoSelectMoveTool=a[33]),16&s[1]&&(l.enableMultiSelect=a[35]),65536&s[0]&&(l.snapThreshold=a[16]),294912&s[0]&&(l.gridSize=ui(a[18])?a[18]:a[15]),655360&s[0]&&(l.enableSnapToContext=Ul(a[19])?a[19]:a[17]),8192&s[0]&&(l.enableToolShareStyles=a[13]),8389632&s[0]&&(l.shapeControls=a[23]||a[10]),134217728&s[0]&&(l.shapePresets=a[27]),16777216&s[0]&&(l.enableButtonFlipVertical=a[24]),67108864&s[0]&&(l.enablePresetDropImage=a[26]),33554432&s[0]&&(l.enablePresetSelectImage=a[25]),2048&s[0]&&(l.toolSelectRadius=a[11]),4096&s[0]&&(l.textInputMode=a[12]),16384&s[0]&&(l.willStartInteraction=a[14]),269484032&s[0]&&(l.willRenderPresetToolbar=a[28]||a[20]),536870912&s[0]&&(l.willRenderShapeStyleControls=a[29]),4064&s[1]&&(l.hooks={willRenderShapeControls:a[36],willRenderShapeTextControls:a[37],beforeAddShape:a[38],beforeRemoveShape:a[39],beforeDeselectShape:a[40],beforeSelectShape:a[41],beforeUpdateShape:a[42]}),!i&&1&s[0]&&(i=!0,l.toolActive=a[0],Ao(()=>i=!1)),e.$set(l)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){Rt(e,a)}}}function z6(t,e,i){let n,r,o,a,s,l,c,d,u,{isActive:p}=e,{isActiveFraction:h}=e,{isVisible:g}=e,{stores:m}=e,{locale:f={}}=e,{markupEditorToolbar:x}=e,{markupEditorToolStyles:w}=e,{markupEditorToolRetainStyles:S}=e,{markupEditorShapeStyleControls:C}=e,{markupEditorToolSelectRadius:I}=e,{markupEditorTextInputMode:E}=e,{markupEditorToolShareStyles:B}=e,{markupEditorWillStartInteraction:T}=e,{markupEditorGridSize:D=0}=e,{markupEditorSnapThreshold:U=0}=e,{markupEditorSnapToContext:P=!1}=e,{annotateGridSize:y}=e,{annotateSnapToContext:V}=e,{willRenderShapePresetToolbar:nt}=e,{annotateTools:k}=e,{annotateToolShapes:N}=e,{annotateShapeControls:tt}=e,{annotateActiveTool:ct}=e,{annotateEnableButtonFlipVertical:ot=!1}=e,{annotateEnableSelectImagePreset:mt=!1}=e,{annotateEnableDropImagePreset:Z=!0}=e,{annotatePresets:gt=[]}=e,{annotateWillRenderShapePresetToolbar:xt}=e,{annotateWillRenderShapeStyleControls:dt}=e,{enableViewTool:wt}=e,{enableSelectToolToAddShape:J}=e,{enableTapToAddText:q}=e,{enableAutoSelectMoveTool:ft}=e,{enableMoveTool:Lt}=e,{enableMultiSelect:_}=e,{willRenderShapeControls:rt}=e,{willRenderShapeTextControls:zt}=e,{beforeAddShape:Zt}=e,{beforeRemoveShape:Ot}=e,{beforeDeselectShape:Yt}=e,{beforeSelectShape:Ut}=e,{beforeUpdateShape:ht}=e;const{rootRect:G,imageAnnotation:kt,imageSize:ne,imageRotation:ue,imageFlipX:Nt,imageFlipY:xe,imageTransforms:Ht,imageTransformsInterpolated:ze}=m;return L(t,G,W=>i(59,d=W)),L(t,ne,W=>i(58,c=W)),L(t,ue,W=>i(47,u=W)),L(t,Nt,W=>i(44,a=W)),L(t,xe,W=>i(43,o=W)),L(t,Ht,W=>i(57,l=W)),L(t,ze,W=>i(56,s=W)),t.$$set=W=>{"isActive"in W&&i(2,p=W.isActive),"isActiveFraction"in W&&i(3,h=W.isActiveFraction),"isVisible"in W&&i(4,g=W.isVisible),"stores"in W&&i(5,m=W.stores),"locale"in W&&i(6,f=W.locale),"markupEditorToolbar"in W&&i(7,x=W.markupEditorToolbar),"markupEditorToolStyles"in W&&i(8,w=W.markupEditorToolStyles),"markupEditorToolRetainStyles"in W&&i(9,S=W.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in W&&i(10,C=W.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in W&&i(11,I=W.markupEditorToolSelectRadius),"markupEditorTextInputMode"in W&&i(12,E=W.markupEditorTextInputMode),"markupEditorToolShareStyles"in W&&i(13,B=W.markupEditorToolShareStyles),"markupEditorWillStartInteraction"in W&&i(14,T=W.markupEditorWillStartInteraction),"markupEditorGridSize"in W&&i(15,D=W.markupEditorGridSize),"markupEditorSnapThreshold"in W&&i(16,U=W.markupEditorSnapThreshold),"markupEditorSnapToContext"in W&&i(17,P=W.markupEditorSnapToContext),"annotateGridSize"in W&&i(18,y=W.annotateGridSize),"annotateSnapToContext"in W&&i(19,V=W.annotateSnapToContext),"willRenderShapePresetToolbar"in W&&i(20,nt=W.willRenderShapePresetToolbar),"annotateTools"in W&&i(21,k=W.annotateTools),"annotateToolShapes"in W&&i(22,N=W.annotateToolShapes),"annotateShapeControls"in W&&i(23,tt=W.annotateShapeControls),"annotateActiveTool"in W&&i(0,ct=W.annotateActiveTool),"annotateEnableButtonFlipVertical"in W&&i(24,ot=W.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in W&&i(25,mt=W.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in W&&i(26,Z=W.annotateEnableDropImagePreset),"annotatePresets"in W&&i(27,gt=W.annotatePresets),"annotateWillRenderShapePresetToolbar"in W&&i(28,xt=W.annotateWillRenderShapePresetToolbar),"annotateWillRenderShapeStyleControls"in W&&i(29,dt=W.annotateWillRenderShapeStyleControls),"enableViewTool"in W&&i(30,wt=W.enableViewTool),"enableSelectToolToAddShape"in W&&i(31,J=W.enableSelectToolToAddShape),"enableTapToAddText"in W&&i(32,q=W.enableTapToAddText),"enableAutoSelectMoveTool"in W&&i(33,ft=W.enableAutoSelectMoveTool),"enableMoveTool"in W&&i(34,Lt=W.enableMoveTool),"enableMultiSelect"in W&&i(35,_=W.enableMultiSelect),"willRenderShapeControls"in W&&i(36,rt=W.willRenderShapeControls),"willRenderShapeTextControls"in W&&i(37,zt=W.willRenderShapeTextControls),"beforeAddShape"in W&&i(38,Zt=W.beforeAddShape),"beforeRemoveShape"in W&&i(39,Ot=W.beforeRemoveShape),"beforeDeselectShape"in W&&i(40,Yt=W.beforeDeselectShape),"beforeSelectShape"in W&&i(41,Ut=W.beforeSelectShape),"beforeUpdateShape"in W&&i(42,ht=W.beforeUpdateShape)},t.$$.update=()=>{503328768&t.$$.dirty[1]&&i(46,n=W=>d0(W,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),503328768&t.$$.dirty[1]&&i(45,r=W=>c0(W,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[ct,"annotate",p,h,g,m,f,x,w,S,C,I,E,B,T,D,U,P,y,V,nt,k,N,tt,ot,mt,Z,gt,xt,dt,wt,J,q,ft,Lt,_,rt,zt,Zt,Ot,Yt,Ut,ht,o,a,r,n,u,G,kt,ne,ue,Nt,xe,Ht,ze,s,l,c,d,function(W){ct=W,i(0,ct)},function(W){Xr.call(this,t,W)}]}var F6={util:["annotate",class extends li{constructor(t){super(),si(this,t,z6,L6,oi,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,markupEditorWillStartInteraction:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,annotateGridSize:18,annotateSnapToContext:19,willRenderShapePresetToolbar:20,annotateTools:21,annotateToolShapes:22,annotateShapeControls:23,annotateActiveTool:0,annotateEnableButtonFlipVertical:24,annotateEnableSelectImagePreset:25,annotateEnableDropImagePreset:26,annotatePresets:27,annotateWillRenderShapePresetToolbar:28,annotateWillRenderShapeStyleControls:29,enableViewTool:30,enableSelectToolToAddShape:31,enableTapToAddText:32,enableAutoSelectMoveTool:33,enableMoveTool:34,enableMultiSelect:35,willRenderShapeControls:36,willRenderShapeTextControls:37,beforeAddShape:38,beforeRemoveShape:39,beforeDeselectShape:40,beforeSelectShape:41,beforeUpdateShape:42},null,[-1,-1])}get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(t){this.$$set({isActive:t}),R()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),R()}get isVisible(){return this.$$.ctx[4]}set isVisible(t){this.$$set({isVisible:t}),R()}get stores(){return this.$$.ctx[5]}set stores(t){this.$$set({stores:t}),R()}get locale(){return this.$$.ctx[6]}set locale(t){this.$$set({locale:t}),R()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),R()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),R()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),R()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),R()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),R()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),R()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),R()}get markupEditorWillStartInteraction(){return this.$$.ctx[14]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),R()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),R()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),R()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),R()}get annotateGridSize(){return this.$$.ctx[18]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),R()}get annotateSnapToContext(){return this.$$.ctx[19]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),R()}get willRenderShapePresetToolbar(){return this.$$.ctx[20]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),R()}get annotateTools(){return this.$$.ctx[21]}set annotateTools(t){this.$$set({annotateTools:t}),R()}get annotateToolShapes(){return this.$$.ctx[22]}set annotateToolShapes(t){this.$$set({annotateToolShapes:t}),R()}get annotateShapeControls(){return this.$$.ctx[23]}set annotateShapeControls(t){this.$$set({annotateShapeControls:t}),R()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(t){this.$$set({annotateActiveTool:t}),R()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[24]}set annotateEnableButtonFlipVertical(t){this.$$set({annotateEnableButtonFlipVertical:t}),R()}get annotateEnableSelectImagePreset(){return this.$$.ctx[25]}set annotateEnableSelectImagePreset(t){this.$$set({annotateEnableSelectImagePreset:t}),R()}get annotateEnableDropImagePreset(){return this.$$.ctx[26]}set annotateEnableDropImagePreset(t){this.$$set({annotateEnableDropImagePreset:t}),R()}get annotatePresets(){return this.$$.ctx[27]}set annotatePresets(t){this.$$set({annotatePresets:t}),R()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[28]}set annotateWillRenderShapePresetToolbar(t){this.$$set({annotateWillRenderShapePresetToolbar:t}),R()}get annotateWillRenderShapeStyleControls(){return this.$$.ctx[29]}set annotateWillRenderShapeStyleControls(t){this.$$set({annotateWillRenderShapeStyleControls:t}),R()}get enableViewTool(){return this.$$.ctx[30]}set enableViewTool(t){this.$$set({enableViewTool:t}),R()}get enableSelectToolToAddShape(){return this.$$.ctx[31]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),R()}get enableTapToAddText(){return this.$$.ctx[32]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),R()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),R()}get enableMoveTool(){return this.$$.ctx[34]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),R()}get enableMultiSelect(){return this.$$.ctx[35]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),R()}get willRenderShapeControls(){return this.$$.ctx[36]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),R()}get willRenderShapeTextControls(){return this.$$.ctx[37]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),R()}get beforeAddShape(){return this.$$.ctx[38]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),R()}get beforeRemoveShape(){return this.$$.ctx[39]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),R()}get beforeDeselectShape(){return this.$$.ctx[40]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),R()}get beforeSelectShape(){return this.$$.ctx[41]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),R()}get beforeUpdateShape(){return this.$$.ctx[42]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),R()}}]};function D6(t){let e,i,n;function r(a){t[52](a)}let o={utilKey:t[1],stores:t[5],locale:t[6],isActive:t[2],isActiveFraction:t[3],isVisible:t[4],mapScreenPointToImagePoint:t[44],mapImagePointToScreenPoint:t[43],shapes:t[46],toolbar:t[20]||t[7],toolShapes:t[21]||t[8],toolRetainStyles:t[9],shapeControls:t[22]||t[10],shapePresets:t[26],enableSelectToolToAddShape:t[29],enableTapToAddText:t[30],enableViewTool:t[31],enableMoveTool:t[32],enableAutoSelectMoveTool:t[33],enableMultiSelect:t[34],snapThreshold:t[16],gridSize:ui(t[18])?t[18]:t[15],enableSnapToContext:Ul(t[19])?t[19]:t[17],enableToolShareStyles:t[13],enablePresetSelectImage:t[24],enablePresetDropImage:t[25],enableButtonFlipVertical:t[23],parentRect:t[45],toolSelectRadius:t[11],textInputMode:t[12],willStartInteraction:t[42],willRenderPresetToolbar:t[27]||t[14],willRenderShapeStyleControls:t[28],hooks:{willRenderShapeControls:t[35],willRenderShapeTextControls:t[36],beforeAddShape:t[37],beforeRemoveShape:t[38],beforeDeselectShape:t[39],beforeSelectShape:t[40],beforeUpdateShape:t[41]}};return t[0]!==void 0&&(o.toolActive=t[0]),e=new Gu({props:o}),Wi.push(()=>ko(e,"toolActive",r)),e.$on("measure",t[53]),{c(){It(e.$$.fragment)},m(a,s){Pt(e,a,s),n=!0},p(a,s){const l={};32&s[0]&&(l.stores=a[5]),64&s[0]&&(l.locale=a[6]),4&s[0]&&(l.isActive=a[2]),8&s[0]&&(l.isActiveFraction=a[3]),16&s[0]&&(l.isVisible=a[4]),8192&s[1]&&(l.mapScreenPointToImagePoint=a[44]),4096&s[1]&&(l.mapImagePointToScreenPoint=a[43]),1048704&s[0]&&(l.toolbar=a[20]||a[7]),2097408&s[0]&&(l.toolShapes=a[21]||a[8]),512&s[0]&&(l.toolRetainStyles=a[9]),4195328&s[0]&&(l.shapeControls=a[22]||a[10]),67108864&s[0]&&(l.shapePresets=a[26]),536870912&s[0]&&(l.enableSelectToolToAddShape=a[29]),1073741824&s[0]&&(l.enableTapToAddText=a[30]),1&s[1]&&(l.enableViewTool=a[31]),2&s[1]&&(l.enableMoveTool=a[32]),4&s[1]&&(l.enableAutoSelectMoveTool=a[33]),8&s[1]&&(l.enableMultiSelect=a[34]),65536&s[0]&&(l.snapThreshold=a[16]),294912&s[0]&&(l.gridSize=ui(a[18])?a[18]:a[15]),655360&s[0]&&(l.enableSnapToContext=Ul(a[19])?a[19]:a[17]),8192&s[0]&&(l.enableToolShareStyles=a[13]),16777216&s[0]&&(l.enablePresetSelectImage=a[24]),33554432&s[0]&&(l.enablePresetDropImage=a[25]),8388608&s[0]&&(l.enableButtonFlipVertical=a[23]),2048&s[0]&&(l.toolSelectRadius=a[11]),4096&s[0]&&(l.textInputMode=a[12]),2048&s[1]&&(l.willStartInteraction=a[42]),134234112&s[0]&&(l.willRenderPresetToolbar=a[27]||a[14]),268435456&s[0]&&(l.willRenderShapeStyleControls=a[28]),2032&s[1]&&(l.hooks={willRenderShapeControls:a[35],willRenderShapeTextControls:a[36],beforeAddShape:a[37],beforeRemoveShape:a[38],beforeDeselectShape:a[39],beforeSelectShape:a[40],beforeUpdateShape:a[41]}),!i&&1&s[0]&&(i=!0,l.toolActive=a[0],Ao(()=>i=!1)),e.$set(l)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){Rt(e,a)}}}function B6(t,e,i){let n,r,o,a,s,{isActive:l}=e,{isActiveFraction:c}=e,{isVisible:d}=e,{stores:u}=e,{locale:p={}}=e,{markupEditorToolbar:h}=e,{markupEditorToolStyles:g}=e,{markupEditorToolRetainStyles:m}=e,{markupEditorShapeStyleControls:f}=e,{markupEditorToolSelectRadius:x}=e,{markupEditorTextInputMode:w}=e,{markupEditorToolShareStyles:S}=e,{willRenderShapePresetToolbar:C}=e,{markupEditorGridSize:I}=e,{markupEditorSnapThreshold:E}=e,{markupEditorSnapToContext:B=!0}=e,{decorateGridSize:T}=e,{decorateSnapToContext:D}=e,{decorateTools:U}=e,{decorateToolShapes:P}=e,{decorateShapeControls:y}=e,{decorateActiveTool:V}=e,{decorateEnableButtonFlipVertical:nt=!1}=e,{decorateEnableSelectImagePreset:k=!1}=e,{decorateEnableDropImagePreset:N=!0}=e,{decoratePresets:tt=[]}=e,{decorateWillRenderShapePresetToolbar:ct}=e,{decorateWillRenderShapeStyleControls:ot}=e,{enableSelectToolToAddShape:mt}=e,{enableTapToAddText:Z}=e,{enableViewTool:gt}=e,{enableMoveTool:xt}=e,{enableAutoSelectMoveTool:dt}=e,{enableMultiSelect:wt}=e,{willRenderShapeControls:J}=e,{willRenderShapeTextControls:q}=e,{beforeAddShape:ft}=e,{beforeRemoveShape:Lt}=e,{beforeDeselectShape:_}=e,{beforeSelectShape:rt}=e,{beforeUpdateShape:zt}=e,{markupEditorWillStartInteraction:Zt}=e;const{imageCropRect:Ot,imageDecoration:Yt,imageSelectionRectPresentation:Ut,imageTransformsInterpolated:ht}=u;return L(t,Ut,G=>i(50,a=G)),L(t,ht,G=>i(51,s=G)),t.$$set=G=>{"isActive"in G&&i(2,l=G.isActive),"isActiveFraction"in G&&i(3,c=G.isActiveFraction),"isVisible"in G&&i(4,d=G.isVisible),"stores"in G&&i(5,u=G.stores),"locale"in G&&i(6,p=G.locale),"markupEditorToolbar"in G&&i(7,h=G.markupEditorToolbar),"markupEditorToolStyles"in G&&i(8,g=G.markupEditorToolStyles),"markupEditorToolRetainStyles"in G&&i(9,m=G.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in G&&i(10,f=G.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in G&&i(11,x=G.markupEditorToolSelectRadius),"markupEditorTextInputMode"in G&&i(12,w=G.markupEditorTextInputMode),"markupEditorToolShareStyles"in G&&i(13,S=G.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in G&&i(14,C=G.willRenderShapePresetToolbar),"markupEditorGridSize"in G&&i(15,I=G.markupEditorGridSize),"markupEditorSnapThreshold"in G&&i(16,E=G.markupEditorSnapThreshold),"markupEditorSnapToContext"in G&&i(17,B=G.markupEditorSnapToContext),"decorateGridSize"in G&&i(18,T=G.decorateGridSize),"decorateSnapToContext"in G&&i(19,D=G.decorateSnapToContext),"decorateTools"in G&&i(20,U=G.decorateTools),"decorateToolShapes"in G&&i(21,P=G.decorateToolShapes),"decorateShapeControls"in G&&i(22,y=G.decorateShapeControls),"decorateActiveTool"in G&&i(0,V=G.decorateActiveTool),"decorateEnableButtonFlipVertical"in G&&i(23,nt=G.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in G&&i(24,k=G.decorateEnableSelectImagePreset),"decorateEnableDropImagePreset"in G&&i(25,N=G.decorateEnableDropImagePreset),"decoratePresets"in G&&i(26,tt=G.decoratePresets),"decorateWillRenderShapePresetToolbar"in G&&i(27,ct=G.decorateWillRenderShapePresetToolbar),"decorateWillRenderShapeStyleControls"in G&&i(28,ot=G.decorateWillRenderShapeStyleControls),"enableSelectToolToAddShape"in G&&i(29,mt=G.enableSelectToolToAddShape),"enableTapToAddText"in G&&i(30,Z=G.enableTapToAddText),"enableViewTool"in G&&i(31,gt=G.enableViewTool),"enableMoveTool"in G&&i(32,xt=G.enableMoveTool),"enableAutoSelectMoveTool"in G&&i(33,dt=G.enableAutoSelectMoveTool),"enableMultiSelect"in G&&i(34,wt=G.enableMultiSelect),"willRenderShapeControls"in G&&i(35,J=G.willRenderShapeControls),"willRenderShapeTextControls"in G&&i(36,q=G.willRenderShapeTextControls),"beforeAddShape"in G&&i(37,ft=G.beforeAddShape),"beforeRemoveShape"in G&&i(38,Lt=G.beforeRemoveShape),"beforeDeselectShape"in G&&i(39,_=G.beforeDeselectShape),"beforeSelectShape"in G&&i(40,rt=G.beforeSelectShape),"beforeUpdateShape"in G&&i(41,zt=G.beforeUpdateShape),"markupEditorWillStartInteraction"in G&&i(42,Zt=G.markupEditorWillStartInteraction)},t.$$.update=()=>{1048576&t.$$.dirty[1]&&i(49,n=s?s.scale:1),786432&t.$$.dirty[1]&&i(44,r=G=>{const kt=We(G);return kt.x-=a.x,kt.y-=a.y,kt.x/=n,kt.y/=n,kt}),786432&t.$$.dirty[1]&&i(43,o=G=>{const kt=We(G);return kt.x*=n,kt.y*=n,kt.x+=a.x,kt.y+=a.y,kt})},[V,"decorate",l,c,d,u,p,h,g,m,f,x,w,S,C,I,E,B,T,D,U,P,y,nt,k,N,tt,ct,ot,mt,Z,gt,xt,dt,wt,J,q,ft,Lt,_,rt,zt,Zt,o,r,Ot,Yt,Ut,ht,n,a,s,function(G){V=G,i(0,V)},function(G){Xr.call(this,t,G)}]}var O6={util:["decorate",class extends li{constructor(t){super(),si(this,t,B6,D6,oi,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,willRenderShapePresetToolbar:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,decorateGridSize:18,decorateSnapToContext:19,decorateTools:20,decorateToolShapes:21,decorateShapeControls:22,decorateActiveTool:0,decorateEnableButtonFlipVertical:23,decorateEnableSelectImagePreset:24,decorateEnableDropImagePreset:25,decoratePresets:26,decorateWillRenderShapePresetToolbar:27,decorateWillRenderShapeStyleControls:28,enableSelectToolToAddShape:29,enableTapToAddText:30,enableViewTool:31,enableMoveTool:32,enableAutoSelectMoveTool:33,enableMultiSelect:34,willRenderShapeControls:35,willRenderShapeTextControls:36,beforeAddShape:37,beforeRemoveShape:38,beforeDeselectShape:39,beforeSelectShape:40,beforeUpdateShape:41,markupEditorWillStartInteraction:42},null,[-1,-1])}get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(t){this.$$set({isActive:t}),R()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),R()}get isVisible(){return this.$$.ctx[4]}set isVisible(t){this.$$set({isVisible:t}),R()}get stores(){return this.$$.ctx[5]}set stores(t){this.$$set({stores:t}),R()}get locale(){return this.$$.ctx[6]}set locale(t){this.$$set({locale:t}),R()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),R()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),R()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),R()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),R()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),R()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),R()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),R()}get willRenderShapePresetToolbar(){return this.$$.ctx[14]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),R()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),R()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),R()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),R()}get decorateGridSize(){return this.$$.ctx[18]}set decorateGridSize(t){this.$$set({decorateGridSize:t}),R()}get decorateSnapToContext(){return this.$$.ctx[19]}set decorateSnapToContext(t){this.$$set({decorateSnapToContext:t}),R()}get decorateTools(){return this.$$.ctx[20]}set decorateTools(t){this.$$set({decorateTools:t}),R()}get decorateToolShapes(){return this.$$.ctx[21]}set decorateToolShapes(t){this.$$set({decorateToolShapes:t}),R()}get decorateShapeControls(){return this.$$.ctx[22]}set decorateShapeControls(t){this.$$set({decorateShapeControls:t}),R()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(t){this.$$set({decorateActiveTool:t}),R()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[23]}set decorateEnableButtonFlipVertical(t){this.$$set({decorateEnableButtonFlipVertical:t}),R()}get decorateEnableSelectImagePreset(){return this.$$.ctx[24]}set decorateEnableSelectImagePreset(t){this.$$set({decorateEnableSelectImagePreset:t}),R()}get decorateEnableDropImagePreset(){return this.$$.ctx[25]}set decorateEnableDropImagePreset(t){this.$$set({decorateEnableDropImagePreset:t}),R()}get decoratePresets(){return this.$$.ctx[26]}set decoratePresets(t){this.$$set({decoratePresets:t}),R()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[27]}set decorateWillRenderShapePresetToolbar(t){this.$$set({decorateWillRenderShapePresetToolbar:t}),R()}get decorateWillRenderShapeStyleControls(){return this.$$.ctx[28]}set decorateWillRenderShapeStyleControls(t){this.$$set({decorateWillRenderShapeStyleControls:t}),R()}get enableSelectToolToAddShape(){return this.$$.ctx[29]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),R()}get enableTapToAddText(){return this.$$.ctx[30]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),R()}get enableViewTool(){return this.$$.ctx[31]}set enableViewTool(t){this.$$set({enableViewTool:t}),R()}get enableMoveTool(){return this.$$.ctx[32]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),R()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),R()}get enableMultiSelect(){return this.$$.ctx[34]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),R()}get willRenderShapeControls(){return this.$$.ctx[35]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),R()}get willRenderShapeTextControls(){return this.$$.ctx[36]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),R()}get beforeAddShape(){return this.$$.ctx[37]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),R()}get beforeRemoveShape(){return this.$$.ctx[38]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),R()}get beforeDeselectShape(){return this.$$.ctx[39]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),R()}get beforeSelectShape(){return this.$$.ctx[40]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),R()}get beforeUpdateShape(){return this.$$.ctx[41]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),R()}get markupEditorWillStartInteraction(){return this.$$.ctx[42]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),R()}}]};function W6(t){let e,i;return e=new Gu({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[26],mapImagePointToScreenPoint:t[25],utilKey:"sticker",shapePresets:t[5],shapes:t[6]?t[35]:t[36],toolActive:"preset",imageFlipX:!!t[6]&&t[24],imageFlipY:!!t[6]&&t[23],imageRotation:t[6]?t[31]:0,parentRect:t[6]?t[37]:t[33],snapThreshold:t[29],gridSize:t[28],enableMultiSelect:t[12],enableSnapToContext:t[27],enablePresetDropImage:t[7],enablePresetSelectImage:t[30],enableButtonFlipVertical:t[10]||t[8],toolSelectRadius:t[15],willStartInteraction:t[22],willRenderPresetToolbar:t[11]||t[9]||t[16],hooks:{willRenderShapeControls:t[13],willRenderShapeTextControls:t[14],beforeAddShape:t[17],beforeRemoveShape:t[18],beforeDeselectShape:t[19],beforeSelectShape:t[20],beforeUpdateShape:t[21]}}}),e.$on("measure",t[60]),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};8&r[0]&&(o.stores=n[3]),16&r[0]&&(o.locale=n[4]),1&r[0]&&(o.isActive=n[0]),2&r[0]&&(o.isActiveFraction=n[1]),4&r[0]&&(o.isVisible=n[2]),67108864&r[0]&&(o.mapScreenPointToImagePoint=n[26]),33554432&r[0]&&(o.mapImagePointToScreenPoint=n[25]),32&r[0]&&(o.shapePresets=n[5]),64&r[0]&&(o.shapes=n[6]?n[35]:n[36]),16777280&r[0]&&(o.imageFlipX=!!n[6]&&n[24]),8388672&r[0]&&(o.imageFlipY=!!n[6]&&n[23]),64&r[0]|1&r[1]&&(o.imageRotation=n[6]?n[31]:0),64&r[0]&&(o.parentRect=n[6]?n[37]:n[33]),536870912&r[0]&&(o.snapThreshold=n[29]),268435456&r[0]&&(o.gridSize=n[28]),4096&r[0]&&(o.enableMultiSelect=n[12]),134217728&r[0]&&(o.enableSnapToContext=n[27]),128&r[0]&&(o.enablePresetDropImage=n[7]),1073741824&r[0]&&(o.enablePresetSelectImage=n[30]),1280&r[0]&&(o.enableButtonFlipVertical=n[10]||n[8]),32768&r[0]&&(o.toolSelectRadius=n[15]),4194304&r[0]&&(o.willStartInteraction=n[22]),68096&r[0]&&(o.willRenderPresetToolbar=n[11]||n[9]||n[16]),4087808&r[0]&&(o.hooks={willRenderShapeControls:n[13],willRenderShapeTextControls:n[14],beforeAddShape:n[17],beforeRemoveShape:n[18],beforeDeselectShape:n[19],beforeSelectShape:n[20],beforeUpdateShape:n[21]}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function _6(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,{isActive:w}=e,{isActiveFraction:S}=e,{isVisible:C}=e,{stores:I}=e,{locale:E={}}=e,{stickers:B=[]}=e,{stickerForceEnable:T=!1}=e,{stickerStickToImage:D=!1}=e,{stickerEnableSelectImagePreset:U=!0}=e,{stickerEnableDropImagePreset:P=!0}=e,{stickerEnableButtonFlipVertical:y=!1}=e,{stickerWillRenderShapePresetToolbar:V}=e,{stickerEnableSelectImage:nt=!0}=e,{stickersEnableButtonFlipVertical:k=!1}=e,{stickersWillRenderShapePresetToolbar:N}=e,{markupEditorGridSize:tt=0}=e,{markupEditorSnapThreshold:ct=0}=e,{markupEditorSnapToContext:ot=!1}=e,{enableMultiSelect:mt}=e,{annotateGridSize:Z}=e,{annotateSnapToContext:gt}=e,{decorateGridSize:xt}=e,{decorateSnapToContext:dt}=e,{willRenderShapeControls:wt}=e,{willRenderShapeTextControls:J}=e,{markupEditorToolSelectRadius:q}=e,{willRenderShapePresetToolbar:ft}=e,{beforeAddShape:Lt}=e,{beforeRemoveShape:_}=e,{beforeDeselectShape:rt}=e,{beforeSelectShape:zt}=e,{beforeUpdateShape:Zt}=e,{markupEditorWillStartInteraction:Ot}=e;const{rootRect:Yt,imageCropRect:Ut,imageSelectionRectPresentation:ht,imageAnnotation:G,imageDecoration:kt,imageSize:ne,imageTransforms:ue,imageTransformsInterpolated:Nt,imageRotation:xe,imageFlipX:Ht,imageFlipY:ze}=I;return L(t,Yt,W=>i(59,f=W)),L(t,ht,W=>i(55,d=W)),L(t,ne,W=>i(58,m=W)),L(t,ue,W=>i(57,g=W)),L(t,Nt,W=>i(56,h=W)),L(t,xe,W=>i(31,x=W)),L(t,Ht,W=>i(24,p=W)),L(t,ze,W=>i(23,u=W)),t.$$set=W=>{"isActive"in W&&i(0,w=W.isActive),"isActiveFraction"in W&&i(1,S=W.isActiveFraction),"isVisible"in W&&i(2,C=W.isVisible),"stores"in W&&i(3,I=W.stores),"locale"in W&&i(4,E=W.locale),"stickers"in W&&i(5,B=W.stickers),"stickerForceEnable"in W&&i(44,T=W.stickerForceEnable),"stickerStickToImage"in W&&i(6,D=W.stickerStickToImage),"stickerEnableSelectImagePreset"in W&&i(45,U=W.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in W&&i(7,P=W.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in W&&i(8,y=W.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in W&&i(9,V=W.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in W&&i(46,nt=W.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in W&&i(10,k=W.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in W&&i(11,N=W.stickersWillRenderShapePresetToolbar),"markupEditorGridSize"in W&&i(47,tt=W.markupEditorGridSize),"markupEditorSnapThreshold"in W&&i(48,ct=W.markupEditorSnapThreshold),"markupEditorSnapToContext"in W&&i(49,ot=W.markupEditorSnapToContext),"enableMultiSelect"in W&&i(12,mt=W.enableMultiSelect),"annotateGridSize"in W&&i(50,Z=W.annotateGridSize),"annotateSnapToContext"in W&&i(51,gt=W.annotateSnapToContext),"decorateGridSize"in W&&i(52,xt=W.decorateGridSize),"decorateSnapToContext"in W&&i(53,dt=W.decorateSnapToContext),"willRenderShapeControls"in W&&i(13,wt=W.willRenderShapeControls),"willRenderShapeTextControls"in W&&i(14,J=W.willRenderShapeTextControls),"markupEditorToolSelectRadius"in W&&i(15,q=W.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in W&&i(16,ft=W.willRenderShapePresetToolbar),"beforeAddShape"in W&&i(17,Lt=W.beforeAddShape),"beforeRemoveShape"in W&&i(18,_=W.beforeRemoveShape),"beforeDeselectShape"in W&&i(19,rt=W.beforeDeselectShape),"beforeSelectShape"in W&&i(20,zt=W.beforeSelectShape),"beforeUpdateShape"in W&&i(21,Zt=W.beforeUpdateShape),"markupEditorWillStartInteraction"in W&&i(22,Ot=W.markupEditorWillStartInteraction)},t.$$.update=()=>{33554432&t.$$.dirty[1]&&i(54,n=h?h.scale:1),49152&t.$$.dirty[1]&&i(30,r=U!==!1&&nt),131072&t.$$.dirty[1]&&i(29,o=ct),64&t.$$.dirty[0]|2686976&t.$$.dirty[1]&&i(28,a=D?ui(Z)?Z:tt:ui(xt)?xt:tt),64&t.$$.dirty[0]|5505024&t.$$.dirty[1]&&i(27,s=D?Ul(gt)?gt:ot:Ul(dt)?dt:ot),25165888&t.$$.dirty[0]|528482304&t.$$.dirty[1]&&i(26,l=D?W=>d0(W,f,m,h.origin,h.translation,g.rotation.z,h.scale,p,u):W=>{const Re=We(W);return Re.x-=d.x,Re.y-=d.y,Re.x/=n,Re.y/=n,Re}),25165888&t.$$.dirty[0]|528482304&t.$$.dirty[1]&&i(25,c=D?W=>c0(W,f,m,h.origin,h.translation,g.rotation.z,h.scale,p,u):W=>{const Re=We(W);return Re.x*=n,Re.y*=n,Re.x+=d.x,Re.y+=d.y,Re})},[w,S,C,I,E,B,D,P,y,V,k,N,mt,wt,J,q,ft,Lt,_,rt,zt,Zt,Ot,u,p,c,l,s,a,o,r,x,Yt,Ut,ht,G,kt,ne,ue,Nt,xe,Ht,ze,"sticker",T,U,nt,tt,ct,ot,Z,gt,xt,dt,n,d,h,g,m,f,function(W){Xr.call(this,t,W)}]}var V6={util:["sticker",class extends li{constructor(t){super(),si(this,t,_6,W6,oi,{name:43,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerForceEnable:44,stickerStickToImage:6,stickerEnableSelectImagePreset:45,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:46,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,markupEditorGridSize:47,markupEditorSnapThreshold:48,markupEditorSnapToContext:49,enableMultiSelect:12,annotateGridSize:50,annotateSnapToContext:51,decorateGridSize:52,decorateSnapToContext:53,willRenderShapeControls:13,willRenderShapeTextControls:14,markupEditorToolSelectRadius:15,willRenderShapePresetToolbar:16,beforeAddShape:17,beforeRemoveShape:18,beforeDeselectShape:19,beforeSelectShape:20,beforeUpdateShape:21,markupEditorWillStartInteraction:22},null,[-1,-1])}get name(){return this.$$.ctx[43]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),R()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),R()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),R()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),R()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),R()}get stickers(){return this.$$.ctx[5]}set stickers(t){this.$$set({stickers:t}),R()}get stickerForceEnable(){return this.$$.ctx[44]}set stickerForceEnable(t){this.$$set({stickerForceEnable:t}),R()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(t){this.$$set({stickerStickToImage:t}),R()}get stickerEnableSelectImagePreset(){return this.$$.ctx[45]}set stickerEnableSelectImagePreset(t){this.$$set({stickerEnableSelectImagePreset:t}),R()}get stickerEnableDropImagePreset(){return this.$$.ctx[7]}set stickerEnableDropImagePreset(t){this.$$set({stickerEnableDropImagePreset:t}),R()}get stickerEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickerEnableButtonFlipVertical(t){this.$$set({stickerEnableButtonFlipVertical:t}),R()}get stickerWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickerWillRenderShapePresetToolbar(t){this.$$set({stickerWillRenderShapePresetToolbar:t}),R()}get stickerEnableSelectImage(){return this.$$.ctx[46]}set stickerEnableSelectImage(t){this.$$set({stickerEnableSelectImage:t}),R()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[10]}set stickersEnableButtonFlipVertical(t){this.$$set({stickersEnableButtonFlipVertical:t}),R()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[11]}set stickersWillRenderShapePresetToolbar(t){this.$$set({stickersWillRenderShapePresetToolbar:t}),R()}get markupEditorGridSize(){return this.$$.ctx[47]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),R()}get markupEditorSnapThreshold(){return this.$$.ctx[48]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),R()}get markupEditorSnapToContext(){return this.$$.ctx[49]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),R()}get enableMultiSelect(){return this.$$.ctx[12]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),R()}get annotateGridSize(){return this.$$.ctx[50]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),R()}get annotateSnapToContext(){return this.$$.ctx[51]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),R()}get decorateGridSize(){return this.$$.ctx[52]}set decorateGridSize(t){this.$$set({decorateGridSize:t}),R()}get decorateSnapToContext(){return this.$$.ctx[53]}set decorateSnapToContext(t){this.$$set({decorateSnapToContext:t}),R()}get willRenderShapeControls(){return this.$$.ctx[13]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),R()}get willRenderShapeTextControls(){return this.$$.ctx[14]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),R()}get markupEditorToolSelectRadius(){return this.$$.ctx[15]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),R()}get willRenderShapePresetToolbar(){return this.$$.ctx[16]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),R()}get beforeAddShape(){return this.$$.ctx[17]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),R()}get beforeRemoveShape(){return this.$$.ctx[18]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),R()}get beforeDeselectShape(){return this.$$.ctx[19]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),R()}get beforeSelectShape(){return this.$$.ctx[20]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),R()}get beforeUpdateShape(){return this.$$.ctx[21]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),R()}get markupEditorWillStartInteraction(){return this.$$.ctx[22]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),R()}},({stickers:t,stickerEnableSelectImage:e,stickerEnableSelectImagePreset:i,stickerEnableDropImagePreset:n,stickerForceEnable:r})=>t&&t.length||e||i||n||r]};function N6(t){let e,i,n,r,o,a=(t[14](t[34].value)||"")+"",s=(sn(t[34].label)?t[34].label(t[1]):t[34].label)+"";return{c(){e=ut("div"),i=new Ou(!1),n=$e(),r=ut("span"),o=$n(s),i.a=n,v(e,"slot","option")},m(l,c){it(l,e,c),i.m(a,e),St(e,n),St(e,r),St(r,o)},p(l,c){8&c[1]&&a!==(a=(l[14](l[34].value)||"")+"")&&i.p(a),2&c[0]|8&c[1]&&s!==(s=(sn(l[34].label)?l[34].label(l[1]):l[34].label)+"")&&Ln(o,s)},d(l){l&&Q(e)}}}function H6(t){let e,i;return e=new cs({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[6],onchange:t[12],$$slots:{option:[N6,({option:n})=>({34:n}),({option:n})=>[0,n?8:0]]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};2&r[0]&&(o.locale=n[1]),4&r[0]&&(o.options=n[2]),64&r[0]&&(o.selectedIndex=n[6]),2&r[0]|24&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function j6(t){let e,i,n,r,o;return i=new Uu({props:{locale:t[1],class:"PinturaControlPanels",shapeProps:t[4],onchange:t[13],controls:t[3],scrollElasticity:t[7]}}),r=new Ta({props:{elasticity:t[10],$$slots:{default:[H6]},$$scope:{ctx:t}}}),{c(){e=ut("div"),It(i.$$.fragment),n=$e(),It(r.$$.fragment),v(e,"slot","footer"),v(e,"style",t[5])},m(a,s){it(a,e,s),Pt(i,e,null),St(e,n),Pt(r,e,null),o=!0},p(a,s){const l={};2&s[0]&&(l.locale=a[1]),16&s[0]&&(l.shapeProps=a[4]),8&s[0]&&(l.controls=a[3]),128&s[0]&&(l.scrollElasticity=a[7]),i.$set(l);const c={};70&s[0]|16&s[1]&&(c.$$scope={dirty:s,ctx:a}),r.$set(c),(!o||32&s[0])&&v(e,"style",a[5])},i(a){o||(M(i.$$.fragment,a),M(r.$$.fragment,a),o=!0)},o(a){F(i.$$.fragment,a),F(r.$$.fragment,a),o=!1},d(a){a&&Q(e),Rt(i),Rt(r)}}}function U6(t){let e,i;return e=new ul({props:{$$slots:{footer:[j6]},$$scope:{ctx:t}}}),e.$on("measure",t[23]),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};254&r[0]|16&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function G6(t,e,i){let n,r,o,a,s,l,c,d,u=Je,p=()=>(u(),u=Gr(h,k=>i(20,s=k)),h);t.$$.on_destroy.push(()=>u());let{isActive:h}=e;p();let{stores:g}=e,{locale:m={}}=e,{frameStyles:f={}}=e,{frameOptions:x=[]}=e,{markupEditorShapeStyleControls:w}=e;const S=un("elasticityMultiplier");L(t,S,k=>i(22,d=k));const{history:C,animation:I,scrollElasticity:E,imageFrame:B,allowPan:T,allowZoom:D,allowZoomControls:U,allowPlayPause:P}=g;L(t,I,k=>i(21,l=k)),L(t,B,k=>i(4,c=k));let y={},V;const nt=di(l?20:0);return L(t,nt,k=>i(19,a=k)),t.$$set=k=>{"isActive"in k&&p(i(0,h=k.isActive)),"stores"in k&&i(17,g=k.stores),"locale"in k&&i(1,m=k.locale),"frameStyles"in k&&i(18,f=k.frameStyles),"frameOptions"in k&&i(2,x=k.frameOptions),"markupEditorShapeStyleControls"in k&&i(3,w=k.markupEditorShapeStyleControls)},t.$$.update=()=>{1048576&t.$$.dirty[0]&&T.set(s),1048576&t.$$.dirty[0]&&D.set(s),1048576&t.$$.dirty[0]&&U.set(s),1048576&t.$$.dirty[0]&&s&&P.set(!0),4194304&t.$$.dirty[0]&&i(7,n=d*E),20&t.$$.dirty[0]&&i(6,r=c?x.findIndex(([k])=>k===c.id):0),3145728&t.$$.dirty[0]&&l&&nt.set(s?0:20),524288&t.$$.dirty[0]&&i(5,o=a?`transform: translateY(${a}px)`:void 0)},[h,m,x,w,c,o,r,n,S,I,E,B,({value:k})=>{const N=f[k];if(!N||!N.shape)return B.set(void 0),void C.write();const{shape:tt}=N,ct={id:k,...In(tt),...Object.keys(y).reduce((ot,mt)=>(tt[mt]&&(ot[mt]=y[mt]),ot),{})};B.set(ct),C.write()},function(k){Ae(k,"frameColor")&&(y.frameColor=k.frameColor),c&&(wa(c,k),B.set(c),clearTimeout(V),V=setTimeout(()=>{C.write()},200))},k=>{const N=f[k];var tt;if(N&&N.thumb)return tt=N.thumb,/div/i.test(tt)||rb(tt)?tt:/rect|path|circle|line|<g>/i.test(tt)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${tt}</svg>`:`<img src="${tt}" alt=""/>`},nt,"frame",g,f,a,s,l,d,function(k){Xr.call(this,t,k)}]}var Z6={util:["frame",class extends li{constructor(t){super(),si(this,t,G6,U6,oi,{name:16,isActive:0,stores:17,locale:1,frameStyles:18,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[16]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),R()}get stores(){return this.$$.ctx[17]}set stores(t){this.$$set({stores:t}),R()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),R()}get frameStyles(){return this.$$.ctx[18]}set frameStyles(t){this.$$set({frameStyles:t}),R()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(t){this.$$set({frameOptions:t}),R()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),R()}},({src:t})=>t&&!Xl(t)]};function X6(t){let e,i,n,r,o,a,s,l;return{c(){e=ut("div"),i=ut("input"),r=$e(),o=ut("label"),a=$n(t[1]),v(i,"id",t[0]),v(i,"type","number"),v(i,"min","1"),v(i,"inputmode","numeric"),v(i,"pattern","[0-9]*"),v(i,"data-state",t[3]),v(i,"autocomplete","off"),v(i,"placeholder",t[4]),i.value=n=t[5]===void 0?"":t[7](t[5]+""),v(o,"for",t[0]),v(o,"title",t[2]),v(o,"aria-label",t[2]),v(e,"class","PinturaInputDimension")},m(c,d){it(c,e,d),St(e,i),St(e,r),St(e,o),St(o,a),s||(l=Mt(i,"input",t[8]),s=!0)},p(c,[d]){1&d&&v(i,"id",c[0]),8&d&&v(i,"data-state",c[3]),16&d&&v(i,"placeholder",c[4]),160&d&&n!==(n=c[5]===void 0?"":c[7](c[5]+""))&&i.value!==n&&(i.value=n),2&d&&Ln(a,c[1]),1&d&&v(o,"for",c[0]),4&d&&v(o,"title",c[2]),4&d&&v(o,"aria-label",c[2])},i:Je,o:Je,d(c){c&&Q(e),s=!1,l()}}}function Y6(t,e,i){let{id:n}=e,{label:r}=e,{title:o}=e,{state:a}=e,{placeholder:s}=e,{value:l}=e,{onchange:c}=e,{format:d=u=>u.replace(/\D/g,"")}=e;return t.$$set=u=>{"id"in u&&i(0,n=u.id),"label"in u&&i(1,r=u.label),"title"in u&&i(2,o=u.title),"state"in u&&i(3,a=u.state),"placeholder"in u&&i(4,s=u.placeholder),"value"in u&&i(5,l=u.value),"onchange"in u&&i(6,c=u.onchange),"format"in u&&i(7,d=u.format)},[n,r,o,a,s,l,c,d,u=>c(d(u.currentTarget.value))]}class Gf extends li{constructor(e){super(),si(this,e,Y6,X6,oi,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function q6(t){let e;return{c(){e=kr("g")},m(i,n){it(i,e,n),e.innerHTML=t[2]},p(i,n){4&n&&(e.innerHTML=i[2])},d(i){i&&Q(e)}}}function K6(t){let e,i,n,r,o,a,s,l;return o=new Lo({props:{$$slots:{default:[q6]},$$scope:{ctx:t}}}),{c(){e=ut("div"),i=ut("input"),n=$e(),r=ut("label"),It(o.$$.fragment),v(i,"id",t[0]),v(i,"class","implicit"),v(i,"type","checkbox"),i.checked=t[1],v(r,"for",t[0]),v(r,"title",t[3])},m(c,d){it(c,e,d),St(e,i),St(e,n),St(e,r),Pt(o,r,null),a=!0,s||(l=Mt(i,"change",t[5]),s=!0)},p(c,[d]){(!a||1&d)&&v(i,"id",c[0]),(!a||2&d)&&(i.checked=c[1]);const u={};68&d&&(u.$$scope={dirty:d,ctx:c}),o.$set(u),(!a||1&d)&&v(r,"for",c[0]),(!a||8&d)&&v(r,"title",c[3])},i(c){a||(M(o.$$.fragment,c),a=!0)},o(c){F(o.$$.fragment,c),a=!1},d(c){c&&Q(e),Rt(o),s=!1,l()}}}function J6(t,e,i){let{id:n}=e,{locked:r}=e,{icon:o}=e,{title:a}=e,{onchange:s}=e;return t.$$set=l=>{"id"in l&&i(0,n=l.id),"locked"in l&&i(1,r=l.locked),"icon"in l&&i(2,o=l.icon),"title"in l&&i(3,a=l.title),"onchange"in l&&i(4,s=l.onchange)},[n,r,o,a,s,l=>s(l.currentTarget.checked)]}class Q6 extends li{constructor(e){super(),si(this,e,J6,K6,oi,{id:0,locked:1,icon:2,title:3,onchange:4})}}function tk(t){let e;return{c(){e=$n("Save")},m(i,n){it(i,e,n)},d(i){i&&Q(e)}}}function ek(t){let e,i,n,r,o,a,s,l,c,d,u,p,h,g=t[1].resizeLabelFormCaption+"";return l=new mo({props:{items:t[4]}}),d=new ls({props:{type:"submit",class:"implicit",$$slots:{default:[tk]},$$scope:{ctx:t}}}),{c(){e=ut("form"),i=ut("div"),n=ut("fieldset"),r=ut("legend"),o=$n(g),a=$e(),s=ut("div"),It(l.$$.fragment),c=$e(),It(d.$$.fragment),v(r,"class","implicit"),v(s,"class","PinturaFieldsetInner"),v(i,"class","PinturaFormInner"),v(e,"slot","footer"),v(e,"style",t[3])},m(m,f){it(m,e,f),St(e,i),St(i,n),St(n,r),St(r,o),St(n,a),St(n,s),Pt(l,s,null),t[65](s),St(i,c),Pt(d,i,null),u=!0,p||(h=[Mt(s,"focusin",t[15]),Mt(s,"focusout",t[16]),Mt(e,"submit",tv(t[17]))],p=!0)},p(m,f){(!u||2&f[0])&&g!==(g=m[1].resizeLabelFormCaption+"")&&Ln(o,g);const x={};16&f[0]&&(x.items=m[4]),l.$set(x);const w={};16&f[3]&&(w.$$scope={dirty:f,ctx:m}),d.$set(w),(!u||8&f[0])&&v(e,"style",m[3])},i(m){u||(M(l.$$.fragment,m),M(d.$$.fragment,m),u=!0)},o(m){F(l.$$.fragment,m),F(d.$$.fragment,m),u=!1},d(m){m&&Q(e),Rt(l),t[65](null),Rt(d),p=!1,ji(h)}}}function ik(t){let e,i;return e=new ul({props:{$$slots:{footer:[ek]},$$scope:{ctx:t}}}),e.$on("measure",t[66]),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};30&r[0]|16&r[3]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function nk(t,e,i){let n,r,o,a,s,l,c,d,u,p,h,g,m,f,x,w,S,C,I,E,B,T,D,U,P,y,V,nt,k,N,tt=Je,ct=()=>(tt(),tt=Gr(mt,lt=>i(49,h=lt)),mt);t.$$.on_destroy.push(()=>tt());const ot=(lt,Dt=0,re=9999)=>{if(_e(lt)&&!(lt=lt.replace(/\D/g,"")).length)return;const Te=Math.round(lt);return Number.isNaN(Te)?void 0:tn(Te,Dt,re)};let{isActive:mt}=e;ct();let{stores:Z}=e,{locale:gt={}}=e,{resizeMinSize:xt=Un(1,1)}=e,{resizeMaxSize:dt=Un(9999,9999)}=e,{resizeAspectRatioLocked:wt=!1}=e,{resizeEnableButtonLockAspectRatio:J=!0}=e,{resizeSizePresetOptions:q}=e,{resizeWidthPresetOptions:ft}=e,{resizeHeightPresetOptions:Lt}=e,{resizeWillRenderFooter:_=qi}=e;const rt=di(0,{stiffness:.15,damping:.3});L(t,rt,lt=>i(54,w=lt));const{animation:zt,imageSize:Zt,imageCropRect:Ot,imageCropRectAspectRatio:Yt,imageCropAspectRatio:Ut,imageOutputSize:ht,imageSelectionZoom:G,imageSelectionPan:kt,history:ne,env:ue,allowPan:Nt,allowZoom:xe,allowZoomControls:Ht,allowPlayPause:ze}=Z;L(t,zt,lt=>i(50,g=lt)),L(t,Zt,lt=>i(73,nt=lt)),L(t,Ot,lt=>i(52,f=lt)),L(t,Yt,lt=>i(53,x=lt)),L(t,Ut,lt=>i(72,U=lt)),L(t,ht,lt=>i(61,D=lt)),L(t,G,lt=>i(74,k=lt)),L(t,kt,lt=>i(75,N=lt)),L(t,ue,lt=>i(51,m=lt));const W=aa();let Re,Se,Xt,Be,Fe,Xe,yi=an();const bt=(lt,Dt,re,Te,Qt)=>lt!=null&&re!==Dt?lt>=Te[Dt]&&lt<=Qt[Dt]?"valid":"invalid":"undetermined",be=(lt,Dt,re)=>Math.round(lt!=null?lt/Dt:re.height),Ue=()=>{wt&&Se&&Xt&&(Be==="width"?i(39,Xt=Math.round(Se/x)):Be==="height"?i(38,Se=Math.round(Xt*x)):(Fe==="width"?i(39,Xt=Math.round(Se/x)):Fe==="height"&&i(38,Se=Math.round(Xt*x)),Le()))},Le=lt=>{let Dt=ot(Se),re=ot(Xt),Te=Dt,Qt=re,et=Te&&Qt,jt=lt||x;if(!Te&&!Qt)return;Te&&!Qt?Qt=Math.round(Te/jt):Qt&&!Te&&(Te=Math.round(Qt*jt)),jt=lt||et?ea(Te,Qt):x;let Gt=Un(Te,Qt);bu(dt,Gt)||(Gt=to(dt,jt)),bu(Gt,xt)||(Gt=as(xt,jt)),i(38,Se=Dt!=null?Math.round(Gt.width):void 0),i(39,Xt=re!=null?Math.round(Gt.height):void 0)},Ve=()=>{Le();const{width:lt,height:Dt}=D||{};lt===Se&&Dt===Xt||(Se||Xt?(Se&&Xt&&vt(Ut,U=Se/Xt,U),vt(ht,D=Un(Se,Xt),D)):(vt(Ut,U=nt.width/nt.height,U),vt(Ut,U=void 0,U),vt(ht,D=void 0,D)),ne.write())},Ge=ht.subscribe(lt=>{if(!lt)return i(38,Se=void 0),void i(39,Xt=void 0);i(38,Se=lt.width),i(39,Xt=lt.height),Le()}),Qe=Ut.subscribe(lt=>{(Se||Xt)&&lt&&(Se&&Xt&&ea(Se,Xt)!==lt?(i(39,Xt=Se/lt),Le(lt)):Le())}),vi=lt=>_e(lt[0])?(lt[1]=lt[1].map(vi),lt):ui(lt)?[lt,""+lt]:lt,Si=lt=>{if(_e(lt[0]))return lt[1]=lt[1].map(Si),lt;let[Dt,re]=lt;if(ui(Dt)&&ui(re)){const[Te,Qt]=[Dt,re];re=`${Te} &times; ${Qt}`,Dt=[Te,Qt]}return[Dt,re]},Jt=ge();L(t,Jt,lt=>i(60,T=lt));const Ci=ge();L(t,Ci,lt=>i(64,V=lt));const X=ge();L(t,X,lt=>i(58,E=lt));const Vt=ge();L(t,Vt,lt=>i(63,y=lt));const H=ge();L(t,H,lt=>i(56,C=lt));const ie=ge();L(t,ie,lt=>i(62,P=lt));const pe=Bi([ht,Ci],([lt,Dt],re)=>{if(!Dt)return re(-1);const Te=Dt.findIndex(([Qt])=>{if(!Qt&&!lt)return!0;if(!Qt)return!1;const[et,jt]=Qt;return lt.width===et&&lt.height===jt});re(Te<0?0:Te)});L(t,pe,lt=>i(59,B=lt));const we=Bi([ht,Vt],([lt,Dt],re)=>{if(!Dt)return re(-1);const Te=Dt.findIndex(([Qt])=>!Qt&&!lt||!!Qt&&lt.width===Qt);re(Te<0?0:Te)});L(t,we,lt=>i(57,I=lt));const ye=Bi([ht,ie],([lt,Dt],re)=>{if(!Dt)return re(-1);const Te=Dt.findIndex(([Qt])=>!Qt&&!lt||!!Qt&&lt.height===Qt);re(Te<0?0:Te)});L(t,ye,lt=>i(55,S=lt));let ee,qt;const ei=un("redrawTrigger"),Ze=di(g?20:0);return L(t,Ze,lt=>i(48,p=lt)),Uo(()=>{Ge(),Qe()}),t.$$set=lt=>{"isActive"in lt&&ct(i(0,mt=lt.isActive)),"stores"in lt&&i(30,Z=lt.stores),"locale"in lt&&i(1,gt=lt.locale),"resizeMinSize"in lt&&i(31,xt=lt.resizeMinSize),"resizeMaxSize"in lt&&i(32,dt=lt.resizeMaxSize),"resizeAspectRatioLocked"in lt&&i(28,wt=lt.resizeAspectRatioLocked),"resizeEnableButtonLockAspectRatio"in lt&&i(33,J=lt.resizeEnableButtonLockAspectRatio),"resizeSizePresetOptions"in lt&&i(34,q=lt.resizeSizePresetOptions),"resizeWidthPresetOptions"in lt&&i(35,ft=lt.resizeWidthPresetOptions),"resizeHeightPresetOptions"in lt&&i(36,Lt=lt.resizeHeightPresetOptions),"resizeWillRenderFooter"in lt&&i(37,_=lt.resizeWillRenderFooter)},t.$$.update=()=>{262144&t.$$.dirty[1]&&Nt.set(!h),262144&t.$$.dirty[1]&&xe.set(!h),262144&t.$$.dirty[1]&&Ht.set(!h),262144&t.$$.dirty[1]&&h&&ze.set(!0),536870920&t.$$.dirty[1]&&q&&(vt(Jt,T=q.map(Si),T),vt(Ci,V=Ts(T),V)),536870912&t.$$.dirty[1]&&i(47,a=!!T),268435456&t.$$.dirty[1]|4&t.$$.dirty[2]&&i(46,n=B>-1&&V[B][1]),134217744&t.$$.dirty[1]&&ft&&(vt(X,E=ft.map(vi),E),vt(Vt,y=Ts(E),y)),134283264&t.$$.dirty[1]&&i(44,s=!a&&E),67108864&t.$$.dirty[1]|2&t.$$.dirty[2]&&i(45,r=I>-1&&y[I][1]),33554464&t.$$.dirty[1]&&Lt&&(vt(H,C=Lt.map(vi),C),vt(ie,P=Ts(C),P)),33619968&t.$$.dirty[1]&&i(43,l=!a&&C),16777216&t.$$.dirty[1]|1&t.$$.dirty[2]&&i(42,o=S>-1&&P[S][1]),77824&t.$$.dirty[1]&&i(41,c=!a&&!s&&!l),268435458&t.$$.dirty[0]|1072824263&t.$$.dirty[1]&&i(4,d=ei&&Uc(()=>{return _([a&&["Dropdown","size-presets",{label:n,options:T,onchange:Te=>{return(Qt=Te.value)&&!ee&&(ee={...f},qt=U),Qt?(vt(Ut,U=ea(Qt[0],Qt[1]),U),vt(ht,D=sy(Qt),D)):(vt(Ot,f=ee,f),vt(Ut,U=qt,U),vt(ht,D=void 0,D),ee=void 0,qt=void 0),void ne.write();var Qt},selectedIndex:B}],s&&["Dropdown","width-presets",{label:r,options:E,onchange:Te=>{i(38,Se=Te.value),Ve()},selectedIndex:I}],s&&l&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],l&&["Dropdown","height-presets",{label:o,options:C,onchange:Te=>{i(39,Xt=Te.value),Ve()},selectedIndex:S}],c&&[Gf,"width-input",{id:"width-"+W,title:gt.resizeTitleInputWidth,label:gt.resizeLabelInputWidth,placeholder:(lt=ot(Xt),Dt=x,re=f,Math.round(lt!=null?lt*Dt:re.width)),value:Se,state:bt(ot(Se),"width",Be,xt,dt),onchange:Te=>{i(38,Se=Te),Ue()}}],c&&J&&[Q6,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+W,title:gt.resizeTitleButtonMaintainAspectRatio,icon:_e(gt.resizeIconButtonMaintainAspectRatio)?gt.resizeIconButtonMaintainAspectRatio:gt.resizeIconButtonMaintainAspectRatio(wt,w),locked:wt,onchange:Te=>{i(28,wt=Te),Ue()}}],c&&[Gf,"height-input",{id:"height-"+W,title:gt.resizeTitleInputHeight,label:gt.resizeLabelInputHeight,placeholder:be(ot(Se),x,f),value:Xt,state:bt(ot(Xt),"height",Be,xt,dt),onchange:Te=>{i(39,Xt=Te),Ue()}}]].filter(Boolean),{...m},()=>ei.set({}));var lt,Dt,re}).filter(Boolean)),268435456&t.$$.dirty[0]&&rt.set(wt?1:0),512&t.$$.dirty[1]&&Be&&(Fe=Be),262144&t.$$.dirty[1]&&h&&(yi=N,Xe=k),1074003968&t.$$.dirty[1]&&(h?setTimeout(()=>{return lt=D,vt(kt,N=an(),N),void vt(G,k=lt&&f?lt.width/f.width||lt.height/f.height:1,k);var lt},0):(vt(kt,N=yi,N),vt(G,k=Xe,k))),786432&t.$$.dirty[1]&&g&&Ze.set(h?0:20),131072&t.$$.dirty[1]&&i(3,u=p?`transform: translateY(${p}px)`:void 0)},[mt,gt,Re,u,d,rt,zt,Zt,Ot,Yt,Ut,ht,G,kt,ue,lt=>{const Dt=lt.target.id;/width/.test(Dt)?i(40,Be="width"):/height/.test(Dt)?i(40,Be="height"):/aspectRatio/i.test(Dt)?i(40,Be="lock"):i(40,Be=void 0)},lt=>{Re.contains(lt.relatedTarget)||Ve(),i(40,Be=void 0)},Ve,Jt,Ci,X,Vt,H,ie,pe,we,ye,Ze,wt,"resize",Z,xt,dt,J,q,ft,Lt,_,Se,Xt,Be,c,o,l,s,r,n,a,p,h,g,m,f,x,w,S,C,I,E,B,T,D,P,y,V,function(lt){Wi[lt?"unshift":"push"](()=>{Re=lt,i(2,Re)})},function(lt){Xr.call(this,t,lt)}]}var rk={util:["resize",class extends li{constructor(t){super(),si(this,t,nk,ik,oi,{name:29,isActive:0,stores:30,locale:1,resizeMinSize:31,resizeMaxSize:32,resizeAspectRatioLocked:28,resizeEnableButtonLockAspectRatio:33,resizeSizePresetOptions:34,resizeWidthPresetOptions:35,resizeHeightPresetOptions:36,resizeWillRenderFooter:37},null,[-1,-1,-1,-1])}get name(){return this.$$.ctx[29]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),R()}get stores(){return this.$$.ctx[30]}set stores(t){this.$$set({stores:t}),R()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),R()}get resizeMinSize(){return this.$$.ctx[31]}set resizeMinSize(t){this.$$set({resizeMinSize:t}),R()}get resizeMaxSize(){return this.$$.ctx[32]}set resizeMaxSize(t){this.$$set({resizeMaxSize:t}),R()}get resizeAspectRatioLocked(){return this.$$.ctx[28]}set resizeAspectRatioLocked(t){this.$$set({resizeAspectRatioLocked:t}),R()}get resizeEnableButtonLockAspectRatio(){return this.$$.ctx[33]}set resizeEnableButtonLockAspectRatio(t){this.$$set({resizeEnableButtonLockAspectRatio:t}),R()}get resizeSizePresetOptions(){return this.$$.ctx[34]}set resizeSizePresetOptions(t){this.$$set({resizeSizePresetOptions:t}),R()}get resizeWidthPresetOptions(){return this.$$.ctx[35]}set resizeWidthPresetOptions(t){this.$$set({resizeWidthPresetOptions:t}),R()}get resizeHeightPresetOptions(){return this.$$.ctx[36]}set resizeHeightPresetOptions(t){this.$$set({resizeHeightPresetOptions:t}),R()}get resizeWillRenderFooter(){return this.$$.ctx[37]}set resizeWillRenderFooter(t){this.$$set({resizeWillRenderFooter:t}),R()}}]};function ok(t){let e,i;return e=new Gu({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[10],mapImagePointToScreenPoint:t[9],enableMultiSelect:t[6],utilKey:"redact",imageRotation:t[11],imageFlipX:t[8],imageFlipY:t[7],shapes:t[12],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:t[14],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:t[5],hooks:{willRenderShapeControls:t[25]}}}),e.$on("measure",t[26]),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,[r]){const o={};8&r&&(o.stores=n[3]),16&r&&(o.locale=n[4]),1&r&&(o.isActive=n[0]),2&r&&(o.isActiveFraction=n[1]),4&r&&(o.isVisible=n[2]),1024&r&&(o.mapScreenPointToImagePoint=n[10]),512&r&&(o.mapImagePointToScreenPoint=n[9]),64&r&&(o.enableMultiSelect=n[6]),2048&r&&(o.imageRotation=n[11]),256&r&&(o.imageFlipX=n[8]),128&r&&(o.imageFlipY=n[7]),32&r&&(o.willStartInteraction=n[5]),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function ak(t,e,i){let n,r,o,a,s,l,c,d,u,{isActive:p}=e,{isActiveFraction:h}=e,{isVisible:g}=e,{stores:m}=e,{locale:f={}}=e,{markupEditorWillStartInteraction:x}=e,{enableMultiSelect:w}=e;const{imageRedaction:S,rootRect:C,imageSize:I,imageRotation:E,imageFlipX:B,imageFlipY:T,imageTransforms:D,imageTransformsInterpolated:U}=m;return L(t,C,P=>i(24,d=P)),L(t,I,P=>i(23,c=P)),L(t,E,P=>i(11,u=P)),L(t,B,P=>i(8,a=P)),L(t,T,P=>i(7,o=P)),L(t,D,P=>i(22,l=P)),L(t,U,P=>i(21,s=P)),t.$$set=P=>{"isActive"in P&&i(0,p=P.isActive),"isActiveFraction"in P&&i(1,h=P.isActiveFraction),"isVisible"in P&&i(2,g=P.isVisible),"stores"in P&&i(3,m=P.stores),"locale"in P&&i(4,f=P.locale),"markupEditorWillStartInteraction"in P&&i(5,x=P.markupEditorWillStartInteraction),"enableMultiSelect"in P&&i(6,w=P.enableMultiSelect)},t.$$.update=()=>{31457664&t.$$.dirty&&i(10,n=P=>d0(P,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),31457664&t.$$.dirty&&i(9,r=P=>c0(P,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[p,h,g,m,f,x,w,o,a,r,n,u,S,C,I,E,B,T,D,U,"redact",s,l,c,d,P=>{const y=gh(P[0]);return E3("to-front",y),P},function(P){Xr.call(this,t,P)}]}var sk={util:["redact",class extends li{constructor(t){super(),si(this,t,ak,ok,oi,{name:20,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5,enableMultiSelect:6})}get name(){return this.$$.ctx[20]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),R()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),R()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),R()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),R()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),R()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),R()}get enableMultiSelect(){return this.$$.ctx[6]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),R()}},({src:t})=>t&&!Xl(t)]};function Zf(t){let e,i,n=(sn(t[32].label)?t[32].label(t[1]):t[32].label)+"";return{c(){e=ut("span"),i=$n(n)},m(r,o){it(r,e,o),St(e,i)},p(r,o){2&o[0]|2&o[1]&&n!==(n=(sn(r[32].label)?r[32].label(r[1]):r[32].label)+"")&&Ln(i,n)},d(r){r&&Q(e)}}}function lk(t){let e,i,n,r=(t[11](t[32].value)||"")+"",o=t[32].label&&Zf(t);return{c(){e=ut("div"),i=new Ou(!1),n=$e(),o&&o.c(),i.a=n,v(e,"slot","option")},m(a,s){it(a,e,s),i.m(r,e),St(e,n),o&&o.m(e,null)},p(a,s){2&s[1]&&r!==(r=(a[11](a[32].value)||"")+"")&&i.p(r),a[32].label?o?o.p(a,s):(o=Zf(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(a){a&&Q(e),o&&o.d()}}}function ck(t){let e,i;return e=new cs({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[4],onchange:t[10],$$slots:{option:[lk,({option:n})=>({32:n}),({option:n})=>[0,n?2:0]]},$$scope:{ctx:t}}}),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};2&r[0]&&(o.locale=n[1]),4&r[0]&&(o.options=n[2]),16&r[0]&&(o.selectedIndex=n[4]),2&r[0]|6&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function dk(t){let e,i,n;return i=new Ta({props:{elasticity:t[5],$$slots:{default:[ck]},$$scope:{ctx:t}}}),{c(){e=ut("div"),It(i.$$.fragment),v(e,"slot","footer"),v(e,"style",t[3])},m(r,o){it(r,e,o),Pt(i,e,null),n=!0},p(r,o){const a={};32&o[0]&&(a.elasticity=r[5]),22&o[0]|4&o[1]&&(a.$$scope={dirty:o,ctx:r}),i.$set(a),(!n||8&o[0])&&v(e,"style",r[3])},i(r){n||(M(i.$$.fragment,r),n=!0)},o(r){F(i.$$.fragment,r),n=!1},d(r){r&&Q(e),Rt(i)}}}function uk(t){let e,i;return e=new ul({props:{$$slots:{footer:[dk]},$$scope:{ctx:t}}}),e.$on("measure",t[22]),{c(){It(e.$$.fragment)},m(n,r){Pt(e,n,r),i=!0},p(n,r){const o={};62&r[0]|4&r[1]&&(o.$$scope={dirty:r,ctx:n}),e.$set(o)},i(n){i||(M(e.$$.fragment,n),i=!0)},o(n){F(e.$$.fragment,n),i=!1},d(n){Rt(e,n)}}}function pk(t,e,i){let n,r,o,a,s,l,c,d,u,p,h=Je,g=()=>(h(),h=Gr(m,k=>i(17,l=k)),m);t.$$.on_destroy.push(()=>h());let{isActive:m}=e;g();let{stores:f}=e,{locale:x={}}=e,{fillOptions:w=[]}=e;const S=k=>k.map(N=>(tt=>An(tt)&&_e(tt[0])&&An(tt[1]))(N)?[N[0],S(N[1]),N[2]]:(tt=>[Array.isArray(tt)&&tt.length===3?[...tt,1]:tt,void 0,{disabled:!1}])(N)),C=un("elasticityMultiplier");L(t,C,k=>i(21,p=k));const{history:I,animation:E,scrollElasticity:B,imageBackgroundColor:T,imageBackgroundImage:D,allowPan:U,allowZoom:P,allowZoomControls:y,allowPlayPause:V}=f;L(t,E,k=>i(18,c=k)),L(t,T,k=>i(20,u=k)),L(t,D,k=>i(19,d=k));const nt=di(c?20:0);return L(t,nt,k=>i(16,s=k)),t.$$set=k=>{"isActive"in k&&g(i(0,m=k.isActive)),"stores"in k&&i(14,f=k.stores),"locale"in k&&i(1,x=k.locale),"fillOptions"in k&&i(15,w=k.fillOptions)},t.$$.update=()=>{32768&t.$$.dirty[0]&&i(2,n=S(w)),131072&t.$$.dirty[0]&&U.set(l),131072&t.$$.dirty[0]&&P.set(l),131072&t.$$.dirty[0]&&y.set(l),131072&t.$$.dirty[0]&&l&&V.set(!0),2097152&t.$$.dirty[0]&&i(5,r=p*B),1572868&t.$$.dirty[0]&&i(4,o=n.findIndex(([k])=>d?k===d:Array.isArray(k)?ss(k,u):void 0)||0),393216&t.$$.dirty[0]&&c&&nt.set(l?0:20),65536&t.$$.dirty[0]&&i(3,a=s?`transform: translateY(${s}px)`:void 0)},[m,x,n,a,o,r,C,E,T,D,({value:k})=>{_e(k)&&(vt(T,u=void 0,u),vt(D,d=k,d)),An(k)&&(vt(T,u=k,u),vt(D,d=void 0,d)),I.write()},k=>{if(_e(k))return`<div class="PinturaFillTile"><img src="${k}" alt="" width="48" height="64"/></div>`;if(An(k)){const[N,tt,ct,ot]=k.map((mt,Z)=>Z<3?Math.round(255*mt):mt);return`<div class="PinturaFillTile" data-transparent="${ot<1}"><div style="background-color:rgba(${N},${tt},${ct},${ot})"></div></div>`}return"<div></div>"},nt,"fill",f,w,s,l,c,d,u,p,function(k){Xr.call(this,t,k)}]}var hk={util:["fill",class extends li{constructor(t){super(),si(this,t,pk,uk,oi,{name:13,isActive:0,stores:14,locale:1,fillOptions:15},null,[-1,-1])}get name(){return this.$$.ctx[13]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),R()}get stores(){return this.$$.ctx[14]}set stores(t){this.$$set({stores:t}),R()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),R()}get fillOptions(){return this.$$.ctx[15]}set fillOptions(t){this.$$set({fillOptions:t}),R()}},({src:t,fillOptions:e})=>t&&!Xl(t)&&e&&e.length]};const Xf='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',Zp='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var mk={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:t=>t.join(", ")+" not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:Xf,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:Xf,statusLabelLoadImage:t=>t&&t.task?t.error?t.error.code==="IMAGE_TOO_SMALL"?"Minimum image size is {minWidth} &times; {minHeight}":"Error loading image":t.task==="blob-to-bitmap"?"Preparing image&hellip;":"Loading image&hellip;":"Waiting for image",statusLabelProcessImage:t=>{if(t&&t.task)return t.task==="store"?t.error?"Error uploading image":"Uploading image&hellip;":t.error?"Error processing image":"Processing image&hellip;"}};const $k={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+Zp,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+Zp,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+Zp,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextOutline:"Text outline",shapeTitleTextOutlineWidth:"Width",shapeTitleTextShadow:"Text shadow",shapeTitleTextShadowBlur:"Blur",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:"Selection mode",shapeTitleBrushSize:"Brush size",shapeLabelSelectionModeNew:"New",shapeLabelSelectionModeAdd:"Add",shapeLabelSelectionModeSubtract:"Remove",shapeLabelToolSelectionBrush:"Brush",shapeLabelToolSelectionLassoo:"Lassoo",shapeLabelToolSelectionRectangle:"Rectangle marquee",shapeLabelToolSelectionEllipse:"Ellipse marquee",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'};var gk={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(t,e)=>{const[i,n,r]=e?[e<1?1:.3,e===1?.85:.5,e>1?1:.3]:[.2,.3,.4];return`<g fill="currentColor">
            <rect opacity="${i}" x="2" y="4" width="10" height="18" rx="1"/>
            <rect opacity="${n}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${r}" x="6" y="12" width="17" height="10" rx="1"/>
        </g>`},cropIconCropBoundary:(t,e)=>{const[i,n,r,o]=e?[.3,1,0,0]:[0,0,.3,1];return`<g fill="currentColor">
            <rect opacity="${i}" x="2" y="3" width="20" height="20" rx="1"/>
            <rect opacity="${n}" x="7" y="8" width="10" height="10" rx="1"/>
            <rect opacity="${r}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${o}" x="12" y="4" width="10" height="10" rx="1"/>
        </g>`},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},fk={fillLabel:"Fill",fillIcon:`
    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
        <g transform="rotate(60, 12, 12)">
            <rect x="4" y="4" width="14" height="16" rx="3"/>
        </g>
        <path d="M21 13 L21 21"></path>
        <path d="M4.5 12.5 L19 12.5"></path>
    </g>
    `},yk={frameLabel:"Frame",frameIcon:`<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
            <rect x="2" y="2" width="20" height="20" rx="4"/>
            <rect x="6" y="6" width="12" height="12" rx="1"/>
        </g>`,frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},bk={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},bh=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t);Object.keys(i).forEach(n=>{i[n].get?Object.defineProperty(e,n,{get:()=>t[n],set:r=>t[n]=r}):e[n]=t[n]})},ab=t=>{const e={},{sub:i,pub:n}=os();Cr()&&document.doctype!==null||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const r=c2();bh(r,e);const o=((c,d)=>{const u={},p=new Zg({target:c,props:{stores:d,pluginComponents:Array.from($h)}});let h=!1;const g=()=>{h||(Cr()&&window.removeEventListener("pagehide",g),p&&(h=!0,p.$destroy()))};Np||(Np=new Set(Qh(Zg).filter(f=>!T3.includes(f)))),Np.forEach(f=>{Object.defineProperty(u,f,{get:()=>p[f],set:M3.includes(f)?x=>{p[f]={...p[f],...x}}:x=>p[f]=x})}),Object.defineProperty(u,"previewImageData",{get:()=>p.imagePreviewCurrent}),N2.forEach(f=>{const x=fu[f],w=x[0];Object.defineProperty(u,f,{get:()=>p.pluginInterface[w][f],set:S=>{const C=x.reduce((I,E)=>(I[E]={...p.pluginOptions[E],[f]:S},I),{});p.pluginOptions={...p.pluginOptions,...C}}})}),Object.defineProperty(u,"element",{get:()=>p.root,set:()=>{}});const m=p.history;return Iu(u,{on:(f,x)=>{if(h)return()=>{};if(/undo|redo|revert|writehistory/.test(f))return m.on(f,x);const w=[p.sub(f,x),p.$on(f,S=>x(S instanceof CustomEvent&&!S.detail?void 0:S))].filter(Boolean);return()=>w.forEach(S=>S())},updateImagePreview:f=>{p.imagePreviewSrc=f},close:()=>!h&&p.pub("close"),destroy:g}),Object.defineProperty(u,"history",{get:()=>({undo:()=>m.undo(),redo:()=>m.redo(),revert:()=>m.revert(),get:()=>m.get(),getCollapsed:()=>m.get().splice(0,m.index+1),set:f=>m.set(f),write:f=>m.write(f),get length(){return m.length()},get index(){return m.index},set index(f){m.index=f}})}),Cr()&&window.addEventListener("pagehide",g),u})(t,r.stores);bh(o,e);const a=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(c=>o.on(c,d=>{const u=r[c](d&&d.detail);u instanceof Promise&&u.catch(fe)})),s=(c,d)=>{const u=i(c,d),p=r.on(c,d),h=o.on(c,d);return()=>{u(),p(),h()}};e.handleEvent=fe;const l=H2.map(c=>s(c,d=>e.handleEvent(c,d)));return Iu(e,{on:s,updateImage:c=>new Promise((d,u)=>{const p=e.history.get(),h=e.history.index,g=e.imageState;r.loadImage(c).then(m=>{e.history.set(p),e.history.index=h,e.imageState=g,d(m)}).catch(u)}),close:()=>{n("close")},destroy:()=>{[...a,...l].forEach(c=>c()),o.destroy(),r.destroy(),n("destroy")}}),setTimeout(()=>n("init",e),0),e};Cr();var xk=(t,e={})=>{const i=_e(t)?document.querySelector(t):t;if(!Vl(i))return;e.class=e.class?"pintura-editor "+e.class:"pintura-editor";const n=ab(i);return Object.assign(n,e)};const Yf=(t,e,i,n)=>{const r=at(e.x-t.x,e.y-t.y),o=ho(r),a=5*i;let s;s=n?.5*a:Math.ceil(.5*(a-1));const l=Dr(We(o),s);return{anchor:We(t),offset:l,normal:o,solid:n,size:a,sizeHalf:s}},vk=(t,e,i)=>{const{strokeWidth:n,strokeColor:r,strokeJoin:o,strokeCap:a,...s}=t,{anchor:l,offset:c,normal:d,solid:u,size:p,sizeHalf:h}=e,g=l.x,m=l.y,f=Dr(We(d),p),x=at(g+f.x,m+f.y);if(Dr(f,.55),u){Fn(i,c);const w=Dr(We(d),.5*h);return[{...s,points:[at(g-w.x,m-w.y),at(x.x-f.y,x.y+f.x),at(x.x+f.y,x.y-f.x)],pathClose:!0,backgroundColor:r}]}{const w=Dr((I=>{const E=I.x;return I.x=-I.y,I.y=E,I})(We(d)),.5),S=at(g-w.x,m-w.y),C=at(g+w.x,m+w.y);return[{...s,points:[at(x.x+f.y,x.y-f.x),S,at(g,m),C,at(x.x-f.y,x.y+f.x)],pathClose:!1,strokeWidth:n,strokeColor:r,strokeJoin:o,strokeCap:a}]}},wk=(t,e,i)=>{const{strokeWidth:n,strokeColor:r,...o}=t,{anchor:a,solid:s,offset:l,normal:c,sizeHalf:d}=e;return Fn(i,l),s&&Fn(i,Fl(We(c))),[{...o,x:a.x,y:a.y,rx:d,ry:d,backgroundColor:s?r:void 0,strokeWidth:s?void 0:n,strokeColor:s?void 0:r}]},Sk=(t,e)=>{const{strokeWidth:i,strokeColor:n,strokeJoin:r,strokeCap:o,...a}=t,{anchor:s,offset:l}=e;return[{...a,points:[at(s.x-l.y,s.y+l.x),at(s.x+l.y,s.y-l.x)],strokeWidth:i,strokeColor:n,strokeJoin:r,strokeCap:o}]},kk=(t,e,i)=>{const{strokeWidth:n,strokeColor:r,...o}=t,{anchor:a,solid:s,offset:l,normal:c,sizeHalf:d}=e;return Fn(i,l),[{...o,x:a.x-d,y:a.y-d,width:2*d,height:2*d,rotation:(u=c,Math.atan2(u.y,u.x)),backgroundColor:s?r:void 0,strokeWidth:s?void 0:n,strokeColor:s?void 0:r}];var u},Ck=(t={})=>e=>{if(!e.lineStart&&!e.lineEnd)return;const i=[],{x1:n,y1:r,x2:o,y2:a,lineStart:s,lineEnd:l,strokeWidth:c,strokeColor:d,strokeJoin:u,strokeCap:p,strokeDash:h,bitmap:g,aboveFrame:m,opacity:f}=e,x=at(n,r),w=at(o,a),S=[x,w],C={bitmap:g,aboveFrame:m,opacity:f,strokeColor:d,strokeWidth:c,strokeJoin:u,strokeCap:p};if(s){const[I,E]=s.split("-"),B=t[I];if(B){const T=Yf(x,w,c,!!E);i.push(...B(C,T,x))}}if(l){const[I,E]=l.split("-"),B=t[I];if(B){const T=Yf(w,x,c,!!E);i.push(...B(C,T,w))}}return[{...C,strokeDash:h,points:S},...i]},Tk=()=>({arrow:vk,circle:wk,square:kk,bar:Sk}),xh=(t,e)=>{const i=parseFloat(t)*e;return _e(t)?i+"%":i},oa=(t,e)=>_e(t)?Tu(t,e):t,Mk=t=>[{...t,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?xh(t.frameSize,2):"2.5%",frameRadius:t.frameRound?xh(t.frameSize,2):0}],Pk=({width:t,height:e,frameImage:i,frameSize:n="15%",frameOutset:r=0,frameSlices:o={x1:.15,y1:.15,x2:.85,y2:.85}},{isPreview:a})=>{if(!i)return[];const s=Math.sqrt(t*e),l=oa(n,s),c=a?l:Math.round(l),d=c,u=oa(r,s),p=2*u,{x1:h,x2:g,y1:m,y2:f}=o,x={x0:0,y0:0,x1:c,y1:d,x2:t-c,y2:e-d,x3:t,y3:e,cw:c,ch:d,ew:t-c-c,eh:e-d-d},w=a?1:0,S=2*w,C=u>0,I={expandsCanvas:C,width:x.cw,height:x.ch,backgroundImage:i};return[{expandsCanvas:C,x:x.x1-w-u,y:x.y0-u,width:x.ew+S+p,height:x.ch,backgroundCorners:[{x:h,y:0},{x:g,y:0},{x:g,y:m},{x:h,y:m}],backgroundImage:i},{expandsCanvas:C,x:x.x1-w-u,y:x.y2+u,width:x.ew+S+p,height:x.ch,backgroundCorners:[{x:h,y:f},{x:g,y:f},{x:g,y:1},{x:h,y:1}],backgroundImage:i},{expandsCanvas:C,x:x.x0-u,y:x.y1-w-u,width:x.cw,height:x.eh+S+p,backgroundCorners:[{x:0,y:m},{x:h,y:m},{x:h,y:f},{x:0,y:f}],backgroundImage:i},{expandsCanvas:C,x:x.x2+u,y:x.y1-w-u,width:x.cw,height:x.eh+S+p,backgroundCorners:[{x:g,y:m},{x:1,y:m},{x:1,y:f},{x:g,y:f}],backgroundImage:i},{...I,x:x.x0-u,y:x.y0-u,backgroundCorners:[{x:0,y:0},{x:h,y:0},{x:h,y:m},{x:0,y:m}]},{...I,x:x.x2+u,y:x.y0-u,backgroundCorners:[{x:g,y:0},{x:1,y:0},{x:1,y:m},{x:g,y:m}]},{...I,x:x.x2+u,y:x.y2+u,backgroundCorners:[{x:g,y:f},{x:1,y:f},{x:1,y:1},{x:g,y:1}]},{...I,x:x.x0-u,y:x.y2+u,backgroundCorners:[{x:0,y:f},{x:h,y:f},{x:h,y:1},{x:0,y:1}]}]},Rk=({x:t,y:e,width:i,height:n,frameInset:r="3.5%",frameSize:o=".25%",frameColor:a=[1,1,1],frameOffset:s="5%",frameAmount:l=1,frameRadius:c=0,expandsCanvas:d=!1},{isPreview:u})=>{const p=Math.sqrt(i*n);let h=oa(o,p);const g=oa(r,p),m=oa(s,p);let f=0;u||(h=Math.max(1,Math.round(h)),f=h%2==0?0:.5);const x=oa(xh(c,l),p);return new Array(l).fill(void 0).map((w,S)=>{const C=m*S;let I=t+g+C,E=e+g+C,B=t+i-g-C,T=e+n-g-C;return u||(I=Math.round(I),E=Math.round(E),B=Math.round(B),T=Math.round(T)),{x:I+f,y:E+f,width:B-I,height:T-E,cornerRadius:x>0?x-C:0,strokeWidth:h,strokeColor:a,expandsCanvas:d}})},Ik=({x:t,y:e,width:i,height:n,frameSize:r=".25%",frameOffset:o=0,frameInset:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(i*n);let d=oa(r,c),u=oa(a,c),p=oa(o,c),h=0;l||(d=Math.max(1,Math.round(d)),u=Math.round(u),p=Math.round(p),h=d%2==0?0:.5);const g=p-u,m=t+u+h,f=e+u+h,x=t+i-u-h,w=e+n-u-h;return[{points:[at(m+g,f),at(x-g,f)]},{points:[at(x,f+g),at(x,w-g)]},{points:[at(x-g,w),at(m+g,w)]},{points:[at(m,w-g),at(m,f+g)]}].map(S=>(S.strokeWidth=d,S.strokeColor=s,S))},Ek=({x:t,y:e,width:i,height:n,frameSize:r=".25%",frameInset:o="2.5%",frameLength:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(i*n);let d=oa(r,c),u=oa(o,c),p=oa(a,c),h=0;l||(d=Math.max(1,Math.round(d)),u=Math.round(u),p=Math.round(p),h=d%2==0?0:.5);const g=t+u+h,m=e+u+h,f=t+i-u-h,x=e+n-u-h;return[{points:[at(g,m+p),at(g,m),at(g+p,m)]},{points:[at(f-p,m),at(f,m),at(f,m+p)]},{points:[at(f,x-p),at(f,x),at(f-p,x)]},{points:[at(g+p,x),at(g,x),at(g,x-p)]}].map(w=>(w.strokeWidth=d,w.strokeColor=s,w))},Ak=({x:t,y:e,width:i,height:n,frameColor:r=[1,1,1]},{isPreview:o})=>{const a=Math.sqrt(i*n),s=.1*a;let l=.2*a,c=0;const d=.5*s;return o?c=1:l=Math.ceil(l),r.length=3,[{id:"border",x:t-d+c,y:e-d+c,width:i+s-2*c,height:n+l-2*c,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:s,frameColor:r,expandsCanvas:!0},{id:"chin",x:t-d,y:n-c,width:i+s,height:l,backgroundColor:r,expandsCanvas:!0}].filter(Boolean)},Lk=(t={})=>(e,i)=>{if(!Ae(e,"frameStyle"))return;const n=e.frameStyle,r=t[n];if(!r)return;const{frameStyle:o,...a}=e;return r(a,i)},zk=()=>({solid:Mk,hook:Ek,line:Rk,edge:Ik,polaroid:Ak,nine:Pk}),Fk=t=>{const e=(i,n={isPreview:!0})=>{const r=t.map(o=>{const a=o(i,n);if(a)return a.map(s=>e(s,n))}).filter(Boolean).flat();return r.length?r.flat().map((o,a)=>(o.id=i.id+"_"+a,o)):i};return e};typeof window<"u"&&(t=>{if(!t)return;const[e,i,n,r]=[[108,111,99,97,116,105,111,110],[82,101,103,69,120,112],[116,101,115,116],[112,113,105,110,97,92,46,110,108]].map(o=>o.map(a=>String.fromCharCode(a)).join(""));t._5pn6ltx=new t[i](r)[n](t[e])})(window);const Dk=v2,qf=w2,Bk=()=>({read:ox,apply:ty}),Ok=(t={})=>{const{blurAmount:e,dataSizeScalar:i,scrambleAmount:n,backgroundColor:r}=t;return(o,a)=>(async(s,l={})=>{if(!s)return;const{width:c,height:d}=s,{dataSize:u=96,dataSizeScalar:p=1,scrambleAmount:h=4,blurAmount:g=6,outputFormat:m="canvas",backgroundColor:f=[0,0,0]}=l,x=Math.round(u*p),w=Math.min(x/c,x/d),S=Math.floor(c*w),C=Math.floor(d*w),I=yn("canvas",{width:S,height:C}),E=I.getContext("2d",{willReadFrequently:!0});if(f.length=3,E.fillStyle=Sr(f),E.fillRect(0,0,S,C),Wl(s)){const U=yn("canvas",{width:c,height:d});U.getContext("2d",{willReadFrequently:!0}).putImageData(s,0,0),E.drawImage(U,0,0,S,C),or(U)}else E.drawImage(s,0,0,S,C);const B=E.getImageData(0,0,S,C),T=[];if(h>0&&T.push([Xv,{amount:h}]),g>0)for(let U=0;U<g;U++)T.push([ky,{matrix:Yv}]);let D;if(T.length){const U=(V,nt)=>`(err, imageData) => {
(${V[nt][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${nt}]), 
${V[nt+1]?U(V,nt+1):"done"})
}`,P=`function (options, done) {
const filterInstructions = options.filterInstructions;
const imageData = options.imageData;
(${U(T,0)})(null, imageData)
}`,y=await Xc(P,[{imageData:B,filterInstructions:T.map(V=>V[1])}],[B.data.buffer]);D=Lh(y)}else D=B;return m==="canvas"?(E.putImageData(D,0,0),I):D})(o,{blurAmount:e,scrambleAmount:n,backgroundColor:r,...a,dataSizeScalar:i||a.dataSizeScalar})},Wk=tb,_k={markupEditorToolbar:gw(),markupEditorToolStyles:$w(),markupEditorShapeStyleControls:tb()},Vk=kS,Nk=IS,Hk=BS,jk=F6,Uk=O6,Gk=V6,Zk=Z6,Xk=sk,Yk=rk,qk=hk,Kk=ew,Jk=G3,Qk=uw,t8=mk,e8=$k,i8=gk,n8=fk,r8={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},o8={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},a8={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:(t,e)=>`<defs><mask id="mask1" x="0" y="0" width="24" height="24" ><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g  mask="url(#mask1)"><path transform="translate(0 ${3*(e-1)})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>`},s8={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},l8={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},c8={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},d8=yk,u8=bk,p8=xk,h8=(t=[])=>Fk([Lk(zk()),Ck(Tk()),...t]),m8=(t={})=>{let e,i;Array.isArray(t.imageReader)||(i=t.imageReader,delete t.imageReader),Array.isArray(t.imageWriter)?e=qf():(e=sn(t.imageWriter)?t.imageWriter:qf(t.imageWriter),delete t.imageWriter);let n;return sn(t.imageScrambler)||(n=t.imageScrambler,delete t.imageScrambler),{imageReader:Dk(i),imageWriter:e,imageOrienter:Bk(),imageScrambler:Ok(n)}},$8=(t={})=>{P3(Vk,Nk,Hk,jk,Uk,Gk,Zk,Xk,Yk,qk);const e=m8(t),i={...t8,...e8,...i8,...n8,...r8,...o8,...d8,...u8,...a8,...s8,...l8,...c8,...t.locale};delete t.locale;const n=typeof t.shapePreprocessor=="function"?t.shapePreprocessor:h8(t.shapePreprocessor);return delete t.shapePreprocessor,t.markupEditorShapeStyleControls&&Object.entries(t.markupEditorShapeStyleControls).every(([r,o])=>/Options$/.test(r)||!Array.isArray(o))&&(t.markupEditorShapeStyleControls=Wk({...t.markupEditorShapeStyleControls})),n2([{...e,shapePreprocessor:n,utils:["trim","crop","filter","finetune","retouch","annotate","decorate","sticker","fill","frame","redact","resize"],...Kk,...Jk,...Qk,..._k,stickerStickToImage:!0,locale:i},t])},g8={mounted(){this.editor=p8(this.$refs.elementRef,Object.assign({},this.$attrs)),this.unsubs=j2(this.editor,this.$refs.elementRef)},beforeUpdate(){Object.assign(this.editor,Object.assign({},this.$attrs))},beforeUnmount(){this.editor&&(this.editor.destroy(),this.unsubs.forEach(t=>t()),this.unsubs=[],this.editor=void 0)},render(){return Zb("div",{className:"PinturaRootWrapper",ref:"elementRef"})}},f8=Xb({__name:"MediaImageEditor",props:{media:{}},async setup(t){let e,i;const n=t,r=$8({enableButtonClose:!0});n.media.fetch();const o=([e,i]=Yb(()=>Ub(n.media)),e=await e,i(),e);function a(l){n.media.setMediaImage(l.detail.dest),n.media.setEditing(!1),n.media.setUniqueId()}function s(l){l||n.media.setEditing(!1)}return(l,c)=>(qb(),Kb(ex,{to:"#drawer-editor"},[$m(ix,{width:500,"rail-width":500,touchless:"","model-value":!0,"disable-resize-watcher":!0,elevation:0,class:"ig-navigation-drawer-editor","onUpdate:modelValue":s},{default:Jb(()=>[$m(op(g8),Qb(op(r),{src:op(o),"onPintura:process":c[0]||(c[0]=d=>a(d)),"onPintura:close":c[1]||(c[1]=d=>l.media.setEditing(!1)),onContextmenu:c[2]||(c[2]=tx(()=>{},["stop"]))}),null,16,["src"])]),_:1})]))}}),F8=Gb(f8,[["__scopeId","data-v-96e7af5e"]]);export{F8 as default};
