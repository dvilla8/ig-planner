import{r as P,b9 as j,ba as B,aX as H,g as G,B as C,N as Q,aA as R,n as V,Q as X,b5 as Y}from"./Cirpr_rb.js";function k(t){return B()?(H(t),!0):!1}function F(){const t=new Set,n=r=>{t.delete(r)};return{on:r=>{t.add(r);const d=()=>n(r);return k(d),{off:d}},off:n,trigger:(...r)=>Promise.all(Array.from(t).map(d=>d(...r))),clear:()=>{t.clear()}}}function T(t){return typeof t=="function"?t():G(t)}const x=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const z=Object.prototype.toString,J=t=>z.call(t)==="[object Object]",L=()=>{},K=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),Z=ee();function ee(){var t,n;return x&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function te(t){let n;function e(){return n||(n=t()),n}return e.reset=async()=>{const l=n;n=void 0,l&&await l},e}function ne(t,n,e={}){const{immediate:l=!0}=e,f=P(!1);let r=null;function d(){r&&(clearTimeout(r),r=null)}function i(){f.value=!1,d()}function v(...g){d(),f.value=!0,r=setTimeout(()=>{f.value=!1,r=null,t(...g)},T(n))}return l&&(f.value=!0,x&&v()),k(i),{isPending:j(f),start:v,stop:i}}const q=x?window:void 0,oe=x?window.document:void 0,U=x?window.navigator:void 0;function E(t){var n;const e=T(t);return(n=e==null?void 0:e.$el)!=null?n:e}function S(...t){let n,e,l,f;if(typeof t[0]=="string"||Array.isArray(t[0])?([e,l,f]=t,n=q):[n,e,l,f]=t,!n)return L;Array.isArray(e)||(e=[e]),Array.isArray(l)||(l=[l]);const r=[],d=()=>{r.forEach(s=>s()),r.length=0},i=(s,c,y,h)=>(s.addEventListener(c,y,h),()=>s.removeEventListener(c,y,h)),v=Q(()=>[E(n),T(f)],([s,c])=>{if(d(),!s)return;const y=J(c)?{...c}:c;r.push(...e.flatMap(h=>l.map(b=>i(s,h,b,y))))},{immediate:!0,flush:"post"}),g=()=>{v(),d()};return k(g),g}let I=!1;function se(t,n,e={}){const{window:l=q,ignore:f=[],capture:r=!0,detectIframe:d=!1}=e;if(!l)return L;Z&&!I&&(I=!0,Array.from(l.document.body.children).forEach(u=>u.addEventListener("click",L)),l.document.documentElement.addEventListener("click",L));let i=!0;const v=u=>T(f).some(p=>{if(typeof p=="string")return Array.from(l.document.querySelectorAll(p)).some(o=>o===u.target||u.composedPath().includes(o));{const o=E(p);return o&&(u.target===o||u.composedPath().includes(o))}});function g(u){const p=T(u);return p&&p.$.subTree.shapeFlag===16}function s(u,p){const o=T(u),a=o.$.subTree&&o.$.subTree.children;return a==null||!Array.isArray(a)?!1:a.some(m=>m.el===p.target||p.composedPath().includes(m.el))}const c=u=>{const p=E(t);if(u.target!=null&&!(!(p instanceof Element)&&g(t)&&s(t,u))&&!(!p||p===u.target||u.composedPath().includes(p))){if(u.detail===0&&(i=!v(u)),!i){i=!0;return}n(u)}};let y=!1;const h=[S(l,"click",u=>{y||(y=!0,setTimeout(()=>{y=!1},0),c(u))},{passive:!0,capture:r}),S(l,"pointerdown",u=>{const p=E(t);i=!v(u)&&!!(p&&!u.composedPath().includes(p))},{passive:!0}),d&&S(l,"blur",u=>{setTimeout(()=>{var p;const o=E(t);((p=l.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(o!=null&&o.contains(l.document.activeElement))&&n(u)},0)})].filter(Boolean);return()=>h.forEach(u=>u())}const re=500,ie=10;function ce(t,n,e){var l,f;const r=C(()=>E(t));let d,i,v,g=!1;function s(){d&&(clearTimeout(d),d=void 0),i=void 0,v=void 0,g=!1}function c(o){var a,m,w;const[_,A,O]=[v,i,g];if(s(),!(e!=null&&e.onMouseUp)||!A||!_||(a=e==null?void 0:e.modifiers)!=null&&a.self&&o.target!==r.value)return;(m=e==null?void 0:e.modifiers)!=null&&m.prevent&&o.preventDefault(),(w=e==null?void 0:e.modifiers)!=null&&w.stop&&o.stopPropagation();const M=o.x-A.x,D=o.y-A.y,$=Math.sqrt(M*M+D*D);e.onMouseUp(o.timeStamp-_,$,O)}function y(o){var a,m,w,_;(a=e==null?void 0:e.modifiers)!=null&&a.self&&o.target!==r.value||(s(),(m=e==null?void 0:e.modifiers)!=null&&m.prevent&&o.preventDefault(),(w=e==null?void 0:e.modifiers)!=null&&w.stop&&o.stopPropagation(),i={x:o.x,y:o.y},v=o.timeStamp,d=setTimeout(()=>{g=!0,n(o)},(_=e==null?void 0:e.delay)!=null?_:re))}function h(o){var a,m,w,_;if((a=e==null?void 0:e.modifiers)!=null&&a.self&&o.target!==r.value||!i||(e==null?void 0:e.distanceThreshold)===!1)return;(m=e==null?void 0:e.modifiers)!=null&&m.prevent&&o.preventDefault(),(w=e==null?void 0:e.modifiers)!=null&&w.stop&&o.stopPropagation();const A=o.x-i.x,O=o.y-i.y;Math.sqrt(A*A+O*O)>=((_=e==null?void 0:e.distanceThreshold)!=null?_:ie)&&s()}const b={capture:(l=e==null?void 0:e.modifiers)==null?void 0:l.capture,once:(f=e==null?void 0:e.modifiers)==null?void 0:f.once},u=[S(r,"pointerdown",y,b),S(r,"pointermove",h,b),S(r,["pointerup","pointerleave"],c,b)];return()=>u.forEach(o=>o())}function le(){const t=P(!1),n=X();return n&&V(()=>{t.value=!0},n),t}function N(t){const n=le();return C(()=>(n.value,!!t()))}function W(t,n={}){const{controls:e=!1,navigator:l=U}=n,f=N(()=>l&&"permissions"in l),r=R(),d=typeof t=="string"?{name:t}:t,i=R(),v=()=>{var s,c;i.value=(c=(s=r.value)==null?void 0:s.state)!=null?c:"prompt"};S(r,"change",v);const g=te(async()=>{if(f.value){if(!r.value)try{r.value=await l.permissions.query(d)}catch{r.value=void 0}finally{v()}if(e)return Y(r.value)}});return g(),e?{state:i,isSupported:f,query:g}:i}function de(t={}){const{navigator:n=U,read:e=!1,source:l,copiedDuring:f=1500,legacy:r=!1}=t,d=N(()=>n&&"clipboard"in n),i=W("clipboard-read"),v=W("clipboard-write"),g=C(()=>d.value||r),s=P(""),c=P(!1),y=ne(()=>c.value=!1,f);function h(){d.value&&o(i.value)?n.clipboard.readText().then(a=>{s.value=a}):s.value=p()}g.value&&e&&S(["copy","cut"],h);async function b(a=T(l)){g.value&&a!=null&&(d.value&&o(v.value)?await n.clipboard.writeText(a):u(a),s.value=a,c.value=!0,y.start())}function u(a){const m=document.createElement("textarea");m.value=a??"",m.style.position="absolute",m.style.opacity="0",document.body.appendChild(m),m.select(),document.execCommand("copy"),m.remove()}function p(){var a,m,w;return(w=(m=(a=document==null?void 0:document.getSelection)==null?void 0:a.call(document))==null?void 0:m.toString())!=null?w:""}function o(a){return a==="granted"||a==="prompt"}return{isSupported:g,text:s,copied:c,copy:b}}const ue={multiple:!0,accept:"*",reset:!1,directory:!1};function fe(t={}){const{document:n=oe}=t,e=P(null),{on:l,trigger:f}=F(),{on:r,trigger:d}=F();let i;n&&(i=n.createElement("input"),i.type="file",i.onchange=s=>{const c=s.target;e.value=c.files,f(e.value)},i.oncancel=()=>{d()});const v=()=>{e.value=null,i&&i.value&&(i.value="",f(null))},g=s=>{if(!i)return;const c={...ue,...t,...s};i.multiple=c.multiple,i.accept=c.accept,i.webkitdirectory=c.directory,K(c,"capture")&&(i.capture=c.capture),c.reset&&v(),i.click()};return{files:j(e),open:g,reset:v,onCancel:r,onChange:l}}export{de as a,se as b,ce as o,fe as u};
