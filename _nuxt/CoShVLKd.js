import x from"./BijS5bB5.js";import D from"./MtkiRzZo.js";import{_ as E}from"./B3xZaY2q.js";import M from"./DraWZM9Q.js";import{_ as P}from"./Cw1vcRV3.js";import{_ as w}from"./C4q7IvsE.js";import{ar as F,c as N}from"./CDxOiNp2.js";import{V as O}from"./BIHoiRZk.js";import{d as R,r as z,a as A,U as I,a9 as Y,Q as l,R as c,F as L,l as n,a4 as i,V as d,Z as u,W as f,S as Q,a5 as T,u as m,Y as W,k as X,aa as Z,n as j}from"./CBwktElb.js";const q=["textContent"],G=["href"],ae=R({__name:"UserSelector",props:{user:{},add:{type:Boolean}},setup(_){const s=_,C=F(),p=N(),o=z({enabled:!1,x:0,y:0}),r=A(!1);function g(){p.push(s.user.route)}function U(){r.value=!0}function v(e){if(C.mdAndUp.value){p.push(s.user.route);return}o.enabled=!0}function k(e){e.preventDefault(),o.enabled=!1,o.x=e.clientX,o.y=e.clientY,j(()=>{o.enabled=!0})}return I(async()=>{s.user&&await s.user.loadUserClient()}),(e,t)=>{const V=Y("router-link"),b=x,h=D,y=E,S=M,B=P,$=w;return l(),c("div",{class:Z(["ig-profile-selector",{"ig-profile-selector--add":e.add}])},[e.user?(l(),c(L,{key:0},[n(V,{to:e.user.route},null,8,["to"]),i("a",{class:"cursor-pointer",onClick:v,onContextmenu:k},[(l(),d(Q,null,{default:u(()=>[n(h,{avatar:e.user.profile.avatar},{inner:u(()=>[e.user.hasLocalChanges||e.user.hasUnsavedChanges?(l(),d(b,{key:0})):f("",!0)]),_:1},8,["avatar"])]),_:1})),i("h3",{class:"mt-4 text-truncate",textContent:T(e.user.profile.username)},null,8,q),n(S,{modelValue:m(o).enabled,"onUpdate:modelValue":t[0]||(t[0]=a=>m(o).enabled=a)},{default:u(()=>[n(y,{onOpen:g,onEdit:U,user:e.user},null,8,["user"])]),_:1},8,["modelValue"])],32),i("a",{class:"d-inline-block text-blue-grey-lighten-2 mt-n1",href:e.user.profile.publicProfile,target:"_blank"},[n(O,{icon:"mdi-arrow-top-right",size:"14px"})],8,G)],64)):f("",!0),W(e.$slots,"default"),n($,{title:e.$t("common.actions.editProfile"),modelValue:m(r),"onUpdate:modelValue":t[2]||(t[2]=a=>X(r)?r.value=a:null)},{default:u(()=>[n(B,{user:e.user,onClose:t[1]||(t[1]=a=>r.value=!1)},null,8,["user"])]),_:1},8,["title","modelValue"])],2)}}});export{ae as _};
