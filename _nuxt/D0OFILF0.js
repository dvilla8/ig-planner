import x from"./BDbwrafv.js";import D from"./B1uPTWcd.js";import{_ as E}from"./Dbs2m-92.js";import P from"./BbDgrHzh.js";import{_ as M}from"./BtbWdv2L.js";import{_ as F}from"./CJsxFvUP.js";import{ar as N,c as O}from"./B6w2PrMr.js";import{V as R}from"./zAwBFt0n.js";import{d as w,r as z,a as A,a9 as I,Q as a,R as c,F as Y,l as n,a4 as u,V as d,Z as l,W as f,S as L,a5 as Q,u as i,Y as T,k as W,aa as X,n as Z}from"./CBwktElb.js";const j=["textContent"],q=["href"],se=w({__name:"UserSelector",props:{user:{},add:{type:Boolean}},setup(_){const m=_,g=N(),p=O(),o=z({enabled:!1,x:0,y:0}),r=A(!1);function C(){p.push(m.user.route)}function v(){r.value=!0}function k(e){if(g.mdAndUp.value){p.push(m.user.route);return}o.enabled=!0}function U(e){e.preventDefault(),o.enabled=!1,o.x=e.clientX,o.y=e.clientY,Z(()=>{o.enabled=!0})}return(e,t)=>{const V=I("router-link"),b=x,h=D,y=E,S=P,B=M,$=F;return a(),c("div",{class:X(["ig-profile-selector",{"ig-profile-selector--add":e.add}])},[e.user?(a(),c(Y,{key:0},[n(V,{to:e.user.route},null,8,["to"]),u("a",{class:"cursor-pointer",onClick:k,onContextmenu:U},[(a(),d(L,null,{default:l(()=>[n(h,{avatar:e.user.profile.avatar},{inner:l(()=>[e.user.hasLocalChanges||e.user.hasUnsavedChanges?(a(),d(b,{key:0})):f("",!0)]),_:1},8,["avatar"])]),_:1})),u("h3",{class:"mt-4 text-truncate",textContent:Q(e.user.profile.username)},null,8,j),n(S,{modelValue:i(o).enabled,"onUpdate:modelValue":t[0]||(t[0]=s=>i(o).enabled=s)},{default:l(()=>[n(y,{onOpen:C,onEdit:v,user:e.user},null,8,["user"])]),_:1},8,["modelValue"])],32),u("a",{class:"d-inline-block text-blue-grey-lighten-2 mt-n1",href:e.user.profile.publicProfile,target:"_blank"},[n(R,{icon:"mdi-arrow-top-right",size:"14px"})],8,q)],64)):f("",!0),T(e.$slots,"default"),n($,{title:e.$t("common.actions.editProfile"),modelValue:i(r),"onUpdate:modelValue":t[2]||(t[2]=s=>W(r)?r.value=s:null)},{default:l(()=>[n(B,{user:e.user,onClose:t[1]||(t[1]=s=>r.value=!1)},null,8,["user"])]),_:1},8,["title","modelValue"])],2)}}});export{se as _};
