import E from"./CJM4q4Ct.js";import $ from"./BGXy50_e.js";import{_ as D}from"./dYJhomU6.js";import M from"./tDtZ409J.js";import{_ as P}from"./BYlASwxg.js";import{_ as w}from"./BxKsCmMu.js";import{e as F,bg as N,l as O,ag as z,r as A,y as I,o as s,c,F as R,b as t,a as u,f as i,w as l,i as f,a2 as L,t as T,g as m,V as X,$ as Y,a5 as j,a7 as q,as as G}from"./CZ8OrWeD.js";const H=["textContent"],J=["href"],te=F({__name:"UserSelector",props:{user:{},add:{type:Boolean}},setup(_){const p=_,g=N(),d=O(),o=z({enabled:!1,x:0,y:0}),r=A(!1);function v(){d.push(p.user.route)}function C(){r.value=!0}function k(e){if(g.mdAndUp.value){d.push(p.user.route);return}o.enabled=!0}function U(e){e.preventDefault(),o.enabled=!1,o.x=e.clientX,o.y=e.clientY,G(()=>{o.enabled=!0})}return(e,n)=>{const b=I("router-link"),y=E,V=$,h=D,S=M,x=P,B=w;return s(),c("div",{class:q(["dx-profile-selector",{"dx-profile-selector--add":e.add}])},[e.user?(s(),c(R,{key:0},[t(b,{to:e.user.route},null,8,["to"]),u("a",{class:"cursor-pointer",onClick:k,onContextmenu:U},[(s(),i(L,null,{default:l(()=>[(s(),i(V,{key:e.user.profile.avatar,avatar:e.user.profile.avatar},{inner:l(()=>[e.user.hasLocalChanges||e.user.hasUnsavedChanges?(s(),i(y,{key:0})):f("",!0)]),_:1},8,["avatar"]))]),_:1})),u("h3",{class:"mt-4 text-truncate",textContent:T(e.user.profile.username)},null,8,H),t(S,{modelValue:m(o).enabled,"onUpdate:modelValue":n[0]||(n[0]=a=>m(o).enabled=a)},{default:l(()=>[t(h,{onOpen:v,onEdit:C,user:e.user},null,8,["user"])]),_:1},8,["modelValue"])],32),u("a",{class:"d-inline-block text-blue-grey-lighten-2 mt-n1",href:e.user.profile.publicProfile,target:"_blank"},[t(X,{icon:"mdi-arrow-top-right",size:"14px"})],8,J)],64)):f("",!0),Y(e.$slots,"default"),t(B,{edit:"",modelValue:m(r),"onUpdate:modelValue":n[2]||(n[2]=a=>j(r)?r.value=a:null)},{default:l(()=>[t(x,{user:e.user,onClose:n[1]||(n[1]=a=>r.value=!1)},null,8,["user"])]),_:1},8,["modelValue"])],2)}}});export{te as _};
